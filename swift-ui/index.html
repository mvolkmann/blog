<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>SwiftUI</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#getting-started">Getting Started</a><ol><li><a href="#canvas-%2F-preview">Canvas / Preview</a></li><li><a href="#simulator">Simulator</a></li></ol></li><li><a href="#mvvm">MVVM</a></li><li><a href="#icons">Icons</a></li><li><a href="#views">Views</a><ol><li><a href="#combiner-views">Combiner Views</a></li><li><a href="#component-views">Component Views</a></li><li><a href="#drawing-views">Drawing Views</a></li><li><a href="#other-views">Other Views</a></li><li><a href="#view-modifiers">View Modifiers</a></li><li><a href="#view-state">View State</a></li></ol></li><li><a href="#utility-functions">Utility Functions</a></li><li><a href="#key-paths">Key Paths</a></li><li><a href="#contexts">Contexts</a></li><li><a href="#environments">Environments</a></li><li><a href="#network-requests">Network Requests</a></li><li><a href="#combine">Combine</a></li><li><a href="#core-data">Core Data</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://developer.apple.com/xcode/swiftui/?v=1.0.18" rel="noopener" target="_blank">SwiftUI</a> is a Swift library for building macOS, iOS, and Apple Watch apps.</p><h2 id="resources">Resources</h2><h2 id="getting-started">Getting Started</h2><ul><li>open Xcode</li><li>select &quot;Create a new Xcode project&quot;</li><li>select an Application type such as &quot;App&quot; and click &quot;Next&quot;</li><li>enter a Product Name</li><li>select a Team such as &quot;your name (Personal Team)&quot;</li><li>enter an Organization Identifier such as your email address</li><li>select the Interface such as &quot;SwiftUI&quot;</li><li>select the Language such as &quot;Swift&quot;</li><li>check &quot;Use Core Data&quot; to persist data in a local database</li><li>check &quot;Include Tests&quot; to enable writing unit tests</li><li>click &quot;Next&quot;</li><li>select the directory where the project will be stored and click &quot;Create&quot;</li><li>press the black, right-pointing triangle near the top to build and run the starting version of the app in the simulator</li><li>to change the device being simulated, click the device drop-down after the app name near the top and select the device type (such as &quot;iPhone 12 mini&quot;)</li></ul><p>A new &quot;App&quot; project begins with the following files.</p><ul><li><p><code>{app-name}.swift</code></p><p>This defines the main struct which implements the <code>App</code> protocol. It has computed property named <code>body</code> whose value implements the <code>Scene</code> protocol. The actual value is an instance of <code>WindowGroup</code>. This renders an instance of <code>ContentView</code> which is defined in the next file.</p></li><li><p><code>ContentView.swift</code></p><p>This defines the <code>ContentView</code> struct which implements the <code>View</code> protocol and is the top of the user interface. It also defines the <code>ContentView_Previews</code> struct which describes what the Preview area should display. This can be one or more views that are each displayed in a separate Preview.</p></li><li><p><code>Assets.xcassets</code></p><p>This associates names with assets such as images, audio files, and video files.</p></li><li><p><code>{app-name}.xcodeproj</code></p><p>This file is not visible in the Navigator, but can be viewed and edited by clicking the top entry in the navigator. The editor for this data has the following tabs: General, Signing &amp; Capabilities, Resource Tags, Info, Build Settings, Build Phases, and Build Rules. The General tab configures the app display name, version of iOS, targets (iPhone, iPad, or Mac), status bar style, and more.</p></li></ul><p>To add a particular kind of provided UI View in a <code>.swift</code> file, manually enter code or click where it should go in the code and click the &quot;+&quot; in the upper-right. Clicking the &quot;+&quot; displays a dialog with a list provided View types. Selecting one displays related documentation and code examples. Double-click a View type to insert code for it.</p><h3 id="canvas-%2F-preview">Canvas / Preview</h3><p>The Canvas area displays Previews of the UI running outside of a simulator. To hide/show the Canvas area, select Editor ... Canvas. If Preview isn't running inside the Canvas area, press the &quot;Resume&quot; button at the top to start it.</p><p>When code changes are saved and there are no errors, the Preview is automatically updated. When there are errors, the Preview pauses and must be manually restarted by click the &quot;Resume&quot; button or pressing cmd-option-p. TODO: Are there other things that cause the Preview to pause?</p><p>To zoom in and out on the Preview area, click the magnifier glass icons in the lower right (minus and plus) or select a zoom level from the percent dropdown.</p><p>By default the Preview is not in &quot;Live Preview&quot; mode. Key things to know about not being in this mode include:</p><ul><li>Clicking a View in the Preview selects it rather than triggering tap events. The corresponding code is highlighted and the Navigator changes to show the properties of the selected View.</li><li>Double-clicking a View in the Preview is similar, but moves focus to the code so it can be edited.</li><li>Clicking a View in the code selects the corresponding View in the Preview and also populates the Navigator.</li><li>Changes made in the Navigator update the Preview and the code, but they do not take effect until focus is moved out of the modified Navigator field.</li></ul><p>To switch to &quot;Live Preview&quot; mode so tap events are honored, click the button with a triangle inside a circle.</p><p>It is possible for the Preview area to show more than one preview. This is controlled by the <code>ContentView_Previews</code> struct defined in <code>ContentView.swift</code>. For example, the following renders the app in light mode, the app in dark mode, and a single component to test in isolation from the rest of the app.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token builtin">ContentView_Previews</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">preferredColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">.</span>light<span class="token punctuation">)</span><br>        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">preferredColorScheme</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dark<span class="token punctuation">)</span><br>        <span class="token function">CircleButton</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// action that does nothing</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Note that if any of the previews are in &quot;Live Preview&quot; mode, only that preview will be displayed. Exit out of that mode to get the other previews to display again.</p><h3 id="simulator">Simulator</h3><p>To run the app in the Simulator, click the black triangle at the top. That builds the app, launches the Simulator (if not already running), loads the app in the Simulator, and starts it. The app is not automatically updates when code changes are saved. The triangle must be clicked again to repeat the whole build/load/start process.</p><h2 id="mvvm">MVVM</h2><p>SwiftUI uses the Model-View-ViewModel paradigm. The Model holds data and application logic. The View decides what to render. The View gets data from the ViewModel. The ViewModel binds views to a model. It gets data from the Model and optionally transforms it before sending it to the View. For example, it could get the result of a SQL query from the Model and turn it into an array of objects that it passes to the View.</p><p>TODO: Does the view send events to the ViewModel which sends them to the Model?</p><h2 id="icons">Icons</h2><p><a href="https://developer.apple.com/sf-symbols/?v=1.0.18" rel="noopener" target="_blank">SF Symbols</a> is a library of over 3000 icons provided by Apple. To use it, browse the website linked above and click the &quot;Download&quot; link. This downloads a <code>.dmg</code> file. Double-click this and double-click the <code>.pkg</code> file icon to install the library and the &quot;SF Symbols&quot; app. To discover icon names, launch the &quot;SF Symbols&quot; app, browse the collection of icons, and click them.</p><p>To use an icon in a SwiftUI app, add an <code>Image</code> view. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token function">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string">"cloud.snow"</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="views">Views</h2><p>Every visible part of an app created with SwiftUI is a view. Views can render other views.</p><p>Each view is a struct that implement the <code>View</code> protocol. This requires having a computed property named <code>body</code> with the type <code>Some View</code>.</p><p>Views are used for components and layout. Views that layout other views are often referred to as &quot;combiner views&quot;.</p><p>Functions that create views often take another function as their last argument. Calls to these frequently uses trailing closures.</p><h3 id="combiner-views">Combiner Views</h3><p>Combiner views combine other views. They act as a container of other views and layout those views in a specific way.</p><p>Combiner views can be passed a special kind of closure as their last argument that is called a <code>ViewBuilder</code>. These accept one to ten other Views. A <code>ViewBuilder</code> is a kind of result builder. For more information on these, see the <a href="https://github.com/apple/swift-evolution/blob/main/proposals/0289-result-builders.md?v=1.0.18" rel="noopener" target="_blank">Result builders proposal</a>.</p><p>Combiner views also support conditional logic with <code>if</code> and <code>switch</code> statements. However, no other Swift syntax is allowed in them. For iteration in a <code>ViewBuilder</code>, use a <code>ForEach</code> <code>View</code>.</p><ul><li><p>HStack</p></li><li><p>VStack</p></li><li><p>ZStack</p></li><li><p>LazyHStack</p></li><li><p>LazyVStack</p></li><li><p>LazyHGrid</p></li><li><p>LazyVGrid</p></li><li><p>GridItem</p></li><li><p>Form</p></li><li><p>Group</p></li><li><p>GroupBox</p></li><li><p>ControlGroup</p></li><li><p>ScrollView</p></li><li><p>ScrollViewReader</p></li><li><p>ScrollViewProxy</p></li><li><p>List</p></li><li><p>Section</p></li><li><p>ForEach</p></li><li><p>DynamicViewContent</p></li><li><p>Table</p></li><li><p>NavigationView</p></li><li><p>NavigationLink</p></li><li><p>OutlineGroup</p></li><li><p>DisclosureGroup</p></li><li><p>TabView</p></li><li><p>HSplitView</p></li><li><p>VSplitView</p></li><li><p>TimelineView</p></li></ul><h3 id="component-views">Component Views</h3><ul><li><p>Text</p></li><li><p>TextField</p></li><li><p>SecureField</p></li><li><p>TextEditor</p></li><li><p>Image</p></li><li><p>AsyncImage</p></li><li><p>Button</p><p>Here are two ways to create a <code>Button</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// Button containing text and action specified with a trailing closure.</span><br><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"My Label"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// code to run when button is pressed</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Button with an "action" argument whose value</span><br><span class="token comment">// can be a closure or a function reference</span><br><span class="token comment">// and a "contents" argument whose value is a ViewBuilder</span><br><span class="token comment">// that can be written as a trailing closure.</span><br><br><span class="token function">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token comment">// code to run when button is pressed</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"My Label"</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre></li><li><p>EditButton</p></li><li><p>PasteButton</p></li><li><p>Link</p></li><li><p>Menu</p></li><li><p>Toggle</p></li><li><p>Slider</p></li><li><p>Stepper</p></li><li><p>Picker</p></li><li><p>DatePicker</p></li><li><p>ColorPicker</p></li><li><p>Label</p></li><li><p>ProgressView</p></li><li><p>Gauge</p></li><li><p>EmptyView</p></li><li><p>EquatableView</p></li><li><p>AnyView</p></li><li><p>TupleView</p></li></ul><p>Here is an example of using combiner and component views. Note how these can be assigned to a variable that is later referenced to render them. They can also be placed in a new struct from which instances are created to render them.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// Defining a custom View that is used below</span><br><span class="token keyword">struct</span> <span class="token builtin">MyRow</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token builtin">HStack</span> <span class="token punctuation">{</span><br>            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Six"</span><span class="token punctuation">)</span><br>            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Seven"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Assigning a View to a variable</span><br>    <span class="token keyword">var</span> row <span class="token operator">=</span> <span class="token builtin">HStack</span> <span class="token punctuation">{</span><br>        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Four"</span><span class="token punctuation">)</span><br>        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Five"</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token builtin">VStack</span> <span class="token punctuation">{</span><br>            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"One"</span><span class="token punctuation">)</span><br>            <span class="token builtin">HStack</span> <span class="token punctuation">{</span><br>                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Two"</span><span class="token punctuation">)</span><br>                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Three"</span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>            <span class="token comment">// Referring to a variable to get a View</span><br>            <span class="token comment">// and chaining View modifiers</span><br>            row<span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>            <span class="token function">MyRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Creating a custom View instance</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="drawing-views">Drawing Views</h3><ul><li><p>Capsule</p></li><li><p>Circle</p></li><li><p>Circle</p></li><li><p>Ellipse</p></li><li><p>Path</p></li><li><p>Rectangle</p></li><li><p>RoundedRectangle</p></li><li><p>ContainerRelativeShape</p></li><li><p>OffsetShape</p></li><li><p>RotatedShape</p></li><li><p>ScaledShape</p></li><li><p>TransformedShape</p></li><li><p>AnyShapeShape</p></li><li><p>AnimatablePair</p></li><li><p>Animation</p></li><li><p>AnyTransition</p></li><li><p>EmptyAnimatableData</p></li><li><p>Anchor</p></li><li><p>Angle</p></li><li><p>GeometryProxy</p></li><li><p>GeometryReader</p></li><li><p>ProjectionTransform</p></li><li><p>UnitPoint</p></li></ul><h3 id="other-views">Other Views</h3><ul><li>Spacer</li><li>Divider</li></ul><p>TODO: Are <code>Color</code> and <code>LinearGradient</code> views?</p><h3 id="view-modifiers">View Modifiers</h3><p>View modifiers are methods that can be called on a view to create a new view that is like the receiver, but modified in a specific way. For example, the <code>foregroundColor</code> method is a view modifier that can be used as follows.</p><pre class="language-swift"><code class="language-swift"><span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></code></pre><h3 id="view-state">View State</h3><p>All views are immutable structs. Typically they get mutable data from a model. They can also have associated mutable data by applying the <code>@State</code> property wrapper to a property.</p><p>Properties with <code>@State</code> are typically only used for temporary data related to styling details. Such data is held outside of the struct and the struct holds a pointer to it.</p><p>The following example holds the status of a stoplight in the &quot;status&quot; state property. Note the use of <code>$</code> before the name to get a two-way binding with a <code>TextField</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span><br><br><span class="token keyword">struct</span> <span class="token builtin">CircleButton</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> color<span class="token punctuation">:</span> <span class="token builtin">Color</span><br>    <span class="token keyword">var</span> selected<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span><br>    <span class="token keyword">var</span> action<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">Void</span> <span class="token comment">// a function</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token function">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> action<span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>            <span class="token builtin">ZStack</span> <span class="token punctuation">{</span><br>                <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><br>                <span class="token comment">// Conditional logic can be implemented with an "if" statement,</span><br>                <span class="token comment">// but iteration cannot be implemented with a "for-in" loop.</span><br>                <span class="token comment">// A "ForEach" View must be used instead.</span><br>                <span class="token comment">//TODO: Why the difference?</span><br>                <span class="token keyword">if</span> selected <span class="token punctuation">{</span><br>                    <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">strokeBorder</span><span class="token punctuation">(</span><span class="token builtin">Color</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span> lineWidth<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token builtin">Light</span><span class="token punctuation">:</span> <span class="token builtin">Identifiable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token builtin">String</span><br>    <span class="token keyword">let</span> color<span class="token punctuation">:</span> <span class="token builtin">Color</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token builtin">MyTextField</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token builtin">String</span><br>    <span class="token keyword">var</span> text<span class="token punctuation">:</span> <span class="token builtin">Binding</span><span class="token operator">&lt;</span><span class="token builtin">String</span><span class="token operator">></span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token function">TextField</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> text<span class="token punctuation">:</span> text<span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">autocapitalization</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token keyword">none</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">textFieldStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>roundedBorder<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This file must define a struct named "ContentView".</span><br><span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span><br>    @<span class="token builtin">State</span> <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token string">"stop"</span><br><br>    <span class="token keyword">let</span> lights<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Light</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token function">Light</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">"stop"</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token function">Light</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">"yield"</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token function">Light</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token string">"go"</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">)</span><br>    <span class="token punctuation">]</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span><br>        <span class="token builtin">VStack</span> <span class="token punctuation">{</span><br>            <span class="token comment">// When iterating over elements that do not conform to</span><br>            <span class="token comment">// the `Identifiable` protocol, add the "id:" argument</span><br>            <span class="token comment">// whose value is a key path that specifies</span><br>            <span class="token comment">// how to find something unique in the element.</span><br>            <span class="token function">ForEach</span><span class="token punctuation">(</span>lights<span class="token punctuation">)</span> <span class="token punctuation">{</span> light <span class="token keyword">in</span><br>                <span class="token function">CircleButton</span><span class="token punctuation">(</span><br>                    color<span class="token punctuation">:</span> light<span class="token punctuation">.</span>color<span class="token punctuation">,</span><br>                    selected<span class="token punctuation">:</span> status <span class="token operator">==</span> light<span class="token punctuation">.</span>id<br>                <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                    status <span class="token operator">=</span> light<span class="token punctuation">.</span>id<br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            <span class="token comment">// $ in front of status is needed for a two-way binding.</span><br>            <span class="token comment">// $ in front of status is needed for a two-way binding.</span><br>            <span class="token function">MyTextField</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string">"status"</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $status<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="utility-functions">Utility Functions</h2><p>The <a href="https://developer.apple.com/documentation/swift/1539127-dump?v=1.0.18" rel="noopener" target="_blank">dump</a> function takes a value and prints it for debugging purposes. The value can be non-primitive such as an object or array. Optional arguments that follow the value include <code>name</code>, <code>indent</code>, <code>maxDepth</code>, and <code>maxItems</code>.</p><h2 id="key-paths">Key Paths</h2><p>A <a href="https://www.youtube.com/watch?v=YY7SlOklZzk?v=1.0.18" rel="noopener" target="_blank">key path</a> refers to a property in a struct or class rather than the value of a property in a particular instance.</p><p>A key path can be created with a backslash followed by a type name, a period, and a property name. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token builtin">Person</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token builtin">String</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> namePath <span class="token operator">=</span> \<span class="token builtin">Person</span><span class="token punctuation">.</span>name</code></pre><p>A key path can be used to get the value of a property from an instance of a struct or class. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">"Mark"</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> namePath<span class="token punctuation">]</span> <span class="token comment">// "Mark"</span></code></pre><p>TODO: What kind of key path does <code>\self</code> create?</p><h2 id="contexts">Contexts</h2><p>A SwiftUI context is ... Most apps only use a single context.</p><h2 id="environments">Environments</h2><p>A SwiftUI environment specifies key/value pairs that affect all sub-views of the view on which they are specified. For example, if a font is specified on a <code>VStack</code> then it becomes the default found for all views nested inside it at any depth.</p><p>To dump the contents on the current environment of a view, chain the following onto the view:</p><pre class="language-swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">transformEnvironment</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">dump</span><span class="token punctuation">(</span>$<span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></code></pre><p>TODO: <a href="https://www.youtube.com/watch?v=SUiITSkAqAo&amp;t=548s">https://www.youtube.com/watch?v=SUiITSkAqAo&amp;t=548s</a></p><h2 id="network-requests">Network Requests</h2><p>TODO: <a href="https://www.youtube.com/watch?v=2NowSN4qJUY&amp;t=729s">https://www.youtube.com/watch?v=2NowSN4qJUY&amp;t=729s</a></p><h2 id="combine">Combine</h2><p>TODO: <a href="https://www.youtube.com/watch?v=bRpFHqv0tRQ&amp;t=701s">https://www.youtube.com/watch?v=bRpFHqv0tRQ&amp;t=701s</a></p><h2 id="core-data">Core Data</h2><p>TODO: <a href="https://www.youtube.com/watch?v=091Mdv_Rjb4">https://www.youtube.com/watch?v=091Mdv_Rjb4</a></p><p>Core Data is an object/graph persistence framework. It supports many features including data validation, undo/redo, and lazy loading.</p><p>The easiest way to setup use of Core Data is to check the &quot;Use Core Data&quot; checkbox on the options panel when creating a new project. While it is possible to add the use of Core Data to an existing app, the setup steps are quite involved.</p><p>The generated files setup use of Core Data. The file <code>{app-name}App.swift</code> registers an &quot;environment&quot; with the main <code>ContentView</code> that uses a <code>PersistenceController</code> instance defined in <code>Persistence.swift</code> and made available through a static <code>shared</code> property. The main view defined in <code>ContentView.swift</code> has access to this and uses the <code>@FetchRequest</code> property wrapper to get <code>Item</code> objects from the persistent store. The <code>Item</code> type is defined in <code>{app-name}.xcdatamodeld</code> and has a single attribute <code>timestamp</code>.</p><p>The generated app is fully functional. It displays a list of items that each have a timestamp. Tap an item to get to a page that displays detail about just that item. To delete an item, swipe it left and click the &quot;Delete&quot; button that appears. To add an item with the current timestamp, click the &quot;+&quot; button at the top. To delete items without swiping them, click the &quot;Edit&quot; button at the top. This displays a red circle containing a minus sign to left of each item. Click those to delete items. When finished, click the &quot;Done&quot; button at the top that replaced the &quot;Edit&quot; button. From here you can edit the code to provide your own CRUD functionality.</p><p>To define additional entity types that can be persisted, and possibly delete the provided <code>Item</code> type, click the <code>{app-name}.xcdatamodeld</code> file in the Navigator pane. This will display an entity editor.</p><p>To add entities, click the &quot;Add Entity&quot; button at the bottom. This will create an empty entity named &quot;Entity&quot;. Double-click the name to change it. These become the names of generated class definitions, so they should begin with an uppercase letter. The generated classes inherit from <code>NSManagedObject</code>.</p><p>To add attributes to an entity, click the &quot;+&quot; at the bottom of the attribute list. For each attribute, enter a name and select a type.</p><p>To create an initial set of objects, edit the <code>preview</code> property defined in <code>Persistence.swift</code>. For example:</p><pre class="language-swift"><code class="language-swift"><br>``<br><br><span class="token builtin">If</span> you see errors that say <span class="token string">"cannot find type 'SomeEntityName' in scope"</span><span class="token punctuation">,</span><br>restart <span class="token builtin">Xcode</span><span class="token punctuation">.</span></code></pre></article>