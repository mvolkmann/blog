<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>LÖVE</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#documentation">Documentation</a></li><li><a href="#installing">Installing</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#running">Running</a></li><li><a href="#bundling">Bundling</a></li><li><a href="#auto-restarts">Auto-Restarts</a></li><li><a href="#colors">Colors</a></li><li><a href="#fonts">Fonts</a></li><li><a href="#images">Images</a></li><li><a href="#sounds">Sounds</a></li><li><a href="#graphics">Graphics</a></li><li><a href="#frame-rate">Frame Rate</a></li><li><a href="#cursor">Cursor</a></li><li><a href="#keys">Keys</a></li><li><a href="#mouse-clicks">Mouse Clicks</a></li><li><a href="#background-scrolling">Background Scrolling</a></li><li><a href="#physics">Physics</a></li><li><a href="#deploying">Deploying</a><ol><li><a href="#web">Web</a></li><li><a href="#ios">iOS</a></li></ol></li><li><a href="#optimizations">Optimizations</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://love2d.org/?v=1.0.21" rel="noopener" target="_blank">LÖVE</a> is &quot;an <em>awesome</em> framework you can use to make 2D games in Lua. It's free, open-source, and works on Windows, Mac OS X, Linux, Android and iOS.&quot;</p><p>LÖVE can be downloaded from the previous link.</p><p>LÖVE use LuaJIT which mostly only supports Lua 5.1. It includes some Lua 5.2 and 5.3 features.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://discord.gg/r5JjuFU8?v=1.0.21" rel="noopener" target="_blank">LÖVE Game Framework Discord Channel</a></p></li><li><p><a href="https://www.youtube.com/watch?v=3k4CMAaNCuk&t=3309s?v=1.0.21" rel="noopener" target="_blank">Falling in LÖVE with Lua</a></p><p>This is a great YouTube video on the LÖVE framework. Colton Ogden walks through the beginnings of writing a Super Mario game. The source code is available at <a href="https://github.com/coltonoscopy/cs502019games-track/tree/master/mario?v=1.0.21" rel="noopener" target="_blank">cs502019games-track</a>.</p></li><li><p><a href="https://www.sheepolution.com/learn?v=1.0.21" rel="noopener" target="_blank">Sheepolution</a></p><p>&quot;Learn how to make games with LÖVE.&quot; This provides a series of articles and videos.</p></li><li><p><a href="https://love2d-community.github.io/love2d-book/?v=1.0.21" rel="noopener" target="_blank">love2d-book</a></p><p>This is a collaborative book about LÖVE. Clone the repository and follow the directions to generate a PDF.</p></li><li><p>The LÖVE <a href="https://love2d.org/wiki/Category:Snippets?v=1.0.21" rel="noopener" target="_blank">Snippets</a> page includes a list of snippets that each provide code that be copied for specific functionality. For example, it provides code for generating gradients and testing whether a point is in a shape.</p></li></ul><h2 id="documentation" tabindex="-1">Documentation</h2><p>The LÖVE home page is shown below:</p><p><img alt="LÖVE Home Page" style="width: 100%" src="/blog/assets/love2d-home-page.png?v=1.0.21" title="LÖVE Home Page"></p><p>Clicking the &quot;Wiki&quot; button in the upper-right navigates to the following page:</p><p><img alt="LÖVE Wiki" style="width: 100%" src="/blog/assets/love2d-wiki.png?v=1.0.21" title="LÖVE Wiki"></p><p>Click a module name in the left nav to see documentation on all of its functions.</p><h2 id="installing" tabindex="-1">Installing</h2><p>For macOS:</p><ul><li>Click the &quot;64-bit zipped&quot; link under &quot;macOS&quot; to download <code>love.app</code>.</li><li>Drag this file into the &quot;Applications&quot; directory.</li><li>Double-click <code>love.app</code> to launch the app. This will fail the first time with the message &quot;love.app cannot be opened because the developer cannot be verified&quot;. To fix this, open the Settings app, select &quot;Privacy &amp; Security&quot;, scroll down to &quot;love.app was blocked ...&quot; and click the &quot;Open Anyway&quot; button.</li></ul><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>To creating a new LÖVE app:</p><ul><li><p>Create a directory for the app.</p></li><li><p>Create the file <code>main.lua</code> in this directory.</p></li><li><p>Define the functions <code>love.load</code>, <code>love.update</code>, and <code>love.draw</code> in this file</p></li><li><p>Create the file <code>conf.lua</code> in this directory.</p></li><li><p>Add content like the following to configure the app:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> love <span class="token operator">=</span> require <span class="token string">"love"</span><br><br><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">conf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><br>  t<span class="token punctuation">.</span>modules<span class="token punctuation">.</span>joystick <span class="token operator">=</span> <span class="token keyword">false</span> <span class="token comment">-- when not supporting joystick use</span><br>  t<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"Monkey Nim"</span><br>  t<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token string">"11.4"</span>    <span class="token comment">-- version of Love2D</span><br>  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">393</span>  <span class="token comment">-- third of 1179 (iPhone 14 Pro width)</span><br>  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">852</span> <span class="token comment">-- third of 2556 (iPhone 14 Pro height)</span><br>  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>resizable <span class="token operator">=</span> <span class="token keyword">true</span> <span class="token comment">-- defaults to false</span><br><span class="token keyword">end</span></code></pre></li></ul><p>For a list of additional configuration options, see <a href="https://love2d.org/wiki/Config_Files?v=1.0.21" rel="noopener" target="_blank">Config Files</a>.</p><p>LÖVE apps always define the functions <code>love.load()</code>, <code>love.draw()</code>, and <code>love.update(dt)</code> in their <code>main.lua</code> file. The <code>love.load()</code> function performs initial game setup. The <code>love.draw()</code> function specifies what should be drawn on the screen at any point in time. The <code>love.update(dt)</code> function implements the game logic.</p><p>Variables whose values never change can be defined at the top level before the <code>love.load</code> function. Variables whose values change while the app runs can be declare as <code>local</code> at the top level, but should be set in the <code>love.load</code> function.</p><p>The <code>love.draw</code> and <code>love.update</code> functions are typically called 60 times per second (frame rate). The <code>vsync</code> option can be set to synchronize the frame rate with the refresh rate of the monitor. It can be set in the <code>conf.lua</code> file with <code>t.window.vsync = 1</code>. Alternatively it can be passed as an argument to the <code>love.graphics.setMode</code> function.</p><p>The parameter <code>dt</code> in the <code>love.update</code> function is short for &quot;delta time&quot;. This is used to make game updates frame rate independent. It is a floating point number that indicates the number of seconds requires to display each frame. This value can vary among devices. For example, when <code>dt</code> is <code>0.1</code>, the device displays 10 frames per second.</p><h2 id="running" tabindex="-1">Running</h2><p>The initial source file must be named <code>main.lua</code>. When the LÖVE app is run without this file, a window matching the screenshot below is displayed.</p><p><img alt="LÖVE No Game" style="width: 80%" src="/blog/assets/love2d-no-game.png?v=1.0.21" title="LÖVE No Game"></p><p>Note that the kite tail on the balloon says &quot;NO GAME&quot;.</p><p>There are many ways to run a LÖVE app:</p><ul><li><p>Start from a terminal window.</p><ol><li>Add the following in <code>~/.zshrc</code>:</li></ol><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">love</span><span class="token operator">=</span><span class="token string">"/Applications/love.app/Contents/MacOS/love"</span></code></pre><ol><li>Open a new terminal session.</li><li><code>cd</code> to your project directory.</li><li>Enter <code>love .</code></li></ol></li><li><p>Bundle the app files (as described in the next section) and double-click the bundle file.</p></li><li><p>Drag the app directory onto the Love application icon. In macOS, drag from the Finder.</p></li><li><p>Use VS Code.</p><ol><li>Start VS Code and open the project directory.</li><li>Install the extension &quot;Love2D Support&quot; from Pixelbyte Studios.</li><li>Click the gear icon and select &quot;Extension Settings&quot;.</li><li>Change &quot;Pixelbyte &gt; love2d: Path&quot; to &quot;/Applications/love.app/Contents/MacOS/love&quot;.</li><li>Open the <code>main.lua</code> file in an editor tab.</li><li>Press cmd-l to run the game.</li></ol></li></ul><h2 id="bundling" tabindex="-1">Bundling</h2><p>The source code and asset files (fonts, sounds, and images) can be bundled into a single file that can be double-clicked to run the app. To do this, create a zip file containing all the required files and make its extension <code>.love</code>.</p><p>Some projects contain files in the top project directory (such as shell scripts and documentation) that should not be included in the bundle file. To accommodate this, consider moving all the <code>.lua</code> and asset files into a subdirectory named <code>src</code>.</p><p>Create a shell script named <code>bundle</code> in the top directory of the project containing the following where <code>{project-name}</code> is replaced by the name of the project:</p><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env zsh</span><br><span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token punctuation">{</span>project-name<span class="token punctuation">}</span>.love<br><span class="token function">pushd</span> src<br><span class="token function">zip</span> <span class="token parameter variable">-r</span> <span class="token punctuation">..</span>/<span class="token punctuation">{</span>project-name<span class="token punctuation">}</span>.love *<br><span class="token function">popd</span></code></pre><p>Make the <code>bundle</code> script executable by entering <code>chmod a+x bundle</code>.</p><p>Enter <code>./bundle</code> to bundle the app into a <code>.love</code> file. Double-click this file to run the app locally.</p><h2 id="auto-restarts" tabindex="-1">Auto-Restarts</h2><p>It is convenient to configure the app to restart any time a file within the project is modified. The Lua module <a href="https://github.com/rxi/lurker?v=1.0.21" rel="noopener" target="_blank">lurker</a> is perfect for this!</p><p>To configure this:</p><ol><li><p>Download the file <code>lurker.lua</code> into the project directory.</p></li><li><p>Download the file <code>lume.lua</code> into the project directory.</p></li><li><p>Add the following lines near the top of <code>main.lua</code>:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> lurker <span class="token operator">=</span> require <span class="token string">"lurker"</span><br>lurker<span class="token punctuation">.</span>postswap <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> love<span class="token punctuation">.</span>event<span class="token punctuation">.</span>quit <span class="token string">"restart"</span> <span class="token keyword">end</span></code></pre></li><li><p>Add the following line at the end of the <code>love.update</code> function:</p><pre class="language-lua"><code class="language-lua">lurker<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li></ol><p>Now when the app is run it will watch for changes to files within the project and restart the app when a change is detected. One issue with this is that every time the game is restarted, focus will move from the code editor to the game.</p><h2 id="colors" tabindex="-1">Colors</h2><p>The current color can be set using <code>love.graphics.setColor(red, green, blue, alpha)</code> where all the arguments are floating point numbers from 0 to 1. The color parameters are required. The <code>alpha</code> parameter can be omitted and defaults to 1. This remains in effect until it is changed again and affects many things that are drawn including text and shapes.</p><p>The <code>setColor</code> function can also be passed an array-like table of color values.</p><p>The following function can be used to convert color values in the range 0 to 255 into the range 0 to 1:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">rgb</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span><br>  <span class="token keyword">return</span> red <span class="token operator">/</span> <span class="token number">255</span><span class="token punctuation">,</span> green <span class="token operator">/</span> <span class="token number">255</span><span class="token punctuation">,</span> blue <span class="token operator">/</span> <span class="token number">255</span><br><span class="token keyword">end</span></code></pre><p>Consider defining all the colors that the app will need on startup and holding them in a table. For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">return</span> <span class="token punctuation">{</span><br>  black <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  blue <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  brown <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  gray <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  green <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  purple <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">148</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">211</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  red <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  white <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  yellow <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>To use one of these colors later, use <code>love.graphics.setColor(colors.yellow)</code>.</p><p>The following function can be used to generate a random color:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token keyword">local</span> r <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token keyword">local</span> g <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token keyword">local</span> b <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>  <span class="token comment">-- This makes sure the color isn't too dark.</span><br>  <span class="token keyword">local</span> total <span class="token operator">=</span> r <span class="token operator">+</span> g <span class="token operator">+</span> b<br>  <span class="token keyword">return</span> total <span class="token operator">>=</span> <span class="token number">1</span> <span class="token keyword">and</span> <span class="token punctuation">{</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token keyword">or</span> <span class="token function">randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">end</span></code></pre><h2 id="fonts" tabindex="-1">Fonts</h2><p>LÖVE uses the font &quot;Bitstream Vera Sans&quot; by default. Any font types supported by <a href="https://freetype.org/?v=1.0.21" rel="noopener" target="_blank">loFreeType 2</a> can be also be used. This includes TrueType, WOFF, and many others.</p><p>To create a font object, use <code>local myFont = love.graphics.newFont(fontFilePath, fontSize)</code>.</p><p>To change the current font, use <code>love.graphics.setFont(myFont)</code>. This remains in effect until it is changed again. It affects what is rendered by <code>love.graphics.print(text, x, y)</code>.</p><p>Consider creating all the <code>Font</code> objects that the app will need on startup and holding them in a table. For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> fonts <span class="token operator">=</span> <span class="token punctuation">{</span><br>  default <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">newFont</span><span class="token punctuation">(</span><span class="token string">"Pangolin-Regular.ttf"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  button <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">newFont</span><span class="token punctuation">(</span><span class="token string">"Pangolin-Regular.ttf"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To use one of these fonts later, use <code>love.graphics.setFont(fonts.button, x, y)</code>.</p><h2 id="images" tabindex="-1">Images</h2><p>LÖVE supports the image formats jpg, png, bmp, and many others. It does not support gif files</p><p>To create an <code>Image</code> object:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> monkey <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">newImage</span><span class="token punctuation">(</span><span class="token string">'images/monkey.png'</span><span class="token punctuation">)</span></code></pre><p>To draw an image at a given x,y location, use <code>love.graphics.draw(monkeyImage, x, y)</code>.</p><p>The <code>draw</code> function also takes argments for the rotation, x scale, y scale, origin x offset, origin y offset.</p><p>Consider creating all the <code>Image</code> objects that the app will need on startup and holding them in a table. For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> image <span class="token operator">=</span> <span class="token punctuation">{</span><br>  monkey <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">newImage</span><span class="token punctuation">(</span><span class="token string">'images/monkey.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  banana <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">newImage</span><span class="token punctuation">(</span><span class="token string">'images/banana.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre><p>To draw one of these images later, use <code>love.graphics.draw(images.monkey, x, y)</code>.</p><h2 id="sounds" tabindex="-1">Sounds</h2><p>LÖVE supports the sound formats mp3, ogg, wav, and many others.</p><p>To create a sound, specify its file path and source type as follows:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> mySound <span class="token operator">=</span> love<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">newSource</span><span class="token punctuation">(</span><span class="token string">"sounds/my-sound.mp3"</span><span class="token punctuation">,</span> <span class="token string">"static"</span><span class="token punctuation">)</span></code></pre><p>The last argument is the source type. &quot;static&quot; is preferred for short sounds. &quot;stream&quot; is the default and is preferred for longer sounds because it avoids holding the entire sound in memory.</p><p>To play a sound, use <code>mySound:play()</code>.</p><p>To cause a sound to loop continuously, use <code>mySound:setLooping(true)</code> before playing it.</p><p>To stop a sound, use <code>mySound:stop()</code>.</p><p>To temporarily pause a sound, use <code>mySound:pause()</code>. To resume it later, use <code>mySound:resume()</code>.</p><p>Consider creating all the sound <code>Source</code> objects that the app will need on startup and holding them in a table. For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> sounds <span class="token operator">=</span> <span class="token punctuation">{</span><br>  success <span class="token operator">=</span> love<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">newSource</span><span class="token punctuation">(</span><span class="token string">"sounds/success.mp3"</span><span class="token punctuation">,</span> <span class="token string">"static"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  failure <span class="token operator">=</span> love<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">newSource</span><span class="token punctuation">(</span><span class="token string">"sounds/failure.mp3"</span><span class="token punctuation">,</span> <span class="token string">"static"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  song <span class="token operator">=</span> love<span class="token punctuation">.</span>audio<span class="token punctuation">.</span><span class="token function">newSource</span><span class="token punctuation">(</span><span class="token string">"sounds/song.mp3"</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To play one of these sounds later, use <code>sounds.success:play()</code>.</p><p>To allow multiple occurrences of the same sound to play simultaneously, clone it and play the clone. For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> clone <span class="token operator">=</span> sounds<span class="token punctuation">.</span>failure<span class="token punctuation">:</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>clone<span class="token punctuation">:</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="graphics" tabindex="-1">Graphics</h2><p>The <code>love.graphics</code> module provides many functions for drawing. To simplify calling functions from the submodules of the <code>love</code> module, create and use variables like these to refer to the functions:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> g <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<br><span class="token keyword">local</span> p <span class="token operator">=</span> love<span class="token punctuation">.</span>physics</code></pre><h2 id="frame-rate" tabindex="-1">Frame Rate</h2><p>To display the frames per second being rendered add code like the following in the <code>love.draw</code> function:</p><pre class="language-lua"><code class="language-lua">love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"FPS: "</span> <span class="token operator">..</span> love<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">getFPS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></code></pre><h2 id="cursor" tabindex="-1">Cursor</h2><p>The following code draws a circle at the cursor position when placed in the <code>love.draw</code> function:</p><pre class="language-lua"><code class="language-lua">love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><br>love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">]</span></code></pre><h2 id="keys" tabindex="-1">Keys</h2><p>There are multiple ways to process key presses.</p><p>One way is to write the function <code>love.keypressed</code>. For example, the following code causes the app to be restarted when the escape key is pressed.</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">keypressed</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><br>  <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token string">"escape"</span> <span class="token keyword">then</span> love<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token string">"restart"</span><span class="token punctuation">)</span> <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre><p>Another way is to use the <code>love.keyboard.isDown</code> function. This takes arguments that are the key names to check and returns a boolean indicating if any of them are down. A table that maps key names to functions that should be called when they are pressed can be defined as follows:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> keyMap <span class="token operator">=</span> <span class="token punctuation">{</span><br>  left <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">dec</span><span class="token punctuation">(</span>monkeyPosition<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span><br>  right <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">inc</span><span class="token punctuation">(</span>monkeyPosition<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span><br>  up <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">dec</span><span class="token punctuation">(</span>monkeyPosition<span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span><br>  down <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">inc</span><span class="token punctuation">(</span>monkeyPosition<span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span> <span class="token keyword">end</span><br><span class="token punctuation">}</span></code></pre><p>Then add code like the following in the <code>love.update</code> function:</p><pre class="language-lua"><code class="language-lua">  <span class="token comment">-- Process keys being held down.</span><br>  <span class="token keyword">for</span> key<span class="token punctuation">,</span> fn <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>keyMap<span class="token punctuation">)</span> <span class="token keyword">do</span><br>    <span class="token keyword">if</span> love<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">isDown</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token keyword">then</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">end</span><br>  <span class="token keyword">end</span></code></pre><h2 id="mouse-clicks" tabindex="-1">Mouse Clicks</h2><p>There are several ways to process mouse clicks.</p><p>One way is to write the function <code>love.mousepressed</code>. For example, the following code causes the app to be restarted when the escape key is pressed.</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">mousepressed</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> button<span class="token punctuation">)</span><br>  <span class="token comment">-- button holds the number of the mouse button that was pressed</span><br>  <span class="token comment">-- where 1 is the left mouse button.</span><br>  <span class="token keyword">if</span> button <span class="token operator">~=</span> <span class="token number">1</span> <span class="token keyword">then</span> <span class="token keyword">return</span> <span class="token keyword">end</span> <span class="token comment">-- only processing left clicks</span><br><br>  <span class="token comment">-- For all shapes that should process mouse clicks,</span><br>  <span class="token comment">-- determine whether (x,y) is on the shape</span><br>  <span class="token comment">-- and execute the appropriate code if it is.</span><br><span class="token keyword">end</span></code></pre><p>Another may is to use the <code>love.mouse.isDown</code> function. This takes arguments that are the button numbers to check and returns a boolean indicating if any of them are down.</p><h2 id="background-scrolling" tabindex="-1">Background Scrolling</h2><p>A single image can be scrolled across the background in any direction. The image should have the same dimensions at the window and the opposite edges should match to avoid a visible &quot;seam&quot;.</p><p>For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> love <span class="token operator">=</span> require <span class="token string">"love"</span><br><br><span class="token keyword">local</span> g <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<br><span class="token keyword">local</span> image <span class="token operator">=</span> love<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">newImage</span><span class="token punctuation">(</span><span class="token string">"background.jpg"</span><span class="token punctuation">)</span><br><span class="token keyword">local</span> position<br><span class="token keyword">local</span> speed <span class="token operator">=</span> <span class="token number">100</span><br><span class="token keyword">local</span> windowWidth<span class="token punctuation">,</span> windowHeight <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  position <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">end</span><br><br><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token comment">-- To scroll vertically ...</span><br>  <span class="token comment">-- love.graphics.draw(image, 0, position)</span><br>  <span class="token comment">-- love.graphics.draw(image, 0, position - windowHeight)</span><br><br>  <span class="token comment">-- To scroll horizontally ...</span><br>  g<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> position<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br>  g<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> position <span class="token operator">-</span> windowWidth<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br><span class="token keyword">end</span><br><br><span class="token keyword">function</span> love<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><br>  <span class="token comment">-- To scroll vertically ...</span><br>  <span class="token comment">-- position = (position + speed * dt) % image:getHeight()</span><br><br>  <span class="token comment">-- To scroll horizontally ...</span><br>  position <span class="token operator">=</span> <span class="token punctuation">(</span>position <span class="token operator">-</span> speed <span class="token operator">*</span> dt<span class="token punctuation">)</span> <span class="token operator">%</span> windowWidth<br><span class="token keyword">end</span></code></pre><h2 id="physics" tabindex="-1">Physics</h2><p>The <code>love.physics</code> module provides many functions that wrap the functionality of <a href="https://box2d.org/?v=1.0.21" rel="noopener" target="_blank">Box2D</a> which is a C++-based 2D physics engine. Box2D was created by Erin Catto who works at Blizzard Games. Box2D is used by many games including Angry Birds.</p><p>For an example project that uses <code>love.physics</code>, see <a href="https://github.com/mvolkmann/lua-examples/tree/main/love/monkey-nim?v=1.0.21" rel="noopener" target="_blank">Monkey Nim</a>.</p><h2 id="deploying" tabindex="-1">Deploying</h2><p>LÖVE apps can be deployed to Windows, macOS, Linux, Android, and iOS. Details can be found at <a href="https://love2d.org/wiki/Game_Distribution?v=1.0.21" rel="noopener" target="_blank">Game Distribution</a>.</p><h3 id="web" tabindex="-1">Web</h3><p>One way to deploy a LÖVE app to the web is to use <a href="https://github.com/Davidobot/love.js?v=1.0.21" rel="noopener" target="_blank">love.js</a>. This uses <a href="https://emscripten.org/?v=1.0.21" rel="noopener" target="_blank">Emscripten</a> to compile the C code from Lua and LÖVE to WebAssembly so it can be run in web browsers.</p><p>Generate a web application from a LÖVE project in the current directory with the following steps. This creates the subdirectory <code>web</code> containing many generated files.</p><ul><li>Enter <code>npx love.js . web</code></li><li>Press return to proceed.</li><li>Enter a name for the game.</li></ul><p>Create a web server that sets the appropriate HTTP headers to enable use of <code>SharedArrayBuffer</code> with the following steps:</p><ul><li><p>Install Node.js.</p></li><li><p>Enter <code>mkdir server</code></p></li><li><p>Enter <code>cd server</code></p></li><li><p>Enter <code>touch server.js</code></p></li><li><p>Edit <code>server.js</code> and add the following code:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><br>  <span class="token string">'../web'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token function-variable function">setHeaders</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Cross-Origin-Opener-Policy'</span><span class="token punctuation">,</span> <span class="token string">'same-origin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Cross-Origin-Embedder-Policy'</span><span class="token punctuation">,</span> <span class="token string">'require-corp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token number">1919</span><span class="token punctuation">;</span><br>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'browse localhost:'</span> <span class="token operator">+</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>Start the web server and run the game with the following steps:</p><ul><li>Enter <code>node server.js</code></li><li>Browse localhost:1919</li></ul><p>During development it will be necessary to rebuild the web app and restart the web server many times. The following shell script automates those tasks. Consider naming it <code>websrv</code> and make it executable.</p><pre class="language-sh"><code class="language-sh"><span class="token shebang important">#!/usr/bin/env zsh</span><br><br><span class="token function">rm</span> <span class="token parameter variable">-rf</span> web<br>npx love.js src web<br><span class="token function">pushd</span> server<br><span class="token function">node</span> server.js<br><span class="token function">popd</span></code></pre><p>To run this, enter <code>./websrv</code>.</p><h3 id="ios" tabindex="-1">iOS</h3><p>The YouTube video <a href="https://www.youtube.com/watch?v=MsYanwcU42E&list=WL&index=108&t=6s?v=1.0.21" rel="noopener" target="_blank">Build LOVE2D for iOS iPhone, iPad, iPod Touch</a> walks through the steps to deploy a LÖVE app to iOS. This must be done in macOS.</p><p>The following steps create a default iOS project and run it:</p><ol><li>If not already installed, install Xcode.</li><li>Download iOS source by clicking the &quot;iOS source&quot; link in the Download section of the <a href="https://love2d.org/?v=1.0.21" rel="noopener" target="_blank">LÖVE</a> home page. <img alt="LÖVE iOS Source" style="width: 100%" src="/blog/assets/love2d-ios-source.png?v=1.0.21" title="LÖVE iOS Source"></li><li>Double-click the downloaded file to unzip it.</li><li>Move this directory to its desired location and rename it.</li><li>In the Finder, navigate to <code>platform/xcode</code>.</li><li>Double-click the file <code>love.xcodeproj</code> to open it in Xcode.</li><li>Select a simulator device.</li><li>Build and run the app.</li><li>In the simulator, tap &quot;No-game screen&quot; to see the default &quot;NO GAME&quot; screen.</li></ol><p>The following steps customize the default project to run your game.</p><ol><li>Enter <code>./bundle</code> to bundle the LÖVE project into a <code>.love</code> file. (See the &quot;Bundling&quot; section above.)</li><li>Back in Xcode, select the top-most project navigator item to edit the LÖVE project.</li><li>Select the &quot;love.ios&quot; target.</li><li>Select the &quot;General&quot; tab.</li><li>In the &quot;Identity&quot; section, enter a &quot;Display Name&quot;. TODO: Why is the displayed app name &quot;love&quot; instead of this value?</li><li>In the &quot;Deployment Info&quot; section under &quot;iPhone Orientation&quot;, consider only checking &quot;Portrait&quot;.</li><li>Select the &quot;Signing &amp; Capabilities&quot; tab.</li><li>In the &quot;Team&quot; dropdown, select your development team.</li><li>Change the bundle identifier to uniquely identify your project.</li><li>Select the &quot;Build Phases&quot; tab.</li><li>Expand the &quot;Copy Bundle Resources&quot; section.</li><li>Click the &quot;+&quot; button, click the &quot;Add Other...&quot; button, and add your <code>.love</code> zip file.</li><li>Check the &quot;Copy items if needed&quot; checkbox.</li><li>Select the &quot;Create folder references&quot; radio button.</li><li>Click the &quot;Finish&quot; button.</li></ol><p>To run the app on a real device:</p><ol><li>Attach the device to the mac with a USB cable.</li><li>Select the device from the device menu.</li><li>Build and run the project.</li></ol><p>To size the window appropriately, add the following settings in the <code>conf.lua</code> file:</p><pre class="language-lua"><code class="language-lua">  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">393</span>  <span class="token comment">-- third of 1179 (iPhone 14 Pro width)</span><br>  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">852</span> <span class="token comment">-- third of 2556 (iPhone 14 Pro height)</span></code></pre><p>To change the app icon, use Xcode to replace the images in the file <code>Images.xcassets</code>.</p><pre class="language-lua"><code class="language-lua">  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">590</span>   <span class="token comment">-- half of 1179 (iPhone 14 Pro width)</span><br>  t<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1276</span> <span class="token comment">-- half of 2556 (iPhone 14 Pro height)</span></code></pre><p>After making changes to the Lua code, enter <code>./bundle</code> again to create a new <code>.love</code> file and then re-run the iOS project.</p><h2 id="optimizations" tabindex="-1">Optimizations</h2><p>When comparing the distance between two points to some value, compare the square of the distance. This removes the need to use the <code>math.sqrt</code> function which can hurt game performance.</p></article>