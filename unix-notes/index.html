<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>UNIX Notes</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#ascii-characters">ASCII characters</a></li><li><a href="#awk">Awk</a></li><li><a href="#bc-line-oriented-calculator">bc line-oriented calculator</a></li><li><a href="#creating-directories">Creating Directories</a></li><li><a href="#curl">Curl</a></li><li><a href="#default-shell">Default Shell</a></li><li><a href="#diff">Diff</a></li><li><a href="#disk-space">Disk Space</a></li><li><a href="#display">Display</a></li><li><a href="#directory-structure">Directory Structure</a></li><li><a href="#environment-variables">Environment Variables</a></li><li><a href="#finding%2Fsearching-files">Finding/Searching Files</a><ol><li><a href="#find">find</a></li><li><a href="#grep">grep</a></li><li><a href="#ripgrep">ripgrep</a></li></ol></li><li><a href="#ftp">FTP</a></li><li><a href="#functions">Functions</a></li><li><a href="#graphics-files">Graphics files</a></li><li><a href="#hex">Hex</a></li><li><a href="#home-directory-mount">Home Directory Mount</a></li><li><a href="#host">Host</a></li><li><a href="#ip-address">IP address</a></li><li><a href="#ld_library_path">LD_LIBRARY_PATH</a></li><li><a href="#line-endings">Line Endings</a></li><li><a href="#list-directory-contents">List Directory Contents</a></li><li><a href="#list-library-contents">List Library Contents</a></li><li><a href="#locate">Locate</a></li><li><a href="#make">Make</a></li><li><a href="#man-pages">Man Pages</a></li><li><a href="#messages">Messages</a></li><li><a href="#mount">Mount</a></li><li><a href="#netstat">Netstat</a></li><li><a href="#password">Password</a></li><li><a href="#patch">Patch</a></li><li><a href="#path">PATH</a></li><li><a href="#ports">Ports</a></li><li><a href="#printing">Printing</a></li><li><a href="#processes">Processes</a></li><li><a href="#rsync">rsync</a></li><li><a href="#script-command-echoing">Script Command Echoing</a></li><li><a href="#secure-copy">Secure Copy</a></li><li><a href="#shell-prompt">Shell Prompt</a></li><li><a href="#shell-scripts">Shell Scripts</a></li><li><a href="#ssh">SSH</a></li><li><a href="#stdout-and-stderr">stdout and stderr</a></li><li><a href="#switch-user-(su-and-sudo)">Switch User (su and sudo)</a></li><li><a href="#symbolic-links">Symbolic Links</a></li><li><a href="#tar">Tar</a></li><li><a href="#term">TERM</a></li><li><a href="#threads">Threads</a></li><li><a href="#time">Time</a></li><li><a href="#version">Version</a></li><li><a href="#windows">Windows</a></li><li><a href="#zip">Zip</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>This is a collection of tips on using UNIX and Linux systems.</p><h2 id="ascii-characters" tabindex="-1">ASCII characters</h2><p>To see a list of all the ASCII characters and their codes, enter <code>man ascii</code>.</p><p>To dump the ASCII characters in a text file, enter <code>od -cx {file-path}</code>.</p><p>The <code>-c</code> option causes it to print ASCII characters using backslash escapes for control characters. The <code>-x</code> option causes it to output inverted pairs of hex ASCII codes.</p><h2 id="awk" tabindex="-1">Awk</h2><p>This command can replace given text in a set of files with new text. For example, the following replaces&quot;foo&quot; with &quot;bar&quot; in all the <code>.java</code> files in the current directory.</p><pre class="language-bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token punctuation">\</span>*.java<span class="token punctuation">;</span> <span class="token keyword">do</span><br>  <span class="token function">mv</span> <span class="token variable">$file</span> <span class="token variable">$file</span>.orig<br>  <span class="token function">awk</span> <span class="token parameter variable">-e</span> <span class="token string">'{ if ($0 == "foo") print "bar"; else print $0 }'</span> <span class="token variable">$file</span>.orig <span class="token operator">></span> <span class="token variable">$file</span><br><span class="token keyword">done</span></code></pre><p>Also see <code>MyUnixEnv/notes/AwkNotes.txt</code>.</p><h2 id="bc-line-oriented-calculator" tabindex="-1">bc line-oriented calculator</h2><ul><li>To convert decimal numbers to hex obase=16 enter any decimal number and it will be output as hex</li><li>To convert hex numbers to decimal ibase=16 enter any hex number and it will be output as decimal</li><li>To exit, enter &quot;quit&quot;.</li></ul><h2 id="creating-directories" tabindex="-1">Creating Directories</h2><p>To create directories whose parent directories don't exist yet, enter a command like <code>mkdir -p dir1/dir2/dir3</code>.</p><h2 id="curl" tabindex="-1">Curl</h2><p>Ampersands separating query parameters must be preceded by backslashes.</p><p>Surround url in single or double quotes if it contains special characters like double quotes.</p><p>To specify a request body for a POST or PUT, use <code>-d '{body-payload}'</code></p><p>To use a verb other than GET which is the default, add <code>-X{verb}</code>. For example, <code>curl -XPUT http://localhost:3000 -d '{body-payload}'</code></p><p>To specify the body content type, add <code>-H &quot;Content-Type: {type}&quot;</code>. An example type is <code>application/json</code>.</p><p>To put data from a text file:</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-XPUT</span> http://localhost:3000 -H<span class="token string">"Content-Type: application/json"</span> <span class="token parameter variable">--data</span> @security.json<br><span class="token function">curl</span> http://localhost:3000/security/admin/rights/%2F <span class="token comment"># verifies</span></code></pre><p>To put data from a binary file</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-XPUT</span> http://localhost:3000 -H<span class="token string">"Content-Type: image/png"</span> --data-binary @<span class="token punctuation">{</span>file-path<span class="token punctuation">}</span></code></pre><p>To specify output to be added after successful output, add <code>-o</code>. For example, to add a newline:</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -w<span class="token string">'\n'</span> http://java.ociweb.com/mark/</code></pre><p>To see headers, <code>curl -i {url}</code>.</p><p>To send a HEAD request, add <code>--head</code> or <code>-I</code>, not <code>-XHEAD</code>.</p><h2 id="default-shell" tabindex="-1">Default Shell</h2><p>To change the default shell, enter <code>ypchsh</code>.</p><h2 id="diff" tabindex="-1">Diff</h2><ul><li>To get lines missing in first file and present in second file<ul><li>verify that the two files are sorted</li><li>comm -13 file1.txt file2.txt</li><li>if the lines are not sorted<ul><li>diff --new-line-format=&quot;gronk:%L&quot; | grep &quot;^gronk&quot; | sed 's/gronk://' where &quot;gronk&quot; is just some unique string that is used to filter out only the relevant lines and sed is used to remove that unique prefix</li></ul></li></ul></li></ul><h2 id="disk-space" tabindex="-1">Disk Space</h2><ul><li><p>To determine top offenders in disk space usage, du -sk * | sort -rn | head -s = summarize -k = --blocksize=1K -r = reverse -n = sort as numeric head defaults to showing only first 10 (really slow!)</p></li><li><p>To list the files in the current directory from largest to smallest, ls -lS</p></li><li><p>To find the largest files in and below the current directory, find . -type f -size +1M -exec ls -lk {} ; | sort -nr -k 5 | head The &quot;-size +1M&quot; limits processing to files that are at least one megabyte. The &quot;-nr&quot; options for sort are numeric-sort and reverse. This dramatically improves performance.</p></li></ul><h2 id="display" tabindex="-1">Display</h2><ul><li>To allow other Linux boxes to display to yours<ul><li>on yours execute &quot;xhost +&quot;</li><li>on theirs execute &quot;export DISPLAY={host}:0.0&quot; then run application that generates the display (at Boeing your host is <a href="http://b878360.stl.mo.boeing.com">b878360.stl.mo.boeing.com</a>)</li></ul></li><li>Auto-scroll<ul><li>When Linux thinks the display aspect ratio differs from that of the current resolution setting, it auto-scrolls when the mouse moves off an edge of the screen. To fix this, change the resolution and then change it back.</li></ul></li></ul><h2 id="directory-structure" tabindex="-1">Directory Structure</h2><ul><li>To see the content of the current directory including subdirectories as a tree, enter &quot;tree&quot;.</li><li>install on Mac with &quot;brew install tree&quot;</li></ul><h2 id="environment-variables" tabindex="-1">Environment Variables</h2><ul><li>To set in bash, export name=value</li><li>To unset in bash, unset name</li></ul><h2 id="finding%2Fsearching-files" tabindex="-1">Finding/Searching Files</h2><p>There are multiple commands that search files, including <code>find</code>, <code>grep</code>, and <code>rg</code> (ripgrep).</p><h3 id="find" tabindex="-1">find</h3><p>To find all files of a given type in and below the current directory that contain a given string, <code>find -name '_.{type}' | xargs grep &quot;{string}&quot;</code>. An alternative is <code>find -name '_.{type}' -exec grep &quot;{string}&quot; {} \;</code> Consider using ripgrep instead because it is much faster.</p><p>If the first argument starts with <code>-</code> then the search begins in the current directory. This means that <code>find . -name 'foo.bar'</code> is the same as <code>find -name 'foo.bar'</code>. If <code>-name</code> is omitted, it defaults to <code>-name '\*'</code>.</p><p>To delete all matching files below the current directory, <code>find . -name 'name-pattern' -delete</code>. <code>-delete</code> is much shorter than the alternative <code>-exec rm {} \;</code>.</p><p>To output only file names containing a match and not the matching lines:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token parameter variable">-name</span> <span class="token string">'\*.{type}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">grep</span> <span class="token parameter variable">-l</span> <span class="token string">"{string}"</span></code></pre><p>To find all .h and .cpp files that contain &quot;foo&quot;:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token parameter variable">-regex</span> <span class="token string">".\*[.h|.cpp]"</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">grep</span> foo</code></pre><p>To avoid &quot;Permission denied&quot; messages when find tries to search certain directories:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token parameter variable">-name</span> <span class="token string">'whatever'</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null</code></pre><p>To find all directories that contain files that have been modified today:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-ctime</span> <span class="token parameter variable">-1</span> <span class="token parameter variable">-type</span> d</code></pre><p>To find all files in and below the current directory whose contents have been modified in the last n days:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-type</span> f <span class="token parameter variable">-mtime</span> <span class="token parameter variable">-n</span></code></pre><p>To edit all the files that contain a given string:</p><pre class="language-bash"><code class="language-bash"><span class="token function">vim</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">find</span> <span class="token parameter variable">-name</span> <span class="token string">'\*.filetype'</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">grep</span> <span class="token parameter variable">-l</span> <span class="token string">"string"</span><span class="token variable">)</span></span></code></pre><p>To find all files that contain text that matches a regular expression, for example, .h files that define a class that inherits from another (:):</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">'\*.h'</span> <span class="token parameter variable">-exec</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">'class \w+ :'</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span></code></pre><p>To find all files with a given extension that are executable and make them not executable:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">'\*.{ext}'</span> <span class="token parameter variable">-perm</span> 001 <span class="token parameter variable">-exec</span> <span class="token function">chmod</span> a-x <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span></code></pre><p>The <code>001</code> is a mask that specifies the x bit.</p><p>To limit the depth of the search (# of directories deep), add <code>-maxdepth n</code>.</p><h3 id="grep" tabindex="-1">grep</h3><p><code>grep</code> stands for Global Regular Expression Print. It came from the <code>ed</code> editor command <code>g/RE/p</code> where <code>RE</code> is replaced by a regular expression. It globally operates on every line in the file and prints all lines that match the regular expression.</p><p>To find all files with a given extension in the current directory that contain a given string, enter <code>grep '{string}' *.{extension}</code>.</p><h3 id="ripgrep" tabindex="-1">ripgrep</h3><p><a href="https://github.com/BurntSushi/ripgrep?v=1.1.1" rel="noopener" target="_blank">ripgrep</a> implements the <code>rg</code> command in Rust and is a much faster alternative to the <code>find</code> command.</p><p>To find all occurrences of a string within any file that is in or below the current directory, enter `rg '{string}'. Quotes around the string are only needed if it contains spaces, other special characters, or a regular expression.</p><p>By default <code>rg</code> does not search the following files:</p><ul><li>hidden files (whose names begin with <code>.</code>)</li><li>files in a Git repository that match patterns in its <code>.gitignore</code> file</li><li>binary files</li><li>files referenced by symbolic links</li></ul><p>To search these files, add <code>--no-ignore</code>. To only add searching of hidden files, add <code>--hidden</code> or <code>-.</code>. To follow and search files referenced by symbolic links, add <code>--follow</code> or <code>-L</code>.</p><p>To limit the search to a specific file, enter <code>rg '{string}' {file-path}</code>.</p><p>To limit the search to files that are in and below a given directory, enter <code>rg '{string}' {dir-path}</code>.</p><p>To limit the search to files with a given type (such as rust) or file extension (such as <code>.r</code>), use one of the following:</p><pre class="language-bash"><code class="language-bash">rg <span class="token string">'{string}'</span> <span class="token parameter variable">--type</span> rust<br>rg <span class="token string">'{string}'</span> trust<br>rg <span class="token string">'{string}'</span> <span class="token parameter variable">-g</span> <span class="token string">'*.rs'</span></code></pre><p>Some file types map to multiple file extensions. For example, <code>-tc</code> is the same as <code>-g '*.{c.h}'</code>. To see all the supported file types, enter <code>rg --type-list</code>. To see the glob pattern used by a given file type, enter <code>rg --type-list | rg '^{type}:'</code>.</p><h2 id="ftp" tabindex="-1">FTP</h2><ul><li>See notes on ncftp in CygwinNotes.txt</li><li>Don't forget to enter &quot;binary&quot; before attempting to put binary files.</li><li>~/.netrc can be used to reduce typing required.<ul><li>To register username/password for specific machines, add one line like the following for each machine: machine {name-or-IP-address} login {username} password {password}</li><li>To create macros of FTP commands such as updating a file and quitting, macdef uploadExe lcd &lt;YOUR_EXECUTABLE_DIR&gt; binary put &lt;EXECUTABLE_NAME&gt; quit There must be a blank line after the last macdef! It may be necessary to place macdefs immediately after the machine definitions where they will be used. This will require duplicating macros that need to be used on multiple machines.</li><li>To use the .netrc file, enter &quot;ftp {name-or-IP-address}&quot;</li><li>To execute an FTP command and capture its output in a file echo &quot;{command}&quot; | ftp {name-or-IP-address} &gt; ftp.txt</li><li>To run a macro from an FTP prompt, &quot;${macro-name}&quot;.</li><li>To run a macro from the command line, &quot;echo &quot;${macro-name}&quot; | ftp {name-or-IP-address}</li><li>To see all the commands that a macro executes<ul><li>if running macro from ftp prompt, start ftp with -d</li><li>if running macro from command line, start ftp with -v</li></ul></li></ul></li></ul><h2 id="functions" tabindex="-1">Functions</h2><ul><li>to see the definition of a function defined in some script that has been run (perhaps .bashrc), enter &quot;type {function-name}&quot;</li></ul><h2 id="graphics-files" tabindex="-1">Graphics files</h2><ul><li>to display a graphics file such as a .png file, use the &quot;Eye of Gnome&quot; application by entering &quot;eog {file-path}&quot;</li></ul><h2 id="hex" tabindex="-1">Hex</h2><ul><li>To see the hex characters in the output of a command {command} | od -cx</li></ul><h2 id="home-directory-mount" tabindex="-1">Home Directory Mount</h2><ul><li>To force someone else's home directory to be mounted on your Linux box, sudo su - {their-id} Use your root password.</li></ul><h2 id="host" tabindex="-1">Host</h2><ul><li>To determine name of current host, enter &quot;hostname&quot;.</li></ul><h2 id="ip-address" tabindex="-1">IP address</h2><ul><li>To determine the IP address of the current host (four ways)<ul><li>google &quot;what is my ip&quot;</li><li>run /sbin/ifconfig and look for en0 (wired) or en1 (wireless) inet addr<ul><li>on some machines, ifconfig is in /sbin</li></ul></li><li>run ipconfig and look for the en0 (wired) or en1 (wireless) inet addr</li><li>nslookup {hostname}</li></ul></li></ul><h2 id="ld_library_path" tabindex="-1">LD_LIBRARY_PATH</h2><p>This environment variable lists directories to be searched for library files (such as .so files).</p><h2 id="line-endings" tabindex="-1">Line Endings</h2><ul><li>to convert line endings in files from DOS (CRLF) to UNIX (LF)<ul><li>install dos2unix command (on macOS, brew install dos2unix)</li><li>open a bash shell</li><li>cd to a directory containing the files to convert</li><li>for each file extension to be processed (ex. .js) find . -type f -name '*.js' -exec dos2unix {} ;</li></ul></li></ul><h2 id="list-directory-contents" tabindex="-1">List Directory Contents</h2><ul><li>To show hidden files, ls -a</li><li>To show details, ls -l<ul><li>extended attribuets<ul><li>the last position in the permissions string contains @ if the file has &quot;extended attributes&quot;</li><li>to list them, xattr {file-path}</li><li>to delete one, xattr -d {extended-attr-name} {file-path}</li></ul></li></ul></li><li>To sort on creation time with newest files first, ls -lt</li><li>To use color, alias ls='ls --color=tty' (directories are blue, executables are green)</li></ul><h2 id="list-library-contents" tabindex="-1">List Library Contents</h2><ul><li>Use nm command which outputs lines containing symbol value, type and name.</li><li>To unmangle symbol names for C++ methods, pipe nm output to c++filt.</li><li>The symbol type is output before each symbol in the library: A - absolute, won't change by further linking B - uninitialized C - common D - initialized G - initialized for small objects I - indirect reference to another symbol N - debugging symbol (use -a to see these) R - read only S - uninitialized for small objects T - text (code) U - undefined V - weak object W - weach symbol<ul><li><ul><li>a &quot;stabs&quot; symbol ? - unknown</li></ul></li></ul></li></ul><h2 id="locate" tabindex="-1">Locate</h2><ul><li>This command searches a database for a filename and outputs all the locations where it resides.</li><li>The database is typically updated every night for all files on the drive.</li><li>Usage: locate {filename}</li></ul><h2 id="make" tabindex="-1">Make</h2><ul><li>To see commands that make would execute without executing them, make -n</li><li>Use MPC to generate makefiles for various platforms</li></ul><h2 id="man-pages" tabindex="-1">Man Pages</h2><ul><li>to save a man page in a text file that can be printed<ul><li>man {command} | col -b &gt; {command}.txt</li></ul></li><li>to save it in a much more appealing Postscript format<ul><li>man -t {command} &gt; {command}.ps</li></ul></li></ul><h2 id="messages" tabindex="-1">Messages</h2><ul><li>To send a message to a particular user that they will see at their command prompt, &quot;write {user-name}&quot;. After that, each line you type is sent to them when you press the enter key. They can do the same to you in order to have a conversation.</li><li>To send a message to all users on your current host, &quot;wall {message}&quot;.</li></ul><h2 id="mount" tabindex="-1">Mount</h2><ul><li>If your home directory is actually mounted from somewhere else (such as an NIS server), to see where, cd to your home directory and enter &quot;df .&quot;.<ul><li>this is the case at Boeing</li></ul></li><li>To see all directories that are mounted from somewhere else, enter &quot;df | grep :&quot; or &quot;mount | grep :&quot;.</li><li>To mount USB drives that are detected by automount,<ul><li>run &quot;dmesg&quot; to see what device name was assigned (ex. sda1 or sdb2)</li><li>run &quot;ls /media&quot; to see what device names it assigned (ex. WD_Combo or ipod)</li><li>mount -t vfat /dev/sda1 /media/WD_Combo</li><li>mount -t vfat /dev/sdb2 /media/ipod</li><li>there should be a way to make these mounts happen automatically on reboot but I haven't figured that out</li></ul></li><li>/etc/fstab (stands for File System TABle)<ul><li>lists all file system devices that are mounted, and their options</li><li>is this automatically updated by the mount command?</li></ul></li><li>automount<ul><li>responsible for dynamically mounting USB devices</li><li>to stop it, run &quot;/etc/init.d/autofs stop&quot;</li><li>to start it, run &quot;/etc/init.d/autofs start&quot;</li></ul></li></ul><h2 id="netstat" tabindex="-1">Netstat</h2><ul><li>To see which ports are currently being listened on by some server netstat -an | grep LISTEN</li></ul><h2 id="password" tabindex="-1">Password</h2><ul><li>To change password passwd [username] To change to a dictionary word, su root and ignore warnings.</li></ul><h2 id="patch" tabindex="-1">Patch</h2><ul><li>To create a patch file, diff {file1} {file2} &gt; {name}.patch</li><li>To apply a patch file to a file, patch ???</li></ul><h2 id="path" tabindex="-1">PATH</h2><ul><li>This environment variable contains a list of directories Identify areas of concern when using Java threads alone and together with C++ threads. Document the behavior of Java threads, how their behavior can be configured, and their interaction with C++ threads. Design, implement and document a testing framework for measuring the impact of various implementation and tuning approaches. Present all the information gathered in a teleconference. Assist NSIT in running the testing framework to gather results on the target platform. Modify the testing framework based on feedback from NSIT. to be searched for executables.</li><li>After an executable is run once, it's location can be remembered.</li><li>If PATH is changed later, you may have to run &quot;hash -r&quot; to get the OS to forget all executable locations it was remembering.</li></ul><h2 id="ports" tabindex="-1">Ports</h2><ul><li>to find the process listening on a given port, use &quot;list open files&quot; lsof -i:{port-number}</li></ul><h2 id="printing" tabindex="-1">Printing</h2><ul><li>To get name of default printer, lpstat -d</li><li>To print source files using enscript alias ens=&quot;enscript --borders --columns=2 --fancy-header<br>--landscape --line-numbers=1 --mark-wrapped-lines=arrow<br>--pretty-print=cpp --printer=bstl0860&quot; ens {filename}.cpp</li><li>Your &quot;ens&quot; alias is configured to print in two columns and &quot;ens1&quot; prints in one column.</li><li>To print selected lines from a file, sed -n '{start-line},{end-line}p' {file-path} | ens<ul><li>&quot;p&quot; is for print</li></ul></li></ul><h2 id="processes" tabindex="-1">Processes</h2><ul><li>$! holds the process id (PID) of the last process that was spawned using &amp;<ul><li>for example, some-executable&amp; pid=$!<h1 id="do-some-work" tabindex="-1">do some work</h1>kill -9 $pid</li></ul></li><li>to kill all processes with a given name<ul><li>killall {name}<ul><li>useful with flow!</li></ul></li></ul></li><li>best way to kill<ul><li>Unless a program was written to catch a specific signal, the best way to try to kill it is the Software Termination signal (SIGTERM - 15). This is the default signal for the kill command if none is specified. syntax: kill {pid} Well-written *nix applications catch this signal and terminate gracefully.</li><li>If this fails, try these in order.<ul><li>hangup - SIGHUP(1): kill -1 {pid}</li><li>interrupt - SIGINT(2) (sent by a ctrl-c): kill -2 {pid}</li><li>quit program - SIGQUIT(3) (causes a core dump): kill -3 {pid}</li><li>abort - SIGABRT(6): kill -6 {pid} (should also cause a core dump)</li><li>kill - SIGKILL(9): kill -9 {pid} (uncatchable)</li></ul></li><li>If a process won't die and you're curious about why, attach a gdb session. After poking around, do a &quot;quit&quot; without detaching which should kill the process.</li><li>Sun's JVM uses SIQQUIT(3) as a signal to dump all the running threads.</li></ul></li><li>Defunct processes used to be called zombie processes. They are neither dead nor alive. They are processes that have become corrupted in such a way that they no long can communicate with their parent or child process. Killing the parent or child process will usually make them go away. If the parent or child process is missing, you're out of luck. Possibly there is a stuck automount. Of course rebooting the machine will get rid of them.</li></ul><h2 id="rsync" tabindex="-1">rsync</h2><ul><li>Copies new and modified files to a remote server</li><li>example<ul><li>cd ~/Documents/VolkmannWebSite</li><li>rsync -a --delete --progress --stats <a href="mailto:volkmanm@ftp.ociweb.com">volkmanm@ftp.ociweb.com</a>:/<ul><li>this doesn't work! need to figure out how to supply password</li><li>-a archive mode which implies these options: rlptgoD<ul><li>r is recursive</li><li>l copies symlinks as symlinks</li><li>p preserves permissions</li><li>t preserves create and modify times</li><li>g preserves groups</li><li>o preserves owners</li><li>D implies --devices and --specials</li><li>--devices preserves devices?</li><li>--specials preserves special files?</li></ul></li><li>--delete deletes files from remote server that are not present locally</li><li>--progress shows progress during transfer</li><li>--states shows file transfer statistics</li></ul></li></ul></li></ul><h2 id="script-command-echoing" tabindex="-1">Script Command Echoing</h2><ul><li>To see each command that is executed in a script named foo, sh -x foo</li></ul><h2 id="secure-copy" tabindex="-1">Secure Copy</h2><ul><li>To avoid being prompted for a password, see notes on ssh-keygen below.</li><li>To copy a file to another host, scp file-name {user-name}@{host}:{file-path}</li><li>To copy a file from another host, scp {user-name}@{host}:{file-path} .</li><li>To copy a directory from another host, scp -r {user-name}@{host}:{dir-path} .</li><li>To copy a file to your home directory on another host, scp {file-path} {user-name}@{host}:</li></ul><h2 id="shell-prompt" tabindex="-1">Shell Prompt</h2><ul><li>To customize shell prompt in bash, export PS1=&quot;prompt&quot; Escape sequences that can be used in prompt include \H - host name \u - user name \w - current working directory Recommended prompt is &quot;\w$ &quot;.</li></ul><h2 id="shell-scripts" tabindex="-1">Shell Scripts</h2><ul><li>To specify the type of script, in this example using bash, make the following the first line. #!/bin/bash</li><li>To cause every command in a script that is executed to be echoed, add the following near the top of the script. set -x (also see &quot;set -v&quot;)</li></ul><h2 id="ssh" tabindex="-1">SSH</h2><ul><li>download PuTTY from <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a><ul><li>need putty.exe, pageant.exe and plink.exe</li><li>see C:\Program Files\PuTTY on your laptop</li></ul></li><li>need public and private SSH keys<ul><li>yours are in C:\OCI\OCI<em>Putty</em>*_key.ppk</li></ul></li><li>double-click the Pageant icon on your laptop desktop (needed?)</li><li>add the environment variable SVN_SSH=&quot;ssh -l volkmanm -P 12345&quot;</li><li>to generate a new SSH key<ul><li>run C:\Program Files\PuTTY\puttygen.exe on laptop</li><li>select &quot;SSH2 DSA&quot; radio button near bottom of dialog</li><li>click the &quot;Generate&quot; button</li><li>move the mouse over the &quot;Key&quot; area until the progress bar goes all the way to the right</li><li>copy the public key by selecting it with the mouse and pressing Ctrl-C (using the &quot;Save public key&quot; button saves it in a form that the OCI SSH server can't use)</li><li>save the private key by pressing the &quot;Save private key&quot; button</li><li>add the public key to ~/.ssh/authorized_keys on the OCI hickory server</li></ul></li><li>to test that the SSH key is working properly, from a command prompt, enter &quot;putty -i {path-to-private-key-file} <a href="mailto:volkmanm@ssh.ociweb.com">volkmanm@ssh.ociweb.com</a>&quot;</li><li>to avoid being prompted for a password<ul><li>on source machine<ul><li>enter ssh-keygen (accept all the defaults; don't enter a passphrase)</li><li>use ftp or scp to copy ~/.ssh/id_rsa.pub to the destination machine</li></ul></li><li>on destination machine<ul><li>mkdir .ssh</li><li>mv id_rsa.pub ~/.ssh/authorized_keys</li><li>chmod 700 ~/.ssh/authorized_keys</li></ul></li></ul></li></ul><h2 id="stdout-and-stderr" tabindex="-1">stdout and stderr</h2><ul><li>to redirect both to the same place command &gt; file 2&gt;&amp;1 or (bash only) command &amp;&gt; file</li></ul><h2 id="switch-user-(su-and-sudo)" tabindex="-1">Switch User (su and sudo)</h2><ul><li>To switch to the root user, enter &quot;su root&quot; or just &quot;su&quot;.</li><li>To switch to the root user AND get its enviroment (ex. PATH), enter &quot;su - root&quot; or just &quot;su -&quot;.</li><li>sudo does a &quot;switch user&quot; and then executes some command</li><li>At Boeing you can use &quot;sudo su&quot; to switch to the root id. To verify that it worked, enter &quot;id&quot; which should show that uid is root.</li></ul><h2 id="symbolic-links" tabindex="-1">Symbolic Links</h2><ul><li>To create a symbolic link, enter &quot;ln -s {target-file} {link-name}&quot;</li><li>Suggested use<ul><li>directories for installed libraries and applications under /opt should include version numbers</li><li>create a symbolic link for each whose name doesn't include the version</li><li>refer to these symbolic links in applications that use them</li><li>when new versions are installed, only the symbolic links need to be changed, not the applications that use them</li></ul></li></ul><h2 id="tar" tabindex="-1">Tar</h2><ul><li>To tar the contents of a directory named d cd to the parent directory tar zcf d.tgz d<ul><li>.tgz is typically preferred over .tar.gz</li><li>The above is shorthand for the following: tar cf d.tar d gzip d.tar # creates d.tgz</li><li>the last two steps can be compbined into one with</li></ul></li><li>To untar a gzipped tar file f.tgz tar zxf f.tgz<ul><li>tar now infers the z option.</li><li>The above is shorthand for the following: gunzip f.tgz # or gzip -d f.tgz tar xf f.tar</li></ul></li><li>To untar a bz2 tar file f.bz2 tar xvjpf f.bz2</li><li>To tar only files found using the find command: tar xf myfiles.tar <code>find ...</code></li><li>See your pkg and unpkg scripts that make it easier to tar/zip and unzip/untar directories.</li></ul><h2 id="term" tabindex="-1">TERM</h2><ul><li>If delete/backspace key doesn't work, you may need to enter export TERM=xterm-256color<ul><li>can add this in .bashrc</li></ul></li></ul><h2 id="threads" tabindex="-1">Threads</h2><ul><li>Some versions of UNIX/Linux don't support thread priorities.</li><li>NPTL stands for New POSIX Thread Library</li><li>RedHat Enterprise 3 uses the 2.4.21 kernel which uses NPTL.</li><li>Fedora probably uses NPTL.</li><li>To enable thread priorities, switch to older thread library with export LD_ASSUME_KERNEL=2.4.1</li><li>Have to run as root to assign thread priorities.</li></ul><h2 id="time" tabindex="-1">Time</h2><ul><li>To find out how long it takes to execute a given command, time {command}</li></ul><h2 id="version" tabindex="-1">Version</h2><ul><li>To get UNIX version, uname -a Under Linux, the 3rd piece of data is the Linux kernel version. At Boeing it's Linux 2.4.21-15.EL and VxWorks 6.1.</li><li>To get RedHat version, cat /etc/redhat-release At Boeing it's Red Hat Enterprise Linux WS release 3 (Taroon Update 2).</li><li>To get the thread library version, getconf GNU_LIBPTHREAD_VERSION At Boeing it's NPTL 0.60. NPTL stands for New POSIX Thread Library.</li></ul><h2 id="windows" tabindex="-1">Windows</h2><ul><li>To minimize all windows, ctrl-alt-d.</li><li>To cycle between windows, ctrl-alt-tab.</li></ul><h2 id="zip" tabindex="-1">Zip</h2><ul><li>To create a zip file named foo.zip containing all the files in and below the directory bar zip -r foo bar</li><li>To unzip .bz2 files, use &quot;bunzip2 {name}.bz2&quot;.</li><li>To list the files inside a zip file, zipinfo foo.zip</li></ul></article>