<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>ZZ</h2><aside><nav class="toc"><ol><li><a href="#reviewer-notes">Reviewer Notes</a></li><li><a href="#introduction">Introduction</a></li><li><a href="#htmx-attributes">htmx Attributes</a></li><li><a href="#application-state">Application State</a></li><li><a href="#client-side-interactivity">Client-side Interactivity</a></li><li><a href="#tech-stack-options">Tech Stack Options</a></li><li><a href="#first-project">First Project</a></li><li><a href="#list-of-lists-project">List of Lists Project</a></li><li><a href="#wrapping-up">Wrapping Up</a></li></ol></nav></aside><article><style>figcaption {
    margin-top: 0.5rem;
    text-align: center;
  }
  img {
    border: 1px solid gray;
  }</style><h2 id="reviewer-notes" tabindex="-1">Reviewer Notes</h2><ul><li>My plan for the first chapter is quickly motivate the need for htmx and show an example. The first chapter will purposely avoid getting bogged down in terminology and theory.</li><li>My plan for the second chapter is to cover terminology and the history of htmx. This will include describing the meaning of hypermedia, REST, and HATEOAS.</li></ul><h2 id="introduction" tabindex="-1">Introduction</h2><p>Modern web development has become overly complicated and often performs more work than necessary to achieve a desired result. For example, modern web frameworks frequently encourage the following set of steps:</p><ul><li>The browser downloads somewhat large amounts of JavaScript code.</li><li>User interaction triggers sending an HTTP request to a server endpoint.</li><li>The endpoint queries a database.</li><li>Data from the database is converted to JSON.</li><li>The endpoint returns a JSON response.</li><li>JavaScript running in the browser parses the JSON into a JavaScript object.</li><li>HTML is generated from the JavaScript object and inserted into the DOM.</li></ul><p>Htmx is a client-side JavaScript library that simplifies this process. The name is short for &quot;HyperText Markup Extensions&quot;.</p><p>In the htmx approach, endpoints convert data to HTML (or plain text) rather than JSON, and that is returned. JavaScript in the browser no longer needs to parse JSON and generate HTML from it. It merely needs to insert the HTML into the DOM. A full page refresh is not necessary.</p><p>The htmx library is quite small ... less than 17K. This results in faster app startup due to downloading less. It also results in faster interactions because time spent generating and parsing JSON is eliminated.</p><p>The fact that htmx endpoints generate HTML, means that htmx moves a large portion of web development from the client to the server. The server endpoints can be implemented in any programming language that supports HTML templating and has an HTTP library. Popular choices include JavaScript, Python, and Go.</p><p>If you are not already a full-stack developer, using htmx will provide motivation to move in that direction. Front-end web developers need to get comfortable with implementing server endpoints. Back-end developers need to get comfortable with HTML and CSS.</p><h2 id="htmx-attributes" tabindex="-1">htmx Attributes</h2><p>Htmx provides a new set of HTML attributes that enable doing all of this without writing any custom client-side JavaScript code.</p><p>Currently htmx defines 36 attributes, but a small subset of them are commonly used. By the end of this book we will have explored each of the new attributes, but let's discuss the primary ones now.</p><p>These attributes answer the following questions:</p><ul><li><p>What events trigger a request? A mouse click, a form submission, other events?</p><p>The <code>hx-trigger</code> attribute answers this question.</p></li><li><p>What kind of request should be sent: GET, POST, PUT, PATCH or DELETE? And where should the request be sent?</p><p>The <code>hx-get</code>, <code>hx-post</code>, <code>hx-put</code>, <code>hx-patch</code>, and <code>hx-delete</code> attributes answer both of these questions.</p></li><li><p>When the endpoint returns HTML, what element should receive it?</p><p>The <code>hx-target</code> attribute answers this question.</p></li><li><p>How should the new HTML be placed relative to the target element?</p><p>The <code>hx-swap</code> attribute answers this question.</p><p><img alt="hx-swap" style="width: 80%" src="/blog/assets/htmx-hx-swap.png?v=1.1.1"></p></li></ul><h2 id="application-state" tabindex="-1">Application State</h2><p>Htmx keeps most of the application state on the server. State that is only of concern to the user interface, such as hiding and showing content, can remain on the client. But client-only state is typically a small portion of the overall state.</p><h2 id="client-side-interactivity" tabindex="-1">Client-side Interactivity</h2><p>User interactions that do not require server interactions can be handled in the client using plain JavaScript or libraries like Alpine and _hyperscript. Those libraries have something in common with htmx ... they are implemented as new HTML attributes.</p><h2 id="tech-stack-options" tabindex="-1">Tech Stack Options</h2><p>The server side of htmx web apps can be implemented with any programming language and HTTP server library. Of course some options are better than others.</p><p>Good choices make it easy to do the following:</p><ul><li><p>Create new endpoints for any HTTP verb.</p><p>One of the primary activities when using htmx is defining endpoints. It's best when an endpoint can be described in a single source file, rather than requiring editing multiple files. It's also convenient when multiple, related endpoints can be defined in the same source file.</p></li><li><p>Specify type checking and validation of request data and receive helpful error messages in responses.</p><p>Request data includes request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON. An example is the TypeScript library <a href="https://zod.dev?v=1.1.1" rel="noopener" target="_blank">Zod</a>.</p></li><li><p>Get request data in the form of request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON.</p></li><li><p>Send HTTP responses that can include headers and bodies that contain text or HTML.</p></li></ul><p>Good choices have tooling that supports the following:</p><ul><li>Fast server startup with no build process (or a simple one) to support iterative development.</li><li>Automatic server restarts after source code changes are detected.</li><li>Good HTML templating support such as JSX, rather than relying on string concatenation. JSX is an XML-based syntax popularized by the React framework for embedding HTML-like syntax directly in JavaScript code.</li><li>Syntax highlighting of HTML in code editors.</li></ul><p>One tech stack that meets all these criteria includes:</p><ul><li><a href="/blog/topics/#/blog/typescript/" target="_blank">TypeScript</a> as the programming language.</li><li><a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> as a JavaScript runtime and package manager.</li><li><a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> as the HTTP library.</li></ul><p>Other popular tech stacks for htmx include:</p><ul><li><a href="https://ahastack.dev?v=1.1.1" rel="noopener" target="_blank">AHA stack</a> which uses Astro, htmx, and <a href="/blog/topics/#/blog/alpine/?v=1.1.1" rel="noopener" target="_blank">AlpineJS</a></li><li><a href="https://github.com/ethanniser/the-beth-stack?v=1.1.1" rel="noopener" target="_blank">BETH stack</a> which uses Bun, Elysia, Turso, and htmx.</li><li>Go with <a href="https://templ.guide?v=1.1.1" rel="noopener" target="_blank">templ</a></li><li>Python with Flask (see the <code>render_template</code> function) or Django (see the <code>loader.get_template</code> and <code>template.render</code> methods)</li><li><a href="https://github.com/stolinski/hype?v=1.1.1" rel="noopener" target="_blank">Hype</a> which uses TypeScript, Bun, Elysia, SQLite, and Drizzle.</li></ul><h2 id="first-project" tabindex="-1">First Project</h2><p>Let's create a basic htmx project get a feel for it.</p><ol><li><p>Open a terminal window.</p></li><li><p>Install Bun by entering the following command.</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://bun.sh/install <span class="token operator">|</span> <span class="token function">bash</span></code></pre></li><li><p>cd to the directory where the project will be created.</p></li><li><p>Enter <code>bunx create-hono</code> to create the project.</p></li><li><p>After the &quot;Target directory&quot; prompt, enter a project name like &quot;htmx-demo&quot;.</p></li><li><p>After the &quot;Which template do you want to use?&quot; prompt, select &quot;bun&quot;.</p></li><li><p>cd to the new project directory.</p></li><li><p>Enter <code>bun install</code>.</p></li><li><p>Enter <code>bun run dev</code> to start a local server.</p></li><li><p>In a web browser, browse localhost:3000.</p></li><li><p>Verify that it renders &quot;Hello Hono!&quot;.</p></li><li><p>Rename the file <code>src/index.ts</code> to <code>src/server.tsx</code>.</p><p>The <code>.tsx</code> file extension allows using JSX to generate HTML.</p></li><li><p>Modify the &quot;dev&quot; script in <code>package.json</code> to match the following:</p><pre class="language-json"><code class="language-json"><span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"bun run --watch src/server.tsx"</span></code></pre><p>The <code>--watch</code> flag causes the Bun server to be restarted if any of the source files it is uses are modified. This does not include client-side files in the <code>public</code> directory.</p></li><li><p>Create the <code>public</code> directory.</p></li><li><p>Create the file <code>index.html</code> in the <code>public</code> directory with the following content.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>htmx Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/htmx.org@1.9.10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- When this button is clicked,<br>         an HTTP GET request is sent to /version.<br>         The text it returns replaces the innerHTML<br>         of the element with id "version". --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">hx-get</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/version<span class="token punctuation">"</span></span> <span class="token attr-name">hx-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#version<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Get Bun Version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>version<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></li><li><p>Create the file <code>styles.css</code> in the <code>public</code> directory with the following content.</p><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">button</span> <span class="token punctuation">{</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></li><li><p>Replace the contents of <code>src/server.tsx</code> with the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">type</span> <span class="token class-name">Context</span><span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Serve static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>root<span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/version'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Return a Response whose body contains</span><br>  <span class="token comment">// the version of Bun running on the server.</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>Bun<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre></li><li><p>Browse localhost:3000 again.</p></li><li><p>Click the &quot;Get Bun Version&quot; button.</p></li><li><p>Verify that a version number is displayed below the button.</p></li></ol><p>There you have it ... first project done! Take a moment to consider how the same project could be implemented in other web frameworks you have used recently. What code would be required to send an HTTP request when a button is clicked and insert the response into the current page? What code would be required to implement the endpoint?</p><h2 id="list-of-lists-project" tabindex="-1">List of Lists Project</h2><p>Throughout the book we will implement an app called &quot;List of Lists&quot; (LOL). The app allows users to create any number of lists and add any number of items to each list. Example lists include todos, desired vacation destinations, favorite books, and shopping lists. The items in each list can be updated, reordered, marked as selected, and deleted.</p><h2 id="wrapping-up" tabindex="-1">Wrapping Up</h2><p>TODO: Add this section.</p></article>