<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>ZZ</h2><aside><nav class="toc"><ol><li><a href="#reviewer-notes">Reviewer Notes</a></li><li><a href="#introducing-htmx">Introducing htmx</a></li><li><a href="#required-knowledge">Required Knowledge</a></li><li><a href="#choosing-a-tech-stack">Choosing a Tech Stack</a></li><li><a href="#using-htmx-attributes">Using htmx Attributes</a></li><li><a href="#creating-your-first-project">Creating Your First Project</a></li><li><a href="#creating-a-crud-application">Creating a CRUD Application</a></li><li><a href="#your-turn">Your Turn</a></li><li><a href="#wrapping-up">Wrapping Up</a></li></ol></nav></aside><article><style>figcaption {
    margin-top: 0.5rem;
    text-align: center;
  }
  img {
    border: 1px solid gray;
  }</style><h2 id="reviewer-notes" tabindex="-1">Reviewer Notes</h2><ul><li>My plan for the first chapter is quickly motivate the need for htmx and show a couple of examples. The first chapter will purposely avoid getting bogged down in terminology and theory.</li><li>My plan for the second chapter is to cover terminology and the history of htmx. This will include describing the meaning of hypermedia, REST, and HATEOAS.</li></ul><h2 id="introducing-htmx" tabindex="-1">Introducing htmx</h2><p>Modern web development has become overly complicated. Popular frameworks have somewhat steep learning curves and they often perform more work than necessary to achieve a desired result.</p><p>I have first hand experience with many web development approaches including vanilla JavaScript, jQuery, AngularJS, Angular, React, Vue, and Svelte. For me, each of these provided improvements over what came before. But these were incremental improvements. I find htmx to be very different from these frameworks. It is a breath of fresh air that I'm excited to share with you!</p><p>The goal of this chapter is to introduce you to how htmx simplifies web development. You will learn how htmx enables implementing web applications that are easier to understand and require less code. Development web applications using htmx will increase your enjoyment and productivity.</p><p>Modern web frameworks for implementing single-page applications (SPAs) frequently encourage the following steps:</p><ul><li>The browser downloads somewhat large amounts of JavaScript code.</li><li>User interaction triggers sending an HTTP request to a server endpoint.</li><li>The endpoint queries a database.</li><li>Data from the database is converted to JSON.</li><li>The endpoint returns a JSON response.</li><li>JavaScript running in the browser parses the JSON into a JavaScript object.</li><li>The framework generates HTML from the JavaScript object and inserts it into the DOM.</li></ul><p>Htmx is a client-side JavaScript library that simplifies this process. The name is short for &quot;HyperText Markup Extensions&quot;.</p><p>With htmx, endpoints convert data to HTML (or plain text) rather than JSON, and that is returned. JavaScript in the browser no longer needs to parse JSON and generate HTML from it. It merely needs to insert the HTML into the DOM. A full page refresh is not necessary.</p><p>The htmx library is quite small ... less than 17K. App metrics such as &quot;First Contentful Paint&quot; and &quot;Time to Interactive&quot; see improvements due to downloading less. Htmx applications also provide faster interactions, because time spent generating and parsing JSON is eliminated.</p><p>The fact that htmx endpoints generate HTML, means that htmx moves a large portion of web development from the client to the server. The server endpoints can be implemented in any programming language that supports HTML templating and has an HTTP library. Popular choices include JavaScript, Python, and Go.</p><p>Htmx keeps most of the application state on the server. State that is only of concern to the user interface, such as hiding and showing content, can remain on the client. But client-only state is typically a small portion of the overall state.</p><h2 id="required-knowledge" tabindex="-1">Required Knowledge</h2><p>Now that you understand some of the benefits of using htmx, lets's discuss what you need to know to use it.</p><p>It is useful to have some knowledge of the following topics:</p><ul><li>a code editor such as VS Code or Vim</li><li>HTML for specifying what will be rendered in the browser</li><li>CSS for styling what is rendered</li><li>some programming language for implementing HTTP endpoints</li><li>HTTP basics such as verbs, requests, and responses</li><li>command-line basics such as changing the working directory and starting a local server</li></ul><p>If you are not already a full-stack developer, using htmx will provide motivation to move in that direction. Front-end web developers will become comfortable with implementing server endpoints. Back-end developers will become comfortable with HTML and CSS.</p><h2 id="choosing-a-tech-stack" tabindex="-1">Choosing a Tech Stack</h2><p>Before you can implement a web app using htmx, you need to choose a tech stack.</p><p>The server side of htmx web applications can be implemented with any programming language and HTTP server library. This is referred to as &quot;Hypermedia On Whatever you'd Like&quot; (HOWL).</p><p>Some options are better than others. Good choices make it easy to do the following.</p><ul><li><p>Create new endpoints for any HTTP verb.</p><p>One of the primary activities when using htmx is defining endpoints. It's best when an endpoint can be described in a single source file, rather than requiring editing multiple files. It's also convenient when multiple, related endpoints can be defined in the same source file.</p></li><li><p>Specify type checking and validation of request data and receive helpful error messages in responses.</p><p>Request data includes request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON. An example is the TypeScript library <a href="https://zod.dev?v=1.1.1" rel="noopener" target="_blank">Zod</a>.</p></li><li><p>Get request data in the form of request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON.</p></li><li><p>Send HTTP responses that can include headers and bodies that contain text or HTML.</p></li></ul><p>Good choices have tooling that supports the following:</p><ul><li>Fast server startup with no build process (or a simple one) to support iterative development.</li><li>Automatic server restarts after source code changes are detected.</li><li>Good HTML templating support such as JSX, rather than relying on string concatenation. JSX is an XML-based syntax popularized by the React framework for embedding HTML-like syntax directly in JavaScript code.</li><li>Syntax highlighting of HTML in code editors.</li></ul><p>One tech stack that meets all these criteria includes:</p><ul><li><a href="/blog/topics/#/blog/typescript/" target="_blank">TypeScript</a> as the programming language.</li><li><a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> as a JavaScript runtime and package manager.</li><li><a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> as the HTTP library.</li></ul><p>This is the stack we will use for the examples in this book. It has the following appealing characteristics.</p><ul><li>Most readers will be familiar with JavaScript syntax, and possibly also with TypeScript which adds types to JavaScript.</li><li>Bun is an alternative to Node.js which provides better performance and adds features such as SQLite integration.</li><li>Hono is a simple HTTP library with great performance that can be used with many JavaScript run-times including AWS Lambda, Bun, Cloudflare Workers, Deno, Netlify, Node.js, and Vercel. Elysia is another option to consider, but it only runs on Bun.</li><li>No build step is required.</li></ul><p>Other popular tech stacks for htmx include:</p><ul><li><a href="https://ahastack.dev?v=1.1.1" rel="noopener" target="_blank">AHA stack</a> which uses Astro, htmx, and Alpine</li><li><a href="https://github.com/ethanniser/the-beth-stack?v=1.1.1" rel="noopener" target="_blank">BETH stack</a> which uses Bun, Elysia, Turso, and htmx.</li><li>Go with <a href="https://templ.guide?v=1.1.1" rel="noopener" target="_blank">templ</a></li><li>Python with Flask (see the <code>render_template</code> function) or Django (see the <code>loader.get_template</code> and <code>template.render</code> methods)</li><li><a href="https://github.com/stolinski/hype?v=1.1.1" rel="noopener" target="_blank">Hype</a> which uses TypeScript, Bun, Elysia, SQLite, and Drizzle.</li></ul><p>User interactions that do not require sending a request to a server can be handled in the browser using plain JavaScript or libraries like Alpine and _hyperscript. Those libraries have something in common with htmx ... they are implemented as new HTML attributes.</p><h2 id="using-htmx-attributes" tabindex="-1">Using htmx Attributes</h2><p>Htmx provides a new set of HTML attributes that make HTML more expressive. These attributes enable sending HTTP requests to endpoints and inserting the resulting HTML into the DOM. Any event on any HTML element can trigger any kind of HTTP request (GET, POST, PUT, PATCH, or DELETE) and the response does not result in a full page refresh. All this is done without writing any custom client-side JavaScript code.</p><p>Currently htmx defines 36 attributes, but a small subset of them are commonly used. By the end of this book we will have explored each of the new attributes, but let's discuss the primary ones now.</p><p>These attributes answer the following questions:</p><ul><li><p>What events trigger a request? A mouse click, a form submission, other events?</p><p>The <code>hx-trigger</code> attribute answers this question.</p></li><li><p>What kind of request should be sent: GET, POST, PUT, PATCH or DELETE? And where should the request be sent?</p><p>The <code>hx-get</code>, <code>hx-post</code>, <code>hx-put</code>, <code>hx-patch</code>, and <code>hx-delete</code> attributes answer both of these questions.</p></li><li><p>When the endpoint returns HTML, what element should receive it?</p><p>The <code>hx-target</code> attribute answers this question.</p></li><li><p>How should the new HTML be placed relative to the target element?</p><p>The <code>hx-swap</code> attribute answers this question.</p><p><img alt="hx-swap" style="width: 80%" src="/blog/assets/htmx-hx-swap.png?v=1.1.1"></p></li></ul><h2 id="creating-your-first-project" tabindex="-1">Creating Your First Project</h2><p>Now that we have selected a tech stack (TypeScript, Bun, and Hono) you are ready to create your first project. We will start simple to get a feel for using htmx.</p><p>First let's create a default project that uses Bun and Hono.</p><ol><li><p>Open a terminal window.</p></li><li><p>Install Bun by entering the following command.</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://bun.sh/install <span class="token operator">|</span> <span class="token function">bash</span></code></pre></li><li><p>cd to the directory where the project will be created.</p></li><li><p>Enter <code>bunx create-hono</code> to create the project.</p></li><li><p>After the &quot;Target directory&quot; prompt, enter a project name like &quot;htmx-demo&quot;.</p></li><li><p>After the &quot;Which template do you want to use?&quot; prompt, select &quot;bun&quot;.</p></li><li><p>cd to the new project directory which will contain the following:</p><ul><li><code>README.md</code> - contains instructions on running the project</li><li><code>package.json</code> - describes project dependencies and defines a script for running the project</li><li><code>tsconfig.json</code> - configures the use of TypeScript</li><li><code>.gitignore</code> - prevents the node_modules directory from being committed</li><li><code>src/index.ts</code> - implements a Hono HTTP server and defines the &quot;GET /&quot; endpoint</li></ul></li><li><p>Enter <code>bun install</code>.</p><p>This creates the <code>node_modules</code> directory and installs all the required dependencies there.</p></li><li><p>Enter <code>bun run dev</code> to start a local server.</p></li><li><p>In a web browser, browse localhost:3000.</p></li><li><p>Verify that it renders &quot;Hello Hono!&quot;.</p></li></ol><p>Now that we have a default project, let's modify it to use htmx.</p><ol><li><p>Rename the file <code>src/index.ts</code> to <code>src/server.tsx</code>.</p><p>The <code>.tsx</code> file extension allows using JSX to generate HTML.</p></li><li><p>Modify the &quot;dev&quot; script in <code>package.json</code> to match the following:</p><pre class="language-json"><code class="language-json"><span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"bun run --watch src/server.tsx"</span></code></pre><p>The <code>--watch</code> flag causes the Bun server to be restarted if any of the source files it is uses are modified. This does not include client-side files in the <code>public</code> directory.</p></li><li><p>Create the <code>public</code> directory.</p></li><li><p>Create the file <code>index.html</code> in the <code>public</code> directory with the following content.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>htmx Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/htmx.org@1.9.10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">hx-get</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/version<span class="token punctuation">"</span></span> <span class="token attr-name">hx-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#version<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Get Bun Version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>version<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>The <code>hx-get</code> attribute specifies that when the <code>button</code> element is triggered (clicked) an HTTP GET request should be sent to the endpoint at <code>/version</code>.</p><p>The <code>hx-target</code> attribute specifies that the text the endpoint returns should replace the <code>innerHTML</code> of the element with id &quot;version&quot;.</p><p>We are getting the htmx library from a CDN, but it can also be downloaded and accessed as part of the app. If the file <code>htmx.min.js</code> is placed in the <code>public</code> directory then the <code>script</code> tag above can be replaced by the following.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Create the file <code>styles.css</code> in the <code>public</code> directory with the following content.</p><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">button</span> <span class="token punctuation">{</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></li><li><p>Replace the contents of <code>src/server.tsx</code> with the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">type</span> <span class="token class-name">Context</span><span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Serve static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>root<span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/version'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Return a Response whose body contains</span><br>  <span class="token comment">// the version of Bun running on the server.</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>Bun<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p><code>Context</code> is a class defined by the Hono framework. An instance of this class is passed to all the methods that define endpoints such as <code>app.get</code>. The <code>Context</code> parameter provides access to request headers, path parameters, query parameters, and the request body.</p></li><li><p>Browse localhost:3000 again.</p></li><li><p>Click the &quot;Get Bun Version&quot; button.</p></li><li><p>Verify that a version number is displayed below the button.</p></li></ol><p><img alt="htmx Demo Project" style="width: 30%" src="/blog/assets/htmx-demo-project.png?v=1.1.1"></p><p>There you have it ... first project done!</p><p>Take a moment to consider how the same application could be implemented in other web frameworks you have used. What code would be required to send an HTTP request when a button is clicked and insert the response into the current page? What code would be required to implement the endpoint?</p><p>In the future when you want to create a new project that uses Bun, Hono, and htmx, rather than repeating all the steps above, you can create a copy of this project and modify the code.</p><p>Note that servers for htmx applications play two roles. First, they serve static files such as HTML, CSS, JavaScript, and images. Second, they respond to certain HTTP requests by returning HTML or text.</p><h2 id="creating-a-crud-application" tabindex="-1">Creating a CRUD Application</h2><p>Now that you understand the basics of creating an htmx-based web application, you are ready to step it up a bit.</p><p>Let's create a project that performs the basic CRUD operations Create, Retrieve (or Read), Update, and Delete. Actually, we will hold off on the Update part for now and address that later because there are a couple of ways that functionality can be implemented.</p><p>This app can maintain a collection of any sort of data. Let's maintain a list of dogs. For each dog we will store their name and breed.</p><p>To keep things simple, the data will just be held in memory on the server. Later we will see how Bun makes it very easy to interact with SQLite databases. This can be used to persist the data so it is not lost when the server restarts.</p><p>The following screenshot shows what we want to build.</p><p><img alt="htmx CRUD" style="width: 50%" src="/blog/assets/htmx-crud.png?v=1.1.1"></p><p>To add a dog, enter their name and breed, then click the &quot;Add&quot; button. To delete a dog, hover over its table row, then click the white &quot;X&quot; that appears after the row.</p><p>Begin by copying the previous project.</p><p>Replace <code>public/index.html</code> with the following.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>htmx Demo<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>Dogs<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br><br>    <span class="token operator">&lt;</span>form<br>      hx<span class="token operator">-</span>disabled<span class="token operator">-</span>elt<span class="token operator">=</span><span class="token string">"#add-btn"</span><br>      hx<span class="token operator">-</span>post<span class="token operator">=</span><span class="token string">"/dog"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"table tbody"</span><br>      hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"afterbegin"</span><br>      hx<span class="token operator">-</span>on<span class="token operator">:</span>htmx<span class="token operator">:</span>after<span class="token operator">-</span>request<span class="token operator">=</span><span class="token string">"this.reset()"</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>div<span class="token operator">></span><br>        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>        <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"name"</span> required size<span class="token operator">=</span><span class="token string">"30"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span>div<span class="token operator">></span><br>        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"breed"</span><span class="token operator">></span>Breed<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>        <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"breed"</span> required size<span class="token operator">=</span><span class="token string">"30"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">"add-btn"</span><span class="token operator">></span>Add<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br><br>    <span class="token operator">&lt;</span>table hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/dog"</span> hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"tbody"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"revealed"</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>thead<span class="token operator">></span><br>        <span class="token operator">&lt;</span>tr<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span>Breed<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span><br>      <span class="token operator">&lt;</span>tbody<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>What is the purpose of all those <code>hx-</code> attributes on the <code>form</code> element?</p><p>The <code>hx-disabled-elt</code> attribute disables the &quot;Add button while any request associated with the <code>form</code> is being processed. In this case it applies to POST requests that are sent when the <code>form</code> is submitted. This prevents duplicate form submissions.</p><p>The <code>hx-post</code> attribute specifies that a POST request should be sent to <code>/dog</code> when the form is submitted. The request body will contain form data for the name and breed. As we will see soon, the response will contain a new table row.</p><p>The <code>hx-target</code> attribute specifies that the returned HTML should be placed relative to the <code>tbody</code> element that is inside the <code>table</code> element.</p><p>The <code>hx-swap</code> attribute specifies that the returned table row should be inserted after the beginning of the target. Since the target is the <code>tbody</code> element, the new table row will be inserted before all the existing rows.</p><p>The <code>hx-on</code> attribute specifies that after the POST request is processed, the <code>form</code> should be reset. This clears the values of the name and breed inputs.</p><p>What is the purpose of all those <code>hx-</code> attributes on the <code>table</code> element?</p><p>The <code>hx-trigger</code> attribute specifies the event that triggers an HTTP request. In this case it is triggered when the table comes into view. For this app, that happens immediately since there isn't much content above the <code>table</code>. But if there was more content above the table and the user needed to scroll down to see it, htmx would wait until the table is &quot;revealed&quot; to send the request.</p><p>The <code>hx-get</code> attribute specifies that a GET request should be sent to <code>/dog</code>. As we will see soon, the response will contain one table row for each dog that was previously added.</p><p>The <code>hx-target</code> attribute specifies that the returned table rows should replace the contents of the <code>tbody</code> element.</p><p>Wow, we have defined a lot of client-side functionality without writing ANY custom JavaScript code!</p><p>Now let's look at the server-side code that supports the HTTP requests.</p><p>Replace <code>src/server.tsx</code> with the following.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">type</span> <span class="token class-name">Context</span><span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> dogs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Dog<span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Dog <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> id <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// standard web API</span><br>  <span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> breed<span class="token punctuation">}</span><span class="token punctuation">;</span><br>  dogs<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> dog<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Some sample data so we don't start out empty.</span><br><span class="token function">addDog</span><span class="token punctuation">(</span><span class="token string">'Comet'</span><span class="token punctuation">,</span> <span class="token string">'Whippet'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">addDog</span><span class="token punctuation">(</span><span class="token string">'Oscar'</span><span class="token punctuation">,</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">DogRow</span><span class="token punctuation">(</span>dog<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>tr <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"on-hover"</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>dog<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>      <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>dog<span class="token punctuation">.</span>breed<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>      <span class="token operator">&lt;</span>td <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"plain"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>button<br>          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"show-on-hover"</span><br>          hx<span class="token operator">-</span><span class="token keyword">delete</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/dog/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dog<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>          hx<span class="token operator">-</span>confirm<span class="token operator">=</span><span class="token string">"Are you sure?"</span><br>          hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"closest tr"</span><br>          hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML"</span><br>        <span class="token operator">></span><br>          ✕<br>        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>root<span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/dog'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> sortedDogs <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>dogs<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span><br>    a<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>name<span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">{</span>sortedDogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>DogRow<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/dog'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  Bun<span class="token punctuation">.</span><span class="token function">sleepSync</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> breed <span class="token operator">=</span> <span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'breed'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> breed<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">DogRow</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/dog/:id'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> id <span class="token operator">=</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  dogs<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p>This code begins by define the <code>Dog</code> type. It then declares a <code>Map</code> to hold dogs where the keys are unique ids and the values are <code>Dog</code> objects.</p><p>The <code>addDog</code> function creates a <code>Dog</code> object for given <code>name</code> and <code>breed</code> values. It then adds the object to the <code>dogs</code> <code>Map</code>. This function is called a couple of times to add sample data.</p><p>The function <code>DogRow</code> returns an HTML table row for a given dog using JSX. Each row contains a <code>button</code> element that is used to delete the corresponding dog. This element uses several <code>hx-</code> attributes.</p><p>The <code>hx-delete</code> attribute specifies that a DELETE request should be sent to <code>/dog/{some-dog-id}</code> when the button is clicked.</p><p>The <code>hx-confirm</code> attribute specifies a prompt that will appear in a confirmation dialog that the user will see before the request is sent. The dialog will contain &quot;Cancel&quot; and &quot;OK&quot; buttons. The request will only be sent if the user clicks the OK button. Later we will see how to replace this dialog with one that can be styled.</p><p>The <code>hx-target</code> attribute specifies that we want to target the table row that contains this button with response (`closest tr').</p><p>The <code>hx-swap</code> attribute specifies that we want to replace the target (<code>outerHTML</code>) with the response. The response will have an empty body, so the table row will be removed.</p><p>The remaining code creates a Hono server and defines several endpoints.</p><p>The endpoint for &quot;GET /dog&quot; returns a bunch of table rows, one for each dog, sorted by their names.</p><p>The endpoint for &quot;POST /dog&quot; adds a new dog and returns a table row describing the new dog.</p><p>The endpoint for &quot;DELETE /dog&quot; deletes the dog with a given id and returns nothing. This results in the table row for the dog being deleted.</p><p>We won't examine the CSS for this project, but it can be found <a href="https://github.com/mvolkmann/htmx-examples/blob/main/htmx-crud/public/styles.css" target="_blank">here</a>.</p><p>This application provides a surprising amount of functionality given the small amount of code that was written to implement it.</p><p>Like before, take a moment to consider how the same application could be implemented in other web frameworks you have used. How much more verbose would the code be for both the client-side and server-side?</p><p>You have now seen some of the most commonly used htmx attributes in action. But there are many more that will be introduced in later chapters.</p><h2 id="your-turn" tabindex="-1">Your Turn</h2><p>Before moving on, try the following things to make sure you understand how to implement and use HTTP endpoints with htmx.</p><ol><li>In the first project, change the <code>/version</code> endpoint to return HTML instead of text. For example, <code>return c.html(&lt;img alt=&quot;some description&quot; src=&quot;some-image-url&quot; /&gt;);</code></li><li>Modify the CRUD application to manage a different kind of data. Perhaps instead of dogs it can maintain a list of favorite books.</li><li>Modify the CRUD application to persist the data to a file. On server startup, read the file into a string and use the <code>JSON.parse</code> function to convert the string to a collection of data. Every time the collection of data is modified, use the <code>JSON.stringify</code> function to turn the collection of data into a string and write that to the file.</li></ol><h2 id="wrapping-up" tabindex="-1">Wrapping Up</h2><p>You have now built two web applications that use htmx. The first was very basic, just to get your feet wet. The second was more involved, supporting basic CRUD functionality through the use of many htmx attributes.</p><p>Throughout the book we will implement an app called &quot;List of Lists&quot; (LOL). The app allows users to create any number of lists and add any number of items to each list. Example lists include todos, desired vacation destinations, favorite books, and shopping lists. The items in each list can be updated, reordered, marked as selected, and deleted.</p><p>In the next chapter we will uncover more about the motivations behind htmx. We will discuss the meaning of &quot;hypermedia&quot; and &quot;HATEOAS&quot;. Then we will explore why web application architectures that are commonly referred to as &quot;REST&quot; are not really what Roy Fielding meant when he coined the term.</p></article>