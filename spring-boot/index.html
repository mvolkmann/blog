<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Spring Boot</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#vs-code">VS Code</a></li><li><a href="#creating-a-project">Creating a Project</a></li><li><a href="#implementing-crud-endpoits">Implementing CRUD Endpoits</a></li><li><a href="#running-the-server">Running the Server</a></li><li><a href="#reducing-terminal-logging">Reducing Terminal Logging</a></li><li><a href="#automatic-server-restart">Automatic Server Restart</a></li><li><a href="#implementing-unit-tests">Implementing Unit Tests</a></li></ol></nav></aside><article><figure style="width: 30%"><img alt="Spring logo" src="/blog/assets/spring-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://spring.io" target="_blank">Spring</a> is a set of Java services that aim to simplify some common tasks. Spring Boot &quot;makes it easy to create stand-alone, production-grade Spring based Applications&quot;.</p><h2 id="vs-code" tabindex="-1">VS Code</h2><p>When using VS Code for Java development:</p><ul><li>Install the extension &quot;Extension Pack For Java&quot; from Microsoft.</li><li>If using Spring Boot, install the &quot;Spring Boot Extension Pack&quot; from VMware.</li></ul><h2 id="creating-a-project" tabindex="-1">Creating a Project</h2><ol><li>Install the latest version of the Java Development Kit (JDK). When using <a href="https://sdkman.io" target="_blank">SDKMAN</a>, change the version of Java used with <code>sdk use java 21.0.3-tem</code>.</li><li>Install the Gradle build tool. In macOS, this can be done with <code>brew install gradle</code>.</li><li>Browse the <a href="https://start.spring.io" target="_blank">spring initializr</a>.</li><li>For Project, select &quot;Gradle - Kotlin&quot;.</li><li>For Language, select &quot;Java&quot;.</li><li>For &quot;Spring Boot&quot;, select the latest version (for me this was &quot;3.3.0&quot;).</li><li>For &quot;Packaging&quot;, select &quot;Jar&quot;.</li><li>For &quot;Java&quot;, select the latest version (for me this was &quot;21&quot;).</li><li>Click the &quot;ADD DEPENDENCIES...&quot; button.</li><li>Under the &quot;WEB&quot; category, click &quot;Spring Web&quot; and &quot;Spring Boot DevTools&quot;. &quot;Spring Boot DevTools&quot; can automatically restart the Spring server when code changes are detected.</li><li>Click the &quot;GENERATE&quot; button which creates the file <code>demo.zip</code> in the `Downloads' directory.</li><li>Unzip that file and move the resulting directory to the desired location.</li><li>Open a terminal and cd to the directory of the new project.</li><li>Verify that the project builds by entering <code>./gradlew build</code></li></ol><h2 id="implementing-crud-endpoits" tabindex="-1">Implementing CRUD Endpoits</h2><ol><li><p>Open the project in your editor of choice.</p></li><li><p>Create the file <code>src/main/java/com/example/demo/DogController.java</code> containing the following which implements endpoints for all the CRUD operations:</p><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>\<span class="token operator">*</span><span class="token punctuation">;</span><br><br><span class="token annotation punctuation">@RestController</span><br><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DogController</span> <span class="token punctuation">{</span><br><br>    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span>UUID<span class="token punctuation">,</span> <span class="token class-name">Dog</span><span class="token punctuation">></span></span> dogMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">public</span> <span class="token class-name">DogController</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token string">"Whippet"</span><span class="token punctuation">,</span> <span class="token string">"Comet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token string">"German Shorthaired Pointer"</span><span class="token punctuation">,</span> <span class="token string">"Oscar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token class-name">Dog</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token class-name">String</span> breed<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>breed<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        dogMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>id<span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> dog<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/api/dog"</span><span class="token punctuation">)</span><br>    <span class="token keyword">public</span> <span class="token class-name">Dog</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"in getDogs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">></span></span> dogCollection <span class="token operator">=</span> dogMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Dog</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dogArray <span class="token operator">=</span> dogCollection<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> dogArray<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/api/dog"</span><span class="token punctuation">)</span><br>    <span class="token keyword">public</span> <span class="token class-name">Dog</span> <span class="token function">createDog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token function">addDog</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>breed<span class="token punctuation">,</span> dog<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/api/dog/{dogId}"</span><span class="token punctuation">)</span><br>    <span class="token keyword">public</span> <span class="token class-name">Dog</span> <span class="token function">updateDog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> dogId<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Dog</span> existingDog <span class="token operator">=</span> dogMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">fromString</span><span class="token punctuation">(</span>dogId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        existingDog<span class="token punctuation">.</span>breed <span class="token operator">=</span> dog<span class="token punctuation">.</span>breed<span class="token punctuation">;</span><br>        existingDog<span class="token punctuation">.</span>name <span class="token operator">=</span> dog<span class="token punctuation">.</span>name<span class="token punctuation">;</span><br>        <span class="token keyword">return</span> existingDog<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/api/dog/{dogId}"</span><span class="token punctuation">)</span><br>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">deleteDog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> dogId<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> dogMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">fromString</span><span class="token punctuation">(</span>dogId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> dog <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span> <span class="token operator">:</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li></ol><h2 id="running-the-server" tabindex="-1">Running the Server</h2><ol><li><p>Specify the port (defaults to 8080) to be used in <code>src/main/resources/application.properties</code> by adding the following line:</p><pre class="language-text"><code class="language-text">server.port=1919</code></pre></li><li><p>Ensure that port to be used is not already in use.</p></li><li><p>Enter <code>./gradlew bootRun</code></p></li><li><p>Browse <code>localhost:8080/api/dog</code> and verify that a JSON array of dog descriptions is output.</p></li></ol><h2 id="reducing-terminal-logging" tabindex="-1">Reducing Terminal Logging</h2><p>To reduce the amount of logging output in the terminal where the server is started, add the following in <code>resources/application.yaml</code>:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">logging.level</span><span class="token punctuation">:</span><br>  <span class="token key atrule">root</span><span class="token punctuation">:</span> error<br>  <span class="token key atrule">com.example.demo</span><span class="token punctuation">:</span> debug</code></pre><h2 id="automatic-server-restart" tabindex="-1">Automatic Server Restart</h2><p>The server can be configured to automatically restart when any source files are modified. To configure this, add the following line in <code>src/main/resources/application.properties</code>:</p><pre class="language-text"><code class="language-text">spring.devtools.restart.additional-paths=src/main/**</code></pre><p>TODO: Why doesn't this work?</p><h2 id="implementing-unit-tests" tabindex="-1">Implementing Unit Tests</h2></article>