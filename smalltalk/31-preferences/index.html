<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Preferences</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#setting-from-world-menu">Setting from World Menu</a></li><li><a href="#built-in-preferences">Built-in Preferences</a></li><li><a href="#setting-in-an-inspector">Setting in an Inspector</a></li><li><a href="#preferenceset">PreferenceSet</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>The Cuis Smalltalk development environment is customized via many preferences. These are stored in the global variable <code>Preferences</code> which is an instance of the class <code>PreferenceSet</code>.</p><h2 id="setting-from-world-menu" tabindex="-1">Setting from World Menu</h2><p>Some preferences can be set from the &quot;Preferences&quot; submenu of the World menu. These include the following where the ones separated by a slash included opposite Boolean values for the same preference.</p><ul><li>Focus follows Mouse / Focus when Click</li><li>Show ST-80 assignments / Show ANSI assignments</li><li>Size of GUI elements...</li><li>Set System Font...</li><li>Load all TrueType Fonts</li><li>Icons...</li><li>Themes...</li><li>Show taskbar / Hide taskbar</li><li>Full screen on / Full screen off</li><li>Save Prefs in UserPrefs.txt / Save Prefs in the Image</li><li>Set Code Author...</li><li>All prefernces...</li></ul><h2 id="built-in-preferences" tabindex="-1">Built-in Preferences</h2><p>The base Cuis image populates this with the following preferences. This list was obtained by evaluating <code>Preferences allPreferences keys asSortedCollection print</code>.</p><ul><li><code>#aaFontsColormapDepth</code></li><li><code>#allowBlockArgumentAssignment</code></li><li><code>#allowNonBooleanReceiversOfBooleanMessages</code></li><li><code>#allowNonLocalReturnsInExceptionHandlers</code></li><li><code>#alternativeBrowseIt</code></li><li><code>#askConfirmationOnQuit</code></li><li><code>#askToInstallComplexPackage</code></li><li><code>#atMinusDigitMeaning</code></li><li><code>#autoNumberUserChanges</code></li><li><code>#autoReplaceNamedCharacters</code></li><li><code>#automaticPlatformSettings</code></li><li><code>#backgroundEffect</code></li><li><code>#balloonHelpEnabled</code></li><li><code>#biggerCursors</code></li><li><code>#browseWithPrettyPrint</code></li><li><code>#browserWindowClass</code></li><li><code>#cacheDisplayContentWhenMovingMorphs</code></li><li><code>#cacheTrueTypeGlyphs</code></li><li><code>#caseSensitiveFinds</code></li><li><code>#changeSetVersionNumbers</code></li><li><code>#cheapWindowReframe</code></li><li><code>#checkForSlips</code></li><li><code>#checkLostChangesOnStartUp</code></li><li><code>#classAnnotations</code></li><li><code>#classFinder</code></li><li><code>#clearPackagePathsOnImageMove</code></li><li><code>#clickGrabsMorphs</code></li><li><code>#cmdDotEnabled</code></li><li><code>#cmdDotInterruptTakesStatistics</code></li><li><code>#ctrlArrowsScrollHorizontally</code></li><li><code>#debugHaloHandle</code></li><li><code>#debugLogTimestamp</code></li><li><code>#debugShowDamage</code></li><li><code>#decorateBrowserButtons</code></li><li><code>#defaultAuthorName</code></li><li><code>#defaultFontSize</code></li><li><code>#diffsInChangeList</code></li><li><code>#diffsWithPrettyPrint</code></li><li><code>#dismissAllOnOptionClose</code></li><li><code>#drawKeyboardFocusIndicator</code></li><li><code>#extraDebuggerButtons</code></li><li><code>#fileOutANSIassignment</code></li><li><code>#focusFollowsMouse</code></li><li><code>#focusIndicatorWidth</code></li><li><code>#fullPrintItInWorkspaces</code></li><li><code>#fullScreenLeavesDeskMargins</code></li><li><code>#haloEnclosesFullBounds</code></li><li><code>#haloHandleSize</code></li><li><code>#haloSpecifications</code></li><li><code>#halosMorphBoundsFillColor</code></li><li><code>#halosMorphBoundsFrameColor</code></li><li><code>#halosShowCoordinateSystem</code></li><li><code>#highlightBlockNesting</code></li><li><code>#initialFileListDirectories</code></li><li><code>#italicsInShout</code></li><li><code>#listClassesHierarchically</code></li><li><code>#logDebuggerStackToFile</code></li><li><code>#machine</code></li><li><code>#menuKeyboardControl</code></li><li><code>#messageCategoryAnnotations</code></li><li><code>#methodAnnotations</code></li><li><code>#optionalButtons</code></li><li><code>#pointer</code></li><li><code>#prettyPrintRectangularBlocks</code></li><li><code>#properDisplayAlphaForFonts</code></li><li><code>#roundedButtonRadius</code></li><li><code>#roundedWindowRadius</code></li><li><code>#saveReleaseOptionsInWorldMenu</code></li><li><code>#scrollbarThickness</code></li><li><code>#selectionsMayShrink</code></li><li><code>#selectiveHalos</code></li><li><code>#serverMode</code></li><li><code>#shiftClickShowsImplementors</code></li><li><code>#shoutInWorkspaces</code></li><li><code>#showAnnotations</code></li><li><code>#showAssignmentAsLeftArrow</code></li><li><code>#showLinesInHierarchyViews</code></li><li><code>#soundQuickStart</code></li><li><code>#soundStopWhenDone</code></li><li><code>#soundsEnabled</code></li><li><code>#standardButtonFont</code></li><li><code>#standardCodeFont</code></li><li><code>#standardListFont</code></li><li><code>#standardMenuFont</code></li><li><code>#stylingWithEmphasisInWorkspaces</code></li><li><code>#subPixelRenderColorFonts</code></li><li><code>#subPixelRenderFonts</code></li><li><code>#syntaxHighlightingAsYouType</code></li><li><code>#systemCategoryAnnotations</code></li><li><code>#systemWindowEmbedOK</code></li><li><code>#tapAndHoldEmulatesButton2</code></li><li><code>#thoroughSenders</code></li><li><code>#tileResizerInWindowMenu</code></li><li><code>#transcriptLogVerbose</code></li><li><code>#usePreDebugWindow</code></li><li><code>#useUserPrefsFile</code></li><li><code>#userChangesFileNameExtension</code></li><li><code>#wantsMenuIcons</code></li><li><code>#warnAboutNonLocalReturnsInExceptionHandlers</code></li><li><code>#warnAndOfferLastUserChanges</code></li><li><code>#warnIfNoChangesFile</code></li><li><code>#warnIfNoSourcesFile</code></li><li><code>#windowTitleFont</code></li><li><code>#worldMenu</code></li></ul><h2 id="setting-in-an-inspector" tabindex="-1">Setting in an Inspector</h2><p>Many supported preferences are not directly on the Preferences submenu of the World menu. To access those, click &quot;All preferences...&quot; which opens a Preferences window. Click a preference symbol in the left pane to display its current value in the right pane.</p><p>To change the value of a preference:</p><ul><li>Select it in the left pane.</li><li>Press cmd-i (inspect) to open an Inspect window.</li><li>In the bottom pane, enter <code>value := {new-value}</code> and &quot;Do it&quot;.</li><li>Close the Inspect window.</li><li>Close the Preferences window.</li></ul><p>The following code sets a preference to enable playing sounds and plays a basic sound:</p><pre class="language-smalltalk"><code class="language-smalltalk">Preferences at<span class="token punctuation">:</span> <span class="token symbol">#soundsEnabled</span> put<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>Smalltalk primitiveBeep<span class="token punctuation">.</span></code></pre><h2 id="preferenceset" tabindex="-1">PreferenceSet</h2><p>Your packages can store user preferences in a <code>PreferenceSet</code>.</p><p>The first step is to ensure that a default value for the preference is set. To do this, add the class method <code>initialize</code> to one of your classes. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">prefs</span> <span class="token punctuation">|</span></span><br>    prefs <span class="token operator">:=</span> PreferenceSet sysPreferences<span class="token punctuation">.</span><br>    prefs<br>        name<span class="token punctuation">:</span> <span class="token symbol">#backgroundEffect</span><br>        description<span class="token punctuation">:</span> <span class="token string">'determines how backgroundImage is applied'</span><br>        category<span class="token punctuation">:</span> <span class="token symbol">#gui</span><br>        type<span class="token punctuation">:</span> Symbol<br>        value<span class="token punctuation">:</span> <span class="token symbol">#stretch</span><span class="token punctuation">.</span></code></pre><p>The provided category symbols can be retrieved with <code>PreferenceSet sysPreferences categories</code>. By default that returns <code>#(#font #gui #programming #system)</code>.</p><p>To change the preference value:</p><pre class="language-smalltalk"><code class="language-smalltalk">PreferenceSet sysPreferences at<span class="token punctuation">:</span> <span class="token symbol">#backgroundEffect</span> put<span class="token punctuation">:</span> <span class="token symbol">#tile</span><span class="token punctuation">.</span></code></pre><p>To retrieve the preference value:</p><pre class="language-smalltalk"><code class="language-smalltalk">effect <span class="token operator">:=</span> PreferenceSet sysPreferences at<span class="token punctuation">:</span> <span class="token symbol">#backgroundEffect</span><span class="token punctuation">.</span></code></pre></article>