<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Development Environment</h2><aside><nav class="toc"><ol><li><a href="#push-pins">Push Pins</a></li><li><a href="#background-image">Background Image</a></li><li><a href="#workspace-windows">Workspace Windows</a></li><li><a href="#transcript-windows">Transcript Windows</a></li><li><a href="#focus">Focus</a></li><li><a href="#editing-code">Editing Code</a></li><li><a href="#inspect-windows">Inspect Windows</a></li><li><a href="#explore-windows">Explore Windows</a></li><li><a href="#system-browsers">System Browsers</a><ol><li><a href="#system-browser-ui">System Browser UI</a></li><li><a href="#code-formatting">Code Formatting</a></li><li><a href="#working-with-classes">Working with Classes</a></li><li><a href="#working-with-methods">Working with Methods</a></li><li><a href="#refactorings">Refactorings</a></li></ol></li><li><a href="#search-browser">Search Browser</a></li><li><a href="#hierarchy-browsers">Hierarchy Browsers</a></li><li><a href="#protocol-browsers">Protocol Browsers</a></li><li><a href="#text-editor-windows">Text Editor Windows</a></li><li><a href="#message-names-windows">Message Names Windows</a></li><li><a href="#messagenotunderstood-errors">MessageNotUnderstood Errors</a></li><li><a href="#debug-windows">Debug Windows</a></li><li><a href="#change-sorter-windows">Change Sorter Windows</a></li><li><a href="#file-list">File List</a></li><li><a href="#installed-packages-window">Installed Packages Window</a></li><li><a href="#process-browsers">Process Browsers</a></li><li><a href="#taskbar">Taskbar</a></li><li><a href="#emergency-evaluator">Emergency Evaluator</a></li><li><a href="#menu-item-discovery">Menu Item Discovery</a></li><li><a href="#button-discovery">Button Discovery</a></li><li><a href="#screenshots">Screenshots</a></li></ol></nav></aside><article><p>You will be opening and using many windows in the development environment. To open a window, open the World menu, hover over &quot;Open&quot; to display a submenu of window types, and click one of them.</p><p>To close a window, click its red circle button on the left side of its title bar. Alternatively, hover over the window and press cmd-w.</p><p>The available windows, in the order listed, include:</p><table><thead><tr><th>Window Name</th><th>Description</th></tr></thead><tbody><tr><td>Text Editor</td><td>for editing text other than Smalltalk source code</td></tr><tr><td>Workspace</td><td>for experimenting with code (described in the &quot;Getting Started&quot; section)</td></tr><tr><td>Browser</td><td>for examining and editing code (a.k.a. System Browser)</td></tr><tr><td>Message Names</td><td>for finding classes that implement a given method</td></tr><tr><td>Transcript</td><td>displays output (described in the &quot;Getting Started&quot; section)</td></tr><tr><td>Installed Packages</td><td>lists all installed packages and allows more to be installed</td></tr><tr><td>Change Sorter</td><td>for viewing, manipulating, and saving ChangeSets</td></tr><tr><td>Process Browser</td><td>displays the state of all Smalltalk processes and enables terminating them</td></tr><tr><td>Emergency Evaluator</td><td>a limited user interface that appears when an error occurs that prevents opening a Debugger; can revert the last code modification in order to recover</td></tr><tr><td>File List</td><td>file explorer for viewing all local files and editing text files</td></tr><tr><td>SUnit Test Runner</td><td>for running unit tests and viewing the results</td></tr></tbody></table><p>Of these, the most frequently used windows tend to be Workspace, Transcript, and Browser.</p><p>To tile all the open windows, open the World menu and select Windows...Tile open windows.</p><p>To refresh all the windows after code changes that affect them (or if the display renders incorrectly for some reason), open the World menu and select &quot;Windows...Restore all Windows&quot;. This does not update windows to use a newly selected theme.</p><h2 id="push-pins" tabindex="-1">Push Pins</h2><p>By default, menus close after a selection is made or by clicking outside them. To keep a menu open until it is explicitly closed, click its push pin in the upper-right corner. This applies to the World menu and the &quot;New morph...&quot; menu. Any others? I wish it applied to the &quot;Open...&quot; menu!</p><h2 id="background-image" tabindex="-1">Background Image</h2><p>To add a background image to the <code>WorldMorph</code>, execute the following statements in a Workspace:</p><pre class="language-smalltalk"><code class="language-smalltalk">filePath <span class="token operator">:=</span> <span class="token string">'/Users/volkmannm/Pictures/images/altitude1600.jpg'</span><span class="token punctuation">.</span><br>stream <span class="token operator">:=</span> filePath asFileEntry readStream<span class="token punctuation">.</span><br><span class="token keyword">self</span> runningWorld backgroundImageData<span class="token punctuation">:</span> stream binary contentsOfEntireFile<span class="token punctuation">.</span></code></pre><p>This will stretch the image over the window (<code>WorldMorph</code>), changing its aspect ratio. Other options do not change the aspect ratio of the image.</p><p>To cover the window with an image where the right or bottom of the image can be clipped, set the following preference before sending <code>#backgroundImageData</code> to the running World:</p><pre class="language-smalltalk"><code class="language-smalltalk">PreferenceSet sysPreferences at<span class="token punctuation">:</span> <span class="token symbol">#backgroundEffect</span> put<span class="token punctuation">:</span> <span class="token symbol">#cover</span><span class="token punctuation">.</span></code></pre><p>To tile the window with an image, set the following preference before sending <code>#backgroundImageData</code> to the running World:</p><pre class="language-smalltalk"><code class="language-smalltalk">PreferenceSet sysPreferences at<span class="token punctuation">:</span> <span class="token symbol">#backgroundEffect</span> put<span class="token punctuation">:</span> <span class="token symbol">#tile</span><span class="token punctuation">.</span></code></pre><h2 id="workspace-windows" tabindex="-1">Workspace Windows</h2><p>Workspaces provide a place for experimenting with code and save arbitrary text. Pharo Smalltalk calls these &quot;Playgrounds&quot;.</p><p>Pressing cmd-s in Workspace prompts for a file name where the contents will be saved. The file will be created in the <code>Cuis-Smalltalk-Dev-UserFiles</code> directory. This file can be shared with others. To load the file contents into a new Workspace in a future session, open a &quot;File List&quot; window, select the file, right-click the file, and select &quot;workspace with contents&quot;.</p><h2 id="transcript-windows" tabindex="-1">Transcript Windows</h2><p>Transcript windows display output from methods. One way to send output to a Transcript is <code>Transcript show: {message}</code>. Another, more compact way is to send the <code>#print</code> message to any object. To clear the Transcript, send the <code>#clear</code> message to the <code>Transcript</code> class.</p><p>When output is sent to the <code>Transcript</code>, it appears in all <code>Transcript</code> windows. So it doesn't make sense to open more than one.</p><p>If content is written to the Transcript, but no Transcript window is open, opening one will display the previously written content.</p><p>Transcript windows are not scrollable, so they only display a limited number of lines. This is intentional for performance reasons.</p><p>If a more lines are written to Transcript windows than they currently display, there are two ways to see additional lines. The first is to resize the window to be taller. The second is to right-click in the Transcript window and select &quot;Workspace with Contents&quot;. This opens a new Workspace whose content is all the lines in the Transcript window. All Workspace windows are scrollable.</p><p>Transcript windows do not support copy and paste, but Workpace windows do. To copy text in a Transcript window, right-click in the Transcript window and select &quot;Workspace with Contents&quot;. Then select text in the new Workspace window with the mouse and press cmd-c.</p><h2 id="focus" tabindex="-1">Focus</h2><p>By default, focus automatically goes to the <code>Morph</code> under the mouse cursor. This makes it unnecessary to click on a Morph in order to begin typing text into one of its inputs. Just move the mouse cursor over it and start typing.</p><p>To change the focus behavior, open the World menu and select Preferences ... Focus when Click. To restore the default behavior, open the World menu and select Preferences ... Focus follows Mouse.</p><h2 id="editing-code" tabindex="-1">Editing Code</h2><p>Many kinds of windows support entering Smalltalk code. The syntax highlighting described in the table below is provided.</p><table><thead><tr><th>Token Type</th><th>Styling</th></tr></thead><tbody><tr><td>class name</td><td>black and bold</td></tr><tr><td>comment</td><td>green</td></tr><tr><td>instance variable</td><td>purple</td></tr><tr><td>keyword</td><td>red</td></tr><tr><td>message name</td><td>blue</td></tr><tr><td>string</td><td>purple</td></tr><tr><td>symbol</td><td>blue and bold</td></tr></tbody></table><p>In any text editing pane, right-click and select &quot;Help...&quot; to see a list of the supported key bindings.</p><p>To select arbitrary text, drag over it. To select a word, double-click it. To select an entire line, triple-click it. To select all the code in an editing pane, press cmd-a.</p><p>To toggle surrounding selected text with a given delimiter character, press cmd and the starting delimiter character which can be <code>'</code>, <code>&quot;</code>, <code>(</code>, <code>[</code>, or <code>{</code>. Pressing cmd-&quot; is useful to toggle whether selected code commented/uncommented.</p><p>To change the indentation of a block of code, select all the lines and press tab to increase indentation or shift-tab to decrease it.</p><p>To get help on a token, select it, right-click it, and select &quot;Explain&quot;. A popup will appear. If the token is a literal value, it give its class name. If the token is a class name, it will give its class category. If the token is a message name, it will list the classes that implement it.</p><p>If an attempt is made to close a window that contains unsaved changes or move focus from an editing pane that contains unsaved changes, a popup will appear with the prompt &quot;Changes have not been saved. Is it OK to cancel those changes?&quot;. Click the &quot;Yes&quot; to discard the changes or &quot;No&quot; to continue working in the editing pane.</p><h2 id="inspect-windows" tabindex="-1">Inspect Windows</h2><p>Inspect windows display all the instance variables of a specific object. To open one, select an object reference or place the cursor immediately after it and press cmd-i (Inpect it).</p><p><img alt="Cuis Inspect window" style="width: 40%" src="/blog/assets/cuis-inspect-window.png?v=1.1.1"></p><p>Clicking an item in the top left pane, displays related information in the top right pane.</p><ul><li>Click &quot;self&quot; to display the class name of the object.</li><li>Click &quot;all inst vars&quot; to display a list of all instance variables and their values.</li><li>Click the name of an instance to display its current value.</li></ul><p>The bottom pane can be used to enter and execute Smalltalk expressions. Instance variables can be directly accessed and where <code>self</code> refers to the object being inspected. For example, when the object is a <code>Morph</code>:</p><ul><li>To get the value of the <code>color</code> instance variable, enter <code>color</code> or <code>self color</code> and press cmd-p (Print it).</li><li>To set the value of the <code>color</code> instance variable, enter <code>color := Color red</code> or <code>self color: Color red</code> and press cmd-d (Do it).</li></ul><p>Inspector windows are live, so changes made to the instance variables are reflected.</p><p>Let's walk through an example:</p><ol><li>Open the World menu and select &quot;New Morph...&quot;.</li><li>Select &quot;Basic...BorderedBoxMorph&quot;. An orange rectangle will appear, attached to the mouse cursor.</li><li>Move to where you want to place it and click to drop it.</li><li>cmd-click on the <code>Morph</code> to open its halo.</li><li>Click the blue button on the top row.</li><li>Select &quot;debug...inspect morph&quot; to open an Inspect window for the object that represents that <code>Morph</code>.</li><li>Click the <code>color</code> instance variable and note that the value is a <code>Color</code> object.</li><li>Select the name &quot;Color&quot; and press cmb-b (Browse it) to open a System Browser focused on the <code>Color</code> class.</li><li>Click the &quot;class&quot; button to see a list of the class methods in the <code>Color</code> class.</li><li>Click the method category &quot;named colors&quot; and note that one of the methods is &quot;red&quot;.</li><li>Back in the Inspect window, click in the bottom pane.</li><li>Enter <code>color := Color red</code> and &quot;Do it&quot;.</li><li>Note that the value displayed in the top right pane updates, but the fill color of the <code>Morph</code> does not update.</li><li>Enter <code>self color: Color red</code> and &quot;Do it&quot;. This time the value displayed in the top right pane updates AND the fill color of the <code>Morph</code> updates. The reason is that the <code>color:</code> method in the <code>ColoredBoxMorph</code> class which is the superclass of the <code>BorderedBoxMorph</code> class sends the <code>#redrawNeeded</code> message to <code>self</code> which triggers the <code>Morph</code> to redraw itself with the updated color.</li></ol><h2 id="explore-windows" tabindex="-1">Explore Windows</h2><p>Explore windows display an object tree starting at a specific object. Select an object reference or place the cursor immediately after it and press cmd-shift-i (Explore it). Click the disclosure triangles to drill down into instance variable values.</p><p>Use the bottom pane to enter and execute Smalltalk expressions where <code>self</code> refers to the selected object in the top pane. Initially <code>self</code> refers to the object being inspected, but clicking another object within its tree changes <code>self</code> to refer to that object.</p><p><img alt="Cuis Explore window" style="width: 40%" src="/blog/assets/cuis-explore-window.png?v=1.1.1"></p><h2 id="system-browsers" tabindex="-1">System Browsers</h2><p>A System Browser can be used to examine, create, modify and delete class categories, classes, method categories, and methods. This includes those provided by the base image, those provided by installed packages, and those you create.</p><p>The title bar initially reads &quot;System Browser&quot;. If a class name is selected, it changes to &quot;System Browser: &quot; followed by the class name.</p><p>Class and method category names can contain spaces. TODO: The sentence above doesn't really belong in this section.</p><p>To open a System Browser, open the World menu and select Open...Browser. Alternatively, type a class name (ex. String) in a Workspace window and press cmd-b (Browse it) to open a System Browser with that class already selected.</p><p>To create a new class, click a class category in the first pane. This causes a class definition template to be displayed in the bottom pane. Change &quot;NameOfSubclass&quot; to the name of the new class. Change &quot;Object&quot; to the name of its superclass if it is not <code>Object</code>. Add a space-separated list of instance variable names in the <code>String</code> value for <code>instanceVariableNames:</code>. Add a space-separated list of class variable names in the <code>String</code> value for <code>classVariableNames:</code>. The value for <code>category:</code> should already be set to the name of the selected class category.</p><p>Selecting a class name in an already open System Browser (or in another window) and pressing cmd-b (Browse it) opens a new System Browser. There is no command to navigate to the selected class within the current System Browser.</p><p>After changing the code of a method, press cmd-s to save the changes. This causes the method to be compiled. If the compiler detects message sends to unknown methods, it prompts for confirmation. Click &quot;yes&quot; if the method doesn't exist now, but will be written later.</p><p>To search for text within the code of the selected method, press cmd-f and enter the search text. To search for text in a wider scope than just the selected method, right-click in the code editor area, select &quot;Find with Scope&quot;, enter the search text, press return, and select a scope from the menu. The scope options are:</p><ul><li>This method</li><li>All methods in image</li><li>Class '{current-class}'</li><li>Class '{current-class}' and subclasses</li><li>Class '{current-class}', subclasses, and superclasses</li></ul><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-the-system-Browser.html" target="_blank">A brief introduction to the System Browser</a>.</p><h3 id="system-browser-ui" tabindex="-1">System Browser UI</h3><p><img alt="Cuis System Browser" style="width: 100%" src="/blog/assets/cuis-system-browser-window.png?v=1.1.1"></p><p>System Browsers contain four rows.</p><ul><li><p>The first (top) row contains four panes for displaying and operating on lists of class categories, classes, message categories, and methods. Clicking an item toggles whether it is selected.</p><p>Selecting a class category in the first pane displays the classes in that category in the second pane. For example, the class <code>String</code> is in the class category <code>Kernel-Text</code>. Class categories include those provided by the base image (ex. &quot;Ordered - Sequenceable&quot;), those defined by installed packages, and class categories you create (used to save your code outside the image).</p><p>Selecting a class in the second pane displays message categories for the class in the third pane. Example message category names include &quot;accessing&quot;, &quot;adding&quot;, &quot;creation&quot;, &quot;comparing&quot;, &quot;copying&quot;, &quot;converting&quot;, &quot;enumerating&quot;, &quot;printing&quot;, &quot;removing&quot;, and &quot;testing&quot;. There is a separate set of method categories for instance methods and class methods.</p><p>Double-clicking a class name in the second pane opens a new System Browser with that class selected.</p><p>The second pane contains three buttons at the bottom. Clicking the &quot;?&quot; button shows the class comment for the select class. Clicking the &quot;instance&quot; or &quot;class&quot; button causes the remaining panes to display information about instance or class methods, respectively. If no method is selected and the &quot;instance&quot; button is selected, the message that defines the class is displayed in the bottom pane. If no method is selected and the &quot;class&quot; button is selected, the metaclass definition is displayed in the bottom pane.</p><p>Selecting a message category (a.k.a protocol) in the third pane displays methods in that category in the fourth pane. The top message category, provided by default, is &quot;-- all --&quot;. If no message category is selected, or if &quot;-- all --&quot; is selected, all the methods in all categories are listed.</p><p>The list of methods in the fourth pane only includes methods that are directly implemented by the class, not those define in superclasses that are available via inheritance. To see all available methods, open a Protocol Browser.</p><p>The names in the class category and method category panes are not sorted alphabetically by default. To sort class categories, hover over that pane and press cmd-shift-a (alphabetize). To sort method categories, hover over that pane and press cmd-a (alphabetize). The reason for the shortcut key difference is that in the class category pane, cmd-a is used for &quot;add item...&quot;.</p><p>To scroll any list to the first item that begins with a given letter, over over the lsit and type the letter.</p><p>The global <code>SystemOrganization</code> refers to an instance of the <code>SystemOrganizer</code> class. To get an <code>Array</code> of symbols that are the names of all current class categories, evaluate <code>SystemOrganization categories</code>.</p></li><li><p>The second row displays a message describing the item selected in the top row.</p><table><thead><tr><th>Item Type</th><th>Description</th></tr></thead><tbody><tr><td>class category</td><td># of classes in the category, total # of instance and class methods</td></tr><tr><td>class</td><td># of instance and class methods defined in the class</td></tr><tr><td>method category</td><td># of methods</td></tr><tr><td>method</td><td># of message sends, implementors, and senders</td></tr></tbody></table></li><li><p>The third row contains a series of buttons that can be clicked to open other windows that show information related to the selected item. One exception is the &quot;show...&quot; button, described below.</p><p>The &quot;browse&quot; button opens a new System Browser focused on the currently selected class, message category, or method. This enables maintaining the view in the current System Browser and navigating somewhere relative to that location in a new System Browser.</p><p>The &quot;senders&quot; button opens a &quot;Senders of&quot; window that lists all the methods that send a message to invoke the selected method. Selecting one displays its implementation in the bottom pane. If no method is selected, a text entry will be displayed to prompt for a method selector.</p><p>The &quot;implementors&quot; button opens an &quot;Implementors of&quot; window that lists all the classes that implement the selected method. Selecting one displays its implementation in the bottom pane. Another way to open this window is to select a method name in any editing pane such as a Workspace and press cmd-m (Implementors of it).</p><p>The &quot;versions&quot; button opens a &quot;Recent versions&quot; window that displays a list of time stamps for recent versions of the method. TODO: Does this only include changes made since the current image was opened? Clicking a time stamp displays that version of the code in the bottom pane.</p><p>If one of the buttons &quot;lineDiffs&quot;, &quot;wordDiffs&quot;, &quot;linePrettyDiffs&quot;, or &quot;wordPrettyDiffs&quot; is pressed, it will show differences between that version and the current version. The two &quot;line diff&quot; options show whole line differences. The two &quot;word diff&quot; options show individual word differences. The two &quot;pretty&quot; options show the code in its formatted form. To stop showing differences, click the selected diff button to toggle it off.</p><p>Code added by the selected version will be in green. Code removed by the selected version will be in red. Click the &quot;revert&quot; button to restore that version as the current version of the code. The &quot;compare to current&quot; button displays the same information as the lineDiffs button, but in a new window.</p><p>The &quot;inheritance&quot; button opens an &quot;Inheritance of&quot; window that shows the superclass methods of the same name that are invoked by the selected method, all the way up the inheritance hierarchy.</p><p>The &quot;hierarchy&quot; button opens a Hierarchy Browser that shows the inheritance hierarchy of the current class. This includes all superclass and subclasses of the current class.</p><p>The &quot;inst vars&quot; button displays a popup list containing all the instance variables in the current class. Clicking one of them opens an &quot;Accesses to&quot; window that lists all the methods that use the instance variable it its top pane. Clicking on a method displays its code in the bottom pane.</p><p>The &quot;class vars&quot; button displays a popup list containing all the class variables in the current class. Clicking one of them opens a new &quot;Users of&quot; window that lists all the methods that use the class variable in its top pane. Clicking on a method displays its code in the bottom pane (fourth row).</p><p>The &quot;show...&quot; button displays a popup list of ways the selected item can be displayed in the bottom pane. Each option is represented by a checkbox, but only one can be selected.</p><p>The default option is &quot;source&quot; which merely displays the source code of the selected method. This is typically the desired choice.</p><p>Selecting &quot;documentation&quot; only displays the signature and comment for the selected item. When there is no commment, it displays &quot;Has no comment&quot;.</p><p>Seleting &quot;prettyPrint&quot; displays the code for a method in a nicely formatted way, but doesn't actually modify the code. I wish it did.</p><p>Selecting &quot;lineDiffs&quot;, &quot;wordDiffs&quot;, &quot;linePrettyDiffs&quot;, or &quot;wordPrettyDiffs&quot; has the same functionality as described earlier for &quot;Recent versions&quot; windows.</p><p>Selecting &quot;decompile&quot; displays code that is similar to the source code, but variable names are changed. Parameter variable names are replaced by <code>arg1</code>, <code>arg2</code>, and so on. Local variable names are replaced by <code>temp1</code>, <code>temp2</code>, and so on. It's not clear when this would be useful.</p><p>Selecting &quot;byteCodes&quot; displays the byte codes generated by the method source code. This could be useful for evaluating the efficency of the code.</p><p>Methods categories used by a given class are stored in its provided instance variable <code>organization</code>.</p></li><li><p>The fourth row displays information about the selected item based on the checkbox that is selected for the &quot;show...&quot; button. By default it displays Smalltalk code for the selected item and can be used to edit the code. When there are unsaved code changes in this pane, a thin, red border appears around it. Press cmd-s (Accept) to save the changes and the thin, red border will disappear.</p></li></ul><p>To open a new System Browser for a class whose name appears in a System Browser, select the name and press cmb-d (Browse it). Currently there is no way to request for the current System Browser to be reused for browsing a selected class name.</p><h3 id="code-formatting" tabindex="-1">Code Formatting</h3><p>To automatically display formatted code, enter the following in a Workspace and &quot;Do it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk">Preferences at<span class="token punctuation">:</span> <span class="token symbol">#browseWithPrettyPrint</span> put<span class="token punctuation">:</span> <span class="token boolean">true</span></code></pre><p>This does not take effect in existing windows such as System Browsers, but does in newly opened windows. Pretty printing is applied when code is initially displayed, and again every time it is saved. However, it does not affect the actual use of whitespace, so code written to files in a fileOut or package is not affected. I wish it was.</p><p>An alternative to setting the <code>#browseWithPrettyPrint</code> preference is to click the &quot;show...&quot; button in System Browsers and select &quot;prettyPrint&quot;.</p><h3 id="working-with-classes" tabindex="-1">Working with Classes</h3><p>To create a new class:</p><ul><li><p>Select a class category.</p><p>If the desired class category is already selected and a class in that category is selected, click it so it is deselected. If the &quot;instance&quot; button is not selected, click it. The bottom pane will now contain the following message send template:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#NameOfSubclass</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'{SelectedClassCategory}'</span></code></pre></li><li><p>To inherit from a class other than <code>Object</code>, change that to another class name.</p></li><li><p>Change the <code>subclass:</code> argument <code>#NameOfSubclass</code> to another <code>Symbol</code> that is the name of the new class.</p></li><li><p>Add desired instance and class variable names as space-separated strings.</p></li><li><p>Press cmd-s (Accept).</p></li></ul><p>An alternative way to create a new class is to:</p><ul><li>Select an existing class to display its code in the bottom pane.</li><li>Modify the <code>subclass:...</code> message send, including the superclass and subclass names.</li><li>Press cmd-s (Accept).</li></ul><p>This will create a new class and will not modify the existing class.</p><p>To modify an existing class, select it in the top second pane, edit the <code>subclass:...</code> message arguments in the bottom pane, and press cmd-s (Accept).</p><p>To delete a class, select it and press cmd-x (Remove it). A confirmation popup will appear. If the class has subclasses, a second popup will appear to confirm that you also wish to delete those classes.</p><h3 id="working-with-methods" tabindex="-1">Working with Methods</h3><p>To create a new method:</p><ul><li><p>Click the &quot;instance&quot; or &quot;class&quot; button to indicate the scope of the method.</p></li><li><p>Select a method category.</p><p>This can be &quot;-- all --&quot;, &quot;as yet unclassified&quot;, or any other method category. To create new category, hover over the method category pane, press cmd-n (new category...), and enter the name of the new category.</p><p>The bottom pane will now contain the following method template:</p><pre class="language-smalltalk"><code class="language-smalltalk">messageSelectorAndArgumentNames<br>    <span class="token comment">"comment stating purpose of message"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">temporary</span> <span class="token variable">variable</span> <span class="token variable">names</span> <span class="token punctuation">|</span></span><br>    statements</code></pre></li><li><p>Modify the code template to define the new method.</p></li><li><p>Press cmd-s (Accept).</p></li></ul><p>An alternative way to create a new method is to:</p><ul><li>Select an existing method to display its code in the bottom pane.</li><li>Modify the code, including its selector.</li><li>Press cmd-s (Accept).</li></ul><p>This will create a new method and will not modify the existing method.</p><p>To modify an existing method, select it in the top fourth pane, edit the code in the bottom pane, and press cmd-s (Accept).</p><p>To automatically assign methods in the &quot;as yet unclassified&quot; method category to better categories, right-click in the method category pane and select &quot;categorize all uncategorized&quot;. For each uncategorized method, this tries to find a superclass method with the same name and, if found, puts it in the same method category as that method. Methods with no matching method in a superclass are not categorized.</p><p>To move a method from the class side to the instance side or vice-versa, right-click the method name in the top fourth pane and select &quot;refactorings...move to instance/class methods&quot;.</p><p>To delete a method from a class, select it and press cmd-x (Remove it). Then select &quot;Remove it&quot; or &quot;Remove, then browse senders&quot;. The latter option allows the senders to be modified.</p><h3 id="refactorings" tabindex="-1">Refactorings</h3><p>To refactor a method or code, select it, right-click, and select an option from the &quot;refactorings&quot; submenu.</p><p>For methods the options include:</p><ul><li>rename... (cmd-shift-r)</li><li>change keyword order...</li><li>add parameter...</li><li>remove parameter...</li><li>inline method...</li><li>move to instance/class method</li><li>push up</li><li>add in superclass as subclassResponsibility</li><li>push down to subclasses</li><li>push down to one subclass</li></ul><p>When renaming a method:</p><ol><li>A popup will prompt for the new name.</li><li>A popup will prompt for the scope where the methods and message sends will be updated. The scope can be &quot;In Class&quot; (only in the current class), &quot;In Hierarchy&quot; (in the current class and all subclasses? TODO: also superclasses?), &quot;In Category&quot; (in all classes in the same class category), &quot;In Hierarchy and its Categories&quot;, or &quot;In System&quot; (all classes).</li><li>An &quot;Implementors of&quot; dialog will open to show where all the changes will be made.</li><li>To remove a method from the list to be modified, select it in the top pane and click the &quot;Remove&quot; button.</li><li>To confirm modifying the remaining methods listed in the top pane, click the &quot;Refactor&quot; button.</li><li>To cancel making the modifications, click the &quot;Cancel&quot; button.</li></ol><p>This is the only way to rename a method. This is good because it forces developers to think about the affected senders.</p><p>For selected code the options include:</p><ul><li>Extract as Parameter...</li><li>Extract Temporary...</li><li>Extract Method...</li><li>Inline Temporary...</li><li>Inline Method...</li><li>Temporary to Instance Variable</li><li>Push Up Instance Variable</li><li>Push Down Instance Variable</li></ul><h2 id="search-browser" tabindex="-1">Search Browser</h2><p>One way to search for code that contains a given text is to move focus into the bottom pane of a System Browser, right-click, select &quot;Find with Scope&quot; (cmd-e), enter the text, and select a scope. The supported scopes are &quot;This method&quot;, &quot;All methods in image&quot;, &quot;Class {selected}&quot;, &quot;Class {selected} and subclasses&quot;, and &quot;Class {selected}, subclasses, and superclasses&quot;.</p><p>Another way is to use a &quot;Search Browser&quot;, created by Mariano Montone.</p><p>To install it:</p><ul><li>Install the optional packages to get Cuis-Smalltalk-Regex which is required by the SearchBrowser package.</li><li>Clone the repository <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Tools" target="_blank">Cuis-Smalltalk-Tools</a>.</li><li>Open a Workspace.</li><li>Enter <code>Feature require: 'SearchBrowser'</code> and &quot;Do it&quot;.</li></ul><p>This adds the World menu item &quot;Open...Search Browser&quot;. It also adds menu items to the menus that appears in a System Browser when you right-click a class category or class name in the top panes. For a class category, the new menu items are &quot;search in category..&quot; and &quot;search in every class...&quot;. For a class, the new menu items are &quot;search in class...&quot;, &quot;search in class hierarchy...&quot;, and &quot;search in class protocol...&quot;. These all open a Search Browser with a different search scope.</p><p>Enter search text in the input to the right of the &quot;Search&quot; button at the bottom. The scope and characteristics of the search can be specified with menus and a button at the bottom.</p><p>The &quot;in:&quot; menu has the options &quot;source&quot; (default), &quot;message name&quot;, and &quot;string literal&quot;.</p><p>The &quot;of:&quot; menu has the options &quot;class hierarchy&quot; (default), &quot;class protocol&quot;, &quot;class&quot;, &quot;system category&quot;, and &quot;every class&quot;.</p><p>The &quot;using:&quot; menu has the options &quot;substring matcher&quot; (default), &quot;wild matcher&quot;, and &quot;regex matcher&quot;.</p><p>When using &quot;wild matcher&quot;, the <code>CharacterSequence</code> <code>match:</code> method is used. Comments in that method provide many examples. The <code>#</code> wildcard character matches any single character and the <code>*</code> character matches any sequence of characters.</p><p>When using &quot;regex matcher&quot;, any regular expression can be entered. It will match on the method selectors (message names), the entire source of methods, and string literals. For example, in the &quot;in:&quot; menu select &quot;message name&quot;. To search for method selectors that begin with &quot;abc&quot;, enter &quot;^abc.*&quot;. To search for method selectors that end with &quot;abc&quot;, enter &quot;.*abc$&quot;. Colons must be escaped by preceding them with a backslash (<code>\</code>).</p><p>The &quot;Case sensitive&quot; button toggles whether the search will be case sensitive.</p><p>Methods whose code matches the search will appear in the top pane. Select a method name to see its implementation in a lower pane.</p><h2 id="hierarchy-browsers" tabindex="-1">Hierarchy Browsers</h2><p>When a class is selected in a System Browser, the list of classes in the second pane only includes those defined in the selected class category. To also see the class hierarchy of a selected class, open a Hierarchy Browser by selcting a class and pressing cmd-h (browse hierarchy).</p><p>This window is similar to a System Browser, but it:</p><ul><li>omits the class categories pane</li><li>displays the inheritance hierarchy of the selected class in the top first pane</li><li>displays method categories in the top center pane</li><li>displays methods defined directory in the class in the top last pane</li></ul><p>Here's an example of a Hierarchy Browser for the <code>Array</code> class:</p><p><img alt="Cuis Hierarchy window" style="width: 40%" src="/blog/assets/cuis-hierarchy-window.png?v=1.1.1"></p><h2 id="protocol-browsers" tabindex="-1">Protocol Browsers</h2><p>When a class is selected in a System Browser, only the methods defined directly in that class are displayed. To also see methods defined in superclasses, open a Protocol window by selecting a class name and pressing cmd-p (browse protocol).</p><p>This window is similar to a System Browser, but it:</p><ul><li>omits the class categories pane</li><li>displays the inheritance hierarchy of the selected class in the top first pane</li><li>displays method categories in the top center pane</li><li>displays all available instance methods in the top last pane</li></ul><p>Methods defined directly in the class are in bold, and methods defined in superclasses are not.</p><p>Select a method in the top last pane to see its implementation in the bottom pane.</p><p>Here's an example of a Protocol window for the <code>Array</code> class:</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><h2 id="text-editor-windows" tabindex="-1">Text Editor Windows</h2><p>&quot;Text Editor&quot; windows enable editing text files. They support changing the font size, color, and style of selected text. They are not intended to be used to edit Smalltalk source code.</p><p>The text can be saved in external text files, but all the formatting is discarded and only the raw text is saved.</p><h2 id="message-names-windows" tabindex="-1">Message Names Windows</h2><p>These windows enable searching for method implementations whose name contains a given substring. For example, enter &quot;select:&quot; to find all the classes that have a method whose names end with that. The results include <code>Bag</code>, <code>Collection</code>, <code>Dictionary</code>, <code>Heap</code>, <code>OrderedCollection</code>, <code>SequenceableCollection</code>, and <code>SortedCollection</code>. Click one the class names to see the method implementation.</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><p>Regular expression searches are not currently supported.</p><h2 id="messagenotunderstood-errors" tabindex="-1">MessageNotUnderstood Errors</h2><p>A <code>MessageNotUnderstood</code> error is signaled when a message is sent to an object and no method is found in the class of the object or any of its superclasses that answer the message.</p><p>Message sends are processed in the following way:</p><ul><li>If the receiver class implements a compatible method, that is called.</li><li>Otherwise the superclasses of the receiver class are searched in order from nearest to <code>Object</code> for a compatible method.</li><li>If the search makes it to the <code>Object</code> class and no compatible method is found, the <code>#doesNotUnderstand:</code> message with a <code>Message</code> argument is sent to the original receiver,.</li><li>If the receiver class implements the <code>doesNotUnderstand:</code> method, that is called.</li><li>Otherwise the superclasses of the receiver class are searched in order from nearest to <code>Object</code> for the <code>doesNotUnderstand:</code> method.</li><li>If the search makes it to the <code>Object</code> class, that implements the <code>doesNotUnderstand:</code> method to signal a <code>MessageNotUnderstood</code> error, which results in a Debugger window opening. That window that includes a stack trace which describes the stack at the time the original message was sent.</li></ul><p>The <code>doesNotUnderstand:</code> method is passed a <code>Message</code> object which has the accessor methods <code>selector</code> (returns a <code>String</code>) and <code>arguments</code> (returns an <code>Array</code>). Those can be used to determine whether and how to answer the message. If the message will not be handled, the <code>#doesNotUnderstand:</code> message should be resent to the superclass. For example, the following implementation of <code>doesNotUnderstand:</code> could be implemented in a class that represents a dog. This is a contrieved example because it would be better to directly implement a <code>bark:</code> method.</p><pre class="language-smalltalk"><code class="language-smalltalk">doesNotUnderstand<span class="token punctuation">:</span> aMessage<br>    <span class="token punctuation">(</span>aMessage selector <span class="token operator">=</span> <span class="token string">'bark:'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">count</span> <span class="token punctuation">|</span></span><br>        count <span class="token operator">:=</span> aMessage arguments first<span class="token punctuation">.</span><br>        count isNumber ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Woof! '</span> repeat<span class="token punctuation">:</span> count<span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token operator">^</span><span class="token keyword">nil</span><span class="token punctuation">]</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage</code></pre><p>There is no method in the the <code>String</code> class that answers the message <code>#repeat:</code>, so one must be implemented in order for the example above to work. One possible implementation is the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">repeat<span class="token punctuation">:</span> anInteger<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">stream</span> <span class="token punctuation">|</span></span><br>    stream <span class="token operator">:=</span> String writeStream<span class="token punctuation">.</span><br>    anInteger timesRepeat<span class="token punctuation">:</span> <span class="token punctuation">[</span>stream nextPutAll<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span>stream contents</code></pre><p><img alt="Cuis MessageNotUnderstood window" style="width: 85%" src="/blog/assets/cuis-messagenotunderstood-window.png?v=1.1.1"></p><h2 id="debug-windows" tabindex="-1">Debug Windows</h2><p>To debug code, select one or more lines in a Workspace window and press cmd-shift-d (Debug it). A Debug window will appear. Execution will be stopped at the beginning of the selected code, waiting for you examine variables and decide whether/how to proceed.</p><p><img alt="Cuis Debug window" style="width: 100%" src="/blog/assets/cuis-debug-window.png?v=1.1.1"></p><p>The top pane shows the execution stack. Each message send causes another stack entry that is removed after the message is processed. Each stack entry shows the class of a receiver object and the method that was selected to handle a message.</p><p>After selecting a stack entry, the center pane shows the implementation of the associated method and the bottom row, first pane shows an inspector for the associated receiver object. Select &quot;all inst vars&quot; to see a list of arguments and local variables in the bottom row, third pane. Select a variable name to see its value in the bottom row, fourth pane. If the variable has a non-primitive value, select it and press cmd-i to inspect it.</p><p>To see the class name and instance variables of a variable whose name appears in a bottom pane, select the variable name, right-click it, and select &quot;Inspect&quot; (cmd-i) or &quot;Explore&quot; (cmd-shift-i).</p><p>To set breakpoints in methods, add <code>self halt</code> message sends in selected locations in their code. The <code>halt</code> and <code>halt:</code> methods are defined in the <code>Object</code> class. These sends the <code>#signal</code> message to the <code>Halt</code> class which is a sublcass of <code>Exception</code> that is resumable. Then run code the invokes the methods to be debugged. When <code>self halt</code> or <code>self halt: message</code> is evaluated, a Debug window will open. If a message is provided, it will appear in the Debug window title bar. Locate the line in the stack trace ending in &quot;&gt;&gt;halt&quot;. Click the line immediately after it to examine the method that sent the <code>halt</code> message and its variables.</p><p>The following table describes each button in the second row of buttons. Hover over any of them to see a tooltip that describes their purpose.</p><table><thead><tr><th>Button</th><th>Purpose</th></tr></thead><tbody><tr><td>Proceed</td><td>closes the debugger window and continues execution</td></tr><tr><td>Restart</td><td>restarts execution from the beginning</td></tr><tr><td>Into</td><td>steps into the method that handles the next message send</td></tr><tr><td>Over</td><td>executes the next message send and stops at the one that follows</td></tr><tr><td>Through</td><td>steps into a block</td></tr><tr><td>Run to Cursor</td><td>restarts execution, stopping at the message send under the cursor</td></tr><tr><td>Full Stack</td><td>TODO: Is seems the full stack trace is always shown in the top pane.</td></tr><tr><td>Where</td><td>selects the next message to be sent to clarify where execution has stopped</td></tr><tr><td>Create</td><td>creates a new method in a selected class to override the currently displayed method</td></tr></tbody></table><p>When execution is halted, existing code can be modified and new methods can be implemented before continuing execution.</p><p>The in-scope variables are listed in the third pane of the bottom row. Click a variable name to see its current value in the fourth pane of the bottom row. To change the value of a variable, edit it where displayed and press cmd-s (Accept).</p><p>The Debug window will close when the end of the selected code is reached.</p><p>Using <code>self halt</code> in the middle of Morphic operations seems to produce unexpected results. TODO: Why?</p><h2 id="change-sorter-windows" tabindex="-1">Change Sorter Windows</h2><p>Each edit performed in a System Browser is saved in a <code>ChangeSet</code>. To browse all the change sets, open the World menu and select Open ... Change Sorter or Changes ... Change Sorter. This window summarize all the currently unsaved changes.</p><p><img alt="Cuis Change Sorter" style="width: 100%" src="/blog/assets/cuis-change-sorter.png?v=1.1.1"></p><p>The first row left pane displays a list of change set names. Unsaved change set names are preceded by an asterisk. Selecting one displays a list of modified classes in the first row right pane. Selecting a modified class displays a list of modified methods in the second row. Selecting a modified method displays its implementation or a description of the change in the bottom row. To see the original and new code, click the &quot;show...&quot; button and select either &quot;lineDiffs&quot; or &quot;wordDiffs&quot;.</p><p>Right-click a change set, class, or method name to get a context menu of operations that can be performed on it.</p><p>To save an unsaved change set, select &quot;File out and remove&quot; or &quot;File out and keep&quot;. The difference between these is whether the change set continues to be listed in the Change Sorter window. The changes are not saved in the image and are instead saved in the file <code>Cuis-Smalltalk-Dev-UserFiles/ChangeSets/{change-set-name}.cs.st</code>. To also save them in the image, open the World menu and select &quot;Save Image&quot;.</p><p>To install a change set whose changes were not saved in the image:</p><ul><li>Open the World menu.</li><li>Select &quot;Open ... File List&quot;.</li><li>Select a file with a <code>.cs.st</code> extension.</li><li>Click the &quot;code&quot; button to review the changes in a new window one class at a time. To install all the changes to a class or only the changes in a single method, right-click a class or method name and select &quot;fileIn&quot;.</li><li>Optionally click the &quot;contents&quot; button to review the changes in a new window one change at a time. To install a subset of the changes, select the changes, right-click, and select &quot;fileIn selections&quot;.</li><li>Click the &quot;install&quot; button to install all the changes in the change set.</li></ul><p>When viewing modified methods, removed code is shown in red and added code is shown in green.</p><p>TODO: Why don't I see a change set if I choose &quot;File out and keep&quot;, open the World menu, select &quot;Quick without saving&quot;, restart the image, and open a &quot;Change Sorter&quot; window? It seems the only way to recover the changes is to follow the steps above using a &quot;File List&quot;.</p><p>WARNING: If a class definition in a fileIn specifies a superclass that does not exist in the image, it will be changed to <code>ProtoObject</code> and almost certain break usages of that class. The following warning message will be written to the Transcript window: &quot;Attempt to create {class-name} as a subclass of nil. Possibly a class is being loaded before its superclass.&quot;</p><h2 id="file-list" tabindex="-1">File List</h2><p>To view local files and operate on them, select Open ... File List from the World menu.</p><p><img alt="Cuis File List" style="width: 100%" src="/blog/assets/cuis-file-list.png?v=1.1.1"></p><p>By default, the top directory will be one from which Cuis was started, referred to as &quot;Cuis top&quot;. To instead start from the root directory of the drive, right-click in the upper-left pane and select &quot;default initial directories...OS roots&quot;. This change will not take effect until a new File List is opened.</p><p>A File List window can be used to:</p><ul><li>navigate the file system</li><li>manage directories including ability to create, rename, view contents, and delete</li><li>manage files including ability to create, rename, view contents, edit (text files only), and delete</li><li>for <code>.st</code> files, open &quot;code changes&quot; window to view contents one class definition or method at a time</li><li>for <code>.st</code> files, &quot;filein&quot; to load into current image</li><li>for <code>.pck.st</code> files that contain code for an entire package, install the package (alternative to <code>Feature require:</code>)</li></ul><h2 id="installed-packages-window" tabindex="-1">Installed Packages Window</h2><p>To see all the installed packages, open the World menu and select Open...Installed Packages. This opens an &quot;Installed Packages&quot; window.</p><p><img alt="Cuis Installed Packages" style="width: 100%" src="/blog/assets/cuis-installed-packages.png?v=1.1.1"></p><p>To browse everything that is defined in a package, select the package and click the &quot;Browse&quot; button. This opens a System Browser that is focused on the selected package.</p><p>To create a new package:</p><ul><li>Click the &quot;new&quot; button in the center strip of buttons.</li><li>Enter a package name. For example, &quot;Volkmann&quot;.</li><li>Select the newly created package.</li><li>Enter a comment describing the package.</li><li>Click the &quot;Save&quot; button.</li><li>You will be prompted for the file path and name where the package will be saved. It's a good idea to keep the suggested file name, but feel free to change the directory to one outside the distribution directory.</li></ul><p>If package name matches the name of a class category that was created previously, all the classes in that category and their methods will automatically be associated with the new package.</p><p>I created a package whose name is my last name. I use this package to save all my experimental code so I can easily load it into new images. This is useful in case I accidentally modify an image in an unintended way. I can then return to using a base image and load my package into it.</p><p>If you accidentally save changes to the base image, a new one can be downloaded from the GitHub repository. Currently the files to download are <code>CuisImage/Cuis7.1-6770.image</code>. and <code>CuisImage/Cuis7.1-6770.changes</code>.</p><p>When there are unsaved changes to the classes and methods defined in a package, its name will be preceded by an asterisk.</p><p>To see the changes that were made in a package:</p><ol><li>Select the package name.</li><li>Click the &quot;changes&quot; button. This opens a ChangeSet window that displays a list of the modified classes in the upper-right pane.</li><li>Select a class in the upper-right pane to see a list of the modified methods in the second row pane.</li><li>Select a method in the second row pane to see the new version of its code in the bottom pane.</li><li>Click the &quot;versions&quot; button to open a &quot;Recent versions&quot; window.</li><li>Click to any version in the top pane to see the differences between that version and the previous one.</li><li>Click one of the &quot;*Diffs&quot; buttons to change how the differences are displayed.</li></ol><p>To save all the changes, select the package name and click the &quot;save&quot; button. When modifying your own packages, frequently check for unsaved changes here and save them when ready.</p><p>To see all the code in a package, select the package name and click the &quot;browse&quot; button. This shows the classes defined by the package. It also shows the classes in other class categories to which the package adds classes and methods.</p><p>To add dependencies on other packages to a package so they will be installed when the package is installed:</p><ul><li>Select a package in the upper-left pane of the &quot;Installed Packages&quot; window.</li><li>Click the &quot;add requirements&quot; button.</li><li>In the popup list of installed packages that appears, click on of them. This adds a line that begins with <code>!requires:</code> to the <code>.pck.st</code> package file.</li><li>Repeat for additional dependencies.</li><li>Save the package.</li></ul><p>All the dependencies of the selected package are listed in the bottom pane. To remove a dependency, select it, click the &quot;delete&quot; button&quot; in the bottom pane, and click the &quot;save button. WARNING: Do not deleted <code>!requires:</code> lines from <code>.pck.st</code> manually because the development environment will not recognize the change unless the package is deleted from the image and reinstalled.</p><p>To uninstall a package, select the package name and click the &quot;delete/merge&quot; button.</p><p>Warning:</p><p>If a package is installed that defines a subclass of a class that is defined in a package that has not been installed yet, the superclass will be changed to <code>ProtoObject</code>. The following message will appear in the Transcript as a warning that this has happened: &quot;Attempt to create {subclass-name} as a subclass of nil. Possibly a class is being loaded before its superclass.&quot;</p><p>For example, suppose the UI-Entry package is not installed. That defines the class <code>TextEntryMorph</code>. If a package is installed that defines the following class</p><pre class="language-smalltalk"><code class="language-smalltalk">TextEntryMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#CenteredTextEntryMorph</span></code></pre><p>that will be changed to</p><pre class="language-smalltalk"><code class="language-smalltalk">ProtoObject subclass<span class="token punctuation">:</span> <span class="token symbol">#CenteredTextEntryMorph</span></code></pre><h2 id="process-browsers" tabindex="-1">Process Browsers</h2><p>Process Browsers display a list of all the Smalltalk-related processes that are running. Processes come and go. By default the list updates automatically. To toggle that, press cmd-a (turn off/on auto-update).</p><p>To terminate a process, select it and press cmd-t (terminate). This is especially useful for terminating processes named &quot;WebServer's listening process&quot;.</p><p><img alt="Cuis Process Browser" style="width: 85%" src="/blog/assets/cuis-process-browser-window.png?v=1.1.1"></p><p>For example, the following code starts a process that writes to the Transcript every five seconds.</p><pre class="language-smalltalk"><code class="language-smalltalk">block <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">]</span> whileTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>    <span class="token string">'Hello'</span> print<span class="token punctuation">.</span><br>    <span class="token punctuation">(</span>Delay forSeconds<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span> wait<br><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>block forkAt<span class="token punctuation">:</span> Processor userBackgroundPriority named<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">.</span></code></pre><p>The name of the process will be &quot;hello&quot;. To stop it, right-click the process, select it and press cmd-t (terminate).</p><h2 id="taskbar" tabindex="-1">Taskbar</h2><p>A <code>TaskbarMorph</code> is displayed across the bottom of the World. This displays the current time with a 24-hour clock and a thumbnail of each <code>Morph</code> currently displayed in the World.</p><p>To bring one of the <code>Morphs</code> to the front, hover over its thumbnail. A tooltip will appear above the thumbnail that displays the window title or the class of the associated <code>Morph</code>.</p><p>Occassionally the <code>Morph</code> for a thumbnail will not be visible. To delete it:</p><ul><li>Repeatedly cmd-click on the thumbnail until its halo appears (3 times).</li><li>Click the blue menu handle and select debug... explore morph.</li><li>Expand the &quot;root&quot; item.</li><li>Select the &quot;model&quot; instance variable.</li><li>In the bottom pane, enter <code>self delete</code> and &quot;Do it&quot;.</li><li>Close the Explorer window.</li></ul><h2 id="emergency-evaluator" tabindex="-1">Emergency Evaluator</h2><p>The Emergency Evaluator appears when there is an error for which a Debugger cannot be opened. In this case the environment can become unusable. Enter the &quot;revert&quot; command to revert the last code modification. Enter the &quot;exit&quot; command to exit this window.</p><p><img alt="Cuis Emergency Evaluator" style="width: 30%" src="/blog/assets/cuis-emergency-evaluator.png?v=1.1.1"></p><h2 id="menu-item-discovery" tabindex="-1">Menu Item Discovery</h2><p>To discover the message that is sent when a particular menu item is selected:</p><ul><li>Open the menu.</li><li>cmd-click the menu to open its halo.</li><li>Click the orange Explore handle on the left side of the halo.</li><li>In the newly opened Explore window, expand the &quot;root&quot; item.</li><li>Expand the &quot;submorphs&quot; item to see all the <code>MenuItemMorph</code> instances.</li><li>Expand the <code>MenuItemMorph</code> of interest.</li><li>Note the values for <code>target</code> and <code>selector</code>.</li></ul><p>The target can be a class or an instance of a class, so the selector can refer to a class or instance method. The method may be in a superclass of the target class.</p><p>For example, let's discover what happens when Changes ... Install New Updates is selected in the World menu.</p><ul><li>Open the World menu.</li><li>cmd-click the World menu.</li><li>Click the orange explore handle on the left of the halo.</li><li>In the Explore window, expand the &quot;root&quot; item.</li><li>Expand the &quot;submorphs&quot; item to see all the <code>MenuItemMorph</code> instances.</li><li>Expand the &quot;Changes&quot; <code>MenuItemMorph</code>.</li><li>Expand the &quot;subMenu&quot; item.</li><li>Expand its &quot;submorphs&quot; item.</li><li>Expand the &quot;Install New Updates&quot; <code>MenuItemMorph</code>.</li><li>Note that the value for &quot;target&quot; is <code>ChangeSet</code> and the value for &quot;selector&quot; is &quot;#installNewUpdates&quot;.</li><li>Open a Browser window.</li><li>Search for the class <code>ChangeSet</code>.</li><li>Select the class method <code>installNewUpdates</code>.</li></ul><h2 id="button-discovery" tabindex="-1">Button Discovery</h2><p>To discover the message that is sent when a particular button is pressed:</p><ul><li>Open the halo for the button by cmd-shift clicking it.</li><li>Click the orange Explore handle on the left side of the halo.</li><li>In the newly opened Explore window, expand the &quot;root&quot; item.</li><li>Note the values of <code>model</code> (the target class) and <code>actionSelector</code> (the message that will be sent to the target).</li><li>Browse the target class and select the method corresponding to the message.</li></ul><p>For example, the &quot;Run&quot; button in the &quot;SUnit Test Runner&quot; window sends the message <code>#runTests</code> to an instance of the <code>TestRunner</code> class. That determines which tests to run by sending <code>#selectedTests</code> to itself. That returns an <code>OrderedCollection</code> of tests. It then iterates over that collection by sending it the <code>#do:</code> message and evaluates <code>self addTestsFor: ea toSuite: suite</code> for each test where <code>ea</code> is a test. The instance method <code>addTestsFor:toSuite:</code> method is implemented in the <code>TestRunner</code> class.</p><p>A class is considered to be abstract if it has an <code>isAbstract</code> method that returns <code>true</code>. If the test class being evaluated is abstract, the <code>addTestsFor:toSuite:</code> method sends the message <code>addToSuiteFromSelectors:</code> to each subclass that is not also abstract. If the test class being evaluated is not abstract, the <code>addTestsFor:toSuite:</code> method sends the message <code>addToSuiteFromSelectors:</code> to the test class being evaluate.</p><p>This means that the test methods either come from subclasses of the test class OR from the test class, but not both.</p><p>The class <code>TestCase</code> defines the class method <code>addToSuiteFromSelectors:</code>. This method takes a test suite and adds methods to it. The class <code>TestCase</code> implements the class method <code>shouldInheritSelectors</code> which returns <code>true</code> if both of the following are true.</p><ol><li><code>self</code> is not the <code>TestCase</code> class, but is instead a subclass of it.</li><li>The superclass is abstract OR <code>self</code> has no selectors (methods).</li></ol><p>When <code>shouldInheritSelectors</code> returns true, the <code>addToSuiteFromSelectors:</code> method sends <code>#allTestSelectors</code> to <code>self</code>. Otherwise it sends <code>#testSelectors</code> to <code>self</code>.</p><p>The <code>allTestSelectors</code> method returns the selectors returned by <code>allSelectors</code>. The <code>testSelectors</code> method returns the selectors returned by <code>selectors</code>. The <code>allSelectors</code> and <code>selectors</code> methods are implemented in the <code>Behavior</code> class which is a superclass of <code>Class</code>.</p><p>The <code>allSelectors</code> method returns all the selectors found in the receiver class and all its superclasses.</p><p>The <code>selectors</code> method returns only the selectors found in the receiver class, excluding those in superclasses.</p><p>To run test methods in both an abstract subclass of <code>TestCase</code> AND non-abstract subclasses of that class, add this class method to make the base class abstract:</p><pre class="language-smalltalk"><code class="language-smalltalk">isAbstract<br>    <span class="token operator">^</span><span class="token boolean">true</span></code></pre><p>and add this class method to each of its subclasses:</p><pre class="language-smalltalk"><code class="language-smalltalk">isAbstract<br>    <span class="token operator">^</span><span class="token boolean">false</span></code></pre><h2 id="screenshots" tabindex="-1">Screenshots</h2><p>To capture a screenshot of the entire window in a BMP file, evaluate <code>Utilities saveScreenshot</code> in a Workspace. This creates the file <code>CuisWorld.bmp</code> in the <code>Cuis-Smalltalk-Dev-UserFiles</code> directory.</p></article>