<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Control Flow</h2><aside><nav class="toc"><ol><li><a href="#conditional-logic">Conditional Logic</a></li><li><a href="#iteration">Iteration</a></li></ol></nav></aside><article><p>Smalltalk does not provide special syntax for conditional logic and iteration. Instead, control flow is provided through message passing.</p><h3 id="conditional-logic" tabindex="-1">Conditional Logic</h3><p>The <code>Boolean</code> class in the <code>Kernel-Objects</code> category contains the methods <code>#ifTrue</code>, <code>#ifFalse</code>, <code>#ifTrue:ifFalse</code>, and <code>#ifFalse:ifTrue</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">result <span class="token operator">:=</span> a <span class="token operator">&lt;</span> b ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'less'</span><span class="token punctuation">]</span> ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'more'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The values for <code>ifTrue</code> and <code>ifFalse</code> can be literal values, variables, or blocks with no parameters. The messages listed above just send the <code>value</code> message to the argument value. Typically the <code>value</code> message is used to evaluate a no-arg block. However, the <code>Object</code> class defines the <code>value</code> method to just return <code>self</code>, which is what enables any kind of object to be used.</p><p>When blocks are used, the compiler is able to optimized the code by inlining the code within the block and avoiding the need to send the <code>value</code> message. So it is more efficient to use blocks.</p><p>The <code>Object</code> instance method <code>caseOf</code> is similar to the <code>switch</code> statement in other programming languages.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">color <span class="token operator">:=</span> <span class="token string">'blue'</span><span class="token punctuation">.</span><br>assessment <span class="token operator">:=</span> color caseOf<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'hot'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'warm'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'blue'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'cold'</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><p>When a block uses the <code>^</code> operator to return a value, the containing method exits and returns that value. For example, the following method returns a <code>String</code> based on the <code>Number</code> passed in:</p><pre class="language-smalltalk"><code class="language-smalltalk">assessTemperature<span class="token punctuation">:</span> aNumber<br>    aNumber <span class="token operator">></span> <span class="token number">80</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span> <span class="token string">'hot'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    aNumber <span class="token operator">&lt;</span> <span class="token number">40</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span> <span class="token string">'cold'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> <span class="token string">'warm'</span></code></pre><h3 id="iteration" tabindex="-1">Iteration</h3><p>The <code>Integer</code> class described in the &quot;Basic Data Types&quot; section provides several methods for iteration.</p><p>The <code>timesRepeat:</code> method evaluates a block a given number of times. For example, the following code prints the string <code>'Ho'</code> three times on separate lines:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">3</span> timesRepeat<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Ho'</span> print<span class="token punctuation">]</span></code></pre><p>The <code>to:do:</code> and <code>to:by:do:</code> methods evaluate a block for each <code>Integer</code> value in a range with an optional step (<code>by:</code>) size. For example, the following code prints the numbers 1, 3, 5, 7, and 9 on separate lines.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">1</span> to<span class="token punctuation">:</span> <span class="token number">10</span> by<span class="token punctuation">:</span> <span class="token number">2</span> do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:n</span> <span class="token punctuation">|</span></span> n print<span class="token punctuation">]</span></code></pre><p>An alternative is to first create an <code>Interval</code> object and then send it the <code>#do:</code> message to evaluate a block argument for each value in the <code>Interval</code>.</p><p>See the &quot;Blocks&quot; section for messages that use a block as an iteration condition.</p><p>See the &quot;Collections&quot; section for messages that iterate over a collection.</p></article>