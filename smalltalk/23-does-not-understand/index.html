<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Does Not Understand</h2><aside></aside><article><p>The <code>Object</code> class defines the <code>doesNotUnderstand:</code> method which opens a <code>MessageNotUnderstood</code> window. This can be overridden in specific classes to provide specialized processing of messages that do not have corresponding methods.</p><p>Let's demonstrate this by defining an <code>Accessible</code> class that enables sending messages to set and get any instance variable in classes that inherit from this class.</p><p>Here is the class definition:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Accessible</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is its one and only instance method:</p><pre class="language-smalltalk"><code class="language-smalltalk">doesNotUnderstand<span class="token punctuation">:</span> aMessage<br>    <span class="token comment">"gets or sets an instance variable"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">argCount</span> <span class="token variable">getters</span> <span class="token variable">index</span> <span class="token variable">key</span> <span class="token variable">setters</span> <span class="token punctuation">|</span></span><br><br>    <span class="token comment">"We are only processing messages with 0 or 1 arguments.<br>    If there are 2 or more arguments, fall back to the default behavior."</span><br>    argCount <span class="token operator">:=</span> aMessage numArgs<span class="token punctuation">.</span><br>    argCount <span class="token operator">></span> <span class="token number">1</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    key <span class="token operator">:=</span> aMessage keywords first<span class="token punctuation">.</span><br><br>    <span class="token comment">"If the message is a getter, return the<br>    corresponding instance variable value."</span><br>    getters <span class="token operator">:=</span> <span class="token keyword">self</span> class allInstVarNames<span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> getters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"If the message is a setter, set the<br>    corresponding instance variable value."</span><br>    setters <span class="token operator">:=</span> getters collect<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:name</span> <span class="token punctuation">|</span></span> name<span class="token operator">,</span> <span class="token string">':'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> setters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index put<span class="token punctuation">:</span> aMessage arguments first <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Otherwise fall back to the default behavior."</span><br>    <span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage</code></pre><p>Here is an example subclass of <code>Accessible</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">Accessible subclass<span class="token punctuation">:</span> <span class="token symbol">#Person</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'birthdate firstName lastName'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is an example of using this class:</p><pre class="language-smalltalk"><code class="language-smalltalk">p <span class="token operator">:=</span> Person <span class="token keyword">new</span><span class="token punctuation">.</span><br>p firstName<span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">.</span><br>p firstName print<span class="token punctuation">.</span> <span class="token comment">"Mark"</span></code></pre><p>Getting and setting instance variables in this way is quite inefficient. A better approach is to generate accessor methods by right-clicking the <code>Person</code> class in a System Browser and selecting &quot;more...create inst var accessors&quot; to generate accessor methods for each instance variable.</p></article>