<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Variables</h2><aside><nav class="toc"><ol><li><a href="#pseudo-variables">Pseudo-variables</a></li><li><a href="#instance-variables">Instance Variables</a></li><li><a href="#class-variables">Class Variables</a></li><li><a href="#class-instance-variables">Class Instance Variables</a></li><li><a href="#temporary-variables">Temporary Variables</a></li><li><a href="#global-variables">Global Variables</a></li></ol></nav></aside><article><p>Variables always refer to an object created from a specific class, but a new object can be assigned that was created from a different class. In other words, the &quot;type&quot; of a variable can change.</p><p>Variable names are composed of letters, digits, and underscores. The first character cannot be a digit.</p><p>The initial value of all variables is <code>nil</code>.</p><p>Smalltalk supports five kinds of variables:</p><ul><li>Pseudo-variables are provided by the system and cannot be modified.</li><li>Instance variables are associated with a specific instance of a class.</li><li>Class variables are associated with a class and all subclasses share the same value.</li><li>Class instance variables are similar to class variables, but they allow subclasses to have different values for the same variable name.</li><li>Temporary (or local) variables are accessible only within the method or block where they are declared.</li></ul><h2 id="pseudo-variables" tabindex="-1">Pseudo-variables</h2><p>Pseudo-variables are variables whose value is provided automatically and cannot be modified. There are six of these with the names <code>true</code>, <code>false</code>, <code>nil</code>, <code>self</code>, <code>super</code>, and <code>thisContext</code>. These names are reserved words, meaning they cannot be used for other kinds of variables.</p><p><code>true</code> and <code>false</code> represent Boolean values. They refer to singleton instances of the <code>True</code> and <code>False</code> classes.</p><p><code>nil</code> represents the lack of a real value.</p><p><code>self</code> can be used in instance methods to refer to the current object. It can also be used in class methods to refer to the current class.</p><p><code>super</code> can be used in instance methods to refer to the superclass of the current object. For example, the superclass of the <code>SmallInteger</code> class is <code>Integer</code> and the superclass of the <code>Integer</code> class is <code>Number</code>.</p><p><code>self</code> and <code>super</code> are often used as the receiver of messages. For example, is typical for the instance method <code>initialize</code> to begin with <code>super initialize</code>. We will have more to say about the <code>initialize</code> method later.</p><p>From the <a href="https://cuis-smalltalk.github.io/TheCuisBook/Pseudo_002dvariables.html" target="_blank">Cuis book</a>, &quot;<code>thisContext</code> ... represents the top frame of the run-time stack. ... It is essential for implementing development tools like the Debugger and it is also used to implement exception handling and continuations.&quot; The value of <code>thisContext</code> is either a <code>MethodContext</code> or a <code>BlockContext</code> object.</p><h2 id="instance-variables" tabindex="-1">Instance Variables</h2><p>Instance variables are associated with a specific instance of a class. They are declared in a space-separated string that is the value of the <code>instanceVariableNames:</code> keyword in a class definition.</p><p>Instance variables are always private, which means they can only be accessed by instance methods in the class that defines them, and in subclasses. To expose an instance variable value to methods in other classes, define an instance method that returns it.</p><p>When a new instance of a class is created, its instance method <code>initialize</code> is called. This is, as the name suggests, a perfect place to assign an initial value to each instance variable.</p><h2 id="class-variables" tabindex="-1">Class Variables</h2><p>Class variables are associated with a class and the same value is shared with all subclasses. They are declared in a space-separated string that is the value of the <code>classVariableNames:</code> keyword in a class definition.</p><p>Class variables are described in the same way as instance variables, but their names must begin uppercase. It is common for a class to not have any class variables.</p><p>Like instance variables, class variables are always private. To expose a class variable value to methods in other classes, define a class method that returns it.</p><p>To assign initial values to the class variables of a class, define the class method <code>initialize</code> and explicitly send that message to the class. TODO: It the class method <code>initialize</code> called automatically when its class is installed?</p><h2 id="class-instance-variables" tabindex="-1">Class Instance Variables</h2><p>Class instance variables are defined as an instance variables in the metaclass of a given class. Unlike class variables, subclasses can have a different value for the variable than that used by the class where it is defined. Class instance variables are not commonly used.</p><p>TODO: Describe how to define a class instance variable and set different values in the class and subclasses. Perhaps an example could be an Animal class with a legs variable that is set to 0 in the Animal class and 4 in the Dog subclass.</p><p>TODO: Can a subclass class method set a class instance variable in a superclass?</p><h2 id="temporary-variables" tabindex="-1">Temporary Variables</h2><p>Temporary variables are declared in a space-separated string between vertical bars inside a method or block definition. Their initial value is <code>nil</code>. Method parameters are also considered to be temporary variables. These can only be accessed within the method or block that declares them.</p><p>In the following example, <code>numbers</code> and <code>sum</code> are temporary variables.</p><pre class="language-smalltalk"><code class="language-smalltalk">average<span class="token punctuation">:</span> numbers<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">sum</span> <span class="token punctuation">|</span></span><br>    sum <span class="token operator">:=</span> numbers inject<span class="token punctuation">:</span> <span class="token number">0</span> into<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:acc</span> <span class="token variable">:each</span> <span class="token punctuation">|</span></span> acc <span class="token operator">+</span> each<span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> sum <span class="token operator">/</span> numbers size</code></pre><h2 id="global-variables" tabindex="-1">Global Variables</h2><p>While Smalltalk does not support global variables, the <code>Smalltalk</code> <code>SystemDictionary</code> object can be used for this purpose. The following code adds the key &quot;color&quot; with the value &quot;yellow&quot; to that <code>Dictionary</code>, and then retrieves the value for that key:</p><pre class="language-smalltalk"><code class="language-smalltalk">Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> put<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">.</span><br>color <span class="token operator">:=</span> Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> ifAbsent<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">.</span></code></pre></article>