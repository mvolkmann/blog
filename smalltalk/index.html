<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Smalltalk</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#why-learn-smalltalk">Why Learn Smalltalk</a></li><li><a href="#resources">Resources</a></li><li><a href="#pros-and-cons">Pros and Cons</a></li><li><a href="#history">History</a></li><li><a href="#implementations">Implementations</a></li><li><a href="#cuis-smalltalk">Cuis Smalltalk</a><ol><li><a href="#installing">Installing</a></li><li><a href="#updating">Updating</a></li></ol></li><li><a href="#squeak-smalltalk">Squeak Smalltalk</a></li><li><a href="#pharo-smalltalk">Pharo Smalltalk</a></li><li><a href="#getting-started">Getting Started</a><ol><li><a href="#the-world">The World</a></li><li><a href="#font-size">Font Size</a></li><li><a href="#full-screen">Full Screen</a></li><li><a href="#themes">Themes</a></li><li><a href="#morphs">Morphs</a></li><li><a href="#workspace-windows">Workspace Windows</a></li><li><a href="#transcript-windows">Transcript Windows</a></li></ol></li><li><a href="#implementing-in-debugger">Implementing in Debugger</a></li><li><a href="#syntax">Syntax</a><ol><li><a href="#summary">Summary</a></li><li><a href="#naming-conventions">Naming Conventions</a></li><li><a href="#assignment-operator">Assignment Operator</a></li></ol></li><li><a href="#creating-objects">Creating Objects</a></li><li><a href="#variables">Variables</a><ol><li><a href="#pseudo-variables">Pseudo-variables</a></li><li><a href="#blocks">Blocks</a></li><li><a href="#instance-variables">Instance Variables</a></li><li><a href="#class-variables">Class Variables</a></li><li><a href="#class-instance-variables">Class Instance Variables</a></li><li><a href="#temporary-variables">Temporary Variables</a></li><li><a href="#global-variables">Global Variables</a></li></ol></li><li><a href="#messages">Messages</a><ol><li><a href="#tab-completions">Tab Completions</a></li><li><a href="#dynamic-messages">Dynamic Messages</a></li></ol></li><li><a href="#classes">Classes</a><ol><li><a href="#accessor-methods">Accessor Methods</a></li></ol></li><li><a href="#objects">Objects</a><ol><li><a href="#immutability">Immutability</a></li><li><a href="#methods">Methods</a></li><li><a href="#primitive-methods">Primitive Methods</a></li></ol></li><li><a href="#control-flow">Control Flow</a><ol><li><a href="#conditional-logic">Conditional Logic</a></li><li><a href="#iteration">Iteration</a></li></ol></li><li><a href="#images">Images</a></li><li><a href="#help">Help</a></li><li><a href="#other-preferences">Other Preferences</a></li><li><a href="#optional-packages">Optional Packages</a></li><li><a href="#windows">Windows</a><ol><li><a href="#editing-code">Editing Code</a></li><li><a href="#inspect-windows">Inspect Windows</a></li><li><a href="#explore-windows">Explore Windows</a></li><li><a href="#system-browsers">System Browsers</a><ol><li><a href="#system-browser-ui">System Browser UI</a></li><li><a href="#code-formatting">Code Formatting</a></li><li><a href="#working-with-classes">Working with Classes</a></li><li><a href="#working-with-methods">Working with Methods</a></li><li><a href="#refactorings">Refactorings</a></li></ol></li><li><a href="#search-browser">Search Browser</a></li><li><a href="#hierarchy-browsers">Hierarchy Browsers</a></li><li><a href="#protocol-browsers">Protocol Browsers</a></li><li><a href="#text-editor-windows">Text Editor Windows</a></li><li><a href="#message-names-windows">Message Names Windows</a></li><li><a href="#messagenotunderstood-errors">MessageNotUnderstood Errors</a></li><li><a href="#debug-windows">Debug Windows</a></li><li><a href="#change-sorter-windows">Change Sorter Windows</a></li><li><a href="#file-list">File List</a></li><li><a href="#installed-packages-window">Installed Packages Window</a></li><li><a href="#process-browsers">Process Browsers</a></li><li><a href="#emergency-evaluator">Emergency Evaluator</a></li></ol></li><li><a href="#saving-code">Saving Code</a><ol><li><a href="#fileout-and-filein">fileOut and fileIn</a></li><li><a href="#packages">Packages</a></li></ol></li><li><a href="#reflection">Reflection</a></li><li><a href="#data-types">Data Types</a><ol><li><a href="#undefinedobject">UndefinedObject</a></li><li><a href="#booleans">Booleans</a></li><li><a href="#numbers">Numbers</a></li><li><a href="#characters">Characters</a></li><li><a href="#strings">Strings</a><ol><li><a href="#symbols">Symbols</a></li></ol></li><li><a href="#uuids">UUIDs</a></li><li><a href="#collections">Collections</a><ol><li><a href="#association">Association</a></li><li><a href="#collection">Collection</a></li><li><a href="#sequenceablecollection">SequenceableCollection</a></li><li><a href="#arrayedcollection">ArrayedCollection</a></li><li><a href="#array">Array</a></li><li><a href="#interval">Interval</a></li><li><a href="#linkedlist">LinkedList</a></li><li><a href="#orderedcollection">OrderedCollection</a></li><li><a href="#sortedcollection">SortedCollection</a></li><li><a href="#bag">Bag</a></li><li><a href="#set">Set</a></li><li><a href="#dictionary">Dictionary</a></li><li><a href="#ordereddictionary">OrderedDictionary</a></li><li><a href="#identity-collections">Identity Collections</a></li><li><a href="#weak-collections">Weak Collections</a></li></ol></li></ol></li><li><a href="#exception-handling">Exception Handling</a></li><li><a href="#unit-tests">Unit Tests</a></li><li><a href="#color">Color</a></li><li><a href="#morphic">Morphic</a><ol><li><a href="#creating-and-modifying-morphs">Creating and Modifying Morphs</a></li><li><a href="#halo">Halo</a></li><li><a href="#desktop-color">Desktop Color</a></li><li><a href="#embedding">Embedding</a></li><li><a href="#layoutmorph">LayoutMorph</a></li><li><a href="#editing-characteristics">Editing Characteristics</a></li><li><a href="#button-labels">Button Labels</a></li><li><a href="#button-issue">Button Issue</a></li><li><a href="#button-demo-in-cuis">Button Demo in Cuis</a></li><li><a href="#canvas-drawing">Canvas Drawing</a></li><li><a href="#svg">SVG</a></li></ol></li><li><a href="#overriding-doesnotunderstand">Overriding doesNotUnderstand</a></li><li><a href="#file-i%2Fo">File I/O</a></li><li><a href="#deploying-applications">Deploying Applications</a><ol><li><a href="#running-headless">Running Headless</a></li></ol></li><li><a href="#games">Games</a></li><li><a href="#json">JSON</a></li><li><a href="#editor-customization">Editor Customization</a></li><li><a href="#web-development">Web Development</a><ol><li><a href="#sending-http-requests">Sending HTTP Requests</a></li><li><a href="#implementing-an-http-server">Implementing an HTTP Server</a></li></ol></li><li><a href="#foreign-function-interface-(ffi)">Foreign Function Interface (FFI)</a></li><li><a href="#annoyances">Annoyances</a></li><li><a href="#unresolved-questions">Unresolved Questions</a></li></ol></nav></aside><article><style>.logo {
    --size: 8rem;
    max-height: var(--size);
    max-width: var(--size); 
    margin-left: 2rem;
  }

  .row {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
  }</style><figure style="width: 30%"><img alt="Smalltalk Byte magazine cover" src="/blog/assets/smalltalk-byte-cover.jpg?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk</a> &quot;is a purely object oriented programming language (OOP).&quot; Everything is represented by an object that is an instance of some class. This includes classes themselves and all the GUI elements in the development environment. Everything happens by sending messages to objects. The objects decide whether and how to act on the messages.</p><p><a href="https://en.wikipedia.org/wiki/Simula" target="_blank">Simula</a> is considered to be the first object-oriented programming (OOP) language. In Simula, the data that models a simulation are represented by objects, but primitive data types like numbers are not. While Simula preceded Smalltalk, Smalltalk was the first programming language to make OOP popular.</p><p>Running Smalltalk programs requires two parts, a virtual machine (VM) and an image. The VM is specific to the operating system being used. It reads and executes Smalltalk code found in an image file.</p><p>Smalltalk is not an interpreted language. Smalltalk code is compiled to optimized bytecode that is executed by a virtual machine.</p><p>Everything in Smalltalk is represented by an object, including classes and all GUI elements in the development environment. An image file can be thought of as a snapshot of the current state of the development environment. It describes a collection of all the active objects. During development, changes can be saved to the current image or to a new image.</p><p>Smalltalk is perhaps most known for its incredible development tools. These support:</p><ul><li>finding code in many ways</li><li>live environment where code changes are immediately reflected (no need to recompile or restart the environment)</li><li>debugging with ability to modify code and data, then continue or restart</li><li>ability to modify the classes and methods that implement the development environment as easily as modifying your own classes and methods</li><li>TODO: add more?</li></ul><p>Smalltalk is a dynamically typed language. Types of variables, method parameters, and method return types are never specified. Instead, duck typing is used. Any object can be used as long as it is able to respond to all the messages that are sent to it. This is determined at run-time.</p><p>Alan Kay, Dan Ingalls, and Adele Goldberg worked at Xerox PARC (Palo Alto Research Center) in the 1970s. All of them collaborated to create Smalltalk. Alan Kay was the primary designer of Smalltalk and gave it its name. Dan Ingalls was the primary implementor. Adele Goldberg primarily focused on documentation and promoting Smalltalk outside of PARC. The original goal was to use Smalltalk to teach programming.</p><p>Many other technologies were invented at PARC including graphical user interfaces, the mouse, and virtual machines.</p><p>Alan Kay said &quot;OOP to me means only messaging, local retention and protection and hiding of state-process, and extreme late-binding of all things.&quot; He also said &quot;I'm sorry that I, long ago, coined the term 'Objects' for this topic, because it gets many people to focus on the lesser idea. The big idea is messaging!&quot;.</p><p>Late binding means that messages sent to objects are looked up for compatible methods at runtime. However, Smalltalk editors do check for &quot;unknown selectors&quot; when code is entered that sends a message to a literal object (not to a variable).</p><p>Smalltalk did not gain much traction outside Xerox Parc until BYTE magizine published an issue focused on Smalltalk in August 1981. The cover, shown at the beginning of this article, featured a colorful hot air balloon.</p><p>In the 1990's the popularity of Smalltalk had risen enough that it was seen as a possible alternative to C++. For a time, IBM promoted replacing COBOL with Smalltalk. In 1995, Smalltalk was the second most popular OO language after C++. Smalltalk had a 15% market share compared to 71% for C++.</p><p>At the OOPSLA 1997 conference, Alan Kay said &quot;Actually, I made up the term 'object-oriented' and I can tell you I did not have C++ in mind.&quot; He also said &quot;Languages like C++ and Java are OOP done wrong. Smalltalk is OOP done right.&quot;</p><p>Today Smalltalk is still used by the financial industry, manufacturers, utilities, transportation, and academia.</p><p>The entire syntax of Smalltalk can be demonstrated on a post card.</p><p><img alt="Smalltalk on a post card" src="/blog/assets/smalltalk-on-postcard.jpg?v=1.1.1"></p><h2 id="why-learn-smalltalk" tabindex="-1">Why Learn Smalltalk</h2><p>Some reasons to learn Smalltalk include:</p><ul><li>Gaining an understanding of its pros and cons compared to other languages.</li><li>Getting ideas for features to be added to other languages.</li><li>Getting ideas for features to be added in the development environments of other languages.</li><li>Actually using it as an alternative to other languages.</li></ul><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk in Wikipedia</a></p></li><li><p><a href="https://archive.org/details/byte-magazine-1981-08" target="_blank">Byte Magazine issue on Smalltalk</a></p></li><li><p><a href="https://cuis.st" target="_blank">Cuis Smalltalk</a></p></li><li><p><a href="https://github.com/Cuis-Smalltalk" target="_blank">Cuis GitHub repositories</a></p></li><li><p><a href="https://pharo.org" target="_blank">Pharo Smalltalk</a></p></li><li><p><a href="https://squeak.org" target="_blank">Squeak Smalltalk</a></p></li><li><p><a href="https://squeak.js.org" target="_blank">SqueakJS</a> - &quot;A Squeak VM in JavaScript&quot; by Vanessa Freudenberg</p></li><li><p><a href="https://github.com/Cuis-Smalltalk/Learning-Cuis/blob/master/Quick-UI-Tour.md" target="_blank">Quick-UI-Tour</a> for Cuis Smalltalk</p></li><li><p><a href="https://www.fast.org.ar" target="_blank">Fundación Argentina de Smalltalk</a> (FAST)</p></li><li><p><a href="https://www.gnu.org/software/dr-geo/" target="_blank">Dr. Geo</a></p><p>&quot;A program to design and manipulate interactive geometric sketches. It helps kids to explore geometry.&quot;</p></li><li><p><a href="https://www.goodreads.com/shelf/show/smalltalk" target="_blank">Smalltalk Books</a> list on goodreads.</p></li><li><p><a href="https://www.youtube.com/playlist?list=PL6601A198DF14788D" target="_blank">Squeak from the very start</a> YouTube videos by Lawson English</p></li></ul><p>There is a <a href="https://lists.cuis.st/mailman/listinfo/cuis-dev" target="_blank">Cuis Smalltalk mailing list</a>, but no Discord or Slack channel.</p><p>There is a <a href="https://discord.gg/43VEWSw2" target="_blank">Discord channel channel for Squeak Smalltalk</a>.</p><p>The following recent podcast episodes discuss Smalltalk:</p><ul><li><a href="https://www.youtube.com/watch?v=sokb6zZC-ZE&t=3105s" target="_blank">Cuis Smalltalk and the History of Computing’s Future</a> with Juan Vuletich</li><li><a href="https://podcasts.apple.com/us/podcast/software-unscripted/id1602572955?i=1000656742775" target="_blank">A Haskller Tries Smalltalk</a> with Ian Jeffries</li><li><a href="https://podcasts.apple.com/us/podcast/software-unscripted/id1602572955" target="_blank">Smalltalk's Past, Present, and Future</a> with Juan Vuletich</li></ul><h2 id="pros-and-cons" tabindex="-1">Pros and Cons</h2><p>Smalltalk has the following pros:</p><ul><li>It has a small, consistently applied syntax.</li><li>It has a great development environment consisting of tools such as System Browser, Workspace, Transcript, Method Finder, Debugger, Hierarchy Browser, Protocol Browser, and more.</li><li>Everything is an object.</li><li>All methods are invoked through message passing which supports extreme polymorphism. Any kind of object, referred to as a &quot;receiver&quot;, can be passed as a message argument as long as it responds to the messages that will be sent to it.</li><li>It provides automatic version control.</li><li>It has a great web app. framework (Seaside) and a great CMS framework (Pier).</li></ul><p>Smalltalk has the following cons:</p><ul><li><p>It isn't as popular as many other programming languages.</p><ul><li>Schools generally don't teach it.</li><li>Few jobs using it are available.</li><li>IT press rarely talks about it.</li><li>It's difficult to convince others to use it.</li></ul></li><li><p>Help is limited.</p><p>There are fewer developers using Smalltalk than many other programming languages. This means there are fewer people available to answer questions for new developers.</p></li><li><p>Library documentation is lacking.</p><p>Many Smalltalk libraries have little to no documentation and example code. There seems to be a feeling that since the source code is easily accessible, developers can just read it to determine how to use a library. This makes it difficult to get started using new libraries.</p></li><li><p>Classes are global and not in namespaces, so all class names must be unique.</p><p>Using class name prefixes is sometimes recommended. These use 1, 2, or 3 capital letters. Prefixes are important for packages intended to be reused by others. Squeak has a <a href="http://wiki.squeak.org/squeak/3318" target="_blank">prefix registry</a> in its wiki. Unfortunately it was last updated in 2010.</p></li><li><p>Immutability is not favored.</p><p>While it is possible to define Smalltalk classes whose objects are immutable, this is not common. The lack of focus on immutability will feel wrong to developers that prefer functional programming.</p></li><li><p>Application deployment is tedious.</p><p>Tools to strip a Smalltalk image of developer-only features in order to create an image that is suitable for deployment are lacking. This is a highly manual process.</p></li><li><p>Smalltalks use of late binding for resolving message sends means that there are more errors that can only be detected at run-time than in statically typed languages such as C++, C#, and Java. However, Smalltalk does do incremental compiling when methods are saved, so it finds syntax errors before runtime, unlike most scripting languages.</p></li><li><p>All the code for a project is stored in one big image file. The base image for Cuis Smalltalk is 19 MB, but installing optional packages can easily increase the size to around 200 MB. However, it is common to store custom code and modifications to provided classes in a &quot;file out&quot; or package that can be shared with other developers and installed into fresh images.</p></li></ul><h2 id="history" tabindex="-1">History</h2><ul><li><p>Smalltalk-71</p><p>This was a product of research led by Alan Kay at Xerox Palo Alto Research Center (PARC). It was created by Alan Kay in just a few days.</p></li><li><p>Smalltalk-72</p><p>This version influenced the actor model that is used by some modern programming languages. From this point on, most of the implementation was provided by Dan Ingalis.</p></li><li><p>Smalltalk-76</p><p>This version added most of GUI tools present in current versions of Smalltalk.</p></li><li><p>Smalltalk-80</p><p>This version added support for metaclasses of everything, including classes, so everything could be treated as an object. This was the first version of Smalltalk that was shared outside of PARC.</p></li><li><p>ANSI Smalltalk</p><p>This became the standard language reference for Smalltalk in 1998.</p></li></ul><h2 id="implementations" tabindex="-1">Implementations</h2><p>The following implementations of Smalltalk were created after those listed above in the &quot;History&quot; section.</p><ul><li><p>Squeak</p><p>This was the first popular implementation that was free and open source.</p></li><li><p>VisualWorks</p></li><li><p>ObjectWorks</p></li><li><p>ParcPlace Systems for Unix and Sun systems</p></li><li><p>Digitalk for Windows and OS/2 systems</p></li><li><p>Enfin</p></li><li><p>Cincom</p></li><li><p>GemTalk</p></li><li><p>Etoys</p><p>This was created for the One Laptop per Child (OLPC) project.</p></li><li><p>GNU Smalltalk</p><p>This uses text files for code rather than providing a GUI environment that uses an image file.</p></li><li><p><a href="https://amber-lang.net" target="_blank">Amber</a></p><p>This is a language that is &quot;deeply inspired by Smalltalk&quot;. It compiles to JavaScript.</p></li><li><p><a href="https://github.com/dolphinsmalltalk" target="_blank">Dolphin Smalltalk</a>, only for Microsoft Windows</p></li><li><p><a href="https://www.gnu.org/software/smalltalk/" target="_blank">GNU Smalltalk</a></p></li><li><p><a href="https://github.com/nikboyd/hoot-smalltalk#hoot-smalltalk" target="_blank">Hoot Smalltalk</a></p><p>This runs on the Java Virtual Machine and uses some Java features.</p></li><li><p><a href="https://www.cincomsmalltalk.com/main/" target="_blank">Cincom Smalltalk</a></p></li><li><p><a href="https://www.instantiations.com/vast-platform/" target="_blank">VAST Platform</a></p><p>VAST stands for &quot;VisualAge SmallTalk&quot; and is provided by Instantiations.</p></li><li><p><a href="https://gemtalksystems.com/products/gs64/" target="_blank">GemStone/S</a></p></li><li><p>Pharo - forked from Squeak with goal to be more comprehensive</p></li><li><p>Cuis - forked from Squeak with goal to remain small and easy to learn</p></li></ul><p>The most popular Smalltalk implementations include the following:</p><ul><li><div class="row"><a href="https://squeak.org" target="_blank">Squeak (2,832 classes)</a> <img alt="Squeak Smalltalk log" class="logo" src="/blog/assets/squeak-smalltalk-logo.svg?v=1.1.1"></div></li><li><div class="row"><a href="https://pharo.org" target="_blank">Pharo (10,405 classes)</a> <img alt="Pharo Smalltalk log" class="logo" src="/blog/assets/pharo-smalltalk-logo.png?v=1.1.1"></div></li><li><div class="row"><a href="https://cuis.st" target="_blank">Cuis (675 classes)</a> <img alt="Cuis Smalltalk log" class="logo" src="/blog/assets/cuis-smalltalk-logo.png?v=1.1.1"></div></li></ul><p>Squeak, Pharo, and Cuis all use the MIT license. Both Pharo and Cuis began as forks of Squeak after maintenance of Squeak was turned over to the community and there was a lack of concensus on its future goals.</p><p>The number of predefined classes in each implementation above were obtained by printing the result of <code>Smalltalk allClasses size</code> with latest versions as of June 10, 2024.</p><h2 id="cuis-smalltalk" tabindex="-1">Cuis Smalltalk</h2><p>This article primarily focuses on Cuis Smalltalk and running in macOS.</p><p>Cuis Smalltalk was created by Juan Vuletich who has been active in the Smalltalk community since 1997. Juan began work on Cuis Smalltalk began in 2005 and version 1.0 was released in March 2009.</p><p>The objectives of Cuis Smalltalk are to:</p><ul><li>strive for the simplicity of Smalltalk-80</li><li>include a minimal number of classes required for the kernel, a GUI framework, and development tools</li><li>create a system that is good for learning and experimenting</li></ul><p>More classes can be added by installing packages.</p><p>Some advantages that Cuis has over Squeak and Pharo are that it supports TrueType fonts and high quality vector graphics.</p><p>The Cuis mascot is southern mountain cavy which is a &quot;tailless rodent with short, speckled, greyish-yellow fur, fading to pale grey on the underparts.&quot; They look similar to a mouse, but grow to around eight inches in length. They are found in Argentina. Juan Vuletich began development of Cuis Smalltalk in Buenos Aires, Argentina. The word &quot;cuis&quot; means &quot;squeak&quot; in Rioplatense Spanish.</p><p>The GitHub repository for Cuis Smalltalk is at <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev" target="_blank">Cuis-Smalltalk-Dev</a>. As of May 2024, 96.8% of the code in the repository is written in Smalltalk.</p><h3 id="installing" tabindex="-1">Installing</h3><p>To install Cuis Smalltalk:</p><ol><li>Browse <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev" target="_blank">Cuis Smalltalk Git repository</a>.</li><li>Click the &quot;Zip file&quot; link near the bottom of the page.</li><li>Unzip the downloaded file to obtain the directory &quot;Cuis-Smalltalk-Dev-master&quot;.</li><li>Move this directory to your desired location.</li></ol><p>Alternatively, clone the Git repository. This makes it possible to obtain updates by simply running &quot;git pull&quot;.</p><p>To start Cuis Smalltalk, run the appropriate start script found in the installed directory based on your operating system.</p><ul><li><p>for Windows, open a Command Prompt and run <code>RunCuisOnWindows.bat</code></p></li><li><p>for Linux, open a Terminal and run <code>RunCuisOnLinux.sh</code></p></li><li><p>for macOS ...</p><ol><li>Double-click the file <code>CuisVM.app</code> which will fail because the app is not verified.</li><li>Open the System Settings app.</li><li>Select &quot;Privacy &amp; Security&quot;.</li><li>Scroll down to the &quot;Security&quot; section.</li><li>Look for the message '&quot;CuisVM.app&quot; was blocked from use because it is not from an identified developer.'</li><li>Click the &quot;Open Anyway&quot; button.</li><li>Click the &quot;Open&quot; button in the next dialog that appears.</li><li>Select the file <code>Cuis*.image</code> found in the subdirectory as <code>CuisImage</code>.</li><li>Click the &quot;Open&quot; button.</li><li>You may see several dialogs that say '&quot;CuisVM.app&quot; would like to access files in your Documents folder'. Click the &quot;Allow&quot; button each time.</li></ol></li></ul><p>The file <code>CuisVM.app</code> (36 MB) includes the Squeak virtual machine (VM). This does not differ in any way from the VM used by Squeak. All the differences between Cuis and Squeak are implemented in its base image file (19 MB).</p><p>The Squeak VM is implemented in Slang and C. Slang is a subset of Smalltalk that can be easily translated to C. C is used for performance critical parts. There is a different version of the Squeak VM executable for each operating system.</p><p>By contrast, Pharo Smalltalk provides <code>PharoLauncher.app</code> is 198MB.</p><p>The reported name of the <code>CuisVM.app</code> app in macOS is &quot;Squeak 5.0&quot;. If you wish to change this:</p><ul><li>Open a terminal window.</li><li><code>cd</code> to the directory where you placed the file <code>CuisVM.app</code>.</li><li>Enter <code>cd CuisVM.app/Contents</code>.</li><li>Edit the file <code>Info.plist</code>.</li><li>Find the key &quot;CFBundleName&quot;.</li><li>Change its value from &quot;Squeak&quot; to &quot;Cuis&quot;.</li></ul><h3 id="updating" tabindex="-1">Updating</h3><p>If Cuis Smalltak is started using a platform-specific shell script, it will automatically update to the latest version. These scripts have a name that begins with <code>RunCuisOn</code>.</p><p>If the Cuis Smalltalk GitHub repository was cloned, the steps to update are:</p><ul><li>Do a <code>git pull</code> on the repository.</li><li>Start Cuis Smalltalk with an image.</li><li>Open the World menu and select &quot;Changes...Install New Updates&quot;.</li></ul><h2 id="squeak-smalltalk" tabindex="-1">Squeak Smalltalk</h2><p>To install Squeak Smalltalk:</p><ul><li>Browse <a href="https://squeak.org" target="_blank">Squeak home</a> page.</li><li>Click the &quot;Downloads&quot; link.</li><li>Click the &quot;Link&quot; button for your operating system.</li><li>Double-click the downloaded file.</li></ul><p>On macOS:</p><ul><li>Drag the application icon to the Finder &quot;Applications&quot; directory.</li><li>Double-click the <code>Squeak*.app</code> file.</li></ul><h2 id="pharo-smalltalk" tabindex="-1">Pharo Smalltalk</h2><p>TODO: Add this detail.</p><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>There are at least three ways to start working in Smalltalk.</p><ol><li>Double-click a Smalltalk image file such as the base image found in <code>CuisImage/Cuis*.image</code>.</li><li>Double-click the Cuis app (named <code>CuisVM.app</code> in macOS). That will open a dialog that prompts for an image file.</li><li>Drag an image file onto the Cuis app icon.</li></ol><p>The initial Cuis Smalltalk window will appear similar to the following:</p><p><img alt="Cuis Smalltalk startup" class="logo" style="width: 400px" src="/blog/assets/cuis-smalltalk-startup.png?v=1.1.1"></p><h3 id="the-world" tabindex="-1">The World</h3><p>The main window renders an instance of the class <code>WorldMorph</code>. This is referred to as the &quot;World&quot;. Clicking anywhere on the &quot;World&quot; opens the World menu. The items on this menu are described later. It is not necessary to hold the mouse button down while selecting a menu item. Just move the mouse to a menu item and click it.</p><p>By default, focus moves to a window by moving the mouse cursor over it. To change this so focus only moves when a window is clicked, open the World menu and select &quot;Preferences...Focus when click&quot;. To return to the default behavior, open the World menu and select &quot;Preferences...Focus follows Mouse&quot;.</p><h3 id="font-size" tabindex="-1">Font Size</h3><p>It is likely that the default font size used in all the Smalltalk windows will not be ideal for you. To change the font size:</p><ul><li>Open the World menu.</li><li>Click &quot;Preferences.&quot;.</li><li>Select &quot;Size of GUI elements&quot;.</li><li>Select a point size.</li></ul><p>The menu of font sizes will remain open, so it's easy to try various sizes. Once you have selected a suitable size, close the menu by clicking anywhere on the World or clicking the red circle.</p><h3 id="full-screen" tabindex="-1">Full Screen</h3><p>When developing in Smalltalk it is typical to open many windows inside the World. You will likely want to work in full screen mode so those windows appear to be top-level instead of floating inside the window of the Smalltalk app.</p><p>To enable full-screen mode, open the World menu and select Preferences ... Full screen on. To disable this, select Preferences ... Full screen on.</p><p>TODO: Move the rest of the content in this section to later.</p><p>Jumping ahead, you can add buttons to the World that simplify toggling full screen mode. The following class defines a class method <code>buttons</code> that displays buttons which make it easier to toggle between full screen and windowed modes.</p><p><img alt="Cuis full screen buttons" class="logo" style="width: 20%" src="/blog/assets/cuis-full-screen-buttons.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#VFullScreenButtons</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br>fullScreen<span class="token punctuation">:</span> aBoolean<br>    Display fullScreenMode<span class="token punctuation">:</span> aBoolean<span class="token punctuation">.</span><br>    Display newDepth<span class="token punctuation">:</span> Display depth<br><br>fullScreenOff<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">false</span><br><br>fullScreenOn<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">true</span><br><br>initialize<br>    <span class="token comment">"renders buttons for setting full screen on or off"</span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    LayoutMorph newColumn<br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Full Screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LayoutMorph newRow<br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'On'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOn <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'Off'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOff <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            color<span class="token punctuation">:</span> Color transparent<br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">@</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        openInWorld</code></pre><h3 id="themes" tabindex="-1">Themes</h3><p>Colors and other features of the Cuis Smalltalk UI are determined by selecting a theme.</p><p>By default, only two themes are provided, &quot;BrightColorTheme&quot; and &quot;DarkTheme&quot;. To add more themes, open the World menu, select Preferences...Themes..., and select &quot;* Load Additional Themes *&quot;. This adds the themes &quot;ClassicTheme&quot;, &quot;DarkBlueTheme&quot;, &quot;DarkColorTheme&quot;, &quot;HighContractBlackTheme&quot;, &quot;HighContrastWhiteTheme&quot;, &quot;LightBluetheme&quot;, &quot;LightGrayTheme&quot;, &quot;LightTheme&quot;, and &quot;PersonalizedTheme&quot;. Select one of these to switch to that theme.</p><p>Open windows will not be correctly updated after selecting a new theme. Close them and open new windows to get the intended styling.</p><p>To customize the current theme, open the World menu and select Preferences...Theme Customizer... Alternatively you can:</p><ul><li>Open a System Browser.</li><li>Select the &quot;Graphics - Themes&quot; class category.</li><li>Select the <code>Theme</code> class.</li><li>Select the <code>colors</code> message category.</li><li>Select one of the methods such as <code>buttonLabel</code>.</li><li>Change the color returned from its default value to a new value.</li></ul><p>This will affect all morphs that use that theme property. For example, the <code>PluggableButtonMorph</code> method <code>drawEmbossedLabelOn</code> uses <code>Theme current buttonLabel</code>. This method could be modified to enable specifying a different label color for specific buttons.</p><h3 id="morphs" tabindex="-1">Morphs</h3><p>All the graphical elements visible on the World are referred to as &quot;morphs&quot;.</p><p>Morphs can be dragged to different locations and resized.</p><p>To open an context-sensitive menu for a morph, right-click it. After a menu item is selected from a menu, it will close.</p><p>To cause a menu to remain open so multiple selections can be made, click its push pin in the upper-right corner. If a menu is closed and re-opened, the push pin state will be reset.</p><h3 id="workspace-windows" tabindex="-1">Workspace Windows</h3><p>Workspace windows enable experimenting with code. They are somewhat like REPLs in other programming languages.</p><p>To open a Workspace, open a World menu and select &quot;Open...Browser&quot;.</p><p>Enter any number of expressions separated by periods.</p><p>TODO: Replace this with a better screenshot. <img alt="Cuis Workspace window" style="width: 80%" src="/blog/assets/cuis-workspace-window.png?v=1.1.1"></p><p>To prepare to execute expressions, select them or place the cursor at the end of a single-line expression.</p><p>To execute the code for its side effects, press cmd-d (Do it). For example, enter the following and press cmd-d to set a variable:</p><pre class="language-smalltalk"><code class="language-smalltalk">message <span class="token operator">:=</span> <span class="token string">'Hello, Smalltalk!'</span></code></pre><p>To execute the code and print the result of the last expression at the cursor position, press cmd-p (Print it). This sends the message <code>#printString</code> to the result object and outputs the return value. The output will be selected, so it can be removed by pressing the delete key. For example, enter the following and press cmd-p to get the output <code>6</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">3</span></code></pre><p>You will use &quot;Do it&quot; and &quot;Print it&quot; often, so memorize their keyboard shortcuts.</p><p>To browse a class, enter its name and press cmd-b (Browse it). This will open a System Browser focused on the class.</p><p>To remove the last expression added in a Workspace, press cmd-z.</p><p>To save all the code in a Workspace to a text file, click the blue circle in the upper-left and select &quot;Save as...&quot;. A popup will prompt for a file name. Include the <code>.st</code> file extension. The title bar will change from &quot;Workspace&quot; to the file path where the code was saved. It may be necessary to make the window wider to see all of the path. Once the contents have been saved, subsequent changes in the Workspace can be saved to the file by pressing cmd-s. A warning will be displayed if an attempt is made to close a Workspace with unsaved changes.</p><p>To open a new Workspace that contains the contents of a <code>.st</code> file, open a File List, select the file, right-click it, and select &quot;workspace with contents&quot;.</p><p>If running code goes into an infinite loop, press cmd-period to break out of it.</p><h3 id="transcript-windows" tabindex="-1">Transcript Windows</h3><p>Transcript windows provide a read-only window display of output written to it.</p><p>To open a Transcript, open the World menu and select &quot;Open...Transcript&quot;.</p><p>One way to write to the Transcript is to execute <code>Transcript show: &lt;object&gt;</code>, perhaps in a Workspace window. This can output any kind of object because every object has a string representation.</p><p>Another way to write to the Transcript is to send the <code>#print</code> message to an object. For example, <code>'Hello World!' print</code>.</p><p>It is common in Smalltalk documentation that describes specific messages to precede their name with the <code>#</code>, which indicates that message names are symbols.</p><p>The <code>print</code> method works with any kind of object because it is implemented in the <code>Object</code> class which is a superclass of all classes. This executes <code>Transcript show: self; newLine</code>. For objects of some classes such as <code>Boolean</code>, <code>Number</code>, <code>String</code>, and <code>Array</code>, their value will be printed. For other objects, only their class name will be printed.</p><p>For debugging purposes, a better approach is to add the following instnace method to the `Object class:</p><pre class="language-smalltalk"><code class="language-smalltalk">logAs<span class="token punctuation">:</span> aString<br>    <span class="token punctuation">(</span><span class="token string">'{1} = {2}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>aString<span class="token punctuation">.</span> <span class="token keyword">self</span><span class="token punctuation">}</span><span class="token punctuation">)</span> print</code></pre><p>For example, this can be used to print a <code>Dog</code> object as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">myDog logAs<span class="token punctuation">:</span> <span class="token string">'myDog'</span></code></pre><p>When output is sent to the <code>Transcript</code>, it appears in all <code>Transcript</code> windows. So it doesn't make sense to open more than one.</p><p>To clear the contents of the Transcript window, right-click in it and select &quot;Clear Transcript&quot; (no keyboard shortcut). If there is more than one <code>Transcript</code> window, all of them will be cleared.</p><p>TODO: Why does this window contain the word &quot;Transcript&quot; in its content?</p><p>TODO: Change this image to one that shows ouptut from the examples given above. <img alt="Cuis Transcript window" style="width: 80%" src="/blog/assets/cuis-transcript-window.png?v=1.1.1"></p><h2 id="implementing-in-debugger" tabindex="-1">Implementing in Debugger</h2><p>Smalltalk makes it possible to implement missing methods in the debugger. Here's an example of a session doing this.</p><ol><li><p>Open a Workspace.</p></li><li><p>Enter <code>numbers := #(6 2 9 4 3).</code> and &quot;Do it&quot;.</p></li><li><p>Enter <code>numbers median.</code> and &quot;Print it&quot;.</p></li><li><p>In the &quot;Unknown selector&quot; popup that appears, click &quot;median&quot; to confirm that is the message you meant to send.</p></li><li><p>A Debug window will apppear with the title &quot;MessageNotUnderstood&quot;.</p></li><li><p>Click the &quot;Create&quot; button on the right.</p></li><li><p>In the &quot;Define&quot; popup that appears, click &quot;SequenceableCollection&quot; as the class where the method should be added.</p></li><li><p>In the &quot;Select category&quot; popup that appears, select &quot;math functions&quot;.</p></li><li><p>In the code pane, replace <code>self shouldBeImplemented.</code> with the following:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">mid</span> <span class="token variable">size</span> <span class="token variable">sorted</span> <span class="token variable">value</span> <span class="token punctuation">|</span></span><br>sorted <span class="token operator">:=</span> <span class="token keyword">self</span> sorted<span class="token punctuation">.</span><br>size <span class="token operator">:=</span> sorted size<span class="token punctuation">.</span><br>mid <span class="token operator">:=</span> size <span class="token operator">//</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">.</span><br>value <span class="token operator">:=</span> sorted at<span class="token punctuation">:</span> mid<span class="token punctuation">.</span><br>size odd<br>    ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span> value <span class="token punctuation">]</span><br>    ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span> <span class="token punctuation">(</span>value <span class="token operator">+</span> <span class="token punctuation">(</span>sorted at<span class="token punctuation">:</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">]</span></code></pre></li><li><p>Press cmd-s to save.</p></li><li><p>Click the &quot;Proceed&quot; button.</p></li><li><p>Verify that the result is <code>4</code>.</p></li><li><p>Add <code>5</code> to the end of the <code>numbers</code> <code>Array</code>.</p></li><li><p>Test the <code>median</code> method again and verify that the result is the <code>Fraction</code> <code>9/2</code>.</p></li></ol><p>An alternate approach to testing from a Workspace is to write and run a unit test. See the &quot;Unit Test&quot; section. This will also open a Debug window where the missing code can be created.</p><h2 id="syntax" tabindex="-1">Syntax</h2><p>Before diving into the functionality provided by the Smalltalk development environment, it's important to understand the syntax of the Smalltalk programming language.</p><h3 id="summary" tabindex="-1">Summary</h3><p>The following table summarizes all the syntax.</p><table><thead><tr><th>Item</th><th>Example</th></tr></thead><tbody><tr><td>comment</td><td><code>&quot;some text&quot;</code></td></tr><tr><td>temporary (local) variable with private scope</td><td><code>myTemp</code> (camelCase)</td></tr><tr><td>global variable with shared scope</td><td><code>MyGlobal</code> (CamelCase)</td></tr><tr><td>pseudo variable (cannot assign)</td><td><code>self</code>, <code>super</code>, <code>nil</code>, <code>true</code>, <code>false</code>, and <code>thisContext</code></td></tr><tr><td>integer</td><td><code>123</code></td></tr><tr><td>float</td><td><code>3.14</code></td></tr><tr><td>exponential notation</td><td><code>1.23e4</code></td></tr><tr><td>character</td><td><code>$a</code></td></tr><tr><td>string</td><td><code>'text'</code> (use double ' to include)</td></tr><tr><td>string concatenation (comma message)</td><td><code>'foo', 'bar', 'baz'</code></td></tr><tr><td>symbol (globally unique string)</td><td><code>#name</code></td></tr><tr><td>static array (elements are literal values)</td><td><code>#(1 4 8)</code></td></tr><tr><td>dynamic array (elements are computed at run time)</td><td><code>{1. 2 * 2. 2 raisedTo: 3}</code></td></tr><tr><td>array concatenation (comma message)</td><td><code>#(1 2), #(3 4)</code></td></tr><tr><td>assignment</td><td><code>&lt;variable&gt; := &lt;expression&gt;</code></td></tr><tr><td>method and block variable declarations</td><td><code>| foo bar baz |</code></td></tr><tr><td>block with no arguments</td><td><code>[ &lt;expressions&gt; ]</code></td></tr><tr><td>block with arguments</td><td><code>[:a :b | a + b]</code></td></tr><tr><td>unary message send</td><td><code>&lt;object&gt; &lt;message&gt;</code> such as <code>5 factorial</code></td></tr><tr><td>binary message send (look like operators)</td><td><code>&lt;object&gt; &lt;message&gt; &lt;argument&gt;</code> such as <code>4 * 5</code></td></tr><tr><td>keyword message send</td><td><code>2 raisedTo: 4 modulo: 3</code></td></tr><tr><td>message cascade - sends to initial receiver</td><td><code>Transcript show: 'foo'; newLine; show: 'bar'</code></td></tr><tr><td>message chaining - sends to previous result</td><td><code>2 * 3 :: squared :: negated</code> (-36)</td></tr><tr><td>method return value</td><td><code>^&lt;expression&gt;</code> such as ^42</td></tr><tr><td>expression separator (period)</td><td><code>'foo print'. 'bar' print</code></td></tr><tr><td>reference to current object in a method</td><td><code>self</code></td></tr></tbody></table><p>The caret (^) in a return expression can be followed by a space. The pretty printer includes a space, but some developers prefer to omit it.</p><p>In static arrays the elements are separated by spaces.</p><p>In dynamic arrays the expressions are separated by periods.</p><p>TODO: What is a &quot;compound literal&quot;?</p><h3 id="naming-conventions" tabindex="-1">Naming Conventions</h3><p>Names of classes, methods, and variables use camelCase. They consist of letters and digits. They start with a letter that is uppercase for classes and class variables, and lowercase for all other names. The only special character allowed is the underscore character, but that is rarely used because camelCase is preferred.</p><h3 id="assignment-operator" tabindex="-1">Assignment Operator</h3><p>Assignment operators (<code>:=</code>) can be rendered as a left pointing arrow for the purpose looking cool!</p><p>To enable this, open the World menu and select Preferences...Show ST-80 Assignments. The next time code is modified, all the <code>:=</code> messages will be rendered by a left pointing arrow.</p><p>TODO: Does this also enable returning the <code>^</code> return character as an up arrow?</p><p>To disable this, open the World menu and select Preferences...Show ANSI Assignments.</p><p>Typing an underscore is a shorthand way to type <code>:=</code>. Typing either will be rendered as a left pointing arrow. This does not change the characters that appear when code is saved in a &quot;file out&quot; or package.</p><h2 id="creating-objects" tabindex="-1">Creating Objects</h2><p>New objects can be created by sending the message <code>#new</code> or <code>#basicNew</code> to a class. By default, both initialize all attributes of the new object to <code>nil</code>. The difference between them is that <code>new</code> can be overridden to do something different, whereas <code>basicNew</code> cannot be overridden.</p><h2 id="variables" tabindex="-1">Variables</h2><p>Smalltalk supports five kinds of variables:</p><ul><li>Pseudo-variables are provided by the system and cannot be modified.</li><li>Instance variables are associated with a specific instance of a class.</li><li>Class variables are associated with a class and all subclasses share the same value.</li><li>Class instance variables are similar to class variables, but they allow subclasses to have different values for the same variable name.</li><li>Temporary (or local) variables are accessible only within the method or block where they are declared.</li></ul><h3 id="pseudo-variables" tabindex="-1">Pseudo-variables</h3><p>Pseudo-variables are variables whose value is provided automatically and cannot be modified. There are six of these with the names <code>true</code>, <code>false</code>, <code>nil</code>, <code>self</code>, <code>super</code>, and <code>thisContext</code>. These names are reserved words, meaning they cannot be used for other kinds of variables.</p><p><code>true</code> and <code>false</code> represent Boolean values. They refer to singleton instances of the <code>True</code> and <code>False</code> classes.</p><p><code>nil</code> represents the lack of a real value.</p><p><code>self</code> can be used in instance methods to refer to the current object. It can also be used in class methods to refer to the current class.</p><p><code>super</code> can be used in instance methods to refer to the superclass of the current object. For example, the superclass of the <code>SmallInteger</code> class is <code>Integer</code> and the superclass of the <code>Integer</code> class is <code>Number</code>.</p><p><code>self</code> and <code>super</code> are often used as the receiver of messages. For example, is typical for the instance method <code>initialize</code> to begin with <code>super initialize</code>. We will have more to say about the <code>initialize</code> method later.</p><p>From the <a href="https://cuis-smalltalk.github.io/TheCuisBook/Pseudo_002dvariables.html" target="_blank">Cuis book</a>, &quot;<code>thisContext</code> ... represents the top frame of the run-time stack. ... It is essential for implementing development tools like the Debugger and it is also used to implement exception handling and continuations.&quot;</p><h3 id="blocks" tabindex="-1">Blocks</h3><p>A block is closure (anonymous function) that can have parameters and contain many expressions. They are represented by the class <code>BlockClosure</code>. The value of the block is the value of its last expression.</p><p>Blocks take zero or more positional arguments, which is something methods cannot do. Argument names appear at the beginning of a block and each name is preceded by a colon. The argument list is separated from the expressions by a vertical bar.</p><p>Blocks can be saved in variables, passed as arguments to methods and other blocks, and can be evaluated multiple times. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">noArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>singleArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token punctuation">|</span></span> a <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>multipleArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span> a <span class="token operator">*</span> b<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Blocks support several messages that evaluate the block whose names begin with <code>value</code>. These message enable providing zero to four arguments. For blocks with more than four parameters, send the message <code>#valueWithArguments:</code> and an array holding all the arguments. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">noArgBlock value<span class="token punctuation">.</span><br>singleArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span> value<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span> value<span class="token punctuation">:</span> <span class="token number">3</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">.</span><br>multiArgBlock valueWithArguments<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>A block must be passed the same number of arguments as it has parameters. If a block is passed fewer or more arguments than it accepts, a Debug window will open.</p><p>Blocks can declare and use temporary (local) variables just like a method.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">average <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">sum</span> <span class="token punctuation">|</span></span><br>    sum <span class="token operator">:=</span> a <span class="token operator">+</span> b<span class="token punctuation">.</span><br>    sum <span class="token operator">/</span> <span class="token number">2.0</span></code></pre><p>Blocks are closures, meaning that they can access variables defined outside them. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">n <span class="token operator">:=</span> <span class="token number">19</span><span class="token punctuation">.</span><br>b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token punctuation">|</span></span> a <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">.</span><br>b value<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment">"result is 21"</span></code></pre><p>To use a block as an iteration condition, use the methods <code>whileTrue</code>, <code>whileFalse</code>, <code>whileNotNil</code>, and <code>whileNil</code> that are defined in the <code>BlockClosure</code> class. Note that these are not methods on the <code>Boolean</code> class.</p><p>For example, the following code prints the integer values 1 through 10 in the Transcript:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">counter</span> <span class="token punctuation">|</span></span><br>counter <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">.</span><br><span class="token punctuation">[</span>counter <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">]</span> whileTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>    counter print<span class="token punctuation">.</span><br>    counter <span class="token operator">:=</span> counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">.</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>A block can call itself if it passes itself in as an argument. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">fact <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:block</span> <span class="token variable">:n</span> <span class="token punctuation">|</span></span><br>    n <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span>n <span class="token operator">*</span> <span class="token punctuation">(</span>block value<span class="token punctuation">:</span> block value<span class="token punctuation">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>fact value<span class="token punctuation">:</span> fact value<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">"gives 120"</span></code></pre><p>If a block uses the caret symbol (<code>^</code>) to return a value, the containing method will exit and return that value.</p><h3 id="instance-variables" tabindex="-1">Instance Variables</h3><p>Instance variables are associated with a specific instance of a class. They are declared in a space-separated string that is the value of the <code>instanceVariableNames:</code> keyword in a class definition.</p><p>Instance variables are always private, which means they can only be accessed by instance methods in the class that defines them, and in subclasses. To expose an instance variable value to methods in other classes, define an instance method that returns it.</p><p>When a new instance of a class is created, its instance method <code>initialize</code> is called. This is, as the name suggests, a perfect place to assign an initial value to each instance variable.</p><h3 id="class-variables" tabindex="-1">Class Variables</h3><p>Class variables are associated with a class and the same value is shared with all subclasses. They are declared in a space-separated string that is the value of the <code>classVariableNames:</code> keyword in a class definition.</p><p>Class variables are described in the same way as instance variables, but their names must begin uppercase. It is common for a class to not have any class variables.</p><p>Like instance variables, class variables are always private. To expose a class variable value to methods in other classes, define a class method that returns it.</p><p>To assign initial values to the class variables of a class, define the class method <code>initialize</code> and explicitly send that message to the class.</p><h3 id="class-instance-variables" tabindex="-1">Class Instance Variables</h3><p>Class instance variables are defined as an instance variables in the metaclass of a given class. Unlike class variables, subclasses can have a different value for the variable than that used by the class where it is defined. Class instance variables are not commonly used.</p><p>TODO: Describe how to define a class instance variable and set different values in the class and subclasses. Perhaps an example could be an Animal class with a legs variable that is set to 0 in the Animal class and 4 in the Dog subclass.</p><h3 id="temporary-variables" tabindex="-1">Temporary Variables</h3><p>Temporary variables are declared in a space-separated string between vertical bars inside a method or block definition. Method parameters are also considered to be temporary variables. These can only be accessed within the method or block that declares them.</p><p>In the following example, <code>numbers</code> and <code>sum</code> are temporary variables.</p><pre class="language-smalltalk"><code class="language-smalltalk">average<span class="token punctuation">:</span> numbers<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">sum</span> <span class="token punctuation">|</span></span><br>    sum <span class="token operator">:=</span> numbers inject<span class="token punctuation">:</span> <span class="token number">0</span> into<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:acc</span> <span class="token variable">:each</span> <span class="token punctuation">|</span></span> acc <span class="token operator">+</span> each <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> sum <span class="token operator">/</span> numbers size</code></pre><h3 id="global-variables" tabindex="-1">Global Variables</h3><p>While Smalltalk does not support global variables, the <code>Smalltalk</code> <code>SystemDictionary</code> object can be used for this purpose. The following code adds the key &quot;color&quot; with the value &quot;yellow&quot; to that <code>Dictionary</code>, and then retrieves the value for that key:</p><pre class="language-smalltalk"><code class="language-smalltalk">Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> put<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">.</span><br>color <span class="token operator">:=</span> Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> ifAbsent<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">.</span></code></pre><h2 id="messages" tabindex="-1">Messages</h2><p>The only mechanism for communicating with an object is to send it a message. A message is a combination of a selector (or message name) and arguments. Messages are always sent to a explicit receiver. When inside an instance method, to send a message to the current object, use the pseudo-variable <code>self</code> as the receiver. To send a message to the superclass of the current object, use the pseudo-variable <code>super</code> as the receiver.</p><p>If Smalltalk were to add the ability to specify the parameter and return types of methods, it would just be specifying the set of messages to which compatible objects can respond. This is not done, so compatibility is determined at run-time.</p><p>Arguments in messages are always passed by reference, not by value.</p><p>In Smalltalk documentation, selectors are preceded by <code>#</code> to indicate that they are symbols. But the <code>#</code> is not included when actually sending a message.</p><p>A method is code found in a class that responds to a message.</p><p>Smalltalk supports three types of messages:</p><ul><li><p>unary</p><p>These message do not take any arguments. Their names are alphanumeric and begin lowercase. For example, in <code>5 factorial</code>, <code>#factorial</code> is a unary message.</p></li><li><p>binary</p><p>These message take a single argument and have names that use a restricted set of characters that make them look like operators in other programming languages. Binary message names can only contain one or more of the following characters: <code>+ - * / \ ~ &lt; &gt; = @ % | &amp; ? ,</code></p><p>For example, in <code>a * b</code>, <code>#*</code> is a binary message. This sends the message <code>#*</code> to the object <code>a</code>, passing it the argument <code>b</code>.</p><p>The binary message <code>=</code> tests whether two objects are equal, meaning one can be used in place of the other. Each class can define this method to decide how their objects should be compared. If they do not define <code>=</code>, an implementation will be found in the inheritance hierarchy. The <code>Object</code> class defines <code>=</code> to be the same as <code>==</code>.</p><p>The binary message <code>==</code> tests whether two objects are identical (same objects in memory).</p></li><li><p>keyword</p><p>These messages take one or more arguments that are each preceded by a keyword. Each keyword is alphanumeric, begins lowercase, and ends in a colon. For example, <code>#at:put</code> is a keyword message in the <code>OrderedCollection</code> class which is the superclass of the <code>Array</code> class.</p><p>The following code creates an array of colors and then changes the second element from <code>'green'</code> to <code>'yellow'</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">colors <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>colors at<span class="token punctuation">:</span> <span class="token number">2</span> put<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">.</span></code></pre><p>The parts of a keyword message must be specified in the order in which they appear in the corresponding method definition. It's possible define additional methods that support other orders, but that is not typically done.</p></li></ul><p>When multiple messages of these types are combined in a single expression, the order of evaluation is:</p><ul><li>all unary messages from left to right</li><li>all binary messages from left to right</li><li>all keyword messages from left to right</li></ul><p>For example, in <code>2 raisedTo: 1 + 3 factorial</code>, the order is <code>#factorial</code>, <code>#+</code>, and <code>#raisedTo</code>.</p><p>The evaluation order can be changed by adding parentheses. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">a <span class="token operator">:=</span> <span class="token number">2</span><span class="token punctuation">.</span><br>b <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">.</span><br>c <span class="token operator">:=</span> <span class="token number">4</span><span class="token punctuation">.</span><br>x <span class="token operator">:=</span> a <span class="token operator">+</span> b <span class="token operator">*</span> c<span class="token punctuation">.</span> <span class="token comment">"20"</span><br>y <span class="token operator">:=</span> a <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token operator">*</span> c<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">"24"</span></code></pre><p>Parentheses are never needed around unary messages since those are always evaluated before binary and keyword messages.</p><p>If a message is sent to an object and no compatible method is found, the following popup will appear:</p><p><img alt="Unknown Selector popup" style="width: 50%" src="/blog/assets/smalltalk-unknown-selector.png?v=1.1.1"></p><p>If the selector was incorrectly typed, any implemented selector can be selected from this popup.</p><p>If the selector is confirmed or if such a message is sent from runnning code, the following Debugger window will appear:</p><p><img alt="Debugger MessageNotUnderstood" src="/blog/assets/smalltalk-message-not-understood.png?v=1.1.1"></p><p>One option is to implement the missing method. To do this:</p><ul><li>Click the &quot;Create&quot; button.</li><li>In the popup that appears, select the class within the inheritance hierarchy where the method will be added.</li><li>In the next popup that appears, select a method category for the new method.</li><li>Initially the method implementation will only contain <code>self shouldBeImplemented</code>.</li><li>Modify the implementation as desired.</li><li>Press cmd-s to save it.</li><li>Optionally click the &quot;Proceed&quot; button to resume execution with calling the new method.</li></ul><h3 id="tab-completions" tabindex="-1">Tab Completions</h3><p>When entering code to send a message, completion hints are provided if at least the first letter in the message name is typed and the tab key is pressed. For example, entering <code>7 s</code> and pressing the tab key shows possible completions of <code>shallowCopy</code>, <code>sqrt</code>, and more. Use the up and down arrow keys to select a completion and press the return key to accept it.</p><p>To enable completions without typing any characters in the name, enter <code>Preferences at: #spaceTabOpensAutoCompletion put: true</code> in a Workspace and &quot;Do it&quot;. For example, with this preference set, you can enter <code>'test'</code> followed by a space and press the tab key to get completion hints.</p><p>Matching messages found anywhere in the inheritance hierarchy appear in black. If there are no matching messages, it will show all known selectors that match in any class in blue. The reason is that you can send any message to any object. Even if the object has no matching method anywhere in its inheritance hierarchy, it could still respond by handling it in a <code>doesNotUnderstand</code> method. Personally I do not find this helpful and wish it did not show those messages.</p><h3 id="dynamic-messages" tabindex="-1">Dynamic Messages</h3><p>The <code>#perform:</code> message and its variations can be sent to any class or object to send a message specified by the symbol that follows <code>perform:</code>. This is useful in situations where the message to send must be determined at run-time.</p><p>Another alternative it to use the <code>MessageSend</code> class. The class methods <code>:receiver:selector</code>, <code>:receiver:selector:argument:</code>, and <code>:receiver:selector:arguments:</code> return an object that describes a message send. The object can be passed around and the actual send can be triggered later.</p><p>For example, the following sets of expressions are equivalent:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token comment">"These demostrates sending a unary message. Each gives the result 2."</span><br><span class="token number">4</span> sqrt<span class="token punctuation">.</span><br><span class="token number">4</span> perform<span class="token punctuation">:</span> <span class="token symbol">#sqrt</span><span class="token punctuation">.</span><br><span class="token punctuation">(</span>MessageSend receiver<span class="token punctuation">:</span> <span class="token number">4</span> selector<span class="token punctuation">:</span> <span class="token symbol">#sqrt</span><span class="token punctuation">)</span> value<span class="token punctuation">.</span><br><br><span class="token comment">"These demonstrate sending a binary message. Each gives the result 6."</span><br><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">.</span><br><span class="token number">2</span> perform<span class="token punctuation">:</span> <span class="token symbol">#*</span> with<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br><span class="token punctuation">(</span>MessageSend receiver<span class="token punctuation">:</span> <span class="token number">2</span> selector<span class="token punctuation">:</span> <span class="token symbol">#*</span> argument<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span> value<span class="token punctuation">.</span><br><br><span class="token comment">"These demonstrate sending a keyword message. Each gives the result 4."</span><br><span class="token string">'foobarbaz'</span> findString<span class="token punctuation">:</span> <span class="token string">'BAR'</span> startingAt<span class="token punctuation">:</span> <span class="token number">1</span> caseSensitive<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">.</span><br><span class="token string">'foobarbaz'</span><br>    perform<span class="token punctuation">:</span> <span class="token symbol">#findString</span><span class="token punctuation">:</span>startingAt<span class="token punctuation">:</span>caseSensitive<span class="token punctuation">:</span><br>    with<span class="token punctuation">:</span> <span class="token string">'BAR'</span> with<span class="token punctuation">:</span> <span class="token number">1</span> with<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">.</span><br><span class="token punctuation">(</span>MessageSend<br>    receiver<span class="token punctuation">:</span> <span class="token string">'foobarbaz'</span><br>    selector<span class="token punctuation">:</span> <span class="token symbol">#findString</span><span class="token punctuation">:</span>startingAt<span class="token punctuation">:</span>caseSensitive<span class="token punctuation">:</span><br>    arguments<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'BAR'</span> <span class="token number">1</span> <span class="token boolean">false</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span> value<span class="token punctuation">.</span></code></pre><p>To provide more than three keyword arguments with <code>perform</code>, send the <code>#perform:withArguments</code> message.</p><h2 id="classes" tabindex="-1">Classes</h2><p>A class defines a set of associated class variables, instance variables, class methods, and instance methods.</p><p>A class is defined by sending the message <code>#subclass:instanceVariableNames:classVariableNames:poolDictionaries:category:</code> to a superclass which can be <code>Object</code> or any other class. This message is handled by an instance method of the class <code>Class</code>.</p><p>The <code>subclass</code> keyword takes a symbol. The remaining keywords all take strings. All the keywords must be supplied, even if their value is an empty string. The following is an example class definition.</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Dog</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'breed name'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Programming languages use many terms to describe data that is encapsulated by objects created from a class. Examples include &quot;attribute&quot;, &quot;property&quot;, and &quot;field&quot;. Smalltalk calls these &quot;instance variables&quot;.</p><p>Instance variables are described by a single <code>String</code> where the names are separated by spaces. The names must begin lowercase.</p><p>Each class is a associated with a category. Classes provided by the image are in categories such as &quot;Collections&quot;, &quot;Kernel&quot;, &quot;Morphic&quot;, &quot;System&quot;, &quot;Tools&quot;, &quot;UI&quot;, and many more. If a new class definition is saved with an empty string category, it will be changed to 'as yet unclassified'.</p><p>Pool dictionaries enable sharing data between related classes. They reside in the <code>Smalltalk</code> dictionary. To create a pool dictionary named &quot;MyPool&quot;, enter the following in a Workspace and &quot;Do it&quot;: <code>Smalltalk at: #MyPool put: (Dictionary new)</code>. Then refer to it from any number of classes with <code>poolDictionaries: 'MyPool'</code>. It is common for a class not have any pool dictionaries.</p><p>All classes are global and there is no namespacing. Class names are added to the global variable <code>Smalltalk</code> which is a <code>SystemDictionary</code>. This requires all class names to be unique. Typically a common prefix, perhaps 2 or 3 uppercase letters, is added to a set of related class names in order to make the unique. Lack of namespacing is seen by some as a weakness of Smalltalk.</p><p>All classes inherit from one other class, except <code>Object</code> which is the highest superclass of all classes.</p><p>Instance variables can only be directly accessed by methods in the same class. To expose them outside the class, add getter and setter (optional) methods. For example, if <code>score</code> is an instance variable then the following is a getter method for it. By convention, the name of getter and setter methods is the same as the name of the associated instance variable, but this is not required.</p><pre class="language-smalltalk"><code class="language-smalltalk">score<br>    <span class="token operator">^</span>score<br><br>score<span class="token punctuation">:</span> aNumber<br>    score <span class="token operator">:=</span> aNumber</code></pre><p>As shown above, another convention is for variables associated with keyword messages to indicate their expected type.</p><p>To find a class without needing to know its class category:</p><ul><li>Press shift-return OR hover over the top, first column in a System Browser and press cmd-f.</li><li>Enter part of the class name.</li><li>Select a class name from the popup list that appears.</li><li>If shift-return was pressed, a new System Browser will open to display the selected class. If cmd-f was pressed in an existing System Browser, the selected class will be displayed there.</li></ul><h3 id="accessor-methods" tabindex="-1">Accessor Methods</h3><p>&quot;Getter methods&quot; allow instance or class variable values to be accessed from outside the class that defines them.</p><p>&quot;Setter methods&quot; allow instance or class variables to be modified from outside the class the defines them.</p><p>Suppose a class <code>Dog</code> has the instance variable <code>breed</code>. The following accessor methods can be implemented:</p><pre class="language-smalltalk"><code class="language-smalltalk">breed<br>    <span class="token operator">^</span>breed<br><br>breed<span class="token punctuation">:</span> aString<br>    breed <span class="token operator">:=</span> aString</code></pre><p>Accessor methods for all instance variables in a class can be generated by right-clicking the class name in a System Browser and selecting &quot;more...create inst var accessors&quot;.</p><h2 id="objects" tabindex="-1">Objects</h2><p>Code and data are both represented by objects. Code can be described by a method or block, both of which are kinds of objects.</p><p>Objects are created by sending a message to a class. In addition, some kinds of objects, such as numbers, strings, and arrays, can be created from a literal syntax.</p><p>Every class supports the class method <code>new</code>, which creates and returns a new instance of the class. If the class defines the instance method <code>initialize</code>, the <code>new</code> method will call it. The <code>initialize</code> method typically initializes each of the instance variables of the object.</p><p>Classes are also represented by objects. Every class object inherits from <code>Class</code>, which inherits from <code>ClassDescription</code>, which inherits from <code>Behavior</code>. The <code>Behavior</code> class defines the instance method <code>new</code> which contains the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">    <span class="token operator">^</span> <span class="token keyword">self</span> basicNew initialize<span class="token punctuation">.</span></code></pre><p>Every class also supports the method <code>basicNew</code> which is similar to the <code>new</code> method, but does not call the instance method <code>initialize</code>.</p><p>Let's look at an example <code>Rect</code> class with instance variables <code>height</code> and <code>width</code>.</p><p>We can define the class method <code>height:width:</code> that provides an alternate way to create objects as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth</code></pre><p>We can then define the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    height <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> <span class="token number">1</span><br><br>setHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    height <span class="token operator">:=</span> aHeight<span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> aWidth<br><br>area<br>    <span class="token operator">^</span>height <span class="token operator">*</span> width</code></pre><p>The <code>setHeight:width:</code> method should be in the &quot;private&quot; category to indicate that it is not meant to invoked from outside this class.</p><p>We can use the <code>Rectangle</code> class as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">r1 <span class="token operator">:=</span> Rect <span class="token keyword">new</span><span class="token punctuation">.</span><br>Transcript show<span class="token punctuation">:</span> r1 area<span class="token punctuation">.</span> <span class="token comment">"1"</span><br><br>r2 <span class="token operator">:=</span> Rect height<span class="token punctuation">:</span> <span class="token number">2</span> width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>Transcript show<span class="token punctuation">:</span> r2 area<span class="token punctuation">.</span> <span class="token comment">"6"</span></code></pre><p>To determine the class of an object, send it the <code>#class</code> unary message. For example, <code>19 class</code> returns <code>SmallInteger</code>.</p><p>Variables defined in a Workspace hold references to their object values. It may be necessary to close a Workspace in order to trigger garbage collection of those objects.</p><p>Some classes such as <code>Morph</code> implement a <code>delete</code> method. To delete all instances of such classes, enter the following in Workspace and &quot;Do it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk">SomeClass allInstancesDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:obj</span> <span class="token punctuation">|</span></span> obj delete <span class="token punctuation">]</span></code></pre><h3 id="immutability" tabindex="-1">Immutability</h3><p>A class can enforce the immutability of its object by simply not implementing any methods that change its instance variable.</p><p>Another option is to use the &quot;Immutability&quot; package so attempts to change any instance variable of a given object wll result in a &quot;ModificationForbidden&quot; window opening that contains a stack trace which indicates where the attempt was made.</p><p>To install the &quot;Immutability&quot; package, enter <code>Feature require: 'Immutability'</code> and &quot;Do it&quot;. Among other things, this package adds the instance method <code>beImmutable</code> to the <code>Object</code> class.</p><p>To enforce a specific object to be immutable, send it the <code>#beImmutable</code> message. For example the <code>Rectangle</code> class described above could have the following class method for creating new instances:</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<span class="token punctuation">;</span> beImmutable<span class="token punctuation">;</span> yourself</code></pre><p>Note the use of <code>yourself</code> to return the current object rather than the return value of the <code>beImmutable</code> method.</p><h3 id="methods" tabindex="-1">Methods</h3><p>Methods are associated with a specific class. Class methods handle messages sent to the class. Instance methods handle messages sent to objects instantiated from the class.</p><p>In binary and keyword methods, parameter variable names typically indicate the expected object type and begin with &quot;a&quot; or &quot;an&quot;. For example, <code>aNumber</code>, <code>aString</code>, or <code>anArray</code>. This works well because the keyword that precedes the parameter variable indicates its meaning. For example, <code>name: aString score: aNumber</code>.</p><p>When multiple parameters have the same data type, a good way to name them is to include their meaning and type in the name. For example, <code>latitude: latNumber longitude: lngNumber</code>.</p><p>Methods that return an object are said to &quot;answer&quot; a value. For example, the instance method <code>asUppercase</code> in the <code>String</code> class contains the comment &quot;Answer a String made up from the receiver whose characters are all uppercase.&quot;</p><p>All methods are public. By convention, methods that should only be used by other methods in the same class are placed in the &quot;private&quot; message category.</p><p>To find a method when its class is not known:</p><ul><li><p>Open the World menu and select Open ... Message Names. This opens a &quot;Message Names&quot; window.</p></li><li><p>Enter any part of a message name and press the return key. For example, entering &quot;nj&quot; will find several methods including the &quot;inject:into:&quot; message that is implemented by the <code>Collection</code> class.</p><p>A list of matching message names will be displayed in the top left pane with the first one selected. A list of classes that implement the selected method will be displayed in the top right pane with the first one selected. The implementation of the selected method will be displayed in the bottom pane.</p></li><li><p>Click another message name to see the classes that implement it.</p></li><li><p>Click another class name to see its implementation of the method.</p></li><li><p>Click the &quot;Browse&quot; button to open a System Browser focused on that method.</p></li></ul><p>The buttons in the &quot;Message Names&quot; window are the same as the buttons &quot;System Browser&quot; windows.</p><p>Squeak Smalltalk supports finding methods by part of their name OR by providing example input and output. To find a method in Squeak Smalltalk:</p><ul><li>Click the &quot;Tools&quot; menu and select &quot;Method Finder&quot;. This opens a &quot;Selector Browser&quot;.</li><li>Enter part of the method name OR an example input, followed by a period, and the expected output.</li><li>Press the return key.</li><li>A list of all matching methods will be displayed.</li><li>Click one of the methods to open a System Browser that shows the method implementation.</li></ul><p>See <a href="https://www.youtube.com/watch?v=cI_yBWdmoeI&list=PLu8vLCSA-4hklsvT9W6ruintbdx_K0DYW&index=11&t=28s" target="_blank">The amazing Squeak Method Finder</a>.</p><p>To add a method to a class:</p><ul><li>Open a System Browser.</li><li>Select the class category of the class to which the method will be added in the top, first pane.</li><li>Select the class in the top, second pane.</li><li>Select the method category in which the method will be added. If no suitable category appears in the list, press cmd-n (new category...) to create a new one. Alternatively, select &quot;-- all --&quot; and assign the method to a category later. In that case the method will be assigned to the &quot;as yet unclassified&quot; category.</li><li>A starting template for a new method definition will appear in the bottom pane.</li><li>Change &quot;messageSelectorAndArgumentNames&quot; to the name of the new method, including any parameter names it uses.</li><li>Modify the comment describing the method.</li><li>Update the list of temporary (local) variable names or delete that line.</li><li>Replace &quot;statements&quot; with the method implementation.</li><li>To associate the method with a different method category, drag its name from the top, fourth pane to the desired method category in the top, third pane.</li></ul><p>For example, try adding the following methods to the <code>Integer</code> class which is in the class category &quot;Kernel-Numbers&quot;.</p><pre class="language-smalltalk"><code class="language-smalltalk">predecessor<br>    <span class="token comment">"Answer the predecessor of this integer."</span><br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token operator">-</span> <span class="token number">1</span><br><br>successor<br>    <span class="token comment">"Answer the successor of this integer."</span><br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token operator">+</span> <span class="token number">1</span></code></pre><p>Superclasses can define methods that subclasses must implement. For example, a class named <code>VShape</code> can define the following method:</p><pre class="language-smalltalk"><code class="language-smalltalk">area<br>    <span class="token comment">"Answer the area of the shape."</span><br>    <span class="token keyword">self</span> subclassResponsibility</code></pre><p>This does not prevent instances of the class from being created, but calling such methods will result in an Error window with the title &quot;My subclass should have overridden {method-name}&quot; will appear.</p><p>The classes <code>VCircle</code> and <code>VRectangle</code> can be defined as subclasses of <code>VShape</code>. If they do not define the <code>area</code> method and that message is sent to an instance, an Error window with the title &quot;My subclass should have overridden #area&quot; will appear.</p><p>To add the missing method from the Error window:</p><ul><li>Click the &quot;Create&quot; button.</li><li>Select a message category for the method.</li><li>Enter its implemenation.</li><li>Press cmd-s to save.</li><li>Press the &quot;Proceed&quot; button to continue running the code at the point of the failed message send.</li></ul><p>The example classes above adds the prefix &quot;V&quot; (first letter of my last name) to their names because the class name `Rectangle is already defined.</p><p>The <code>VCircle</code> class can add the following class method for creating instances:</p><pre class="language-smalltalk"><code class="language-smalltalk">radius<span class="token punctuation">:</span> aNumber<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setRadius<span class="token punctuation">:</span> aNumber</code></pre><p>The <code>VCircle</code> class can add the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">setRadius<span class="token punctuation">:</span> aNumber<br>    radius <span class="token operator">:=</span> aNumber<br><br>area<br>    <span class="token operator">^</span>Float pi <span class="token operator">*</span> radius <span class="token operator">*</span> radius</code></pre><p>A common way to provide constant values is to define class methods that return them. For example, <code>pi</code> is a class method in the <code>Float</code> class.</p><p>The <code>VRectangle</code> class can add the following class method for creating instances:</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth</code></pre><p>The <code>VRectangle</code> class can add the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">setHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    height <span class="token operator">:=</span> aHeight<span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> aWidth<br><br>area<br>    <span class="token operator">^</span>height <span class="token operator">*</span> width</code></pre><p>To delete a method, select its name in the top, fourth pane and press cmd-x (remove method).</p><p>To delete a method category and all the methods in it, select its name in the top, third pane and press cmd-x (remove).</p><p>Both class and instance methods can call themselves recursively.</p><p>Here is an example of a class method from a class I created named <code>Math</code> that calls itself recursively:</p><pre class="language-smalltalk"><code class="language-smalltalk">factorial<span class="token punctuation">:</span> n<br>    <span class="token comment">"Answer the factorial of a given integer."</span><br>    <span class="token operator">^</span><span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span>n <span class="token operator">*</span> <span class="token punctuation">(</span>Math factorial<span class="token punctuation">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>Here is an example of an instance method I added to the <code>Integer</code> class that calls itself recursively. The method <code>factorial</code> already exists in that class and is more efficient than the version below.</p><pre class="language-smalltalk"><code class="language-smalltalk">factorial2<br>    <span class="token comment">"Answer the factorial of this integer."</span><br>    <span class="token operator">^</span><span class="token punctuation">(</span><span class="token keyword">self</span> <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">self</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> factorial2<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>If you edit the name of a method in code editing pane of a System Browser, it will create a copy of the method with the new name. The method with the previous name will still exist and can be deleted. An alternative is to right-click the method in the 4th pane and select &quot;refactorings...rename...&quot;.</p><p>While it is not commonly done, a method can check the types of its arguments and alter its functionality based on those. For example, this class method returns a number that is double what is passed to it. If it is given a <code>String</code> instead of a <code>Number</code>, it converts it to a <code>Number</code> and doubles it. If it is given any other kind of object, it just returns <code>0</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">double<span class="token punctuation">:</span> obj<br>    <span class="token comment">"Answer double the value of the argument."</span><br>    <span class="token punctuation">(</span>obj isKindOf<span class="token punctuation">:</span> Number<span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span> obj <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">(</span>obj isKindOf<span class="token punctuation">:</span> String<span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">[</span> <span class="token operator">^</span> obj asNumber <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">]</span><br>            on<span class="token punctuation">:</span> Error <span class="token comment">"error converting string to number"</span><br>            do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> <span class="token number">0</span><span class="token punctuation">.</span></code></pre><p>Instance and class methods can dynamically added to a class by sending the message <code>#compile:</code> to a class or its metaclass. The argument is a string of Smalltalk code. For example, the following code adds the class method <code>legs</code> and the instance method <code>speak</code> to the <code>Dog</code> class.</p><pre class="language-smalltalk"><code class="language-smalltalk">Dog class compile<span class="token punctuation">:</span> <span class="token string">'legs ^4'</span><span class="token punctuation">.</span><br>Dog compile<span class="token punctuation">:</span> <span class="token string">'speak ''Woof!'' print'</span></code></pre><p>The expression <code>Dog class</code> returns the metaclass of the <code>Dog</code> class and adding a method there makes it a class method.</p><p>The single quotes inside the <code>speak</code> method string are doubled to escape them.</p><p>The new methods will appear in System Browsers.</p><h3 id="primitive-methods" tabindex="-1">Primitive Methods</h3><p>Primitive methods are implemented in the VM, often in a way that is more efficient than what could be achieved in Smalltalk code.</p><p>From the Blue Book ...</p><blockquote><p>All behavior in the system is invoked by messages, however, all messages are not responded to by executing Smalltalk-80 methods. There are about one hundred primitive methods that the Smalltalk-80 virtual machine knows how to perform. Examples of messages that invoke primitives are the <code>+</code> message to small integers, the <code>at:</code> message to objects with indexed instance variables, and the <code>new</code> and <code>new:</code> messages to classes. When <code>3</code> gets the message <code>+ 4</code>, it does not execute a Smalltalk-80 method. A primitive method returns <code>7</code> as the value of the message. The complete set of primitive methods is included in the fourth part of this book, which degcribes the virtual machine. Methods that are implemented as primitive methods begin with an expression of the form <code>&lt;primitive #&gt;</code> where <code>#</code> is an integer indicating which primitive method will be followed. If the primitive fails to perform correctly, execution continues in the Smalltalk-80 method. The expression <code>&lt;primitive #&gt;</code> is followed by Smalltalk-80 expressions that handle failure situations.</p></blockquote><p>In Cuis Smalltalk, the comment at the beginning of the class method <code>whatIsAPrimitive</code> in the <code>Object</code> class contains the following:</p><blockquote><p>When the Smalltalk interpreter begins to execute a method which specifies a primitive response, it tries to perform the primitive action and to return a result. If the routine in the interpreter for this primitive is successful, it will return a value and the expressions in the method will not be evaluated. If the primitive routine is not successful, the primitive 'fails', and the Smalltalk expressions in the method are executed instead. These expressions are evaluated as though the primitive routine had not been called.</p></blockquote><p>From Vanessa Freudenberg, &quot;The VM is mostly written in a subset of Smalltalk called Slang, transpiled to C, then compiled and linked with platform-specific code to create the VM executable.&quot;</p><p>The functionality of specific numbered primitives can differ between VM implementations. To get a sense of typical mappings, see the ones used by SqueakJS in the file <a href="https://github.com/codefrau/SqueakJS/blob/2b9ce0cd94b9ab3cb0aae28052c809b0bd3c14ea/vm.primitives.js#L80" target="_blank">vm.primitives.js</a>. For the OpenSmalltalk version, see the file <a href="https://github.com/OpenSmalltalk/opensmalltalk-vm/blob/Cog/src/spur32.cog/cointerp.c" target="_blank">cointerp.c</a>.</p><p>TODO: Is there a limit of 256 primitive numbers?</p><h2 id="control-flow" tabindex="-1">Control Flow</h2><p>Control flow is provided through message passing.</p><h3 id="conditional-logic" tabindex="-1">Conditional Logic</h3><p>The <code>Boolean</code> class in the <code>Kernel-Objects</code> category contains the methods <code>#ifTrue</code>, <code>#ifFalse</code>, <code>#ifTrue:ifFalse</code>, and <code>#ifFalse:ifTrue</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">result <span class="token operator">:=</span> a <span class="token operator">&lt;</span> b ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'less'</span><span class="token punctuation">]</span> ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'more'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The values for <code>ifTrue</code> and <code>ifFalse</code> can be literal values, variables, or blocks with no parameters. The messages listed above just send the <code>value</code> message to the argument value. Typically the <code>value</code> message is used to evaluate a no-arg block. However, the <code>Object</code> class defines the <code>value</code> method to just return <code>self</code>, which is what enables any kind of object to be used.</p><p>When blocks are used, the compiler is able to optimized the code by inlining the code within the block and avoiding the need to send the <code>value</code> message. So it is more efficient to use blocks.</p><p>The <code>Object</code> instance method <code>caseOf</code> is similar to the <code>switch</code> statement in other programming languages.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">color <span class="token operator">:=</span> <span class="token string">'blue'</span><span class="token punctuation">.</span><br>assessment <span class="token operator">:=</span> color caseOf<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'hot'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'warm'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'blue'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'cold'</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><h3 id="iteration" tabindex="-1">Iteration</h3><p>The <code>timesRepeat</code> method in the <code>Integer</code> class can be used to evaluate a block a given number of times. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">3</span> timesRepeat<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Ho'</span> print<span class="token punctuation">]</span></code></pre><p>See the &quot;Collections&quot; section for messages that iterate over a collection.</p><p>See the &quot;Blocks&quot; section for messages that use a block as an iteration condition.</p><h2 id="images" tabindex="-1">Images</h2><p>A Smalltalk image contains a collection of all objects in the development environment. Everything in Smalltalk is represented by an object, including class definitions (yours and those provided), GUI elements in the development environment, and objects created from Workspaces.</p><p>An image can be used to manage collections of data, perhaps held in <code>Dictionary</code> objects, as an alternative to using a database.</p><p>One way to start an image is to double-click its file.</p><p>To save any changes, open the World menu and select &quot;Save Image&quot;, &quot;Save Image as&quot;, or &quot;Save Image and Quit&quot;. The changes include open windows, their position and size, selections made (ex. System Browser top pane selections), and their content (ex. Workspaces).</p><p>To quit without saving changes, open the World menu and select &quot;Quit without saving&quot;. If there are any unsaved changes, a confirmation popup will appear that says &quot;Some ChangeSets for Cuis core have unsaved changes. If you continue, they would be lost. Do you really want to exit Cuis without saving the image?&quot; Click &quot;Yes&quot; or &quot;No&quot;.</p><p>While the classes and methods provided by a base image can be modified, it is not a good idea to do so because there won't be an easy way to apply those changes to a fresh image.</p><p>It is better to create new subclasses of provided classes that override methods and save the subclasses in a new package or &quot;file out&quot;. Doing this enables installing the new package or file out in a fresh image.</p><p>There are three ways to discover the file path of the current image:</p><ol><li>Hover over the task bar at the bottom of the World window. This opens a Text Editor window that displays the current version of Cuis Smalltalk, the latest update number, and the file path of the current image.</li><li>Open the World menu and select Help...About this System... This opens a Text Editor window that displays a description of Cuis Smalltalk. It also displays a popup containing the same information as described above.</li><li>Open a Workspace, enter <code>DirectoryEntry smalltalkImageDirectory</code>, and &quot;Print it&quot;. This outputs the directory path of the current image without its file name.</li></ol><h2 id="help" tabindex="-1">Help</h2><p>To get basic help on a token or an expression in any window, select it, right-click, and select explain. This displays a popup containing help text. If the selection is a literal value, its type is displayed. If the selection is a class name, its category is displayed. If the select is a message, a list of classes that implement it are displayed.</p><p>The World menu contains a Help submenu which contains the following:</p><ul><li><p>About this System ...</p><p>This was described at the end of the previous section.</p></li><li><p>Terse Guide to Cuis</p><p>An excellent source of categoried code snippets for performing a large number of common tasks.</p><p>If the prompt &quot;The Terse Guide is not loaded. Would you like me to load it for you now?&quot; appears, select &quot;Yes&quot;. The following window will open.</p><p><img alt="Cuis Terse Guide" src="/blog/assets/cuis-terse-guide.jpg?v=1.1.1"></p><p>Click a topic to see example code. Select code and &quot;Do it&quot; or &quot;Print it&quot; to experiment. Modify the code as desired. Changes will not be saved, so it is safe to experiment.</p></li><li><p>Class Comment Browser</p><p>The first time this is selected, a message will be displayed stating that it requires cloning the <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Tools" target="_blank">Cuis-Smalltalk-Tools</a> repository. After this is done, selecting this menu item again will ask for permission to install the tool. After this is done, selecting this menu item yet again will open a Class Comment Browser.</p><p>The left pane displays an alphabetical list of class names where each name is preceded by a disclosure triangle. Clicking a class name displays its first comment in the right pane. Clicking a disclosure triangle expands the class to show a numbered list of comments found in the source code for the class. Clicking any of those displays the comment text in the right pane.</p><p>It's probably more useful to open a System Browser, find a class of interest, an view the comments there.</p></li><li><p>Code management in Cuis</p><p>Selecting this opens a window titled &quot;Managing your code in Cuis&quot;. That offers the following advice:</p><blockquote><p>Code that is not part of the Cuis Core image itself, like applications, frameworks and libraries, should be stored in Packages. New code that are meant as patches, fixes or additions; that could eventually become part of Cuis itself, is not part of any Package, and is therefore automatically stored in ChangeSets.</p></blockquote></li><li><p>Using GitHub to host Cuis packages</p><p>This opens a window containing text that explains the recommended development process for managing external packages in Cuis Smalltalk using GitHub.</p><p>For more detail see <a href="https://github.com/Cuis-Smalltalk/Learning-Cuis/blob/master/SamplePackage1.md" target="_blank">Making a Simple Package for Cuis</a>.</p></li><li><p>Editor keyboard shortcuts</p><p>This opens a window containing text that describes all the keyboard shortcuts supported by Cuis Smalltalk for editing text, including code.</p><p>For example, to rename a parameter or local variable in a method, select it, press cmd-shift-r, and enter the new name.</p></li><li><p>Useful Expressions</p><p>This opens a window that contains useful expressions. To execute one, selecte it and &quot;Do it&quot; or &quot;Print it&quot;.</p></li><li><p>VM Statistics</p><p>This opens a window that displays VM Statistics including uptime, memory usage, and garbage collection (GC) statistics.</p></li><li><p>Space Left</p><p>This opens a popup that displays remaining memory. It may only be useful for debugging issues with running out of memory.</p></li></ul><h2 id="other-preferences" tabindex="-1">Other Preferences</h2><p>Many supported preferences are not directly on the Preferences submenu of the World menu. To access those, click &quot;All preferences...&quot; which opens a Preferences window. Click a preference symbol in the left pane to display its current value in the right pane.</p><p>To change the value of a preference:</p><ul><li>Select it in the left pane.</li><li>Press cmd-i (inspect) to open an Inspect window.</li><li>In the bottom pane, enter <code>value := {new-value}</code> and &quot;Do it&quot;.</li><li>Close the Inspect window.</li><li>Close the Preferences window.</li></ul><h2 id="optional-packages" tabindex="-1">Optional Packages</h2><p>The shell script <code>clonePackageRepos.sh</code> clones many commonly used Git repositories that define optional packages. Cloning those enables installing the packages they define.</p><p>The repositories that this clones include:</p><ul><li>AMQP</li><li>AnimatedGIF</li><li>Cairo</li><li>Calendars</li><li>CodeExamples</li><li>Cuis-Smalltalk</li><li>Cuis-Smalltalk-Historical</li><li>Cuis-Smalltalk-Regex</li><li>Cuis-Smalltalk-Tools</li><li>Cuis-Smalltalk-UI</li><li>Cuis-Website</li><li>EnhancedText</li><li>Erudite</li><li>firmata</li><li>Games</li><li>GeographicInformationSystems</li><li>Learning-Cuis</li><li>Machine-Learning</li><li>Measures</li><li>Morphic</li><li>Numerics</li><li>OSProcess</li><li>Parsers</li><li>StyledTextEditor</li><li>SVG</li><li>VMMaker</li></ul><h2 id="windows" tabindex="-1">Windows</h2><p>You will be opening and using many windows in the development environment. To open a window, open the World menu, hover over &quot;Open&quot; to display a submenu of window types, and click one of them.</p><p>To close a window, click its red circle button on the left side of its title bar. Alternatively, move the mouse cursor over the window and press cmd-w.</p><p>The available windows, in the order listed, include:</p><ul><li>Text Editor: for editing text other than Smalltalk source code</li><li>Workspace: for experimenting with code</li><li>Browser (a.k.a System Browser): for examining and editing code</li><li>Message Names: for finding classes that implement a given method</li><li>Transcript: displays output</li><li>Installed Packages: lists all installed packages and allows more to be installed</li><li>Change Sorter: TODO: Describe this.</li><li>Process Browser: displays the state of all Smalltalk processes and enables terminating them</li><li>Emergency Evaluator: TODO: Describe this.</li><li>File List: file explorer for viewing all local files and editing text files</li><li>SUnit Test Runner: for running unit tests and viewing the results</li></ul><p>Of these, the most frequently used windows tend to be Workspace, Transcript, and Browser.</p><p>To tile all the open windows, open the World menu and select Windows...Tile open windows.</p><p>To refresh all the windows after code changes that affect them (or if the display renders incorrectly for some reason), open the World menu and select &quot;Windows...Restore all Windows&quot;. This does not update windows to use a newly selected theme.</p><h3 id="editing-code" tabindex="-1">Editing Code</h3><p>Many kinds of windows support entering Smalltalk code. The syntax highlighting described in the table below is provided.</p><table><thead><tr><th>Token Type</th><th>Styling</th></tr></thead><tbody><tr><td>class name</td><td>black and bold</td></tr><tr><td>comment</td><td>green</td></tr><tr><td>instance variable</td><td>purple</td></tr><tr><td>keyword</td><td>red</td></tr><tr><td>message name</td><td>blue</td></tr><tr><td>string</td><td>purple</td></tr><tr><td>symbol</td><td>blue and bold</td></tr></tbody></table><p>In any text editing pane, right-click and select &quot;Help...&quot; to see a list of the supported key bindings.</p><p>To select arbitrary text, drag over it. To select a word, double-click it. To selet an entire line, triple-click it.</p><p>To toggle surrounding selected text with a given delimiter character, press cmd and the starting delimiter character which can be <code>'</code>, <code>&quot;</code>, <code>(</code>, <code>[</code>, or <code>{</code>. Pressing cmd-&quot; is useful to toggle whether selected code commented/uncommented.</p><p>To change the indentation of a block of code, select all the lines and press tab to increase indentation or shift-tab to decrease it.</p><p>To get help on a token, select it, right-click it, and select &quot;Explain&quot;. A popup will appear. If the token is a literal value, it give its class name. If the token is a class name, it will give its class category. If the token is a message name, it will list the classes that implement it.</p><h3 id="inspect-windows" tabindex="-1">Inspect Windows</h3><p>Inspect windows display all the instance variables of a specific object. To open one, select an object reference or place the cursor immediately after it and press cmd-i (Inpect it).</p><p><img alt="Cuis Inspect window" style="width: 40%" src="/blog/assets/cuis-inspect-window.png?v=1.1.1"></p><p>Clicking an item in the top left pane, displays related information in the top right pane.</p><ul><li>Click &quot;self&quot; to display the class name of the object.</li><li>Click &quot;all inst vars&quot; to display a list of all instance variables and their values.</li><li>Click the name of an instance to display its current value.</li></ul><p>The bottom pane can be used to enter and execute Smalltalk expressions. Instance variables can be directly accessed and where <code>self</code> refers to the object being inspected. For example, when the object is a morph:</p><ul><li>To get the value of the <code>color</code> instance variable, enter <code>color</code> or <code>self color</code> and press cmd-p (Print it).</li><li>To set the value of the <code>color</code> instance variable, enter <code>color := Color red</code> or <code>self color: Color red</code> and press cmd-d (Do it).</li></ul><p>Inspector windows are live, so changes made to the instance variables are reflected.</p><p>Let's walk through an example:</p><ol><li>Open the World menu and select &quot;New Morph...&quot;.</li><li>Select &quot;Basic...Boxed Morph&quot;. An orange rectangle will appear, attached to the mouse cursor.</li><li>Move to where you want to place it and click to drop it.</li><li>cmd-click on the morph to open its halo.</li><li>Click the blue button on the top row.</li><li>Select &quot;debug...inspect morph&quot; to open an Inspect window for the object that represents that morph.</li><li>Click the <code>color</code> instance variable and note that the value is a <code>Color</code> object.</li><li>Select the name &quot;Color&quot; and press cmb-b (Browse it) to open a System Browser focused on the <code>Color</code> class.</li><li>Click the &quot;class&quot; button to see a list of the class methods in the <code>Color</code> class.</li><li>Click the method category &quot;named colors&quot; and note that one of the methods is &quot;red&quot;.</li><li>Back in the Inspect window, click in the bottom pane.</li><li>Enter <code>color := Color red</code> and &quot;Do it&quot;.</li><li>Note that the value displayed in the top right pane updates, but the fill color of the morph does not update.</li><li>Enter <code>self color: Color red</code> and &quot;Do it&quot;. This time the value displayed in the top right pane updates AND the fill color of the morph updates. The reason is that the <code>color:</code> method in the <code>BoxedMorph</code> class sends the <code>#redrawNeeded</code> message to <code>self</code> which triggers the morph to redraw itself with the updated color.</li></ol><h3 id="explore-windows" tabindex="-1">Explore Windows</h3><p>Explore windows display an object tree starting at a specific object. Select an object reference or place the cursor immediately after it and press cmd-shift-i (Explore it). Click the disclosure triangles to drill down into instance variable values.</p><p>Use the bottom pane to enter and execute Smalltalk expressions where <code>self</code> refers to the selected object in the top pane.</p><p><img alt="Cuis Explore window" style="width: 40%" src="/blog/assets/cuis-explore-window.png?v=1.1.1"></p><h3 id="system-browsers" tabindex="-1">System Browsers</h3><p>To open a System Browser, open the World menu and select Open...Browser. Alternatively, type a class name (ex. String) in a Workspace window and press cmd-b (Browse it) to open a System Browser with that class already selected.</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-the-system-Browser.html" target="_blank">A brief introduction to the System Browser</a>.</p><h4 id="system-browser-ui" tabindex="-1">System Browser UI</h4><p>System Browsers contain four rows.</p><ul><li><p>The first (top) row contains four panes for displaying and operating on lists of class categories, classes, message categories, and methods. Clicking an item toggles whether it is selected.</p><p>Selecting a class category in the first pane displays the classes in that category in the second pane. For example, the class <code>String</code> is in the class category <code>Kernel-Text</code>.</p><p>Selecting a class in the second pane displays message categories for the class in the third pane. Example message category names include &quot;accessing&quot;, &quot;comparing&quot;, &quot;copying&quot;, &quot;converting&quot;, &quot;enumerating&quot;, and &quot;printing&quot;. There is a separate set of method categories for instance methods and class methods.</p><p>Selecting a message category (a.k.a protocol) in the third pane displays methods in that category in the fourth pane. The top message category, provided by default, is &quot;-- all --&quot;. If no message category is selected, or if &quot;-- all --&quot; is selected, all the methods in all categories are listed.</p><p>The items in these panes are not sorted alphabetically by default. To sort them, hover over a pane and press cmd-shift-a (alphabetize). TODO: The menu shows the shortcut as just &quot;a&quot;. Is that a bug?</p><p>To scroll any list to the first item that begins with a given letter, over over the lsit and type the letter.</p></li><li><p>The second row displays a message describing the item selected in the top row.</p><table><thead><tr><th>Item Type</th><th>Description</th></tr></thead><tbody><tr><td>class category</td><td># of classes in the category, total # of instance and class methods</td></tr><tr><td>class</td><td># of instance and class methods defined in the class</td></tr><tr><td>method category</td><td># of methods (TODO: Why labelled as &quot;messages&quot;?)</td></tr><tr><td>method</td><td># of sends, implementors, and senders</td></tr></tbody></table></li><li><p>The third row contains a series of buttons that can be clicked to open other windows that show information related to the selected item. One exception is the &quot;show...&quot; button, described below.</p><p>The &quot;browse&quot; button opens a new System Browser focused on the currently selected class, message category, or method. This enables maintaining the view in the current System Browser and navigating somewhere relative to that location in a new System Browser.</p><p>The &quot;senders&quot; button opens a &quot;Senders of&quot; window that lists all the methods that send a message to invoke the selected method. Selecting one displays its implementation in the bottom pane. If no method is selected, a text entry will be displayed to prompt for a method selector.</p><p>The &quot;implementors&quot; button opens an &quot;Implementors of&quot; window that lists all the classes that implement the selected method. Selecting one displays its implementation in the bottom pane.</p><p>The &quot;versions&quot; button opens a &quot;Recent versions&quot; window that displays a list of time stamps for recent versions of the method. TODO: Does this only include changes made since the current image was opened? Clicking a time stamp displays that version of the code in the bottom pane.</p><p>If one of the buttons &quot;lineDiffs&quot;, &quot;wordDiffs&quot;, &quot;linePrettyDiffs&quot;, or &quot;wordPrettyDiffs&quot; is pressed, it will show differences between that version and the current version. The two &quot;line diff&quot; options show whole line differences. The two &quot;word diff&quot; options show individual word differences. The two &quot;pretty&quot; options show the code in its formatted form. To stop showing differences, click the selected diff button to toggle it off.</p><p>Code added by the selected version will be in green. Code removed by the selected version will be in red. Click the &quot;revert&quot; button to restore that version as the current version of the code. The &quot;compare to current&quot; button displays the same information as the lineDiffs button, but in a new window.</p><p>The &quot;inheritance&quot; button opens an &quot;Inheritance of&quot; window that shows the superclass methods of the same name that are invoked by the selected method, all the way up the inheritance hierarchy.</p><p>The &quot;hierarchy&quot; button opens a Hierarchy Browser that shows the inheritance hierarchy of the current class. This includes all superclass and subclasses of the current class.</p><p>The &quot;inst vars&quot; button displays a popup list containing all the instance variables in the current class. Clicking one of them opens an &quot;Accesses to&quot; window that lists all the methods that use the instance variable it its top pane. Clicking on a method displays its code in the bottom pane.</p><p>The &quot;class vars&quot; button displays a popup list containing all the class variables in the current class. Clicking one of them opens a new &quot;Users of&quot; window that lists all the methods that use the class variable in its top pane. Clicking on a method displays its code in the bottom pane (fourth row).</p><p>The &quot;show...&quot; button displays a popup list of ways the selected item can be displayed in the bottom pane. Each option is represented by a checkbox, but only one can be selected.</p><p>The default option is &quot;source&quot; which merely displays the source code of the selected method. This is typically the desired choice.</p><p>Selecting &quot;documentation&quot; only displays the signature and comment for the selected item. When there is no commment, it displays &quot;Has no comment&quot;.</p><p>Seleting &quot;prettyPrint&quot; displays the code for a method in a nicely formatted way, but doesn't actually modify the code. I wish it did.</p><p>Selecting &quot;lineDiffs&quot;, &quot;wordDiffs&quot;, &quot;linePrettyDiffs&quot;, or &quot;wordPrettyDiffs&quot; has the same functionality as described earlier for &quot;Recent versions&quot; windows.</p><p>Selecting &quot;decompile&quot; displays code that is similar to the source code, but variable names are changed. Parameter variable names are replaced by <code>arg1</code>, <code>arg2</code>, and so on. Local variable names are replaced by <code>temp1</code>, <code>temp2</code>, and so on. It's not clear when this would be useful.</p><p>Selecting &quot;byteCodes&quot; displays the byte codes generated by the method source code. This could be useful for evaluating the efficency of the code.</p></li><li><p>The fourth row displays information about the selected item based on the checkbox that is selected for the &quot;show...&quot; button. By default it displays Smalltalk code for the selected item and can be used to edit the code. When there are unsaved code changes in this pane, a thin, red border appears around it. Press cmd-s (Accept) to save the changes and the thin, red border will disappear.</p></li></ul><h4 id="code-formatting" tabindex="-1">Code Formatting</h4><p>To automatically display formatted code, enter the following in a Workspace and &quot;Do it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk">Preferences at<span class="token punctuation">:</span> <span class="token symbol">#browseWithPrettyPrint</span> put<span class="token punctuation">:</span> <span class="token boolean">true</span></code></pre><p>This does not take effect in existing windows such as System Browsers, but does in newly opened windows. Pretty printing is applied when code is initially displayed, and again every time it is saved. However, it does not affect the actual use of whitespace, so code written to files in a fileOut or package is not affected. I wish it was.</p><p>An alternative to setting the <code>#browseWithPrettyPrint</code> preference is to click the &quot;show...&quot; button in System Browsers and select &quot;prettyPrint&quot;.</p><p><img alt="Cuis System Browser" style="width: 100%" src="/blog/assets/cuis-system-browser-window.png?v=1.1.1"></p><h4 id="working-with-classes" tabindex="-1">Working with Classes</h4><p>To create a new class:</p><ul><li><p>Select a class category.</p><p>If the desired class category is already selected and a class in that category is selected, click it so it is deselected. The bottom pane will now contain the following message send template:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#NameOfSubclass</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'{SelectedClassCategory}'</span></code></pre></li><li><p>To inherit from a class other than <code>Object</code>, change that to another class name.</p></li><li><p>Change &quot;NameOfSubclass&quot; to the name of the new class.</p></li><li><p>Add desired instance and class variable names as space-separated strings.</p></li><li><p>Save by pressing cmd-s (Accept).</p></li></ul><p>To delete a class, select it and press cmd-x (Remove it). A confirmation popup will appear. If the class has subclasses, a second popup will appear to confirm that you also wish to delete those classes.</p><h4 id="working-with-methods" tabindex="-1">Working with Methods</h4><p>To create a new method:</p><ul><li><p>Click the &quot;instance&quot; or &quot;class&quot; button to indicate the scope of the method.</p></li><li><p>Select a method category.</p><p>This can be &quot;-- all --&quot;, &quot;as yet unclassified&quot;, or any other method category. To create new category, move the mouse cursor over the method category pane, press cmd-n (new category...), and enter the name of the new category.</p><p>The bottom pane will now contain the following method template:</p><pre class="language-smalltalk"><code class="language-smalltalk">messageSelectorAndArgumentNames<br>    <span class="token comment">"comment stating purpose of message"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">temporary</span> <span class="token variable">variable</span> <span class="token variable">names</span> <span class="token punctuation">|</span></span><br>    statements</code></pre></li><li><p>Modify the code template to define the new method.</p></li><li><p>Save by pressing cmd-s (Accept).</p></li></ul><p>To move a method from the class side to the instance side or vice-versa, right-click the method name in the top fourth pane and select &quot;refactorings...move to instance/class methods&quot;.</p><p>To delete a method from a class, select it and press cmd-x (Remove it). Then select &quot;Remove it&quot; or &quot;Remove, then browse senders&quot;. The latter option allows the senders to be modified.</p><h4 id="refactorings" tabindex="-1">Refactorings</h4><p>To refactor a method or code, select it, right-click, and select an option from the &quot;refactorings&quot; submenu.</p><p>For methods the options include:</p><ul><li>rename... (cmd-shift-r)</li><li>change keyword order...</li><li>add parameter...</li><li>remove parameter...</li><li>inline method...</li><li>move to instance/class method</li><li>push up</li><li>add in superclass as subclassResponsibility</li><li>push down to subclasses</li><li>push down to one subclass</li></ul><p>To rename a method without opening the refactorings menu, select the method and press cmd-shift-r.</p><p>For selected code the options include:</p><ul><li>Extract as Parameter...</li><li>Extract Temporary...</li><li>Extract Method...</li><li>Inline Temporary...</li><li>Inline Method...</li><li>Temporary to Instance Variable</li><li>Push Up Instance Variable</li><li>Push Down Instance Variable</li></ul><h3 id="search-browser" tabindex="-1">Search Browser</h3><p>There is no provided way to search for code that contains a given string. However, Mariano Montone implemented a &quot;Search Browser&quot; that provides this.</p><p>To install it, clone the repository <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Tools" target="_blank">Cuis-Smalltalk-Tools</a>, open a Workspace, enter <code>Feature require: 'SearchBrowser'</code>, and &quot;Do it&quot;. This adds the World menu item &quot;Open...Search Browser&quot;. It also adds menu items to the menu that appears in a System Browser when you right-click a class name in the top second pane. The new menu items are &quot;search in class...&quot;, &quot;search in class hierarchy...&quot;, and &quot;search in class protocol...&quot;. These all open a Search Browser with a different search scope.</p><p>Enter search text in the input to the right of the &quot;Search&quot; button at the bottom. The scope and characteristics of the search can be specified with menus and a button at the bottom.</p><p>The &quot;in:&quot; menu has the options &quot;source&quot; (default), &quot;message name&quot;, and &quot;string literal&quot;.</p><p>The &quot;of:&quot; menu has the options &quot;class hierarchy&quot; (default), &quot;class protocol&quot;, &quot;class&quot;, &quot;system category&quot;, and &quot;every class&quot;.</p><p>The &quot;using:&quot; menu has the options &quot;substring matcher&quot; (default) and &quot;wild matcher&quot;. When using &quot;wild matcher&quot;, the <code>CharacterSequence</code> <code>match:</code> method is used. Comments in that method provide many examples. The <code>#</code> wildcard character matches any single character and the <code>*</code> character matches any sequence of characters.</p><p>The &quot;Case sensitive&quot; button toggles whether the search will be case sensitive.</p><p>Methods whose code matches the search will appear in the top pane. Select a method name to see its implementation in a lower pane.</p><h3 id="hierarchy-browsers" tabindex="-1">Hierarchy Browsers</h3><p>When a class is selected in a System Browser, the list of classes in the second pane only includes those defined in the selected class category. To also see the class hierarchy of a selected class, open a Hierarchy Browser by pressing cmd-h (browse hierarchy).</p><p>This window is similar to a System Browser, but it omits the class categories pane and displays the complete class hierarchy of the selected class.</p><p>Here's an example of a Hierarchy Browser for the <code>Array</code> class:</p><p><img alt="Cuis Hierarchy window" style="width: 40%" src="/blog/assets/cuis-hierarchy-window.png?v=1.1.1"></p><h3 id="protocol-browsers" tabindex="-1">Protocol Browsers</h3><p>When a class is selected in a System Browser, only the methods defined directly in that class are displayed. To also see methods defined in superclasses, open a Protocol window by pressing cmd-p (browse protocol).</p><p>This window is similar to a System Browser, but it omits the class categories pane and displays all instance methods available on instances of the class. Methods defined directly on the class are in bold, and methods defined in superclasses are not.</p><p>Here's an example of a Protocol window for the <code>Array</code> class:</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><h3 id="text-editor-windows" tabindex="-1">Text Editor Windows</h3><p>&quot;Text Editor&quot; windows enable editing text files. They support changing the font size, color, and style of selected text. They are not intended to be used to edit Smalltalk source code.</p><p>The text can be saved in external text files, but all the formatting is discarded and only the raw text is saved.</p><h3 id="message-names-windows" tabindex="-1">Message Names Windows</h3><p>These windows enable searching for method implementations whose name contains a given substring. For example, enter &quot;select:&quot; to find all the classes that have a method whose names end with that. The results include <code>Bag</code>, <code>Collection</code>, <code>Dictionary</code>, <code>Heap</code>, <code>OrderedCollection</code>, <code>SequenceableCollection</code>, and <code>SortedCollection</code>. Click one the class names to see the method implementation.</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><h3 id="messagenotunderstood-errors" tabindex="-1">MessageNotUnderstood Errors</h3><p>A <code>MessageNotUnderstood</code> error is signaled when a message is sent to an object and no method is found in the class of the object or any of its superclasses that answer the message.</p><p>Message sends are processed in the following way:</p><ul><li>If the receiver class implements a compatible method, that is called.</li><li>Otherwise the superclasses of the receiver class are searched in order from nearest to <code>Object</code> for a compatible method.</li><li>If the search makes it to the <code>Object</code> class and no compatible method is found, the <code>#doesNotUnderstand:</code> message with a <code>Message</code> argument is sent to the original receiver,.</li><li>If the receiver class implements the <code>doesNotUnderstand:</code> method, that is called.</li><li>Otherwise the superclasses of the receiver class are searched in order from nearest to <code>Object</code> for the <code>doesNotUnderstand:</code> method.</li><li>If the search makes it to the <code>Object</code> class, that implements the <code>doesNotUnderstand:</code> method to signal a <code>MessageNotUnderstood</code> error, which results in a Debugger window opening. That window that includes a stack trace which describes the stack at the time the original message was sent.</li></ul><p>The <code>doesNotUnderstand:</code> method is passed a <code>Message</code> object which has the accessor methods <code>selector</code> (returns a <code>String</code>) and <code>arguments</code> (returns an <code>Array</code>). Those can be used to determine whether and how to answer the message. If the message will not be handled, the <code>#doesNotUnderstand:</code> message should be resent to the superclass. For example, the following implementation of <code>doesNotUnderstand:</code> could be implemented in a class that represents a dog. This is a contrieved example because it would be better to directly implement a <code>bark:</code> method.</p><pre class="language-smalltalk"><code class="language-smalltalk">doesNotUnderstand<span class="token punctuation">:</span> aMessage<br>    <span class="token punctuation">(</span>aMessage selector <span class="token operator">=</span> <span class="token string">'bark:'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">count</span> <span class="token punctuation">|</span></span><br>        count <span class="token operator">:=</span> aMessage arguments first<span class="token punctuation">.</span><br>        count isNumber ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token string">'Woof! '</span> repeat<span class="token punctuation">:</span> count<span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token operator">^</span> <span class="token keyword">nil</span> <span class="token punctuation">]</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage</code></pre><p>There is no method in the the <code>String</code> class that answers the message <code>#repeat:</code>, so one must be implemented in order for the example above to work. One possible implementation is the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">repeat<span class="token punctuation">:</span> anInteger<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">stream</span> <span class="token punctuation">|</span></span><br>    stream <span class="token operator">:=</span> String writeStream<span class="token punctuation">.</span><br>    anInteger timesRepeat<span class="token punctuation">:</span> <span class="token punctuation">[</span>stream nextPutAll<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span>stream contents</code></pre><p><img alt="Cuis MessageNotUnderstood window" style="width: 85%" src="/blog/assets/cuis-messagenotunderstood-window.png?v=1.1.1"></p><h3 id="debug-windows" tabindex="-1">Debug Windows</h3><p>To debug code, select one or more lines in a Workspace window and press cmd-shift-d (Debug it). A Debug window will appear.</p><p>TODO: Describe other ways to open a Debug window. TODO: Is adding <code>self halt</code> to a method and then running it another way?</p><p><img alt="Cuis Debug window" style="width: 100%" src="/blog/assets/cuis-debug-window.png?v=1.1.1"></p><p>Click the &quot;Into&quot; button to begin executing the code. The &quot;Proceed&quot;, &quot;Restart&quot;, &quot;Into&quot;, &quot;Over&quot; buttons function as expected if you have used other debuggers.</p><p>To run up to a specific location in the code, click to place the cursor where execution should stop and click the &quot;Run to Cursor&quot; button.</p><p>The in-scope variables are listed in the third pane of the bottom row. Click a variable name to see its current value in the fourth pane of the bottom row. To change the value of a variable, edit it where displayed and press cmd-s (Accept).</p><p>Click the &quot;Where&quot; button to highlight the next message to be sent in the code.</p><p>The Debug window will close when the end of the selected code is reached.</p><h3 id="change-sorter-windows" tabindex="-1">Change Sorter Windows</h3><p>Change Sorters summarize all the currently unsaved changes. The first row left pane displays a list of change set names. Selecting one displays a list of modified classes in the first row right pane. Selecting a modified class displays a list of modified methods in the second row. Selecting a modified method displays its implementation or a description of the change in the bottom row.</p><p>Right-click a change set, class, or method name to get a context menu of operations that can be performed on it.</p><p><img alt="Cuis Change Sorter" style="width: 100%" src="/blog/assets/cuis-change-sorter.png?v=1.1.1"></p><h3 id="file-list" tabindex="-1">File List</h3><p>To view local files and operate on them, select Open ... File List from the World menu.</p><p>By default, the top directory will be one from which Cuis was started, referred to as &quot;Cuis top&quot;. To instead start from the root directory of the drive, right-click in the upper-left pane and select &quot;default initial directories...OS roots&quot;. This change will not take effect until a new File List is opened.</p><p>A common operation performed in a File List window is to locate and select a <code>.pck.st</code> file that defines a package and click the &quot;install package&quot; button to install it.</p><h3 id="installed-packages-window" tabindex="-1">Installed Packages Window</h3><p>To see all the installed packages, open the World menu and select Open...Installed Packages. This opens an &quot;Installed Packages&quot; window.</p><p>To browse everything that is defined in a package:</p><ul><li>Select the package.</li><li>Click the &quot;Browse&quot; button.</li><li>This opens a System Browser that is focused on the selected package package.</li></ul><p>To create a new package:</p><ul><li>Click the &quot;New&quot; button in the center strip of buttons.</li><li>Enter a package name. For example, &quot;Volkmann&quot;.</li><li>Select the newly created package.</li><li>Enter a comment describing the package.</li><li>Click the &quot;Save&quot; button.</li><li>You will be prompted for the file path and name where the package will be saved. It's a good idea to keep the suggested file name, but feel free to change the directory to one outside the distribution directory.</li></ul><p>If package name matches the name of a class category that was created previously, all the classes in that category and their methods will automatically be associated with the new package.</p><p>I created a package whose name is my last name. I use this package to save all my experimental code so I can easily load it into new images. This is useful in case I accidentally modify an image in an unintended way. I can then return to using a base image and load my package into it.</p><h3 id="process-browsers" tabindex="-1">Process Browsers</h3><p>Process Browsers display a list of all the Smalltalk-related processes that are running. Processes come and go. By default the list updates automatically. To toggle that, press cmd-a (turn off/on auto-update).</p><p>To terminate a process, select it and press cmd-t (terminate). This is especially useful for terminating processes named &quot;WebServer's listening process&quot;.</p><p><img alt="Cuis Process Browser" style="width: 85%" src="/blog/assets/cuis-process-browser-window.png?v=1.1.1"></p><p>For example, the following code starts a process that writes to the Transcript every five seconds.</p><pre class="language-smalltalk"><code class="language-smalltalk">block <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">]</span> whileTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>    <span class="token string">'Hello'</span> print<span class="token punctuation">.</span><br>    <span class="token punctuation">(</span>Delay forSeconds<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span> wait<br><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>block forkAt<span class="token punctuation">:</span> Processor userBackgroundPriority named<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">.</span></code></pre><p>The name of the process will be &quot;hello&quot;. To stop it, right-click the process, select it and press cmd-t (terminate).</p><h3 id="emergency-evaluator" tabindex="-1">Emergency Evaluator</h3><p>The Emergency Evaluator can be useful to save work when the current session becomes mostly unusable.</p><p><img alt="Cuis Emergency Evaluator" style="width: 30%" src="/blog/assets/cuis-emergency-evaluator.png?v=1.1.1"></p><p>TODO: Explain when this is useful.</p><h2 id="saving-code" tabindex="-1">Saving Code</h2><p>One way to save code that you develop is to save the image. While this works, it is not recommended for two main reasons.</p><ol><li><p>Corrupt images</p><p>On rare occassions, changes make to an image can render it unusable. If this happens and the code you developed has not be saved elsewhere, it could lost.</p></li><li><p>Code Sharing</p><p>The best ways to share Smalltalk code you have written are to create a &quot;fileOut&quot; or a package. Other developers can &quot;fileIn&quot; the fileOuts you create or they can install packages you create. Both are options described below.</p></li></ol><h3 id="fileout-and-filein" tabindex="-1">fileOut and fileIn</h3><p>&quot;fileOut&quot; can be used to save any of the following in a <code>.st</code> text file:</p><ul><li>a single method</li><li>all the methods in a single method category</li><li>a single class and all its methods</li><li>a single class category</li></ul><p>To create a fileOut:</p><ul><li>Open a System Browser.</li><li>Select a class category, class, method category, or method in the top row of panes.</li><li>Right-click and select &quot;fileOut&quot;.</li></ul><p>The file will be saved in <code>{distribution-name}-UserFiles/FileOuts/{name}.st</code>.</p><p>These files use the bang-separated &quot;chunked format&quot;. Each chunk is delimited by exclamation marks. A chunk can contain:</p><ul><li>a &quot;From&quot; line the gives the version of Smalltalk that create the file and the date and time at which the file was created</li><li>a &quot;classDefinition&quot; that associates a class or metaclass with a class category</li><li>a &quot;subclass: message send that creates a class</li><li>a &quot;methodsFor&quot; which states that the method definitions that follow are in a given method category</li><li>a method definition</li><li>a message send that creates an object that should exist in the environment</li><li>a message send that executes code for its side effects</li></ul><p>The following is an example fileOut for a <code>Dog</code> class:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'From Cuis7.1 [latest update: #6464] on 12 June 2024 at 10:47:55 am'</span><span class="token operator">!</span><br><span class="token operator">!</span>classDefinition<span class="token punctuation">:</span> <span class="token symbol">#Dog</span> category<span class="token punctuation">:</span> <span class="token symbol">#Volkmann</span><span class="token operator">!</span><br>Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Dog</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'breed name'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">'Count'</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:47:34'</span><span class="token operator">!</span><br>initialize<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    Count <span class="token operator">:=</span> Count <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:00:43'</span><span class="token operator">!</span><br>setName<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<br>    name <span class="token operator">:=</span> aName<span class="token punctuation">.</span><br>    breed <span class="token operator">:=</span> aBreed<span class="token operator">!</span> <span class="token operator">!</span><br><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:03:03'</span><span class="token operator">!</span><br>breed<br>    <span class="token operator">^</span>breed<span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:02:57'</span><span class="token operator">!</span><br>name<br>    <span class="token operator">^</span>name<span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token comment">"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "</span><span class="token operator">!</span><br><br><span class="token operator">!</span>classDefinition<span class="token punctuation">:</span> <span class="token string">'Dog class'</span> category<span class="token punctuation">:</span> <span class="token symbol">#Volkmann</span><span class="token operator">!</span><br>Dog class<br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><span class="token operator">!</span><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 09:45:13'</span><span class="token operator">!</span><br>count<br>    <span class="token operator">^</span>Count<span class="token operator">!</span> <span class="token operator">!</span><br><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:41:45'</span><span class="token operator">!</span><br>initialize<br>    <span class="token comment">"This must be explicitly called with Dog initialize."</span><br>    Count <span class="token operator">:=</span> <span class="token number">0</span><span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:43:52'</span><span class="token operator">!</span><br>name<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setName<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<span class="token operator">!</span> <span class="token operator">!</span><br><br><br>Dog initialize<span class="token operator">!</span></code></pre><p>To read a fileOut into the current image:</p><ul><li>Open the World menu.</li><li>Select &quot;Open...File List&quot;.</li><li>Locate and select a <code>.st</code> file created by a fileOut.</li><li>Right-click and select &quot;fileIn&quot;.</li><li>Enter your initials and then your name for tracking who performed the fileIn.</li></ul><p>All the class categories, classes, method categories, and methods defined in the fileOut will now be available in the current image.</p><h3 id="packages" tabindex="-1">Packages</h3><p>Cuis Smalltalk supports the ability to save code outside an image file as a &quot;package&quot; and load the package into running images. This is an alternative to <a href="https://wiki.squeak.org/squeak/1287" target="_blank">Monticello</a> which is used in Squeak and Pharo.</p><p>Packages are collections of Smalltalk code stored in files with a <code>.pck.st</code> file.</p><p>Package names are used as prefixes on class and method categories names. Package name abbreviations are often used as prefixes on class names.</p><p>The GitHub account &quot;Cuis-Smalltalk&quot; provides many package repositories, 32 as of June 2024. Sadly the documentation included in the <code>README.md</code> files of these packages is quite sparse. These repositories must be cloned in order to install them.</p><p>For additional packages, search GitHub for repositories whose names begin with &quot;Cuis-Smalltalk-&quot;.</p><p>There are three ways to install a package.</p><ol><li>Drag a package file onto the World and select &quot;install package&quot;.</li><li>Open a File List, locate a package file, select it, and click the &quot;install package&quot; button.</li><li>Open a Workspace, enter the command <code>Feature require: '{package-name}'</code>, and press cmd-d (Do it). This option only works if the package is in the same directory as the image file that is loaded.</li></ol><p>Let's learn where the <code>Feature require:</code> method searches for packages.</p><ol><li><p>Browse the <code>Feature</code> class.</p></li><li><p>Click the <code>require</code> method on the class side.</p></li><li><p>Note that this sends the <code>#name:</code> message to the <code>FeatureRequirement</code> class to create an instance and then sends it the <code>#require</code> message.</p></li><li><p>Select the <code>FeatureRequirement</code> class.</p></li><li><p>Select the <code>require</code> method on the instance side.</p></li><li><p>Note that this sends the <code>#requireUnlessIn:main:requiringFeature:allRequiringFeatures:</code> message to <code>self</code>.</p></li><li><p>Select that method on the instance side.</p></li><li><p>Note that this sends the <code>#findPackageFileAsReqOf:</code> message to <code>self</code>.</p></li><li><p>Select that method on the instance side.</p></li><li><p>Note that this sends the <code>#placesToLookForPackagesDo:</code> message to <code>self</code>.</p></li><li><p>Select that method on the instance side.</p></li><li><p>Note the following comments in this code:</p><ul><li>&quot;Look inside my own folder&quot;</li><li>&quot;Look in codePackageFile folder&quot;</li><li>&quot;Packages that come included with Cuis&quot;</li><li>&quot;Packages created by user&quot;</li><li>&quot;Packages in other folders or repos in the project directory&quot;</li></ul></li></ol><p>See the earlier section &quot;Installed Packages Window&quot; for more details on working with packages.</p><p>By default packages are saved in a directory that is relative to the directory that holds the current image file. To determine this:</p><ul><li>Open a Workspace.</li><li>Enter <code>Smalltalk imagePath.</code></li><li>Press cmd-p to &quot;Print it&quot;.</li></ul><p>Determine the name and location of the directory that holds your Cuis Smalltalk installation. For me this is <code>~/Documents/dev/lang/smalltalk/Cuis-Smalltalk-Dev</code>. My base image file is in the subdirectory <code>CuisImage</code> in the file <code>Cuis7.1-6367.image</code>.</p><p>By default, packages I create go in a similar path which is <code>~/Documents/dev/lang/smalltalk/Cuis-Smalltalk-Dev-UserFiles/NewPackages/{package-name}.pck.st</code>.</p><p>To define new classes and save them in your package:</p><ul><li>Add a class category whose name is the same as the new package name.</li><li>Add classes in the new class category.</li><li>Add methods to the new classes in any method category.</li><li>Open an &quot;Installed Packages&quot; window and select the new package.</li><li>Click the &quot;Save&quot; button.</li></ul><p>To add or override methods in existing classes and save the changes in your package:</p><ul><li>Add a message category to an existing class whose name is an asterisk followed by the new package name. For example, I used &quot;*Volkmann&quot;. This can optionally be followed by &quot;-&quot; and a meaningful method category name. For example, &quot;*Volkmann-geometry&quot;.</li><li>Add new methods to the existing class in the new message category.</li><li>Open an &quot;Installed Packages&quot; window and select the package. An asterisk before the name indicates that it has unsaved changes.</li><li>Click the &quot;Save&quot; button.</li></ul><p>To verify that all this worked:</p><ul><li>Open the World menu and select &quot;Quit without saving&quot; so the changes are not saved in the current image.</li><li>Restart Cuis Smalltalk with the same image.</li><li>Verify that the classes and methods that were added are not present.</li><li>Install the package.</li><li>Verify that the classes and methods that were saved in the package are now present.</li></ul><p>There is no provided way to uninstall a package. The only way to remove it from the image is to start with a fresh image and only install the desired packages.</p><p>TODO: What does the &quot;delete/merge&quot; button in the &quot;Installed Packages&quot; window do? TODO: It does not uninstall the selected package or delete the file that defines it.</p><p>It is recommended to save packages in GitHub. For details on doing this, open the World menu and select Help...Using GitHub to host Cuis packages.</p><h2 id="reflection" tabindex="-1">Reflection</h2><p>Smalltalk provides many methods for getting information about classes and objects. The following table lists some of them.</p><table><thead><tr><th>Method</th><th>Answers</th></tr></thead><tbody><tr><td><code>Smalltalk allClasses</code></td><td>an <code>Array</code> of all classes defined in the current image</td></tr><tr><td><code>Smalltalk allClassesImplementing: #selector</code></td><td>an <code>Array</code> of all classes that implement a given selector</td></tr><tr><td><code>SystemOrganization categoryOfElement: #SomeClass</code></td><td>name of the class category to which a given class belongs</td></tr><tr><td><code>SomeClass allClassVarNames</code></td><td>a <code>Set</code> of class variable names defined in this class</td></tr><tr><td><code>SomeClass allSelectors</code></td><td>an <code>IdentitySet</code> of all message selectors supported by this class, including selectors for inherited methods</td></tr><tr><td><code>SomeClass allInstances</code></td><td>an <code>Array</code> of all existing instances of this class</td></tr><tr><td><code>SomeClass allInstVarNames</code></td><td>an <code>Array</code> of instance variable names defined in this class</td></tr><tr><td><code>SomeClass allInstVarNamesEverywhere</code></td><td>an <code>Array</code> of instance variable names defined in this class and inherited classes</td></tr><tr><td><code>SomeClass allMethodsInCategory: 'some-category'</code></td><td>an <code>Array</code> of instance methods in a given category, including those defined in this class and inherited</td></tr><tr><td><code>SomeClass class allMethodsInCategory: 'some-category'</code></td><td>an <code>Array</code> of class methods in a given category, including those defined in this class and inherited</td></tr><tr><td><code>SomeClass allSubclasses</code></td><td>an <code>OrderedCollection</code> of subclasses</td></tr><tr><td><code>SomeClass allSuperclasses</code></td><td>an <code>OrderedCollection</code> of superclasses</td></tr><tr><td><code>CodeListPackages installedPackages</code></td><td>an <code>Array</code> of <code>CodePackage</code> objects (appear in System Browser class category pane)</td></tr></tbody></table><p>TODO: Why does <code>allClassVarNames</code> return a <code>Set</code> when <code>allInstVarNames</code> returns an <code>Array</code>? TODO: Is there a way to get all the message categories used by a class?</p><p>To run code on every instance of a given class, send the <code>allInstancesDo:</code> message to the class.</p><p>For example, to delete all instances of a given class, run <code>SomeClass allInstancesDo: [ :obj | obj delete ]</code>.</p><h2 id="data-types" tabindex="-1">Data Types</h2><p>TODO: Move this section up.</p><p>The following subsections provide a review of commonly used Smalltalk classes that represent data types.</p><h3 id="undefinedobject" tabindex="-1">UndefinedObject</h3><p>The pseudo-variable <code>nil</code> represents not having a value. It refers to the singleton instance of the <code>UndefinedObject</code> class. Creation of additional instances is prevented by overriding the class method <code>new</code> in the <code>UndefinedObject</code> class.</p><p>The following table describes some of the instance methods defined in the <code>UndefinedObject</code> class. These can be invoked on the pseudo-variable <code>nil</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>ifNil:</code></td><td>always evaluates its argument</td></tr><tr><td><code>ifNil:ifNotNil:</code></td><td>always evaluates its first argument and never its second</td></tr><tr><td><code>ifNotNil:</code></td><td>never evaluates its argument</td></tr><tr><td><code>ifNotNil:ifNil:</code></td><td>always evaluates its second argument and never its first</td></tr><tr><td><code>isEmptyOrNil:</code></td><td>always answers <code>true</code></td></tr><tr><td><code>isLiteral</code></td><td>always answers <code>true</code></td></tr><tr><td><code>isNil</code></td><td>always answers <code>true</code></td></tr><tr><td><code>notNil</code></td><td>always answers <code>false</code></td></tr></tbody></table><h3 id="booleans" tabindex="-1">Booleans</h3><p>The pseudo-variables <code>true</code> and <code>false</code> refer to singleton instances of the classes <code>True</code> and <code>False</code> which are subclasses of the class <code>Boolean</code>.</p><p><code>True</code> and <code>False</code> are singleton classes. Creating of additional instances is prevented by overriding the class method <code>new</code> in the <code>Boolean</code> class.</p><p>Representing the values <code>true</code> and <code>false</code> by distinct classes simplifies the implementation of many of their methods. For example, here are the implementations of the <code>&amp;</code> and <code>ifTrue:</code> instance methods in the <code>True</code> class.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token comment">"This is simplified because it can assume<br> the receiver (left-hand side) is true."</span><br><span class="token operator">&amp;</span> alternativeObject<br>    <span class="token operator">^</span>alternativeObject<br><br><span class="token comment">"This is simplified by not needing to test whether the receiver is true."</span><br>ifTrue<span class="token punctuation">:</span> alternativeBlock<br>    <span class="token operator">^</span>alternativeBlock value</code></pre><p>The following table describes most of the instance methods defined in the <code>Boolean</code> class. Since <code>True</code> and <code>False</code> are subclasses, they also have these methods.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>&amp;</code></td><td>&quot;and&quot; without short-circuiting</td></tr><tr><td><code>|</code></td><td>&quot;or&quot; without short-circuiting</td></tr><tr><td><code>and:</code></td><td>&quot;and&quot; with short-circuiting</td></tr><tr><td><code>and:and:</code></td><td>like <code>and:</code> but for three values</td></tr><tr><td><code>and:and:and:</code></td><td>like <code>and:</code> but for four values</td></tr><tr><td><code>and:and:and:and:</code></td><td>like <code>and:</code> but for five values</td></tr><tr><td><code>eqv:</code></td><td>answers whether two <code>Boolean</code> values are equivalent</td></tr><tr><td><code>ifFalse:</code></td><td>evaluates argument (typically a block) if receiver is <code>false</code></td></tr><tr><td><code>ifFalse:ifTrue:</code></td><td>conditionally evaluates arguments (typically blocks)</td></tr><tr><td><code>ifTrue:</code></td><td>evaluates argument (typically a block) if receiver is <code>true</code></td></tr><tr><td><code>ifTrue:ifFalse:</code></td><td>conditionally evaluates arguments (typically blocks)</td></tr><tr><td><code>isLiteral</code></td><td>always answers <code>true</code></td></tr><tr><td><code>not</code></td><td>answers opposite Boolean value</td></tr><tr><td><code>or:</code></td><td>&quot;or&quot; with short-circuiting</td></tr><tr><td><code>or:or:</code></td><td>like <code>or:</code> but for three values</td></tr><tr><td><code>or:or:or:</code></td><td>like <code>or:</code> but for four values</td></tr><tr><td><code>or:or:or:or:</code></td><td>like <code>or:</code> but for five values</td></tr><tr><td><code>xor:</code></td><td>exclusive &quot;or&quot; of two <code>Boolean</code> values</td></tr></tbody></table><p>The <code>True</code> and <code>False</code> classes implement some of the methods described above, but they do not add any methods.</p><h3 id="numbers" tabindex="-1">Numbers</h3><p>The following list depicts the class hierarchy for various kinds of numbers:</p><ul><li><code>Number</code><ul><li><code>Float</code><ul><li><code>BoxedFloat64</code></li><li><code>SmallFloat64</code></li></ul></li><li><code>Fraction</code><ul><li><code>Integer</code><ul><li><code>LargePositiveInteger</code><ul><li><code>LargeNegativeInteger</code></li></ul></li><li><code>SmallInteger</code></li></ul></li></ul></li></ul></li></ul><p>Literal numbers without a decimal point automatically become objects of one of the <code>Integer</code> subclasses.</p><p>Literal numbers with a decimal point automatically become objects of one of the <code>Float</code> subclasses.</p><p>The assignment operator <code>:=</code> can be used to assign a literal number to a variable. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">n <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">.</span><br>n <span class="token operator">:=</span> n <span class="token operator">+</span> <span class="token number">1</span></code></pre><p>There are no shorthand assignment operators like <code>+=</code> for numbers.</p><p>Numbers are automatically converted to objects of the appropriate type. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">a</span> <span class="token variable">b</span> <span class="token variable">c</span> <span class="token punctuation">|</span></span><br>a <span class="token operator">:=</span> <span class="token number">1000000000000000000</span><span class="token punctuation">.</span><br>b <span class="token operator">:=</span> a <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">.</span><br>c <span class="token operator">:=</span> b <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">.</span><br>a class print<span class="token punctuation">.</span> <span class="token comment">"SmallInteger"</span><br>b class print<span class="token punctuation">.</span> <span class="token comment">"LargePositiveInteger"</span><br>c class print<span class="token punctuation">.</span> <span class="token comment">"SmallInteger"</span></code></pre><p>The following table describes most of the instance methods defined in the <code>Number</code> class. These can be invoked on instances of all <code>Number</code> subclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>*</code></td><td>answers product of two numbers</td></tr><tr><td><code>+</code></td><td>answers sum of two numbers</td></tr><tr><td><code>-</code></td><td>answers difference of two numbers</td></tr><tr><td><code>/</code></td><td>answers quotient of two numbers</td></tr><tr><td><code>//</code></td><td>answers integer quotient of two numbers truncating toward negative infinity</td></tr><tr><td><code>=</code></td><td>answers if two numbers are equivalent</td></tr><tr><td><code>@</code></td><td>answers a <code>Point</code> object where receiver is x and argument is y</td></tr><tr><td><code>\\</code></td><td>answers same as <code>mod:</code></td></tr><tr><td><code>^</code></td><td>answers same as <code>raisedTo:</code></td></tr><tr><td><code>abs</code></td><td>answers absolute value of receiver</td></tr><tr><td><code>arcCos</code></td><td>answers arccosine of receiver</td></tr><tr><td><code>arcSin</code></td><td>answers arcsine of receiver</td></tr><tr><td><code>arcTan</code></td><td>answers arctangent of receiver</td></tr><tr><td><code>asFloat</code></td><td>answers equivalent <code>Float</code> value</td></tr><tr><td><code>asInteger</code></td><td>answers equivalent <code>Integer</code> value</td></tr><tr><td><code>ceiling</code></td><td>answers nearest integer rounding toward infinity</td></tr><tr><td><code>cos</code></td><td>answers cosine of receiver in radians</td></tr><tr><td><code>degreeCos</code></td><td>answers cosine of receiver in degrees</td></tr><tr><td><code>degreeSin</code></td><td>answers sine of receiver in degrees</td></tr><tr><td><code>degreeTan</code></td><td>answers tangent of receiver in degrees</td></tr><tr><td><code>cubed</code></td><td>answers receiver raised to 3rd power</td></tr><tr><td><code>degreesToRadians</code></td><td>answers result of converting receiver in degees to radians</td></tr><tr><td><code>div:</code></td><td>answers integer division rounding toward negative infinity</td></tr><tr><td><code>even</code></td><td>answers <code>Boolean</code> value indicating if receiver is equivalent to an even integer</td></tr><tr><td><code>floor</code></td><td>answers nearest integer rounding toward negative infinity</td></tr><tr><td><code>fractionPart</code></td><td>answers fractional part (ex. <code>3.25 fractionPart</code> gives 0.25)</td></tr><tr><td><code>ifNotZero:</code></td><td>evaluates argument (typically a block) if receiver is not zero</td></tr><tr><td><code>integerPart</code></td><td>answers integer part (ex. <code>3.25 integerPart</code> gives 3.0)</td></tr><tr><td><code>isDivisibleBy:</code></td><td>answers <code>Boolean</code> value indicating if receiver is divisible by argument</td></tr><tr><td><code>isNaN</code></td><td>always answers <code>false</code></td></tr><tr><td><code>isNumber</code></td><td>always answers <code>true</code></td></tr><tr><td><code>isZero</code></td><td>answers <code>Boolean</code> value indicating if receiver is zero</td></tr><tr><td><code>lg</code></td><td>answers same as <code>log2</code></td></tr><tr><td><code>ln</code></td><td>answers natural log of receiver</td></tr><tr><td><code>log</code></td><td>answers base 10 log of receiver</td></tr><tr><td><code>log2</code></td><td>answers base 2 log of receiver</td></tr><tr><td><code>log:</code></td><td>answers log of receiver where argument is the base</td></tr><tr><td><code>magnitude</code></td><td>same as <code>abs</code></td></tr><tr><td><code>mod:</code></td><td>answers receiver modulo argument</td></tr><tr><td><code>moduloTwoPiAsFloat:</code></td><td>answers receiver modulo 2 * pi as a <code>Float</code></td></tr><tr><td><code>negated</code></td><td>answers receiver with opposite sign</td></tr><tr><td><code>negative</code></td><td>answers <code>Boolean</code> value indicating if receiver is negative</td></tr><tr><td><code>nthRoot:</code></td><td>answers argument root of receiver</td></tr><tr><td><code>odd</code></td><td>answers <code>Boolean</code> value indicating if receiver is equivalent to an odd integer</td></tr><tr><td><code>positive</code></td><td>answers <code>Boolean</code> value indicating if receiver is positive or zero</td></tr><tr><td><code>radiansToDegrees</code></td><td>answers result of converting receiver in radians to degrees</td></tr><tr><td><code>raisedTo:</code></td><td>answers receiver raised to argument exponent</td></tr><tr><td><code>reciprocal</code></td><td>answers reciprocoal of receiver (<code>1 / self</code>)</td></tr><tr><td><code>rem:</code></td><td>answers remainder of integer division of receiver by argument</td></tr><tr><td><code>roundTo:</code></td><td>answers nearest value or receiver rounded to a multiple of argument</td></tr><tr><td><code>rounded</code></td><td>answers nearest integer to receiver</td></tr><tr><td><code>sign</code></td><td>answers <code>1</code>, <code>0</code>, or <code>-1</code> based on sign of receiver</td></tr><tr><td><code>sin</code></td><td>answers sine of receiver in radians</td></tr><tr><td><code>sqrt</code></td><td>answers square root of receiver</td></tr><tr><td><code>squared</code></td><td>answers square of receiver</td></tr><tr><td><code>strictlyPositive</code></td><td>answers <code>Boolean</code> value indicating if receiver is positive and not zero</td></tr><tr><td><code>tan</code></td><td>answers tangent of receiver in radians</td></tr><tr><td><code>to:</code></td><td>answers an <code>Interval</code> from receiver to argument</td></tr><tr><td><code>to:by:</code></td><td>answers an <code>Interval</code> from receiver to <code>to:</code> in steps of <code>by:</code></td></tr><tr><td><code>to:by:do:</code></td><td>evaluates &quot;do&quot; block with every value from receiver to <code>to:</code> in steps of <code>by:</code></td></tr><tr><td><code>to:do:</code></td><td>evaluates &quot;do&quot; block with every value from receiver to <code>to:</code></td></tr><tr><td><code>toSelfPlus:</code></td><td>answers an <code>Interval</code> from receiver to receiver plus argument</td></tr><tr><td><code>truncated</code></td><td>answers closes integer rounding toward zero</td></tr></tbody></table><p>For example, <code>3.14159 roundTo: 0.0001</code> gives <code>3.1416</code>.</p><p>All subclasses of <code>Number</code> except <code>Fraction</code> implement the <code>isLiteral</code> method to always return <code>true</code>. The <code>Fraction</code> class implements the <code>isLiteral</code> method to return <code>true</code> if the denominator is a multiple of 2 or 5, and <code>false</code> otherwise. TODO: Why?</p><p>The subclasses <code>Float</code>, <code>BoxedFloat64</code>, and <code>SmallFloat64</code> do not implement any particularly interesting methods that were not already described for the <code>Number</code> class.</p><p>The following table describes some of the instance methods defined in the <code>BoxedFloat64</code> and <code>SmallFloat64</code> classes (both subclasses of <code>Integer</code>) that are not defined in the <code>Number</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than argument</td></tr><tr><td><code>&lt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than or equal to argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> value indicating if receiver is equal to argument</td></tr><tr><td><code>&gt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than argument</td></tr><tr><td><code>&gt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than or equal to argument</td></tr><tr><td><code>~=</code></td><td>answers <code>Boolean</code> value indicating if receiver is not equal to argument</td></tr></tbody></table><p>The <code>Integer</code> class overrides the <code>/</code> method to return a <code>Fraction</code> object when the argument is an <code>Integer</code>. For example, the following sets <code>result</code> to the <code>Fraction</code> <code>4/3</code> rather than the <code>Float</code> <code>1.333333...</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">result <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span></code></pre><p>Fraction objects have the instance variables <code>numerator</code> and <code>denominator</code>.</p><p>Operations of fractions always return a new <code>Fraction</code> object rather than a <code>Float</code> object in order to maintain accuracy.</p><p>The following table describes some of the instance methods defined in the <code>Fraction</code> class that are not defined in the <code>Number</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>denominator</code></td><td>answers the denominator of the fraction</td></tr><tr><td><code>numerator</code></td><td>answers the numerator of the fraction</td></tr><tr><td><code>reduced</code></td><td>answers a new fraction that is a reduced equivalent of the receiver</td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Integer</code> class that are not defined in the <code>Number</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than argument</td></tr><tr><td><code>&lt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than or equal to argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> value indicating if receiver is equal to argument</td></tr><tr><td><code>&gt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than argument</td></tr><tr><td><code>&gt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than or equal to argument</td></tr><tr><td><code>~=</code></td><td>answers <code>Boolean</code> value indicating if receiver is not equal to the argument</td></tr><tr><td><code>&lt;&lt;</code></td><td>answers new <code>Integer</code> obtained by shifting argument bits left</td></tr><tr><td><code>&gt;&gt;</code></td><td>answers new <code>Integer</code> obtained by shifting argument bits right</td></tr><tr><td><code>atRandom</code></td><td>answers a random integer from 1 to receiver</td></tr><tr><td><code>atRandom:</code></td><td>answers a random integer from 1 to receiver using argument as a generator</td></tr><tr><td><code>bitAnd:</code></td><td>answers new <code>Integer</code> obtained by anding the bits in receiver and argument</td></tr><tr><td><code>bitAt:</code></td><td>answers the bit (0 or 1) in receiver at argument position</td></tr><tr><td><code>bitAt:put:</code></td><td>answers new <code>Integer</code> obtained by changing the bit at <code>bitAt:</code> to <code>put:</code></td></tr><tr><td><code>bitOr:</code></td><td>answers new <code>Integer</code> obtained by oring the bits in receiver and argument</td></tr><tr><td><code>bitXor:</code></td><td>answers new <code>Integer</code> obtained by exclusive oring the bits in receiver and argument</td></tr><tr><td><code>gcd</code></td><td>answers greatest common divisor of receiver and argument</td></tr><tr><td><code>hex</code></td><td>answers equivalent hexadecimal string</td></tr><tr><td><code>isPrime</code></td><td>answers <code>Boolean</code> value indicating if receiver is a prime number</td></tr><tr><td><code>lcm</code></td><td>answers least common multiple of receiver and argument</td></tr><tr><td><code>timesRepeat:</code></td><td>evaluate argument block receiver times</td></tr></tbody></table><h3 id="characters" tabindex="-1">Characters</h3><p>Characters are represented by the <code>Character</code> class. Printable literal characters are preceded by a dollar sign. For example, <code>$a</code>. Non-printable characters can be obtained from unary class methods in the <code>Character</code> class such as <code>cr</code>, <code>space</code>, and <code>tab</code>.</p><p>The following table describes some of the class methods defined in the <code>Character</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>codePoint:</code></td><td>answers <code>Character</code> instance that corresponds to argument code</td></tr><tr><td><code>cr</code></td><td>answers carriage return instance</td></tr><tr><td><code>digitValue:</code></td><td>answers <code>Character</code> instance that corresponds to argument digit (0-9)</td></tr><tr><td><code>escape</code></td><td>answers <code>Character</code> instance that corresponds to escape character</td></tr><tr><td><code>lf</code></td><td>answers <code>Character</code> instance that corresponds to line feed character</td></tr><tr><td><code>newLineCharacter</code></td><td>answers same as <code>lf</code></td></tr><tr><td><code>separators</code></td><td>answers array of whitespace characters</td></tr><tr><td><code>space</code></td><td>answers <code>Character</code> instance that corresponds to space character</td></tr><tr><td><code>tab</code></td><td>answers <code>Character</code> instance that corresponds to tab character</td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Character</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than argument</td></tr><tr><td><code>&lt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than or equal to argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> value indicating if receiver is equal to argument</td></tr><tr><td><code>&gt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than argument</td></tr><tr><td><code>&gt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than or equal to argument</td></tr><tr><td><code>asLowercase</code></td><td>answers lowercase version of receiver</td></tr><tr><td><code>asString</code></td><td>answers <code>String</code> or <code>UnicodeString</code> representation of receiver</td></tr><tr><td><code>asSymbol</code></td><td>answers <code>Symbol</code> of receiver</td></tr><tr><td><code>asUppercase</code></td><td>answers uppercase version of receiver</td></tr><tr><td><code>asciiValue</code></td><td>answers decimal ASCII value of receiver</td></tr><tr><td><code>codePoint</code></td><td>answers decimal Unicode value of receiver</td></tr><tr><td><code>digitValue</code></td><td>answers <code>Integer</code> value of digit <code>Character</code>; opposite of class method <code>digitValue:</code></td></tr><tr><td><code>hex</code></td><td>answers hexadecimal ASCII value of receiver</td></tr><tr><td><code>isAlphaNumeric</code></td><td>answers <code>Boolean</code> value indicating if receiver is a letter or digit</td></tr><tr><td><code>isDigit</code></td><td>answers <code>Boolean</code> value indicating if receiver is a digit</td></tr><tr><td><code>isLetter</code></td><td>answers <code>Boolean</code> value indicating if receiver is a letter</td></tr><tr><td><code>isLiteral</code></td><td>always answers <code>true</code></td></tr><tr><td><code>isLowercase</code></td><td>answers <code>Boolean</code> value indicating if receiver is lowercase</td></tr><tr><td><code>isSeparator</code></td><td>answers <code>Boolean</code> value indicating if receiver is whitespace</td></tr><tr><td><code>isUppercase</code></td><td>answers <code>Boolean</code> value indicating if receiver is uppercase</td></tr><tr><td><code>isValidInBinarySelectors</code></td><td>answers <code>Boolean</code> value indicating if receiver can appear in a binary selector name</td></tr><tr><td><code>isValidInFilenames</code></td><td>answers <code>Boolean</code> value indicating if receiver can appear in a file name</td></tr><tr><td><code>isValidInIdentifier</code></td><td>answers <code>Boolean</code> value indicating if receiver can appear in a variable name or unary/keyword selector</td></tr><tr><td><code>isValidStartOfIdentifier</code></td><td>answers <code>Boolean</code> value indicating if receiver can appear as first character in a variable name or unary/keyword selector</td></tr><tr><td><code>isVowel</code></td><td>answers <code>Boolean</code> value indicating if receiver is a vowel</td></tr><tr><td><code>to:</code></td><td>answers <code>Array</code> of <code>Character</code> instances from receiver to argument</td></tr><tr><td><code>tokenish</code></td><td>answers <code>Boolean</code> value indicating if receiver can appear in a token (letter, digit, or colon)</td></tr></tbody></table><h3 id="strings" tabindex="-1">Strings</h3><p>The following list depicts the class hierarchy for character data:</p><ul><li><code>Collection</code><ul><li><code>SequenceableCollection</code><ul><li><code>CharacterSequence</code><ul><li><code>String</code><ul><li><code>Symbol</code></li></ul></li><li><code>UnicodeString</code><ul><li><code>UnicodeSymbol</code></li></ul></li></ul></li></ul></li></ul></li></ul><p>Instances of <code>String</code> and <code>UnicodeString</code> are mutable collections of characters. But instances of <code>CharacterSequence</code>, <code>Symbol</code>, and <code>UnicodeSymbol</code> are immutable.</p><p>Literal strings are delimited by single quotes, not double quotes which are used to delimit comments.</p><p>The <code>CharacterSequence</code> class method <code>readFrom:</code> answers an instance created by reading text from a stream.</p><p>The following table describes some of the instance methods defined in the <code>CharacterSequence</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>append:</code></td><td>answers new <code>CharacterSequence</code> containing argument characters appended to receiver characters; same as <code>,</code> in <code>String</code> class</td></tr><tr><td><code>asCamelCase</code></td><td>answers copy created by camelCasing white-space separated words (first letter lower)</td></tr><tr><td><code>asDate</code></td><td>answers <code>Date</code> parsed from receiver</td></tr><tr><td><code>asLowercase</code></td><td>answers copy that is all lowercase</td></tr><tr><td><code>asNumber</code></td><td>answers number parsed from receiver</td></tr><tr><td><code>asPlural</code></td><td>answers plural of an English word</td></tr><tr><td><code>asUnicodeString</code></td><td>answers receiver converted to a <code>UnicodeString</code></td></tr><tr><td><code>asUppercase</code></td><td>answers copy that is all uppercase</td></tr><tr><td><code>beginsWith:</code></td><td>answers <code>Boolean</code> indicating if receiver begins with given substring</td></tr><tr><td><code>capitalized</code></td><td>answers copy where first letter is changed to uppercase</td></tr><tr><td><code>collect:</code></td><td>answers result of applying block argument to each character</td></tr><tr><td><code>endsWith:</code></td><td>answers <code>Boolean</code> indicating if receiver ends with given substring</td></tr><tr><td><code>findString:</code></td><td>answers index where argument substring begins</td></tr><tr><td><code>findString:startingAt:caseSensitive:</code></td><td>answers index after <code>startingAt:</code> where a substring begins, optionally case sensitive</td></tr><tr><td><code>findTokens:</code></td><td>answers <code>Array</code> of instances created by splitting receiver on delimiters in argument</td></tr><tr><td><code>format:</code></td><td>answers instance created using interpolation</td></tr><tr><td><code>includesSubString:</code></td><td>answers <code>Boolean</code> indicating if receiver contains substring</td></tr><tr><td><code>includesSubstring:caseSensitive:</code></td><td>answers <code>Boolean</code> indicating if receiver contains substring</td></tr><tr><td><code>indexOf:</code></td><td>answers index of a character</td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if receiver size is zero</td></tr><tr><td><code>isLiteral</code></td><td>always answers <code>true</code></td></tr><tr><td><code>join:</code></td><td>answers instance formed by joining <code>Array</code> elements of any type with receiver delimiter</td></tr><tr><td><code>match:</code></td><td>answers <code>Boolean</code> indicating whether receiver matches a pattern</td></tr><tr><td><code>padded:to:width:</code></td><td>answers copy formed by padding receiver on left or right with a given <code>Character</code></td></tr><tr><td><code>prefixAndSuffix:</code></td><td>answers <code>Array</code> of instances formed by splitting receiver on last occurrence of a <code>Character</code></td></tr><tr><td><code>size</code></td><td>answers largest legal index</td></tr><tr><td><code>squeezedTo:</code></td><td>answers instance that optimizes readability of receiver in given number of characters</td></tr><tr><td><code>subStrings:</code></td><td>answers <code>Array</code> of instances formed by splitting receiver on delimiters</td></tr><tr><td><code>substrings</code></td><td>answers <code>Array</code> of instances created by splitting receiver on whitespace</td></tr><tr><td><code>substringsSeparatedBy:</code></td><td>answers <code>Array</code> of instances formed by splitting receiver on a single delimiter <code>Character</code></td></tr><tr><td><code>truncateWithElipsisTo:</code></td><td>answers instance formed by truncating receiver to given length with elipsis in last 3 of length</td></tr><tr><td><code>uncapitalized</code></td><td>answers copy where first letter is changed to lowercase</td></tr><tr><td><code>withBlanksCondensed</code></td><td>answers instance created by removing leading and trailing spaces and replacing consecutive spaces with one</td></tr><tr><td><code>withBlanksTrimmed</code></td><td>answers instance created by removing leading and trailing spaces</td></tr><tr><td><code>withoutEnclosing:</code></td><td>answers instance created by removing first and last characters if they match a given <code>Character</code></td></tr><tr><td><code>withoutLeadingBlanks</code></td><td>answers instance created by removing leading blanks</td></tr><tr><td><code>withoutPrefix</code></td><td>answers instance created by removing given substring prefix</td></tr><tr><td><code>withoutSuffix</code></td><td>answers instance created by removing given substring suffix</td></tr><tr><td><code>withoutTrailingBlanks</code></td><td>answers instance created by removing trailing blanks</td></tr></tbody></table><p>The following table describes some of the class methods defined in the <code>String</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>compare:with:</code></td><td>answer 1 if <code>compare:</code> is less than <code>with:</code>, 2 if equal, and 3 if greater than</td></tr><tr><td><code>compareIgnoringCase:with:</code></td><td>same as <code>compare:with:</code>, but case is ignored</td></tr><tr><td><code>crString</code></td><td>answers instance containing the carriage return character</td></tr><tr><td><code>crlfString</code></td><td>answers instance containing the carriage return and line feed characters</td></tr><tr><td><code>findString:in:startingAt:</code></td><td>answers index of <code>findString:</code> in <code>in:</code> starting at index <code>startingAt:</code></td></tr><tr><td><code>findStringIgnoringCase:in:startingAt:</code></td><td>same as <code>findString:in:startingAt:</code>, but case is ignored</td></tr><tr><td><code>is:equalTo:</code></td><td>answers <code>Boolean</code> indicating if <code>is:</code> is equal to <code>equalTo:</code></td></tr><tr><td><code>isAscii:</code></td><td>answers <code>Boolean</code> indicating if all the characters are ASCII</td></tr><tr><td><code>isEmpy:</code></td><td>answers <code>Boolean</code> indicating if size is zero</td></tr><tr><td><code>lfString</code></td><td>answers instance containing only a line feed character</td></tr><tr><td><code>new:withAll:</code></td><td>answers instance with length <code>new:</code> where all characters are <code>withAll:</code></td></tr><tr><td><code>newLineString</code></td><td>answers instance containing only a newline character</td></tr><tr><td><code>percentEscapingNonAscii</code></td><td>answers URL encoded instance where non-ASCII characters are percent encoded</td></tr><tr><td><code>string:lineIndicesDo:</code></td><td>evalautes block <code>lineIndicesDo:</code> for each substring of <code>string:</code> delimited by CR, LF, or CRLF</td></tr><tr><td><code>substringsIn:</code></td><td>answers an <code>Array</code> of substrings delimited by whitespace characters</td></tr><tr><td><code>tab</code></td><td>answers instance containing the tab character</td></tr></tbody></table><p>To get a substring of a <code>String</code>, use the <code>copyFrom:to:</code> method defined in <code>SequenceableCollection</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'foobarbaz'</span> copyFrom<span class="token punctuation">:</span> <span class="token number">4</span> to<span class="token punctuation">:</span> <span class="token number">6</span> <span class="token comment">"bar"</span></code></pre><p>The following code demonstrates processing lines in a <code>String</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">cr <span class="token operator">:=</span> String crString<span class="token punctuation">.</span><br>s <span class="token operator">:=</span> <span class="token string">'foo'</span><span class="token operator">,</span> cr<span class="token operator">,</span> <span class="token string">'bar'</span><span class="token operator">,</span> cr<span class="token operator">,</span> <span class="token string">'baz'</span><span class="token punctuation">.</span><br><span class="token comment">"Alternate way to embed newline characters in a String"</span><br>s <span class="token operator">:=</span> <span class="token string">'foo<br>bar<br>baz'</span><span class="token punctuation">.</span><br><br><span class="token comment">"Print each line."</span><br>String string<span class="token punctuation">:</span> s lineIndicesDo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:start</span> <span class="token variable">:end</span> <span class="token variable">:endWith</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span>s copyFrom<span class="token punctuation">:</span> start to<span class="token punctuation">:</span> end<span class="token punctuation">)</span> print<br><span class="token punctuation">]</span><span class="token punctuation">.</span><br><span class="token comment">"Alternate way to iterate over the lines in a String"</span><br>s substrings do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:sub</span> <span class="token punctuation">|</span></span> sub print<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The following table describes some of the instance methods defined in the <code>String</code> class that are not also defined in its superclass <code>CharacterSequence</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>,</code></td><td>answers new string that results from appending argument</td></tr><tr><td><code>&lt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than argument</td></tr><tr><td><code>&lt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is less than or equal to argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> value indicating if receiver is equal to argument</td></tr><tr><td><code>&gt;</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than argument</td></tr><tr><td><code>&gt;=</code></td><td>answers <code>Boolean</code> value indicating if receiver is greater than or equal to argument</td></tr><tr><td><code>at:</code></td><td>answers <code>Character</code> at given index</td></tr><tr><td><code>at:put:</code></td><td>replaces <code>Character</code> at given index</td></tr><tr><td><code>byteSize</code></td><td>answers size in bytes</td></tr><tr><td><code>findString:startingAt:</code></td><td>answers index after <code>startingAt:</code> where a substring begins, case sensitive</td></tr><tr><td><code>findStringCaseInsenstive:startingAt::</code></td><td>answers index after <code>startingAt:</code> where a substring begins, case insensitive</td></tr><tr><td><code>lineIndicesDo:</code></td><td>evalautes block <code>lineIndicesDo:</code> for each substring of <code>string:</code> delimited by CR, LF, or CRLF</td></tr><tr><td><code>percentEscapeUrl</code></td><td>answers URL encoded instance where non-ASCII characters are percent encoded</td></tr><tr><td><code>percentEscapeUrlField</code></td><td>answers URL encoded instance where non-ASCII characters in fields are percent encoded</td></tr><tr><td><code>size</code></td><td>answers largest index</td></tr><tr><td><code>substrings</code></td><td>answers <code>Array</code> of substrings delimited by whitespace characters</td></tr><tr><td><code>unescapePercents</code></td><td>answers reverse of <code>percentEscapeUrl</code></td></tr></tbody></table><p>The <code>format:</code> method returns a <code>String</code> created from a template using interpolation where input comes from an <code>Array</code>. For example, both of the following produce the string <code>'Player Gretzky is number 99.'</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">s <span class="token operator">:=</span> <span class="token string">'Player {1} is number {2}.'</span> format<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'Gretzky'</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>name <span class="token operator">:=</span> <span class="token string">'Gretzky'</span><span class="token punctuation">.</span><br>number <span class="token operator">:=</span> <span class="token number">99</span><span class="token punctuation">.</span><br>s <span class="token operator">:=</span> <span class="token string">'Player {1} is number {2}.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">.</span> number<span class="token punctuation">}</span><span class="token punctuation">.</span></code></pre><p>The <code>String</code> <code>format:</code> method is useful for print-style debugging. For example, the following is the equivalent of a <code>console.log</code> call in JavaScript.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token punctuation">(</span><span class="token string">'myVariable = {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>myVariable<span class="token punctuation">}</span><span class="token punctuation">)</span> print</code></pre><p>An even better approach is to defined the <code>logAs:</code> method in the <code>Object</code> class. This is described in the earlier &quot;Transcript Windows&quot; section.</p><p>The <code>padded:to:with:</code> method answers a copy formed by padding receiver on the left or right with a given <code>Character</code>. For example, the following code answers a <code>String</code> containing three spaces followed by <code>'19'</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">19</span> asString padded<span class="token punctuation">:</span> <span class="token symbol">#left</span> to<span class="token punctuation">:</span> <span class="token number">5</span> with<span class="token punctuation">:</span> Character space</code></pre><p>The <code>prefixAndSuffix:</code> method answers an <code>Array</code> of instances formed by splitting receiver on last occurrence of a <code>Character</code>. For exsample, the following code answers an <code>Array</code> containing <code>'/foo/bar'</code> and <code>'baz.txt')</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'/foo/bar/baz.txt'</span> prefixAndSuffix<span class="token punctuation">:</span> <span class="token char">$/</span></code></pre><h4 id="symbols" tabindex="-1">Symbols</h4><p>There are no particularly interesting class methods in the <code>Symbol</code> class.</p><p>The following table describes some of the instance methods defined in the <code>Symbol</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>asString</code></td><td>answers a <code>String</code> containing the same characters as receiver</td></tr><tr><td><code>isLiteral</code></td><td>always answers <code>true</code></td></tr><tr><td><code>numArgs</code></td><td>answers number of arguments in a keyword message or 0 if not</td></tr><tr><td><code>precedence</code></td><td>answers 0 if not a valid selector, 1 if unary, 2 if binary, and 3 if keyword</td></tr><tr><td><code>separateKeywords</code></td><td>answers space-separated <code>String</code> containing keywords</td></tr><tr><td><code>value:</code></td><td>answers result of sending receiver as a unary message to argument</td></tr></tbody></table><p>Many of the <code>Symbol</code> instance methods are useful for run-time evaluation of instances as keyword messages.</p><h3 id="uuids" tabindex="-1">UUIDs</h3><p>The package &quot;Identities-UUID&quot; generates UUID values. To install it, enter <code>Feature require: 'Identities-UUID'</code> in a Workspace and &quot;Do it&quot;. To generate a UUID value, use <code>UUID new</code>.</p><h3 id="collections" tabindex="-1">Collections</h3><p>Smalltalk supports a large number of collection classes. Collection elements can be any kind of object, including other collections.</p><p>The following list depicts the partial class hierarchy for collections:</p><ul><li><code>Collection</code><ul><li><code>SequenceableCollection</code><ul><li><code>ArrayedCollection</code><ul><li><code>Array</code></li><li><code>ByteArray</code></li><li><code>ColorArray</code></li><li><code>FloatArray</code></li><li><code>IntegerArray</code><ul><li><code>PointArray</code></li></ul></li></ul></li><li><code>Heap</code></li><li><code>Interval</code></li><li><code>LinkedList</code></li><li><code>OrderedCollection</code><ul><li><code>SortedCollection</code></li></ul></li></ul></li><li><code>Bag</code></li><li><code>Set</code><ul><li><code>Dictionary</code><ul><li><code>OrderedDictionary</code></li></ul></li></ul></li></ul></li><li><code>Array2D</code> - a two-dimensional array</li><li><code>SharedQueue</code></li></ul><h4 id="association" tabindex="-1">Association</h4><p>An <code>Association</code> represents a key/value pair. These are used by several other classes including <code>Dictionary</code> and <code>Bag</code>.</p><p>An <code>Association</code> instance can be created in the following ways:</p><pre class="language-smalltalk"><code class="language-smalltalk">a <span class="token operator">:=</span> Association key<span class="token punctuation">:</span> someKey value<span class="token punctuation">:</span> someValue<span class="token punctuation">.</span><br>a <span class="token operator">:=</span> someKey <span class="token operator">-</span><span class="token operator">></span> someValue<span class="token punctuation">.</span></code></pre><p>The message <code>-&gt;</code> is defined in the <code>Object</code> class which make it easy to create an <code>Association</code> with any object as the key.</p><p>The following table describes some of the instance methods defined in the <code>Association</code> class and its superclass <code>LookupKey</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>key</code></td><td>answers the receiver key</td></tr><tr><td><code>key:</code></td><td>modifies the receiver key</td></tr><tr><td><code>key:value:</code></td><td>modifies the receiver key and value</td></tr><tr><td><code>value</code></td><td>answers the receiver value</td></tr><tr><td><code>value:</code></td><td>modifies the receiver alue</td></tr></tbody></table><h4 id="collection" tabindex="-1">Collection</h4><p>The following table describes some of the class methods defined in the <code>Collection</code> class. These must be called on a concrete subclass, not on <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>with:</code></td><td>answers an instance containing one value</td></tr><tr><td><code>with:with:</code></td><td>answers an instance containing two values</td></tr><tr><td><code>with:with:with:</code></td><td>answers an instance containing three values</td></tr><tr><td><code>with:with:with:with:</code></td><td>answers an instance containing four values</td></tr><tr><td><code>with:with:with:with:with:</code></td><td>answers an instance containing five values</td></tr><tr><td><code>withAll:</code></td><td>answers an instance containing all the values in another collection</td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Collection</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>*</code></td><td>answers instance whose elements are receiver elements times argument</td></tr><tr><td><code>+</code></td><td>answers instance whose elements are receiver elements plus argument</td></tr><tr><td><code>,</code></td><td>answers instance whose elements are the concatenation of receiver and argument collections</td></tr><tr><td><code>-</code></td><td>answers instance whose elements are receiver elements minus argument</td></tr><tr><td><code>/</code></td><td>answers instance whose elements are receiver elements divided by argument</td></tr><tr><td><code>//</code></td><td>answers instance whose elements are receiver elements integer divided by argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> indicating if receiver and argument are equivalent</td></tr><tr><td><code>\\</code></td><td>answers instance whose elements are receiver elements modulo argument</td></tr><tr><td><code>abs</code></td><td>answers instance whose elements are absolute value of receiver elements</td></tr><tr><td><code>allSatisfy:</code></td><td>answers <code>Boolean</code> indicating if ALL elements satisfy a block; like <code>every</code> in JavaScript</td></tr><tr><td><code>anySatisfy:</code></td><td>answers <code>Boolean</code> indicating if ANY elements satisfy a block; like <code>some</code> in JavaScript</td></tr><tr><td><code>asArray</code></td><td>answers <code>Array</code> instance whose elements are those in receiver</td></tr><tr><td><code>asBag</code></td><td>answers <code>Bag</code> instance whose elements are those in receiver</td></tr><tr><td><code>asCommaStringAnd</code></td><td>answers comma-separated <code>String</code> where last elements are separated by &quot;and&quot;</td></tr><tr><td><code>asIdentitySet</code></td><td>answers <code>IdentifySet</code> instance whose elements are those in receiver with no duplicates</td></tr><tr><td><code>asOrderedCollection</code></td><td>answers <code>OrderedCollection</code> instance whose elements are those in receiver</td></tr><tr><td><code>asSortedCollection</code></td><td>answers <code>SortedCollection</code> instance whose elements are those in receiver</td></tr><tr><td><code>asSortedCollection:</code></td><td>same as <code>asSortedCollection</code>, but take block that defines sort order</td></tr><tr><td><code>asSet</code></td><td>answers <code>Set</code> instance whose elements are those in receiver with no duplicates</td></tr><tr><td><code>atRandom</code></td><td>answers a random element</td></tr><tr><td><code>average</code></td><td>same as <code>mean</code></td></tr><tr><td><code>ceiling</code></td><td>answers instances whose elements are the ceiling of receiver elements</td></tr><tr><td><code>collect:</code></td><td>answers instance whose elements are results of passing receiver elements to a block; like <code>map</code> in JavaScript</td></tr><tr><td><code>collect:andFold</code></td><td>answers instance whose elements are results of passing receiver elements to a block; like <code>map</code> in JavaScript</td></tr><tr><td><code>count:</code></td><td>answers number of receiver elements that satisfy argument block</td></tr><tr><td><code>detect:</code></td><td>answers first element in receiver that satisfies block argument; like <code>find</code> in JavaScript</td></tr><tr><td><code>do:</code></td><td>evaluates block argument for each element; like <code>forEach</code> in JavaScript</td></tr><tr><td><code>floor</code></td><td>answers instances whose elements are the floor of receiver elements</td></tr><tr><td><code>fold:</code></td><td>answers value that results from folding receiver elements with a block; like <code>reduce</code> in JavaScript</td></tr><tr><td><code>fold:ifEmpty:</code></td><td>like <code>fold:</code>, but specifies value to use if collection is empty</td></tr><tr><td><code>groupBy:</code></td><td>answers <code>Dictionary</code> where keys are values returned by passing each element to block argument and values are <code>OrderedCollection</code> instances</td></tr><tr><td><code>ifEmpty:</code></td><td>evalutes block argument if collection is empty</td></tr><tr><td><code>ifEmpty:ifNotEmpty:</code></td><td>combines <code>ifEmpty:</code> and <code>ifNotEmpty:</code></td></tr><tr><td><code>ifNotEmpty:</code></td><td>evalutes block argument if collection is not empty</td></tr><tr><td><code>ifNotEmpty:ifEmpty:</code></td><td>combines <code>ifNotEmpty:</code> and <code>ifEmpty:</code></td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if argument is an element of receiver</td></tr><tr><td><code>includesAllOf:</code></td><td>answers <code>Boolean</code> indicating if all elements in argument collection are elements of receiver</td></tr><tr><td><code>includesAnyOf:</code></td><td>answers <code>Boolean</code> indicating if any elements in argument collection are elements of receiver</td></tr><tr><td><code>inject:into:</code></td><td>similar to <code>fold:</code>, but can specify initial accumulator value; like <code>reduce</code> in JavaScript</td></tr><tr><td><code>intersection:</code></td><td>answers instance that only includes elements present in receiver and argument collection</td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if collection does not contain any elements</td></tr><tr><td><code>max</code></td><td>answers largest number element</td></tr><tr><td><code>mean</code></td><td>answers mean of number elements</td></tr><tr><td><code>min</code></td><td>answers smallest number element</td></tr><tr><td><code>noneSatisfy:</code></td><td>answers <code>Boolean</code> indicating if NONE of the elements satisfy a block</td></tr><tr><td><code>notEmpty</code></td><td>answers <code>Boolean</code> indicating if collection is not empty</td></tr><tr><td><code>occurrencesOf:</code></td><td>answers number of elements that are equal to argument</td></tr><tr><td><code>product</code></td><td>answers product of number elements</td></tr><tr><td><code>range</code></td><td>answers difference between max and min values</td></tr><tr><td><code>reduce:</code></td><td>same as fold:</td></tr><tr><td><code>reject:</code></td><td>answers instance containing receiver elements that do not satisfy a block</td></tr><tr><td><code>select:</code></td><td>answers instance containing receiver elements that satisfy a block; like <code>filter</code> in JavaScript</td></tr><tr><td><code>select:thenCollect</code></td><td>combines <code>select:</code> and <code>collect:</code></td></tr><tr><td><code>select:thenDo:</code></td><td>combines <code>select:</code> and <code>do:</code></td></tr><tr><td><code>sizes</code></td><td>answers number of elements in receiver</td></tr><tr><td><code>sorted</code></td><td>answers instance containing all receiver elements in sorted order</td></tr><tr><td><code>sqrt</code></td><td>answers instance whose elements are square root of receiver elements</td></tr><tr><td><code>squared</code></td><td>answers instance whose elements are squared values of receiver elements</td></tr><tr><td><code>sum</code></td><td>answers sum of receiver number elements</td></tr><tr><td><code>union:</code></td><td>answers <code>Set</code> instance that includes elements present in receiver or argument collection</td></tr></tbody></table><p>Collections support binary messages that operate on all the elements and return a new array containing the results. For example, <code>#(1 2 3) * 2</code> returns <code>#(2 4 6)</code>.</p><p>The <code>fold:</code> method uses the first element as the initial value and folds in the remaining elements. The <code>inject:into:</code> method takes an initial value and folds in all the elements.</p><p>The following code demonstrates some of the methods described above:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span> asCommaStringAnd <span class="token comment">"gives 'red, green and blue'<br><br>#(1 2 3) inject: 0 into: [:acc :n | acc + n] "</span>gives <span class="token number">6</span><span class="token comment">""</span><br><br><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">)</span> mean` <span class="token comment">"gives Fraction 5/2"</span></code></pre><p>I implemented the method <code>asOxfordCommaAnd</code> so the example above gives <code>'red, green, and blue;</code>.</p><h4 id="sequenceablecollection" tabindex="-1">SequenceableCollection</h4><p>There are no particularly interesting class methods in the <code>SequenceableCollection</code> class.</p><p>The following table describes some of the instance methods defined in the <code>SequenceableCollection</code> class that are not defined in the <code>Collection</code> superclass.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>+=</code></td><td>modifies receiver number elements by adding argument to each</td></tr><tr><td><code>-=</code></td><td>modifies receiver number elements by subtracting argument from each</td></tr><tr><td><code>allButFirst</code></td><td>answers copy including all but first element</td></tr><tr><td><code>allButFirst:</code></td><td>answers copy including all but first argument elements</td></tr><tr><td><code>allButFirstDo:</code></td><td>evaluates block argument with all but first element</td></tr><tr><td><code>allButLast</code></td><td>answers copy including all but last element</td></tr><tr><td><code>allButLast:</code></td><td>answers copy including all but last argument elements</td></tr><tr><td><code>allButLastDo:</code></td><td>evaluates block argument with all but last element</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers element at <code>at:</code> index or <code>ifAbsent:</code> if index out of bounds</td></tr><tr><td><code>atLast:</code></td><td>answers element an index that is argument from end (1 for last)</td></tr><tr><td><code>atLast:ifAbsent:</code></td><td>like <code>atLast:</code> but specifies value to return if not enough elements</td></tr><tr><td><code>combinations:atATimeDo:</code></td><td>evaluates <code>atATimeDo</code> once for every unique combination of <code>combinations:</code> elements</td></tr><tr><td><code>copyFrom:to:</code></td><td>answers instance containing only receiver elements from index <code>copyFrom:</code> to index <code>to:</code></td></tr><tr><td><code>do:displayingProgress:</code></td><td>evaluates a block for each receiver element and displays a progress bar (see example below)</td></tr><tr><td><code>findFirst:</code></td><td>like <code>detect:</code>, but answers element index of value instead of element value</td></tr><tr><td><code>findFirst:startingAt</code></td><td>like <code>findFirst:</code>, but starts search at a given index</td></tr><tr><td><code>findLast:</code></td><td>like <code>findFirst:</code>, but answers element index of last element that satisifies block argument</td></tr><tr><td><code>first</code></td><td>answers first element in receiver</td></tr><tr><td><code>first:</code></td><td>answers copy of first argument elements in receiver</td></tr><tr><td><code>head:</code></td><td>same as <code>first:</code></td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if receiver contains argument value</td></tr><tr><td><code>indexOf:</code></td><td>answers first index of argument value or 0</td></tr><tr><td><code>indexOf:startingAt:</code></td><td>answers index of argument value starting at a given index or 0</td></tr><tr><td><code>keysAndValuesDo:</code></td><td>evaluates block argument with all key/value pairs</td></tr><tr><td><code>last</code></td><td>answers last element in receiver</td></tr><tr><td><code>last:</code></td><td>answers copy of last argument elements in receiver</td></tr><tr><td><code>lastIndexOf:</code></td><td>answers last index of argument value or 0</td></tr><tr><td><code>middle</code></td><td>answers the middle element in receiver</td></tr><tr><td><code>permutationsDo:</code></td><td>evaluates block argument with an <code>OrderedCollection</code> once for each permutation of all receiver elements</td></tr><tr><td><code>polynomialEval:</code></td><td>answers result of using receiver number elements as polynomial coefficients with argument for <code>x</code></td></tr><tr><td><code>printStringWithNewline</code></td><td>answers <code>String</code> with newline between each element value</td></tr><tr><td><code>replace:</code></td><td>replace each element in receiver with result of passing it to argument block</td></tr><tr><td><code>reverse</code></td><td>same as <code>reversed</code></td></tr><tr><td><code>reversed</code></td><td>answers copy with elements in reverse order</td></tr><tr><td><code>shuffled</code></td><td>answers copy with elements in random order</td></tr><tr><td><code>tail:</code></td><td>same as <code>last:</code></td></tr><tr><td><code>with:collect:</code></td><td>answers <code>Array</code> of results from evaluating <code>collect:</code> block with corresponding elements from receiver and <code>with:</code> collections</td></tr><tr><td><code>with:do:</code></td><td>evaluates <code>do:</code> block with corresponding elements from receiver and <code>with:</code> collections</td></tr><tr><td><code>with:with:collect:</code></td><td>like <code>with:collect:</code>, but operates on three collections</td></tr><tr><td><code>with:with:do:</code></td><td>like <code>with:do:</code>, but operates on three collections</td></tr><tr><td><code>withIndexCollect:</code></td><td>like <code>collect:</code>, but passes element and index values to argument block</td></tr><tr><td><code>withIndexDo:</code></td><td>like <code>do:</code>, but passes element and index values to argument block</td></tr><tr><td><code>withNextDo:</code></td><td>evaluate argument block with each receiver element and the next element, using nil for next of last element</td></tr></tbody></table><p>In <code>polynomialEval:</code>, the first element is the constant, the second is the <code>x</code> coefficient, the third is the <code>x^2</code> coefficient, and so on.</p><p>The following code demonstrates using the <code>do:displayingProgress:</code> method.</p><p><img alt="Cuis SequenceableCollection do:displayingProgress:" style="width: 20%" src="/blog/assets/cuis-SequenceableCollection-do-displayingProgress.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">c <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token number">20</span> <span class="token number">30</span> <span class="token number">40</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>delay <span class="token operator">:=</span> Delay forSeconds<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>c do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:n</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span><span class="token string">'processing {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span><br>    delay wait<span class="token punctuation">.</span><br><span class="token punctuation">]</span> displayingProgress<span class="token punctuation">:</span> <span class="token string">'doing stuff'</span></code></pre><h4 id="arrayedcollection" tabindex="-1">ArrayedCollection</h4><p>There are no particularly interesting methods in this class.</p><h4 id="array" tabindex="-1">Array</h4><p><code>Array</code> instances are fixed-length, ordered collections. Most of the interesting <code>Array</code> methods are defined in the superclasses <code>SequenceableCollection</code> and <code>Collection</code>.</p><p>Compile-time literal arrays begin with <code>#(</code>, end with <code>)</code>, and contain space-separated values. For example, <code>#(true 7 'Tami' (Color red))</code>.</p><p>Run-time literal arrays begin with <code>{</code>, end with <code>}</code>, and contain dot-separated values. For example, <code>{name. breed}</code>.</p><p>The following table describes some of the instance methods defined in the <code>Array</code> class that are not defined in its superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>evalStrings</code></td><td>answers <code>Array</code> whose elements are the results of evaluating receiver <code>String</code> elements as Smalltalk expressions</td></tr></tbody></table><p>To create an array of numbers from a range, send the <code>#asArray</code> message to a <code>Range</code>. For example, <code>(1 to: 5) asArray</code> returns <code>#(1 2 3 4 5)</code>.</p><p>In addition to the <code>Array</code> class that can hold values of any type, there are predefined, type-specific array classes including <code>ByteArray</code>, <code>ColorArray</code>, <code>DoubleByteArray</code>, <code>DoubleWordArray</code>, <code>Int16PointArray</code>, <code>FloatArray</code>, <code>Float32Array</code>, <code>Float32PointArray</code>, <code>Float64Array</code>, <code>IntegerArray</code>, <code>PointArray</code>, <code>RunArray</code>, <code>RunNotArray</code>, and <code>WordArray</code>.</p><h4 id="interval" tabindex="-1">Interval</h4><p>Instances of the <code>Interval</code> class represent a finite arithmetic progression which is a sequence of numbers where the difference between consecutive terms is constant. An example is the numbers 2, 4, 6, and 8.</p><p>The <code>Interval</code> class is a subclass of <code>SequenceableCollection</code> which is a subclaass of <code>Collection</code>.</p><p>The following table describes some of the class methods defined in the <code>Interval</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>from:to:</code></td><td>answers an instance where the increment between values is 1</td></tr><tr><td><code>from:to:by:</code></td><td>answers an instance where the increment between values is <code>by:</code></td></tr><tr><td><code>from:to:count:</code></td><td>answers an instance where the number of values is <code>count:</code> and the increment can be a <code>Fraction</code></td></tr><tr><td><code>integersFrom:to:count:</code></td><td>answers an instance where the number of values is <code>count:</code> and the increment is the closest <code>Integer</code>, not a <code>Fraction</code></td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Interval</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>at:</code></td><td>answers the value at a given index</td></tr><tr><td><code>do:</code></td><td>evaluates a block for each value from first to last</td></tr><tr><td><code>extent</code></td><td>answers the difference between the last and first values</td></tr><tr><td><code>first</code></td><td>answers the first value</td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if argument is one of the values</td></tr><tr><td><code>increment</code></td><td>answers the increment between values</td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if the size is 0</td></tr><tr><td><code>last</code></td><td>answers the last value</td></tr><tr><td><code>size</code></td><td>answers the number of values</td></tr><tr><td><code>reverseDo:</code></td><td>evaluates a block for each value from last to first</td></tr></tbody></table><h4 id="linkedlist" tabindex="-1">LinkedList</h4><p><code>LinkedList</code> instances represent a singly-linked list of <code>Link</code> subclasses. Custom <code>Link</code> subclasses must be defined. For example, the <code>StringLink</code> class defined below has a single instance variable named &quot;value&quot;.</p><pre class="language-smalltalk"><code class="language-smalltalk">Link subclass<span class="token punctuation">:</span> <span class="token symbol">#StringLink</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'value'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><span class="token operator">!</span></code></pre><p>The <code>StringLink</code> class has the following class method for creating instances.</p><pre class="language-smalltalk"><code class="language-smalltalk">value<span class="token punctuation">:</span> aString<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">link</span> <span class="token punctuation">|</span></span><br>    link <span class="token operator">:=</span> <span class="token keyword">self</span> <span class="token keyword">new</span><span class="token punctuation">.</span><br>    link setValue<span class="token punctuation">:</span> aString<span class="token punctuation">.</span><br>    <span class="token operator">^</span> link</code></pre><p>The <code>StringLink</code> class has the following instance methods.</p><pre class="language-smalltalk"><code class="language-smalltalk">setValue<span class="token punctuation">:</span> aString<br>    value <span class="token operator">:=</span> aString<br><br>value<br>    <span class="token operator">^</span>value<br><br>value<span class="token punctuation">:</span> aString<br>    value <span class="token operator">:=</span> aString</code></pre><p>We can now create an instance of <code>LinkList</code> whose links are <code>StringLink</code> instances.</p><pre class="language-smalltalk"><code class="language-smalltalk">list <span class="token operator">:=</span> LinkedList <span class="token keyword">new</span><span class="token punctuation">.</span><br>list addLast<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>list addLast<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'cherry'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>list addFirst<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br><span class="token comment">"Output all the link values which are apple, banana, and cherry."</span><br>list do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:link</span> <span class="token punctuation">|</span></span> link value print<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>list size print<span class="token punctuation">.</span> <span class="token comment">"3"</span><br><br><span class="token punctuation">(</span><span class="token string">'first is {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>list first value<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token comment">"apple"</span><br><span class="token punctuation">(</span><span class="token string">'last is {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>list last value<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token comment">"cherry"</span><br><br>list removeLast<span class="token punctuation">.</span> <span class="token comment">"removes cherry"</span><br><br><span class="token comment">"Output all the link values which are apple and banana."</span><br>list do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:link</span> <span class="token punctuation">|</span></span> link value print<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p><code>Link</code> instances have the methods <code>nextLink</code> and <code>nextLink:</code> to get and set the link to which they refer. In addition to the <code>LinkedList</code> methods described below, these can be used to insert new <code>Link</code> instances into a <code>LinkedList</code>.</p><p>The following table describes some of the instance methods defined in the <code>LinkedList</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>add:</code></td><td>same as <code>addLast:</code></td></tr><tr><td><code>add:before:</code></td><td>adds <code>add:</code> <code>Link</code> before <code>before:</code> <code>Link</code></td></tr><tr><td><code>addFirst:</code></td><td>adds argument <code>Link</code> to beginning</td></tr><tr><td><code>addLast:</code></td><td>adds argument <code>Link</code> to end</td></tr><tr><td><code>at:</code></td><td>answers <code>Link</code> at argument index; error if absent</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers <code>Link</code> at <code>at:</code> index or value of <code>ifAbsent:</code> if absent</td></tr><tr><td><code>do:</code></td><td>evaluates argument block for each <code>Link</code></td></tr><tr><td><code>first</code></td><td>answers first <code>Link</code></td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if <code>size</code> is 0</td></tr><tr><td><code>last</code></td><td>answers last <code>Link</code></td></tr><tr><td><code>remove:ifAbsent:</code></td><td>removes <code>remove:</code> <code>Link</code> and answers it; answers <code>ifAbsent:</code> value if absent</td></tr><tr><td><code>removeFirst</code></td><td>removes and answers first <code>Link</code>; treats like a queue</td></tr><tr><td><code>removeLast</code></td><td>removes and answers last <code>Link</code>; treats like a stack</td></tr></tbody></table><h4 id="orderedcollection" tabindex="-1">OrderedCollection</h4><p><code>OrderedCollection</code> instances are variable-length, ordered collections that can contain duplicates.</p><p>To create an <code>OrderedCollection</code> from an array, send the <code>#newFrom:</code> message. For example, <code>fruits := OrderedCollection newFrom: #('apple' 'banana' 'cherry')</code></p><p>To get the number of elements, send the <code>#size</code> message. For example, <code>fruits size</code> returns <code>3</code>.</p><p>To get an element at a specific position send messages like <code>#first</code>, <code>#last</code>, and <code>#at:</code> which takes a 1-based index. For example, <code>fruits first</code> returns <code>'apple'</code>, <code>fruits last</code> returns <code>'cherry'</code>, and <code>fruits at: 2</code> returns <code>'banana'</code>.</p><p>To add an element to the end, send the <code>#add</code> message. For example, <code>fruits add: 'date'</code>.</p><p>To add an element at a specific index, send the <code>#add:beforeIndex:</code> or <code>#add:afterIndex</code> message. For example, <code>fruits add: 'orange' beforeIndex: 3</code>.</p><p>To remove an element at a given 1-based index send the <code>#removeAt</code> message. For example, <code>fruits removeAt: 3</code> removes <code>'cherry'</code>.</p><p>To get the index of the first occurence of a given value, send the <code>#indexOf:</code> message. For example, <code>fruits indexOf: 'banana'</code> returns 2.</p><p>The following table describes some of the instance methods defined in the <code>OrderedCollection</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>add:</code></td><td>adds argument to end</td></tr><tr><td><code>add:after:</code></td><td>adds <code>add:</code> object after <code>after:</code> object</td></tr><tr><td><code>add:afterIndex:</code></td><td>adds <code>add:</code> object after <code>afterIndex:</code> index</td></tr><tr><td><code>add:before:</code></td><td>adds <code>add:</code> object before <code>before:</code> object</td></tr><tr><td><code>add:beforeIndex:</code></td><td>adds <code>add:</code> object before <code>beforeIndex:</code> index</td></tr><tr><td><code>addAllFirst:</code></td><td>adds all objects in argument <code>OrderedColection</code> at beginning</td></tr><tr><td><code>addAllLast:</code></td><td>adds all objects in argument <code>OrderedColection</code> at end</td></tr><tr><td><code>at:</code></td><td>answers element at argument index</td></tr><tr><td><code>at:ifAbsentPut:</code></td><td>answers element at <code>at:</code> index; if not present, add value of <code>ifAbsentPut:</code> block</td></tr><tr><td><code>at:put:</code></td><td>replaces existing element at <code>at:</code> index with <code>put:</code> object</td></tr><tr><td><code>collect:thenSelect:</code></td><td>combines <code>collect:</code> and <code>select:</code></td></tr><tr><td><code>find:</code></td><td>answers index of first occurrence of argument value</td></tr><tr><td><code>removeAll</code></td><td>removes all elements</td></tr><tr><td><code>removeAllSuchThat:</code></td><td>removes all elements that satisfy argument block</td></tr><tr><td><code>removeAt:</code></td><td>removes element at argument index</td></tr><tr><td><code>removeFirst</code></td><td>removes first element and answers it</td></tr><tr><td><code>removeFirst:</code></td><td>removes first argument elements and answers <code>Array</code> of them</td></tr><tr><td><code>removeLast</code></td><td>removes first element and answers it</td></tr><tr><td><code>removeLast:</code></td><td>removes last argument elements and answers <code>Array</code> of them</td></tr><tr><td><code>sort</code></td><td>sorts the elements in place</td></tr><tr><td><code>sort:</code></td><td>sorts the elements in place using argument block to compare them</td></tr></tbody></table><p>The following code creates an instance of <code>OrderedCollection</code> containing <code>Symbol</code> objects that are names of fruits. It then sorts them on their length.</p><pre class="language-smalltalk"><code class="language-smalltalk">oc <span class="token operator">:=</span> OrderedCollection newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token symbol">#banana</span> <span class="token symbol">#watermelon</span> <span class="token symbol">#cherry</span> <span class="token symbol">#apple</span> <span class="token symbol">#plum</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>oc sort<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span> a size <span class="token operator">&lt;</span> b size<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h4 id="sortedcollection" tabindex="-1">SortedCollection</h4><p>The <code>SortedCollection</code> class is a subclass of <code>OrderedCollection</code>. Instances keep their elements in sorted order. The element objects must implement the <code>&lt;=</code> instance method.</p><p>The following code demonstrates defining a <code>Dog</code> class whose instances can used as elements in a <code>SortedCollection</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Dog</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'breed name'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br><span class="token comment">"class methods follow"</span><br><br>name<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setName<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br><br><span class="token comment">"instance methods follow"</span><br><br>breed<br>    <span class="token operator">^</span> breed<br><br>name<br>    <span class="token operator">^</span> name<br><br><span class="token operator">&lt;=</span> aDog<br>    <span class="token operator">^</span> <span class="token keyword">self</span> name <span class="token operator">&lt;=</span> aDog name<br><br>setName<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br>    name <span class="token operator">:=</span> nameString<span class="token punctuation">.</span><br>    breed <span class="token operator">:=</span> breedString</code></pre><p>The following code demonstrates creating a <code>SortedCollection</code> of <code>Dog</code> objects and printing their names.</p><pre class="language-smalltalk"><code class="language-smalltalk">comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">.</span><br>dogs <span class="token operator">:=</span> SortedCollection newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span>oscar<span class="token punctuation">.</span> comet<span class="token punctuation">}</span><span class="token punctuation">.</span><br>dogs do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span></code></pre><p>The output in the Transcript will be &quot;Comet&quot; followed by &quot;Oscar&quot;.</p><h4 id="bag" tabindex="-1">Bag</h4><p><code>Bag</code> instances are variable-length, unordered collections that can contain duplicates. Elements are stored in a dictionary where the keys are the objects and the values are their number of occurrences.</p><p>The following table describes some of the instance methods defined in the <code>OrderedCollection</code> class that are not also defined in the superclass <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>sortedCounts</code></td><td>answers a <code>SortedCollection</code> of <code>Association</code> objects where keys are counts and values are elements</td></tr><tr><td><code>sortedElements</code></td><td>answers a <code>SortedCollection</code> of <code>Association</code> objects where keys are elements and values are counts</td></tr><tr><td><code>withOccurrencesDo:</code></td><td>evaluates argument block for each unique element, passing it an element and its count</td></tr></tbody></table><p>The following code creates a <code>Bag</code> instance containing <code>String</code> fruit names, including many duplicates. It then sends several messages to the <code>Bag</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">b <span class="token operator">:=</span> Bag newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'apple'</span> <span class="token string">'banana'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>b sortedCounts print<span class="token punctuation">.</span><br>b sortedElements print<span class="token punctuation">.</span><br>b withOccurrencesDo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:obj</span> <span class="token variable">:count</span> <span class="token punctuation">|</span></span><br>   <span class="token punctuation">(</span><span class="token string">'{1} occurs {2} times.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>obj<span class="token punctuation">.</span> count<span class="token punctuation">}</span><span class="token punctuation">)</span> print<br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The code above produces the following output in the Transcript:</p><pre class="language-text"><code class="language-text">a SortedCollection(3 -> 'apple' 2 -> 'cherry' 1 -> 'banana')<br>a SortedCollection('apple' -> 3 'banana' -> 1 'cherry' -> 2)<br>cherry occurs 2 times.<br>apple occurs 3 times.<br>banana occurs 1 times.</code></pre><h4 id="set" tabindex="-1">Set</h4><p><code>Set</code> instances are unordered collections of unique values. The elements must supports the <code>=</code> and <code>hash</code> messages and cannot be <code>nil</code>.</p><p>To create an empty <code>Set</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">set <span class="token operator">:=</span> Set <span class="token keyword">new</span></code></pre><p>To create a <code>Set</code> that is populated from an <code>Array</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">set <span class="token operator">:=</span> Set newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'apple'</span> <span class="token string">'banana'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span><span class="token punctuation">)</span></code></pre><p>The following code demonstrates adding an element, removing an element, and testing for the existence of an element:</p><pre class="language-smalltalk"><code class="language-smalltalk">set add<span class="token punctuation">:</span> `orange`<span class="token punctuation">.</span><br>set remove<span class="token punctuation">:</span> <span class="token string">'banana'</span><span class="token punctuation">.</span><br>set includes <span class="token string">'apple`. "true"<br>set includes '</span>banana`<span class="token punctuation">.</span> <span class="token comment">"false"</span></code></pre><h4 id="dictionary" tabindex="-1">Dictionary</h4><p><code>Dictionary</code> instances are collections of key/value pairs. The keys are often symbols, but they can be any kind of object that supports the <code>=</code> and <code>hash</code> messages. The values can be any kind of object.</p><p>To create a <code>Dictionary</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict <span class="token operator">:=</span> Dictionary <span class="token keyword">new</span><span class="token punctuation">.</span><br><br><span class="token comment">"Can populate from a run-time Array of Association objects."</span><br>dict <span class="token operator">:=</span> Dictionary newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><br><br>dict <span class="token operator">:=</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span> asDictionary<span class="token punctuation">.</span></code></pre><p>It is not possible to create a <code>Dictionary</code> instance from a compile-time <code>Array</code> of <code>Association</code> objects because <code>Association</code> objects cannot be created at compile-time. This means the following cannot be used:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token symbol">#</span><span class="token punctuation">(</span> k1<span class="token operator">-</span><span class="token operator">></span>v1 k2<span class="token operator">-</span><span class="token operator">></span>v2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span></code></pre><p>To add a key/value pair:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> put<span class="token punctuation">:</span> value<span class="token punctuation">.</span><br>dict add<span class="token punctuation">:</span> key <span class="token operator">-</span><span class="token operator">></span> value<span class="token punctuation">.</span></code></pre><p>To get the value for a key:</p><pre class="language-smalltalk"><code class="language-smalltalk">value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span><br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsent<span class="token punctuation">:</span> defaultValue<br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsentPut<span class="token punctuation">:</span> defaultValue</code></pre><p>If a default value is not provided and the key is not found, an Error window will open that says &quot;key not found&quot;.</p><p>To get all the keys, values, or associations:</p><pre class="language-smalltalk"><code class="language-smalltalk">ks <span class="token operator">:=</span> dict keys<span class="token punctuation">.</span><br>vs <span class="token operator">=</span> dict values<span class="token punctuation">.</span><br>as <span class="token operator">=</span> dict associations<span class="token punctuation">.</span></code></pre><p>To iterate over the values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:value</span> <span class="token punctuation">|</span></span> value print <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>To iterate over the keys and values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict associationsDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:assoc</span> <span class="token punctuation">|</span></span><br>    Transcript<br>        show<span class="token punctuation">:</span> assoc key<span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> <span class="token string">' '</span><span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> assoc value<span class="token punctuation">;</span><br>        cr<br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The following table describes some of the instance methods defined in the <code>Dictionary</code> class that are not also defined in the superclasses <code>Set</code> or <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>addAll:</code></td><td>adds key/value pairs described by a <code>Collection</code> of <code>Association</code> objects</td></tr><tr><td><code>associationAt:</code></td><td>answers <code>Association</code> for argument key; error if not found</td></tr><tr><td><code>associationAt:ifAbsent:</code></td><td>answers <code>Association</code> for <code>associationAt:</code> key or <code>ifAbsent:</code> value if not found</td></tr><tr><td><code>associations</code></td><td>answers <code>Array</code> of <code>Association</code> objects for all key/value pairs</td></tr><tr><td><code>associationsDo:</code></td><td>evaluates argument block for each <code>Association</code></td></tr><tr><td><code>at:</code></td><td>answers value for argument key; error if not found</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers value for <code>at:</code> key or <code>ifAbsent:</code> value if not found</td></tr><tr><td><code>at:ifAbsentPut:</code></td><td>answers value for <code>at:</code> key; if not found, adds and answers <code>ifAbsentPut:</code> value</td></tr><tr><td><code>at:ifPresent:</code></td><td>if <code>at:</code> key is present, answers value of passing value to <code>ifAbsent</code> block; otherwise answers <code>nil</code></td></tr><tr><td><code>at:ifPresent:ifAbsent:</code></td><td>combines <code>at:ifPresent</code> and <code>at:ifAbsent</code></td></tr><tr><td><code>at:put:</code></td><td>adds key <code>at:</code> with value <code>put:</code></td></tr><tr><td><code>bindingOf:</code></td><td>answers <code>Assocication</code> for argument key</td></tr><tr><td><code>bindingsDo:</code></td><td>same as <code>associationsDo</code></td></tr><tr><td><code>hasBindingThatBeginsWith:</code></td><td>answers <code>Boolean</code> indicating if any <code>String</code> key begins with argument; error if non-<code>String</code> keys</td></tr><tr><td><code>includesKey:</code></td><td>answers <code>Boolean</code> indicating if argument key is present</td></tr><tr><td><code>keys</code></td><td>answers <code>Array</code> of all keys</td></tr><tr><td><code>keysAndValuesDo:</code></td><td>evaluates argument block for each key/value pair passing key and value arguments to block</td></tr><tr><td><code>keysAndValuesRemove:</code></td><td>removes all key/value pairs that satisfy argument block, passing key and value arguments to block</td></tr><tr><td><code>keysDo:</code></td><td>evaluates argument block for each key</td></tr><tr><td><code>removeKey:</code></td><td>removes key/value pair for argument key</td></tr><tr><td><code>removeKey:ifAbsent:</code></td><td>removes key/value pair for <code>removeKey:</code> key; answers removed value if present; otherwise answers <code>ifAbsent:</code> value</td></tr><tr><td><code>select:</code></td><td>answers new <code>Dictionary</code> containing all key/value pairs whose value satisfies argument block</td></tr><tr><td><code>values</code></td><td>answers <code>Array</code> of all values</td></tr><tr><td><code>valuesDo:</code></td><td>evaluates argument block for each value</td></tr></tbody></table><h4 id="ordereddictionary" tabindex="-1">OrderedDictionary</h4><p>The <code>OrderedDictionary</code> class is a subclass of <code>Dictionary</code>. Instances remember the order in which entries were added. Iteration methods like <code>do:</code>, <code>keysDo:</code> and <code>associationsDo:</code> and <code>valuesDo:</code>. process the entries in that order.</p><p>The following code demonstrates creating an <code>OrderedDictionary</code> whose values are objects from the <code>Dog</code> class defined the <code>SortedCollection</code> section above, and printing their names.</p><pre class="language-smalltalk"><code class="language-smalltalk">comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">.</span><br>dict <span class="token operator">:=</span> OrderedDictionary <span class="token keyword">new</span><span class="token punctuation">.</span><br>dict at<span class="token punctuation">:</span> comet name put<span class="token punctuation">:</span> comet<span class="token punctuation">.</span><br>dict at<span class="token punctuation">:</span> oscar name put<span class="token punctuation">:</span> oscar<span class="token punctuation">.</span><br>dogs do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span></code></pre><p>The output in the Transcript will be &quot;Comet&quot; followed by &quot;Oscar&quot;.</p><h4 id="identity-collections" tabindex="-1">Identity Collections</h4><p>The collection classes <code>IdentityBag</code>, <code>IdentityDictionary</code>, and <code>IdentitySet</code> are similar to their non-identity counterparts, but differ in that elements are compared using <code>==</code> instead of <code>=</code>. This means it checks to see if they are the same object in memory rather than checking for equal values.</p><h4 id="weak-collections" tabindex="-1">Weak Collections</h4><p>The collection classes <code>WeakArray</code>, <code>WeakKeyDictionary</code>, <code>WeakIdentityKeyDictionary</code>, <code>WeakValueDictionary</code>, <code>WeakSet</code>, and <code>WeakIdentitySet</code> are similar to their non-week counterparts, but they differ in that objects to which they refer are not prevented from being garbage collected if they are only referred to by weak collections.</p><p>If an attempt is made to use an element in one of these collections that has been gargage collected, its value will be <code>nil</code>.</p><p>For example, create a class named <code>WeakSetDemo</code> with the instance variable <code>set</code> and the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">comet</span> <span class="token variable">oscar</span> <span class="token punctuation">|</span></span><br>    comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>    oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'GSP'</span><span class="token punctuation">.</span><br>    set <span class="token operator">:=</span> WeakSet newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span>comet<span class="token punctuation">.</span> oscar<span class="token punctuation">}</span><span class="token punctuation">.</span><br>    set do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>first<br>    <span class="token operator">^</span> set asArray first</code></pre><p>Enter the following lines in a Workspace, select them, and &quot;Print it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk">demo <span class="token operator">:=</span> WeakSetDemo <span class="token keyword">new</span><span class="token punctuation">.</span> <span class="token comment">"invokes initialize"</span><br>demo first</code></pre><p>The result will be <code>nil</code> because the <code>comet</code> and <code>oscar</code> objects will be garbage collected after the <code>initialize</code> method executes.</p><h2 id="exception-handling" tabindex="-1">Exception Handling</h2><p>Methods can throw exceptions. Exceptions that are thrown by code in a block can be caught and handled. Unhandled exceptions result in a Debug window being opened that contains a stack trace.</p><p>Smalltalk seems to use the words &quot;exception&quot; and &quot;error&quot; interchangably.</p><p>To throw a generic <code>Exception</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">Error signal<span class="token punctuation">:</span> <span class="token string">'some message'</span></code></pre><p>Smalltalk provides many subclasses of the <code>Exception</code> class. Examples include <code>ArithmeticError</code>, <code>AssertionFailure</code>, <code>Error</code>, <code>Halt</code>, <code>MessageNotUnderstood</code>, <code>NotYetImplemented</code>, and <code>ZeroDivide</code>.</p><p>To define a custom exception, create a class that is a subclass of the <code>Exception</code> class or one of its subclasses such as <code>Error</code>. The custom class can include instance variables and methods that are specific to that exception. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">Error subclass<span class="token punctuation">:</span> <span class="token symbol">#OutOfBoundsException</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'lowerBound upperBound'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>The following class method is used to create an instance:</p><pre class="language-smalltalk"><code class="language-smalltalk">lower<span class="token punctuation">:</span> lowerNumber upper<span class="token punctuation">:</span> upperNumber<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setLower<span class="token punctuation">:</span> lowerNumber upper<span class="token punctuation">:</span> upperNumber</code></pre><p>The following instance method is used by the class method above:</p><pre class="language-smalltalk"><code class="language-smalltalk">setLower<span class="token punctuation">:</span> lowerNumber upper<span class="token punctuation">:</span> upperNumber<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    lowerBound <span class="token operator">:=</span> lowerNumber<span class="token punctuation">.</span><br>    upperBound <span class="token operator">:=</span> upperNumber</code></pre><p>If an exception subclass defines class methods that create a new instance, make sure to call <code>super initialize</code> as shown above.</p><p>To throw a custom exception send the class, or an instance of it, the <code>#signal:</code> message. For example, the following instance method can be defined in a class that has a <code>score</code> instance variable:</p><pre class="language-smalltalk"><code class="language-smalltalk">score<span class="token punctuation">:</span> aNumber<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">ex</span> <span class="token punctuation">|</span></span><br>    ex <span class="token operator">:=</span> OutOfBoundsException lower<span class="token punctuation">:</span> lowerBound upper<span class="token punctuation">:</span> upperBound<span class="token punctuation">.</span><br>    aNumber <span class="token operator">&lt;</span>  lowerBound ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> ex signal<span class="token punctuation">:</span> <span class="token string">'too low'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    aNumber <span class="token operator">></span> upperBound ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> ex signal<span class="token punctuation">:</span> <span class="token string">'too high'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    score <span class="token operator">:=</span> aNumber</code></pre><p>To catch an exceptions that may be thrown by a method, send a message that invokes the method inside a block and send the <code>#on:do:</code> message to the block. Sending the message <code>#messageText</code> to an exception object returns the message text of the exception.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token punctuation">[</span>s <span class="token operator">:=</span> Game <span class="token keyword">new</span> score<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">]</span> on<span class="token punctuation">:</span> OutOfBoundsException do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:ex</span> <span class="token punctuation">|</span></span><br>    ex messageText print<span class="token punctuation">.</span><br><span class="token punctuation">]</span></code></pre><h2 id="unit-tests" tabindex="-1">Unit Tests</h2><p>Unit tests verify that the code is working as expected now. They can also be run again in the future to verify that the code has not regressed.</p><p>One way to learn how to write Smalltalk unit tests is to install some tests provided in the Smalltalk distribution. and study them. To do this:</p><ul><li>Open a &quot;File List&quot; from the World menu.</li><li>Navigate to and expand <code>Cuis-Smalltalk-Dev</code> or the name of your version of Cuis.</li><li>Navigate to and expand &quot;Packages&quot; and then &quot;Features&quot;.</li><li>Enter &quot;test&quot; in the filter input in the upper-left.</li><li>Select one of more of the packages whose names begin with &quot;Tests-&quot;.</li><li>Click the &quot;install package&quot; button.</li><li>View the code for those packages in a System Browser.</li></ul><p>Let's walk through the steps to create and run unit tests for a class.</p><p>The class we will test is <code>Pets</code> which is defined by the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Pets</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'dogs cats'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>The <code>Pets</code> class has the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    dogs <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    cats <span class="token operator">:=</span> <span class="token number">0</span><br><br>addCat<br>    cats <span class="token operator">:=</span> cats <span class="token operator">+</span> <span class="token number">1</span><br><br>addDog<br>    dogs <span class="token operator">:=</span> dogs <span class="token operator">+</span> <span class="token number">1</span><br><br>cats<br>    <span class="token operator">^</span> cats<br><br>dogs<br>    <span class="token operator">^</span> dogs</code></pre><p>The supported assertion methods defined in the <code>TestCase</code> class include:</p><ul><li><p><code>assert:</code></p><p>This asserts that the value of the argument is <code>true</code> or is a block whose value is <code>true</code>.</p></li><li><p><code>assert:changes:</code></p><p>This asserts that value of the <code>changes:</code> block changes after evaluating the <code>assert:</code> block.</p></li><li><p><code>assert:changes:by</code></p><p>This asserts that value of the <code>changes:</code> block changes by <code>by:</code> after evaluating the <code>assert:</code> block.</p></li><li><p><code>assert:changes:from:to</code></p><p>This asserts that value of the <code>changes:</code> block changes from <code>from:</code> to <code>to:</code> after evaluating the <code>assert: block</code>.</p></li><li><p><code>assert:description</code></p><p>This asserts that the value of <code>assert:</code> is <code>true</code>. If not, the test files with the message <code>description:</code>.</p></li><li><p><code>assert:description:resumable</code></p><p>TODO: What is a <code>resumableFailure</code>?</p></li><li><p><code>assert:doesNotChange</code></p><p>This is the opposite of <code>assert:changes:</code>. It asserts that value of the <code>doesNotChange:</code> block does not change after evaluating the <code>assert:</code> block.</p></li><li><p><code>assert:equals</code></p><p>This asserts that the value of <code>assert:</code> (not a block) is equal to <code>equals:</code>.</p></li><li><p><code>assert:includes</code></p><p>This asserts that the collection <code>assert:</code> includes an element equal to <code>includes:</code>.</p></li></ul><p>For comparing floating point numbers, consider adding the following instance methods to the <code>TestCase</code> class.</p><pre class="language-smalltalk"><code class="language-smalltalk">assert<span class="token punctuation">:</span> aNumber isCloseTo<span class="token punctuation">:</span> anotherNumber<br>    <span class="token comment">"This asserts that the value of `assert:` is<br>    within the default precision (0.0001) of `isCloseTo:`."</span><br><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> aNumber isCloseTo<span class="token punctuation">:</span> anotherNumber<br>        withPrecision<span class="token punctuation">:</span> <span class="token keyword">self</span> defaultPrecision<br>assert<span class="token punctuation">:</span> aNumber isCloseTo<span class="token punctuation">:</span> anotherNumber withPrecision<span class="token punctuation">:</span> aPrecision<br>    <span class="token comment">"This asserts that the value of `assert:`<br>    is within `withinPrecision:` of `isCloseTo:`."</span><br><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span><br>        <span class="token punctuation">(</span><span class="token keyword">self</span> is<span class="token punctuation">:</span> aNumber closeTo<span class="token punctuation">:</span> anotherNumber withPrecision<span class="token punctuation">:</span> aPrecision<span class="token punctuation">)</span><br><br>defaultPrecision<br>    <span class="token operator">^</span> <span class="token number">0.0001</span><br><br>is<span class="token punctuation">:</span> aNumber closeTo<span class="token punctuation">:</span> anotherNumber withPrecision<span class="token punctuation">:</span> aPrecision<br>    aNumber <span class="token operator">=</span> <span class="token number">0</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span> anotherNumber abs <span class="token operator">&lt;</span> aPrecision <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> <span class="token punctuation">(</span>aNumber <span class="token operator">-</span> anotherNumber<span class="token punctuation">)</span> abs <span class="token operator">&lt;</span><br>      <span class="token punctuation">(</span>aPrecision <span class="token operator">*</span> <span class="token punctuation">(</span>aNumber abs max<span class="token punctuation">:</span> anotherNumber abs<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>To create unit tests for the <code>Pets</code> class:</p><ul><li><p>Create a new class in the same class category as the class to be tested that is a subclass of <code>TestCase</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">TestCase subclass<span class="token punctuation">:</span> <span class="token symbol">#PetsTests</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Add the message category &quot;testing&quot;.</p></li><li><p>Add instance methods in the &quot;testing&quot; category whose names begin with &quot;test&quot;. Each method can contain any number of assertions. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">testDogs<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">demo</span> <span class="token punctuation">|</span></span><br>    demo <span class="token operator">:=</span> Pets <span class="token keyword">new</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"dogs is now 0."</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo addDog <span class="token punctuation">]</span> changes<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo dogs<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"dogs is now 1."</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo addDog <span class="token punctuation">]</span> changes<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo dogs<span class="token punctuation">]</span> by<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"dogs is now 2."</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo addDog <span class="token punctuation">]</span> changes<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo dogs<span class="token punctuation">]</span> from<span class="token punctuation">:</span> <span class="token number">2</span> to<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"dogs is now 3."</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> demo dogs equals<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo addCat <span class="token punctuation">]</span> doesNotChange<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo dogs<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>testCats<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">demo</span> <span class="token punctuation">|</span></span><br>    demo <span class="token operator">:=</span> Pets <span class="token keyword">new</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> <span class="token punctuation">[</span> demo cats <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">]</span> description<span class="token punctuation">:</span> <span class="token string">'no cats'</span><span class="token punctuation">.</span><br><br>testCollections<br>    <span class="token comment">"This test isn't related to the Pets class."</span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">coll</span> <span class="token punctuation">|</span></span><br>    coll <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token number">5</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> coll includes<span class="token punctuation">:</span> <span class="token number">5</span><br><br>testNumbers<br>    <span class="token comment">"This test isn't related to the Pets class."</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> Float pi isCloseTo<span class="token punctuation">:</span> <span class="token number">3.14159</span></code></pre></li></ul><p>To run tests, select a test class, test method category, or test method, and press cmd-t (run tests). Alternatively, open a &quot;SUnit Test Runner&quot; from the World menu, select one or more test classes, and click the &quot;Run&quot; button. After adding new test classes, click the &quot;Refresh&quot; button to make the &quot;SUnit Test Runner&quot; window aware of them.</p><p><img alt="Cuis SUnit Test Runner" style="width: 90%" src="/blog/assets/cuis-sunit-test-runner.png?v=1.1.1"></p><h2 id="color" tabindex="-1">Color</h2><p>The <code>Color</code> class defines many methods for creating and operating on colors. It defines the following class methods that create colors by name:</p><ul><li><code>black</code>, <code>blue</code>, <code>brown</code>, <code>cyan</code>, <code>gray</code>, <code>green</code>, <code>magenta</code>, <code>orange</code>, <code>pink</code>, <code>purple</code>, <code>red</code>, <code>tan</code>, <code>white</code>, <code>yellow</code></li><li><code>lightBlue</code>, <code>lightBrown</code>, <code>lightCyan</code>, <code>lightGray</code>, <code>lightGreen</code>, <code>lightMagenta</code>, <code>lightOrange</code>, <code>lightRed</code>, <code>lightYellow</code></li><li><code>darkGray</code>, <code>veryDarkGray</code>, <code>veryLightGray</code>, <code>veryVeryDarkGray</code>, <code>veryVeryLightGray</code></li><li><code>transparent</code></li></ul><h2 id="morphic" tabindex="-1">Morphic</h2><p>Morphic is a GUI framework that is included into popular Smalltalk images. It defines user interfaces with &quot;morphs&quot; which are what other graphical systems refer to as widgets or components. Morphs are graphical items that can be added to the <code>WorldMorph</code> (desktop) or a <code>LayoutMorph</code>. TODO: Technically speaking, can any morph be embedded in any other morph?</p><p>For a great introduction to Morphic, see <a href="https://www.youtube.com/watch?v=62baNn3c56Y" target="_blank">Holistic computing with Smalltalk and Morphic. Part 1</a>.</p><p>Some of the methods in Morphic classes are inconsistently named. For example, the class <code>TextModelMorph</code> defines the methods <code>alwaysHideVerticalScrollbar</code> and <code>hideScrollBarsIndefinitely</code>. Note how the &quot;b&quot; is sometimes lowercase and sometimes uppercase.</p><h3 id="creating-and-modifying-morphs" tabindex="-1">Creating and Modifying Morphs</h3><p>To create a morph:</p><ul><li>Open the World menu.</li><li>Select &quot;New morph...&quot;.</li><li>In the dialog that appears, select a category of morphs and then a specific kind (ex. <code>BoxedMorph</code>).</li><li>The morph will appear attached to the cursor (uses the <code>Morph</code> method <code>openInHand</code>).</li><li>Move the cursor to the location where the morph should be placed and click to drop it.</li></ul><p>To modify an existing morph:</p><ul><li>cmd-click a morph to open its halo.</li><li>Click the blue menu button on the top and select &quot;copy to clipboard&quot;.</li><li>Open a Workspace window.</li><li>Assign the morph to a variable. For example, enter <code>morph :=</code> and press cmd-p to paste the reference.</li><li>Press cmd-d (Do it).</li><li>Send messages to the morph to modify it. For example, <code>morph borderColor: Color red</code></li></ul><p>To change the colors used by a morph from its halo:</p><ul><li>cmd-click a morph to open its halo.</li><li>Click the blue menu button on the top and select &quot;copy to clipboard&quot;.</li><li>Select &quot;change color...&quot;</li><li>A window titled &quot;Click-Select a Color&quot; will appear attached to the cursor.</li><li>Position the window by moving the cursor and click to drop it.</li><li>Click a color swatch.</li><li>A menu will appear with the options &quot;Cancel&quot;, &quot;adoptWidgetsColor:&quot;, &quot;color:&quot;, and &quot;borderColor:&quot;. Select an option to change that color property of the morph. Some morphs don't support all the options. For example, &quot;color&quot; of a <code>LabelMorph</code> can be changed, but it does not have a border. TODO: What does &quot;adoptWidgetsColor:&quot; do?</li></ul><p>To explicitly set the size of a morph, send it the <code>morphExtent:</code> message with a <code>Point</code> value that represents the new width and height. For example, <code>morph morphExtent: 200@100</code>.</p><p>Only a small set of morphs are provided by default. A good source of additional morphs is the package &quot;UI-Tools&quot;. To install this, open a Workspace, enter <code>Feature require: 'UI-Tools'</code>, and press cmd-d (Do it). This installs many other packages including:</p><ul><li>Collections-CompactArrays</li><li>Compression</li><li>CSS3</li><li>Graphics-Files-Additional</li><li>UI-Click-Select</li><li>UI-Color-Panel</li><li>UI-Components</li><li>UI-Core</li><li>UI-DragAndDrop</li><li>UI-Edit-Lens</li><li>UI-Entry</li><li>UI-Layout-Panel</li><li>UI-MetaProperties</li><li>UI-Palette</li><li>UI-Panel</li><li>UI-Shapes</li><li>UI-Tools</li><li>UI-Widgets</li></ul><p>The set of &quot;Basic&quot; morphs will now include <code>BoxedMorph</code>, <code>EllipseMorph</code>, <code>FrameMorph</code>, <code>ImageMorph</code>, <code>LabelMorph</code>, <code>LineMorph</code>, <code>PointerLineMorph</code>, <code>Sonogram</code>, and <code>TileResizeMorph</code>. TODO: Why does selecting <code>Sonogram</code> lock up the image, requiring a Force Quit?</p><p>TODO: Supposedly Cuis 7 will remove support for the UI-Tools package and the desired subpackages will need to be installed individually. Still true?</p><p>See my Morphic demos in package <code>Volkmann</code> in the classes <code>MorphicDemos</code> and <code>MorphicGreet</code>. In a Workspace, enter <code>MorphicDemos incDecButtons.</code> and &quot;Do it&quot;. Then enter <code>MorphicGreet new.</code> and &quot;Do it&quot;.</p><h3 id="halo" tabindex="-1">Halo</h3><p>A morph halo is a set of circle buttons, referred to as &quot;handles&quot;, that surround a morph. Each handle changes the morph in some way or reveals information about it.</p><p>To open the halo for a morph, cmd-click it in Cuis or option-click it in Squeak. If the item is embedded in other morphs, repeat this multiple times until a halo appears around the desired morph.</p><p>The class of the morph will be displayed at the bottom of the morph.</p><p><img alt="Smalltalk halo" style="width: 50%" src="/blog/assets/smalltalk-halo.png?v=1.1.1"></p><p>The following buttons are provided:</p><table><thead><tr><th>Button</th><th>Location</th><th>Purpose</th></tr></thead><tbody><tr><td>red circle with white &quot;x&quot;</td><td>upper-left</td><td>removes the item</td></tr><tr><td>blue circle with white document</td><td>top</td><td>opens menu &quot;A&quot; (1)</td></tr><tr><td>black circle with house</td><td>top</td><td>drag to move the item within its parent</td></tr><tr><td>brown circle with resize icon</td><td>top</td><td>drag to move the item out of its parent</td></tr><tr><td>green circle with copy icon</td><td>upper-right</td><td>drag to position a duplicate of the item</td></tr><tr><td>orange circle with wrench</td><td>right side</td><td>opens a menu of debugging options</td></tr><tr><td>blue circle with magnifier glass</td><td>right side</td><td>drag to change scale of item</td></tr><tr><td>yellow circle with resize icon</td><td>lower-right</td><td>drag to resize the item</td></tr><tr><td>light blue circle with question mark</td><td>bottom</td><td>click and hold to display a related tooltip (2)</td></tr><tr><td>blue circle with rotate icon</td><td>lower-left</td><td>drag to rotate item</td></tr><tr><td>dull yellow circle with odd shape</td><td>left side</td><td>click to collapse (hide) the item (3)</td></tr><tr><td>orange circle with wrench</td><td>left side</td><td>opens an &quot;Explore&quot; window (4)</td></tr></tbody></table><p>A morph can also be dragged directly without opening its halo and using the drag buttons. This only works if the area that is dragged does not process mouse events. For example, you cannot drag a morph that contains a button by dragging the button.</p><p>TODO: How can you change the point about which a morph rotates?</p><p>(1) This menu contains the following options:</p><ul><li>send to back</li><li>bring to front</li><li>embed into &gt;</li><li>change color...</li><li>halo actions...</li><li>checkbox for &quot;resist being picked up&quot;</li><li>checkbox for &quot;be locked&quot;</li><li>copy to clipboard</li><li>export...</li><li>debug...</li></ul><p>(2) It seems most of the help tooltips default to &quot;Help not yet supplied&quot;. To edit the help text, click the orange circle on the right, select &quot;edit balloon help&quot;, and modify the help text.</p><p>(3) To restore a collapsed item, click it's thumbnail in the bottom bar.</p><p>(4) &quot;Explore&quot; windows enable viewing data associated with an item such as its location, extent (size), and color.</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-Inspectors.html" target="_blank">A brief introduction to Inspectors</a>.</p><h3 id="desktop-color" tabindex="-1">Desktop Color</h3><p>One way to change the desktop color is to:</p><ul><li>Right-click the desktop to open its halo.</li><li>Click the blue menu button.</li><li>Select debug...inspect morph to open an Inspect window.</li><li>Click in the bottom pane of the Inspect window.</li><li>Enter <code>self color: Color red</code> or use some other color name.</li><li>&quot;Do it&quot;.</li></ul><p>This works with all colors except <code>transparent</code> and alpha values are ignored.</p><h3 id="embedding" tabindex="-1">Embedding</h3><p>To embed a morph into another (such as a LayoutMorph) so they are treated as a single unit and can be positioned together:</p><ul><li>Drag a morph on top of its intended parent morph.</li><li>Open the halo of the morph.</li><li>Click the blue circle on the top.</li><li>Select &quot;embed into&quot; ... {parent morph name}. The parent morph name is typically &quot;LayoutMorph&quot;.</li></ul><h3 id="layoutmorph" tabindex="-1">LayoutMorph</h3><p>A <code>LayoutMorph</code> arranges submorphs in a row or column. Pratically any layout can be achieved by nesting instances of this class.</p><p>An instance can be created with:</p><ul><li><p><code>LayoutMorph newColumn</code></p></li><li><p><code>LayoutMorph newRow</code></p></li><li><p><code>LayoutMorph new</code></p><p>This calls <code>newRow</code> and sets the background color to <code>Color red alpha: 0.2</code>.</p></li></ul><p>For example, <code>myLayout := Layout newRow</code>.</p><p>To add a submorph to a <code>LayoutMorph</code>, send it the <code>#addMorph:</code> message. For example, <code>myLayout addMorph: EllipseMorph new</code> and <code>myLayout addMorph: BoxedMorph new</code>.</p><p>By default, there will be no separation between the submorphs. To add separation, send the <code>#separationX:</code>, <code>#separationY</code>, or <code>#separation:</code> (both x and y) messages. For example, <code>myLayout separation: 20</code>.</p><p>By default, all the submorphs will be pushed to the left of a row or top of a column. To change this, send the <code>#axisEdgeWeight:</code> message with a number from 0 to 1. A value zero pushes to the left/top, a value one pushes to the right/bottom, and a value of 0.5 centers.</p><p>If the UI-Layout-Panel package is installed, all of these values can be specified interactively.</p><ul><li>Open the halo for a <code>LayoutMorph</code>.</li><li>Click the blue menu button.</li><li>Select &quot;edit me (a LayoutMorph)&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied withthe changes, close the dialog.</li></ul><p><img alt="Cuis Morphic Layout dialog" style="width: 75%" src="/blog/assets/cuis-morphic-layout-dialog.png?v=1.1.1"></p><h3 id="editing-characteristics" tabindex="-1">Editing Characteristics</h3><p>Many chararacteristics of a morph can be edited by opening its halo and clicking its blue menu button. To get a halo for a submorph, cmd-click repeatedly until the halo appears around the target morph. The following menu will appear:</p><p><img alt="Cuis halo blue menu" style="width: 60%" src="/blog/assets/cuis-halo-blue-menu.png?v=1.1.1"></p><p>Click the push pin at the upper-right of the menu to keep the menu open, which simplifies making multiple changes.</p><p>To change the border width, size (<code>morphExtent</code>), or position (<code>morphPosition</code>) of a morph:</p><ul><li>Click <code>borderWidth</code>, <code>morphExtent</code>, or <code>morphPosition</code>.</li><li>Modify the numbers in the dialog that appears.</li><li>Click the &quot;Accept&quot; to save the changes or the &quot;Cancel&quot; button to discard them.</li></ul><p>To change the border color or color of a morph:</p><ul><li>Click &quot;borderColor&quot; or &quot;color&quot;.</li><li>Select one of the following color sets to open a dialog containing color swatches: CSS3 (Web) Colors, Crayon Colors, NBSISCC Colors, XKCD COlors, or ColorMix Editor (opens a Color Editor dialog). A Color Editor dialog enables selecting a color with RGB, HSL, and transparency.</li><li>Drag a color swatch from the dialog onto the swatch for &quot;borderColor&quot; or &quot;color&quot;.</li><li>Close the color swatch dialog.</li><li>Close the morph options menu.</li></ul><p>To edit the width, height, and off-axis edge weight of a submorph</p><ul><li>Open the halo for a submorph.</li><li>Click the blue menu button.</li><li>Select &quot;edit my LayoutSpec&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied withthe changes, close the dialog.</li></ul><p><img alt="Cuis edit my LayoutSpec" style="width: 80%" src="/blog/assets/cuis-edit-my-layoutspec.png?v=1.1.1"></p><p>For more detail on layouts, see <a href="https://github.com/Cuis-Smalltalk/Learning-Cuis/blob/master/LayoutTour.md" target="_blank">Exploring morph layouts in Cuis</a>.</p><h3 id="button-labels" tabindex="-1">Button Labels</h3><p>Button labels are automatically shortened to fit within the button width using the <code>String</code> instance method <code>squeezeTo:</code>. It begins by removing spaces from right to left. It then removes vowels from right to left. Finally, it removes consonants from right to left and adds an ellipsis at the end.</p><h3 id="button-issue" tabindex="-1">Button Issue</h3><p>The class <code>PluggableButtonMorph</code> uses the value of <code>Theme current buttonLabel</code> as the color for the label on all instances. But sending <code>#color:</code> to an instance changes its background color. Depending the background color selected, this can result in poor contrast. It also uses an embossed font for the label.</p><p>A way to fix this, suggested by Mariano Montone, is to create a subclass of <code>PluggableButtonMorph</code> as follows:</p><ol><li><p>Define the following new class:</p><pre class="language-smalltalk"><code class="language-smalltalk">PluggableButtonMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#VButtonMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'labelColor'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Define the following instance methods in the <code>VButtonMorph</code> class:</p><pre class="language-smalltalk"><code class="language-smalltalk">labelColor<br>    <span class="token operator">^</span>labelColor ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>Theme current buttonLabel<span class="token punctuation">]</span><br><br>labelColor<span class="token punctuation">:</span> anObject<br>    labelColor <span class="token operator">:=</span> anObject</code></pre></li><li><p>Override <code>VButtonMorph</code> instance method <code>drawEmbossedLabelOn:</code> by copying the same method from <code>PluggableButtonMorph</code> and modifying two lines, the one that sets <code>colorForLabel</code> and the one that sets <code>embossed</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawEmbossedLabelOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">availableW</span> <span class="token variable">center</span> <span class="token variable">colorForLabel</span> <span class="token variable">f</span> <span class="token variable">l</span> <span class="token variable">labelMargin</span> <span class="token variable">targetSize</span> <span class="token variable">w</span> <span class="token variable">x</span> <span class="token variable">y</span> <span class="token punctuation">|</span></span><br>    label ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">"The next line was modified."</span><br>        colorForLabel <span class="token operator">:=</span> <span class="token keyword">self</span> enableLabelColorWith<span class="token punctuation">:</span> <span class="token keyword">self</span> labelColor<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> isPressed<br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                <span class="token keyword">self</span> mouseIsOver<br>                    ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.10</span> brightness<span class="token punctuation">:</span> <span class="token number">0.10</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token number">0.0</span> brightness<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.07</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>        f <span class="token operator">:=</span> <span class="token keyword">self</span> fontToUse<span class="token punctuation">.</span><br>        center <span class="token operator">:=</span> extent <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">.</span><br>        labelMargin <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">.</span><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> label<span class="token punctuation">.</span><br>        availableW <span class="token operator">:=</span> extent x <span class="token operator">-</span> labelMargin <span class="token operator">-</span> labelMargin<span class="token punctuation">.</span><br>        availableW <span class="token operator">>=</span> w<br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> l <span class="token operator">:=</span> label <span class="token punctuation">]</span><br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                x <span class="token operator">:=</span> labelMargin<span class="token punctuation">.</span><br>                targetSize <span class="token operator">:=</span> label size <span class="token operator">*</span> availableW <span class="token operator">//</span> w<span class="token punctuation">.</span><br>                l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize<span class="token punctuation">.</span><br>                <span class="token punctuation">(</span>f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">)</span> <span class="token operator">></span> availableW ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                    targetSize <span class="token operator">:=</span> targetSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span><br>                    l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize <span class="token punctuation">]</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">.</span><br>        x <span class="token operator">:=</span> center x <span class="token operator">-</span> <span class="token punctuation">(</span>w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        y <span class="token operator">:=</span> center y <span class="token operator">-</span> <span class="token punctuation">(</span>f lineSpacing <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        aCanvas<br>            drawString<span class="token punctuation">:</span> l<br>            at<span class="token punctuation">:</span> x<span class="token operator">@</span>y<br>            font<span class="token punctuation">:</span> f<br>            color<span class="token punctuation">:</span> colorForLabel<br>            <span class="token comment">"The next line was modified."</span><br>            embossed<span class="token punctuation">:</span> <span class="token boolean">false</span><br>    <span class="token punctuation">]</span></code></pre></li></ol><h3 id="button-demo-in-cuis" tabindex="-1">Button Demo in Cuis</h3><p>Add this code in a Workspace, select it all, and &quot;Do it&quot;. It uses the class <code>VButtonMorph</code> defined above.</p><pre class="language-smalltalk"><code class="language-smalltalk">label <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><br>  contents<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>  color<span class="token punctuation">:</span> Color white<span class="token punctuation">.</span><br>decBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Decrement'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>incBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>layout <span class="token operator">:=</span> LayoutMorph <span class="token keyword">new</span><br>  addMorph<span class="token punctuation">:</span> decBtn<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> label<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> incBtn<span class="token punctuation">;</span><br>  <span class="token comment">"color: Color transparent ;"</span><br>  separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>  location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">70</span><span class="token operator">@</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   rotateBy<span class="token punctuation">:</span> <span class="token number">15</span> degreesToRadians<span class="token punctuation">;</span><br>  scale<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">;</span><br>  openInWorld<span class="token punctuation">.</span><br><br><span class="token comment">"Add horizontal padding in buttons."</span><br>decBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>incBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>To delete this from the World, enter layoutDelete in the Workspaces and &quot;Do it&quot;, or open the halo for the <code>LayoutMorph</code> and click the red button in the upper-left.</p><h3 id="canvas-drawing" tabindex="-1">Canvas Drawing</h3><p>To draw on a canvas, create a subclass of <code>Morph</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">PlacedMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#CanvasDemo</span><br>	instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>	classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>	poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>	category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Then define the instance method <code>drawOn:</code>. For example, the following draws a red rectangle with a line from its upper-left to lower-right.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">x1</span> <span class="token variable">x2</span> <span class="token variable">y1</span> <span class="token variable">y2</span> <span class="token punctuation">|</span></span><br>    height <span class="token operator">:=</span> <span class="token number">200</span><span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> <span class="token number">400</span><span class="token punctuation">.</span><br>    x1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    y1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    x2 <span class="token operator">:=</span> extent ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">]</span> ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>extent x<span class="token punctuation">]</span><span class="token punctuation">.</span><br>    y2 <span class="token operator">:=</span> extent ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">150</span><span class="token punctuation">]</span> ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>extent y<span class="token punctuation">]</span><span class="token punctuation">.</span><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">10</span> color<span class="token punctuation">:</span> Color red fillColor<span class="token punctuation">:</span> Color green do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas<br>        moveTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>        lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>        lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>        lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>        lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>        lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<br>    <span class="token punctuation">]</span></code></pre><p>TODO: See question sent to Cuis mailing list on 7/11/24 at 2:39 PM.</p><p>Open a Workspace, enter <code>CanvasDemo new openInWorld</code> and &quot;Do it&quot;.</p><h3 id="svg" tabindex="-1">SVG</h3><p>To work with SVG images:</p><ul><li><p>Clone the following Git repositories from Cuis Smalltalk:</p><ul><li><a href="https://github.com/Cuis-Smalltalk/Numerics.git" target="_blank">Numerics</a></li><li><a href="https://github.com/Cuis-Smalltalk/SVG.git" target="_blank">SVG</a></li></ul></li><li><p>Open a Workspace and install the packages <code>LinearAlgebra</code> and <code>SVG</code>.</p><p>For each package, enter <code>Feature require: '{package-name}'</code> and &quot;Do it&quot;.</p></li><li><p>Enter <code>SVGMainMorph exampleTiger openInWorld</code> and &quot;Do it&quot;.</p></li></ul><p>There are many more example class methods in the <code>SVGMainMorph</code> class. To open all the SVG examples, enter <code>SVGMainMorph openAllExamples SVGMainMorph</code> and &quot;Do it&quot;. To delete all those morphs, enter <code>SVGMainMorph allInstancesDo: [ :obj | obj delete ]</code>.</p><p>Another way to open all the SVG examples is to use reflection as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">selectors <span class="token operator">:=</span> SVGMainMorph class allMethodsInCategory<span class="token punctuation">:</span> <span class="token symbol">#examples</span><span class="token punctuation">.</span><br>selectors do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:selector</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span>selector beginsWith<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">(</span>SVGMainMorph perform<span class="token punctuation">:</span> selector<span class="token punctuation">)</span> openInWorld<br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="overriding-doesnotunderstand" tabindex="-1">Overriding doesNotUnderstand</h2><p>The <code>Object</code> class defines the <code>doesNotUnderstand</code> method which opens a <code>MessageNotUnderstood</code> window. This can be overridden in specific classes to provide specialized processing of messages that do not have corresponding methods.</p><p>Let's demonstrate this by defining an <code>Accessible</code> class that enables sending messages to set and get any instance variable in classes that inherit from this class.</p><p>Here is the class definition:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Accessible</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is its one and only instance method:</p><pre class="language-smalltalk"><code class="language-smalltalk">doesNotUnderstand<span class="token punctuation">:</span> aMessage<br>    <span class="token comment">"gets or sets an instance variable"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">argCount</span> <span class="token variable">getters</span> <span class="token variable">index</span> <span class="token variable">key</span> <span class="token variable">setters</span> <span class="token punctuation">|</span></span><br><br>    <span class="token comment">"We are only processing messages with 0 or 1 arguments.<br>    If there are 2 or more arguments, fall back to the default behavior."</span><br>    argCount <span class="token operator">:=</span> aMessage numArgs<span class="token punctuation">.</span><br>    argCount <span class="token operator">></span> <span class="token number">1</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    key <span class="token operator">:=</span> aMessage keywords first<span class="token punctuation">.</span><br><br>    <span class="token comment">"If the message is a getter, return the<br>    corresponding instance variable value."</span><br>    getters <span class="token operator">:=</span> <span class="token keyword">self</span> class allInstVarNames<span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> getters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"If the message is a setter, set the<br>    corresponding instance variable value."</span><br>    setters <span class="token operator">:=</span> getters collect<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:name</span> <span class="token punctuation">|</span></span> name<span class="token operator">,</span> <span class="token string">':'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> setters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index put<span class="token punctuation">:</span> aMessage arguments first <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Otherwise fall back to the default behavior."</span><br>    <span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage</code></pre><p>Here is an example subclass of <code>Accessible</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">Accessible subclass<span class="token punctuation">:</span> <span class="token symbol">#Person</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'birthdate firstName lastName'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is an example of using this class:</p><pre class="language-smalltalk"><code class="language-smalltalk">p <span class="token operator">:=</span> Person <span class="token keyword">new</span><span class="token punctuation">.</span><br>p firstName<span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">.</span><br>p firstName print<span class="token punctuation">.</span> <span class="token comment">"Mark"</span></code></pre><p>Getting and setting instance variables in this way is quite inefficient. A better approach is to generate accessor methods by right-clicking the <code>Person</code> class in a System Browser and selecting &quot;more...create inst var accessors&quot; to generate accessor methods for each instance variable.</p><h2 id="file-i%2Fo" tabindex="-1">File I/O</h2><p>To create a file, send the <code>#asFileEntry</code> message to a string that contains the file name. The file is assumed to be in the <code>\*-UserFiles</code> directory. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry <span class="token operator">:=</span> <span class="token string">'demo.txt'</span> asFileEntry<span class="token punctuation">.</span></code></pre><p>To write to a text file, overwriting any previous contents:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry forceWriteStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    fileStream nextPutAll<span class="token punctuation">:</span> <span class="token string">'line #1'</span><span class="token punctuation">.</span><br>    fileStream newLine<span class="token punctuation">.</span><br>    fileStream nextPutAll<span class="token punctuation">:</span> <span class="token string">'line #2'</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Another way to obtain a stream for writing and reading a file at a given path is the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">stream <span class="token operator">:=</span> FileStream fileNamed<span class="token punctuation">:</span> <span class="token string">'some-file-path'</span></code></pre><p>To read the entire contents of a text file into a string:</p><pre class="language-smalltalk"><code class="language-smalltalk">contents <span class="token operator">:=</span> fileEntry fileContents<span class="token punctuation">.</span></code></pre><p>To write serialized objects to a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry writeStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">refStream</span> <span class="token punctuation">|</span></span><br>    refStream <span class="token operator">:=</span> ReferenceStream on<span class="token punctuation">:</span> fileStream<span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>TODO: Do ReferenceStreams support circular object references?</p><p>To read serialized objects from a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry readStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">object</span> <span class="token variable">refStream</span> <span class="token punctuation">|</span></span><br>    refStream <span class="token operator">:=</span> ReferenceStream on<span class="token punctuation">:</span> fileStream<span class="token punctuation">.</span><br>    <span class="token punctuation">[</span> refStream atEnd <span class="token punctuation">]</span> whileFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        object <span class="token operator">:=</span> refStream next<span class="token punctuation">.</span><br>        object print <span class="token comment">"writes to Transcript"</span><br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span></code></pre><p>To delete a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry delete<span class="token punctuation">.</span></code></pre><p>TODO: Harvest more information about file system operations from this video. <a href="https://youtu.be/stMoWMlLVzk?si=_3rmJFPkZ2g4ZIIV" target="_blank">squeak smalltalk tutorial: file handling part 1</a>.</p><h2 id="deploying-applications" tabindex="-1">Deploying Applications</h2><p>Smalltalk can be used to build command-line, desktop, and web applications. After writing and testing the code in a standard Smalltalk image, it is recommended to create a stripped down version of the image that only contains what is necessary for running the application.</p><p>All developer tools can be removed. For command-line and web applications, everything related to the Morphic GUI framework can be removed.</p><p>Stripping an image is a manual process that is described in the FAST 2024 conference video <a href="https://www.youtube.com/watch?v=MfAclig5XyI" target="_blank">Bootstrap: Creating Minimal Images from Scratch</a>.</p><p>Also see <a href="https://www.youtube.com/watch?v=b3oGOMCjKU8&list=PLu8vLCSA-4hklsvT9W6ruintbdx_K0DYW&index=2&t=53s" target="_blank">Make a standalone click-&amp;-run Smalltalk application for macOS</a>.</p><h3 id="running-headless" tabindex="-1">Running Headless</h3><p>To run Smalltalk programs that are command-line utilities, apps, or servers, use the Smalltalk VM that is bundled inside the macOS app <code>CuisVM.app</code> that is included in the Cuis-Smalltlk-Dev GitHub repository. This is actually a Squeak VM.</p><p>Squeak VMs can also be obtained from <a href="https://github.com/OpenSmalltalk/opensmalltalk-vm" target="_blank">OpenSmalltalk</a>. Under &quot;Releases&quot; on the right side, click &quot;Latest&quot;. Click the proper file for your operating system and processor. For example, <code>squeak.cog.spur_macos64ARMv8.dmg</code>. Double-click the downloaded file to install it.</p><p>To manually download and build a Squeak VM for macOS:</p><ol><li>Open a Terminal and cd to the directory where the VM will be created.</li><li>Enter <code>git clone https://github.com/OpenSmalltalk/opensmalltalk-vm.git</code></li><li>Enter <code>cd opensmalltalk-vm</code></li><li>Enter <code>./scripts/updateSCCSVersions</code></li><li>Enter <code>cd building</code></li><li><code>cd</code> to the appropriate subdirectory for the target OS and processor. For example, <code>macos64ARMv8</code>.</li><li>See the instructions in the file &quot;HowToBuild&quot;.</li><li>Enter <code>cd squeak.coq.spur</code></li><li>Enter <code>./mvm -A</code>. This will run for around 10 minutes and generate an extreme amount of output.</li><li>Enter <code>chmod a+x Squeak.app</code></li><li>Create a symbolic link to the VM that is inside this app by entering <code>ln -s &quot;./Squeak.app/Contents/MacOS/Squeak&quot; squeak-vm</code>.</li></ol><p>To simplify running files containing Smalltalk code from the command line, create a script named &quot;cuis&quot; in a directory that is in your PATH containing the following:</p><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span><br><span class="token comment"># Runs a file containing Smalltalk code in headless mode using Cuis Smalltalk.</span><br><br><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token builtin class-name">echo</span> usage: cuis <span class="token punctuation">{</span>file-name<span class="token punctuation">}</span><br>  <span class="token builtin class-name">exit</span> <span class="token number">1</span><br><span class="token keyword">fi</span><br><br><span class="token assign-left variable">CUIS_DIR</span><span class="token operator">=</span><span class="token variable">$SMALLTALK_DIR</span>/Cuis-Smalltalk-Dev<br><span class="token assign-left variable">VM</span><span class="token operator">=</span><span class="token variable">$CUIS_DIR</span>/CuisVM.app/Contents/MacOS/Squeak<br><span class="token assign-left variable">IMAGE</span><span class="token operator">=</span><span class="token variable">$CUIS_DIR</span>/CuisImage/Cuis7.1-6452.image<br><span class="token variable">$VM</span> <span class="token parameter variable">-headless</span> <span class="token variable">$IMAGE</span> <span class="token parameter variable">-s</span> <span class="token variable">$1</span></code></pre><p>Create <code>.st</code> files containing Smalltalk code. For example, the file <code>demo.st</code> could contain the following:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">stdout</span> <span class="token punctuation">|</span></span><br>stdout <span class="token operator">:=</span> StdIOWriteStream<span class="token punctuation">.</span><br>stdout nextPutAll<span class="token punctuation">:</span> <span class="token string">'Hello, World!'</span><span class="token punctuation">;</span> newLine<span class="token punctuation">.</span><br>Smalltalk quit</code></pre><p>To run this, enter <code>cuis demo.st</code>.</p><p>TODO: This was working, but just hangs now. Why?</p><p>To get help on options, cd to your <code>Cuis-Smalltalk-Dev</code> directory and enter the following:</p><pre class="language-bash"><code class="language-bash">./CuisVM.app/Contents/MacOS/Squeak <span class="token parameter variable">-help</span></code></pre><p>For more detail see the <code>SystemDictionary</code> class <code>displayCommandLineUsageOn:</code> class method.</p><h2 id="games" tabindex="-1">Games</h2><p>Some games implemented in Cuis Smalltalk can be found in the GitHub repository <a href="https://github.com/Cuis-Smalltalk/Games" target="_blank">Cuis-Smalltalk/Games</a>.</p><p>To install them:</p><ul><li>Clone the Games repository.</li><li>Launch Cuis Smalltalk.</li><li>Open a &quot;File List&quot;.</li><li>Locate and select the file <code>Morphic-Games-Solitaire.pck.st</code>.</li><li>Click the &quot;Install Package&quot; button.</li></ul><p>To play a game, open the World menu, select &quot;New morph...Layouts&quot;, and then select FreeCell or Klondike. Alternatively, open a Workspace, enter something like <code>Freecell newGame</code>, and &quot;Do it&quot;.</p><h2 id="json" tabindex="-1">JSON</h2><p>GRONK: Continue review here.</p><p>The <code>JSON</code> package defines the classes <code>Json</code>, <code>JsonObject</code>, and <code>JsonError</code>. It also adds the method <code>jsonWriteOn:</code> to many classes including <code>Array2D</code>, <code>Association</code>, <code>CharacterSequence</code>, <code>Collection</code>, <code>Dictionary</code>, <code>False</code>, <code>Integer</code>, <code>Number</code>, <code>Text</code>, <code>True</code>, and <code>UndefinedObject</code>.</p><p>To install the <code>JSON</code> package, enter <code>Feature require: 'JSON'</code> in a Workspace and &quot;Do it&quot;.</p><p>Custom classes whose instances need to be serialized to JSON should implement the instance method <code>jsonWriteOn:</code>. This method describes the instance variables that should be included. Here's how it could be implemented for a <code>Dog</code> class with instance varaibles <code>id</code>, <code>name</code>, and <code>breed</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">jsonWriteOn<span class="token punctuation">:</span> aWriteStream<br>    <span class="token punctuation">{</span><br>        <span class="token symbol">#id</span><span class="token operator">-</span><span class="token operator">></span>id<span class="token punctuation">.</span><br>        <span class="token symbol">#name</span><span class="token operator">-</span><span class="token operator">></span>name<span class="token punctuation">.</span><br>        <span class="token symbol">#breed</span><span class="token operator">-</span><span class="token operator">></span>breed<br>    <span class="token punctuation">}</span> asDictionary jsonWriteOn<span class="token punctuation">:</span> aWriteStream</code></pre><p>Here's how we can get a JSON string for a <code>Dog</code> object.</p><pre class="language-smalltalk"><code class="language-smalltalk">json <span class="token operator">:=</span> Json render<span class="token punctuation">:</span> dog</code></pre><p>Custom classes that need to deserialize JSON to a new instance should implement the class method <code>fromJson:</code> (suggested name) that takes a stream of JSON data and returns a new object created from it. Here's an example that uses the <code>Dog</code> class method <code>id:name:breed:</code> to create a new instance.</p><pre class="language-smalltalk"><code class="language-smalltalk">fromJson<span class="token punctuation">:</span> aStream<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">jsonObject</span> <span class="token punctuation">|</span></span><br>    jsonObject <span class="token operator">:=</span> Json readFrom<span class="token punctuation">:</span> aStream<span class="token punctuation">.</span><br>    <span class="token operator">^</span>Dog<br>        id<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#id</span><span class="token punctuation">)</span><br>        name<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#name</span><span class="token punctuation">)</span><br>        breed<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#breed</span><span class="token punctuation">)</span></code></pre><p>Here's how we can parse a JSON string to get a <code>Dog</code> object.</p><pre class="language-smalltalk"><code class="language-smalltalk">newDog <span class="token operator">:=</span> Dog fromJson<span class="token punctuation">:</span> json readStream</code></pre><h2 id="editor-customization" tabindex="-1">Editor Customization</h2><p>I would like to implement a subset of the Vim keybindings for editing code in System Browsers. Here is what I have tried so far.</p><ul><li><p>Create a subclass of the <code>SmalltalkEditor</code> class called <code>VimEditor</code>.</p></li><li><p>Add the instance variable <code>mode</code> that will hold the string &quot;normal&quot; or &quot;insert&quot;.</p></li><li><p>Initialize <code>mode</code> to <code>'insert'</code> by adding the following instance method:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    mode <span class="token operator">:=</span> <span class="token string">'insert'</span><span class="token punctuation">.</span></code></pre></li><li><p>Implement the class method <code>initializeShortcuts</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">initializeShortcuts<br>    <span class="token keyword">super</span> initializeShortcuts<span class="token punctuation">.</span><br>    shortcuts<br>        at<span class="token punctuation">:</span> <span class="token number">27</span> <span class="token operator">+</span> <span class="token number">1</span><br>        put<span class="token punctuation">:</span> <span class="token symbol">#switchToCommandMode</span><span class="token punctuation">:</span><span class="token punctuation">.</span><br>    <span class="token comment">"escape key - when in insert mode, switch to command mode"</span><br>    shortcuts<br>        at<span class="token punctuation">:</span> <span class="token number">105</span> <span class="token operator">+</span> <span class="token number">1</span><br>        put<span class="token punctuation">:</span> <span class="token symbol">#xKey</span><span class="token punctuation">:</span><span class="token punctuation">.</span><br>    <span class="token comment">"i key - when in command mode, switch to insert mode"</span><br>    shortcuts<br>        at<span class="token punctuation">:</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token number">1</span><br>        put<span class="token punctuation">:</span> <span class="token symbol">#xKey</span><span class="token punctuation">:</span><span class="token punctuation">.</span><br>    <span class="token comment">"x key - when in command mode, delete character under cursor"</span></code></pre></li><li><p>Implement the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">escapeKey<span class="token punctuation">:</span> aKeyboardEvent<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">inCommandMode</span> <span class="token punctuation">|</span></span><br>    inCommandMode <span class="token operator">:=</span> mode <span class="token operator">=</span> <span class="token string">'command'</span><span class="token punctuation">.</span><br>    inCommandMode ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> mode <span class="token operator">:=</span> <span class="token string">'command'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token comment">"Hopefully returning false means that a superclass can process the event."</span><br>    <span class="token operator">^</span> inCommandMode not<span class="token punctuation">.</span><br><br>iKey<span class="token punctuation">:</span> aKeyboardEvent<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">inCommandMode</span> <span class="token punctuation">|</span></span><br>    inCommandMode <span class="token operator">:=</span> mode <span class="token operator">=</span> <span class="token string">'command'</span><span class="token punctuation">.</span><br>    inCommandMode ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> mode <span class="token operator">:=</span> <span class="token string">'insert'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token comment">"Hopefully returning false means that a superclass can process the event."</span><br>    <span class="token operator">^</span> inCommandMode<span class="token punctuation">.</span><br><br>xKey<span class="token punctuation">:</span> aKeyboardEvent<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">inCommandMode</span> <span class="token punctuation">|</span></span><br>    inCommandMode <span class="token operator">:=</span> mode <span class="token operator">=</span> <span class="token string">'command'</span><span class="token punctuation">.</span><br>    inCommandMode ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'delete character under cursor'</span> print <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token comment">"Hopefully returning false means that a superclass can process the event."</span><br>    <span class="token operator">^</span> inCommandMode<span class="token punctuation">.</span></code></pre></li><li><p>TODO: Determine how to modify the System Browser to use <code>VimEditor</code> instead of <code>SmalltalkEditor</code> in its bottom pane.</p></li><li><p>TODO: Determine how to modify the <code>xKey:</code> method to really delete a character.</p></li></ul><p>Changes will likely have no effect until the image is saved and restarted.</p><h2 id="web-development" tabindex="-1">Web Development</h2><p>One package for implementing a web server is <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/blob/master/Packages/Features/WebClient.pck.st" target="_blank">WebClient</a>. To install this, open a Workspace, enter <code>Feature require: 'WebClient'</code>, and &quot;Do it&quot;. This adds many classes in the &quot;WebClient - Core&quot; category including <code>WebClient</code>, <code>WebRequest</code>, <code>WebResponse</code>, <code>WebServer</code>, and <code>WebSocket</code>.</p><p>Also see the <a href="https://github.com/SeasideSt/Seaside" target="_blank">Seaside</a> and <a href="https://github.com/zeroflag/Teapot" target="_blank">Teapot</a> frameworks.</p><p>See the <a href="https://book.seaside.st/book" target="_blank">Seaside Book</a>.</p><h3 id="sending-http-requests" tabindex="-1">Sending HTTP Requests</h3><p>The <code>WebClient</code> class defines class methods that send HTTP requests. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">res <span class="token operator">:=</span> WebClient httpGet<span class="token punctuation">:</span> <span class="token string">'https://pokeapi.co/api/v2/pokemon/pikachu'</span><span class="token punctuation">.</span></code></pre><p>The variable <code>res</code> above will refer to a <code>WebResponse</code> object. This has many instance variables including:</p><ul><li><code>code</code> - status code such as 200</li><li><code>content</code> - response body</li><li><code>headers</code> - an <code>OrderedCollection</code> of <code>Association</code> objects that describe the HTTP response headers such as <code>content-type</code> with a value like <code>text/html; charset=utf-8</code> or <code>application/json; charset=utf-8</code></li><li><code>protocol</code> - such as the <code>String</code> <code>HTTP/1.1</code></li><li><code>status</code> - such as the <code>String</code> <code>HTTP/1.1 200 OK</code></li><li><code>url</code> - the URL to which the request was sent</li></ul><h3 id="implementing-an-http-server" tabindex="-1">Implementing an HTTP Server</h3><p>To start a web server, create a <code>WebServer</code> instance and send it the <code>listenOn:</code> message. this starts a Smalltalk process called &quot;WebServers's listener process&quot;. To kill it, open a &quot;Process Browser&quot;, select the process, and press cmd-t (Terminate).</p><p>See the class <code>MyWebServer</code> in the <code>Volkmann</code> package. The <code>handleDog:</code> method defines CRUD endpoints. TODO: Provide more detail about defining endpoints.</p><h2 id="foreign-function-interface-(ffi)" tabindex="-1">Foreign Function Interface (FFI)</h2><p>See <a href="https://itchyeyes.net/articles/cuis-smalltalk.html" target="_blank">Using the FFI</a>.</p><p>TODO: Add detail on this.</p><h2 id="annoyances" tabindex="-1">Annoyances</h2><ul><li><p>new windows open in random locations, not near where they were requested</p></li><li><p>inconsistent case in method names</p><p>For example, the <code>CharacterSequence</code> class defines the methods <code>subStrings</code> and <code>substringsSeparatedBy:</code>.</p></li><li><p>inconsistent case in menu items</p><p>For examples, see the Preferences and Windows submenus of the World menu.</p></li><li><p>inconsistent case in button labels</p><p>For example, in Debug windows the first row of buttons starting with &quot;browse&quot; have labels that are all lowercase. But the second row of buttons starting with &quot;Proceed&quot; have labels that are all capitalized.</p></li></ul><h2 id="unresolved-questions" tabindex="-1">Unresolved Questions</h2><ul><li><p>How can you work with SQLite and Postgres databases from Smalltalk?</p></li><li><p>Where are method categories stored?</p></li><li><p>Build a Todo app using Morphic and practice stripping the image to create a version that can be distributed to users.</p></li><li><p>Is there an easy way to create a memoized version of a method? Try this with the &quot;collatz&quot; method that you added to the Integer class.</p></li><li><p>A Smalltalk image contains a set of class definitions, existing objects, and code that implements a GUI for the objects that are graphical. Anything else?</p></li><li><p>Code can be saved in an image, a package, or a fileOut. Are those all the options?</p></li><li><p>Are packages unique to Cuis Smalltalk?</p></li><li><p>Is the only way to save changes to a package to open an &quot;Installed Packages&quot; window, select the package, and click the &quot;save&quot; button?</p></li><li><p>Do any collection classes support structural sharing for immutability support?</p></li><li><p>What package can you install to get a color picker?</p></li><li><p>Are there any linting tools for Smalltalk?</p></li><li><p>Learn how to write and distribute command-line utilities/apps in Smalltalk.</p></li><li><p>Learn how to write and distribute GUI apps in Smalltalk.</p></li><li><p>Learn how to write and distribute web apps in Smalltalk.</p></li><li><p>Study the code in the &quot;Morphic-Games-Solitaire&quot; package to see what you can learn from it.</p></li><li><p>Is there a String method that does interpolation? I'm imagining something like this: s := 'Player %s is number %d.' interpolate: #('Gretzky' 99).</p></li><li><p>See this! <a href="https://squeak.js.org" target="_blank">SqueakJS</a></p></li><li><p>Learn how to add items to existing menus in the Cuis UI that do something when you select them such as repositioning the currrently active window.</p></li><li><p>Consider submitting an update to Cuis that standardizes menu item names. Currently there are three styles:</p><ul><li>all words lower</li><li>All Words Upper</li><li>Mixture of styles</li></ul></li><li><p>Describe the use of &quot;class instance variables&quot; (not shared with subclasses) which are different from &quot;class variables&quot; (shared with subclasses)? To see them in a System Browser, select a class and click the class button. They will look like this:</p><pre class="language-smalltalk"><code class="language-smalltalk">Dog class<br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span></code></pre></li><li><p>Does Smalltalk expose its own AST? If so, maybe you can use that to generate code and another programming language from my Smalltalk program.</p></li><li><p>How can you examine the bytecode for a method?</p></li><li><p>Learn how to draw on a canvas in Cuis using &quot;Morphic 3&quot;.</p></li><li><p>Is Morphic 3 only supported in Cuis?</p></li><li><p>Does Cuis run on the &quot;OpenSmalltalk Virtual Machine&quot;? Is this the same VM that is used by Squeak and Pharo?</p></li><li><p>In a talk by Juan Vuletich, one of his slides says Cuis is &quot;A practical system, used for teaching, Satellite image processing, research in sign, image, and audio processing, research in programming languages, and many other areas of application.&quot; This seems to imply that it is not for &quot;normal&quot; application development.</p></li><li><p>Learn about the Smalltalk &quot;primitive&quot; syntax. For example, the <code>DisplayScreen</code> instance method <code>fullScreenMode:</code> contains <code>&lt;primitive: 233&gt;</code>.</p></li><li><p>Can you configure your image so it never starts in full screen mode even if it was saved that way?</p></li><li><p>What do you click in a morph halo to cause it to display its coordinate system axes?</p></li><li><p>Some packages are built-in meaning that they are included in the distribution of the Smalltalk implementation. Other packages must be downloaded, sometimes by cloning a GitHub repository.</p></li><li><p>Formalize your code to generate HTML from an Association object.</p></li><li><p>Does “morph removeAll” remove a given morph and all of its sub morphs?</p></li><li><p>Another way to browse a class besides pressing cmd-f in the left pane of a system browser and searching for it by name is to enter the name and it workspace and press cmd-b to browse it.</p></li><li><p>Is it more common to include a space after the return caret or not?</p></li><li><p>The protocol of a class is the set of all its instance methods, including those that are inherited from superclasses.</p></li><li><p>Learn how to use all the buttons in a system browser window.</p></li><li><p>The term &quot;extent&quot; in Morphic means the combination of width and height as a Point object.</p></li><li><p>Is &quot;location&quot; a Point object containing X and Y values?</p></li><li><p>Is Cuis Smalltalk the only implementation that supports Unicode characters, TrueType fonts, vector graphics?</p></li><li><p>Try the Connectors package. Does it work in Cuis Smalltalk or is there a port of it? <a href="https://youtu.be/QBRm_hnl7sE?si=w4FDZLfoyMAehZv6">https://youtu.be/QBRm_hnl7sE?si=w4FDZLfoyMAehZv6</a></p></li><li><p>Submit a PR for the SVG repository that modifies <code>README.md</code> to explain how to clone the <code>Numerics</code> repository which provides the <code>LinearAlgebra</code> package, and install that.</p></li><li><p>Submit a PR to this for the typos you found in <a href="https://github.com/Cuis-Smalltalk/TheCuisBook">https://github.com/Cuis-Smalltalk/TheCuisBook</a>.</p></li><li><p>Try <a href="https://github.com/Cuis-Smalltalk/DatabaseSupport">https://github.com/Cuis-Smalltalk/DatabaseSupport</a>.</p></li><li><p>Is there a library of collection types for Smalltalk that support structural sharing for immutability?</p></li><li><p>Is there a way to revert changes to more than one method at a time?</p></li><li><p>Where is the <code>new</code> method defined? Does that explicitly call <code>initialize</code> on the newly created object?</p></li><li><p>Perhaps you should refer to most windows as browers.</p></li></ul></article>