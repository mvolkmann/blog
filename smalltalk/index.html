<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Smalltalk</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#smalltalk-pros">Smalltalk Pros</a></li><li><a href="#smalltalk-cons">Smalltalk Cons</a></li><li><a href="#history">History</a></li><li><a href="#implementations">Implementations</a></li><li><a href="#installing-cuis-smalltalk">Installing Cuis Smalltalk</a></li><li><a href="#installing-squeak-smalltalk">Installing Squeak Smalltalk</a></li><li><a href="#world">World</a></li><li><a href="#font-size">Font Size</a></li><li><a href="#full-screen">Full Screen</a></li><li><a href="#optional-packages">Optional Packages</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#file-system-access">File System Access</a></li><li><a href="#images">Images</a></li><li><a href="#help">Help</a><ol><li><a href="#class-comment-browser">Class Comment Browser</a></li><li><a href="#terse-guide">Terse Guide</a></li></ol></li><li><a href="#themes">Themes</a></li><li><a href="#windows">Windows</a><ol><li><a href="#editing-code">Editing Code</a></li><li><a href="#workspace-windows">Workspace Windows</a></li><li><a href="#transcript-windows">Transcript Windows</a></li><li><a href="#inspect-windows">Inspect Windows</a></li><li><a href="#explore-windows">Explore Windows</a></li><li><a href="#system-browser-windows">System Browser Windows</a></li><li><a href="#hierarchy-browser-windows">Hierarchy Browser Windows</a></li><li><a href="#protocol-windows">Protocol Windows</a></li><li><a href="#text-editor-windows">Text Editor Windows</a></li><li><a href="#message-names-windows">Message Names Windows</a></li><li><a href="#messagenotunderstood-windows">MessageNotUnderstood Windows</a></li><li><a href="#debug-windows">Debug Windows</a></li><li><a href="#change-sorter-windows">Change Sorter Windows</a></li><li><a href="#process-browser-windows">Process Browser Windows</a></li><li><a href="#emergency-evaluator">Emergency Evaluator</a></li></ol></li><li><a href="#syntax">Syntax</a><ol><li><a href="#classes">Classes</a></li><li><a href="#accessor-methods">Accessor Methods</a></li><li><a href="#objects">Objects</a></li><li><a href="#immutability">Immutability</a></li><li><a href="#methods">Methods</a></li><li><a href="#primitive-methods">Primitive Methods</a></li></ol></li><li><a href="#refactorings">Refactorings</a></li><li><a href="#keywords-self-and-super">Keywords self and super</a></li><li><a href="#variables">Variables</a></li><li><a href="#reflection">Reflection</a></li><li><a href="#code-management">Code Management</a><ol><li><a href="#file-list">File List</a></li><li><a href="#file-out-and-file-in">File Out and File In</a></li><li><a href="#packages">Packages</a></li><li><a href="#adding-and-saving-code">Adding and Saving Code</a></li></ol></li><li><a href="#messages">Messages</a></li><li><a href="#reserved-words">Reserved Words</a></li><li><a href="#control-flow">Control Flow</a></li><li><a href="#data-types">Data Types</a><ol><li><a href="#undefinedobject">UndefinedObject</a></li><li><a href="#booleans">Booleans</a></li></ol></li><li><a href="#numbers">Numbers</a><ol><li><a href="#characters">Characters</a></li><li><a href="#strings">Strings</a><ol><li><a href="#format%3A">format:</a></li><li><a href="#padded%3Ato%3Awith%3A">padded:to:with:</a></li><li><a href="#prefixandsuffix%3A">prefixAndSuffix:</a></li></ol></li><li><a href="#uuids">UUIDs</a></li><li><a href="#collections">Collections</a></li><li><a href="#interval">Interval</a></li><li><a href="#array">Array</a></li><li><a href="#orderedcollection">OrderedCollection</a></li><li><a href="#bag">Bag</a></li><li><a href="#association">Association</a></li><li><a href="#dictionary">Dictionary</a></li><li><a href="#linkedlist">LinkedList</a></li><li><a href="#set">Set</a></li></ol></li><li><a href="#creating-objects">Creating Objects</a></li><li><a href="#blocks">Blocks</a></li><li><a href="#exception-handling">Exception Handling</a></li><li><a href="#unit-tests">Unit Tests</a></li><li><a href="#color">Color</a></li><li><a href="#morphic">Morphic</a><ol><li><a href="#halo">Halo</a></li><li><a href="#layoutmorph">LayoutMorph</a></li><li><a href="#buttons">Buttons</a></li><li><a href="#button-issue">Button Issue</a></li><li><a href="#button-demo-in-cuis">Button Demo in Cuis</a></li><li><a href="#button-demo-in-squeak">Button Demo in Squeak</a></li><li><a href="#canvas-drawing">Canvas Drawing</a></li><li><a href="#svg">SVG</a></li></ol></li><li><a href="#overriding-doesnotunderstand">Overriding doesNotUnderstand</a></li><li><a href="#file-i%2Fo">File I/O</a></li><li><a href="#deploying-applications">Deploying Applications</a></li><li><a href="#games">Games</a></li><li><a href="#json">JSON</a></li><li><a href="#web-development">Web Development</a><ol><li><a href="#send-http-requests">Send HTTP Requests</a></li><li><a href="#implementing-an-http-server">Implementing an HTTP Server</a></li></ol></li><li><a href="#foreign-function-interface-(ffi)">Foreign Function Interface (FFI)</a></li><li><a href="#example-code">Example Code</a></li><li><a href="#annoyances">Annoyances</a></li><li><a href="#unresolved-questions">Unresolved Questions</a></li></ol></nav></aside><article><style>.logo {
    --size: 8rem;
    max-height: var(--size);
    max-width: var(--size); 
    margin-left: 2rem;
  }

  .row {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
  }</style><figure style="width: 30%"><img alt="Smalltalk Byte magazine cover" src="/blog/assets/smalltalk-byte-cover.jpg?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk</a> &quot;is a purely object oriented programming language (OOP).&quot; Messages are sent to objects which decide whether and how to act on them.</p><p><a href="https://en.wikipedia.org/wiki/Simula" target="_blank">Simula</a> is considered to be the first programming language to use object-oriented programming (OOP). But Smalltalk was the first programming language to make OOP popular.</p><p>Smalltalk is perhaps most known for its incredible development tools. These support:</p><ul><li>finding code in many ways</li><li>live code editing where changes are immediately reflected in the environment</li><li>TODO: Add more here!</li></ul><p>Smalltalk is a dynamically typed language. Types of variables, method parameters, and method return types are never specified. Instead, duck typing is used. Any object can be used as long as it is able to respond to all the messages that are sent to it. This is determined at run-time.</p><p>Alan Kay, Dan Ingalls, and Adele Goldberg worked at Xerox PARC (Palo Alto Research Center) in the 1970s. All of them collaborated to create Smalltalk. Alan Kay was the principal designer of Smalltalk and gave it its name. The original goal was to use it for teaching programming.</p><p>Many other technologies were invented at PARC including graphical user interfaces, the mouse, and virtual machines.</p><p>Alan Kay said &quot;OOP to me means only messaging, local retention and protection and hiding of state-process, and extreme late-binding of all things.&quot;</p><p>Late binding means that messages sent to objects are looked up for compatible methods at runtime. However, Smalltalk editors do check for &quot;unknown selectors&quot; when code is entered that sends a message to a literal object (not to a variable).</p><p>Smalltalk didn't gain much traction outside Xerox Parc BYTE magizine published an issue focuses on Smalltalk in August 1981. The cover, shown at the beginning of this article, featured a colorful hot air balloon.</p><p>In the 1990's the popularity of Smalltalk had risen enough that it was seen as a possible alternative to C++. For a time, IBM promoted replacing COBAL with Smalltalk. In 1995, Smalltalk (15%) was the second most popular OO language after C++ (71%).</p><p>At the OOPSLA 1997 conference, Alan Kay said &quot;Actually, I made up the term 'object-oriented' and I can tell you I did not have C++ in mind.&quot; He also said &quot;Languages like C++ and Java are OOP done wrong. Smalltalk is OOP done right.&quot;</p><p>Today Smalltalk is still used by the financial industry, manufacturers, utilities, transportation, and academia.</p><p>The entire syntax of Smalltalk can be demonstrated on a post card.</p><p><img alt="Smalltalk on a post card" src="/blog/assets/smalltalk-on-postcard.jpg?v=1.1.1"></p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk in Wikipedia</a></p></li><li><p><a href="https://cuis.st" target="_blank">Cuis Smalltalk</a></p></li><li><p><a href="https://github.com/Cuis-Smalltalk" target="_blank">Cuis GitHub repositories</a></p></li><li><p><a href="https://pharo.org" target="_blank">Pharo Smalltalk</a></p></li><li><p><a href="https://squeak.org" target="_blank">Squeak Smalltalk</a></p></li><li><p><a href="https://www.fast.org.ar" target="_blank">Fundaci√≥n Argentina de Smalltalk</a> (FAST)</p></li><li><p><a href="https://www.gnu.org/software/dr-geo/" target="_blank">Dr. Geo</a></p></li><li><p><a href="https://www.goodreads.com/shelf/show/smalltalk" target="_blank">Smalltalk Books</a> list on goodreads.</p></li><li><p><a href="https://www.youtube.com/playlist?list=PL6601A198DF14788D" target="_blank">Sqeak from the very start</a> YouTube videos by Lawson English</p><p>&quot;A program to design and manipulate interactive geometric sketches. It helps kids to explore geometry.&quot;</p></li></ul><p>There is a <a href="https://lists.cuis.st/mailman/listinfo/cuis-dev" target="_blank">Cuis Smalltalk mailing list</a>, but no Discord or Slack channel.</p><p>There is a <a href="https://discord.gg/43VEWSw2" target="_blank">Discord channel channel for Squeak Smalltalk</a>.</p><h2 id="smalltalk-pros" tabindex="-1">Smalltalk Pros</h2><ul><li>It has a small, consistently applied syntax.</li><li>It has a great development environment consisting of tools such as System Browser, Workspace, Transcript, Debugger, Hierarchy Browser, Method Finder and more.</li><li>Everything is an object.</li><li>All methods are invoked through message passing which supports extreme polymorphism. Any kind of object can be passed to a method as long as it responds to the messages that will be sent to it.</li><li>It has a great web app. framework (Seaside) and a great CMS framework (Pier).</li><li>It provides automatic version control.</li></ul><h2 id="smalltalk-cons" tabindex="-1">Smalltalk Cons</h2><ul><li><p>It isn't as popular as many other programming languages.</p><ul><li>Schools generally don't teach it.</li><li>Few jobs using it are available.</li><li>IT press doesn't talk about it.</li><li>It's difficult to convince others to use it.</li></ul></li><li><p>Help is limited.</p><p>There are fewer developers using Smalltalk than many other programming languages. This means there are fewer people available to answer questions for new developers.</p></li><li><p>Library documentation is lacking.</p><p>Many Smalltalk libraries have little to no documentation and example code. There seems to be a feeling that since the source code is easily accessible, developers can just read that to determine how to use a library. This makes it difficult to get started using new libraries.</p></li><li><p>Classes are global and not in namespaces, so all class names must be unique.</p><p>Using class name prefixes is recommended. This is important for using Squeak packages and Monticello. Squeak has a prefix registry in the wiki.</p></li><li><p>Immutability is not favored.</p><p>While it is possible to define Smalltalk classes whose objects are immutable, this is not common. This will feel wrong to developers that prefer functional programming.</p></li><li><p>Application deployment is tedious.</p><p>Tools to strip a Smalltalk image of developer-only features in order to create an image that is suitable for deployment are lacking. This is a highly manual process.</p></li><li><p>Smalltalks use of late binding for resolving message sends means that there are more errors that can only be detected at run-time than in statically typed languages such as C++, C#, and Java. However, Smalltalk does do incremental compiling when methods are saved, so it finds syntax errors before runtime, unlike most scripting languages.</p></li><li><p>All the code for a project is stored in one big image file (often over 30 MB). However, it is common to store custom code and modifications to provided classes in a &quot;file out&quot; or package that can be shared with other developers and installed into fresh images.</p></li></ul><h2 id="history" tabindex="-1">History</h2><ul><li><p>Smalltalk-71</p><p>This was a product of research led by Alan Kay at Xerox Palo Alto Research Center (PARC). It was created by Alan Kay in just a few days.</p></li><li><p>Smalltalk-72</p><p>This version influenced the actor model that is used by some modern programming languages. From this point on, most of the implementation was provided by Dan Ingalis.</p></li><li><p>Smalltalk-72</p><p>This version added most of GUI tools present in current versions of Smalltalk.</p></li><li><p>Smalltalk-80</p><p>This version added support for metaclasses of everything, including classes, could be treated as an object. This was the first version of Smalltalk that was shared outside of PARC.</p></li><li><p>ANSI Smalltalk</p><p>This became the standard language reference for Smalltalk in 1998.</p></li><li><p>Squeak</p></li><li><p>VisualWorks</p></li><li><p>ObjectWorks</p></li><li><p>ParcPlace Systems for Unix and Sun systems</p></li><li><p>Digitalk for Windows and OS/2 systems</p></li><li><p>Enfin</p></li><li><p>Cincom</p></li><li><p>GemTalk</p></li><li><p>Etoys for the One Laptop per Child (OLPC) project</p></li><li><p>GNU Smalltalk</p></li><li><p>Pharo - forked from Squeak with goal to be more comprehensive</p></li><li><p>Cuis - forked from Squeak with goal to remain small and easy to learn</p></li></ul><p>Both Pharo and Cuis began as forks of Squeak after maintenance of Squeak was turned over to the community and there was a lack of concensus on its future goals.</p><h2 id="implementations" tabindex="-1">Implementations</h2><p>There are many Smalltalk implementations. The most popular include:</p><ul><li><div class="row"><a href="https://squeak.org" target="_blank">Squeak (2,832 classes)</a> <img alt="Squeak Smalltalk log" class="logo" src="/blog/assets/squeak-smalltalk-logo.svg?v=1.1.1"></div></li><li><div class="row"><a href="https://pharo.org" target="_blank">Pharo (10,405 classes)</a> <img alt="Pharo Smalltalk log" class="logo" src="/blog/assets/pharo-smalltalk-logo.png?v=1.1.1"></div></li><li><div class="row"><a href="https://cuis.st" target="_blank">Cuis (675 classes)</a> <img alt="Cuis Smalltalk log" class="logo" src="/blog/assets/cuis-smalltalk-logo.png?v=1.1.1"></div><p>Juan Vuletich began work on Cuis Smalltalk began in 2005 and version 1.0 was released in March 2009. He has been active in the Smalltalk community since 1997.</p><p>The objectives of Cuis Smalltalk are to:</p><ul><li>strive for the simplicity of Smalltalk-80</li><li>include a minimal number of classes required for the kernel, a GUI framework, and development tools</li><li>create a system that is good for learning and experimenting</li></ul><p>The number of predefined classes in each implementation above were obtained by printing the result of <code>Smalltalk allClasses size</code> with latest versions as of June 10, 2024.</p></li></ul><p>Squeak, Pharo, and Cuis all use the MIT license.</p><p>Other Smalltalk implementations include</p><ul><li><p><a href="https://amber-lang.net" target="_blank">Amber</a></p><p>This is a language that is &quot;deeply inspired by Smalltalk&quot;. It compiles to JavaScript.</p></li><li><p><a href="https://github.com/dolphinsmalltalk" target="_blank">Dolphin Smalltalk</a>, only for Microsoft Windows</p></li><li><p><a href="https://www.gnu.org/software/smalltalk/" target="_blank">GNU Smalltalk</a></p></li><li><p><a href="https://github.com/nikboyd/hoot-smalltalk#hoot-smalltalk" target="_blank">Hoot Smalltalk</a></p><p>This runs on the Java Virtual Machine and uses some Java features.</p></li><li><p><a href="https://www.cincomsmalltalk.com/main/" target="_blank">Cincom Smalltalk</a></p></li><li><p><a href="https://www.instantiations.com/vast-platform/" target="_blank">VAST Platform</a></p><p>VAST stands for &quot;VisualAge SmallTalk&quot; and is provided by Instantiations.</p></li><li><p><a href="https://gemtalksystems.com/products/gs64/" target="_blank">GemStone/S</a></p></li></ul><p>Cuis supports TrueType fonts, whereas Squeak and Pharo do not.</p><p>The Cuis mascot is southern mountain cavy which is a &quot;tailless rodents with short, speckled, greyish-yellow fur, fading to pale grey on the underparts.&quot; They look similar to a mouse, but grow to around eight inches in length. They are found in Argentina. Juan Vuletich began development of Cuis Smalltalk in Buenos Aires s, Argentina. The work &quot;cuis&quot; means &quot;squeak&quot; in Rioplatense Spanish.</p><p>The GitHub repository for Cuis Smalltalk is at <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev" target="_blank">Cuis-Smalltalk-Dev</a>. As of May 2024, 96.8% of it was implemented in Smalltalk.</p><h2 id="installing-cuis-smalltalk" tabindex="-1">Installing Cuis Smalltalk</h2><p>To install Cuis Smalltalk:</p><ol><li>Browse <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev" target="_blank">Cuis Smalltalk Git repository</a>.</li><li>Click the &quot;Zip file&quot; link near the bottom of the page.</li><li>Unzip the downloaded file to obtain the directory &quot;Cuis-Smalltalk-Dev-master&quot;.</li><li>Move this directory to your desired location.</li></ol><p>To start Cuis Smalltalk, run the appropriate start script found in the installed directory based on your operating system.</p><ul><li><p>for Windows, open a Command Prompt and run <code>RunCuisOnWindows.bat</code></p></li><li><p>for Linux, open a Terminal and run <code>RunCuisOnLinux.sh</code></p></li><li><p>for Mac</p><ol><li>Double-click CuisVM.app which will fail because the app is not verified.</li><li>Open the System Settings app.</li><li>Select &quot;Privacy &amp; Security&quot;.</li><li>Scroll down to the &quot;Security&quot; section.</li><li>Look for the message '&quot;CuisVM.app&quot; was blocked from use because it is not from an identified developer.'</li><li>Click the &quot;Open Anyway&quot; button.</li><li>Click the &quot;Open&quot; button in the next dialog that appears.</li><li>Select the image file <code>Cuis6.2.image</code>.</li><li>Click the &quot;Open&quot; button.</li><li>You will see several dialogs that say '&quot;CuisVM.app&quot; would like to access files in your Documents folder'. Click the &quot;Allow&quot; button each time.</li></ol></li></ul><p>The file <code>CuisVM.app</code> (36 MB) implements the virtual machinex used by Cuis Smalltalk. It is taken directly from Squeak and does not differ in any way. All the differences between Cuis and Squeak are implemented in its base image file found in the <code>CuisImage</code> subdirectory with a name like <code>Cuis6.2.image</code> or <code>Cuis7.1-6367.image</code>. The base Cuis image file is around 19 MB.</p><p>By contrast, <code>PharoLauncher.app</code> is 198MB.</p><p>The reported name of the <code>CuisVM.app</code> app in macOS is &quot;Squeak 5.0&quot;. To change this:</p><ul><li>Open a terminal window.</li><li><code>cd</code> to the directory where you placed the file <code>CuisVM.app</code>.</li><li>Enter <code>cd CuisVM.app/Contents</code>.</li><li>Edit the file <code>Info.plist</code>.</li><li>Find the key &quot;CFBundleName&quot;.</li><li>Change its value from &quot;Squeak&quot; to &quot;Cuis&quot;.</li></ul><p>To update Cuis Smalltalk:</p><ul><li>One time, clone the GitHub repository at <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev" target="_blank">Cuis-Smalltalk-Dev</a>.</li><li>Each time, do a <code>git pull</code> on the repository.</li><li>Open the World menu</li><li>Select Changes...Install New Updates.</li></ul><p>Alternatively, start Cuis using a platform-specific shell script which always updates to the latest version. This scripts have a name that begins with <code>RunCuisOn</code>.</p><h2 id="installing-squeak-smalltalk" tabindex="-1">Installing Squeak Smalltalk</h2><ul><li>Browse <a href="https://squeak.org" target="_blank">Squeak home</a> page.</li><li>Click the &quot;Downloads&quot; link.</li><li>Click the &quot;Link&quot; button for your operating system.</li><li>Double-click the downloaded file.</li></ul><p>On macOS:</p><ul><li>Drag the application icon to the Finder &quot;Applications&quot; directory.</li><li>Double-click the <code>Squeak*.app</code> file.</li></ul><h2 id="world" tabindex="-1">World</h2><p>The Smalltalk window or desktop is referred to as the &quot;World&quot; and is implemented by the <code>WorldMorph</code> class. Many features are available on the World menu which is opened by clicking anywhere on the desktop.</p><p>One way to change the desktop color is to right-click it to open its halo, click the blue menu button, select &quot;debug...inspect morph&quot;, click in the bottom pane, enter <code>self color: Color {some-color-name}</code>, and press cmd-d (Do it). This works with all colors except <code>transparent</code> and alpha values are ignored.</p><h2 id="font-size" tabindex="-1">Font Size</h2><p>To adjust the font size:</p><ul><li>Open the World menu.</li><li>Click &quot;appearance...&quot;.</li><li>Click &quot;system fonts...&quot;.</li><li>Click &quot;increase font size&quot; or &quot;decrease font size&quot;.</li></ul><h2 id="full-screen" tabindex="-1">Full Screen</h2><p>You will likely want to work in full screen mode. To enable this, open the World menu and select Preferences ... Full screen on. To disable this, select Preferences ... Full screen on.</p><p>The following class defines a class method <code>buttons</code> that displays buttons which make it easier to toggle between full screen and windowed modes.</p><p><img alt="Cuis full screen buttons" class="logo" style="width: 20%" src="/blog/assets/cuis-full-screen-buttons.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#VFullScreenButtons</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br>fullScreen<span class="token punctuation">:</span> aBoolean<br>    Display fullScreenMode<span class="token punctuation">:</span> aBoolean<span class="token punctuation">.</span><br>    Display newDepth<span class="token punctuation">:</span> Display depth<br><br>fullScreenOff<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">false</span><br><br>fullScreenOn<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">true</span><br><br>initialize<br>    <span class="token comment">"renders buttons for setting full screen on or off"</span><br><br>    LayoutMorph newColumn<br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Full Screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LayoutMorph newRow<br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'On'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOn <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'Off'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOff <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            color<span class="token punctuation">:</span> Color transparent<br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">@</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        openInWorld</code></pre><h2 id="optional-packages" tabindex="-1">Optional Packages</h2><p>The shell script <code>clonePackageRepos.sh</code> clones many commonly used Git repositories that define optional packages. Cloning those enables installing the packages they define.</p><p>The repositories that this clones include:</p><ul><li>AMQP</li><li>AnimatedGIF</li><li>Cairo</li><li>Calendars</li><li>CodeExamples</li><li>Cuis-Smalltalk</li><li>Cuis-Smalltalk-Historical</li><li>Cuis-Smalltalk-Regex</li><li>Cuis-Smalltalk-Tools</li><li>Cuis-Smalltalk-UI</li><li>Cuis-Website</li><li>EnhancedText</li><li>Erudite</li><li>firmata</li><li>Games</li><li>GeographicInformationSystems</li><li>Learning-Cuis</li><li>Machine-Learning</li><li>Measures</li><li>Morphic</li><li>Numerics</li><li>OSProcess</li><li>Parsers</li><li>StyledTextEditor</li><li>SVG</li><li>VMMaker</li></ul><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>Double-click a Smalltalk image file such as <code>CuisImage/Cuis6.2.image</code>. The following main app window will open:</p><p><img alt="Cuis Smalltalk log" class="logo" style="width: 400px" src="/blog/assets/cuis-smalltalk-startup.png?v=1.1.1"></p><p>Alternatively you can double-click a VM file such as <code>CuisVM.app</code>, but that will open a dialog that prompts for an image file.</p><p>The main window contains a <code>WorldMorph</code>.</p><p>To change the font size used in all the windows:</p><ul><li>Click on the <code>WorldMorph</code> background and select Preferences...Size of GUI elements...</li><li>Select a point size such as 14.</li><li>Close the dialog by clicking its red circle containing an &quot;x&quot;.</li></ul><p>To select an item, click it.</p><p>To open an context-sensitive menu for an item, right-click it. After an item is selected from this menu, it will close.</p><p>Menus can be made to remain open so multiple selections can be made by clicking its push pin in the upper-right corner. If the menu is closed and re-opened, the push pin state will be reset.</p><p>To print &quot;Hello World!&quot;:</p><ol><li>Click on the WorldMorph background and select Open...Workspace.</li><li>Enter <code>Transcript show: 'Hello World!'</code> in the Workspace window. For more options, see the &quot;Transcript&quot; section below.</li><li>If no Transcript window is open, open one by clicking on the WorldMorph background and selecting Open...Transcript.</li><li>Right-click inside the Workspace window and select &quot;Do it&quot; or press cmd-d.</li><li>The output will appear in the Transcript window.</li><li>To clear the output in the Transcript, right-click in it and select &quot;Clear Transcript&quot; (no keyboard shortcut).</li></ol><p>To evaluate an expression in a Workspace and display the result after it in the workspace:</p><ul><li>Enter an expression in the Workspace window like <code>3 factorial</code>.</li><li>Select it by pressing ctrl-a or dragging over it with the mouse.</li><li>Press ctrl-p to print it.</li><li>Remove the output from the Workspace window by pressing ctrl-z to undo adding it.</li></ul><h2 id="file-system-access" tabindex="-1">File System Access</h2><p>In macOS, Cuis Smalltalk will prompt repeated for permission to access various file system folders. See this <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/issues/282" target="_blank">issue</a>.</p><p>TODO: Harvest information about file system operations from this video. <a href="https://youtu.be/stMoWMlLVzk?si=_3rmJFPkZ2g4ZIIV" target="_blank">squeak smalltalk tutorial: file handling part 1</a>.</p><h2 id="images" tabindex="-1">Images</h2><p>A Smalltalk image contains the definitions of system-provided classes, your classes, and objects that have been created, including those that represent all open windows.</p><p>An image can be used to manage collections of data, perhaps held in <code>Dictionary</code> objects, as an alternative to using a database.</p><p>One way to start an image is to double-click its file. Once started, to discover the directory where it is stored, enter <code>DirectoryEntry smalltalkImageDirectory</code> in a workspace and &quot;Print it&quot;.</p><p>To save any changes, include open windows, their position and size, and their content (ex. Workspaces), open the World menu and select &quot;Save Image&quot;, &quot;Save Image as&quot;, or &quot;Save Image and Quit&quot;.</p><p>To quit without saving changes, open the World menu and select &quot;Quit without saving&quot;.</p><p>While the classes and methods provided by a base image can be modified, it is not a good idea to do so because there won't be a good way to apply those changes to a fresh image.</p><p>It is better to create new subclasses of provided classes that override methods and save the new subclasses in a new package or &quot;file out&quot;. Doing this enables installing the new package in a fresh image.</p><p>To see the file path for the currently running image, select Help...About this System... or hover over the task bar at the bottom of the World window. This opens a Text Editor window that displays basic information about Cuis Smalltalk. It also opens a dialog that displays the current version of Cuis Smalltalk, the latest update number, and the file page to the current image.</p><h2 id="help" tabindex="-1">Help</h2><p>The World menu contains a Help submenu which contains the following:</p><ul><li>About this System ...</li><li>Terse Guide to Cuis</li><li>Class Comment Browser</li><li>Code management in Cuis</li><li>Using GitHub to host Cuis packages</li><li>Editor keyboard shortcuts</li><li>Useful Expressions</li><li>VM Statistics</li><li>Space Left</li></ul><h3 id="class-comment-browser" tabindex="-1">Class Comment Browser</h3><p>Selecting Help ... Class Comment Browser from the World menu the first time will display a message explaining that it requires cloning the <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Tools" target="_blank">Cuis-Smalltalk-Tools</a> repository. After this is done, selecting this menu item again will ask for permission to install the tool. After this is done, selecting this menu item again will open a Class Comment Browser window.</p><p>The left pane displays an alphabetical list of class names where each name is preceded by a disclosure triangle. Clicking a class name displays its first comment in the right pane. Clicking a disclosure triangle expands the class to show a numbered list of comments found in the source code for the class. Clicking any of those displays the comment text in the right pane.</p><p>It's probably more useful to open a System Browser window, find a class of interest, an view the comments there.</p><h3 id="terse-guide" tabindex="-1">Terse Guide</h3><p>An excellent source of help is the &quot;Terse Guide&quot;. To open it, open the World menu and select Help...Terse Guide to Cuis. When prompted &quot;The Terse Guide is not loaded. Would you like me to load it for you now?&quot;, select &quot;Yes&quot;. The following window will open.</p><p><img alt="Cuis Terse Guide" src="/blog/assets/cuis-terse-guide.jpg?v=1.1.1"></p><p>Click a topic to see example code. Select code and &quot;Do it&quot; or &quot;Print it&quot; to experiment. Modify the code as desired. Changes will not be saved, so it is safe to experiment.</p><h2 id="themes" tabindex="-1">Themes</h2><p>Colors and other features of the Cuis Smalltalk UI are determined by selecting a theme. By default, only two themes are provided, &quot;BrightColorTheme&quot; and &quot;DarkTheme&quot;. To add more, open the World menu, select Preferences...Themes..., and select &quot;* Load Additional Themes *&quot;. This adds the themes &quot;ClassicTheme&quot;, &quot;DarkBlueTheme&quot;, &quot;DarkColorTheme&quot;, &quot;HighContractBlackTheme&quot;, &quot;HighContrastWhiteTheme&quot;, &quot;LightBluetheme&quot;, &quot;LightGrayTheme&quot;, &quot;LightTheme&quot;, and &quot;PersonalizedTheme&quot;. Select one of these to switch to that theme.</p><p>See this <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/issues/283" target="_blank">issue</a> related to PersonalizedTheme.</p><p>Open windows will not be correctly updated after selecting a new theme. Close them and open new windows to get the intended styling.</p><p>To customize the current theme, open the World menu and select Preferences...Theme Customizer... Alternatively you can:</p><ul><li>Open a System Browser.</li><li>Select the &quot;Graphics - Themes&quot; class category.</li><li>Select the <code>Theme</code> class.</li><li>Select the <code>colors</code> message category.</li><li>Select one of the methods such as <code>buttonLabel</code>.</li><li>Change the color returned from its default value to a new value.</li></ul><p>This will affect all morphs that use that theme property. For example, the <code>PluggableButtonMorph</code> method <code>drawEmbossedLabelOn</code> uses <code>Theme current buttonLabel</code>. This method could be modified to enable specifying a different label color for specific buttons.</p><h2 id="windows" tabindex="-1">Windows</h2><p>You will be opening and using many windows. To open one, open the World menu and select a window type from the &quot;Open&quot; submenu.</p><p>To close one, click its red circle button in the upper left or move the mouse cursor over the window and press cmd-w.</p><p>The available windows include:</p><ul><li>Text Editor: for editing text other than Smalltalk source code</li><li>Workspace: for experimenting with code</li><li>Browser: for examining code (a.k.a System Browser)</li><li>Message Names: for determining which classes implement a given method</li><li>Transcript: displays output</li><li>Installed Packages: lists all installed packages and allows more to be installed</li><li>Change Sorter: TODO: Describe this.</li><li>Process Browser: displays the state of all Smalltalk processes</li><li>Emergency Evaluator: TODO: Describe this.</li><li>File List: file explorer for viewing all local files and editing text files</li><li>SUnit Test Runner: for running unit tests and viewing the results</li></ul><p>Of these, the most frequently used windows tend to be Workspace, Transcript, and Browser.</p><p>Other windows are only open for a specific object.</p><p>To tile all the open windows, open the World menu and select Windows...Tile open windows.</p><p>To refresh all the windows after code changes that affect them (or if the display renders incorrectly for some reason), open the World menu and select &quot;Windows...Restore all Windows&quot;.</p><p>TODO: Are other options in the Windows menu useful?</p><h3 id="editing-code" tabindex="-1">Editing Code</h3><p>Many kinds of windows support entering Smalltalk code. Syntax highlighting is provided.</p><table><thead><tr><th>Token Type</th><th>Styling</th></tr></thead><tbody><tr><td>class name</td><td>black and bold</td></tr><tr><td>comment</td><td>green</td></tr><tr><td>instance variable</td><td>purple</td></tr><tr><td>keyword</td><td>red</td></tr><tr><td>message name</td><td>blue</td></tr><tr><td>string</td><td>purple</td></tr><tr><td>symbol</td><td>blue and bold</td></tr></tbody></table><p>By default, class names are black and bold, message names are blue, and symbols are blue and bold.</p><p>In any text editng pane, right-click and select &quot;Help...&quot; to see a list of the supported key bindings.</p><p>To comment/uncomment selected lines of code, press cmd-&quot;.</p><p>To change the indentation of a block of code, select all the lines and press tab to increase indentation or shift-tab to decrease it.</p><h3 id="workspace-windows" tabindex="-1">Workspace Windows</h3><p>Workspace windows enable experimenting with code. They are somewhat like REPLs in other programming languages.</p><p>Enter any number of expressions separated by periods.</p><p>To prepare to execute lines of code, select them or place the cursor at the end of a single-line expression. To execute them for their side effects, press cmd-d (Do it). To execute them and print the result of the last expression inside the Workspace, press cmd-p (Print it). Output from &quot;Print it&quot; will be selected, so it can be removed by pressing the delete key. You will use &quot;Do it&quot; and &quot;Print it&quot; often, so memorize their keyboard shortcuts.</p><p>If the code goes into an infinite loop, break out of it by pressing cmd-period.</p><p>To browse a class, enter its name and press cmd-b (Browse it).</p><p><img alt="Cuis Workspace window" style="width: 80%" src="/blog/assets/cuis-workspace-window.png?v=1.1.1"></p><h3 id="transcript-windows" tabindex="-1">Transcript Windows</h3><p>This is a read-only window displays output written to it.</p><p>One way to do this is to send <code>Transcript show: &lt;object&gt;</code>, perhaps in a Workspace window. This can output any kind of object because every object has a string representation.</p><p>Another way is to use the <code>print</code> method in the <code>CharacterSequence</code> class which is the superclasss of the <code>String</code> class. This executes <code>Transcript show: self; newLine</code>. For example, <code>'Hello World!' print</code>.</p><p>The <code>print</code> message can be sent to strings, symbols, and any object that has a <code>printString</code> method.</p><p>An even better approach is to add the following method to the `Object class:</p><pre class="language-smalltalk"><code class="language-smalltalk">logAs<span class="token punctuation">:</span> aString<br>    <span class="token punctuation">(</span><span class="token string">'{1} = {2}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>aString<span class="token punctuation">.</span> <span class="token keyword">self</span><span class="token punctuation">}</span><span class="token punctuation">)</span> print</code></pre><p>For example, this can be used to print a <code>Dog</code> object as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">myDog logAs<span class="token punctuation">:</span> <span class="token string">'myDog'</span></code></pre><p>When output is sent to the <code>Transcript</code>, it appears in all <code>Transcript</code> windows. So it doesn't make sense to open more than one.</p><p>To clear the contents of the Transcript window, right-click in it and select &quot;Clear Transcript&quot; (no keyboard shortcut). If there is more than one <code>Transcript</code> window, all of them will be cleared.</p><p>TODO: Why does this window contain the word &quot;Transcript&quot; in its content?</p><p><img alt="Cuis Transcript window" style="width: 80%" src="/blog/assets/cuis-transcript-window.png?v=1.1.1"></p><h3 id="inspect-windows" tabindex="-1">Inspect Windows</h3><p>This displays all the instance variables of a specific object. Select an object reference or place the cursor immediately after it and press cmd-i (Inpect it).</p><p><img alt="Cuis Inspect window" style="width: 40%" src="/blog/assets/cuis-inspect-window.png?v=1.1.1"></p><p>Click the name of an instance variable in the top left pane to displays its current value in the top right pane.</p><p>Use the bottom pane to enter and execute Smalltalk expressions where <code>self</code> refers to the object being inspected. For example, when the object is a morph, enter <code>self color: Color red</code> and press cmd-d (Do it), or enter <code>self color</code> and press cmd-p (Print it).</p><p>Instance variables can be directly set in the bottom pane using assignment instead of sending a message. For example: <code>color := Color red</code>.</p><p>Inspector windows are live, so changes made to the instance variables are reflected.</p><p>Let's walk through an example:</p><ol><li>Open the World menu and select &quot;New Morph...&quot;.</li><li>Select &quot;Basic...Boxed Morph&quot;. An orange rectangle will appear, attached to the mouse cursor.</li><li>Move to where you want to place it and click to drop it.</li><li>cmd-click on the morph to open its halo.</li><li>Click the blue button on the top row.</li><li>Select &quot;debug...inspect morph&quot; to open an Inspect window for the object that represents that morph.</li><li>Click the <code>color</code> instance variable and note that the value is a <code>Color</code> object.</li><li>Select the name &quot;Color&quot; and press cmb-b (Browse it) to open a System Browser window focused on the <code>Color</code> class.</li><li>Click the &quot;class&quot; button to see a list of the class methods in the <code>Color</code> class.</li><li>Click the method category &quot;named colors&quot; and note that one of the methods is &quot;red&quot;.</li><li>Back in the Inspect window, click in the bottom pane.</li><li>Enter <code>self color: Color red</code> and press cmd-d (Do it).</li><li>Note that the fill color of the morph changes to red.</li></ol><h3 id="explore-windows" tabindex="-1">Explore Windows</h3><p>This displays an object tree starting at a specific object. Select an object reference or place the cursor immediately after it and press cmd-shift-i (Explore it). Click the disclosure triangles to drill down into instance variable values.</p><p>Use the bottom pane to enter and execute Smalltalk expressions where <code>self</code> refers to the selected object in the top pane.</p><p><img alt="Cuis Explore window" style="width: 40%" src="/blog/assets/cuis-explore-window.png?v=1.1.1"></p><h3 id="system-browser-windows" tabindex="-1">System Browser Windows</h3><p>System Browser windows contain four rows.</p><ul><li><p>The first (top) row contains four panes for displaying and operating on class categories, classes, message categories, and methods.</p><p>Selecting a class category in the first pane displays the classes in that category in the second pane. For example, the class <code>String</code> is in the class category <code>Text</code>.</p><p>Selecting a class in the second pane displays message categories for the class in the third pane. Example message category names include &quot;accessing&quot;, &quot;comparing&quot;, &quot;copying&quot;, &quot;converting&quot;, &quot;enumerating&quot;, and &quot;printing&quot;.</p><p>Selecting a message category (a.k.a protocol) in the third pane displays methods in that category in the fourth pane. The top, default messate category is &quot;-- all --&quot;, which contains all the methods.</p><p>The items in these panes are not sorted alphabetically by default. To sort them, hover over a pane and press cmd-shift-a (alphabetize)</p></li><li><p>The second row displays a message describing the item selected in the top row.</p></li><li><p>The third row contains a series of buttons that can be clicked to open other windows that show information related to the selected item. One exception is the &quot;show...&quot; button. Clicking this displays a popup containing exclusive checkboxes that can be checked to indicate what should be displayed in the fourth row. The default is &quot;source&quot; which is typically the desired choice.</p></li><li><p>The fourth row displays information about the selected item based on the checkbox that is selected for the &quot;show...&quot; button. By default it displays Smalltalk code for the selected item and can be used to edit the code. When there are unsaved code changes in this pane, a thin, red border appears around it. Press cmd-s (Accept) to save the changes and the thin, red border will disappear.</p></li></ul><p>To open a System Browser window, click on the <code>WorldMorph</code> background, select Open, and select Browser.</p><p>To search for a class by part of its name, click in the class category pane and press cmd-f (find class...). Then enter part of a class name and press return. A popup list of matching classes will appear. Click one of the names to browse that class.</p><p><img alt="Cuis System Browser window" style="width: 100%" src="/blog/assets/cuis-system-browser-window.png?v=1.1.1"></p><p>To browse a class, type its name (ex. String) in a Workspace window and press cmd-b (Browse it). This opens a Browser window with the class already selected.</p><p>To create a new class:</p><ul><li><p>Select a class category.</p><p>If the desired class category is already selected and a class in that category is selected, click it so it is deselected. The bottom pane will now contain the following message send template:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#NameOfSubclass</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'SelectedClassCategory'</span></code></pre></li><li><p>Change &quot;NameOfSubclass&quot; to the name of the new class.</p></li><li><p>Add desired instance and class variable names as space-separated strings.</p></li><li><p>Save by pressing cmd-s (Accept).</p></li></ul><p>To create a new method:</p><ul><li><p>Click the &quot;instance&quot; or &quot;class&quot; button to indicate the scope of the method.</p></li><li><p>Select a method category.</p><p>This can be &quot;-- all --&quot;, &quot;as yet unclassified&quot;, or any other method category. To create new category, move the mouse cursor over the method category pane and press cmd-n (new category...).</p><p>The bottom pane will now contain the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">messageSelectorAndArgumentNames<br>    <span class="token comment">"comment stating purpose of message"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">temporary</span> <span class="token variable">variable</span> <span class="token variable">names</span> <span class="token punctuation">|</span></span><br>    statements</code></pre></li><li><p>Modify the code template to define the new method.</p></li><li><p>Save by pressing cmd-s (Accept).</p></li></ul><p>To move a method from the class side to the instance side or vice-versa, right-click the method name in the fourth panel and select refactorings...move to instance/class methods.</p><p>To delete a method from a class, select it and press cmd-x (Remove it). Then select &quot;Remove it&quot; or &quot;Remove, then browse senders&quot;. The latter option allows the senders to be modified.</p><p>When the mouse cursor is over any of the four lists at the top, typing a letter causes the list to scroll to the first item that begins with that letter.</p><p>There is no provided way to search for code that contains a given string. Mariano Montone implemented this and shared a change set via email. See the file <code>SearchSourceMenus-MarianoMontone.cs.st</code>. Location this in a &quot;File List&quot; window and click the &quot;install&quot; button. This adds the context menu item &quot;search source...&quot;.</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-the-system-Browser.html" target="_blank">A brief introduction to the System Browser</a>.</p><h3 id="hierarchy-browser-windows" tabindex="-1">Hierarchy Browser Windows</h3><p>When a class is selected in a System Browser window, the class pane (second) only displays a list of classes defined in the selected class category. To also see class hierarchy of a selected class, open a Hierarchy Browser window by pressing cmd-h (browse hierarchy).</p><p>This window is similar to a System Browser window, but it omits the class categories pane and displays the complete class hierarchy of the selected class.</p><p>Here's an example of a Hierarchy Browser window for the <code>Array</code> class:</p><p><img alt="Cuis Hierarchy window" style="width: 40%" src="/blog/assets/cuis-hierarchy-window.png?v=1.1.1"></p><h3 id="protocol-windows" tabindex="-1">Protocol Windows</h3><p>When a class is selected in a System Browser window, only the methods defined directly in that class are displayed. To also see methods defined in superclasses, open a Protocol window by pressing cmd-p (browse protocol).</p><p>This window is similar to a System Browser window, but it omits the class categories pane and displays all instance methods available on instances of the class. Methods defined directly on the class are in bold, and methods defined in superclasses are not.</p><p>Here's an example of a Protocol window for the <code>Array</code> class:</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><h3 id="text-editor-windows" tabindex="-1">Text Editor Windows</h3><p>&quot;Text Editor&quot; windows enable editing text files. They support changing the font size, color, and style of selected text.</p><p>These are used to edit text other than Smalltalk source code.</p><p>The text can be saved in <code>.txt</code> files, but all the formatting is discarded and only the raw text is saved.</p><h3 id="message-names-windows" tabindex="-1">Message Names Windows</h3><p>These windows enable searching for implementors of methods whose name contains a given substring. For example, enter &quot;select:&quot; to find all the classes that have a method whose names end with that. Those include <code>Bag</code>, <code>Collection</code>, <code>Dictionary</code>, <code>Heap</code>, <code>OrderedCollection</code>, <code>SequenceableCollection</code>, and <code>SortedCollection</code>. Click one the class names to see the method implementation.</p><p><img alt="Cuis Smalltalk Protocol window" style="width: 100%" src="/blog/assets/cuis-protocol-window.png?v=1.1.1"></p><h3 id="messagenotunderstood-windows" tabindex="-1">MessageNotUnderstood Windows</h3><p>When a message is sent to an object that doesn't have a corresponding method, a MessageNotUnderstood window is opened. This displays a stack trace showing the origin of the message send with the most recent call at the top.</p><p>One option is to implement the missing method. To do this:</p><ul><li>Click the &quot;Create&quot; button.</li><li>Select the class in which the method will be added.</li><li>Select a category for the method.</li><li>Enter an implementation for the method.</li><li>Press cmd-s to save it.</li><li>Optionally click the &quot;Proceed&quot; button to resume execution with calling the new method.</li></ul><p><img alt="Cuis MessageNotUnderstood window" style="width: 85%" src="/blog/assets/cuis-messagenotunderstood-window.png?v=1.1.1"></p><h3 id="debug-windows" tabindex="-1">Debug Windows</h3><p>To debug code, select one or more lines in a Workspace window and press cmd-shift-d (Debug it). A Debug window will appear.</p><p><img alt="Cuis Debug window" style="width: 100%" src="/blog/assets/cuis-debug-window.png?v=1.1.1"></p><p>Click the &quot;Into&quot; button to begin executing the code. The &quot;Proceed&quot;, &quot;Restart&quot;, &quot;Into&quot;, &quot;Over&quot; buttons function as expected if you have used other debuggers.</p><p>To run up to a specific location in the code, click to place the cursor where execution should stop and click the &quot;Run to Cursor&quot; button.</p><p>The in-scope variables are listed in the third panel of the bottom row. Click a variable name to see its current value in the fourth panel of the bottom row. To change the value of a variable, edit it where displayed and press cmd-s (Accept).</p><p>Click the &quot;Where&quot; button to highlight the next message to be sent in the code.</p><p>The Debug window will close when the end of the selected code is reached.</p><h3 id="change-sorter-windows" tabindex="-1">Change Sorter Windows</h3><p>TODO: Explain how to use these.</p><h3 id="process-browser-windows" tabindex="-1">Process Browser Windows</h3><p>Process Browser windows display a list of all the Smalltalk-related processes that are running.</p><p>To terminate a process, select it and press cmd-t (terminate). This is especially useful for terminating &quot;WebServer's listening process&quot;.</p><p><img alt="Cuis Process Browser window" style="width: 85%" src="/blog/assets/cuis-process-browser-window.png?v=1.1.1"></p><h3 id="emergency-evaluator" tabindex="-1">Emergency Evaluator</h3><p>The Emergency Evaluator can be useful to save work when the current session becomes somewhat unusable.</p><p><img alt="Cuis Emergency Evaluator" style="width: 30%" src="/blog/assets/cuis-emergency-evaluator.png?v=1.1.1"></p><p>TODO: Explain when this is useful.</p><h2 id="syntax" tabindex="-1">Syntax</h2><table><thead><tr><th>Item</th><th>Example</th></tr></thead><tbody><tr><td>comment</td><td><code>&quot;some text&quot;</code></td></tr><tr><td>temporary (local) variable (private scope)</td><td><code>myTemp</code> (camelCase)</td></tr><tr><td>global variable (shared scope)</td><td><code>MyGlobal</code> (CamelCase)</td></tr><tr><td>pseudo variable (cannot assign)</td><td><code>self</code></td></tr><tr><td>integer</td><td><code>123</code></td></tr><tr><td>float</td><td><code>3.14</code></td></tr><tr><td>exponential notation</td><td><code>1.23e4</code></td></tr><tr><td>character</td><td><code>$a</code></td></tr><tr><td>string</td><td><code>'text'</code> (double ' to include)</td></tr><tr><td>string and array concatenation (comma message)</td><td><code>'foo', 'bar', 'baz'</code> or <code>#(1 2), #(3 4)</code></td></tr><tr><td>symbol (globally unique string)</td><td><code>#name</code></td></tr><tr><td>static array (elements are literal values)</td><td><code>#(1 4 8)</code></td></tr><tr><td>dynamic array (elements are computed at run time)</td><td><code>{1. 2 * 2. 2 raisedTo: 3}</code></td></tr><tr><td>assignment</td><td><code>&lt;variable&gt; := &lt;expression&gt;.</code></td></tr><tr><td>method variable declarations</td><td><code>| foo bar baz |</code></td></tr><tr><td>block with no arguments</td><td><code>[ &lt;expressions&gt; ]</code></td></tr><tr><td>block with arguments</td><td><code>[:a :b | a + b]</code></td></tr><tr><td>unary message send</td><td><code>&lt;object&gt; &lt;message&gt;</code></td></tr><tr><td>binary message send (look like operators)</td><td><code>4 * 5</code></td></tr><tr><td>keyword message send</td><td><code>2 raisedTo: 4 modulo: 3</code></td></tr><tr><td>message cascade - sends to initial receiver</td><td><code>Transcript show: 'foo'; newLine; show: 'bar'</code></td></tr><tr><td>message chaining - sends to previous result</td><td><code>2 * 3 :: squared :: negated</code> (-36)</td></tr><tr><td>method return value</td><td><code>^&lt;expression&gt;</code></td></tr><tr><td>expression separator (period)</td><td><code>Transcript show: 'foo'. Transcript show: 'bar'</code></td></tr><tr><td>reference to current object in a method</td><td><code>self</code></td></tr></tbody></table><p>To render a left pointing arrow in place of <code>:=</code> for all assigments, open the World menu and select Preferences...Show ST-80 Assignments. The next time code is modified, all the <code>:=</code> messages will be rendered by a left pointing arrow. Typing an underscore is a shorthand way to type <code>:=</code>. Typing either will be rendered as a left pointing arrow. This does not change the characters that are actually used. To revert to rendering <code>:=</code> messages, open the World menu and select Preferences...Show ANSI Assignments.</p><p>The caret (^) in a return expression can be followed by a space, but a space is not typically included.</p><p>In static arrays the elements are separated by spaces.</p><p>In dynamic arrays the expressions are separated by periods.</p><p>TODO: What is a &quot;compound literal&quot;?</p><h3 id="classes" tabindex="-1">Classes</h3><p>Classes define sets of associated class variables, instance variables, class methods, and instance methods.</p><p>Classes are defined by sending the message <code>#subclass:instanceVariableNames:classVariableNames:poolDictionaries:category:</code> to a superclass which can be <code>Object</code> or any other class. The <code>subclass</code> keyword takes a symbol. The remaining keywords all take strings. All the keywords must be supplied, even if their value is an empty string. The following is an example class definition.</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Math</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Instance variable names must begin lowercase. Class variable names must begin uppercase. If the category is an empty string, it will be changed to 'as yet unclassified'.</p><p>It is common to not use class variables or pool dictionaries.</p><p>Pool dictionaries enable sharing data between related classes. They reside in the <code>Smalltalk</code> dictionary. To create a pool dictionary: <code>Smalltalk at: #MyPool put: (Dictionary new)</code>. Then refer to it from any number of classes with <code>poolDictionaries: 'MyPool'</code>.</p><p>All classes are global and there is no namespacing. Class names are added to the global variable <code>Smalltalk</code> which is a <code>SystemDictionary</code>. This requires all class names to be unique. Typically a common prefix, perhaps 2 or 3 uppercase letters, is added to a set of related class names in order to make the unique. Lack of namespacing is seen by some as a weakness of Smalltalk.</p><p>All classes inherit from one other class, except <code>Object</code> which is the highest superclass of all classes.</p><p>TODO: Are class names required to be unique across all packages?</p><p>Programming languages use many terms to describe data that is encapsulated by objects created from a class. Examples include &quot;attribute&quot;, &quot;property&quot;, and &quot;field&quot;. Smalltalk calls these &quot;instance variables&quot;.</p><p>Instance variables can only be directly accessed by methods in the same class. To expose them outside the class, add getter and setter (optional) methods. For example, if <code>score</code> is an instance variable then the following is a getter method for it. By convention, the name of getter and setter methods is the same as the name of the associated instance variable, but this is not required.</p><pre class="language-smalltalk"><code class="language-smalltalk">score<br>    <span class="token operator">^</span>score<br><br>score<span class="token punctuation">:</span> aNumber<br>    score <span class="token operator">:=</span> aNumber</code></pre><p>As shown above, another convention is for variables associated with keyword messages to indicate their expected type.</p><h3 id="accessor-methods" tabindex="-1">Accessor Methods</h3><p>Instance variables are never accessed directly from outside of the class that defines them. To expose their values, write getter methods. To allow them to be modified, write setter methods.</p><p>Suppose a class Dog has the instance variable <code>breed</code>. The following accessor methods can be implemented:</p><pre class="language-smalltalk"><code class="language-smalltalk">breed<br>    <span class="token operator">^</span>breed<br><br>breed<span class="token punctuation">:</span> aString<br>    breed <span class="token operator">:=</span> aString</code></pre><p>Accessor methods for all instance variables in a class can be generated by right-clicking the class name in a System Browser window and selecting &quot;more...create inst var accessors&quot;.</p><h3 id="objects" tabindex="-1">Objects</h3><p>In Smalltalk, code and data are both represented by objects. Code can be described by a method or block, both of which are kinds of objects.</p><p>Objects are created by sending a message to a class. In addition, some kinds of objects can be created from a literal syntax such as numbers, strings, and arrays.</p><p>Every class supports the class method <code>new</code>, which creates and returns a new instance of the class. If the class defines the instance method <code>initialize</code>, the <code>new</code> method will call it. The <code>initialize</code> method typically initializes the instance variables of the object.</p><p>Every class also supports the class method <code>basicNew</code> which is similar to the <code>new</code> method, but does not call the instance method <code>initialize</code>.</p><p>Let's look at an example <code>Rect</code> class with instance variables <code>height</code> and <code>width</code>.</p><p>We can define the class method <code>height:width:</code> that provides an alternate way to create objects as follows. This assumes we can send the message <code>#initializeHeight:width:</code> (in the <code>private</code> message category) to instances.</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth</code></pre><p>We can then define the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    height <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> <span class="token number">1</span><br><br>initializeHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    height <span class="token operator">:=</span> aHeight<span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> aWidth<br><br>area<br>    <span class="token operator">^</span>height <span class="token operator">*</span> width</code></pre><p>We can use the <code>Rectangle</code> class as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">r1 <span class="token operator">:=</span> Rect <span class="token keyword">new</span><span class="token punctuation">.</span><br>Transcript show<span class="token punctuation">:</span> r1 area<span class="token punctuation">.</span> <span class="token comment">"1"</span><br>r2 <span class="token operator">:=</span> Rect height<span class="token punctuation">:</span> <span class="token number">2</span> width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>Transcript show<span class="token punctuation">:</span> r2 area<span class="token punctuation">.</span> <span class="token comment">"6"</span></code></pre><p>To determine the class of an object, send it the <code>class</code> unary message. For example, <code>19 class</code> returns <code>SmallInteger</code>.</p><p>Variables defined in Workspace windows hold references to their object values. It may be necessary to close a Workspace window in order to trigger garbage collection of those objects.</p><h3 id="immutability" tabindex="-1">Immutability</h3><p>To enforce immutability of objects:</p><ul><li><p>Enter `Feature require: 'Immutability' and &quot;Do it&quot;.</p><p>This package can be found at <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/blob/master/Packages/System/Immutability.pck.st" target="_blank">Immutability.pck.st</a>. Among other things, it adds the instance method <code>beImmutable</code> to the<code>Object</code> class.</p></li><li><p>Send the <code>beImmutable</code> message to any object.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<span class="token punctuation">;</span> beImmutable<span class="token punctuation">;</span> yourself</code></pre><p>Note the use of <code>yourself</code> to return the current object rather than the return value of the <code>beImmutable</code> method.</p></li></ul><p>If an attempt is made to modify any property of an immutable object, a &quot;ModificationForbidden&quot; window will open containing a stack trace that indicates where the attempt was made.</p><h3 id="methods" tabindex="-1">Methods</h3><p>Methods are associated with a specific class. Instance methods handle messages sent to objects instantiated from the class. Class methods handle messages sent to the class.</p><p>Parameter names typically begin with &quot;a&quot; or &quot;an&quot;. For example, <code>aScore</code>, <code>aName</code>, or <code>aDog</code>. Sometimes the names indicate the expected object type. For example, <code>aNumber</code>, <code>aString</code>, or <code>anArray</code>.</p><p>Methods that return an object are said to &quot;answer&quot; a value. For example, the instance method <code>asUppercase</code> in the <code>String</code> class contains the comment &quot;Answer a String made up from the receiver whose characters are all uppercase.&quot;</p><p>All methods are public. By convention, methods that should only be used by other methods in the same class are placed in the &quot;private&quot; message category.</p><p>To find a method:</p><ul><li>Click the <code>WorldMorph</code> back and select Open ... Message Names. This will open a &quot;Message names&quot; window.</li><li>Enter part of a message and press the return key. This will display a list of matching message names.</li><li>Click one of the message names to see the classes that implement it.</li><li>Click one of the class names and click the &quot;Browse&quot; button to open a System Browser that shows the method implementation.</li></ul><p>For example, entering &quot;nj&quot; will find the &quot;inject:into:&quot; message that is implemented by the <code>Collection</code> class.</p><p>Squeak Smalltalk supports finding methods by part of their name OR by providing example input and output. The steps to use this are:</p><ul><li>From the &quot;Tools&quot; menu, select &quot;Method Finder&quot;. This opens a &quot;Selector Browser&quot; window.</li><li>Enter part of the method name OR an example input, followed by a period, and the expected output.</li><li>Press the return key.</li><li>A list of all matching methods will be displayed.</li><li>Click one of the methods to open a System Browser that shows the method implementation.</li></ul><p>See <a href="https://www.youtube.com/watch?v=cI_yBWdmoeI&list=PLu8vLCSA-4hklsvT9W6ruintbdx_K0DYW&index=11&t=28s" target="_blank">The amazing Squeak Method Finder</a>.</p><p>To add a method to a class:</p><ul><li>Open a System Browser.</li><li>Select the category of the class in the top, first pane.</li><li>Select the class in the top, second pane.</li><li>Click the message category in which the new method will be placed, or select &quot;as yet unclassified&quot; in the top, third pane.</li><li>A starting template for a new method definition will appear in the bottom pane.</li><li>Change &quot;messageSelectorAndArgumentNames&quot; to the name of the new method.</li><li>Modify the comment describing the method.</li><li>Update the list of temporary (local) variable names or delete that line.</li><li>Replace &quot;statements&quot; with the method implementation.</li><li>If the method was not associated with a method category ...<ul><li>If the top, third pane does not contain a suitable message category ...<ul><li>Right-click in that pane and select &quot;new category&quot;, or click in the top, third pane and press cmd-n.</li><li>Select a category to add.</li><li>If none of the provided categories are suitable, select &quot;new...&quot; and enter the name of a category to be added. For consistency, try to stick with the provided category names.</li></ul></li><li>Click &quot;as yet unclassified&quot; in the top, third pane.</li><li>Drag the name of the new method from the top, fourth pane to its method category to associate it.</li></ul></li></ul><p>To sort the message category names alphabetically, right-click in the top, third pane and select &quot;alphabetize&quot;.</p><p>To remove a method in the System Browser, select it and press cmd-x (remove method).</p><p>The following methods can be added to the <code>Integer</code> class.</p><pre class="language-smalltalk"><code class="language-smalltalk">predecessor<br>    <span class="token comment">"answers the predecessor of this integer"</span><br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token operator">-</span> <span class="token number">1</span><br><br>successor<br>    <span class="token comment">"answers the successor of this integer"</span><br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token operator">+</span> <span class="token number">1</span></code></pre><p>Superclasses can define methods that subclasses must implement. For example, a class named <code>VShape</code> can define the following method:</p><pre class="language-smalltalk"><code class="language-smalltalk">area<br>    <span class="token comment">"answers the area of the shape"</span><br>    <span class="token keyword">self</span> subclassResponsibility</code></pre><p>The classes <code>VCircle</code> and <code>VRectangle</code> can be defined as subclasses of <code>VShape</code>. If they do not define the <code>area</code> method and that message is sent to an instance, an Error dialog with the title &quot;My subclass should have overridden #area&quot; will appear.</p><p>To add the missing method, click the &quot;Create&quot; button, select a message category for the method, enter its implemenation, press cmd-s to save, and press the &quot;Proceed&quot; button to continue running the code at the point of the failed message send.</p><p>The <code>VCircle</code> class can have the following class method for creating instances:</p><pre class="language-smalltalk"><code class="language-smalltalk">radius<span class="token punctuation">:</span> aNumber<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeRadius<span class="token punctuation">:</span> aNumber<span class="token operator">-</span></code></pre><p>The <code>VCircle</code> class can have the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initializeRadius<span class="token punctuation">:</span> aNumber<br>    radius <span class="token operator">:=</span> aNumber<br><br>area<br>    <span class="token operator">^</span>Float pi <span class="token operator">*</span> radius <span class="token operator">*</span> radius</code></pre><p>The <code>VRectangle</code> class can have the following class method for creating instances:</p><pre class="language-smalltalk"><code class="language-smalltalk">height<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth</code></pre><p>The <code>VRectangle</code> class can have the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initializeHeight<span class="token punctuation">:</span> aHeight width<span class="token punctuation">:</span> aWidth<br>    height <span class="token operator">:=</span> aHeight<span class="token punctuation">.</span><br>    width <span class="token operator">:=</span> aWidth<br><br>area<br>    <span class="token operator">^</span>height <span class="token operator">*</span> width</code></pre><p>To delete a method, select it and press cmd-x (remove method).</p><p>To delete a method category and all the methods in it, select it and press cmd-x (remove).</p><p>Both class and instance methods can call themselves recursively.</p><p>Here is an example of a class method from a class I created named <code>Math</code> that calls itself recursively:</p><pre class="language-smalltalk"><code class="language-smalltalk">factorial<span class="token punctuation">:</span> n<br>    <span class="token comment">"answers the factorial of a given integer"</span><br>    <span class="token operator">^</span><span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span>n <span class="token operator">*</span> <span class="token punctuation">(</span>Math factorial<span class="token punctuation">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>Here is an example of an instance method I added to the <code>Integer</code> class that calls itself recursively. This method already exists in that class and is more efficient than the version below.</p><pre class="language-smalltalk"><code class="language-smalltalk">factorial2<br>    <span class="token comment">"answers the factorial of this integer"</span><br>    <span class="token operator">^</span><span class="token punctuation">(</span><span class="token keyword">self</span> <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">self</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> factorial2<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>If you edit the name of a method in code editing pane of a System Browser, it will create a copy of the method with the new name. A method with the previous name will still exist and can be deleted. An alternative is to right-click the method in the 4th pane and select &quot;refactorings...rename...&quot;.</p><p>While it is not commonly done, a method can check the types of its arguments an alter its functionality based on those. For example, this class method returns a number that is double what is passed to it. If it is given a <code>String</code> instead of a <code>Number</code>, it converts it to a <code>Number</code> and doubles it. If it is given some other kind of object, it just returns <code>0</code>. TODO: How can you add error handling for strings that do not contain a number?</p><pre class="language-smalltalk"><code class="language-smalltalk">double<span class="token punctuation">:</span> obj<br>    <span class="token comment">"demonstrates taking different actions based on the type of an argument"</span><br><br>    <span class="token punctuation">(</span>obj isKindOf<span class="token punctuation">:</span> Number<span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span>obj <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">(</span>obj isKindOf<span class="token punctuation">:</span> String<span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span>obj asNumber <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span><span class="token number">0</span></code></pre><h3 id="primitive-methods" tabindex="-1">Primitive Methods</h3><p>From the Blue Book ...</p><blockquote><p>All behavior in the system is invoked by messages, however, all messages are not responded to by executing Smalltalk-80 methods. There are about one hundred primitive methods that the Smalltalk-80 virtual machine knows how to perform. Examples of messages that invoke primitives are the <code>+</code> message to small integers, the <code>at:</code> message to objects with indexed instance variables, and the <code>new</code> and <code>new:</code> messages to classes. When <code>3</code> gets the message <code>+ 4</code>, it does not execute a Smalltalk-80 method. A primitive method returns <code>7</code> as the value of the message. The complete set of primitive methods is included in the fourth part of this book, which degcribes the virtual machine. Methods that are implemented as primitive methods begin with an expression of the form <code>&lt;primitive #&gt;</code> where <code>#</code> is an integer indicating which primitive method will be followed. If the primitive fails to perform correctly, execution continues in the Smalltalk-80 method. The expression <code>&lt;primitive #&gt;</code> is followed by Smalltalk-80 expressions that handle failure situations.</p></blockquote><p>In Cuis Smalltalk, see the comment at the beginning of the class method <code>whatIsAPrimitive</code> in the <code>Object</code> class. It contains the following:</p><blockquote><p>When the Smalltalk interpreter begins to execute a method which specifies a primitive response, it tries to perform the primitive action and to return a result. If the routine in the interpreter for this primitive is successful, it will return a value and the expressions in the method will not be evaluated. If the primitive routine is not successful, the primitive 'fails', and the Smalltalk expressions in the method are executed instead. These expressions are evaluated as though the primitive routine had not been called.</p></blockquote><h2 id="refactorings" tabindex="-1">Refactorings</h2><p>To refactor a method or code, select it, right-click, and select an option from the &quot;refactorings&quot; submenu.</p><p>For methods the options include:</p><ul><li>rename... (cmd-shift-r)</li><li>change keyword order...</li><li>add parameter...</li><li>remove parameter...</li><li>inline method...</li><li>move to instance/class method</li><li>push up</li><li>add in superclass as subclassResponsibility</li><li>push down to subclasses</li><li>push down to one subclass</li></ul><p>To rename a method without opening the refactorings menu, select the method and press cmd-shift-r.</p><p>For selected code the options include:</p><ul><li>Extract as Parameter...</li><li>Extract Temporary...</li><li>Extract Method...</li><li>Inline Temporary...</li><li>Inline Method...</li><li>Temporary to Instance Variable</li><li>Push Up Instance Variable</li><li>Push Down Instance Variable</li></ul><h2 id="keywords-self-and-super" tabindex="-1">Keywords self and super</h2><p>The <code>self</code> keyword can be used in instance methods to refer to the current object. It can also be used in class methods to refer to the current class.</p><p>TODO: Add more detail.</p><h2 id="variables" tabindex="-1">Variables</h2><p>Smalltalk supports three kinds of variables:</p><ul><li><p>Class variables are associated with a class.</p><p>These are declard in a space-separated string that is the value of <code>classVariableNames</code> in a class definition.</p></li><li><p>Instance variables are associated with a specific instance of a class.</p><p>These are declard in a space-separated string that is the value of <code>instanceVariableNames</code> in a class definition.</p></li><li><p>Temporary (or local) variables are accessible only within a method or block.</p><p>These are declared in a space-separated string between vertical bars inside a method or block definition.</p></li></ul><p>While Smalltalk does not support global variables, the <code>Smalltalk</code> <code>SystemDictionary</code> object can be used for this purpose. The following code adds the key &quot;color&quot; with the value &quot;yellow&quot; and they retrieves the value for that key:</p><pre class="language-smalltalk"><code class="language-smalltalk">Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> put<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">.</span><br>color <span class="token operator">:=</span> Smalltalk at<span class="token punctuation">:</span> <span class="token string">'color'</span> ifAbsent<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">.</span></code></pre><h2 id="reflection" tabindex="-1">Reflection</h2><p>Smalltalk provides many methods for getting information about classes and objects. The following table lists some of them.</p><table><thead><tr><th>Method</th><th>Answers</th></tr></thead><tbody><tr><td><code>Smalltalk allClasses</code></td><td>an <code>Array</code> of all classes defined in the current image</td></tr><tr><td><code>Smalltalk allClassesImplementing: #selector</code></td><td>an <code>Array</code> of all classes that implement a given selector</td></tr><tr><td><code>SomeClass allClassVarNames</code></td><td>a <code>Set</code> of class variable names defined in this class</td></tr><tr><td><code>SomeClass allSelectors</code></td><td>an <code>IdentitySet</code> of all message selectors supported by this class, including selectors for inherited methods</td></tr><tr><td><code>SomeClass allInstances</code></td><td>an <code>Array</code> of all existing instances of this class</td></tr><tr><td><code>SomeClass allInstVarNames</code></td><td>an <code>Array</code> of instance variable names defined in this class</td></tr><tr><td><code>SomeClass allInstVarNamesEverywhere</code></td><td>an <code>Array</code> of instance variable names defined in this class and inherited classes</td></tr><tr><td><code>SomeClass allMethodsInCategory: 'some-category'</code></td><td>an <code>Array</code> of instance methods in a given category, including those defined in this class and inherited</td></tr><tr><td><code>SomeClass class allMethodsInCategory: 'some-category'</code></td><td>an <code>Array</code> of class methods in a given category, including those defined in this class and inherited</td></tr><tr><td><code>SomeClass allSubclasses</code></td><td>an <code>OrderedCollection</code> of subclasses</td></tr><tr><td><code>SomeClass allSuperclasses</code></td><td>an <code>OrderedCollection</code> of superclasses</td></tr><tr><td><code>CodeListPackages installedPackages</code></td><td>an <code>Array</code> of <code>CodePackage</code> objects (appear in System Browser class category pane)</td></tr></tbody></table><p>TODO: Why does <code>allClassVarNames</code> return a <code>Set</code> when <code>allInstVarNames</code> returns an <code>Array</code>? TODO: Is there a way to get all the message categories used by a class?</p><p>To run code on every instance of a given class, send the <code>allInstancesDo:</code> message to the class.</p><p>For example, to delete all instances of a given class, run <code>SomeClass allInstancesDo: [ :obj | obj delete ]</code>.</p><h2 id="code-management" tabindex="-1">Code Management</h2><p>Selecting Help ... Code management in Cuis from the World menu opens a window titled &quot;Managing your code in Cuis&quot;. That offers the following advice:</p><blockquote><p>Code that is not part of the Cuis Core image itself, like applications, frameworks and libraries, should be stored in Packages. New code that are meant as patches, fixes or additions; that could eventually become part of Cuis itself, is not part of any Package, and is therefore automatically stored in ChangeSets.</p></blockquote><h3 id="file-list" tabindex="-1">File List</h3><p>To view local files and operate on them, select Open ... File List from the World menu.</p><p>By default, the top directory will be one from which Cuis was started, referred to as &quot;Cuis top&quot;. To instead start from the root directory of the drive, right-click in the upper-left pane and select &quot;default initial directories&quot; ... &quot;OS roots&quot;. This change will not take effect until a new File List window is opened.</p><p>A common operation performed in a File List window is to locate and select a <code>.pck.st</code> file that defines a package and click the &quot;install package&quot; button to install it.</p><h3 id="file-out-and-file-in" tabindex="-1">File Out and File In</h3><p>To save all the code for a package to a text file:</p><ul><li>Open a System Browser.</li><li>Select the package in the top, first pane.</li><li>Right-click and select &quot;fileOut&quot;.</li></ul><p>&quot;fileOut&quot; can be used to save any of these to a <code>.st</code> text file:</p><ul><li>a single method</li><li>all the methods in a single method category</li><li>a single class and all its methods</li><li>a single package, but not methods it adds to classes in other packages (or class categories)</li></ul><p>The file will be saved in <code>{distribution-name}-UserFiles/FileOuts/{package-name}.st</code>.</p><p>These files use the bang-separated &quot;chunked format&quot;. The following is an example for a <code>Dog</code> class. Each chunk is delimited by exclamation marks. A chunk can contain:</p><ul><li>a &quot;From&quot; line the gives the version of Smalltalk that create the file and the date and time at which the file was created</li><li>a &quot;classDefinition&quot; that associates a class or metaclass with a class category</li><li>a &quot;subclass: message send that creates a class</li><li>a &quot;methodsFor&quot; which states that the method definitions that follow are in a given method category</li><li>a method definition</li><li>a message send that creates an object that should exist in the environment</li><li>a message send that executes code for its side effects</li></ul><p>The following is an example of a fileOut file.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'From Cuis7.1 [latest update: #6464] on 12 June 2024 at 10:47:55 am'</span><span class="token operator">!</span><br><span class="token operator">!</span>classDefinition<span class="token punctuation">:</span> <span class="token symbol">#Dog</span> category<span class="token punctuation">:</span> <span class="token symbol">#Volkmann</span><span class="token operator">!</span><br>Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Dog</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'breed name'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">'Count'</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:47:34'</span><span class="token operator">!</span><br>initialize<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    Count <span class="token operator">:=</span> Count <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:00:43'</span><span class="token operator">!</span><br>initializeName<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<br>    name <span class="token operator">:=</span> aName<span class="token punctuation">.</span><br>    breed <span class="token operator">:=</span> aBreed<span class="token operator">!</span> <span class="token operator">!</span><br><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:03:03'</span><span class="token operator">!</span><br>breed<br>    <span class="token operator">^</span>breed<span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/11/2024 20:02:57'</span><span class="token operator">!</span><br>name<br>    <span class="token operator">^</span>name<span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token comment">"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "</span><span class="token operator">!</span><br><br><span class="token operator">!</span>classDefinition<span class="token punctuation">:</span> <span class="token string">'Dog class'</span> category<span class="token punctuation">:</span> <span class="token symbol">#Volkmann</span><span class="token operator">!</span><br>Dog class<br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><span class="token operator">!</span><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'accessing'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 09:45:13'</span><span class="token operator">!</span><br>count<br>    <span class="token operator">^</span>Count<span class="token operator">!</span> <span class="token operator">!</span><br><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:41:45'</span><span class="token operator">!</span><br>initialize<br>    <span class="token comment">"This must be explicitly called with Dog initialize."</span><br>    Count <span class="token operator">:=</span> <span class="token number">0</span><span class="token operator">!</span> <span class="token operator">!</span><br><br><span class="token operator">!</span>Dog class methodsFor<span class="token punctuation">:</span> <span class="token string">'initialization'</span> stamp<span class="token punctuation">:</span> <span class="token string">'RMV 6/12/2024 10:43:52'</span><span class="token operator">!</span><br>name<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeName<span class="token punctuation">:</span> aName breed<span class="token punctuation">:</span> aBreed<span class="token operator">!</span> <span class="token operator">!</span><br><br><br>Dog initialize<span class="token operator">!</span></code></pre><p>To read all the code for a package from a text file:</p><ul><li>Open a File List.</li><li>Locate and select a <code>.st</code> file created by a &quot;fileOut&quot;.</li><li>Right-click and select &quot;fileIn&quot;.</li><li>Enter your initials and then your name for tracking who performed the &quot;fileIn&quot;.</li><li>All the class categories, classes, and methods defined in the file will now be available in the current image.</li></ul><h3 id="packages" tabindex="-1">Packages</h3><p>Cuis Smalltalk supports the ability to save code outside an image file and load it into running images. This is an alternative to Monticello which is used in Squeak and Pharo.</p><p>Packages are collections of Smalltalk code stored in files with a <code>.pck.st</code> file.</p><p>Package names are used as prefixes on class and method categories names.</p><p>The GitHub account &quot;Cuis-Smalltalk&quot; provides many package repositories, 32 as of June 2024. Sadly the documentation included in the <code>README.md</code> files of these packages is quite sparse. To install one of these, clone the repository, open a Workspace window, enter `Feature require: 'PackageName', and &quot;Do it&quot;. TODO: Which directories are searched for packages?</p><p>For additional packages, search GitHub for repositories whose names begin with &quot;Cuis-Smalltalk-&quot;.</p><p>There are three ways to install a package.</p><ol><li>Drag a package file onto the <code>WorldMorph</code> and select &quot;install package&quot;.</li><li>Open a &quot;File List&quot; window, locate a package file, select it, and click the &quot;install package&quot; button.</li><li>Open a Workspace window, enter the command <code>Feature require: '{package-name}'</code>, and press cmd-d (Do it). This option only works if the package is in the same directory as the image file that is loaded.</li></ol><p>To see all the installed packages, click the WorldMorph background and select Open...Installed Packages. This opens an &quot;Installed Packages&quot; window.</p><p>To browse everything that is defined in a package:</p><ul><li>Select the package.</li><li>Click the &quot;Browse&quot; button.</li><li>This opens a &quot;Browser for package&quot; window.</li></ul><p>To create a new package:</p><ul><li>Click the &quot;New&quot; button in the center strip of buttons.</li><li>Enter a package name. For example, &quot;Volkmann&quot;.</li><li>Select the newly created package.</li><li>Enter a comment describing the package.</li><li>Click the &quot;Save&quot; button.</li><li>You will be prompted for the file path and name where the package will be saved. It's a good idea to keep the suggested file name, but feel free to change the directory to one outside the distribution directory.</li></ul><p>If package name matches the name of a class category that was created previously, all the classes in that category and their methods will automatically be associated with the new package.</p><p>I created a package whose name is my last name. I use this package to save all my experimental code so I can easily load it into new images. This is useful in case I accidentally modify an image in an unintended way. I can then return to using a base image and load my package into it.</p><p>To determine where packages are saved:</p><ul><li>Open a Workspace.</li><li>Enter <code>Smalltalk imagePath.</code></li><li>Press cmd-p to print the result.</li></ul><p>Suppose the name of your Cuis directory is <code>Cuis-Smalltalk-Dev-master</code>. For me this is <code>~/Documents/dev/lang/smalltalk/{cuis-directory}/CuisImage/Cuis7.1-6367.image</code>. Packages I create go in a similar path which is <code>~/Documents/dev/lang/smalltalk/{cuis-directory}-UserFiles/NewPackages/Volkmann.pck.st</code></p><p>To add or override methods in existing classes and save the changes in your package:</p><ul><li>Add a message category to an existing class whose name is an asterisk followed by the new package name. For example, I used &quot;*Volkmann&quot;.</li><li>Add new methods to the existing class in the new message category.</li><li>Open an &quot;Installed Packages&quot; window and select the package. An asterisk before the name indicates that it has unsaved changes.</li><li>Click the &quot;Save&quot; button.</li></ul><p>To define new classes and save them in your package:</p><ul><li>Add a class category whose name is the same as the new package name.</li><li>Add classes in the new class category.</li><li>Add methods to the new classes in any method category.</li><li>Open an &quot;Installed Packages&quot; window and select the new package.</li><li>Click the &quot;Save&quot; button.</li></ul><p>To verify that all this worked:</p><ul><li>Click the <code>WorldMorph</code> background and select &quot;Quit without saving&quot; so the changes are not saved in the current image.</li><li>Restart Cuis Smalltalk with the same image.</li><li>Verify that the methods and classes that were added are not present.</li><li>Install the package.</li><li>Verify that the methods and classes that were saved in the package are now present.</li></ul><p>There is no provided way to uninstall a package. The only way to remove it from the image is to start with a fresh image and only install the desired packages. TODO: What does the &quot;delete/merge&quot; button in the &quot;Installed Packages&quot; window do? TODO: It does not uninstall the selected package or delete the file that defines it.</p><h3 id="adding-and-saving-code" tabindex="-1">Adding and Saving Code</h3><p>Create a new package for your code as described above. While still in the &quot;Installed Packages&quot; window, select the package and click &quot;browse&quot; to open a Browser window for the package.</p><h2 id="messages" tabindex="-1">Messages</h2><p>The only mechanism for communication between objects is for one to send a message to another. Messages are always sent to a explicit receiver, which is <code>self</code> to send a message to the current object. Arguments in messages are always passed by reference, not by value.</p><p>In documentation, message names are preceded by <code>#</code>, but that does not appear when sending the messages.</p><p>Smalltalk supports three types of messages:</p><ul><li><p>unary</p><p>These message do not take any arguments. Their names are alphanumeric and begin lowercase. For example, in <code>5 factorial</code>, <code>#factorial</code> is a unary message.</p></li><li><p>binary</p><p>These message take a single argument and have names that use a restricted set of characters that make them look like operators in other programming languages. Their names can only contain one or more of the following characters: <code>+ - * / \ ~ &lt; &gt; = @ % | &amp; ? ,</code></p><p>For example, in <code>a * b</code>, <code>#*</code> is a binary message. This sends the message <code>#*</code> to the object <code>a</code>, passing it the argument <code>b</code>.</p><p>The binary message <code>==</code> tests whether two objects are identical (same objects in memory).</p><p>The binary message <code>=</code> tests whether two objects are equal, meaning one can be used in place of the other. Each class can define this method to decide how their objects should be compared. If they do not define <code>=</code>, an implementation will be found in the inheritance hierarchy. The <code>Object</code> class defines <code>=</code> to be the same as <code>==</code>.</p></li><li><p>keyword</p><p>These messages take one or more arguments that are each preceded by a keyword. Each keyword is alphanumeric, begins lowercase, and ends in a colon. For example, <code>#at:put</code> is a keyword message in the <code>OrderedCollection</code> class which is the superclass of <code>Array</code>. This message is sent as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">colors <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>colors at<span class="token punctuation">:</span> <span class="token number">2</span> put<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">.</span></code></pre><p>The parts of a keyword message must be specified in the order in which they appear. It's possible define additional methods that support other orders, but that is not typically done.</p></li></ul><p>When multiple messages of these types are combined in a single expression, the order of evaluation is:</p><ul><li>unary messages from left to right</li><li>binary messages from left to right</li><li>keyword messages from left to right</li></ul><p>For example, in <code>2 raisedTo: 1 + 3 factorial</code>, the order is <code>#factorial</code>, <code>#+</code>, and <code>#raisedTo</code>.</p><p>When entering code to send a message, completion hints are provided if at least the first letter in the message name is typed and the tab key is pressed. For example, entering <code>7 s</code> and pressing the tab key shows possible completions of <code>shallowCopy</code>, <code>sqrt</code>, and more. Use the up and down arrow keys to select a completion and press the return key to accept it.</p><p>To enable completions without typing any characters, enter <code>Preferences at: #spaceTabOpensAutoCompletion put: true</code> in a Workspace window and &quot;Do it&quot;. For example, with this preference set, you can enter <code>'test'</code> followed by a space and press the tab key to get completion hints.</p><p>Matching messages found anywhere in the inheritance hierarchy appear in black. If there are no matching messages, it will show all known selectors that match in any class in blue. The reason is that you can send any message to any object. Even if the object has no matching method anywhere in its inheritance hierarchy, it could still respond by handling it in <code>doesNotUnderstand</code>. I'll go on record saying that I do not find this helpful. I wish it did not show those messages.</p><p>start with pac because there is no warranty that you do not want to send that message to that object even though it does not understand it. But, in the case of Smalltalk because we know its type, it shows the selectors in blue, to let you know that is not a message that will respond unless you implement it.</p><p>If a message is sent to an object from a Workspace window and no compatible method is found, the following popup will appear:</p><p><img alt="Unknown Selector popup" style="width: 50%" src="/blog/assets/smalltalk-unknown-selector.png?v=1.1.1"></p><p>If the selector was incorrectly typed, an implemented selector can be selected from this popup.</p><p>If the selector is confirmed or if such a message is sent from runnning code, the following window will appear:</p><p><img alt="MessageNotUnderstood window" src="/blog/assets/smalltalk-message-not-understood.png?v=1.1.1"></p><p>To implement the missing method, click the &quot;Create&quot; button. A popup will appear to prompt for the class within the inheritance hierarchy of the object where the new method should be added. After selecting a class, a second popup will appear to prompt for the method category to which the new method should be associated. The method can be implemented inside the &quot;MessageNotUnderstood&quot; window. Initially it will just contain <code>self shouldBeImplemented</code>. Replace that with the real implementation, which in this case is <code>^self * 3</code>, and press cmd-s to save the change.</p><h2 id="reserved-words" tabindex="-1">Reserved Words</h2><p>There are only six reserved words in Smalltalk which are <code>true</code>, <code>false</code>, <code>nil</code>, <code>self</code>, <code>super</code>, and <code>thisContext</code>.</p><p>From the <a href="https://cuis-smalltalk.github.io/TheCuisBook/Pseudo_002dvariables.html" target="_blank">Cuis book</a>, &quot;<code>thisContext</code> ... represents the top frame of the run-time stack. ... It is essential for implementing development tools like the Debugger and it is also used to implement exception handling and continuations.&quot;</p><h2 id="control-flow" tabindex="-1">Control Flow</h2><p>Control flow is provided through message passing.</p><p>The <code>Boolean</code> class in the <code>Kernel:Objects</code> category contains the methods <code>#ifTrue</code>, <code>#ifFalse</code>, <code>#ifTrue:ifFalse</code>, and <code>#ifFalse:ifTrue</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">result <span class="token operator">:=</span> a <span class="token operator">&lt;</span> b ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'less'</span><span class="token punctuation">]</span> ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'more'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The values for <code>ifTrue</code> and <code>ifFalse</code> can be literal values, variables, or blocks with no parameters. Those messages just send the <code>value</code> message to the argument value. Typically that is used to evaluate a no-arg block. But the <code>Object</code> class defines the <code>value</code> method to just return <code>self</code>.</p><p>When blocks are used, the compiler is able to optimized the code by inlining the code within the block and avoiding the need to send the <code>value</code> message. So it is more efficient to use blocks.</p><p>The <code>Object</code> instance method <code>caseOf</code> is similar to the <code>switch</code> statement in other programming languages.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">color <span class="token operator">:=</span> <span class="token string">'blue'</span><span class="token punctuation">.</span><br>assessment <span class="token operator">:=</span> color caseOf<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'hot'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'warm'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>    <span class="token punctuation">[</span><span class="token string">'blue'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'cold'</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><h2 id="data-types" tabindex="-1">Data Types</h2><h3 id="undefinedobject" tabindex="-1">UndefinedObject</h3><p>The reserved word <code>nil</code> refers to an instance of the <code>UndefinedObject</code> class. No additional instances can be created. This is prevented by overriding the class method <code>new</code> in the <code>UndefinedObject</code> class.</p><h3 id="booleans" tabindex="-1">Booleans</h3><p>The reserved words <code>true</code> and <code>false</code> refer to instances of the classes <code>True</code> and <code>False</code> which are subclasses of the class <code>Boolean</code>.</p><p><code>True</code> and <code>False</code> are singleton classes. No additional instances can be created. This is prevented by overriding the class method <code>new</code> in the <code>Boolean</code> class.</p><p>Representing the values <code>true</code> and <code>false</code> by distinct classes simplifies the implementation of many of their methods. For example, here are the implementations of the <code>&amp;</code> and <code>ifTrue:</code> instance methods in the <code>True</code> class.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token operator">&amp;</span> alternativeObject<br>    <span class="token operator">^</span>alternativeObject<br><br>ifTrue<span class="token punctuation">:</span> alternativeBlock<br>    <span class="token operator">^</span>alternativeBlock value</code></pre><h2 id="numbers" tabindex="-1">Numbers</h2><p>The following list depicts the class hierarchy for numbers:</p><ul><li><code>Number</code><ul><li><code>Float</code><ul><li><code>BoxedFloat64</code></li><li><code>SmallFloat64</code></li></ul></li><li><code>Fraction</code><ul><li><code>Integer</code><ul><li><code>LargePositiveInteger</code><ul><li><code>LargeNegativeInteger</code></li></ul></li><li><code>SmallInteger</code></li></ul></li></ul></li></ul></li></ul><p>Literal numbers without a decimal point automatically become objects of one of the <code>Integer</code> subclasses.</p><p>Literal numbers with a decimal point automatically become objects of one of the <code>Float</code> subclasses.</p><p>When the message <code>/</code> is sent to an integer with an integer argument, the result is a <code>Fraction</code> object. Operations of fractions always return a new <code>Fraction</code> object rather than a <code>Float</code> object in order to maintain accuracy. For example, the following sets <code>result</code> to the <code>Fraction</code> <code>4/3</code> rathern than the <code>Float</code> <code>1.333333...</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">result <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span></code></pre><p>Fraction objects have the instance variables <code>numerator</code> and <code>denominator</code>.</p><h3 id="characters" tabindex="-1">Characters</h3><p>Characters are represented by the <code>Character</code> class. Printable literal characters are preceded by a dollar sign. For example, <code>$a</code>. Non-printable characters can be obtained from unary class methods in the <code>Character</code> class. For example, <code>Character space</code>, <code>Character tab</code>, and <code>Character cr</code>.</p><h3 id="strings" tabindex="-1">Strings</h3><p>The following list depicts the class hierarchy for character data:</p><ul><li><code>CharacterSequence</code><ul><li><code>String</code><ul><li><code>Symbol</code></li></ul></li><li><code>UnicodeString</code><ul><li><code>UnicodeSymbol</code></li></ul></li></ul></li></ul><p>Strings are represented by the <code>String</code> class.</p><p>Literal strings are delimited by single quotes, not double quotes.</p><p>The following table describes some of the instance methods defined in the <code>String</code> and <code>CharacterSequence</code> classes.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>,</code></td><td>returns new string that results from appending argument</td></tr><tr><td><code>=</code></td><td>compares receiver with argument</td></tr><tr><td><code>&lt;</code></td><td>compares receiver with argument</td></tr><tr><td><code>&lt;=</code></td><td>compares receiver with argument</td></tr><tr><td><code>&gt;</code></td><td>compares receiver with argument</td></tr><tr><td><code>&gt;=</code></td><td>compares receiver with argument</td></tr><tr><td><code>asLowercase</code></td><td>returns new string that is all lowercase</td></tr><tr><td><code>asUppercase</code></td><td>returns new string that is all uppercase</td></tr><tr><td><code>at:</code></td><td>gets character at given index</td></tr><tr><td><code>at:put:</code></td><td>replaces character at given index</td></tr><tr><td><code>byteSize</code></td><td>returns size in bytes</td></tr><tr><td><code>capitalized</code></td><td>returns new string where first letter is changed to uppercase</td></tr><tr><td><code>findString:startingAt:</code></td><td>returns index where a substring begins</td></tr><tr><td><code>isEmpty</code></td><td>returns <code>Boolean</code> indicating if receiver size is zero</td></tr><tr><td><code>size</code></td><td>returns largest legal index</td></tr><tr><td><code>substrings</code></td><td>returns <code>Array</code> of <code>String</code> objects created by splitting receiver on whitespace</td></tr><tr><td><code>asCamelCase</code></td><td>returns string created by camelCasing white-space separated words (first letter lower)</td></tr><tr><td><code>asDate</code></td><td>returns <code>Date</code> parsed from receiver <code>String</code></td></tr><tr><td><code>asNumber</code></td><td>returns number parsed from receiver <code>String</code></td></tr><tr><td><code>asPlural</code></td><td>returns plural <code>String</code> of an English word</td></tr><tr><td><code>asUnicodeString</code></td><td>returns receiver converted to a <code>UnicodeString</code></td></tr><tr><td><code>beginsWith:</code></td><td>returns <code>Boolean</code> indicating if receiver begins with given substring</td></tr><tr><td><code>endsWith:</code></td><td>returns <code>Boolean</code> indicating if receiver ends with given substring</td></tr><tr><td><code>findTokens:</code></td><td>returns <code>Array</code> of <code>Strings</code> created by splitting receiver on delimiters</td></tr><tr><td><code>format:</code></td><td>returns <code>String</code> created using interpolation</td></tr><tr><td><code>includesSubString:</code></td><td>returns <code>Boolean</code> indicating if receiver contains substring</td></tr><tr><td><code>includesSubstring:caseSensitive:</code></td><td>returns <code>Boolean</code> indicating if receiver contains substring</td></tr><tr><td><code>indexOf:</code></td><td>returns index of a character</td></tr><tr><td><code>join:</code></td><td>returns <code>String</code> formed by joining <code>Array</code> elements of any type with receiver delimiter</td></tr><tr><td><code>match:</code></td><td>returns <code>Boolean</code> indicating whether receiver matches a pattern</td></tr><tr><td><code>padded:to:width:</code></td><td>returns <code>String</code> formed by padding receiver on left or right with a given <code>Character</code></td></tr><tr><td><code>prefixAndSuffix:</code></td><td>returns <code>Array</code> of <code>String</code> objects formed by splitting receiver on last occurrence of a <code>Character</code></td></tr><tr><td><code>squeezedTo:</code></td><td>returns <code>String</code> that optimizes readability of receiver in given number of characters</td></tr><tr><td><code>subStrings:</code></td><td>returns <code>Array</code> of <code>String</code> objects formed by splitting receiver on delimiters</td></tr><tr><td><code>substringsSeparatedBy:</code></td><td>returns <code>Array</code> of <code>String</code> objects formed by splitting receiver on a single delimiter <code>Character</code></td></tr><tr><td><code>truncateWithElipsisTo:</code></td><td>returns <code>String</code> formed by truncating receiver to given length with elipsis in last 3 of length</td></tr><tr><td><code>uncapitalized</code></td><td>returns new string where first letter is changed to lowercase</td></tr><tr><td><code>withBlanksCondensed</code></td><td>returns <code>String</code> created by removing leading and trailing spaces and replacing consecutive spaces with one</td></tr><tr><td><code>withBlanksTrimmed</code></td><td>returns <code>String</code> created by removing leading and trailing spaces</td></tr><tr><td><code>withoutEnclosing:</code></td><td>returns <code>String</code> created by removing first and last characters if they match a given <code>Character</code></td></tr><tr><td><code>withoutLeadingBlanks</code></td><td>returns <code>String</code> created by removing leading blanks</td></tr><tr><td><code>withoutPrefix</code></td><td>returns <code>String</code> created by removing given substring prefix</td></tr><tr><td><code>withoutSuffix</code></td><td>returns <code>String</code> created by removing given substring suffix</td></tr><tr><td><code>withoutTrailingBlanks</code></td><td>returns <code>String</code> created by removing trailing blanks</td></tr></tbody></table><h4 id="format%3A" tabindex="-1">format:</h4><p>The <code>format</code> method returns a new <code>String</code> from a template using interpolation where input comes from an array. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">s <span class="token operator">:=</span> <span class="token string">'Player {1} is number {2}.'</span> format<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'Gretzky'</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>This sets <code>s</code> to <code>'Player Gretzky is number 99.'</code>.</p><p>The following works in Squeak, but not in Cuis, to produce the same result using a <code>Dictionary</code> as input:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'Player {p} is number {n}.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'p'</span><span class="token operator">-</span><span class="token operator">></span><span class="token string">'Gretzky'</span><span class="token punctuation">.</span> <span class="token string">'n'</span><span class="token operator">-</span><span class="token operator">></span><span class="token number">99</span><span class="token punctuation">}</span> as<span class="token punctuation">:</span> Dictionary<span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>TODO: Verify that this works in Squeak.</p><p>The <code>String</code> <code>format:</code> message is useful for print-style debugging. For example, the following is the equivalent of a <code>console.log</code> call in JavaScript.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token punctuation">(</span><span class="token string">'myVariable = {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>myVariable<span class="token punctuation">}</span><span class="token punctuation">)</span> print</code></pre><h4 id="padded%3Ato%3Awith%3A" tabindex="-1">padded:to:with:</h4><p>The following returns the <code>String</code> <code>' 19'</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token number">19</span> asString padded<span class="token punctuation">:</span> <span class="token symbol">#left</span> to<span class="token punctuation">:</span> <span class="token number">5</span> with<span class="token punctuation">:</span> Character space</code></pre><h4 id="prefixandsuffix%3A" tabindex="-1">prefixAndSuffix:</h4><p>The following returns an <code>Array</code> containing <code>'/foo/bar'</code> and <code>'baz.txt')</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token string">'/foo/bar/baz.txt'</span> prefixAndSuffix<span class="token punctuation">:</span> <span class="token char">$/</span></code></pre><h3 id="uuids" tabindex="-1">UUIDs</h3><p>The package &quot;Identities-UUID&quot; generates UUID values. To install it, enter <code>Feature require: 'Identities-UUID'</code> in a Workspace and &quot;Do it&quot;. To generate a UUID value, use <code>UUID new</code>.</p><h3 id="collections" tabindex="-1">Collections</h3><p>Smalltalk supports a large number of collection classes. Collection elements can be any kind of object, including other collections.</p><p>The following list depicts the partial class hierarchy for collections:</p><ul><li><code>Collection</code><ul><li><code>SequenceableCollection</code><ul><li><code>ArrayedCollection</code><ul><li><code>Array</code></li><li><code>ByteArray</code></li><li><code>ColorArray</code></li><li><code>FloatArray</code></li><li><code>IntegerArray</code><ul><li><code>PointArray</code></li></ul></li></ul></li><li><code>Heap</code></li><li><code>Interval</code></li><li><code>LinkedList</code></li><li><code>OrderedCollection</code><ul><li><code>SortedCollection</code></li></ul></li></ul></li><li><code>Bag</code></li><li><code>Set</code><ul><li><code>Dictionary</code><ul><li><code>OrderedDictionary</code></li></ul></li></ul></li></ul></li><li><code>Array2D</code> - a two-dimensional array</li><li><code>SharedQueue</code></li></ul><p>TODO: Add a section on each commonly used collection class.</p><p><code>Collection</code> methods include:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>collect:</code></td><td>like <code>map</code> in JavaScript</td></tr><tr><td><code>detect:</code></td><td>like <code>find</code> in JavaScript</td></tr><tr><td><code>do:</code></td><td>like <code>forEach</code> in JavaScript</td></tr><tr><td><code>select:</code></td><td>like <code>filter</code> in JavaScript</td></tr><tr><td><code>allSatisfy:</code></td><td>like <code>every</code> in JavaScript</td></tr><tr><td><code>anySatisfy:</code></td><td>like <code>some</code> in JavaScript</td></tr><tr><td><code>inject:into:</code></td><td>like <code>reduce</code> in JavaScript</td></tr></tbody></table><p>For example, <code>#(1 2 3) inject: 0 into: [:acc :n | acc + n]</code> gives <code>6</code>.</p><h3 id="interval" tabindex="-1">Interval</h3><p>Instances of the <code>Interval</code> class represent a finite arithmetic progress which is a sequence of numbers where the difference between consecutive terms is constant. An example would be the numbers 2, 4, 6, and 8.</p><p>To create an <code>Interval</code> instance, use one of the following class methods:</p><ul><li><code>from:to:</code> - each value is one more than the previous</li><li><code>from:to:by:</code> - specifies the increment between values</li><li><code>from:to:count:</code> - specifies the number values to include, which can be <code>Fraction</code> objects</li><li><code>integersFrom:to:count:</code> - specifies the number values to include, which will be the closest <code>Integer</code> match and not <code>Fraction</code> objects</li></ul><p>The following table describes some of the instance methods defined in the <code>Interval</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>do:</code></td><td>iterates over each value and passes them to a block</td></tr><tr><td>``</td><td></td></tr></tbody></table><p>TODO: Describe more of these methods.</p><h3 id="array" tabindex="-1">Array</h3><p>Literal arrays between with <code>#(</code>, end with <code>)</code>, and contain space-separated values. For example, <code>#(true 7 'Tami' (Color red))</code>.</p><p><code>Array</code> instances are fixed-length, ordered collections.</p><p>The following table describes some of the instance methods defined in the <code>Array</code>, <code>ArrayedCollection</code>, <code>SequenceableCollection</code>, and <code>Collection</code> classes.</p><p>TODO: Finish added descriptions of these methods.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>allButFirst:</code></td><td></td></tr><tr><td><code>allButFirst</code></td><td></td></tr><tr><td><code>allButFirstDo:</code></td><td></td></tr><tr><td><code>allButLast:</code></td><td></td></tr><tr><td><code>allButLast</code></td><td></td></tr><tr><td><code>allButLastDo:</code></td><td></td></tr><tr><td><code>allSatisfy:</code></td><td>returns <code>Boolean</code> indicating whether all elements satisfy a condition</td></tr><tr><td><code>at:ifAbsent:</code></td><td></td></tr><tr><td><code>collect:</code></td><td></td></tr><tr><td><code>collect:thenSelect:</code></td><td></td></tr><tr><td><code>do:</code></td><td></td></tr><tr><td><code>fillWith:</code></td><td></td></tr><tr><td><code>findFirst:</code></td><td></td></tr><tr><td><code>findFirst:startingAt:</code></td><td></td></tr><tr><td><code>findLast:</code></td><td></td></tr><tr><td><code>first:</code></td><td></td></tr><tr><td><code>first</code></td><td></td></tr><tr><td><code>firstAvailable:</code></td><td></td></tr><tr><td><code>from:to:do</code></td><td></td></tr><tr><td><code>head:</code></td><td></td></tr><tr><td><code>includes:</code></td><td></td></tr><tr><td><code>indexOf:</code></td><td></td></tr><tr><td><code>isEmpty</code></td><td></td></tr><tr><td><code>keysAndValuesDo:</code></td><td></td></tr><tr><td><code>last:</code></td><td></td></tr><tr><td><code>last</code></td><td></td></tr><tr><td><code>lastAvailable:</code></td><td></td></tr><tr><td><code>lastIndexOf:</code></td><td></td></tr><tr><td><code>polynomialEval:</code></td><td></td></tr><tr><td><code>select:</code></td><td></td></tr><tr><td><code>select:thenCollect:</code></td><td></td></tr><tr><td><code>shuffled</code></td><td></td></tr><tr><td><code>size</code></td><td>returns number of elements</td></tr><tr><td><code>sort:</code></td><td></td></tr><tr><td><code>sort</code></td><td></td></tr><tr><td><code>sorted:</code></td><td></td></tr><tr><td><code>tail:</code></td><td></td></tr></tbody></table><p>Arrays support binary messages that operate on all the elements and return a new array containing the results. For example, <code>#(1 2 3) * 2</code> returns <code>#(2 4 6)</code>.</p><p>To compute the average from an array of numbers, send it in the <code>#mean</code> message. For example, <code>#(1 2 3 4) mean</code> returns the <code>Fraction</code> <code>5/2</code>.</p><p>To create an array of numbers from a range, send the <code>#asArray</code> message to a <code>Range</code>. For example, <code>(1 to: 5) asArray</code> returns <code>#(1 2 3 4 5)</code>.</p><p>To iterate over the elements, send the <code>do:</code> message. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'foo'</span> <span class="token string">'bar'</span> <span class="token string">'baz'</span><span class="token punctuation">)</span> do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:item</span> <span class="token punctuation">|</span></span> item print <span class="token punctuation">]</span></code></pre><p>TODO: Add more detail.</p><h3 id="orderedcollection" tabindex="-1">OrderedCollection</h3><p><code>OrderedCollection</code> instances are variable-length, ordered collections.</p><p>To create an <code>OrderedCollection</code> from an array, send the <code>#newFrom:</code> message. For example, <code>fruits := OrderedCollection newFrom: #('apple' 'banana' 'cherry')</code></p><p>To get the number of elements, send the <code>#size</code> message. For example, <code>fruits size</code> returns <code>3</code>.</p><p>To get an element at a specific position send messages like <code>#first</code>, <code>#last</code>, and <code>#at:</code> which takes a 1-based index. For example, <code>fruits first</code> returns <code>'apple'</code>, <code>fruits last</code> returns <code>'cherry'</code>, and <code>fruits at: 2</code> returns <code>'banana'</code>.</p><p>To add an element to the end, send the <code>#add</code> message. For example, <code>fruits add: 'date'</code>.</p><p>To add an element at a specific index, send the <code>#add:beforeIndex:</code> or <code>#add:afterIndex</code> message. For example, <code>fruits add: 'orange' beforeIndex: 3</code>.</p><p>To remove an element at a given 1-based index send the <code>#removeAt</code> message. For example, <code>fruits removeAt: 3</code> removes <code>'cherry'</code>.</p><p>To get the index of the first occurence of a given value, send the <code>#indexOf:</code> message. For example, <code>fruits indexOf: 'banana'</code> returns 2.</p><p>TODO: Add more detail.</p><h3 id="bag" tabindex="-1">Bag</h3><p>TODO: Add detail.</p><h3 id="association" tabindex="-1">Association</h3><p>An <code>Association</code> represents a key/value pair. An instance can be created in the following ways:</p><pre class="language-smalltalk"><code class="language-smalltalk">a <span class="token operator">:=</span> Association key<span class="token punctuation">:</span> someKey value<span class="token punctuation">:</span> someValue<span class="token punctuation">.</span><br>a <span class="token operator">:=</span> someKey <span class="token operator">-</span><span class="token operator">></span> someValue<span class="token punctuation">.</span></code></pre><p>The message <code>-&gt;</code> is defined in the <code>Object</code> class which make it easy to create an <code>Association</code> with any object as the key.</p><h3 id="dictionary" tabindex="-1">Dictionary</h3><p>This is a subclass of the <code>Set</code> class.</p><p>The keys in a <code>Dictionary</code> are often symbols, but they can be any kind of object that supports the <code>=</code> and <code>hash</code> messages.</p><p>To create a <code>Dictionary</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict <span class="token operator">:=</span> Dictionary <span class="token keyword">new</span><span class="token punctuation">.</span><br>dict <span class="token operator">:=</span> Dictionary newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><br>dict <span class="token operator">:=</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span> asDictionary<span class="token punctuation">.</span></code></pre><p>To add a key/value pair:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> put<span class="token punctuation">:</span> value<span class="token punctuation">.</span><br>dict add<span class="token punctuation">:</span> key <span class="token operator">-</span><span class="token operator">></span> value<span class="token punctuation">.</span></code></pre><p>To get the value for a key:</p><pre class="language-smalltalk"><code class="language-smalltalk">value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span><br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsent<span class="token punctuation">:</span> defaultValue<br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsentPut<span class="token punctuation">:</span> defaultValue</code></pre><p>If a default value is not provided and the key is not found, an Error window will open that says &quot;key not found&quot;.</p><p>To get all the keys, values, or associations:</p><pre class="language-smalltalk"><code class="language-smalltalk">ks <span class="token operator">:=</span> dict keys<span class="token punctuation">.</span><br>vs <span class="token operator">=</span> dict values<span class="token punctuation">.</span><br>as <span class="token operator">=</span> dict associations<span class="token punctuation">.</span></code></pre><p>To iterate over the values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:value</span> <span class="token punctuation">|</span></span> value print <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>To iterate over the keys and values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict associationsDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:assoc</span> <span class="token punctuation">|</span></span><br>    Transcript<br>        show<span class="token punctuation">:</span> assoc key<span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> <span class="token string">' '</span><span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> assoc value<span class="token punctuation">;</span><br>        cr<br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>TODO: Add more detail?</p><h3 id="linkedlist" tabindex="-1">LinkedList</h3><p>TODO: Add detail.</p><h3 id="set" tabindex="-1">Set</h3><p>TODO: Add detail.</p><h2 id="creating-objects" tabindex="-1">Creating Objects</h2><p>New objects can be created from a class using the class method <code>new</code> or <code>basicNew</code>. By default, both initialize all attributes of the new object to <code>nil</code>. The difference between them is that <code>new</code> could be overridden to do something different, whereas <code>basicNew</code> cannot be overridden.</p><h2 id="blocks" tabindex="-1">Blocks</h2><p>A block is closure (anonymous function) that can have parameters and contain many expressions. They are represented by the class <code>BlockClosure</code>. The value of the block is the value of the last expression. It cannot explicitly return a value with <code>^</code>.</p><p>Blocks can take zero or more positional arguments, which is something methods cannot do. Argument names are appear at the beginning of a block and each name is preceded by a colon. The argument list is separated from the code by a vertical bar.</p><p>Blocks can be saved in variables, passed as arguments to methods and blocks, and used multiple times. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">noArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>singleArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token punctuation">|</span></span> a <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>multipleArgBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span> a <span class="token operator">*</span> b<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The <code>value</code> message evaluates a block and returns the value of its final expression. It can provide zero to four arguments. For blocks with more than four parameters, pass them in an array using <code>#valueWithArguments:</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">noArgBlock value<span class="token punctuation">.</span><br>singleArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span> value<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>multiArgBlock value<span class="token punctuation">:</span> <span class="token number">1</span> value<span class="token punctuation">:</span> <span class="token number">2</span> value<span class="token punctuation">:</span> <span class="token number">3</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">.</span><br>multiArgBlock valueWithArguments<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>A block must be passed the same number of arguments as it has parameters. If a block is passed fewer or more arguments than it accepts, an Error window will open.</p><p>Blocks can declare and use temporary (local) variables.</p><p>If a block uses the caret symbol to return a value, the containing method will exit and return that value.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">average <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">sum</span> <span class="token punctuation">|</span></span><br>    sum <span class="token operator">:=</span> a <span class="token operator">+</span> b<span class="token punctuation">.</span><br>    sum <span class="token operator">/</span> <span class="token number">2.0</span></code></pre><p>Blocks are closures, meaning that they can access variables defined outside them. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">n <span class="token operator">:=</span> <span class="token number">19</span><span class="token punctuation">.</span><br>b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token punctuation">|</span></span> a <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">.</span><br>b value<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">.</span> <span class="token comment">"result is 21"</span></code></pre><p>To use a block as an iteration condition, use the methods <code>whileTrue</code>, <code>whileFalse</code>, <code>whileNotNil</code>, and <code>whileNil</code> that are defined in the <code>BlockClosure</code> class.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">TODO<span class="token punctuation">:</span> Add a whileTrue example<span class="token punctuation">.</span></code></pre><p>A block can call itself if it passes itself in as an argument. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">fact <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:block</span> <span class="token variable">:n</span> <span class="token punctuation">|</span></span><br>    n <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token number">1</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span>n <span class="token operator">*</span> <span class="token punctuation">(</span>block value<span class="token punctuation">:</span> block value<span class="token punctuation">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>fact value<span class="token punctuation">:</span> fact value<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">"gives 120"</span></code></pre><h2 id="exception-handling" tabindex="-1">Exception Handling</h2><p>Smalltalk methods can throw exceptions. Exceptions that are thrown by code in a block can be caught and handled. Unhandled exceptions result in a Debug window being opened that contains a stack trace.</p><p>Smalltalk seems to use the words &quot;exception&quot; and &quot;error&quot; interchangably.</p><p>To throw a generic exception:</p><pre class="language-smalltalk"><code class="language-smalltalk">Error signal<span class="token punctuation">:</span> <span class="token string">'some message'</span></code></pre><p>Smalltalk provides my subclasses of the <code>Exception</code> class. Examples include <code>ArithmeticError</code>, <code>AssertionFailure</code>, <code>Error</code>, <code>Halt</code>, <code>MessageNotUnderstood</code>, <code>NotYetImplemented</code>, and <code>ZeroDivide</code>.</p><p>To define a custom exception, create a class that inherits from the <code>Exception</code> class or one of its subclasses such as `Error. This can include instance variables and methods that are specific to that exception. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">Error subclass<span class="token punctuation">:</span> <span class="token symbol">#OutOfBoundsException</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'lowerBound upperBound'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>The following class method is used to create an instance:</p><pre class="language-smalltalk"><code class="language-smalltalk">lower<span class="token punctuation">:</span> aLower upper<span class="token punctuation">:</span> anUpper<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> initializeLower<span class="token punctuation">:</span> aLower upper<span class="token punctuation">:</span> anUpper</code></pre><p>The following instance method is used by the class method above:</p><pre class="language-smalltalk"><code class="language-smalltalk">initializeLower<span class="token punctuation">:</span> aLower upper<span class="token punctuation">:</span> anUpper<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    lowerBound <span class="token operator">:=</span> aLower<span class="token punctuation">.</span><br>    upperBound <span class="token operator">:=</span> anUpper</code></pre><p>If the exception subclass defines class methods that create a new instance, make sure to call <code>super initialize</code> as shown above.</p><p>To throw a custom exception send the class, or an instance of it, the <code>#signal:</code> message. For example, the following instance method could be defined in a class that has a <code>score</code> instance variable:</p><pre class="language-smalltalk"><code class="language-smalltalk">score<span class="token punctuation">:</span> aNumber<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">ex</span> <span class="token punctuation">|</span></span><br>    ex <span class="token operator">:=</span> OutOfBoundsException lower<span class="token punctuation">:</span> lowerBound upper<span class="token punctuation">:</span> upperBound<span class="token punctuation">.</span><br>    aNumber <span class="token operator">&lt;</span>  lowerBound ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> ex signal<span class="token punctuation">:</span> <span class="token string">'too low'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    aNumber <span class="token operator">></span> upperBound ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> ex signal<span class="token punctuation">:</span> <span class="token string">'too high'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    score <span class="token operator">:=</span> aNumber</code></pre><p>To catch an exceptions that may be thrown by a method, send a message that invokes the method inside a block and set the <code>#on:do:</code> message to the block. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token punctuation">[</span>s <span class="token operator">:=</span> Game <span class="token keyword">new</span> score<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">]</span> on<span class="token punctuation">:</span> OutOfBoundsException do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:ex</span> <span class="token punctuation">|</span></span><br>    ex messageText print<span class="token punctuation">.</span><br><span class="token punctuation">]</span></code></pre><p>Sending the message <code>#messageText</code> to an exception object returns the message text of the exception.</p><h2 id="unit-tests" tabindex="-1">Unit Tests</h2><p>To create unit tests for an existing class:</p><ul><li><p>Create a new class in the same class category as the class to be tested that is a subclass of <code>TestCase</code>. To test the class &quot;Foo&quot;, a suggested class name is &quot;FooTests&quot;. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">TestCase subclass<span class="token punctuation">:</span> <span class="token symbol">#VShapeTests</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Add a message category like &quot;test&quot; or &quot;testing&quot;. The name doesn't really matter.</p></li><li><p>Add test instance methods whose name begins with &quot;test&quot;. Each method can contain any number of assertions. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">testCircleArea<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">c</span> <span class="token punctuation">|</span></span><br>    c <span class="token operator">:=</span> VCircle radius<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> assert<span class="token punctuation">:</span> c area isCloseTo<span class="token punctuation">:</span> <span class="token number">28.2743339</span></code></pre></li></ul><p>The supported assertion method defined in the <code>TestCase</code> class include:</p><ul><li><code>assert:</code> for Boolean values</li><li><code>assert:changes</code></li><li><code>assert:changes:by</code></li><li><code>assert:changes:from:to</code></li><li><code>assert:description</code></li><li><code>assert:description:resumable</code></li><li><code>assert:doesNotChange</code></li><li><code>assert:equals</code></li><li><code>assert:includes</code></li><li><code>assert:isCloseTo</code></li><li><code>assert:isCloseTo:withinPrecision</code></li><li><code>assert:isNotCloseTo</code></li><li><code>assert:isNotCloseTo:withinPrecision</code></li></ul><p>To run tests, select a test class, test method category, or test method, and press cmd-t (run tests). Alternatively, open a &quot;SUnit Test Runner&quot; from the World menu, select one or more test classes, and click the &quot;Run&quot; button. After adding new test classes, click the &quot;Refresh&quot; button to make the &quot;SUnit Test Runner&quot; window aware of them.</p><p><img alt="Cuis SUnit Test Runner" style="width: 90%" src="/blog/assets/cuis-sunit-test-runner.png?v=1.1.1"></p><p>To install some example tests:</p><ul><li>Open a &quot;File List&quot; window from the World menu.</li><li>Navigate to and expand <code>Cuis-Smalltalk-Dev-master</code> or the name of your version of Cuis.</li><li>Navigate to and expand &quot;Packages&quot; and then &quot;Features&quot;.</li><li>Enter &quot;test&quot; in the filter input in the upper-left.</li><li>Select one of more of the packages whose names begin with &quot;Test-&quot;.</li><li>Click the &quot;install package&quot; button.</li><li>View the code for those packages in a System Browser window.</li></ul><h2 id="color" tabindex="-1">Color</h2><p>The <code>Color</code> class defines many methods for creating and operating on colors. It defines the following class methods that create colors by name:</p><ul><li><code>black</code>, <code>blue</code>, <code>brown</code>, <code>cyan</code>, <code>gray</code>, <code>green</code>, <code>magenta</code>, <code>orange</code>, <code>pink</code>, <code>purple</code>, <code>red</code>, <code>tan</code>, <code>white</code>, <code>yellow</code></li><li><code>lightBlue</code>, <code>lightBrown</code>, <code>lightCyan</code>, <code>lightGray</code>, <code>lightGreen</code>, <code>lightMagenta</code>, <code>lightOrange</code>, <code>lightRed</code>, <code>lightYellow</code></li><li><code>darkGray</code>, <code>veryDarkGray</code>, <code>veryLightGray</code>, <code>veryVeryDarkGray</code>, <code>veryVeryLightGray</code></li><li><code>transparent</code></li></ul><h2 id="morphic" tabindex="-1">Morphic</h2><p>Morphic is a GUI framework that is built into popular Smalltalk images. It defines user interfaces with &quot;morphs&quot; which are what other graphical systems refer to as widgets. They are graphical items that can be added to the <code>WorldMorph</code> (desktop) or a <code>LayoutMorph</code>.</p><p>For a great introduction to Morphic, see <a href="https://www.youtube.com/watch?v=62baNn3c56Y" target="_blank">Holistic computing with Smalltalk and Morphic. Part 1</a>.</p><p>Some of the method names in Morphic classes are inconsistently named. For example, the class <code>TextModelMorph</code> defines the methods <code>alwaysHideVerticalScrollbar</code> and <code>hideScrollBarsIndefinitely</code>. Note how the &quot;b&quot; is sometimes lowercase and sometimes uppercase.</p><p>To modify an existing morph:</p><ul><li>Open the halo for the morph.</li><li>Click the blue menu button on the top and select &quot;copy to clipboard&quot;.</li><li>Open a Workspace window.</li><li>Assign the morph to a variable. For example, enter <code>morph :=</code> and press cmd-p to paste the reference.</li><li>Press cmd-d (Do it).</li><li>Send messages to the morph to modify it. For example, <code>morph borderColor: (Color pink)</code></li></ul><p>To create a morph:</p><ul><li>Click the WorldMorph background.</li><li>Select &quot;New morph...&quot;.</li><li>In the dialog that appears, select a category of morphs and then a specific kind.</li></ul><p>To explicitly set the size of a morph, send it the <code>morphExtent:</code> message with a <code>Point</code> value. For example, <code>myMorph morphExtent: 200@100</code>.</p><p>Only a small set of morphs is provided by default. A good source of additional morphs is the package &quot;UI-Tools&quot;. To install this:</p><ul><li>Open a Workspace window.</li><li>Enter <code>Feature require: 'UI-Tools'</code> and press cmd-d (Do it).</li></ul><p>This installs many packages including:</p><ul><li>Collections-CompactArrays</li><li>Compression</li><li>CSS3</li><li>Graphics-Files-Additional</li><li>UI-Click-Select</li><li>UI-Color-Panel</li><li>UI-Components</li><li>UI-Core</li><li>UI-DragAndDrop</li><li>UI-Edit-Lens</li><li>UI-Entry</li><li>UI-Layout-Panel</li><li>UI-MetaProperties</li><li>UI-Palette</li><li>UI-Panel</li><li>UI-Shapes</li><li>UI-Tools</li><li>UI-Widgets</li></ul><p>The set of &quot;Basic&quot; morphs will now include <code>BoxedMorph</code>, <code>EllipseMorph</code>, <code>FrameMorph</code>, <code>ImageMorph</code>, <code>LabelMorph</code>, <code>LineMorph</code>, <code>PointerLineMorph</code>, and <code>TileResizeMorph</code>.</p><p>Supposedly Cuis 7 will remove support for the UI-Tools package and the desired subpackages will need to be installed individually.</p><p>See my Morphic demos in package <code>Volkmann</code> which contains the classes <code>VButtonDemo</code> and <code>VGreet</code>.</p><h3 id="halo" tabindex="-1">Halo</h3><p>To open the halo (set of surrounding buttons) for a morph, cmd-click it in Cuis or option-click it in Squeak. If the item is embedded in other morphs, repeat this multiple times until a halo appears around the desired morph.</p><p>The class of the morph will be displayed at the bottom of the morph.</p><p><img alt="Smalltalk halo" style="width: 50%" src="/blog/assets/smalltalk-halo.png?v=1.1.1"></p><p>The following buttons are provided:</p><table><thead><tr><th>Button</th><th>Location</th><th>Purpose</th></tr></thead><tbody><tr><td>red circle with white &quot;x&quot;</td><td>upper-left</td><td>removes the item</td></tr><tr><td>blue circle with white document</td><td>top</td><td>opens menu &quot;A&quot; (1)</td></tr><tr><td>black circle with house</td><td>top</td><td>drag to move the item within its parent</td></tr><tr><td>brown circle with resize icon</td><td>top</td><td>drag to move the item out of its parent</td></tr><tr><td>green circle with copy icon</td><td>upper-right</td><td>drag to position a duplicate of the item</td></tr><tr><td>orange circle with wrench</td><td>right side</td><td>opens a menu of debugging options</td></tr><tr><td>blue circle with magnifier glass</td><td>right side</td><td>drag to change scale of item</td></tr><tr><td>yellow circle with resize icon</td><td>lower-right</td><td>drag to resize the item</td></tr><tr><td>light blue circle with question mark</td><td>bottom</td><td>click and hold to display a related tooltip (2)</td></tr><tr><td>blue circle with rotate icon</td><td>lower-left</td><td>drag to rotate item</td></tr><tr><td>dull yellow circle with odd shape</td><td>left side</td><td>click to collapse (hide) the item (3)</td></tr><tr><td>orange circle with wrench</td><td>left side</td><td>opens an &quot;Explore&quot; window (4)</td></tr></tbody></table><p>A morph can also be dragged directly without opening its halo and using the drag buttons. This only works in the area that is dragged does not process mouse events. For example, you cannot drag a morph that contains a button by dragging the button.</p><p>TODO: How can you change the point about which a morph rotates?</p><p>(1) This menu contains the following:</p><ul><li>send to back</li><li>bring to front</li><li>embed into &gt;</li><li>change color...</li><li>halo actions...</li><li>checkbox for &quot;resist being picked up&quot;</li><li>checkbox for &quot;be locked&quot;</li><li>copy to clipboard</li><li>export...</li><li>debug...</li></ul><p>(2) It seems most of the help tooltips default to &quot;Help not yet supplied&quot;. To edit the help text, click the orange circle on the right, select &quot;edit balloon help&quot;, and modify the help text.</p><p>(3) To restore a collapsed item, click it's thumbnail in the bottom bar.</p><p>(4) &quot;Explore&quot; windows enable viewing data associated with an item such as its location, size (extent), and color.</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-Inspectors.html" target="_blank">A brief introduction to Inspectors</a>.</p><p>To embed a morph into another (such as a LayoutMorph):</p><ul><li>drag the morph on top of its intended parent morph</li><li>open the halo of the morph</li><li>click the blue circle on the top</li><li>select &quot;embed into&quot; ... {parent morph name} (typically LayoutMorph)</li></ul><h3 id="layoutmorph" tabindex="-1">LayoutMorph</h3><p>A <code>LayoutMorph</code> arranges submorphs in a row or column. Pratically any layout can be achieved by nesting instances of this class.</p><p>An instance can be created with:</p><ul><li><p><code>LayoutMorph newColumn</code></p></li><li><p><code>LayoutMorph newRow</code></p></li><li><p><code>LayoutMorph new</code></p><p>This calls <code>newRow</code> and sets the background color to <code>Color red alpha: 0.2</code>.</p></li></ul><p>For example, <code>myLayout := Layout newRow</code>.</p><p>To add a submorph to a <code>LayoutMorph</code>, send it the <code>addMorph:</code> message. For example, <code>myLayout addMorph: EllipseMorph new</code> and <code>myLayout addMorph: BoxedMorph new</code>.</p><p>By default, there will be no separation between the submorphs. To add separation, send the <code>separation:</code> (both x and y), <code>separationX:</code>, <code>separationY</code> messages. For example, <code>myLayout separation: 20</code>.</p><p>By default, all the submorphs will be pushed to the left of a row or top of a column. To change this, send the <code>axisEdgeWeight:</code> message with a number from 0 to 1. A value zero pushes to the left/top, a value one pushes to the right/bottom, and a value of 0.5 centers.</p><p>Many chararacteristics of a morph can be edited by cmd-clicking it to display its halo and clicking its blue menu button. To get a halo for a submorph, cmd-click repeatedly until the halo appears around the target morph. The following menu will appear:</p><p><img alt="Cuis halo blue menu" style="width: 60%" src="/blog/assets/cuis-halo-blue-menu.png?v=1.1.1"></p><p>To change the border width, size (<code>morphExtent</code>), or position (<code>morphPosition</code>) of a morph:</p><ul><li>Click <code>borderWidth</code>, <code>morphExtent</code>, or <code>morphPosition</code>.</li><li>Modify the numbers in the dialog that appears.</li><li>Click the &quot;Accept&quot; or &quot;Cancel&quot; button.</li></ul><p>To change the border color or color of a morph:</p><ul><li>Click the push pin in the menu window so it remains open.</li><li>Click &quot;borderColor&quot; or &quot;color&quot;.</li><li>Select one of the color sets such as ...</li><li>Drag a color swatch onto the swatch for &quot;borderColor&quot; or &quot;color&quot;.</li><li>Close the color set dialog.</li><li>Close the dialog of morph options.</li></ul><p>If the UI-Layout-Panel package is installed, all of these values can be specified interactively by opening the halo for a <code>LayoutMorph</code>, clicking the blue menu button, and selecting &quot;edit me&quot;. The following dialog will appear:</p><p><img alt="Cuis Morphic Layout dialog" style="width: 75%" src="/blog/assets/cuis-morphic-layout-dialog.png?v=1.1.1"></p><p>To edit the width, height, and off-axis edge weight of a submorph select &quot;edit my LayoutSpec&quot;.</p><p>The following dialog will appear:</p><p><img alt="Cuis edit my LayoutSpec" style="width: 80%" src="/blog/assets/cuis-edit-my-layoutspec.png?v=1.1.1"></p><h3 id="buttons" tabindex="-1">Buttons</h3><p>Button labels are automatically shortened to fit within the button width using the <code>String</code> instance method <code>squeezeTo:</code>. It begins by removing spaces from right to left. It then removes vowels from right to left. Finally, it removes consonants from right to left and adds an ellipsis at the end.</p><h3 id="button-issue" tabindex="-1">Button Issue</h3><p>The class <code>PluggableButtonMorph</code> uses the value of <code>Theme current buttonLabel</code> as the color for the label on all instances. But sending <code>#color:</code> to an instance changes its background color. Depending the background color selected, this can result in poor contrast. It also uses an embossed font for the label.</p><p>A way to fix this, suggested by Mariano Montone, is to create a subclass of <code>PluggableButtonMorph</code> that does the following:</p><ol><li><p>Define the following new class:</p><pre class="language-smalltalk"><code class="language-smalltalk">PluggableButtonMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#VButtonMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'labelColor'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Define the following instance methods in the <code>VButtonMorph</code> class:</p><pre class="language-smalltalk"><code class="language-smalltalk">labelColor<br>    <span class="token operator">^</span>labelColor ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>Theme current buttonLabel<span class="token punctuation">]</span><br><br>labelColor<span class="token punctuation">:</span> anObject<br>    labelColor <span class="token operator">:=</span> anObject</code></pre></li><li><p>Override this instance method in the <code>VButtonMorph</code> class by copying the same method from <code>PluggableButtonMorph</code> and modifying two lines.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawEmbossedLabelOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">availableW</span> <span class="token variable">center</span> <span class="token variable">colorForLabel</span> <span class="token variable">f</span> <span class="token variable">l</span> <span class="token variable">labelMargin</span> <span class="token variable">targetSize</span> <span class="token variable">w</span> <span class="token variable">x</span> <span class="token variable">y</span> <span class="token punctuation">|</span></span><br>    label ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        colorForLabel <span class="token operator">:=</span> <span class="token keyword">self</span> enableLabelColorWith<span class="token punctuation">:</span> <span class="token keyword">self</span> labelColor<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> isPressed<br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                <span class="token keyword">self</span> mouseIsOver<br>                    ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.10</span> brightness<span class="token punctuation">:</span> <span class="token number">0.10</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token number">0.0</span> brightness<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.07</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>        f <span class="token operator">:=</span> <span class="token keyword">self</span> fontToUse<span class="token punctuation">.</span><br>        center <span class="token operator">:=</span> extent <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">.</span><br>        labelMargin <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">.</span><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> label<span class="token punctuation">.</span><br>        availableW <span class="token operator">:=</span> extent x <span class="token operator">-</span> labelMargin <span class="token operator">-</span> labelMargin<span class="token punctuation">.</span><br>        availableW <span class="token operator">>=</span> w<br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> l <span class="token operator">:=</span> label <span class="token punctuation">]</span><br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                x <span class="token operator">:=</span> labelMargin<span class="token punctuation">.</span><br>                targetSize <span class="token operator">:=</span> label size <span class="token operator">*</span> availableW <span class="token operator">//</span> w<span class="token punctuation">.</span><br>                l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize<span class="token punctuation">.</span><br>                <span class="token punctuation">(</span>f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">)</span> <span class="token operator">></span> availableW ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                    targetSize <span class="token operator">:=</span> targetSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span><br>                    l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize <span class="token punctuation">]</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">.</span><br>        x <span class="token operator">:=</span> center x <span class="token operator">-</span> <span class="token punctuation">(</span>w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        y <span class="token operator">:=</span> center y <span class="token operator">-</span> <span class="token punctuation">(</span>f lineSpacing <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        aCanvas<br>            drawString<span class="token punctuation">:</span> l<br>            at<span class="token punctuation">:</span> x<span class="token operator">@</span>y<br>            font<span class="token punctuation">:</span> f<br>            color<span class="token punctuation">:</span> colorForLabel<br>            embossed<span class="token punctuation">:</span> <span class="token boolean">false</span><br>    <span class="token punctuation">]</span></code></pre><p>The modified lines are the one that sets <code>colorForLabel</code> and the one that sets <code>embossed</code>.</p></li></ol><h3 id="button-demo-in-cuis" tabindex="-1">Button Demo in Cuis</h3><p>Add this code in a Workspace, select it all, and &quot;Do it&quot;. It uses the class <code>ButtonMorph</code> which is a custom subclass of <code>PluggableButtonMorph</code> that is defined in the file <code>ButtonMorph.st</code> from Mariano Montone.</p><pre class="language-smalltalk"><code class="language-smalltalk">layout delete<span class="token punctuation">.</span><br>label <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><br>  contents<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>  color<span class="token punctuation">:</span> Color white<span class="token punctuation">.</span><br>decBtn <span class="token operator">:=</span> ButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Decrement'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>incBtn <span class="token operator">:=</span> ButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>layout <span class="token operator">:=</span> LayoutMorph <span class="token keyword">new</span><br>  addMorph<span class="token punctuation">:</span> decBtn<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> label<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> incBtn<span class="token punctuation">;</span><br>  <span class="token comment">"color: Color transparent ;"</span><br>  separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>  location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">70</span><span class="token operator">@</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   rotateBy<span class="token punctuation">:</span> <span class="token number">15</span> degreesToRadians<span class="token punctuation">;</span><br>  scale<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">;</span><br>  openInWorld<span class="token punctuation">.</span><br><br><span class="token comment">"Add horizontal padding in buttons."</span><br>decBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>incBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><h3 id="button-demo-in-squeak" tabindex="-1">Button Demo in Squeak</h3><p>To create a button:</p><p>In Squeak, the following code creates a label and two buttons. The label displays an integer. Clicking the buttons increments or decrements the integer in the label.</p><pre class="language-smalltalk"><code class="language-smalltalk">label <span class="token operator">:=</span> StringMorph <span class="token keyword">new</span><br>    contents<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>    color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>    position<span class="token punctuation">:</span> <span class="token number">120</span><span class="token operator">@</span><span class="token number">100</span><span class="token punctuation">;</span><br>    openInWorld<span class="token punctuation">.</span><br>SimpleButtonMorph <span class="token keyword">new</span><br>    label<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">;</span><br>    position<span class="token punctuation">:</span> <span class="token number">150</span><span class="token operator">@</span><span class="token number">100</span><span class="token punctuation">;</span><br>    target<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asInteger <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>    actionSelector<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">;</span><br>    openInWorld<span class="token punctuation">.</span><br>SimpleButtonMorph <span class="token keyword">new</span><br>    label<span class="token punctuation">:</span> <span class="token string">'Decrement'</span><span class="token punctuation">;</span><br>    position<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">100</span><span class="token punctuation">;</span><br>    target<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asInteger <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>    actionSelector<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">;</span><br>    openInWorld<span class="token punctuation">.</span></code></pre><h3 id="canvas-drawing" tabindex="-1">Canvas Drawing</h3><p>To demo this, create a subclass of <code>Morph</code> and define the instance method <code>drawOn:</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">20</span> color<span class="token punctuation">:</span> Color red do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas<br>            moveTo<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">100</span> <span class="token operator">@</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> <span class="token number">400</span> <span class="token operator">@</span> <span class="token number">200</span><br>    <span class="token punctuation">]</span></code></pre><h3 id="svg" tabindex="-1">SVG</h3><p>Starting around 32:30 in the YouTube video <a href="https://www.youtube.com/watch?v=_NB2_Q4bYEk" target="_blank">FAST Talks - Vector Graphics in Cuis Smalltalk</a>, Juan demonstrates the class <code>SVGElementMorph</code> from the package &quot;SVG&quot;.</p><p>To work with SVG images:</p><ul><li><p>Open a terminal.</p></li><li><p>Clone the following Git repositories from Cuis Smalltalk:</p><ul><li><a href="https://github.com/Cuis-Smalltalk/Numerics.git" target="_blank">Numerics</a></li><li><a href="https://github.com/Cuis-Smalltalk/SVG.git" target="_blank">SVG</a></li></ul></li><li><p>Open a Workspace window and install the packages <code>LinearAlgebra</code> and `SVG.</p><p>For each package, enter <code>Feature require: '{package-name}'</code> and &quot;Do it&quot;.</p></li><li><p>Enter <code>SVGMainMorph exampleTiger openInWorld</code> and &quot;Do it&quot;.</p></li></ul><p>There are many more example class methods in the <code>SVGMainMorph</code> class. To open all the examples, enter <code>SVGMainMorph openAllExamples SVGMainMorph</code> and &quot;Do it&quot;. To delete all those morphs, enter <code>SVGMainMorph allInstancesDo: [ :obj | obj delete ]</code>.</p><p>Another way to open all the examples using reflection is:</p><pre class="language-smalltalk"><code class="language-smalltalk">selectors <span class="token operator">:=</span> SVGMainMorph class allMethodsInCategory<span class="token punctuation">:</span> <span class="token symbol">#examples</span><span class="token punctuation">.</span><br>selectors do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:selector</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span>selector beginsWith<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">(</span>SVGMainMorph perform<span class="token punctuation">:</span> selector<span class="token punctuation">)</span> openInWorld<br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="overriding-doesnotunderstand" tabindex="-1">Overriding doesNotUnderstand</h2><p>The <code>Object</code> class defines the <code>doesNotUnderstand</code> method to open a <code>MessageNotUnderstood</code> window. This can be overridden in specific classes to provide specialized processing of messages that do not have corresponding methods.</p><p>Let's demonstrate this by defining an <code>Accessible</code> class that enables sending messages set and get any instance variable in classes that inherit from this class.</p><p>Here is the class definition:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Accessible</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is its one and only instance method:</p><pre class="language-smalltalk"><code class="language-smalltalk">doesNotUnderstand<span class="token punctuation">:</span> aMessage<br>    <span class="token comment">"gets or sets an instance variable"</span><br><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">argCount</span> <span class="token variable">getters</span> <span class="token variable">index</span> <span class="token variable">key</span> <span class="token variable">setters</span> <span class="token punctuation">|</span></span><br><br>    argCount <span class="token operator">:=</span> aMessage numArgs<span class="token punctuation">.</span><br>    argCount <span class="token operator">></span> <span class="token number">1</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    key <span class="token operator">:=</span> aMessage keywords first<span class="token punctuation">.</span><br><br>    getters <span class="token operator">:=</span> <span class="token keyword">self</span> class allInstVarNames<span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> getters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    setters <span class="token operator">:=</span> getters collect<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:name</span> <span class="token punctuation">|</span></span> name<span class="token operator">,</span> <span class="token string">':'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    index <span class="token operator">:=</span> setters indexOf<span class="token punctuation">:</span> key<span class="token punctuation">.</span><br>    index ifNotZero<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">^</span><span class="token keyword">self</span> instVarAt<span class="token punctuation">:</span> index put<span class="token punctuation">:</span> aMessage arguments first <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token operator">^</span><span class="token keyword">super</span> doesNotUnderstand<span class="token punctuation">:</span> aMessage</code></pre><p>Here is a subclass of `Accessible:</p><pre class="language-smalltalk"><code class="language-smalltalk">Accessible subclass<span class="token punctuation">:</span> <span class="token symbol">#Person</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'birthdate country firstName height lastName'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>Here is an example of using this class:</p><pre class="language-smalltalk"><code class="language-smalltalk">p <span class="token operator">:=</span> Person <span class="token keyword">new</span><span class="token punctuation">.</span><br>p firstName<span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">.</span><br>p firstName print<span class="token punctuation">.</span></code></pre><p>Getting and setting instance variables in this way is quite inefficient. A better approach is to generate accessor methods by right-clicking the <code>Person</code> class in a System Browser window and selecting &quot;more...create inst var accessors&quot; to generate accessor methods for each instance variable.</p><h2 id="file-i%2Fo" tabindex="-1">File I/O</h2><p>To create a file, send the <code>#asFileEntry</code> message to a string that contains the file name. The file is assumed to be in the '*-UserFiles' directory. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry <span class="token operator">:=</span> <span class="token string">'demo.txt'</span> asFileEntry<span class="token punctuation">.</span></code></pre><p>To delete a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry delete<span class="token punctuation">.</span></code></pre><p>To write to a text file, overwriting any previous contents:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry forceWriteStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    fileStream nextPutAll<span class="token punctuation">:</span> <span class="token string">'line #1'</span><span class="token punctuation">.</span><br>    fileStream newLine<span class="token punctuation">.</span><br>    fileStream nextPutAll<span class="token punctuation">:</span> <span class="token string">'line #2'</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>To read the entire contents of a text file into a string:</p><pre class="language-smalltalk"><code class="language-smalltalk">contents <span class="token operator">:=</span> fileEntry fileContents<span class="token punctuation">.</span></code></pre><p>To write serialized objects to a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry writeStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">refStream</span> <span class="token punctuation">|</span></span><br>    refStream <span class="token operator">:=</span> ReferenceStream on<span class="token punctuation">:</span> fileStream<span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">.</span><br>    refStream nextPut<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>TODO: Do ReferenceStreams support circular object references?</p><p>To read serialized objects from a file:</p><pre class="language-smalltalk"><code class="language-smalltalk">fileEntry readStreamDo<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:fileStream</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">object</span> <span class="token variable">refStream</span> <span class="token punctuation">|</span></span><br>    refStream <span class="token operator">:=</span> ReferenceStream on<span class="token punctuation">:</span> fileStream<span class="token punctuation">.</span><br>    <span class="token punctuation">[</span> refStream atEnd <span class="token punctuation">]</span> whileFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        object <span class="token operator">:=</span> refStream next<span class="token punctuation">.</span><br>        object print <span class="token comment">"writes to Transcript"</span><br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span></code></pre><h2 id="deploying-applications" tabindex="-1">Deploying Applications</h2><p>Smalltalk can be used to build command-line, desktop, and web applications. After writing and testing the code in a standard Smalltalk image, you will want to create a stripped down version of the image that only contains what is necessary for running the application.</p><p>All developer tools can be removed. For command-line and web applications, everything related to the Morphic GUI framework can be removed.</p><p>Stripping an image is a manual process that is described in the FAST 2024 conference video <a href="https://www.youtube.com/watch?v=MfAclig5XyI" target="_blank">Bootstrap: Creating Minimal Images from Scratch</a>.</p><p>Also see <a href="https://www.youtube.com/watch?v=b3oGOMCjKU8&list=PLu8vLCSA-4hklsvT9W6ruintbdx_K0DYW&index=2&t=53s" target="_blank">Make a standalone click-&amp;-run Smalltalk application for macOS</a>.</p><h2 id="games" tabindex="-1">Games</h2><p>Some games implemented in Cuis Smalltalk can be found in the GitHub repository <a href="https://github.com/Cuis-Smalltalk/Games" target="_blank">Cuis-Smalltalk/Games</a>.</p><p>To install them:</p><ul><li>Clone this repository.</li><li>Launch Cuis Smalltalk.</li><li>Open a &quot;File List&quot; window.</li><li>Locate and select the file <code>Morphic-Games-Solitaire.pck.st</code>.</li><li>Click the &quot;Install Package&quot; button.</li><li>Open a Workspace window.</li></ul><p>To play them, open the World menu, select &quot;New morph...Layouts&quot;, and then select FreeCell or Klondike. Alternatively, open a Workspace window, enter something like <code>Freecell newGame</code>, and &quot;Do it&quot;.</p><h2 id="json" tabindex="-1">JSON</h2><p>The <code>JSON</code> package defines the classes <code>Json</code>, <code>JsonObject</code>, and <code>JsonError</code>. It also adds the method <code>jsonWriteOn:</code> to many classes including <code>Array2D</code>, <code>Association</code>, <code>CharacterSequence</code>, <code>Collection</code>, <code>Dictionary</code>, <code>False</code>, <code>Integer</code>, <code>Number</code>, <code>Text</code>, <code>True</code>, and <code>UndefinedObject</code>.</p><p>To install this, enter <code>Feature require: 'JSON'</code> in a Workspace and &quot;Do it&quot;.</p><p>Custom classes should implement the instance method <code>jsonWriteOn:</code> to describe which of their instance variables should be included. Here's how it could be implemented for a <code>Dog</code> class with instance varaibles <code>id</code>, <code>name</code>, and <code>breed</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">jsonWriteOn<span class="token punctuation">:</span> aWriteStream<br>    <span class="token punctuation">{</span><br>        <span class="token symbol">#id</span><span class="token operator">-</span><span class="token operator">></span>id<span class="token punctuation">.</span><br>        <span class="token symbol">#name</span><span class="token operator">-</span><span class="token operator">></span>name<span class="token punctuation">.</span><br>        <span class="token symbol">#breed</span><span class="token operator">-</span><span class="token operator">></span>breed<br>    <span class="token punctuation">}</span> asDictionary jsonWriteOn<span class="token punctuation">:</span> aWriteStream</code></pre><p>Here's how we can get a JSON string for a <code>Dog</code> object.</p><pre class="language-smalltalk"><code class="language-smalltalk">json <span class="token operator">:=</span> Json render<span class="token punctuation">:</span> dog</code></pre><p>Custom classes should also implement a class method like <code>fromJson:</code> that takes a stream of JSON data and returns a new object created from it. Here's an example that uses the <code>VDog</code> class method <code>id:name:breed:</code> to create a new instance.</p><pre class="language-smalltalk"><code class="language-smalltalk">fromJson<span class="token punctuation">:</span> aStream<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">jsonObject</span> <span class="token punctuation">|</span></span><br>    jsonObject <span class="token operator">:=</span> Json readFrom<span class="token punctuation">:</span> aStream<span class="token punctuation">.</span><br>    <span class="token operator">^</span>VDog<br>        id<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#id</span><span class="token punctuation">)</span><br>        name<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#name</span><span class="token punctuation">)</span><br>        breed<span class="token punctuation">:</span> <span class="token punctuation">(</span>jsonObject at<span class="token punctuation">:</span> <span class="token symbol">#breed</span><span class="token punctuation">)</span></code></pre><p>Here's how we can parse a JSON string to get a <code>Dog</code> object.</p><pre class="language-smalltalk"><code class="language-smalltalk">newDog <span class="token operator">:=</span> VDog fromJson<span class="token punctuation">:</span> json readStream</code></pre><h2 id="web-development" tabindex="-1">Web Development</h2><p>Enter <code>Feature require: 'WebClient'</code> and &quot;Do it&quot;. This adds many classes in the <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/blob/master/Packages/Features/WebClient.pck.st" target="_blank">WebClient</a> - Core category including <code>WebClient</code>, <code>WebRequest</code>, <code>WebResponse</code>, <code>WebServer</code>, and <code>WebSocket</code>.</p><p>Also see the <a href="https://github.com/SeasideSt/Seaside" target="_blank">Seaside</a> and <a href="https://github.com/zeroflag/Teapot" target="_blank">Teapot</a> frameworks.</p><p>See the <a href="https://book.seaside.st/book" target="_blank">Seaside Book</a>.</p><h3 id="send-http-requests" tabindex="-1">Send HTTP Requests</h3><p>The <code>WebClient</code> class defines class methods that send HTTP requests. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">res <span class="token operator">:=</span> WebClient httpGet<span class="token punctuation">:</span> <span class="token string">'https://pokeapi.co/api/v2/pokemon/pikachu'</span><span class="token punctuation">.</span></code></pre><p>The value of the variable <code>res</code> above is a <code>WebResponse</code> object. It has many instance variables including:</p><ul><li><code>code</code> - status code such as 200</li><li><code>content</code> - response body</li><li><code>headers</code> - an <code>OrderedCollection</code> of <code>Association</code> objects that describe the HTTP response headers such as <code>content-type</code> with a value like <code>text/html; charset=utf-8</code> or <code>application/json; charset=utf-8</code></li><li><code>protocol</code> - such as the <code>String</code> <code>HTTP/1.1</code></li><li><code>status</code> - such as the <code>String</code> <code>HTTP/1.1 200 OK</code></li><li><code>url</code> - the URL to which the request was sent</li></ul><h3 id="implementing-an-http-server" tabindex="-1">Implementing an HTTP Server</h3><p>Creating a <code>WebServer</code> instance and sending it the <code>listenOn:</code> message starts a Smalltalk process called &quot;WebServers's listener process&quot;. To kill it, open a &quot;Process Browser&quot;, select the process, and press cmd-t (Terminate).</p><p>See the class <code>MyWebServer</code> in the <code>Volkmann</code> package.</p><h2 id="foreign-function-interface-(ffi)" tabindex="-1">Foreign Function Interface (FFI)</h2><p>See <a href="https://itchyeyes.net/articles/cuis-smalltalk.html" target="_blank">Using the FFI</a>.</p><h2 id="example-code" tabindex="-1">Example Code</h2><pre class="language-smalltalk"><code class="language-smalltalk">Transcript show<span class="token punctuation">:</span> <span class="token string">'Hello World!'</span><br><br>Smalltalk allClasses size<span class="token punctuation">.</span><br><br>label1 <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>label1 contents<span class="token punctuation">:</span> <span class="token string">'red label'</span><span class="token punctuation">.</span><br>label1 color<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color red<span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>label2 <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>label2 contents<span class="token punctuation">:</span> <span class="token string">'yellow label'</span><span class="token punctuation">.</span><br>label2 color<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color yellow<span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>layout1 <span class="token operator">:=</span> LayoutMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br><span class="token comment">"The :: syntax is used to set multiple properties on an object."</span><br>layout1 beRow <span class="token punctuation">:</span><span class="token punctuation">:</span> borderWidth<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">:</span><span class="token punctuation">:</span> borderColor<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color white<span class="token punctuation">)</span><span class="token punctuation">.</span><br>layout1 separation<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">.</span><br>layout1 axisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">.</span> <span class="token comment">"0.0 for left, 0.5 for center, 1.0 for right"</span><br>layout1 addMorph<span class="token punctuation">:</span> label1<span class="token punctuation">.</span><br>layout1 addMorph<span class="token punctuation">:</span> label2<span class="token punctuation">.</span><br>layout1 openInHand<span class="token punctuation">.</span><br><br>image1 <span class="token operator">:=</span> ImageMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>layout1 addMorph<span class="token punctuation">:</span> image1<span class="token punctuation">.</span><br><br>label2 delete<span class="token punctuation">.</span><br><br>layout1 beColumn<span class="token punctuation">.</span><br><br>array1 <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token number">7</span> <span class="token string">'Tami'</span> <span class="token punctuation">(</span>Color red<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>array1 size<span class="token punctuation">.</span> <span class="token comment">"4"</span><br><span class="token comment">"This prints each item in the array on a separate line in the Transcript window.<br>The convention is to refer to each item with the parameter name `each`."</span><br>array1 do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:each</span> <span class="token punctuation">|</span></span> Transcript show<span class="token punctuation">:</span> each <span class="token punctuation">:</span><span class="token punctuation">:</span> newLine<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br><span class="token comment">"Operations on integers that have a non-integer result are reported as ratios (fractions)."</span><br><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">89</span> <span class="token number">97</span> <span class="token number">94</span><span class="token punctuation">)</span> mean<span class="token punctuation">.</span> <span class="token comment">"result is 280/3"</span><br><br><span class="token comment">"This creates a range of integers from 1 to 5 and computes their sum."</span><br><span class="token punctuation">(</span><span class="token number">1</span> to<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span> sum<span class="token punctuation">.</span><br><br>myBlock <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span> a <span class="token operator">+</span> b<span class="token punctuation">]</span><span class="token punctuation">.</span><br>myBlock value<span class="token punctuation">:</span> <span class="token number">2</span> value<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span></code></pre><h2 id="annoyances" tabindex="-1">Annoyances</h2><ul><li><p>inconsistent case in method names</p><p>For example, the <code>CharacterSequence</code> class defines the methods <code>subStrings</code> and <code>substringsSeparatedBy:</code>.</p></li><li><p>inconsistent case menu items</p><p>For examples, see the Preferences and Windows submenus of the World menu.</p></li><li><p>inconsistent case in button labels</p><p>For example, in Debug windows the first row of buttons starting with &quot;browse&quot; have labels that are all lowercase. But the second row of buttons starting with &quot;Proceed&quot; have labels that are capitalized.</p></li><li><p>new windows open in random locations, not near where they were requested</p></li></ul><h2 id="unresolved-questions" tabindex="-1">Unresolved Questions</h2><ul><li><p>Does Smalltalk have an FFI for calling code written in other languages?</p></li><li><p>How can you work with SQLite and Postgres databases from Smalltalk?</p></li><li><p>Where are method categories stored?</p></li><li><p>Build a Todo app using Morphic and practice stripping the image to create a version that can be distributed to users.</p></li><li><p>Is there an easy way to create a memoized version of a method? Try this with the &quot;collatz&quot; method that you added to the Integer class.</p></li><li><p>A Smalltalk image contains a set of class definitions, existing objects, and code that implements a GUI for the objects that are graphical. Anything else?</p></li><li><p>Code can be saved in an image, a package, or a fileOut. Are those all the options?</p></li><li><p>Are packages unique to Cuis Smalltalk?</p></li><li><p>Is the only way to save changes to a package to open an &quot;Installed Packages&quot; window, select the package, and click the &quot;save&quot; button?</p></li><li><p>Do any collection classes support structural sharing for immutability support?</p></li><li><p>What package can you install to get a color picker?</p></li><li><p>Are there any linting tools for Smalltalk?</p></li><li><p>Learn how to write and distribute command-line utilities/apps in Smalltalk.</p></li><li><p>Learn how to write and distribute GUI apps in Smalltalk.</p></li><li><p>Learn how to write and distribute web apps in Smalltalk.</p></li><li><p>Study the code in the &quot;Morphic-Games-Solitaire&quot; package to see what you can learn from it.</p></li><li><p>Is there a String method that does interpolation? I'm imagining something like this: s := 'Player %s is number %d.' interpolate: #('Gretzky' 99).</p></li><li><p>See this! <a href="https://squeak.js.org" target="_blank">SqueakJS</a></p></li><li><p>Learn how to add items to existing menus in the Cuis UI that do something when you select them such as repositioning the currrently active window.</p></li><li><p>Consider submitting an update to Cuis that standardizes menu item names. Currently there are three styles:</p><ul><li>all words lower</li><li>All Words Upper</li><li>Mixture of styles</li></ul></li><li><p>Describe the use of &quot;class instance variables&quot; (not shared with subclasses) which are different from &quot;class variables&quot; (shared with subclasses)? To see them in a System Browser, select a class and click the class button. They will look like this:</p><pre class="language-smalltalk"><code class="language-smalltalk">Dog class<br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span></code></pre></li><li><p>Does Smalltalk expose its own AST? If so, maybe you can use that to generate code and another programming language from my Smalltalk program.</p></li><li><p>How can you examine the bytecode for a method?</p></li><li><p>Learn how to draw on a canvas in Cuis using &quot;Morphic 3&quot;.</p></li><li><p>Is Morphic 3 only supported in Cuis?</p></li><li><p>Does Cuis run on the &quot;OpenSmalltalk Virtual Machine&quot;? Is this the same VM that is used by Squeak and Pharo?</p></li><li><p>In a talk by Juan Vuletich, one of his slides says Cuis is &quot;A practical system, used for teaching, Satellite image processing, research in sign, image, and audio processing, research in programming languages, and many other areas of application.&quot; This seems to imply that it is not for &quot;normal&quot; application development.</p></li><li><p>Learn about the Smalltalk &quot;primitive&quot; syntax. For example, the <code>DisplayScreen</code> instance method <code>fullScreenMode:</code> contains <code>&lt;primitive: 233&gt;</code>.</p></li><li><p>Can you configure your image so it never starts in full screen mode even if it was saved that way?</p></li><li><p>What do you click in a morph halo to cause it to display its coordinate system axes?</p></li><li><p>Some packages are built-in meaning that they are included in the distribution of the Smalltalk implementation. Other packages must be downloaded, sometimes by cloning a GitHub repository.</p></li><li><p>Formalize your code to generate HTML from an Association object.</p></li><li><p>Does ‚Äúmorph removeAll‚Äù remove a given morph and all of its sub morphs?</p></li><li><p>Another way to browse a class besides pressing cmd-f in the left pane of a system browser and searching for it by name is to enter the name and it workspace and press cmd-b to browse it.</p></li><li><p>Is it more common to include a space after the return caret or not?</p></li><li><p>The protocol of a class is the set of all its instance methods, including those that are inherited from superclasses.</p></li><li><p>Learn how to use all the buttons in a system browser window.</p></li><li><p>The term &quot;extent&quot; in Morphic means the combination of width and height as a Point object.</p></li><li><p>Is &quot;location&quot; a Point object containing X and Y values?</p></li><li><p>Is Cuis Smalltalk the only implementation that supports Unicode characters, TrueType fonts, vector graphics?</p></li><li><p>Try the Connectors package. Does it work in Cuis Smalltalk or is there a port of it? <a href="https://youtu.be/QBRm_hnl7sE?si=w4FDZLfoyMAehZv6">https://youtu.be/QBRm_hnl7sE?si=w4FDZLfoyMAehZv6</a></p></li><li><p>Submit a PR for the SVG repository that modifies <code>README.md</code> to explain how to clone the <code>Numerics</code> repository which provides the <code>LinearAlgebra</code> package, and install that.</p></li><li><p>Submit a PR to this for the typos you found in <a href="https://github.com/Cuis-Smalltalk/TheCuisBook">https://github.com/Cuis-Smalltalk/TheCuisBook</a>.</p></li><li><p>Try <a href="https://github.com/Cuis-Smalltalk/DatabaseSupport">https://github.com/Cuis-Smalltalk/DatabaseSupport</a>.</p></li></ul></article>