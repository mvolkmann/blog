<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Collections</h2><aside><nav class="toc"><ol><li><a href="#association">Association</a></li><li><a href="#collection">Collection</a></li><li><a href="#sequenceablecollection">SequenceableCollection</a></li><li><a href="#arrayedcollection">ArrayedCollection</a></li><li><a href="#array">Array</a></li><li><a href="#interval">Interval</a></li><li><a href="#linkedlist">LinkedList</a></li><li><a href="#orderedcollection">OrderedCollection</a></li><li><a href="#sortedcollection">SortedCollection</a></li><li><a href="#bag">Bag</a></li><li><a href="#set">Set</a></li><li><a href="#dictionary">Dictionary</a></li><li><a href="#ordereddictionary">OrderedDictionary</a></li><li><a href="#indexable-classes">Indexable Classes</a></li><li><a href="#identity-collections">Identity Collections</a></li><li><a href="#weak-collections">Weak Collections</a></li><li><a href="#conversions">Conversions</a></li><li><a href="#common-abbreviations">Common Abbreviations</a></li></ol></nav></aside><article><p>Smalltalk supports a large number of collection classes. Collection elements can be any kind of object, including other collections.</p><p>The Cuis Smalltalk base image contains 60 subclasses of the <code>Collection</code> class. The following list depicts the partial class hierarchy of those:</p><ul><li><code>Collection</code><ul><li><code>SequenceableCollection</code><ul><li><code>ArrayedCollection</code><ul><li><code>Array</code></li><li><code>ByteArray</code></li><li><code>ColorArray</code></li><li><code>FloatArray</code></li><li><code>IntegerArray</code><ul><li><code>PointArray</code></li></ul></li></ul></li><li><code>Heap</code></li><li><code>Interval</code></li><li><code>LinkedList</code></li><li><code>OrderedCollection</code><ul><li><code>SortedCollection</code></li></ul></li></ul></li><li><code>Bag</code></li><li><code>Set</code><ul><li><code>Dictionary</code><ul><li><code>OrderedDictionary</code></li></ul></li></ul></li></ul></li><li><code>Array2D</code> - a two-dimensional array</li><li><code>SharedQueue</code></li></ul><h2 id="association" tabindex="-1">Association</h2><p>An <code>Association</code> represents a key/value pair. These are used by several other classes including <code>Dictionary</code> and <code>Bag</code>.</p><p>An <code>Association</code> instance can be created in the following ways:</p><pre class="language-smalltalk"><code class="language-smalltalk">a <span class="token operator">:=</span> Association key<span class="token punctuation">:</span> someKey value<span class="token punctuation">:</span> someValue<span class="token punctuation">.</span><br>a <span class="token operator">:=</span> someKey <span class="token operator">-</span><span class="token operator">></span> someValue<span class="token punctuation">.</span></code></pre><p>The message <code>-&gt;</code> is defined in the <code>Object</code> class which make it easy to create an <code>Association</code> with any object as the key.</p><p>The following table describes some of the instance methods defined in the <code>Association</code> class and its superclass <code>LookupKey</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>key</code></td><td>answers the receiver key</td></tr><tr><td><code>key:</code></td><td>modifies the receiver key</td></tr><tr><td><code>key:value:</code></td><td>modifies the receiver key and value</td></tr><tr><td><code>value</code></td><td>answers the receiver value</td></tr><tr><td><code>value:</code></td><td>modifies the receiver alue</td></tr></tbody></table><h2 id="collection" tabindex="-1">Collection</h2><p>The following table describes some of the class methods defined in the <code>Collection</code> class. These must be called on a concrete subclass, not on <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>with:</code></td><td>answers an instance containing one value</td></tr><tr><td><code>with:with:</code></td><td>answers an instance containing two values</td></tr><tr><td><code>with:with:with:</code></td><td>answers an instance containing three values</td></tr><tr><td><code>with:with:with:with:</code></td><td>answers an instance containing four values</td></tr><tr><td><code>with:with:with:with:with:</code></td><td>answers an instance containing five values</td></tr><tr><td><code>withAll:</code></td><td>answers an instance containing all the values in another collection</td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Collection</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>*</code></td><td>answers instance whose elements are receiver elements times argument</td></tr><tr><td><code>+</code></td><td>answers instance whose elements are receiver elements plus argument</td></tr><tr><td><code>,</code></td><td>answers instance whose elements are the concatenation of receiver and argument collections</td></tr><tr><td><code>-</code></td><td>answers instance whose elements are receiver elements minus argument</td></tr><tr><td><code>/</code></td><td>answers instance whose elements are receiver elements divided by argument</td></tr><tr><td><code>//</code></td><td>answers instance whose elements are receiver elements integer divided by argument</td></tr><tr><td><code>=</code></td><td>answers <code>Boolean</code> indicating if receiver and argument are equivalent</td></tr><tr><td><code>\\</code></td><td>answers instance whose elements are receiver elements modulo argument</td></tr><tr><td><code>abs</code></td><td>answers instance whose elements are absolute value of receiver elements</td></tr><tr><td><code>add:</code></td><td>adds argument to collection and answers argument</td></tr><tr><td><code>addALl:</code></td><td>adds all objects in argument collection to collection and answers argument</td></tr><tr><td><code>allSatisfy:</code></td><td>answers <code>Boolean</code> indicating if ALL elements satisfy a block; like <code>every</code> in JavaScript</td></tr><tr><td><code>anySatisfy:</code></td><td>answers <code>Boolean</code> indicating if ANY elements satisfy a block; like <code>some</code> in JavaScript</td></tr><tr><td><code>asArray</code></td><td>answers <code>Array</code> instance whose elements are those in receiver</td></tr><tr><td><code>asBag</code></td><td>answers <code>Bag</code> instance whose elements are those in receiver</td></tr><tr><td><code>asCommaStringAnd</code></td><td>answers comma-separated <code>String</code> where last elements are separated by &quot;and&quot;</td></tr><tr><td><code>asIdentitySet</code></td><td>answers <code>IdentifySet</code> instance whose elements are those in receiver with no duplicates</td></tr><tr><td><code>asOrderedCollection</code></td><td>answers <code>OrderedCollection</code> instance whose elements are those in receiver</td></tr><tr><td><code>asSortedCollection</code></td><td>answers <code>SortedCollection</code> instance whose elements are those in receiver</td></tr><tr><td><code>asSortedCollection:</code></td><td>same as <code>asSortedCollection</code>, but take block that defines sort order</td></tr><tr><td><code>asSet</code></td><td>answers <code>Set</code> instance whose elements are those in receiver with no duplicates</td></tr><tr><td><code>atRandom</code></td><td>answers a random element</td></tr><tr><td><code>average</code></td><td>same as <code>mean</code></td></tr><tr><td><code>ceiling</code></td><td>answers instances whose elements are the ceiling of receiver elements</td></tr><tr><td><code>collect:</code></td><td>answers instance whose elements are results of passing receiver elements to a block; like <code>map</code> in JavaScript</td></tr><tr><td><code>collect:andFold</code></td><td>answers instance whose elements are results of passing receiver elements to a block; like <code>map</code> in JavaScript</td></tr><tr><td><code>count:</code></td><td>answers number of receiver elements that satisfy argument block</td></tr><tr><td><code>detect:</code></td><td>answers first element in receiver that satisfies block argument; like <code>find</code> in JavaScript</td></tr><tr><td><code>detect:ifFound:ifNone</code></td><td>like <code>detect:</code> but executes <code>ifFound:</code> block if found and <code>ifNone:</code> block if not found</td></tr><tr><td><code>detect:ifNone</code></td><td>like <code>detect:</code> but executes <code>ifNone:</code> block if not found</td></tr><tr><td><code>difference:</code></td><td>answers instance that includes elements in receiver that are not in argument</td></tr><tr><td><code>do:</code></td><td>evaluates block argument for each element; like <code>forEach</code> in JavaScript</td></tr><tr><td><code>do:separatedBy:</code></td><td>evaluates <code>do:</code> block argument for each element and <code>separatedBy:</code> block argument between each element</td></tr><tr><td><code>floor</code></td><td>answers instances whose elements are the floor of receiver elements</td></tr><tr><td><code>fold:</code></td><td>answers value that results from folding receiver elements with a block; like <code>reduce</code> in JavaScript</td></tr><tr><td><code>fold:ifEmpty:</code></td><td>like <code>fold:</code>, but specifies value to use if collection is empty</td></tr><tr><td><code>groupBy:</code></td><td>answers <code>Dictionary</code> where keys are values returned by passing each element to block argument and values are <code>OrderedCollection</code> instances</td></tr><tr><td><code>ifEmpty:</code></td><td>evaluates block argument if collection is empty</td></tr><tr><td><code>ifEmpty:ifNotEmpty:</code></td><td>combines <code>ifEmpty:</code> and <code>ifNotEmpty:</code></td></tr><tr><td><code>ifNotEmpty:</code></td><td>evaluates block argument if collection is not empty</td></tr><tr><td><code>ifNotEmpty:ifEmpty:</code></td><td>combines <code>ifNotEmpty:</code> and <code>ifEmpty:</code></td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if argument is an element of receiver</td></tr><tr><td><code>includesAllOf:</code></td><td>answers <code>Boolean</code> indicating if all elements in argument collection are elements of receiver</td></tr><tr><td><code>includesAnyOf:</code></td><td>answers <code>Boolean</code> indicating if any elements in argument collection are elements of receiver</td></tr><tr><td><code>inject:into:</code></td><td>similar to <code>fold:</code>, but can specify initial accumulator value; like <code>reduce</code> in JavaScript</td></tr><tr><td><code>intersection:</code></td><td>answers instance that includes elements present in both receiver and argument collections</td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if collection does not contain any elements</td></tr><tr><td><code>max</code></td><td>answers largest number element</td></tr><tr><td><code>mean</code></td><td>answers mean of number elements</td></tr><tr><td><code>min</code></td><td>answers smallest number element</td></tr><tr><td><code>noneSatisfy:</code></td><td>answers <code>Boolean</code> indicating if NONE of the elements satisfy a block</td></tr><tr><td><code>notEmpty</code></td><td>answers <code>Boolean</code> indicating if collection is not empty</td></tr><tr><td><code>occurrencesOf:</code></td><td>answers number of elements that are equal to argument</td></tr><tr><td><code>product</code></td><td>answers product of number elements</td></tr><tr><td><code>range</code></td><td>answers difference between max and min values</td></tr><tr><td><code>reduce:</code></td><td>same as fold:</td></tr><tr><td><code>reject:</code></td><td>answers instance containing receiver elements that do not satisfy a block</td></tr><tr><td><code>remove:</code></td><td>removes first occurrence of argument and answers argument</td></tr><tr><td><code>select:</code></td><td>answers instance containing receiver elements that satisfy a block; like <code>filter</code> in JavaScript</td></tr><tr><td><code>select:thenCollect</code></td><td>combines <code>select:</code> and <code>collect:</code></td></tr><tr><td><code>select:thenDo:</code></td><td>combines <code>select:</code> and <code>do:</code></td></tr><tr><td><code>sizes</code></td><td>answers number of elements in receiver</td></tr><tr><td><code>sorted</code></td><td>answers instance containing all receiver elements in sorted order</td></tr><tr><td><code>sqrt</code></td><td>answers instance whose elements are square root of receiver elements</td></tr><tr><td><code>squared</code></td><td>answers instance whose elements are squared values of receiver elements</td></tr><tr><td><code>sum</code></td><td>answers sum of receiver number elements</td></tr><tr><td><code>union:</code></td><td>answers <code>Set</code> instance that includes elements present in receiver or argument collection</td></tr></tbody></table><p>Collections support binary messages that operate on all the elements and return a new array containing the results. For example, <code>#(1 2 3) * 2</code> returns <code>#(2 4 6)</code>.</p><p>The <code>fold:</code> method uses the first element as the initial value and folds in the remaining elements. The <code>inject:into:</code> method takes an initial value and folds in all the elements.</p><p>The following code demonstrates some of the methods described above:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span> asCommaStringAnd <span class="token comment">"gives 'red, green and blue'<br><br>#(1 2 3 4) mean` "</span>gives Fraction <span class="token number">5</span><span class="token operator">/</span><span class="token number">2</span><span class="token comment">"<br><br>numbers := #(1 2 3 4).<br>numbers collect: [:n | n * 2]. "</span><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token comment">"<br>numbers select: [:n | n odd]. "</span><span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">"<br>numbers inject: 0 into: [:acc :n | acc + n]. "</span><span class="token number">10</span>"</code></pre><p>I implemented the method <code>asOxfordCommaAnd</code> so the example above gives <code>'red, green, and blue;</code>.</p><h2 id="sequenceablecollection" tabindex="-1">SequenceableCollection</h2><p>There are no particularly interesting class methods in the <code>SequenceableCollection</code> class.</p><p>The following table describes some of the instance methods defined in the <code>SequenceableCollection</code> class that are not defined in the <code>Collection</code> superclass.</p><p>All indexes are 1-based.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>,</code></td><td>answers new collection created by appending receiver and argument</td></tr><tr><td><code>+=</code></td><td>modifies receiver number elements by adding argument to each</td></tr><tr><td><code>-=</code></td><td>modifies receiver number elements by subtracting argument from each</td></tr><tr><td><code>allButFirst</code></td><td>answers copy including all but first element</td></tr><tr><td><code>allButFirst:</code></td><td>answers copy including all but first argument elements</td></tr><tr><td><code>allButFirstDo:</code></td><td>evaluates block argument with all but first element</td></tr><tr><td><code>allButLast</code></td><td>answers copy including all but last element</td></tr><tr><td><code>allButLast:</code></td><td>answers copy including all but last argument elements</td></tr><tr><td><code>allButLastDo:</code></td><td>evaluates block argument with all but last element</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers element at <code>at:</code> index or if absent the value of <code>ifAbsent:</code> block</td></tr><tr><td><code>atLast:</code></td><td>answers element at index that is argument from end (1 for last)</td></tr><tr><td><code>atLast:ifAbsent:</code></td><td>like <code>atLast:</code> but specifies value to return if not enough elements</td></tr><tr><td><code>combinations:atATimeDo:</code></td><td>evaluates <code>atATimeDo</code> once for every unique combination of <code>combinations:</code> elements</td></tr><tr><td><code>copyFrom:to:</code></td><td>answers instance containing only receiver elements from index <code>copyFrom:</code> to index <code>to:</code></td></tr><tr><td><code>do:displayingProgress:</code></td><td>evaluates a block for each receiver element and displays a progress bar (see example below)</td></tr><tr><td><code>findFirst:</code></td><td>like <code>detect:</code>, but answers element index of value instead of element value</td></tr><tr><td><code>findFirst:startingAt</code></td><td>like <code>findFirst:</code>, but starts search at a given index</td></tr><tr><td><code>findLast:</code></td><td>like <code>findFirst:</code>, but answers element index of last element that satisifies block argument</td></tr><tr><td><code>first</code></td><td>answers first element in receiver</td></tr><tr><td><code>first:</code></td><td>answers copy of first argument elements in receiver</td></tr><tr><td><code>head:</code></td><td>same as <code>first:</code></td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if receiver contains argument value</td></tr><tr><td><code>indexOf:</code></td><td>answers first index of argument value or 0</td></tr><tr><td><code>indexOf:startingAt:</code></td><td>answers index of argument value starting at a given index or 0</td></tr><tr><td><code>keysAndValuesDo:</code></td><td>evaluates block argument with all key/value pairs</td></tr><tr><td><code>last</code></td><td>answers last element in receiver</td></tr><tr><td><code>last:</code></td><td>answers copy of last argument elements in receiver</td></tr><tr><td><code>lastIndexOf:</code></td><td>answers last index of argument value or 0</td></tr><tr><td><code>middle</code></td><td>answers the middle element in receiver</td></tr><tr><td><code>permutationsDo:</code></td><td>evaluates block argument with an <code>OrderedCollection</code> once for each permutation of all receiver elements</td></tr><tr><td><code>polynomialEval:</code></td><td>answers result of using receiver number elements as polynomial coefficients with argument for <code>x</code></td></tr><tr><td><code>printStringWithNewline</code></td><td>answers <code>String</code> with newline between each element value</td></tr><tr><td><code>replace:</code></td><td>replace each element in receiver with result of passing it to argument block</td></tr><tr><td><code>reverse</code></td><td>same as <code>reversed</code></td></tr><tr><td><code>reversed</code></td><td>answers copy with elements in reverse order</td></tr><tr><td><code>shuffled</code></td><td>answers copy with elements in random order</td></tr><tr><td><code>tail:</code></td><td>same as <code>last:</code></td></tr><tr><td><code>with:collect:</code></td><td>answers <code>Array</code> of results from evaluating <code>collect:</code> block with corresponding elements from receiver and <code>with:</code> collections</td></tr><tr><td><code>with:do:</code></td><td>evaluates <code>do:</code> block with corresponding elements from receiver and <code>with:</code> collections</td></tr><tr><td><code>with:with:collect:</code></td><td>like <code>with:collect:</code>, but operates on three collections</td></tr><tr><td><code>with:with:do:</code></td><td>like <code>with:do:</code>, but operates on three collections</td></tr><tr><td><code>withIndexCollect:</code></td><td>like <code>collect:</code>, but passes element and index values to argument block</td></tr><tr><td><code>withIndexDo:</code></td><td>like <code>do:</code>, but passes element and index values to argument block</td></tr><tr><td><code>withNextDo:</code></td><td>evaluate argument block with each receiver element and the next element, using nil for next of last element</td></tr></tbody></table><p>In <code>polynomialEval:</code>, the first element is the constant, the second is the <code>x</code> coefficient, the third is the <code>x^2</code> coefficient, and so on.</p><p>The following code demonstrates using the <code>do:displayingProgress:</code> method.</p><p><img alt="Cuis SequenceableCollection do:displayingProgress:" style="width: 20%" src="/blog/assets/cuis-SequenceableCollection-do-displayingProgress.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">c <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token number">20</span> <span class="token number">30</span> <span class="token number">40</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>delay <span class="token operator">:=</span> Delay forSeconds<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>c do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:n</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span><span class="token string">'processing {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span><br>    delay wait<span class="token punctuation">.</span><br><span class="token punctuation">]</span> displayingProgress<span class="token punctuation">:</span> <span class="token string">'doing stuff'</span></code></pre><h2 id="arrayedcollection" tabindex="-1">ArrayedCollection</h2><p>There are no particularly interesting methods in this class.</p><h2 id="array" tabindex="-1">Array</h2><p><code>Array</code> instances are fixed-length, ordered collections. They are indexed starting at 1, not 0. Elements cannot be added or deleted, but they can be modified.</p><p>Most of the interesting <code>Array</code> methods are defined in the superclasses <code>SequenceableCollection</code> and <code>Collection</code>.</p><p>Compile-time literal arrays begin with <code>#(</code>, end with <code>)</code>, and contain space-separated values. For example, <code>#(true 7 'Tami' (Color red))</code>.</p><p>Run-time literal arrays (a.k.a. dynamic arrays) begin with <code>{</code>, end with <code>}</code>, and contain dot-separated expressions. For example, <code>{name. breed}</code>. This is an alternative to the more verbose syntax <code>Array with: name with: breed</code>. A common error is to separate expressions with commas instead of periods.</p><p>To create an array of a given size where the initial value of all the elements is <code>nil</code>, send the message <code>#ofSize:</code> to the <code>Array</code> class. For example, <code>rgb := Array ofSize: 3</code>.</p><p>To create an array of a given size where the initial value of all the elements is the same non-nil value, send the message <code>#new:withAll:</code> to the <code>Array</code> class. For example, <code>rgb := Array new: 3 withAll: 255</code>.</p><p>The following table describes some of the instance methods defined in the <code>Array</code> class that are not defined in its superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>evalStrings</code></td><td>answers <code>Array</code> whose elements are the results of evaluating receiver <code>String</code> elements as Smalltalk expressions</td></tr></tbody></table><p>To create an array of numbers from a range, send the <code>#asArray</code> message to a <code>Range</code>. For example, <code>(1 to: 5) asArray</code> returns <code>#(1 2 3 4 5)</code>.</p><p>In addition to the <code>Array</code> class that can hold values of any type, there are predefined, type-specific array classes including <code>ByteArray</code>, <code>ColorArray</code>, <code>DoubleByteArray</code>, <code>DoubleWordArray</code>, <code>Int16PointArray</code>, <code>FloatArray</code>, <code>Float32Array</code>, <code>Float32PointArray</code>, <code>Float64Array</code>, <code>IntegerArray</code>, <code>PointArray</code>, <code>RunArray</code>, <code>RunNotArray</code>, and <code>WordArray</code>.</p><h2 id="interval" tabindex="-1">Interval</h2><p>Instances of the <code>Interval</code> class represent a finite arithmetic progression. This is a sequence of numbers where the difference between consecutive terms is constant. An example is the numbers 2, 4, 6, and 8.</p><p>The <code>Interval</code> class is a subclass of <code>SequenceableCollection</code> which is a subclaass of <code>Collection</code>.</p><p>The following table describes some of the class methods defined in the <code>Interval</code> class.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>from:to:</code></td><td>answers an instance where the increment between values is 1</td></tr><tr><td><code>from:to:by:</code></td><td>answers an instance where the increment between values is <code>by:</code></td></tr><tr><td><code>from:to:count:</code></td><td>answers an instance where the number of values is <code>count:</code> and the increment can be a <code>Fraction</code></td></tr><tr><td><code>integersFrom:to:count:</code></td><td>answers an instance where the number of values is <code>count:</code> and the increment is the closest <code>Integer</code>, not a <code>Fraction</code></td></tr></tbody></table><p>The following table describes some of the instance methods defined in the <code>Interval</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>at:</code></td><td>answers the value at a given index</td></tr><tr><td><code>do:</code></td><td>evaluates a block for each value from first to last</td></tr><tr><td><code>extent</code></td><td>answers the difference between the last and first values</td></tr><tr><td><code>first</code></td><td>answers the first value</td></tr><tr><td><code>includes:</code></td><td>answers <code>Boolean</code> indicating if argument is one of the values</td></tr><tr><td><code>increment</code></td><td>answers the increment between values</td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if the size is 0</td></tr><tr><td><code>last</code></td><td>answers the last value</td></tr><tr><td><code>size</code></td><td>answers the number of values</td></tr><tr><td><code>reverseDo:</code></td><td>evaluates a block for each value from last to first</td></tr></tbody></table><h2 id="linkedlist" tabindex="-1">LinkedList</h2><p><code>LinkedList</code> instances represent a singly-linked list of <code>Link</code> subclasses. Custom <code>Link</code> subclasses must be defined. For example, the <code>StringLink</code> class defined below has a single instance variable named &quot;value&quot;.</p><pre class="language-smalltalk"><code class="language-smalltalk">Link subclass<span class="token punctuation">:</span> <span class="token symbol">#StringLink</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'value'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><span class="token operator">!</span></code></pre><p>The <code>StringLink</code> class has the following class method for creating instances.</p><pre class="language-smalltalk"><code class="language-smalltalk">value<span class="token punctuation">:</span> aString<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">link</span> <span class="token punctuation">|</span></span><br>    link <span class="token operator">:=</span> <span class="token keyword">self</span> <span class="token keyword">new</span><span class="token punctuation">.</span><br>    link setValue<span class="token punctuation">:</span> aString<span class="token punctuation">.</span><br>    <span class="token operator">^</span> link</code></pre><p>The <code>StringLink</code> class has the following instance methods.</p><pre class="language-smalltalk"><code class="language-smalltalk">setValue<span class="token punctuation">:</span> aString<br>    value <span class="token operator">:=</span> aString<br><br>value<br>    <span class="token operator">^</span>value<br><br>value<span class="token punctuation">:</span> aString<br>    value <span class="token operator">:=</span> aString</code></pre><p>We can now create an instance of <code>LinkList</code> whose links are <code>StringLink</code> instances.</p><pre class="language-smalltalk"><code class="language-smalltalk">list <span class="token operator">:=</span> LinkedList <span class="token keyword">new</span><span class="token punctuation">.</span><br>list addLast<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>list addLast<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'cherry'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>list addFirst<span class="token punctuation">:</span> <span class="token punctuation">(</span>StringLink value<span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br><span class="token comment">"Output all the link values which are apple, banana, and cherry."</span><br>list do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:link</span> <span class="token punctuation">|</span></span> link value print<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>list size print<span class="token punctuation">.</span> <span class="token comment">"3"</span><br><br><span class="token punctuation">(</span><span class="token string">'first is {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>list first value<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token comment">"apple"</span><br><span class="token punctuation">(</span><span class="token string">'last is {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>list last value<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span> <span class="token comment">"cherry"</span><br><br>list removeLast<span class="token punctuation">.</span> <span class="token comment">"removes cherry"</span><br><br><span class="token comment">"Output all the link values which are apple and banana."</span><br>list do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:link</span> <span class="token punctuation">|</span></span> link value print<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p><code>Link</code> instances have the methods <code>nextLink</code> and <code>nextLink:</code> to get and set the link to which they refer. In addition to the <code>LinkedList</code> methods described below, these can be used to insert new <code>Link</code> instances into a <code>LinkedList</code>.</p><p>The following table describes some of the instance methods defined in the <code>LinkedList</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>add:</code></td><td>same as <code>addLast:</code></td></tr><tr><td><code>add:before:</code></td><td>adds <code>add:</code> <code>Link</code> before <code>before:</code> <code>Link</code></td></tr><tr><td><code>addFirst:</code></td><td>adds argument <code>Link</code> to beginning</td></tr><tr><td><code>addLast:</code></td><td>adds argument <code>Link</code> to end</td></tr><tr><td><code>at:</code></td><td>answers <code>Link</code> at argument index; error if absent</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers <code>Link</code> at <code>at:</code> index or value of <code>ifAbsent:</code> if absent</td></tr><tr><td><code>do:</code></td><td>evaluates argument block for each <code>Link</code></td></tr><tr><td><code>first</code></td><td>answers first <code>Link</code></td></tr><tr><td><code>isEmpty</code></td><td>answers <code>Boolean</code> indicating if <code>size</code> is 0</td></tr><tr><td><code>last</code></td><td>answers last <code>Link</code></td></tr><tr><td><code>remove:ifAbsent:</code></td><td>removes <code>remove:</code> <code>Link</code> and answers it; answers <code>ifAbsent:</code> value if absent</td></tr><tr><td><code>removeFirst</code></td><td>removes and answers first <code>Link</code>; treats like a queue</td></tr><tr><td><code>removeLast</code></td><td>removes and answers last <code>Link</code>; treats like a stack</td></tr></tbody></table><h2 id="orderedcollection" tabindex="-1">OrderedCollection</h2><p>The <code>OrderedCollection</code> class is a subclass of <code>SequenceableCollection</code>. Instances are variable-length, ordered collections that can contain duplicates.</p><p>To create an <code>OrderedCollection</code> from an array, send the <code>#newFrom:</code> message. For example, <code>fruits := OrderedCollection newFrom: #('apple' 'banana' 'cherry')</code></p><p>To create an <code>OrderedCollection</code> of a given size where the initial value of all the elements is <code>nil</code>, send the message <code>#ofSize:</code> to the <code>OrderedCollection</code> class. For example, <code>players := OrderedCollection ofSize: 4</code>.</p><p>To get the number of elements, send the <code>#size</code> message. For example, <code>fruits size</code> returns <code>3</code>.</p><p>To get an element at a specific position send messages like <code>#first</code>, <code>#last</code>, and <code>#at:</code> which takes a 1-based index. For example, <code>fruits first</code> returns <code>'apple'</code>, <code>fruits last</code> returns <code>'cherry'</code>, and <code>fruits at: 2</code> returns <code>'banana'</code>.</p><p>To add an element to the end, send the <code>#add</code> message. For example, <code>fruits add: 'date'</code>.</p><p>To add an element at a specific index, send the <code>#add:beforeIndex:</code> or <code>#add:afterIndex</code> message. For example, <code>fruits add: 'orange' beforeIndex: 3</code>.</p><p>To remove an element at a given 1-based index send the <code>#removeAt</code> message. For example, <code>fruits removeAt: 3</code> removes <code>'cherry'</code>.</p><p>To get the index of the first occurence of a given value, send the <code>#indexOf:</code> message. For example, <code>fruits indexOf: 'banana'</code> returns 2.</p><p>The following table describes some of the instance methods defined in the <code>OrderedCollection</code> class that are not also defined in superclasses.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>add:</code></td><td>adds argument to end</td></tr><tr><td><code>add:after:</code></td><td>adds <code>add:</code> object after <code>after:</code> object</td></tr><tr><td><code>add:afterIndex:</code></td><td>adds <code>add:</code> object after <code>afterIndex:</code> index</td></tr><tr><td><code>add:before:</code></td><td>adds <code>add:</code> object before <code>before:</code> object</td></tr><tr><td><code>add:beforeIndex:</code></td><td>adds <code>add:</code> object before <code>beforeIndex:</code> index</td></tr><tr><td><code>addAllFirst:</code></td><td>adds all objects in argument <code>OrderedColection</code> at beginning</td></tr><tr><td><code>addAllLast:</code></td><td>adds all objects in argument <code>OrderedColection</code> at end</td></tr><tr><td><code>at:</code></td><td>answers element at argument index</td></tr><tr><td><code>at:ifAbsentPut:</code></td><td>answers element at <code>at:</code> index; if not present, adds and answers <code>ifAbsentPut:</code> block value</td></tr><tr><td><code>at:put:</code></td><td>replaces existing element at <code>at:</code> index with <code>put:</code> object</td></tr><tr><td><code>collect:thenSelect:</code></td><td>combines <code>collect:</code> and <code>select:</code></td></tr><tr><td><code>find:</code></td><td>answers index of first occurrence of argument value</td></tr><tr><td><code>removeAll</code></td><td>removes all elements</td></tr><tr><td><code>removeAllSuchThat:</code></td><td>removes all elements that satisfy argument block</td></tr><tr><td><code>removeAt:</code></td><td>removes element at argument index</td></tr><tr><td><code>removeFirst</code></td><td>removes first element and answers it</td></tr><tr><td><code>removeFirst:</code></td><td>removes first argument elements and answers <code>Array</code> of them</td></tr><tr><td><code>removeLast</code></td><td>removes first element and answers it</td></tr><tr><td><code>removeLast:</code></td><td>removes last argument elements and answers <code>Array</code> of them</td></tr><tr><td><code>sort</code></td><td>sorts the elements in place</td></tr><tr><td><code>sort:</code></td><td>sorts the elements in place using argument block to compare them</td></tr></tbody></table><p>The following code creates an instance of <code>OrderedCollection</code> containing <code>Symbol</code> objects that are names of fruits. It then sorts them on their length.</p><pre class="language-smalltalk"><code class="language-smalltalk">oc <span class="token operator">:=</span> OrderedCollection newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token symbol">#banana</span> <span class="token symbol">#watermelon</span> <span class="token symbol">#cherry</span> <span class="token symbol">#apple</span> <span class="token symbol">#plum</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>oc sort<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:a</span> <span class="token variable">:b</span> <span class="token punctuation">|</span></span> a size <span class="token operator">&lt;</span> b size<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="sortedcollection" tabindex="-1">SortedCollection</h2><p>The <code>SortedCollection</code> class is a subclass of <code>OrderedCollection</code>. Instances keep their elements in sorted order. The element objects must implement the <code>&lt;=</code> instance method.</p><p>The following code demonstrates defining a <code>Dog</code> class whose instances can used as elements in a <code>SortedCollection</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#Dog</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'breed name'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br><span class="token comment">"class methods follow"</span><br><br>name<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br>    <span class="token operator">^</span><span class="token keyword">self</span> <span class="token keyword">new</span> setName<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br><br><span class="token comment">"instance methods follow"</span><br><br>breed<br>    <span class="token operator">^</span> breed<br><br>name<br>    <span class="token operator">^</span> name<br><br><span class="token operator">&lt;=</span> aDog<br>    <span class="token operator">^</span> <span class="token keyword">self</span> name <span class="token operator">&lt;=</span> aDog name<br><br>setName<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br>    name <span class="token operator">:=</span> nameString<span class="token punctuation">.</span><br>    breed <span class="token operator">:=</span> breedString</code></pre><p>The following code demonstrates creating a <code>SortedCollection</code> of <code>Dog</code> objects and printing their names.</p><pre class="language-smalltalk"><code class="language-smalltalk">comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">.</span><br>dogs <span class="token operator">:=</span> SortedCollection newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span>oscar<span class="token punctuation">.</span> comet<span class="token punctuation">}</span><span class="token punctuation">.</span><br>dogs do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span></code></pre><p>The output in the Transcript will be &quot;Comet&quot; followed by &quot;Oscar&quot;.</p><h2 id="bag" tabindex="-1">Bag</h2><p><code>Bag</code> instances are variable-length, unordered collections that can contain duplicates. Elements are stored in a dictionary where the keys are the objects and the values are their number of occurrences.</p><p>The following table describes some of the instance methods defined in the <code>OrderedCollection</code> class that are not also defined in the superclass <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>sortedCounts</code></td><td>answers a <code>SortedCollection</code> of <code>Association</code> objects where keys are counts and values are elements</td></tr><tr><td><code>sortedElements</code></td><td>answers a <code>SortedCollection</code> of <code>Association</code> objects where keys are elements and values are counts</td></tr><tr><td><code>withOccurrencesDo:</code></td><td>evaluates argument block for each unique element, passing it an element and its count</td></tr></tbody></table><p>The following code creates a <code>Bag</code> instance containing <code>String</code> fruit names, including many duplicates. It then sends several messages to the <code>Bag</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">b <span class="token operator">:=</span> Bag newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'apple'</span> <span class="token string">'banana'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>b sortedCounts print<span class="token punctuation">.</span><br>b sortedElements print<span class="token punctuation">.</span><br>b withOccurrencesDo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:obj</span> <span class="token variable">:count</span> <span class="token punctuation">|</span></span><br>   <span class="token punctuation">(</span><span class="token string">'{1} occurs {2} times.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>obj<span class="token punctuation">.</span> count<span class="token punctuation">}</span><span class="token punctuation">)</span> print<br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The code above produces the following output in the Transcript:</p><pre class="language-text"><code class="language-text">a SortedCollection(3 -> 'apple' 2 -> 'cherry' 1 -> 'banana')<br>a SortedCollection('apple' -> 3 'banana' -> 1 'cherry' -> 2)<br>cherry occurs 2 times.<br>apple occurs 3 times.<br>banana occurs 1 times.</code></pre><h2 id="set" tabindex="-1">Set</h2><p><code>Set</code> instances are unordered collections of unique values. The elements must supports the <code>=</code> and <code>hash</code> messages and cannot be <code>nil</code>.</p><p>To create an empty <code>Set</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">set <span class="token operator">:=</span> Set <span class="token keyword">new</span></code></pre><p>To create a <code>Set</code> that is populated from an <code>Array</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">set <span class="token operator">:=</span> Set newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'apple'</span> <span class="token string">'banana'</span> <span class="token string">'cherry'</span> <span class="token string">'apple'</span><span class="token punctuation">)</span></code></pre><p>The following code demonstrates adding an element, removing an element, and testing for the existence of an element:</p><pre class="language-smalltalk"><code class="language-smalltalk">set add<span class="token punctuation">:</span> `orange`<span class="token punctuation">.</span><br>set remove<span class="token punctuation">:</span> <span class="token string">'banana'</span><span class="token punctuation">.</span><br>set includes <span class="token string">'apple`. "true"<br>set includes '</span>banana`<span class="token punctuation">.</span> <span class="token comment">"false"</span></code></pre><p>Numbers in a <code>Set</code> are compared based on their values, not considering the classes of which they are instances. For example, the <code>SmallInteger</code> value <code>2</code>, the <code>Float</code> value <code>2.0</code>, and the <code>Fraction</code> value <code>6/3</code> are all considered equal, so only one of those values can be present in a <code>Set</code>.</p><h2 id="dictionary" tabindex="-1">Dictionary</h2><p><code>Dictionary</code> instances are collections of key/value pairs. The keys are often symbols, but they can be any kind of object that supports the <code>=</code> and <code>hash</code> messages. The values can be any kind of object.</p><p>To create a <code>Dictionary</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict <span class="token operator">:=</span> Dictionary <span class="token keyword">new</span><span class="token punctuation">.</span><br><br><span class="token comment">"Can populate from a run-time Array of Association objects."</span><br>dict <span class="token operator">:=</span> Dictionary newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><br><br>dict <span class="token operator">:=</span> <span class="token punctuation">{</span> k1 <span class="token operator">-</span><span class="token operator">></span> v1<span class="token punctuation">.</span> k2 <span class="token operator">-</span><span class="token operator">></span> v2<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span> asDictionary<span class="token punctuation">.</span></code></pre><p>It is not possible to create a <code>Dictionary</code> instance from a compile-time <code>Array</code> of <code>Association</code> objects because <code>Association</code> objects cannot be created at compile-time. This means the following cannot be used:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token symbol">#</span><span class="token punctuation">(</span> k1<span class="token operator">-</span><span class="token operator">></span>v1 k2<span class="token operator">-</span><span class="token operator">></span>v2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span></code></pre><p>To add a key/value pair:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> put<span class="token punctuation">:</span> value<span class="token punctuation">.</span><br>dict add<span class="token punctuation">:</span> key <span class="token operator">-</span><span class="token operator">></span> value<span class="token punctuation">.</span></code></pre><p>To get the value for a key:</p><pre class="language-smalltalk"><code class="language-smalltalk">value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span><br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsent<span class="token punctuation">:</span> defaultValue<br>value <span class="token operator">:=</span> dict at<span class="token punctuation">:</span> <span class="token symbol">#key</span> ifAbsentPut<span class="token punctuation">:</span> defaultValue</code></pre><p>If a default value is not provided and the key is not found, an Error window will open that says &quot;key not found&quot;.</p><p>To get all the keys, values, or associations:</p><pre class="language-smalltalk"><code class="language-smalltalk">ks <span class="token operator">:=</span> dict keys<span class="token punctuation">.</span><br>vs <span class="token operator">=</span> dict values<span class="token punctuation">.</span><br>as <span class="token operator">=</span> dict associations<span class="token punctuation">.</span></code></pre><p>To iterate over the values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:value</span> <span class="token punctuation">|</span></span> value print<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>To iterate over the keys and values:</p><pre class="language-smalltalk"><code class="language-smalltalk">dict associationsDo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:assoc</span> <span class="token punctuation">|</span></span><br>    Transcript<br>        show<span class="token punctuation">:</span> assoc key<span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> <span class="token string">' '</span><span class="token punctuation">;</span><br>        show<span class="token punctuation">:</span> assoc value<span class="token punctuation">;</span><br>        cr<br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The following table describes some of the instance methods defined in the <code>Dictionary</code> class that are not also defined in the superclasses <code>Set</code> or <code>Collection</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>addAll:</code></td><td>adds key/value pairs described by a <code>Collection</code> of <code>Association</code> objects</td></tr><tr><td><code>associationAt:</code></td><td>answers <code>Association</code> for argument key; error if not found</td></tr><tr><td><code>associationAt:ifAbsent:</code></td><td>answers <code>Association</code> for <code>associationAt:</code> key or <code>ifAbsent:</code> value if not found</td></tr><tr><td><code>associations</code></td><td>answers <code>Array</code> of <code>Association</code> objects for all key/value pairs</td></tr><tr><td><code>associationsDo:</code></td><td>evaluates argument block for each <code>Association</code></td></tr><tr><td><code>at:</code></td><td>answers value for argument key; error if not found</td></tr><tr><td><code>at:ifAbsent:</code></td><td>answers value for <code>at:</code> key or <code>ifAbsent:</code> value if not found</td></tr><tr><td><code>at:ifAbsentPut:</code></td><td>answers value for <code>at:</code> key; if not found, adds and answers <code>ifAbsentPut:</code> block value</td></tr><tr><td><code>at:ifPresent:</code></td><td>if <code>at:</code> key is present, answers value of passing value to <code>ifAbsent</code> block; otherwise answers <code>nil</code></td></tr><tr><td><code>at:ifPresent:ifAbsent:</code></td><td>combines <code>at:ifPresent</code> and <code>at:ifAbsent</code></td></tr><tr><td><code>at:put:</code></td><td>adds key <code>at:</code> with value <code>put:</code></td></tr><tr><td><code>bindingOf:</code></td><td>answers <code>Assocication</code> for argument key</td></tr><tr><td><code>bindingsDo:</code></td><td>same as <code>associationsDo</code></td></tr><tr><td><code>hasBindingThatBeginsWith:</code></td><td>answers <code>Boolean</code> indicating if any <code>String</code> key begins with argument; error if non-<code>String</code> keys</td></tr><tr><td><code>includesKey:</code></td><td>answers <code>Boolean</code> indicating if argument key is present</td></tr><tr><td><code>keys</code></td><td>answers <code>Array</code> of all keys</td></tr><tr><td><code>keysAndValuesDo:</code></td><td>evaluates argument block for each key/value pair passing key and value arguments to block</td></tr><tr><td><code>keysAndValuesRemove:</code></td><td>removes all key/value pairs that satisfy argument block, passing key and value arguments to block</td></tr><tr><td><code>keysDo:</code></td><td>evaluates argument block for each key</td></tr><tr><td><code>removeKey:</code></td><td>removes key/value pair for argument key</td></tr><tr><td><code>removeKey:ifAbsent:</code></td><td>removes key/value pair for <code>removeKey:</code> key; answers removed value if present; otherwise answers <code>ifAbsent:</code> value</td></tr><tr><td><code>select:</code></td><td>answers new <code>Dictionary</code> containing all key/value pairs whose value satisfies argument block</td></tr><tr><td><code>values</code></td><td>answers <code>Array</code> of all values</td></tr><tr><td><code>valuesDo:</code></td><td>evaluates argument block for each value</td></tr></tbody></table><h2 id="ordereddictionary" tabindex="-1">OrderedDictionary</h2><p>The <code>OrderedDictionary</code> class is a subclass of <code>Dictionary</code>. Instances remember the order in which entries were added. Iteration methods like <code>do:</code>, <code>keysDo:</code> and <code>associationsDo:</code> and <code>valuesDo:</code>. process the entries in that order.</p><p>The following code demonstrates creating an <code>OrderedDictionary</code> whose values are objects from the <code>Dog</code> class defined the <code>SortedCollection</code> section above, and printing their names.</p><pre class="language-smalltalk"><code class="language-smalltalk">comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">.</span><br>dict <span class="token operator">:=</span> OrderedDictionary <span class="token keyword">new</span><span class="token punctuation">.</span><br>dict at<span class="token punctuation">:</span> comet name put<span class="token punctuation">:</span> comet<span class="token punctuation">.</span><br>dict at<span class="token punctuation">:</span> oscar name put<span class="token punctuation">:</span> oscar<span class="token punctuation">.</span><br>dogs do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span></code></pre><p>The output in the Transcript will be &quot;Comet&quot; followed by &quot;Oscar&quot;.</p><h2 id="indexable-classes" tabindex="-1">Indexable Classes</h2><p>Classes whose instances respond to messages like <code>#at:put:</code> are &quot;indexable&quot;. This means they hold a collection of objects that are accessed by index. Such classes are defined with by sending the message <code>#variableSubclass:instanceVariableNames:classVariableNames:poolDictionaries:category:</code> to another class. That is handled by an instance method in the class <code>Class</code>. An example of a class that is defined this way is <code>Array</code>.</p><p>Also see the <code>Class</code> instance methods whose names begin with <code>variableByteSubclass:</code>, <code>variableDoubleByteSubclass:</code>, <code>variableDoubleWordSubclass:</code>, and <code>variableWordSubclass:</code>.</p><p>See the instance method <code>instSpec</code> in the <code>Behavior</code> class which defines values for the <code>format</code> instance variable. The values <code>2</code> and <code>3</code> indicate that the object in indexable.</p><h2 id="identity-collections" tabindex="-1">Identity Collections</h2><p>The collection classes <code>IdentityBag</code>, <code>IdentityDictionary</code>, and <code>IdentitySet</code> are similar to their non-identity counterparts, but differ in that elements are compared using <code>==</code> instead of <code>=</code>. This means it checks to see if they are the same object in memory rather than checking for equal values.</p><h2 id="weak-collections" tabindex="-1">Weak Collections</h2><p>The collection classes <code>WeakArray</code>, <code>WeakKeyDictionary</code>, <code>WeakIdentityKeyDictionary</code>, <code>WeakValueDictionary</code>, <code>WeakSet</code>, and <code>WeakIdentitySet</code> are similar to their non-week counterparts, but they differ in that objects to which they refer are not prevented from being garbage collected if they are only referred to by weak collections.</p><p>If an attempt is made to use an element in one of these collections that has been gargage collected, its value will be <code>nil</code>.</p><p>For example, create a class named <code>WeakSetDemo</code> with the instance variable <code>set</code> and the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">comet</span> <span class="token variable">oscar</span> <span class="token punctuation">|</span></span><br>    comet <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>    oscar <span class="token operator">:=</span> Dog name<span class="token punctuation">:</span> <span class="token string">'Oscar'</span> breed<span class="token punctuation">:</span> <span class="token string">'GSP'</span><span class="token punctuation">.</span><br>    set <span class="token operator">:=</span> WeakSet newFrom<span class="token punctuation">:</span> <span class="token punctuation">{</span>comet<span class="token punctuation">.</span> oscar<span class="token punctuation">}</span><span class="token punctuation">.</span><br>    set do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:dog</span> <span class="token punctuation">|</span></span> dog name print<span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>first<br>    <span class="token operator">^</span> set asArray first</code></pre><p>Enter the following lines in a Workspace, select them, and &quot;Print it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk">demo <span class="token operator">:=</span> WeakSetDemo <span class="token keyword">new</span><span class="token punctuation">.</span> <span class="token comment">"invokes initialize"</span><br>demo first</code></pre><p>The result will be <code>nil</code> because the <code>comet</code> and <code>oscar</code> objects will be garbage collected after the <code>initialize</code> method executes.</p><h2 id="conversions" tabindex="-1">Conversions</h2><p>Many collection classes have instance methods whose names begin with &quot;as&quot; that create a different type of collection containing its elements.</p><p>Highlights include:</p><ul><li><code>asArray</code>: answers <code>Array</code> representation of any kind of <code>Collection</code></li><li><code>asBag</code>: answers <code>Bag</code> representation of any kind of <code>Collection</code></li><li><code>asDictionary</code>: answers <code>Dictionary</code> representation of any kind of <code>Collection</code> whose elements are <code>Association</code> instances</li><li><code>asOrderedCollection</code>: answers an <code>OrderedCollection</code> representation of any kind of <code>Collection</code></li><li><code>asSet</code>: answers a <code>Set</code> representation of any <code>Collection</code>, removing duplicates</li><li><code>asSortedCollection</code>: answers <code>SortedCollection</code> representation of any <code>Collection</code></li></ul><p>In addition, the <code>asJsonString</code> method answers a JSON <code>String</code> representation of any kind of collection.</p><h2 id="common-abbreviations" tabindex="-1">Common Abbreviations</h2><p>For method arguments and variables whose values are expected to be a kind of collection, it's useful to include the least restrictive kind of collection that is suitable in the name of the argument or variable. For example, it's rarely the case that an <code>Array</code> is required and often the case that any kind of <code>SequenceableCollection</code> will suffice.</p><p>The names of many of the collection classes are long. I recommend using the following abbreviations in variable names.</p><table><thead><tr><th>Class Name</th><th>Abbreviation</th></tr></thead><tbody><tr><td><code>Array</code></td><td><code>Array</code></td></tr><tr><td><code>Bag</code></td><td><code>Bag</code></td></tr><tr><td><code>Collection</code></td><td><code>Coll</code></td></tr><tr><td><code>Dictionary</code></td><td><code>Dict</code></td></tr><tr><td><code>IdentityDictionary</code></td><td><code>IdDict</code></td></tr><tr><td><code>OrderedCollection</code></td><td><code>Ordered</code></td></tr><tr><td><code>SequenceableCollection</code></td><td><code>Seq</code></td></tr><tr><td><code>Set</code></td><td><code>Set</code></td></tr><tr><td><code>SortedCollection</code></td><td><code>Sorted</code></td></tr></tbody></table></article>