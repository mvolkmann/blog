<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>FFI</h2><aside><nav class="toc"><ol><li><a href="#example">Example</a></li></ol></nav></aside><article><p>The Foreign Function Interface (FFI) enables calling code written in other programming languages.</p><p>TODO: Does this work with any languages other than C?</p><p>See <a href="https://itchyeyes.net/articles/cuis-smalltalk.html" target="_blank">Using the FFI</a>.</p><p>TODO: Add detail on this.</p><h2 id="example" tabindex="-1">Example</h2><p>Let's create a shared library containing simple C functions.</p><p>Here is the file <code>mylib.c</code>:</p><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><br><br><span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello from a shared library!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>To build a shared library from this, enter the command <code>clang -dynamiclib -o libmylib.dylib mylib.c</code>.</p></article>