<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Morphic</h2><aside><nav class="toc"><ol><li><a href="#morphs">Morphs</a></li><li><a href="#creating-and-modifying-morphs">Creating and Modifying Morphs</a></li><li><a href="#halo">Halo</a></li><li><a href="#desktop-color">Desktop Color</a></li><li><a href="#embedding">Embedding</a></li><li><a href="#layoutmorph">LayoutMorph</a></li><li><a href="#editing-characteristics">Editing Characteristics</a></li><li><a href="#coordinate-systems">Coordinate Systems</a></li><li><a href="#creating-a-custom-morph">Creating a Custom Morph</a></li><li><a href="#morphiccanvas">MorphicCanvas</a></li><li><a href="#boxedmorph">BoxedMorph</a></li><li><a href="#fonts">Fonts</a></li><li><a href="#button-labels">Button Labels</a></li><li><a href="#button-issue">Button Issue</a></li><li><a href="#button-demo-in-cuis">Button Demo in Cuis</a></li><li><a href="#svg">SVG</a></li><li><a href="#full-screen-buttons">Full Screen Buttons</a></li><li><a href="#morph-methods">Morph Methods</a></li><li><a href="#popupmenu">PopUpMenu</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#redrawing">Redrawing</a></li><li><a href="#annoynances">Annoynances</a></li><li><a href="#todo-app">Todo App</a></li></ol></nav></aside><article><p>Morphic is a GUI framework that is included into popular Smalltalk images such as Squeak, Pharo, and Cuis. It defines user interfaces with &quot;morphs&quot; which are objects that know how to display themselves in the Smalltalk environment. They are what other graphical systems refer to as widgets or components.</p><p>For a great introduction to Morphic, see <a href="https://www.youtube.com/watch?v=62baNn3c56Y" target="_blank">Holistic computing with Smalltalk and Morphic. Part 1</a>.</p><p><a href="http://www.jvuletich.org/Morphic3/Morphic3-201006.html" target="_blank">Morphic 3</a> was developed by Juan Vuletich and is used in Cuis Smalltalk. It adds display resolution independence, float coordinates, modeling of coordinate systems as objects, alias free rendering based on signal processing theory, use of textures and photos, zoomable user interfaces (not tied to pixel density), and vector graphics.</p><h2 id="morphs" tabindex="-1">Morphs</h2><p>Any morph be embedded in another. However, some morphs (such as <code>WorldMorph</code> and <code>LayoutMorph</code>) are more intended to have submorphs than others.</p><p>Each morph holds a reference to its parent morph in its instance variable <code>owner</code>. Each morph stores its children (embedded) morphs in its <code>Array</code> instance variable <code>submorphs</code>.</p><p>Morphic uses the term &quot;extent&quot; to describe the width and height of a morph. It is represented by a <code>Point</code> object with an <code>x</code> instance variable that holds the width and a <code>y</code> instance variable that holds the height.</p><p>The location of a morph is represented by a <code>MorphicTranslation</code> object that has the instance properties <code>deltaX</code> and <code>deltaY</code>.</p><p>Each morph can store additional properties in its <code>properties</code> instance variable which holds a reference to a <code>Dictionary</code> of key/value pairs.</p><h2 id="creating-and-modifying-morphs" tabindex="-1">Creating and Modifying Morphs</h2><p>Only a small set of morphs are provided by default. The package UI-MetaProperties is a good source of additional morphs. To install it:</p><ul><li><p>Clone the <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-UI">https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-UI</a> repository into the same directory as the Cuis-Smalltalk-Dev repository.</p></li><li><p>Open a Workspace.</p></li><li><p>Enter <code>Feature require: 'UI-MetaProperties'</code> and &quot;Do it&quot;.</p><p>This installs the following other packages that can also be installed individually:</p><ul><li>Complex</li><li>UI-Color-Panel</li><li>UI-Components</li><li>UI-Layout-Panel</li><li>UI-Packager</li><li>UI-Shapes</li></ul></li><li><p>The UI-Compoents package installed above installs the following other packages:</p><ul><li>UI-Click-Select</li><li>UI-Core</li><li>UI-DragAndDrop</li><li>UI-Entry</li><li>UI-Panel</li><li>UI-Widgets</li></ul></li></ul><p>The set of &quot;Basic&quot; morphs will now include <code>BoxedMorph</code>, <code>EllipseMorph</code>, <code>FrameMorph</code>, <code>ImageMorph</code>, <code>LabelMorph</code>, <code>LineMorph</code>, <code>PointerLineMorph</code>, <code>Sonogram</code>, and <code>TileResizeMorph</code>. TODO: Why does selecting <code>Sonogram</code> lock up the image, requiring a Force Quit?</p><p>To create a morph:</p><ul><li>Open the World menu.</li><li>Select &quot;New morph...&quot;.</li><li>In the dialog that appears, select a category of morphs and then a specific kind (ex. <code>BoxedMorph</code>).</li><li>The morph will appear attached to the cursor (uses the <code>Morph</code> method <code>openInHand</code>).</li><li>Move the cursor to the location where the morph should be placed and click to drop it.</li></ul><p>To modify an existing morph:</p><ul><li>cmd-click a morph to open its halo.</li><li>Click the orange Explore handle to open an Explorer OR Click the orange Debug handle and select &quot;inspect morph&quot; to open an Inspector.</li><li>Send a message to <code>self</code> in the bottom pane of the Explorer or the Inspector to change a property of the morph. For example, <code>self color: Color red</code>.</li></ul><p>Alternatively, to modify a morph from a Workspace:</p><ul><li>cmd-click a morph to open its halo.</li><li>Click the blue Menu handle on the top and select &quot;copy to clipboard&quot;.</li><li>Open a Workspace window.</li><li>Press cmd-v to paste the morph reference from the clipboard.</li><li>Send messages to the morph reference to modify it.</li></ul><p>To change the colors used by a morph from its halo:</p><ul><li>Ensure that the &quot;UI-Color-Panel&quot; package is installed (a dependency of the &quot;UI-MetaProperties&quot; package).</li><li>cmd-click a morph to open its halo.</li><li>Click the blue menu button on the top and select &quot;change color...&quot;.</li><li>A window titled &quot;Click-Select a Color&quot; will appear attached to the cursor.</li><li>Position the window by moving the cursor and click to drop it.</li><li>Click a color swatch.</li><li>A menu will appear with the options &quot;Cancel&quot;, &quot;adoptWidgetsColor:&quot;, &quot;color:&quot;, and &quot;borderColor:&quot;. Select an option to change that color property of the morph. Some morphs don't support all the options. For example, &quot;color&quot; of a <code>LabelMorph</code> can be changed, but it does not have a border. TODO: What does &quot;adoptWidgetsColor:&quot; do?</li></ul><p>To explicitly set the size of a morph, send it the <code>morphExtent:</code> message with a <code>Point</code> value that represents the new width and height. For example, <code>morph morphExtent: 200@100</code>.</p><p>See my Morphic demos in package <code>Volkmann</code> in the classes <code>VButtonDemo</code> and <code>VGreet</code>. In a Workspace, enter <code>VButtonDemo new</code> or <code>VGreet new</code> and &quot;Do it&quot;.</p><h2 id="halo" tabindex="-1">Halo</h2><p>A morph halo is a set of circle buttons, referred to as &quot;handles&quot;, that surround a morph. Each handle changes the morph in some way or reveals information about it. Hover over a handle to see a tooltip that describes its purpose.</p><p>To open the halo for a morph, cmd-click it in Cuis or option-click it in Squeak. If the item is embedded in other morphs, repeat this multiple times until a halo appears around the desired morph.</p><p>The class of the morph will be displayed at the bottom of the morph.</p><p><img alt="Smalltalk halo" style="width: 50%" src="/blog/assets/smalltalk-halo.png?v=1.1.1"></p><p>The following buttons are provided:</p><table><thead><tr><th>Button</th><th>Location</th><th>Tooltip</th><th>Purpose</th></tr></thead><tbody><tr><td>red circle with white &quot;x&quot;</td><td>upper-left</td><td>Remove</td><td>removes the item</td></tr><tr><td>blue circle with white document</td><td>top</td><td>Menu</td><td>opens menu &quot;A&quot; (1)</td></tr><tr><td>black circle with house</td><td>top</td><td>Pick up</td><td>drag to move the item within its parent (2)</td></tr><tr><td>brown circle with resize icon</td><td>top</td><td>Move</td><td>drag to move the item out of its parent</td></tr><tr><td>green circle with copy icon</td><td>upper-right</td><td>Duplicate</td><td>drag to position a duplicate of the item</td></tr><tr><td>orange circle with wrench</td><td>right side</td><td>Debug</td><td>opens a menu of debugging options</td></tr><tr><td>blue circle with magnifier glass</td><td>right side</td><td>Change Scale</td><td>drag to change scale of item</td></tr><tr><td>yellow circle with resize icon</td><td>lower-right</td><td>Change Size</td><td>drag to resize the item</td></tr><tr><td>light blue circle with question mark</td><td>bottom</td><td>Help</td><td>click and hold to display a related tooltip (3)</td></tr><tr><td>blue circle with rotate icon</td><td>lower-left</td><td>Rotate</td><td>drag to rotate item (4)</td></tr><tr><td>dull yellow circle with odd shape</td><td>left side</td><td>Collapse</td><td>click to collapse (hide) the item (5)</td></tr><tr><td>orange circle with wrench</td><td>left side</td><td>Explore</td><td>opens an &quot;Explore&quot; window (6)</td></tr></tbody></table><p>A morph can also be dragged directly without opening its halo and using the drag buttons. This only works if the area that is dragged does not process mouse events. For example, you cannot drag a morph that contains a button by dragging the button.</p><p>(1) This menu contains the following options:</p><ul><li>send to back</li><li>bring to front</li><li>embed into &gt;</li><li>change color...</li><li>halo actions...</li><li>checkbox for &quot;resist being picked up&quot;</li><li>checkbox for &quot;be locked&quot;</li><li>copy to clipboard</li><li>export...</li><li>debug...</li></ul><p>It is often useful to click the red pin in the upper-right of the menu so it remains open if you click outside it. This enables dragging values onto it (such as color swatches) to change the values of instance variables. If you forget the morph to which a pinned menu belongs, click &quot;show target halo&quot; to open the halo of the morph.</p><p>To change the value of an instance variable in the menu, such as <code>borderColor</code>, click it and use the provided editor to change its value. When changing a color, select a color palette and drag a color swatch onto the instance variable.</p><p><img alt="Crayon Colors palette" src="/blog/assets/cuis-crayon-colors-palette.png?v=1.1.1" style="width: 100%"></p><p>Color swatches can be dragged from one menu to another to copy colors. Fonts can also be dragged from one menu to another to copy fonts.</p><p>(2) If the morph is embedded in another morph, this changes the owner to world, which unembeds it.</p><p>(3) It seems most of the help tooltips default to &quot;Help not yet supplied&quot;. To edit the help text, click the orange circle on the right, select &quot;edit balloon help&quot;, and modify the help text.</p><p>(4) To change the center of rotation of a morph, click the &quot;Explore&quot; handle, enter the following in the bottom pane, and &quot;Do it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token keyword">self</span> setProperty<span class="token punctuation">:</span> <span class="token symbol">#rotationCenter</span> toValue<span class="token punctuation">:</span> newX <span class="token operator">@</span> newY<span class="token punctuation">.</span></code></pre><p>(5) To restore a collapsed item, click it's thumbnail in the bottom bar.</p><p>(6) &quot;Explore&quot; windows enable viewing data associated with an item such as its location, extent (width and height), and color. Send messages to <code>self</code> in the bottom pane to modify the morph. To add a method to the mo</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-Inspectors.html" target="_blank">A brief introduction to Inspectors</a>.</p><h2 id="desktop-color" tabindex="-1">Desktop Color</h2><p>One way to change the desktop color is to:</p><ul><li>Right-click the desktop to open its halo.</li><li>Click the blue menu button.</li><li>Select debug...inspect morph to open an Inspect window.</li><li>Click in the bottom pane of the Inspect window.</li><li>Enter <code>self color: Color red</code> or use some other color name.</li><li>&quot;Do it&quot;.</li></ul><p>This works with all colors except <code>transparent</code> and alpha values are ignored.</p><h2 id="embedding" tabindex="-1">Embedding</h2><p>To embed a morph into another (such as a LayoutMorph) so they are treated as a single unit and can be positioned together:</p><ul><li>Drag a morph on top of its intended parent morph.</li><li>Open the halo of the morph.</li><li>Click the blue Menu handle.</li><li>Hover over &quot;embed into&quot; to display a popup containing the names of every morph under the one being embedded. Hover over each option to highlight the corresponding morph, which helps to verify the correct selection.</li><li>Click the name of the morph that will become the parent. Often the intended parent morph is a &quot;LayoutMorph&quot;.</li></ul><h2 id="layoutmorph" tabindex="-1">LayoutMorph</h2><p>A <code>LayoutMorph</code> actively manages the position and size of its submorphs based on the following instance properties:</p><ul><li><p><code>direction</code>: <code>#horizontal</code> for a row or <code>#vertical</code> for a column</p></li><li><p><code>separation</code>: a <code>Measure</code></p><p>By default, there will be no separation between the submorphs. To add separation, send the <code>#separationX:</code>, <code>#separationY</code>, or <code>#separation:</code> (both x and y) messages. For example, <code>myLayout separation: 20</code>.</p></li><li><p><code>axisEdgeWeight</code>: a number from 0 to 1</p><p>By default, all the submorphs will be pushed to the left of a row or top of a column. To change this, send the <code>#axisEdgeWeight:</code> message with a number from 0 to 1. A value zero pushes to the left/top, a value one pushes to the right/bottom, and a value of 0.5 centers.</p></li><li><p><code>layoutSpec</code>: an optional <code>LayoutSpec</code> object that specifies how to layout children on the off axis (opposite of <code>direction</code>) using instance variables like <code>offAxisEdgeWeight</code></p></li></ul><p>Practically any layout can be achieved by nesting instances of this class.</p><p>An instance can be created with:</p><ul><li><p><code>LayoutMorph newColumn</code></p></li><li><p><code>LayoutMorph newRow</code></p></li><li><p><code>LayoutMorph new</code></p><p>This calls <code>newRow</code> and sets the background color to <code>Color red alpha: 0.2</code>.</p></li></ul><p>For example, <code>myLayout := Layout newRow</code>.</p><p>To add a submorph to a <code>LayoutMorph</code>, send it the <code>#addMorph:</code> message. For example, <code>myLayout addMorph: EllipseMorph new</code> and <code>myLayout addMorph: BoxedMorph new</code>.</p><p>If the UI-Layout-Panel package is installed, all of these values can be specified interactively.</p><ul><li>Open the halo for a <code>LayoutMorph</code>.</li><li>Click the blue menu button.</li><li>Select &quot;edit me (a LayoutMorph)&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied withthe changes, close the dialog.</li></ul><p><img alt="Cuis Morphic Layout dialog" style="width: 75%" src="/blog/assets/cuis-morphic-layout-dialog.png?v=1.1.1"></p><h2 id="editing-characteristics" tabindex="-1">Editing Characteristics</h2><p>Many chararacteristics of a morph can be edited by opening its halo and clicking its blue menu button. To get a halo for a submorph, cmd-click repeatedly until the halo appears around the target morph. The following menu will appear:</p><p><img alt="Cuis halo blue menu" style="width: 60%" src="/blog/assets/cuis-halo-blue-menu.png?v=1.1.1"></p><p>Click the push pin at the upper-right of the menu to keep the menu open, which simplifies making multiple changes.</p><p>To change the border width, size (<code>morphExtent</code>), or position (<code>morphPosition</code>) of a morph:</p><ul><li>Click <code>borderWidth</code>, <code>morphExtent</code>, or <code>morphPosition</code>.</li><li>Modify the numbers in the dialog that appears.</li><li>Click the &quot;Accept&quot; to save the changes or the &quot;Cancel&quot; button to discard them.</li></ul><p>To change the border color or color of a morph:</p><ul><li>Click &quot;borderColor&quot; or &quot;color&quot;.</li><li>Select one of the following color sets to open a dialog containing color swatches: CSS3 (Web) Colors, Crayon Colors, NBSISCC Colors, XKCD Colors, or ColorMix Editor (opens a Color Editor dialog). A Color Editor dialog enables selecting a color with RGB, HSL, and transparency. For more detail on these color dictionaries, see <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/blob/master/Packages/Features/NamedColors/README.md" target="_blank">Cuis-NamedColors</a>.</li><li>Drag a color swatch from the dialog onto the swatch for &quot;borderColor&quot; or &quot;color&quot;.</li><li>Close the color swatch dialog.</li><li>Close the morph menu.</li></ul><p>To edit the width, height, and off-axis edge weight of a submorph</p><ul><li>Open the halo for a submorph.</li><li>Click the blue menu button.</li><li>Select &quot;edit my LayoutSpec&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied withthe changes, close the dialog.</li></ul><p><img alt="Cuis edit my LayoutSpec" style="width: 80%" src="/blog/assets/cuis-edit-my-layoutspec.png?v=1.1.1"></p><p>For more detail on layouts, see <a href="https://github.com/Cuis-Smalltalk/Learning-Cuis/blob/master/LayoutTour.md" target="_blank">Exploring morph layouts in Cuis</a>.</p><h2 id="coordinate-systems" tabindex="-1">Coordinate Systems</h2><p>The world coordinate system places (0, 0) in the upper-left corner of the main window. X values increase going right and Y values increase going down.</p><p>Each morph has its own local coordinate system with (0, 0) in the upper-left corner of the morph. This coordinate system is used for drawing the morph.</p><p>Changing the translation, rotation, or scale of a morph changes its local coordinate system.</p><p>Positive rotations are clockwise and negative rotations are counter-clockwise.</p><h2 id="creating-a-custom-morph" tabindex="-1">Creating a Custom Morph</h2><p>Custom morphs are typically implemented as subclasses of the <code>PlacedMorph</code> class and implement the <code>drawOn:</code> method. They can be directly dragged to new locations. Otherwise dragging requires opening the morph halo and using the Move handle.</p><p>The following example includes the instance variable <code>extent</code> to allow the width and height to be used to determine what to draw.</p><pre class="language-smalltalk"><code class="language-smalltalk">PlacedMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#CanvasDemo</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'extent'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>The instance method <code>drawOn:</code> is passed a <code>VectorCanvas</code> object. For example, the following draws a green rectangle with a red border and a red line from its upper-left to lower-right. It has a default width of 100, height of 100, and default location of the upper-left corner of the world.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">x1</span> <span class="token variable">x2</span> <span class="token variable">y1</span> <span class="token variable">y2</span> <span class="token punctuation">|</span></span><br>    x1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    y1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    x2 <span class="token operator">:=</span> extent x<span class="token punctuation">.</span><br>    y2 <span class="token operator">:=</span> extent y<span class="token punctuation">.</span><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">10</span> color<span class="token punctuation">:</span> Color red fillColor<span class="token punctuation">:</span> Color green do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas<br>            moveTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<br>    <span class="token punctuation">]</span><br><br>extent<br>    <span class="token operator">^</span> extent<br><br>extent<span class="token punctuation">:</span> aPoint<br>    extent <span class="token operator">:=</span> aPoint<br><br>initialize<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    extent <span class="token operator">:=</span> <span class="token number">100</span><span class="token operator">@</span><span class="token number">100</span> <span class="token comment">"default size"</span><br>    <span class="token comment">"Place in upper-left corner by default."</span><br>    <span class="token keyword">self</span> location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>To try this:</p><ul><li>Open a Workspace.</li><li>Enter <code>(CanvasDemo new extent: 300@400) openInHand.</code></li><li>Press cmd-d to &quot;Do it&quot;.</li><li>Move the cursor to where the morph should be dropped.</li><li>Click to drop it.</li></ul><p><code>VectorCanvas</code> is a subclass of <code>AbstractVectorCanvas</code>, which is a subclass of <code>MorphicCanvas</code>. The <code>MorphicCanvas</code> class defines several methods whose names begin with <code>drawString:</code> method.</p><p>To draw text in this morph that is centered, add the following in the <code>drawOn:</code> method:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyPointSize<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">.</span><br>aCanvas<br>    drawString<span class="token punctuation">:</span> <span class="token string">'Hello'</span><br>    atCenterXBaselineY<span class="token punctuation">:</span> x1 <span class="token operator">+</span> x2 <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">@</span> <span class="token punctuation">(</span>y1 <span class="token operator">+</span> y2 <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><br>    font<span class="token punctuation">:</span> font <span class="token comment">"pass nil to use default font"</span><br>    color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">.</span></code></pre><p>Instances of <code>PlacedMorph</code> subclasses have a <code>location</code> instance variable. If the morph only has a location and has not be rotated or scaled then <code>location</code> will hold a <code>MorphicTranslation</code> object with <code>deltaX</code> and <code>deltaY</code> instance variables. If the morph has been rotated or scaled then <code>location</code> will hold an <code>AffineTranslation</code> object with <code>scale</code>, <code>degrees</code>, and <code>translation</code> instance variables.</p><p>By default, morphs rotate about their center. To change this, override the <code>rotationCenter</code> method to return a different <code>Point</code>. For example, the following causes rotation to occur around the upper-left corner:</p><pre class="language-smalltalk"><code class="language-smalltalk">rotationCenter<br>    <span class="token operator">^</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span></code></pre><p>The <code>Morph</code> method <code>openInHand</code> causes the morph to appear and be attached to the cursor. Move the cursor to the location where it should be placed and click to drop it.</p><p>Alternative, send the message <code>#openInWorld</code> to cause the morph to appear and not be attached to the cursor. If the location of the morph was specified by sending the <code>#location#</code> message to it with a <code>MorphicTranslation</code> argument then it will be placed at that location. Otherwise it will be placed at a random location.</p><p>Drawing-related methods like <code>drawOn:</code> should be placed in the &quot;drawing&quot; method category.</p><h2 id="morphiccanvas" tabindex="-1">MorphicCanvas</h2><p>The <code>MorphicCanvas</code> class has many subclasses including <code>BitBltBoundsFinderCanvas</code>, <code>BitBltCanvas</code>, <code>BoundsFinderCanvas</code>, <code>HybridCanvas</code>, and <code>VectorCanvas</code>.</p><p><code>BitBltCanvas</code> is a legacy class that doesn't support vector graphics operations, anti-aliasing, or zooming. But it provides great performance due to its simplicity.</p><p>TODO: Is it worthwhile to learn about any of these besides <code>VectorCanvas</code>?</p><h2 id="boxedmorph" tabindex="-1">BoxedMorph</h2><p>The <code>BoxedMorph</code> class is a subclass of the <code>PlacedMorph</code> class that adds the instance variables <code>extent</code> (width and height), <code>color</code>, <code>borderWidth</code>, and <code>borderColor</code>. It is intended for morphs that are rectangular.</p><p>TODO: The class comment says &quot;DON'T subclass from here.&quot; Why?</p><p>All the developer tool windows are subclasses of <code>BoxedMorph</code>. For example, System Browsers are implemented by the <code>BrowserWindow</code> class which has the following inheritance hierarchy.</p><ul><li><code>Object</code><ul><li><code>Morph</code><ul><li><code>PlacedMorph</code><ul><li><code>BoxedMorph</code><ul><li><code>PluggableMorph</code><ul><li><code>SystemWindow</code><ul><li><code>CodeWindow</code><ul><li><code>BrowserWindow</code></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="fonts" tabindex="-1">Fonts</h2><p>To see a popup list of the installed fonts and fonts available to install, enter <code>FontFamily promptUser</code> in a Workspace and &quot;Do it&quot;. The installed font names are displayed using their font. To install a font, click its checkbox under &quot;Available to install&quot;. The list may include the following:</p><ul><li>Alex Brush</li><li>Amaranth</li><li>CMU Typewriter Text</li><li>DejaVu Sans (default)</li><li>JetBrains Mono NL</li><li>Kiwi Maru Light</li><li>Kurinto Sans</li><li>Learning Curve</li><li>Noto Sans EqyptHiero</li><li>Parc Place Legacy</li><li>Source Sans 3</li></ul><p>The font files are located in the <code>Cuis-Smallltalk-Dev/TrueTypeFonts</code> directory. To add a new font, create a subdirectory whose name is the font name and place <code>.ttf</code> files for each variation of the font inside it.</p><p>To set the default font size used in the development environment:</p><pre class="language-smalltalk"><code class="language-smalltalk">Preferences at<span class="token punctuation">:</span> <span class="token symbol">#defaultFontSize</span> put<span class="token punctuation">:</span> <span class="token number">14</span></code></pre><p>To set the default font family used in the development environment:</p><pre class="language-smalltalk"><code class="language-smalltalk">PreferenceSet setDefaultFont<span class="token punctuation">:</span> <span class="token string">'Alex Brush'</span></code></pre><p>If an invalid font name is used, the environment will lock up. TODO: Report this!</p><p>To get a <code>Dictionary</code> of available font families:</p><pre class="language-smalltalk"><code class="language-smalltalk">fontFamilies <span class="token operator">:=</span> FontFamily availableFamilies</code></pre><p>To get the default font:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyAndPointSize</code></pre><p>To get the default font with a specified point size:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyPointSize<span class="token punctuation">:</span> <span class="token number">18</span></code></pre><p>To get a font for a specific family and point size:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily familyName<span class="token punctuation">:</span> <span class="token string">'Alex Brush'</span> pointSize<span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">.</span></code></pre><h2 id="button-labels" tabindex="-1">Button Labels</h2><p>Button labels are automatically shortened to fit within the button width using the <code>String</code> instance method <code>squeezeTo:</code>. It begins by removing spaces from right to left. It then removes vowels from right to left. Finally, it removes consonants from right to left and adds an ellipsis at the end.</p><h2 id="button-issue" tabindex="-1">Button Issue</h2><p>The class <code>PluggableButtonMorph</code> uses the value of <code>Theme current buttonLabel</code> as the color for the label on all instances. But sending <code>#color:</code> to an instance changes its background color. Depending the background color selected, this can result in poor contrast. It also uses an embossed font for the label.</p><p>A way to fix this, suggested by Mariano Montone, is to create a subclass of <code>PluggableButtonMorph</code> as follows:</p><ol><li><p>Define the following new class:</p><pre class="language-smalltalk"><code class="language-smalltalk">PluggableButtonMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#VButtonMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'labelColor'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Define the following instance methods in the <code>VButtonMorph</code> class:</p><pre class="language-smalltalk"><code class="language-smalltalk">labelColor<br>    <span class="token operator">^</span>labelColor ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>Theme current buttonLabel<span class="token punctuation">]</span><br><br>labelColor<span class="token punctuation">:</span> anObject<br>    labelColor <span class="token operator">:=</span> anObject</code></pre></li><li><p>Override <code>VButtonMorph</code> instance method <code>drawEmbossedLabelOn:</code> by copying the same method from <code>PluggableButtonMorph</code> and modifying two lines, the one that sets <code>colorForLabel</code> and the one that sets <code>embossed</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawEmbossedLabelOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">availableW</span> <span class="token variable">center</span> <span class="token variable">colorForLabel</span> <span class="token variable">f</span> <span class="token variable">l</span> <span class="token variable">labelMargin</span> <span class="token variable">targetSize</span> <span class="token variable">w</span> <span class="token variable">x</span> <span class="token variable">y</span> <span class="token punctuation">|</span></span><br>    label ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">"The next line was modified."</span><br>        colorForLabel <span class="token operator">:=</span> <span class="token keyword">self</span> enableLabelColorWith<span class="token punctuation">:</span> <span class="token keyword">self</span> labelColor<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> isPressed<br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                <span class="token keyword">self</span> mouseIsOver<br>                    ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.10</span> brightness<span class="token punctuation">:</span> <span class="token number">0.10</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> colorForLabel <span class="token operator">:=</span> colorForLabel adjustSaturation<span class="token punctuation">:</span> <span class="token number">0.0</span> brightness<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.07</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>        f <span class="token operator">:=</span> <span class="token keyword">self</span> fontToUse<span class="token punctuation">.</span><br>        center <span class="token operator">:=</span> extent <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">.</span><br>        labelMargin <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">.</span><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> label<span class="token punctuation">.</span><br>        availableW <span class="token operator">:=</span> extent x <span class="token operator">-</span> labelMargin <span class="token operator">-</span> labelMargin<span class="token punctuation">.</span><br>        availableW <span class="token operator">>=</span> w<br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> l <span class="token operator">:=</span> label <span class="token punctuation">]</span><br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                x <span class="token operator">:=</span> labelMargin<span class="token punctuation">.</span><br>                targetSize <span class="token operator">:=</span> label size <span class="token operator">*</span> availableW <span class="token operator">//</span> w<span class="token punctuation">.</span><br>                l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize<span class="token punctuation">.</span><br>                <span class="token punctuation">(</span>f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">)</span> <span class="token operator">></span> availableW ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                    targetSize <span class="token operator">:=</span> targetSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span><br>                    l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize <span class="token punctuation">]</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">.</span><br>        x <span class="token operator">:=</span> center x <span class="token operator">-</span> <span class="token punctuation">(</span>w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        y <span class="token operator">:=</span> center y <span class="token operator">-</span> <span class="token punctuation">(</span>f lineSpacing <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        aCanvas<br>            drawString<span class="token punctuation">:</span> l<br>            at<span class="token punctuation">:</span> x<span class="token operator">@</span>y<br>            font<span class="token punctuation">:</span> f<br>            color<span class="token punctuation">:</span> colorForLabel<br>            <span class="token comment">"The next line was modified."</span><br>            embossed<span class="token punctuation">:</span> <span class="token boolean">false</span><br>    <span class="token punctuation">]</span></code></pre></li></ol><h2 id="button-demo-in-cuis" tabindex="-1">Button Demo in Cuis</h2><p>Add this code in a Workspace, select it all, and &quot;Do it&quot;. It uses the class <code>VButtonMorph</code> defined above.</p><pre class="language-smalltalk"><code class="language-smalltalk">label <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><br>  contents<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>  color<span class="token punctuation">:</span> Color white<span class="token punctuation">.</span><br>decBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Decrement'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>incBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span> label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> asString <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>layout <span class="token operator">:=</span> LayoutMorph <span class="token keyword">new</span><br>  addMorph<span class="token punctuation">:</span> decBtn<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> label<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> incBtn<span class="token punctuation">;</span><br>  <span class="token comment">"color: Color transparent ;"</span><br>  separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>  location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">70</span><span class="token operator">@</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   rotateBy<span class="token punctuation">:</span> <span class="token number">15</span> degreesToRadians<span class="token punctuation">;</span><br>  scale<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">;</span><br>  openInWorld<span class="token punctuation">.</span><br><br><span class="token comment">"Add horizontal padding in buttons."</span><br>decBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>incBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>To delete this from the World, enter layoutDelete in the Workspaces and &quot;Do it&quot;, or open the halo for the <code>LayoutMorph</code> and click the red button in the upper-left.</p><h2 id="svg" tabindex="-1">SVG</h2><p>To work with SVG images:</p><ul><li><p>Clone the following Git repositories from Cuis Smalltalk:</p><ul><li><a href="https://github.com/Cuis-Smalltalk/Numerics.git" target="_blank">Numerics</a></li><li><a href="https://github.com/Cuis-Smalltalk/SVG.git" target="_blank">SVG</a></li></ul></li><li><p>Open a Workspace and install the packages <code>LinearAlgebra</code> and <code>SVG</code>.</p><p>For each package, enter <code>Feature require: '{package-name}'</code> and &quot;Do it&quot;.</p></li><li><p>Enter <code>SVGMainMorph exampleTiger openInWorld</code> and &quot;Do it&quot;.</p></li></ul><p>There are many more example class methods in the <code>SVGMainMorph</code> class. To open all the SVG examples, enter <code>SVGMainMorph openAllExamples SVGMainMorph</code> and &quot;Do it&quot;. To delete all those morphs, enter <code>SVGMainMorph allInstancesDo: [ :obj | obj delete ]</code>.</p><p>Another way to open all the SVG examples is to use reflection as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">selectors <span class="token operator">:=</span> SVGMainMorph class allMethodsInCategory<span class="token punctuation">:</span> <span class="token symbol">#examples</span><span class="token punctuation">.</span><br>selectors do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:selector</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span>selector beginsWith<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">(</span>SVGMainMorph perform<span class="token punctuation">:</span> selector<span class="token punctuation">)</span> openInWorld<br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="full-screen-buttons" tabindex="-1">Full Screen Buttons</h2><p>You can add buttons to the World that simplify toggling full screen mode. The following class defines a class method <code>buttons</code> that displays buttons that activate and deactivate full screen mode.</p><p><img alt="Cuis full screen buttons" class="logo" style="width: 20%" src="/blog/assets/cuis-full-screen-buttons.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#VFullScreenButtons</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br>fullScreen<span class="token punctuation">:</span> aBoolean<br>    Display fullScreenMode<span class="token punctuation">:</span> aBoolean<span class="token punctuation">.</span><br>    Display newDepth<span class="token punctuation">:</span> Display depth<br><br>fullScreenOff<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">false</span><br><br>fullScreenOn<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">true</span><br><br>initialize<br>    <span class="token comment">"renders buttons for setting full screen on or off"</span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    LayoutMorph newColumn<br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Full Screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LayoutMorph newRow<br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'On'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOn <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'Off'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> fullScreenOff <span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            color<span class="token punctuation">:</span> Color transparent<br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">@</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        openInWorld</code></pre><h2 id="morph-methods" tabindex="-1">Morph Methods</h2><p>The <code>Morph</code> class provides a large number of instance methods. Highlights are provided in the following table:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>collides</code></td><td>answers <code>Boolean</code> indicating if receiver contour overlaps argument contour</td></tr></tbody></table><p>TODO: Add more methods to this table.</p><h2 id="popupmenu" tabindex="-1">PopUpMenu</h2><p>The class <code>PopUpMenu</code> provides an easy way to render a dialog that displays information, asks the user for confirmation, or ask the user to select an option. It is similar to the JavaScript DOM functions <code>alert</code> and <code>confirm</code>.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">PopUpMenu inform<span class="token punctuation">:</span> <span class="token string">'Hello, World!'</span><span class="token punctuation">.</span><br><br>likesIceCream <span class="token operator">:=</span> PopUpMenu confirm<span class="token punctuation">:</span> <span class="token string">'Do you like ice cream?'</span><span class="token punctuation">.</span><br>likesIceCream print<span class="token punctuation">.</span> <span class="token comment">"prints true or false"</span><br><br>likesIceCream <span class="token operator">:=</span> PopUpMenu<br>    confirm<span class="token punctuation">:</span> <span class="token string">'Do you like ice cream?'</span><br>    trueChoice<span class="token punctuation">:</span> <span class="token string">'Love it!'</span><br>    falseChoice<span class="token punctuation">:</span> <span class="token string">'Not for me'</span><span class="token punctuation">.</span><br>likesIceCream print<span class="token punctuation">.</span><br><br>color <span class="token operator">:=</span> PopUpMenu withCaption<span class="token punctuation">:</span> <span class="token string">'Choose a color.'</span> chooseFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>color print<span class="token punctuation">.</span> <span class="token comment">"prints 1, 2, or 3"</span></code></pre><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>The <code>Morph</code> class provides many methods for event handling in the &quot;events&quot; method category. Examples include:</p><ul><li><code>keyDown:</code></li><li><code>keyStroke:</code></li><li><code>keyUp:</code></li><li><code>keyboardFocusChange:</code></li><li><code>keyboardShortcut:</code></li><li><code>mouseButton1Down:localPosition:</code></li><li><code>mouseButton1Up:localPosition:</code></li><li><code>mouseButton2Down:localPosition:</code></li><li><code>mouseButton2Up:localPosition:</code></li><li><code>mouseButton3Down:localPosition:</code></li><li><code>mouseButton3Up:localPosition:</code></li><li><code>mouseEnter:</code></li><li><code>mouseHover:localPosition:</code></li><li><code>mouseLeave:</code></li><li><code>mouseMove:localPosition:</code></li><li><code>mouseScroll:localPosition:</code></li><li><code>windowEvent:</code></li></ul><p>The mouse event handling methods are only called if the morph is configured to handle them. For example, the <code>keyDown:</code>, <code>keyUp:</code>, and <code>keyStroke:</code> methods are only called if the <code>handlesKeyboard:</code> method is implemented to return <code>true</code>. Also, the <code>mouseEnter:</code> and <code>mouseLeave:</code> methodsare only called if the <code>handlesMouseOver:</code> method is implemented to return <code>true</code>. See comments in each event handling method to determine how to enable it.</p><p>TODO: For a good code example, see <code>VGreet</code> class in the <code>Volkmann</code> category.</p><p>Each of these methods is passed a <code>MorphicEvent</code> object. To get the <code>Morph</code> object that triggered the event, send the message <code>#hand</code> to the event object.</p><p>To move focus to a <code>Morph</code>, send it the message <code>#newKeyboardFocus:</code> with the argument <code>self</code>. To give up focus from a <code>Morph</code>, send it the message <code>#releaseKeyboardFocus:</code> with the argument <code>self</code>.</p><p>The <code>Morph</code> class provides several methods for focus handling in the &quot;focus handling&quot; method category. These include:</p><ul><li><code>hasKeyboardFocus</code> - answers a <code>Boolean</code></li><li><code>hasMouseFocus</code> - answers a <code>Boolean</code></li><li><code>keyboardFocusChange</code> - sent to morphs when they gain or lose focus</li><li><code>keyboardFocused</code> TODO: Why does this not have any code?</li></ul><p>Consider changing the background color of a custom morph when it gains and loses focus.</p><p>The class <code>EventSensor</code> handles keyboard and mouse events.</p><p>TODO: Add much more detail on this.</p><p>The inheritance hierarchy of classes that describe events is as follows:</p><ul><li><code>MorphicEvent</code><ul><li><code>DropEvent</code></li><li><code>DropFilesEvent</code></li><li><code>UserInputEvent</code><ul><li><code>KeyboardEvent</code></li><li><code>MouseEvent</code><ul><li><code>MouseButtonEvent</code></li><li><code>MouseMoveEvent</code></li><li><code>MouseScrollEvent</code></li></ul></li></ul></li><li><code>WindowEvent</code></li></ul></li></ul><p>To add event handling to a specific morph instances instead of adding it to the definition of a <code>Morph</code> subclass:</p><ul><li><p>Open the halo of the morph.</p></li><li><p>Click the blue Menu button.</p></li><li><p>Press cmd-c (copy to clipboard).</p></li><li><p>Open a Workspace.</p></li><li><p>Press cmd-v (paste) which will insert a morph reference like <code>ellipseMorph2611483</code>.</p></li><li><p>After the morph reference, add code like the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">ellipseMorph2611483 setProperty<span class="token punctuation">:</span> <span class="token symbol">#handlesMouseDown</span> toValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>ellipseMorph2611483<br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#mouseButton1Up</span><span class="token punctuation">:</span>localPosition<span class="token punctuation">:</span><br>    toValue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token variable">:position</span> <span class="token punctuation">|</span></span> <span class="token keyword">self</span> inform<span class="token punctuation">:</span> <span class="token string">'got click'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Be careful when using <code>setProperty:</code> that the <code>Symbol</code> argument value is spelled correctly!</p></li><li><p>Select those lines of code and &quot;Do it&quot;.</p></li><li><p>Click the morph.</p></li><li><p>Verify that a PopUpMenu appears containing &quot;got click&quot;.</p></li></ul><p>To create and configure an <code>EllipseMorph</code> in code:</p><pre class="language-smalltalk"><code class="language-smalltalk">em <span class="token operator">:=</span> EllipseMorph <span class="token keyword">new</span> openInWorld<span class="token punctuation">.</span><br>em setProperty<span class="token punctuation">:</span> <span class="token symbol">#handlesMouseDown</span> toValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>em<br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#mouseButton1Up</span><span class="token punctuation">:</span>localPosition<span class="token punctuation">:</span><br>    toValue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token variable">:position</span> <span class="token punctuation">|</span></span> <span class="token keyword">self</span> inform<span class="token punctuation">:</span> <span class="token string">'got click'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="redrawing" tabindex="-1">Redrawing</h2><p>After making code changes, if the UI does not update properly, there are two things that can be done to update the display.</p><ol><li>Open the World menu and select &quot;Restore Display&quot;.</li><li>Open the World menu and select &quot;Debug ... Start drawing all again&quot;.</li></ol><p>TODO: What is the difference between these?</p><h2 id="annoynances" tabindex="-1">Annoynances</h2><p>Some of the methods in Morphic classes are inconsistently named. For example, the class <code>TextModelMorph</code> defines the methods <code>alwaysHideVerticalScrollbar</code> and <code>hideScrollBarsIndefinitely</code>. Note how the &quot;b&quot; is sometimes lowercase and sometimes uppercase.</p><h2 id="todo-app" tabindex="-1">Todo App</h2><p>TODO: Implement a Todo app using Morphic and learn how to deploy it.</p></article>