<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Morphic</h2><aside><nav class="toc"><ol><li><a href="#morphs">Morphs</a></li><li><a href="#pluggable">Pluggable</a></li><li><a href="#creating-and-modifying-morphs">Creating and Modifying Morphs</a></li><li><a href="#halo">Halo</a></li><li><a href="#desktop-color">Desktop Color</a><ol><li><a href="#submorphs">Submorphs</a></li></ol></li><li><a href="#embedding">Embedding</a></li><li><a href="#layoutmorph">LayoutMorph</a><ol><li><a href="#layoutspec">LayoutSpec</a></li><li><a href="#more-ways-to-add-submorphs">More Ways to Add Submorphs</a></li></ol></li><li><a href="#editing-characteristics">Editing Characteristics</a></li><li><a href="#coordinate-systems">Coordinate Systems</a></li><li><a href="#imagemorph">ImageMorph</a></li><li><a href="#creating-a-custom-morph">Creating a Custom Morph</a><ol><li><a href="#adding-borders">Adding Borders</a></li><li><a href="#drawing-lines-and-shapes">Drawing Lines and Shapes</a></li><li><a href="#drawing-images">Drawing Images</a></li></ol></li><li><a href="#text-entry">Text Entry</a></li><li><a href="#mouse-events">Mouse Events</a></li><li><a href="#keyboard-events">Keyboard Events</a></li><li><a href="#morphiccanvas">MorphicCanvas</a></li><li><a href="#drawing-details">Drawing Details</a></li><li><a href="#borderedboxmorph">BorderedBoxMorph</a></li><li><a href="#systemwindow">SystemWindow</a></li><li><a href="#world-menu-items">World Menu Items</a></li><li><a href="#fonts">Fonts</a></li><li><a href="#button-labels">Button Labels</a></li><li><a href="#button-issue">Button Issue</a></li><li><a href="#button-demo-in-cuis">Button Demo in Cuis</a></li><li><a href="#svg">SVG</a></li><li><a href="#full-screen-buttons">Full Screen Buttons</a></li><li><a href="#morph-methods">Morph Methods</a></li><li><a href="#popups">Popups</a><ol><li><a href="#popupmenu">PopUpMenu</a></li><li><a href="#selectionmenu">SelectionMenu</a></li><li><a href="#stringrequestmorph">StringRequestMorph</a></li></ol></li><li><a href="#pluggablelistmorph">PluggableListMorph</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#animation">Animation</a></li><li><a href="#blocking-ui-updates">Blocking UI Updates</a></li><li><a href="#redrawing">Redrawing</a></li><li><a href="#creating-jpeg-images">Creating JPEG Images</a></li><li><a href="#more-morphs">More Morphs</a></li><li><a href="#annoyances">Annoyances</a></li><li><a href="#todo-app">Todo App</a></li></ol></nav></aside><article><p>Morphic is a GUI framework that is included in popular Smalltalk images such as Squeak, Pharo, and Cuis. It defines user interfaces with &quot;morphs&quot; which are objects that know how to render themselves in the Smalltalk environment. They are what other graphical systems refer to as widgets or components.</p><p>For a great introduction to Morphic, see <a href="https://www.youtube.com/watch?v=62baNn3c56Y" target="_blank">Holistic computing with Smalltalk and Morphic. Part 1</a>.</p><p><a href="http://www.jvuletich.org/Morphic3/Morphic3-201006.html" target="_blank">Morphic 3</a> was developed by Juan Vuletich and is used in Cuis Smalltalk. It adds display resolution independence, float coordinates, modeling of coordinate systems as objects, alias free rendering based on signal processing theory, use of textures and photos, zoomable user interfaces (not tied to pixel density), and vector graphics.</p><h2 id="morphs" tabindex="-1">Morphs</h2><p>Any <code>Morph</code> be embedded in another. These are referred to as &quot;submorphs&quot;. However, not all morphs draw their submorphs. Examples that do include <code>WorldMorph</code> and <code>LayoutMorph</code>.</p><p>TODO: How are the submorphs of a LayoutMorph drawn? TODO: I thought it would have a drawOn: method that sends #drawOn: TODO: to each submorph using the same canvas, but it doesn't.</p><p>Each <code>Morph</code> holds a reference to its parent <code>Morph</code> in its instance variable <code>owner</code>. Those references can be followed all the way up to an instance of <code>WorldMorph</code> whose <code>owner</code> is <code>nil</code>.</p><p>Each <code>Morph</code> stores its children (embedded) morphs in its <code>Array</code> instance variable <code>submorphs</code>. If there are no children, the value is an empty <code>Array</code> rather than <code>nil</code>.</p><p>Morphic uses the term &quot;extent&quot; to describe the width and height of a <code>Morph</code>. It is represented by a <code>Point</code> object with an <code>x</code> instance variable that holds the width and a <code>y</code> instance variable that holds the height.</p><p>The <code>location</code> of a <code>Morph</code> is represented by a <code>MorphicTranslation</code> or <code>AffineTransformation</code> object, both of which are subclasses of <code>GeometricTransformation</code>. Instances of <code>MorphicTranslation</code> have the properties <code>deltaX</code> and <code>deltaY</code>. Instance of <code>AffineTransformation</code> hold matrix entries that specify translation, scaling, and rotation in indexed properties.</p><p>Each <code>Morph</code> can store additional properties in its <code>properties</code> instance variable which holds a reference to a <code>Dictionary</code> of key/value pairs.</p><h2 id="pluggable" tabindex="-1">Pluggable</h2><p>Several of the <code>Morph</code> subclasses are &quot;pluggable&quot;. This means they can be configured through composition rather than inheritance. Configuration is achieved by specifying a model object and a selector for messages to be sent to the model object when an interaction occurs.</p><p>An example is the <code>PluggableButtonMorph</code> class whose instances can be created with the <code>model:action:label:</code> class method. The <code>model:</code> keyword specifies a model object, the <code>action:</code> keyword specifies a selector on the model object, and the <code>label:</code> keyword specifies the text that will appear in the button.</p><h2 id="creating-and-modifying-morphs" tabindex="-1">Creating and Modifying Morphs</h2><p>Only a small set of morphs are provided by default. The package UI-MetaProperties is a good source of additional morphs. To install it:</p><ul><li><p>Clone the <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-UI">https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-UI</a> repository into the same directory as the Cuis-Smalltalk-Dev repository.</p></li><li><p>Open a Workspace.</p></li><li><p>Enter <code>Feature require: 'UI-MetaProperties'</code> and &quot;Do it&quot;.</p><p>This installs the following other packages that can also be installed individually:</p><ul><li>Complex</li><li>UI-Color-Panel</li><li>UI-Components</li><li>UI-Layout-Panel</li><li>UI-Packager</li><li>UI-Shapes</li></ul></li><li><p>The UI-Components package installed above installs the following other packages:</p><ul><li>UI-Click-Select</li><li>UI-Core</li><li>UI-DragAndDrop</li><li>UI-Entry</li><li>UI-Panel</li><li>UI-Widgets</li></ul></li></ul><p>The set of &quot;Basic&quot; morphs will now include <code>BorderedBoxMorph</code>, <code>ColoredBoxMorph</code>, <code>EllipseMorph</code>, <code>FrameMorph</code>, <code>ImageMorph</code>, <code>LabelMorph</code>, <code>LineMorph</code>, and <code>PointerLineMorph</code>.</p><p>To create a <code>Morph</code>:</p><ul><li>Open the World menu.</li><li>Select &quot;New morph...&quot;.</li><li>In the dialog that appears, select a category of morphs and then a specific kind (ex. <code>BorderedBoxMorph</code>).</li><li>The <code>Morph</code> will appear attached to the cursor (uses the <code>Morph</code> method <code>openInHand</code>).</li><li>Move the cursor to the location where the <code>Morph</code> should be placed and click to drop it.</li></ul><p>To modify an existing <code>Morph</code>:</p><ul><li>cmd-click a <code>Morph</code> to open its halo.</li><li>Click the orange Explore handle to open an Explorer OR Click the orange Debug handle and select &quot;inspect morph&quot; to open an Inspector.</li><li>Send a message to <code>self</code> in the bottom pane of the Explorer or the Inspector to change a property of the <code>Morph</code>. For example, <code>self color: Color red</code>.</li></ul><p>Alternatively, to modify a <code>Morph</code> from a Workspace:</p><ul><li>cmd-click a <code>Morph</code> to open its halo.</li><li>Click the blue Menu handle on the top and select &quot;copy to clipboard&quot;.</li><li>Open a Workspace window.</li><li>Press cmd-v to paste the <code>Morph</code> reference from the clipboard.</li><li>Send messages to the <code>Morph</code> reference to modify it.</li></ul><p>To change the colors used by a <code>Morph</code> from its halo:</p><ul><li>Ensure that the &quot;UI-Color-Panel&quot; package is installed (a dependency of the &quot;UI-MetaProperties&quot; package).</li><li>cmd-click a <code>Morph</code> to open its halo.</li><li>Click the blue menu button on the top and select &quot;change color...&quot;.</li><li>A window titled &quot;Click-Select a Color&quot; will appear attached to the cursor.</li><li>Position the window by moving the cursor and click to drop it.</li><li>Click a color swatch.</li><li>A menu will appear with the options &quot;Cancel&quot;, &quot;adoptWidgetsColor:&quot;, &quot;color:&quot;, and &quot;borderColor:&quot;. Select an option to change that color property of the <code>Morph</code>. Some morphs don't support all the options. For example, &quot;color&quot; of a <code>LabelMorph</code> can be changed, but it does not have a border. TODO: What does &quot;adoptWidgetsColor:&quot; do?</li></ul><p>To get the size of an instance of <code>BoxMorph</code> or one of its subclasses, send it the <code>#extentInWorld</code> message.</p><p>To explicitly set the size of a <code>Morph</code>, send it:</p><ul><li><code>#morphExtent:</code> with a <code>Point</code> value that represents the new width and height. For example, <code>morph morphExtent: 200 @ 100</code>.</li><li><code>#morphWidth:</code> with a <code>Number</code> value that represents the new width.</li><li><code>#morphHeight:</code> with a <code>Number</code> value that represents the new height.</li></ul><p>See my Morphic demos in package <code>Volkmann</code> in the classes <code>VButtonDemo</code> and <code>VGreet</code>. In a Workspace, enter <code>VButtonDemo new</code> or <code>VGreet new</code> and &quot;Do it&quot;.</p><h2 id="halo" tabindex="-1">Halo</h2><p>A <code>Morph</code> halo is a set of circle buttons, referred to as &quot;handles&quot;, that surround a <code>Morph</code>. Each handle changes the <code>Morph</code> in some way or reveals information about it. Hover over a handle to see a tooltip that describes its purpose.</p><p>To open the halo for a <code>Morph</code>, cmd-click it in Cuis or option-click it in Squeak. If the item is embedded in other morphs, repeat this multiple times until a halo appears around the desired <code>Morph</code>.</p><p>The class of the <code>Morph</code> will be displayed at the bottom of the <code>Morph</code>.</p><p><img alt="Smalltalk halo" style="width: 50%" src="/blog/assets/smalltalk-halo.png?v=1.1.1"></p><p>The following buttons are provided:</p><table><thead><tr><th>Button</th><th>Location</th><th>Tooltip</th><th>Purpose</th></tr></thead><tbody><tr><td>red circle with white &quot;x&quot;</td><td>upper-left</td><td>Remove</td><td>removes the item</td></tr><tr><td>blue circle with white document</td><td>top</td><td>Menu</td><td>opens menu &quot;A&quot; (1)</td></tr><tr><td>black circle with house</td><td>top</td><td>Pick up</td><td>drag to move the item within its parent (2)</td></tr><tr><td>brown circle with resize icon</td><td>top</td><td>Move</td><td>drag to move the item out of its parent</td></tr><tr><td>green circle with copy icon</td><td>upper-right</td><td>Duplicate</td><td>drag to position a duplicate of the item</td></tr><tr><td>orange circle with wrench</td><td>right side</td><td>Debug</td><td>opens a menu of debugging options</td></tr><tr><td>blue circle with magnifier glass</td><td>right side</td><td>Change Scale</td><td>drag to change scale of item</td></tr><tr><td>yellow circle with resize icon</td><td>lower-right</td><td>Change Size</td><td>drag to resize the item</td></tr><tr><td>light blue circle with question mark</td><td>bottom</td><td>Help</td><td>click and hold to display a related tooltip (3)</td></tr><tr><td>blue circle with rotate icon</td><td>lower-left</td><td>Rotate</td><td>drag to rotate item (4)</td></tr><tr><td>dull yellow circle with odd shape</td><td>left side</td><td>Collapse</td><td>click to collapse (hide) the item (5)</td></tr><tr><td>orange circle with wrench</td><td>left side</td><td>Explore</td><td>opens an &quot;Explore&quot; window (6)</td></tr></tbody></table><p>A <code>Morph</code> can also be dragged directly without opening its halo and using the drag buttons. This only works if the area that is dragged does not process mouse events. For example, you cannot drag a <code>Morph</code> that contains a button by dragging the button.</p><p>(1) This menu contains the following options:</p><ul><li>send to back</li><li>bring to front</li><li>embed into &gt;</li><li>change color...</li><li>halo actions...</li><li>checkbox for &quot;resist being picked up&quot;</li><li>checkbox for &quot;be locked&quot;</li><li>copy to clipboard</li><li>export...</li><li>debug...</li></ul><p>It is often useful to click the red pin in the upper-right of the menu so it remains open if you click outside it. This enables dragging values onto it (such as color swatches) to change the values of instance variables. If you forget the <code>Morph</code> to which a pinned menu belongs, click &quot;show target halo&quot; to open the halo of the <code>Morph</code>.</p><p>To change the value of an instance variable in the menu, such as <code>borderColor</code>, click it and use the provided editor to change its value. When changing a color, select a color palette and drag a color swatch onto the instance variable.</p><p><img alt="Crayon Colors palette" src="/blog/assets/cuis-crayon-colors-palette.png?v=1.1.1" style="width: 100%"></p><p>Color swatches can be dragged from one menu to another to copy colors. Fonts can also be dragged from one menu to another to copy fonts.</p><p>(2) If the <code>Morph</code> is embedded in another <code>Morph</code>, this changes the owner to world, which un-embeds it.</p><p>(3) It seems most of the help tooltips default to &quot;Help not yet supplied&quot;. To edit the help text, click the orange circle on the right, select &quot;edit balloon help&quot;, and modify the help text.</p><p>(4) To change the center of rotation of a <code>Morph</code>, click the &quot;Explore&quot; handle, enter the following in the bottom pane, and &quot;Do it&quot;:</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token keyword">self</span> setProperty<span class="token punctuation">:</span> <span class="token symbol">#rotationCenter</span> toValue<span class="token punctuation">:</span> newX <span class="token operator">@</span> newY<span class="token punctuation">.</span></code></pre><p>(5) To restore a collapsed item, click it's thumbnail in the bottom bar.</p><p>(6) &quot;Explore&quot; windows enable viewing data associated with an item such as its location, extent (width and height), and color. Send messages to <code>self</code> in the bottom pane to modify the <code>Morph</code>. To add a method to the mo</p><p>For more detail, see <a href="https://cuis-smalltalk.github.io/TheCuisBook/A-brief-introduction-to-Inspectors.html" target="_blank">A brief introduction to Inspectors</a>.</p><h2 id="desktop-color" tabindex="-1">Desktop Color</h2><p>One way to change the desktop color is to:</p><ul><li>Right-click the desktop to open its halo.</li><li>Click the blue menu button.</li><li>Select &quot;debug...inspect morph&quot; to open an Inspect window.</li><li>Click in the bottom pane of the Inspect window.</li><li>Enter <code>self color: Color red</code> or use some other color name.</li><li>&quot;Do it&quot;.</li></ul><p>This works with all colors except <code>transparent</code> and alpha values are ignored.</p><h3 id="submorphs" tabindex="-1">Submorphs</h3><p>All <code>Morph</code> instances have the instance variable <code>submorphs</code> whose value is an array of child morphs. The order of the morphs in the array indicates their stacking order with the lower indexes rendered on top of higher indexes.</p><p>The following methods can be used to add a submorph to any morph:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>addMorph:</code></td><td>delegates to <code>addMorphFront:</code></td></tr><tr><td><code>addMorph:behind:</code></td><td>adds immediately after a given child morph</td></tr><tr><td><code>addMorph:inFrontOf:</code></td><td>adds immediately before a given child morph</td></tr><tr><td><code>addMorph:position:</code></td><td>same as <code>addMorphFront:position:</code></td></tr><tr><td><code>addMorphBack:</code></td><td>adds to end</td></tr><tr><td><code>addMorphBack:position:</code></td><td>adds at end AND sets x,y position</td></tr><tr><td><code>addMorphFront:</code></td><td>adds to beginning</td></tr><tr><td><code>addMorphFront:position:</code></td><td>adds at beginning AND sets x,y position</td></tr><tr><td><code>addMorphFrontFromWorldPosition:</code></td><td>adds to beginning AND performs owner location transformations to compute the location of the morph being added</td></tr></tbody></table><p>NOTE: The <code>addMorph:position:</code> method should just delegate to <code>addMorphFront:position:</code>, but doesn't current do that.</p><h2 id="embedding" tabindex="-1">Embedding</h2><p>To embed a <code>Morph</code> into another (such as a LayoutMorph) so they are treated as a single unit and can be positioned together:</p><ul><li>Drag a <code>Morph</code> on top of its intended parent <code>Morph</code>.</li><li>Open the halo of the <code>Morph</code>.</li><li>Click the blue Menu handle.</li><li>Hover over &quot;embed into&quot; to display a popup containing the names of every <code>Morph</code> under the one being embedded. Hover over each option to highlight the corresponding <code>Morph</code>, which helps to verify the correct selection.</li><li>Click the name of the <code>Morph</code> that will become the parent. Often the intended parent <code>Morph</code> is a &quot;LayoutMorph&quot;.</li></ul><p>To embed a <code>Morph</code> in another using code send the message <code>#addMorph:</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">lm <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>b1 <span class="token operator">:=</span> BorderedBoxMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>b2 <span class="token operator">:=</span> EllipseMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>lm addMorph<span class="token punctuation">:</span> b1<span class="token punctuation">.</span><br>lm addMorph<span class="token punctuation">:</span> b2<span class="token punctuation">.</span><br>lm openInWorld<span class="token punctuation">.</span><br>lm morphPosition<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">@</span> <span class="token number">200</span><span class="token punctuation">.</span> <span class="token comment">"relative to upper-left corner of World"</span></code></pre><h2 id="layoutmorph" tabindex="-1">LayoutMorph</h2><p>A <code>LayoutMorph</code> instance can only have submorphs that are instances of <code>PlacedMorph</code> or its subclasses. The order of the morphs within the <code>submorphs</code> collection of a <code>LayoutMorph</code> only indicates their stacking order, not their x/y locations.</p><p><code>LayoutMorph</code> instances actively manage the position and size of their submorphs based on the following instance properties:</p><ul><li><p><code>direction</code>: <code>#horizontal</code> for a row or <code>#vertical</code> for a column</p><p>This is automatically set when the class methods <code>newRow</code> and <code>newColumn</code> are used to create an instance.</p></li><li><p><code>gap</code>: a <code>Number</code></p><p>This specifies the space between each of the submorphs.</p><p>By default, there is no gap or padding.</p><p>To add a gap, send the <code>gap:</code> message with a number argument.</p></li><li><p><code>padding</code>: a <code>Number</code> or <code>Point</code></p><p>This property is inherited from the superclass <code>BorderedBoxMorph</code>. It adds space inside the <code>LayoutMorph</code> so the submorphs are not positioned at its edges. By default, there is no padding.</p><p>To specify padding, send the <code>padding:</code> message with a <code>Number</code> or <code>Point</code> argument. If a number is passed, it used as the padding on all four sides. If a <code>Point</code> is passed, its x value is used for left and right padding and its y value is used for top and bottom padding.</p><p>To add both a gap AND padding, send the <code>separation:</code> message with a number or <code>Point</code> argument. If a <code>Point</code> is passed, the gap value is its x value for rows and its y value for columns.</p></li><li><p><code>axisEdgeWeight</code>: a number from 0 to 1 or one of the following symbols:</p><ul><li>for rows: <code>#rowLeft</code>, <code>#center</code>, or <code>#rowRight</code></li><li>for columns: <code>#columnTop</code>, <code>#center</code>, or <code>#columnBottom</code></li></ul><p>This specifies the alignment of the submorphs in the same direction as the <code>LayoutMorph</code>, referred to as the &quot;major axis&quot;.</p><p>By default, all the submorphs will be pushed to the left of a row or top of a column. To change this, send the <code>#axisEdgeWeight:</code> message with a number from 0 to 1. A value zero pushes to the left/top, a value one pushes to the right/bottom, and a value of 0.5 centers.</p></li></ul><p>Practically any layout can be achieved by nesting instances of this class.</p><p>An instance of <code>LayoutMorph</code> can be created with <code>LayoutMorph newColumn</code> or <code>LayoutMorph newRow</code>, but not with <code>LayoutMorph new</code> because the direction must be specified. For example, <code>myLayout := Layout newRow</code>.</p><p>To add a submorph to an instance of <code>LayoutMorph</code>, send it the <code>#addMorph:</code> message. For example:</p><p><img alt="LayoutMorph" style="width: 30%" src="/blog/assets/cuis-smalltalk-layoutmorph.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">box1 <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span> morphExtent<span class="token punctuation">:</span> <span class="token number">50</span> <span class="token operator">@</span> <span class="token number">50</span><span class="token punctuation">.</span><br>box2 <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span> morphExtent<span class="token punctuation">:</span> <span class="token number">75</span> <span class="token operator">@</span> <span class="token number">75</span><span class="token punctuation">.</span><br>box3 <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color blue<span class="token punctuation">;</span> morphExtent<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token operator">@</span> <span class="token number">100</span><span class="token punctuation">.</span><br>layout <span class="token operator">:=</span> LayoutMorph newRow<br>    addMorph<span class="token punctuation">:</span> box1<span class="token punctuation">;</span><br>    addMorph<span class="token punctuation">:</span> box2<span class="token punctuation">;</span><br>    addMorph<span class="token punctuation">:</span> box3<span class="token punctuation">;</span><br>    openInWorld<span class="token punctuation">.</span></code></pre><p>The <code>submorphs</code> collection in the <code>LayoutMorph</code> above will hold the three boxes in the reverse order from which they were added. But they will be rendered from left to right in the order in which they were added. This happens because the <code>LayoutMorph</code> methods <code>layoutSubmorphsHorizontallyIn</code> and <code>layoutSubmorphsVerticallyIn</code> both get the morphs to render with <code>self submorphsToLayout reversed</code>.</p><p>If the UI-Layout-Panel package is installed then the direction, gap, edge weight, and background color can be configured interactively.</p><ul><li>Open the halo for a <code>LayoutMorph</code>.</li><li>Click the blue menu button.</li><li>Select &quot;edit me (a LayoutMorph)&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied with the changes, close the dialog.</li></ul><p><img alt="Cuis Morphic Layout dialog" style="width: 75%" src="/blog/assets/cuis-morphic-layout-dialog.png?v=1.1.1"></p><p>To change the background color of a <code>LayoutMorph</code> instance, send it <code>#color:</code> with an argument that is the new color.</p><h3 id="layoutspec" tabindex="-1">LayoutSpec</h3><p><code>LayoutMorph</code> instances also have a <code>layoutSpec</code> instance variable that is inherited from the superclass <code>PlacedMorph</code>. It defaults to <code>nil</code> and can be set to an instance of <code>LayoutSpec</code>. This specifies how to layout the submorph within its owner <code>LayoutMorph</code>. This is ignored if the owner is not a <code>LayoutMorph</code>.</p><p>Instances of <code>LayoutSpec</code> have the following instance variables: <code>morph</code>, <code>fixedWidth</code>, <code>fixedHeight</code>, <code>offAxisEdgeWeight</code>, <code>proportionalWidth</code>, and <code>proportionalHeight</code>.</p><h3 id="more-ways-to-add-submorphs" tabindex="-1">More Ways to Add Submorphs</h3><p>The <code>LayoutMorph</code> class defines the following additional instance methods, beyond those defined in the <code>Morph</code> class, that can be used to add submorph to an instance. Each of these set the <code>layoutSpec</code> instance variable to a new instance of <code>LayoutSpec</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>addMorph:fixedHeight:</code></td><td>The height remains at the specified size and the width adjusts to fill the available space.</td></tr><tr><td><code>addMorph:fixedWidth:</code></td><td>The width remains at the specified size and the height edjusts to fill the available space.</td></tr><tr><td><code>addMorph:layoutSpec:</code></td><td></td></tr><tr><td><code>addMorph:proportionalHeight:</code></td><td>The height adjusts to be the specified percentage (number between 0 and 1) of the available height and the width adjusts to fill the available space.</td></tr><tr><td><code>addMorph:proportionalWidth:</code></td><td>The width adjusts to be the specified percentage (number between 0 and 1) of the available width and the height adjusts to fill the available space.</td></tr><tr><td><code>addMorphBack:</code></td><td>Adds at the left of row or top of column (seems opposite of expected).</td></tr><tr><td><code>addMorphFront:</code></td><td>Adds at the right or row or top of column (seems opposite of expected).</td></tr><tr><td><code>addMorphFrontFromWorldPosition:</code></td><td>Same as <code>addMorphFront:</code>, but adds <code>self layoutSubmorphs</code> at end (unclear when this would be used).</td></tr><tr><td><code>addMorphKeepWorldHeight:</code></td><td>Unclear when this would be used.</td></tr><tr><td><code>addMorphUseAll:</code></td><td>Unclear when this would be used.</td></tr><tr><td><code>addMorphs:</code></td><td>Adds a collection of morphs making each take the same percentage of the <code>LayoutMorph</code> width.</td></tr><tr><td><code>addMorphsWidthProportionalTo:</code></td><td>Adds a collection of moprhs making each take a given proportion of the <code>LayoutMorph</code> width (percentage of total)</td></tr></tbody></table><p>The <code>addMorphs:</code> method takes a collection of <code>Morphs</code> and adds each using the <code>addMorph:proportionalWidth:</code> method with a value of <code>1</code>. This causes all the newly added submorphs have the same width that is adjusted to fill the available space.</p><p>The <code>addMorphs:withProportionalWidth:</code> method is similar, but takes a collection of widths to use as the <code>proportionalWidth</code> of each submorph.</p><p>A potential issue with using <code>addMorph:proportionalHeight:</code> and <code>addMorph:proportionalWidth:</code> is that they create and use a new <code>LayoutSpec</code> object. The <code>LayoutSpec</code> instance method <code>initialize</code> method sets both the <code>proportionalHeight</code> and <code>proportionalWidth</code> properties to <code>1.0</code> which may not be the desired values. So if the goal is to add a morph to a <code>LayoutMorph</code>, set one of the &quot;proportional&quot; properties to a given value, and not change the other, consider adding the morph with the <code>addMorph:</code> method and then set the desired <code>LayoutSpec</code> property with an expression like <code>someMorph layoutSpec proportionalWidth: 1.0</code>.</p><p>If the extent of a <code>LayoutMorph</code> instance is not explicitly set by sending it <code>#morphExtent:</code>, it will default to smallest size that contains its submorphs.</p><p>The <code>Morph</code> subclass <code>PlacedMorph</code> adds the instance methods <code>layoutSpec</code> and <code>layoutSpec:</code> that get and set a <code>LayoutSpec</code> object specific to the <code>PlacedMorph</code>.</p><p>The submorphs added to a <code>LayoutMorph</code> can each specify their alignment in the opposite direction of the <code>LayoutMorph</code>, referred to as the &quot;minor axis&quot;. It defaults to centering. To change this, send the <code>#axisEdgeWeight:</code> message with a number from 0 to 1. A value zero pushes to the top/left, a value one pushes to the bottom/right, and a value of 0.5 centers.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">submorph layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0</span></code></pre><p>There is no provided method to set the <code>offAxisEdgeWeight</code> to the same value for all submorphs. To achieve that, use code like the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">layout submorphs do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:submorph</span> <span class="token punctuation">|</span></span> submorph layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Consider adding the following instance method to <code>LayoutMorph</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">offAxisEdgeWeight<span class="token punctuation">:</span> aNumber<br>    <span class="token comment">"Sets offAxisEdgeWeight of all submorphs."</span><br><br>    <span class="token keyword">self</span> submorphs do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:submorph</span> <span class="token punctuation">|</span></span> submorph layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The following code demonstrates layout of submorphs.</p><p><img alt="Cuis Morphic layout" style="width: 40%" src="/blog/assets/cuis-morphic-layout1.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">row <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>row morphExtent<span class="token punctuation">:</span> <span class="token number">250</span><span class="token operator">@</span><span class="token number">100</span><span class="token punctuation">.</span><br>row borderColor<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span> borderWidth<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">.</span><br>row color<span class="token punctuation">:</span> Color tan<span class="token punctuation">.</span><br>row gap<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span><br><span class="token comment">"left-aligned by default"</span><br><span class="token comment">"row axisEdgeWeight: 1."</span> <span class="token comment">"right-aligned"</span><br>row axisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">.</span> <span class="token comment">"centered horizontally"</span><br><br>box <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>box color<span class="token punctuation">:</span> Color red<span class="token punctuation">.</span><br>box morphExtent<span class="token punctuation">:</span> <span class="token number">70</span><span class="token operator">@</span><span class="token number">60</span><span class="token punctuation">.</span><br>row addMorph<span class="token punctuation">:</span> box<span class="token punctuation">.</span><br><br>box <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>box color<span class="token punctuation">:</span> Color green<span class="token punctuation">.</span><br><span class="token comment">"Keeping default extent of 50@40."</span><br>row addMorph<span class="token punctuation">:</span> box<span class="token punctuation">.</span><br><br>box <span class="token operator">:=</span> ColoredBoxMorph <span class="token keyword">new</span><span class="token punctuation">.</span><br>box color<span class="token punctuation">:</span> Color blue<span class="token punctuation">.</span><br>box morphExtent<span class="token punctuation">:</span> <span class="token number">30</span><span class="token operator">@</span><span class="token number">20</span><span class="token punctuation">.</span><br>row addMorph<span class="token punctuation">:</span> box<span class="token punctuation">.</span><br><br><span class="token comment">"row submorphs do: [ :submorph | submorph layoutSpec offAxisEdgeWeight: 0 ]."</span><br>row offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br><br>row openInWorld<span class="token punctuation">.</span></code></pre><p>Here is one more example.</p><p><img alt="Cuis Morphic layout" style="width: 40%" src="/blog/assets/cuis-morphic-layout2.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">column <span class="token operator">:=</span> LayoutMorph newColumn<span class="token punctuation">.</span><br>column layoutSpec fixedWidth<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">;</span> fixedHeight<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">.</span><br><span class="token comment">"Add a border to the LayoutMorph."</span><br>column borderColor<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span> borderWidth<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">.</span><br><br>row <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>row borderColor<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span> borderWidth<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">.</span><br>row addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>BorderedBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color pink<span class="token punctuation">)</span><span class="token punctuation">.</span><br>row addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>BorderedBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color lightBlue<span class="token punctuation">)</span><span class="token punctuation">.</span><br><span class="token comment">"By default, the submorphs will be pushed to the left and centered vertically."</span><br><span class="token comment">"Center the submorphs horizontally."</span><br>row axisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">.</span><br><span class="token comment">"Move all the submorphs to the top of the row."</span><br>row submorphsDo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:submorph</span> <span class="token punctuation">|</span></span> submorph layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br>column addMorph<span class="token punctuation">:</span> row<span class="token punctuation">.</span><br><br>row <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>row borderColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span> borderWidth<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">.</span><br>item <span class="token operator">:=</span> BorderedBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color lightGreen<span class="token punctuation">.</span><br>item layoutSpec proportionalWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token comment">"grows width to maximum available"</span><br>row addMorph<span class="token punctuation">:</span> item<span class="token punctuation">.</span><br>row addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>BorderedBoxMorph <span class="token keyword">new</span> color<span class="token punctuation">:</span> Color lightOrange<span class="token punctuation">)</span><span class="token punctuation">.</span><br>column addMorph<span class="token punctuation">:</span> row<span class="token punctuation">.</span><br><br><span class="token comment">"Each of the column submorphs will have the same height be default.<br>Since the column has a fixed height of 200, each row will have a height of 100."</span><br><br><span class="token comment">"The column LayoutSpec won't be honored unless it is inside a LayoutMorph."</span><br>container <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>container addMorph<span class="token punctuation">:</span> column<span class="token punctuation">.</span><br>container openInHand<span class="token punctuation">.</span></code></pre><h2 id="editing-characteristics" tabindex="-1">Editing Characteristics</h2><p>Many characteristics of a <code>Morph</code> can be edited by opening its halo and clicking its blue menu button. To get a halo for a submorph, cmd-click repeatedly until the halo appears around the target <code>Morph</code>. The following menu will appear:</p><p><img alt="Cuis halo blue menu" style="width: 60%" src="/blog/assets/cuis-halo-blue-menu.png?v=1.1.1"></p><p>Click the push pin at the upper-right of the menu to keep the menu open, which simplifies making multiple changes.</p><p>To change the border width, size (<code>morphExtent</code>), or position (<code>morphPosition</code>) of a <code>Morph</code>:</p><ul><li>Click <code>borderWidth</code>, <code>morphExtent</code>, or <code>morphPosition</code>.</li><li>Modify the numbers in the dialog that appears.</li><li>Click the &quot;Accept&quot; to save the changes or the &quot;Cancel&quot; button to discard them.</li></ul><p>Why do a small subset of <code>Morph</code> instance methods begin with <code>morph</code>? These include <code>morphExtent</code>, <code>morphExtentInOwner</code>, <code>morphId</code>, <code>morphLocalBoundsForError</code>, <code>morphPosition</code>, <code>morphPosition:</code>, <code>morphPositionInWorld</code>, and <code>morphPositionInWorld:</code>.</p><p>Juan Vuletich answered with the following:</p><blockquote><p>There are, perhaps, 3 different groups of selectors. For very few, like <code>#morphId</code>, <code>#morphBoundsAfterDraw</code>, and maybe others are used in other classes, and as they are about the morph they are dealing with, it just seemed right to me.</p><p>Others including <code>morphExtentInOwner</code>, <code>#morphPositionInWorld</code>, and <code>morphPositionInWorld:</code> were created when I converted the Morphic framework from Squeak's style global coordinates to Morph local coordinates. It was a way to separate the two semantics while they were both there, during that redesign. So they are no longer needed. I pushed updates to rename them and to deprecate the old implementations. They will be removed later.</p><p>Finally, we have others like <code>#morphPosition</code>, <code>#morphExtent</code>, and such. The problem with them is that <code>#position</code> and <code>#position:</code> are part of the <code>Stream</code> protocol. <code>#extent</code> and <code>#extent:</code> are part of the <code>Form</code> and <code>Rectangle</code> protocol. This looks like polymorphism, but it isn't. In no way can a <code>Morph</code> and a <code>Stream</code> be used in the same code. The same is true for a <code>Morph</code> and a <code>Form</code>, or a <code>Morph</code> and a <code>Rectangle</code>. In this cases, when using Senders and Implementors in such messages, you need to keep in your mind the fact that they form two distinct subsets of senders and implementors that will never intersect. The lists of senders and implementors become twice as large for no reason, and working in that code is much harder than needed.</p><p>Yes, I really dislike false polymorphism. So <code>#morphPosition</code>, <code>#morphExtent</code>, and a few others have the &quot;morph&quot; prefix only so they are never confused with Stream, Form and Rectangle protocol.</p></blockquote><p>To change the border color or color of a <code>Morph</code>:</p><ul><li>Click &quot;borderColor&quot; or &quot;color&quot;.</li><li>Select one of the following color sets to open a dialog containing color swatches: CSS3 (Web) Colors, Crayon Colors, NBSISCC Colors, XKCD Colors, or ColorMix Editor (opens a Color Editor dialog). A Color Editor dialog enables selecting a color with RGB, HSL, and transparency. For more detail on these color dictionaries, see <a href="https://github.com/Cuis-Smalltalk/Cuis-Smalltalk-Dev/blob/master/Packages/Features/NamedColors/README.md" target="_blank">Cuis-NamedColors</a>.</li><li>Drag a color swatch from the dialog onto the swatch for &quot;borderColor&quot; or &quot;color&quot;.</li><li>Close the color swatch dialog.</li><li>Close the <code>Morph</code> menu.</li></ul><p>To edit the width, height, and off-axis edge weight of a submorph</p><ul><li>Open the halo for a submorph.</li><li>Click the blue menu button.</li><li>Select &quot;edit my LayoutSpec&quot;. The dialog below will appear.</li><li>Click the red push pin to enable trying multiple changes.</li><li>After each set of changes, click the &quot;Update&quot; button.</li><li>When satisfied with the changes, close the dialog.</li></ul><p><img alt="Cuis edit my LayoutSpec" style="width: 80%" src="/blog/assets/cuis-edit-my-layoutspec.png?v=1.1.1"></p><p>For more detail on layouts, see <a href="https://github.com/Cuis-Smalltalk/Learning-Cuis/blob/master/LayoutTour.md" target="_blank">Exploring morph layouts in Cuis</a>.</p><h2 id="coordinate-systems" tabindex="-1">Coordinate Systems</h2><p>The world coordinate system places (0, 0) in the upper-left corner of the main window. X values increase going right and Y values increase going down.</p><p>Each <code>Morph</code> has its own local coordinate system with (0, 0) in the upper-left corner of the <code>Morph</code>. This coordinate system is used for drawing the <code>Morph</code>.</p><p>Changing the translation, rotation, or scale of a <code>Morph</code> changes its local coordinate system.</p><p>Positive rotations are clockwise and negative rotations are counter-clockwise.</p><h2 id="imagemorph" tabindex="-1">ImageMorph</h2><p>An <code>ImageMorph</code> can render an image from a file. For example, the following image is from <a href="https://visualparadox.com/wallpapers/altitude1600.htm" target="_blank">VisualParadox</a>.</p><p><img alt="Altitude" src="/blog/assets/altitude1600.jpg?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token comment">"Relative file references start from the Cuis-Smalltalk-Dev-UserFiles directory."</span><br>filePath <span class="token operator">:=</span> <span class="token string">'/Users/volkmannm/Pictures/images/altitude1600.jpg'</span><span class="token punctuation">.</span><br>form <span class="token operator">:=</span> Form fromFileNamed<span class="token punctuation">:</span> filePath <span class="token punctuation">:</span><span class="token punctuation">:</span> magnifyBy<span class="token punctuation">:</span> <span class="token number">0.25</span><span class="token punctuation">.</span> <span class="token comment">"scale to 1/4 size"</span><br>morph <span class="token operator">:=</span> ImageMorph newWith<span class="token punctuation">:</span> form<span class="token punctuation">.</span><br>morph openInWorld<span class="token punctuation">.</span></code></pre><p>A <code>Form</code> is a rectangular array of pixels that holds an image.</p><p>PNG and TIFF files are not supported by default. To add support for those, evaluate <code>Feature require: 'Graphics-Files-Additional'</code>.</p><h2 id="creating-a-custom-morph" tabindex="-1">Creating a Custom Morph</h2><p>A custom morph is implemented as a subclass of <code>Morph</code> or one of its subclasses. The <code>drawOn:</code> method must be implemented to describe what to render. This is passed an object from a subclass of <code>MorphicCanvas</code> object. Typically this is <code>VectorCanvas</code> or <code>HybridCanvas</code>. This defines the supported drawing methods.</p><p>Subclasses of <code>Morph</code>:</p><ul><li>do not have a specified &quot;extent&quot; (size)</li><li>use the coordinate system of their owner, which can be a <code>WorldMorph</code> (for example, if the owner is scaled by a factor of 2 then this will be also)</li><li>use a <code>VectorCanvas</code></li><li>if the <code>drawOn:</code> method is not overridden, it will fill the morph with a blue rectangle that is centered at origin, has a width of 150, and a height of 140</li></ul><p>Subclasses of <code>PlacedMorph</code></p><ul><li>do not have a specified &quot;extent&quot; (size)</li><li>use their own local coordinate system</li><li>can be dragged to a new location</li><li>use a <code>VectorCanvas</code></li><li>inherits the <code>drawOn:</code> method defined in its superclass <code>Morph</code></li></ul><p>Subclasses of <code>BoxMorph</code>:</p><ul><li>have an &quot;extent&quot; (size) specified by their <code>defaultExtent</code> method which defaults to <code>50@40</code></li><li>use a <code>HybridCanvas</code> by default, but will use a <code>VectorCanvas</code> if their <code>requiresVectorCanvas</code> method returns <code>true</code></li><li>if the <code>drawOn:</code> method is not overridden, it will fill the morph with a light green rectangle</li><li>automatically clips its contents to its extent</li></ul><p>While <code>BoxMorph</code> provides clipping of content drawn outside its bounding box, its contract states that such drawing should not occur. Doing so will result in the display of drawing artifacts from the pixels drawn outside it if the morph is dragged or rotated. <code>BoxMorph</code> provides excellent drag performance in part because it does not take the time to clean up the drawing artifacts.</p><p>Subclasses of <code>BoxMorph</code> should implement the <code>defaultExtent</code> method to return the desired size. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">defaultExtent<br>    <span class="token operator">^</span>`<span class="token number">200</span><span class="token operator">@</span><span class="token number">200</span>`</code></pre><p>Submorphs added to instances of <code>Morph</code> and <code>PlacedMorph</code> (using the <code>addMorph:</code> method) will be clipped to the bounds of what is drawn on them if they implement the <code>clipsSubmorphs</code> method to return <code>true</code>. For an example, see the class <code>Sample07Clipping</code>. NOTE: It seems that only drawing of shapes is clipped, not images.</p><p>Custom morphs that are subclasses of <code>PlacedMorph</code> (or one of its subclasses) can be directly dragged to new locations. Otherwise dragging requires opening the <code>Morph</code> halo and using the &quot;Move&quot; handle.</p><p>The following example includes the instance variable <code>extent</code> to allow the width and height to be used to determine what to draw.</p><pre class="language-smalltalk"><code class="language-smalltalk">PlacedMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#CanvasDemo</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'extent fillColor'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre><p>In subclasses of <code>PlacedMorph</code>, the instance method <code>drawOn:</code> is passed a <code>VectorCanvas</code> object. In subclasses of <code>BorderedBoxMorph</code>, the instance method <code>drawOn:</code> is passed a <code>HybridCanvas</code> object. To force a subclass of <code>BorderedBoxMorph</code> to use a <code>VectorCanvas</code>, implement the <code>requiresVectorCanvas</code> method to return <code>true</code>.</p><p>Instances of <code>PlacedMorph</code> subclasses have a <code>location</code> instance variable. If the <code>Morph</code> only has a location and has not be rotated or scaled then <code>location</code> will hold a <code>MorphicTranslation</code> object with <code>deltaX</code> and <code>deltaY</code> instance variables. If the <code>Morph</code> has been rotated or scaled then <code>location</code> will hold an <code>AffineTranslation</code> object with <code>scale</code>, <code>degrees</code>, and <code>translation</code> instance variables.</p><p>By default, morphs rotate about their center. To change this, override the <code>rotationCenter</code> method to return a different <code>Point</code>. For example, the following causes rotation to occur around the upper-left corner:</p><pre class="language-smalltalk"><code class="language-smalltalk">rotationCenter<br>    <span class="token operator">^</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span></code></pre><p>The <code>Morph</code> method <code>openInHand</code> causes the <code>Morph</code> to appear and be attached to the cursor. Move the cursor to the location where it should be placed and click to drop it.</p><p>Alternatively, send the message <code>#openInWorld</code> to cause the <code>Morph</code> to appear and not be attached to the cursor. If the location of the <code>Morph</code> was specified by sending the <code>#location#</code> message to it with a <code>MorphicTranslation</code> argument then it will be placed at that location. Otherwise it will be placed at a random location.</p><p>Also see the custom method <code>openAtCursor</code> that I added to the <code>Morph</code> class. It is defined as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">openAtCursor<br>    <span class="token comment">"Opens Morph, attempting to center it at hand location,<br>    but keeping it in the world bounds."</span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">world</span> <span class="token punctuation">|</span></span><br>    world <span class="token operator">:=</span> <span class="token keyword">self</span> runningWorld<span class="token punctuation">.</span><br>    world<br>        ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>UISupervisor whenUIinSafeState<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> openInWorld<span class="token punctuation">]</span><span class="token punctuation">]</span><br>        ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:w</span> <span class="token punctuation">|</span></span><br>            w addMorph<span class="token punctuation">:</span> <span class="token keyword">self</span> centeredNear<span class="token punctuation">:</span> w activeHand morphPosition<span class="token punctuation">.</span><br>        <span class="token punctuation">]</span></code></pre><h3 id="adding-borders" tabindex="-1">Adding Borders</h3><p>To add a border around a morph with a given color and width, send it the message <code>#borderColor:borderWidth</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">myMorph borderColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span> borderWidth<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">.</span></code></pre><h3 id="drawing-lines-and-shapes" tabindex="-1">Drawing Lines and Shapes</h3><p>Many of the drawing methods are defined in the superclasses <code>AbstractVectorCanvas</code> and <code>MorphicCanvas</code>. Examples include:</p><ul><li><code>arcTo:radius:angleOfXAxis:largeFlag:sweepFlag:</code></li><li><code>circleCenter:radius:</code></li><li><code>drawString:from:to:atBaseline:font:color:</code></li><li><code>ellipseCenter:radius:rotationAngle:</code><ul><li><code>ellipseCenter:</code> - <code>Point</code> where x/y represents the center location</li><li><code>radius:</code> - <code>Point</code> where x is major axis radius and y is minor axis radius</li><li><code>rotationAngle:</code> - <code>Number</code> of radians</li></ul></li><li><code>fillRectangle:color:</code></li><li><code>image:at:</code> (see example below under &quot;Drawing Images&quot;)</li><li><code>line:to:width:color:</code></li><li>TODO: Add more!</li></ul><p>For examples of using these methods, see the classes in the category &quot;Morphic ... Examples&quot;.</p><p>The following code draws a green rectangle with a red border and a red line from its upper-left to lower-right. It has a default width of 100, height of 100, and default location of the upper-left corner of the world.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">x1</span> <span class="token variable">x2</span> <span class="token variable">y1</span> <span class="token variable">y2</span> <span class="token punctuation">|</span></span><br>    x1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    y1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    x2 <span class="token operator">:=</span> extent x<span class="token punctuation">.</span><br>    y2 <span class="token operator">:=</span> extent y<span class="token punctuation">.</span><br>    aCanvas<br>        strokeWidth<span class="token punctuation">:</span> <span class="token number">10</span><br>        color<span class="token punctuation">:</span> Color red<br>        fillColor<span class="token punctuation">:</span> fillColor<br>        do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas<br>            moveTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y1<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x1 <span class="token operator">@</span> y2<span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> x2 <span class="token operator">@</span> y2<br>    <span class="token punctuation">]</span><br><br>extent<br>    <span class="token operator">^</span> extent<br><br>extent<span class="token punctuation">:</span> aPoint<br>    extent <span class="token operator">:=</span> aPoint<br><br>initialize<br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    extent <span class="token operator">:=</span> <span class="token number">100</span><span class="token operator">@</span><span class="token number">100</span> <span class="token comment">"default size"</span><br>    <span class="token comment">"Place in upper-left corner by default."</span><br>    <span class="token keyword">self</span> location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>To try this:</p><ul><li>Open a Workspace.</li><li>Enter <code>(CanvasDemo new extent: 300@400) openInHand.</code></li><li>Press cmd-d to &quot;Do it&quot;.</li><li>Move the cursor to where the <code>Morph</code> should be dropped.</li><li>Click to drop it.</li></ul><p><code>VectorCanvas</code> is a subclass of <code>AbstractVectorCanvas</code>, which is a subclass of <code>MorphicCanvas</code>. The <code>MorphicCanvas</code> class defines several methods whose names begin with <code>drawString:</code> method.</p><p>To draw text in this <code>Morph</code> that is centered, add the following in the <code>drawOn:</code> method:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyPointSize<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">.</span><br>aCanvas<br>    drawString<span class="token punctuation">:</span> <span class="token string">'Hello'</span><br>    atCenterXBaselineY<span class="token punctuation">:</span> x1 <span class="token operator">+</span> x2 <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">@</span> <span class="token punctuation">(</span>y1 <span class="token operator">+</span> y2 <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><br>    font<span class="token punctuation">:</span> font <span class="token comment">"pass nil to use default font"</span><br>    color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">.</span></code></pre><p>Lines have rounded endpoints by default. TODO: Can the line cap be changed to square, butt, or round like in SVG?</p><p>The following code demonstrates many of the methods for drawing on a canvas:</p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">center</span> <span class="token variable">filePath</span> <span class="token variable">font</span> <span class="token variable">form</span> <span class="token variable">halfHeight</span> <span class="token variable">halfWidth</span> <span class="token variable">height</span> <span class="token variable">padding</span> <span class="token variable">rect</span> <span class="token variable">text</span> <span class="token variable">textStart</span> <span class="token variable">width</span> <span class="token punctuation">|</span></span><br><br>    <span class="token comment">"filePath := '/Users/volkmannm/Pictures/images/altitude1600.jpg'."</span><br>    filePath <span class="token operator">:=</span> <span class="token string">'/Users/volkmannm/Pictures/logos/Smalltalk-balloon.png'</span><span class="token punctuation">.</span><br>    form <span class="token operator">:=</span> Form fromFileNamed<span class="token punctuation">:</span> filePath<span class="token punctuation">.</span><br>    form <span class="token operator">:=</span> form magnifyBy<span class="token punctuation">:</span> <span class="token number">0.25</span><span class="token punctuation">.</span><br>    aCanvas image<span class="token punctuation">:</span> form at<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">.</span><br><br>    width <span class="token operator">:=</span> <span class="token number">250</span><span class="token punctuation">.</span><br>    height <span class="token operator">:=</span> <span class="token number">200</span><span class="token punctuation">.</span><br>    halfWidth <span class="token operator">:=</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span><br>    halfHeight <span class="token operator">:=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span><br>    center <span class="token operator">:=</span> halfWidth <span class="token operator">@</span> halfHeight<span class="token punctuation">.</span><br>    padding <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">.</span><br>    rect <span class="token operator">:=</span> Rectangle origin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span> extent<span class="token punctuation">:</span> width<span class="token operator">@</span>height<span class="token punctuation">.</span><br>    font <span class="token operator">:=</span> FontFamily familyName<span class="token punctuation">:</span> <span class="token string">'DejaVu Sans'</span> pointSize<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">.</span><br>    text <span class="token operator">:=</span> <span class="token string">'Hello, World!'</span><span class="token punctuation">.</span><br>    textStart <span class="token operator">:=</span> padding <span class="token operator">@</span> height <span class="token operator">-</span>  padding<span class="token punctuation">.</span><br><br>    aCanvas fillRectangle<span class="token punctuation">:</span> rect color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">.</span><br><br>    aCanvas drawString<span class="token punctuation">:</span> text from<span class="token punctuation">:</span> <span class="token number">1</span> to<span class="token punctuation">:</span> text size atBaseline<span class="token punctuation">:</span> textStart font<span class="token punctuation">:</span> font color<span class="token punctuation">:</span> Color black<span class="token punctuation">.</span><br><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">20</span> color<span class="token punctuation">:</span> Color purple do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas circleCenter<span class="token punctuation">:</span> center radius<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">5</span> color<span class="token punctuation">:</span> Color blue do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">"radius is a Point with x as major axis radius and y as minor axis radius.<br>        rotationAngle is clockwise rotation in radians."</span><br>        aCanvas ellipseCenter<span class="token punctuation">:</span> <span class="token number">50</span><span class="token operator">@</span><span class="token number">50</span> radius<span class="token punctuation">:</span> <span class="token number">40</span><span class="token operator">@</span><span class="token number">20</span> rotationAngle<span class="token punctuation">:</span> Float pi <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">10</span> color<span class="token punctuation">:</span> Color red do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas line<span class="token punctuation">:</span> center to<span class="token punctuation">:</span> width <span class="token operator">@</span> height width<span class="token punctuation">:</span> <span class="token number">5</span> color<span class="token punctuation">:</span> Color red<span class="token punctuation">.</span><br>        <span class="token comment">"moveTo: 100 @ 100;<br>        lineTo: 200 @ 200."</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">5</span> color<span class="token punctuation">:</span> Color green do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        aCanvas<br>            moveTo<span class="token punctuation">:</span> width <span class="token operator">@</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            lineTo<span class="token punctuation">:</span> halfWidth <span class="token operator">@</span> halfHeight<span class="token punctuation">;</span><br>            arcTo<span class="token punctuation">:</span> width <span class="token operator">*</span> <span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">@</span> <span class="token punctuation">(</span>height <span class="token operator">*</span> <span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> radius<span class="token punctuation">:</span> <span class="token number">30</span> angleOfXAxis<span class="token punctuation">:</span> Float pi largeFlag<span class="token punctuation">:</span> <span class="token boolean">false</span> sweepFlag<span class="token punctuation">:</span> <span class="token boolean">false</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"A frameRectangle doesn't seem useful."</span><br>    <span class="token comment">"aCanvas frameRectangle: rect topLeftColor: Color red bottomRightColor: Color blue borderWidth: 10."</span></code></pre><p>The following code demonstrates using the <code>arcTo:radius:angleOfXAxis:largeFlag:sweepFlag:</code> method to draw an oval at a 45 degree angle.</p><p><img alt="Cuis arcTo:" style="width: 30%" src="/blog/assets/cuis-morphic-oval.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">drawOn<span class="token punctuation">:</span> aCanvas<br>	<span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">height</span> <span class="token variable">linen</span> <span class="token variable">radius</span> <span class="token variable">rect</span> <span class="token variable">width</span> <span class="token punctuation">|</span></span><br><br>	width <span class="token operator">:=</span> <span class="token number">500</span><span class="token punctuation">.</span><br>	height <span class="token operator">:=</span> <span class="token number">500</span><span class="token punctuation">.</span><br>	rect <span class="token operator">:=</span> Rectangle origin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span> extent<span class="token punctuation">:</span> width<span class="token operator">@</span>height<span class="token punctuation">.</span><br>	linen <span class="token operator">:=</span> Color fromHexString<span class="token punctuation">:</span> <span class="token string">'#faf0e6'</span><span class="token punctuation">.</span><br>	aCanvas fillRectangle<span class="token punctuation">:</span> rect color<span class="token punctuation">:</span> linen<span class="token punctuation">.</span><br><br>	radius <span class="token operator">:=</span> <span class="token number">50</span> <span class="token operator">*</span> <span class="token number">2</span> sqrt<span class="token punctuation">.</span><br>	aCanvas strokeWidth<span class="token punctuation">:</span> <span class="token number">5</span> color<span class="token punctuation">:</span> Color red fillColor<span class="token punctuation">:</span> Color yellow do<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>		aCanvas<br>			moveTo<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">@</span> <span class="token number">100</span><span class="token punctuation">;</span><br>			lineTo<span class="token punctuation">:</span> <span class="token number">400</span> <span class="token operator">@</span> <span class="token number">300</span><span class="token punctuation">;</span><br>			arcTo<span class="token punctuation">:</span> <span class="token number">300</span> <span class="token operator">@</span> <span class="token number">400</span> radius<span class="token punctuation">:</span> radius angleOfXAxis<span class="token punctuation">:</span> <span class="token number">0</span> largeFlag<span class="token punctuation">:</span> <span class="token boolean">false</span> sweepFlag<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>			lineTo<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token operator">@</span> <span class="token number">200</span><span class="token punctuation">;</span><br>			arcTo<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">@</span> <span class="token number">100</span> radius<span class="token punctuation">:</span> radius angleOfXAxis<span class="token punctuation">:</span> <span class="token number">0</span> largeFlag<span class="token punctuation">:</span> <span class="token boolean">false</span> sweepFlag<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br><br>	<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Custom methods related to drawing like <code>drawOn:</code> should be placed in the &quot;drawing&quot; method category.</p><h3 id="drawing-images" tabindex="-1">Drawing Images</h3><p>The following code can be used in a <code>drawOn:</code> method to draw an image on a canvas:</p><pre class="language-smalltalk"><code class="language-smalltalk">filePath <span class="token operator">:=</span> <span class="token string">'/Users/volkmannm/Pictures/logos/Smalltalk-balloon.png'</span><span class="token punctuation">.</span><br>form <span class="token operator">:=</span> Form fromFileNamed<span class="token punctuation">:</span> filePath<span class="token punctuation">.</span><br>form <span class="token operator">:=</span> form magnifyBy<span class="token punctuation">:</span> <span class="token number">0.25</span><span class="token punctuation">.</span><br>aCanvas image<span class="token punctuation">:</span> form at<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">@</span><span class="token number">0</span></code></pre><h2 id="text-entry" tabindex="-1">Text Entry</h2><p>The <code>TextModelMorph</code> class defined in the base image Morphic package can be used for single or multiple line text entry.</p><p>The following code creates an instance of <code>TextModelMorph</code>, changes its value, and prints its value:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm <span class="token operator">:=</span> TextModelMorph withText<span class="token punctuation">:</span> <span class="token string">'initial content'</span><span class="token punctuation">.</span><br>tmm openInWorld<span class="token punctuation">.</span><br>tmm editor actualContents<span class="token punctuation">:</span> <span class="token string">'new content'</span><span class="token punctuation">.</span><br>tmm text print<span class="token punctuation">.</span></code></pre><p>Typically you will want to modify many aspects of this morph such as its size and whether words automatically wrap to a new lines.</p><p>The value associated with a <code>TextModelMorph</code> will either be held in a <code>TextModel</code> object or a <code>TextProvider</code> object.</p><p>There are three common ways to create an instance of <code>TextModelMorph</code>. The choice is based on how the initial value is supplied and where the current value will be held.</p><ol><li><p><code>TextModelMorph withText: aTextOrString</code></p><p>This creates a <code>TextModel</code> object that is initialized with the given value and passes it to the next method.</p></li><li><p><code>TextModelMorph withModel: aTextModel</code></p><p>The approach allows the same <code>TextModel</code> to be used by multiple other morphs. It creates an instance, sets its model to <code>aTextModel</code>, and returns the instance.</p></li><li><p><code>TextModelMorph textProvider: aTextProvider textGetter: selectorSymbol1 textSetter: selectorSymbol2</code></p><p>This approach allows the value to maintained in any object (<code>aTextProvider</code>) that responds to the given selectors. It creates an instance, sets <code>newModel</code> to an instance of <code>PluggableTextModel</code> that uses <code>aTextProvider</code>, adds <code>aTextProvider</code> as a dependent of <code>newModel</code>, sets its model to <code>newModel</code>, and returns the instance.</p></li></ol><p>To display prompting text inside a <code>TextModelMorph</code> until the user begins typing a value, send it <code>#emptyTextDisplayMessage:</code> with a string message.</p><p>The default background color of a <code>TextModelMorph</code> is white. A <code>TextModelMorph</code> only displays a border when it has focus. One way to make its bounds apparent when it doesn't have focus is to set the background color of the parent component.</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm owner color<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color blue alpha<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">)</span></code></pre><p>Another way is to set the background color of the <code>TextModelMorph</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm color<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color blue alpha<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">)</span></code></pre><p>By default, words that would extend past the right side will wrap to the next line. To prevent wrapping:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm wrapFlag<span class="token punctuation">:</span> <span class="token boolean">false</span></code></pre><p>By default, when there are more lines than will fit in the height, a vertical scroll bar will appear. When wrapping is turned off, if the text does not fit in the width then a horizontal scroll bar will appear.</p><p>To prevent scroll bars from appearing, send one of the following messages to an instance:</p><ul><li><code>#hHideScrollBar</code> for horizontal (doesn't seem to work!)</li><li><code>#vHideScrollBar</code> for vertical (doesn't seem to work!)</li><li><code>#hideScrollBarsIndefinitely</code> for both</li></ul><p>The default size of a <code>TextModelMorph</code> is 200 by 100. This is set in the <code>initialize</code> method of <code>PluggableMorph</code> which is the superclass of <code>PluggableScrollPane</code> which is the superclass of <code>TextModelMorph</code>. Depending on the font, the default size will display around four lines of wrapping text with around 17 characters per line.</p><p>To change the size:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm morphExtent<span class="token punctuation">:</span> width <span class="token operator">@</span> height</code></pre><p>The size should include space for scroll bars if they may be needed.</p><p>Setting the height to zero will cause it to actually be set to the height required for a single line in the current font.</p><p>By default, pressing the tab key will not move focus from one <code>TextModelMorph</code> instance to another. To enable this, do the following for each instance:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm tabToFocus<span class="token punctuation">:</span> <span class="token boolean">true</span></code></pre><p>When the user changes the text in a <code>TextModelMorph</code>, the object that holds its value is not automatically updated. To manually request the update:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm scroller acceptContents</code></pre><p>There are multiple ways to configure user actions that trigger an update. The easiest are:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm acceptOnAny<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span> <span class="token comment">"updates after every keystroke"</span><br><br>tmm acceptOnCR<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span> <span class="token comment">"updates after return key is pressed"</span></code></pre><p>To listen for changes to the value of a <code>TextModelMorph</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm keystrokeAction<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token punctuation">|</span></span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">value</span> <span class="token punctuation">|</span></span><br>    value <span class="token operator">:=</span> tmm text<span class="token punctuation">.</span><br>    <span class="token comment">"Do something with the value."</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>By default, if the user attempts to close a <code>SystemWindow</code> and it contains <code>TextModelMorph</code> instances that have unsaved changes, the user will be asked to confirm this with the message &quot;Changes have not been saved. Is it OK to cancel those changes?&quot;. They must select &quot;Yes&quot; to close the window. To disable this check for a particular instance of <code>TextModelMorph</code>, send it <code>askBeforeDiscardingEdits: false</code>.</p><p>The following code creates a single-line text input with a given width that never shows scroll bars:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm <span class="token operator">:=</span> TextModelMorph withText<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><br>    hideScrollBarsIndefinitely<span class="token punctuation">;</span><br>    morphExtent<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">@</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">"calculates required height for one line"</span><br>    wrapFlag<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">.</span></code></pre><p>If the text exceeds the width, use the left and right arrow keys to scroll the text.</p><p>To select all the content in an instance, send it <code>#selectAll</code>.</p><p>To select content from one index to another where both are inclusive:</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm selectFrom<span class="token punctuation">:</span> startIndex to<span class="token punctuation">:</span> endIndex<span class="token punctuation">.</span></code></pre><p>To place the text cursor at the end of the current content:</p><pre class="language-smalltalk"><code class="language-smalltalk">index <span class="token operator">:=</span> tmm text size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">.</span><br>tmm selectFrom<span class="token punctuation">:</span> index to<span class="token punctuation">:</span> index<span class="token punctuation">.</span></code></pre><p>The following code demonstrates listening for key events. It prints their ASCII codes to the Transcript.</p><pre class="language-smalltalk"><code class="language-smalltalk">tmm keystrokeAction<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:evt</span> <span class="token punctuation">|</span></span><br>    evt keyValue print<span class="token punctuation">.</span><br>    evt keyCharacter print<span class="token punctuation">.</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Another option that is suitable for single-line text entry is to use the <code>TextEntryMorph</code> class defined in the UI-Entry package. Also, consider using the <code>TextInputMorf</code> class defined in my Cuis-Smalltalk-Morf package.</p><p>Let's combine what we have learned above to create a small application. The user can enter their first and last name. Clicking the &quot;Greet&quot; button displays a greeting message below the button.</p><p><img alt="Cuis user interaction demo" style="width: 40%" src="/blog/assets/cuis-user-interaction-demo.png?v=1.1.1"></p><p>Create the class <code>UserInteractionDemo</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#UserInteractionDemo</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'firstName greetLabel lastName'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Demo'</span></code></pre><p>Define the following accessor methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">firstName<br>    <span class="token operator">^</span> firstName<br><br>firstName<span class="token punctuation">:</span> aString<br>    firstName <span class="token operator">:=</span> aString<br><br>lastName<br>    <span class="token operator">^</span> lastName<br><br>lastName<span class="token punctuation">:</span> aString<br>    lastName <span class="token operator">:=</span> aString</code></pre><p>Define the instance method <code>textEntryOn:</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">textEntryOn<span class="token punctuation">:</span> aSymbol<br>    <span class="token comment">"Answer a TextModelMorph where aSymbol provides<br>     the name for the getter and setter."</span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">entry</span> <span class="token punctuation">|</span></span><br><br>    entry <span class="token operator">:=</span> TextModelMorph<br>        textProvider<span class="token punctuation">:</span> <span class="token keyword">self</span><br>        textGetter<span class="token punctuation">:</span> aSymbol<br>        textSetter<span class="token punctuation">:</span> <span class="token punctuation">(</span>aSymbol<span class="token operator">,</span> <span class="token string">':'</span><span class="token punctuation">)</span> asSymbol <span class="token punctuation">:</span><span class="token punctuation">:</span><br>        acceptOnAny<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        askBeforeDiscardingEdits<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        hideScrollBarsIndefinitely<span class="token punctuation">;</span><br>        <span class="token comment">"Width is made proportional below.<br>        Setting height to zero causes it to use minimum height for one line."</span><br>        morphExtent<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">@</span><span class="token operator">@</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        tabToFocus<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        wrapFlag<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">.</span><br>    entry layoutSpec proportionalWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> entry<span class="token punctuation">.</span></code></pre><p>Define the instance method <code>rowLabeled:</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">rowLabeled<span class="token punctuation">:</span> aString for<span class="token punctuation">:</span> aMorph<br>    <span class="token comment">"Answer a row LayoutMorph containing a LabelMorph and a given morph."</span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">row</span> <span class="token punctuation">|</span></span><br><br>    row <span class="token operator">:=</span> LayoutMorph newRow<br>        gap<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> aString<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> aMorph<span class="token punctuation">.</span><br>    row layoutSpec proportionalHeight<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> row<span class="token punctuation">.</span></code></pre><p>Define the instance method <code>greet</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">greet<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">greeting</span> <span class="token punctuation">|</span></span><br><br>    greeting <span class="token operator">:=</span> firstName isEmpty<br>        ifTrue<span class="token punctuation">:</span> <span class="token string">''</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'Hello @{1@} @{2@}!'</span> format<span class="token punctuation">:</span> <span class="token operator">@</span><span class="token punctuation">{</span>firstName<span class="token punctuation">.</span> lastName<span class="token operator">@</span><span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    greetLabel contents<span class="token punctuation">:</span> greeting<span class="token punctuation">.</span></code></pre><p>Define the instance method <code>initialize</code> as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">button</span> <span class="token variable">extent</span> <span class="token variable">firstNameEntry</span> <span class="token variable">form</span> <span class="token variable">image</span> <span class="token variable">lastNameEntry</span> <span class="token variable">window</span> <span class="token punctuation">|</span></span><br><br>    firstName <span class="token operator">:=</span> <span class="token string">''</span><span class="token punctuation">.</span><br>    lastName <span class="token operator">:=</span> <span class="token string">''</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Relative file paths start from the Cuis-Smalltalk-Dev-UserFiles directory."</span><br>    form <span class="token operator">:=</span> Form fromFileNamed<span class="token punctuation">:</span> <span class="token string">'./hot-air-balloon.png'</span> <span class="token punctuation">:</span><span class="token punctuation">:</span> magnifyBy<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">.</span><br>    image <span class="token operator">:=</span> ImageMorph newWith<span class="token punctuation">:</span> form<span class="token punctuation">.</span><br><br>    firstNameEntry <span class="token operator">:=</span> <span class="token keyword">self</span> textEntryOn<span class="token punctuation">:</span> <span class="token symbol">#firstName</span><span class="token punctuation">.</span><br>    lastNameEntry <span class="token operator">:=</span> <span class="token keyword">self</span> textEntryOn<span class="token punctuation">:</span> <span class="token symbol">#lastName</span><span class="token punctuation">.</span><br>    button <span class="token operator">:=</span> PluggableButtonMorph model<span class="token punctuation">:</span> <span class="token keyword">self</span> action<span class="token punctuation">:</span> <span class="token symbol">#greet</span> label<span class="token punctuation">:</span> <span class="token string">'Greet'</span><span class="token punctuation">.</span><br><br>    greetLabel <span class="token operator">:=</span> LabelMorph contents<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">.</span><br><br>    window <span class="token operator">:=</span> SystemWindow <span class="token keyword">new</span><span class="token punctuation">.</span><br>    window layoutMorph separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span><br>    window<br>        setLabel<span class="token punctuation">:</span> <span class="token string">'User Interaction Demo'</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> image<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">self</span> rowLabeled<span class="token punctuation">:</span> <span class="token string">'First Name:'</span> for<span class="token punctuation">:</span> firstNameEntry<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">self</span> rowLabeled<span class="token punctuation">:</span> <span class="token string">'Last Name:'</span> for<span class="token punctuation">:</span> lastNameEntry<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> button<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> greetLabel<span class="token punctuation">.</span><br><br>    <span class="token comment">"Set window size to the smallest height that contains its submorphs."</span><br>    extent <span class="token operator">:=</span> window layoutMorph minimumExtent<span class="token punctuation">.</span><br>    window<br>        morphExtent<span class="token punctuation">:</span> <span class="token number">400</span> <span class="token operator">@</span><span class="token operator">@</span> extent y<span class="token punctuation">;</span><br>        openInWorld<span class="token punctuation">.</span><br><br>    <span class="token comment">"Set a background color so it's clear where the TextModelMorphs<br>    are placed when they do not have focus."</span><br>    window layoutMorph color<span class="token punctuation">:</span> <span class="token punctuation">(</span>Color blue alpha<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><h2 id="mouse-events" tabindex="-1">Mouse Events</h2><p>To handle mouse clicks on a custom morph, add instance methods like the following to a <code>Morph</code> subclass. On each click, this changes the <code>fillColor</code> instance variable to a random color and signals that the <code>Morph</code> needs to be redrawn.</p><pre class="language-smalltalk"><code class="language-smalltalk">handlesMouseDown<br>    <span class="token operator">^</span> <span class="token boolean">true</span><br><br>mouseButton1Up<span class="token punctuation">:</span> aMouseEvent localPosition<span class="token punctuation">:</span> aPosition<br>    fillColor <span class="token operator">:=</span> Color random<span class="token punctuation">.</span><br>    <span class="token keyword">self</span> redrawNeeded<span class="token punctuation">.</span></code></pre><p>An alternative to adding instance methods is to set properties as follows, perhaps in the instance method <code>initialize</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk"><span class="token keyword">self</span><br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#handlesMouseDown</span><br>    toValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br><span class="token keyword">self</span><br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#mouseButton1Up</span><span class="token punctuation">:</span>localPosition<span class="token punctuation">:</span><br>    toValue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token variable">:position</span> <span class="token punctuation">|</span></span><br>        fillColor <span class="token operator">:=</span> Color random<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> redrawNeeded<br>    <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Using a receiver other that <code>self</code> for the message sends above enables configuring event handling on a specific instance of a <code>Morph</code> subclass rather than for all instances.</p><p>When listening for mouse events in a morph that is a subclass of <code>SystemWindow</code>, it is necessary to avoid intercepting mouse clicks on the buttons in the title bar. To do this, implement the <code>handlesMouseDown</code> method as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">handlesMouseDown<span class="token punctuation">:</span> aMouseEvent<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">localPoint</span> <span class="token punctuation">|</span></span><br><br>    localPoint <span class="token operator">:=</span> <span class="token keyword">self</span> internalizeFromWorld<span class="token punctuation">:</span> aMouseEvent eventPosition<span class="token punctuation">.</span><br>    <span class="token operator">^</span> localPoint y <span class="token operator">></span> <span class="token keyword">self</span> labelHeight<span class="token punctuation">.</span></code></pre><h2 id="keyboard-events" tabindex="-1">Keyboard Events</h2><p>To handle keyboard events on a custom morph, add instance methods like the following to a <code>Morph</code> subclass.</p><pre class="language-smalltalk"><code class="language-smalltalk">handlesKeyboard<br>    <span class="token operator">^</span> <span class="token keyword">self</span> visible<span class="token punctuation">.</span><br><br>mouseEnter<span class="token punctuation">:</span> event<br>    <span class="token punctuation">(</span>Preferences at<span class="token punctuation">:</span> <span class="token symbol">#focusFollowsMouse</span><span class="token punctuation">)</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span>event hand newKeyboardFocus<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>mouseLeave<span class="token punctuation">:</span> event<br>    <span class="token punctuation">(</span>Preferences at<span class="token punctuation">:</span> <span class="token symbol">#focusFollowsMouse</span><span class="token punctuation">)</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span>event hand releaseKeyboardFocus<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>keyboardFocusChange<span class="token punctuation">:</span> aBoolean<br>    <span class="token punctuation">(</span><span class="token string">'has keyboard focus? {1}'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span>aBoolean<span class="token punctuation">}</span><span class="token punctuation">)</span> print<span class="token punctuation">.</span><br><br>keyStroke<span class="token punctuation">:</span> aKeyboardEvent<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">char</span> <span class="token punctuation">|</span></span><br>    char <span class="token operator">:=</span> Character codePoint<span class="token punctuation">:</span> aKeyboardEvent keyValue<span class="token punctuation">.</span><br>    char logAs<span class="token punctuation">:</span> <span class="token string">'character'</span><span class="token punctuation">.</span> <span class="token comment">"defined in Getting Started"</span><br>    aKeyboardEvent isArrowUp ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'got up arrow'</span> print<span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Also see the <code>isArrowRight</code>, <code>isArrowDown</code>, and <code>isArrowLeft</code> methods.</p><h2 id="morphiccanvas" tabindex="-1">MorphicCanvas</h2><p>The <code>MorphicCanvas</code> class has many subclasses including <code>BitBltBoundsFinderCanvas</code>, <code>BitBltCanvas</code>, <code>BoundsFinderCanvas</code>, <code>HybridCanvas</code>, and <code>VectorCanvas</code>.</p><p><code>BitBltCanvas</code> is a legacy class that doesn't support vector graphics operations, anti-aliasing, or zooming. But it provides great performance due to its simplicity.</p><p>TODO: Is it worthwhile to learn about any of these besides <code>VectorCanvas</code>?</p><h2 id="drawing-details" tabindex="-1">Drawing Details</h2><p>How does the message <code>#drawOn:</code> get sent to each currently visible morph?</p><p>The abstract class <code>MorphicCanvas</code> defines the method <code>drawCurrentAndSubmorphs</code> as <code>subclassResponsibility</code>. The subclasses of <code>MorphicCanvas</code> which include <code>BitBltCanvas</code>, <code>BoundsFinderCanvas</code>, <code>HybridCanvas</code>, and <code>VectorCanvas</code>. all implement the <code>drawCurrentAndSubmorphs</code> method.</p><p>The <code>MorphicCanvas</code> method <code>fullDraw:</code> sends the message <code>#drawCurrentAndSubmorphs</code> to an instance of one of these <code>MorphicCanvas</code> subclasses. The <code>drawCurrentAndSubmorphs</code> method sends the message <code>#drawOn:</code> to the current morph and sends the message <code>#fullDraw</code> to each submorph.</p><p>The sequence of message sends that lead to the first call to <code>fullDraw:</code> is:</p><ul><li><code>UISupervisor class newUIProcess</code></li><li><code>UISupervisor class spawnNewMorphicProcessFor:</code></li><li><code>WorldMorph runProcess</code></li><li><code>WorldMorph mainLoop</code></li><li><code>WorldMorph displayWorldOn:</code></li><li><code>MorphicCanvas drawWorld:repair: calls</code></li><li><code>MorphicCanvas drawRoots:rootsDamage:backgroundDamage:</code></li><li><code>MorphicCanvas fullDraw:</code></li></ul><h2 id="borderedboxmorph" tabindex="-1">BorderedBoxMorph</h2><p>The <code>BorderedBoxMorph</code> class is a subclass of <code>ColoredBoxMorph</code>, which is a subclass of <code>BoxMorph</code>, which is a subclass of <code>PlacedMorph</code>. The <code>BorderedBoxMorph</code> class adds the instance variables <code>borderColor</code>, <code>borderWidth</code>, and <code>padding</code>. The <code>ColoredBoxMorph</code> class adds the instance variable <code>color</code>. The <code>BoxMorph</code> class adds the instance variable <code>extent</code> (width and height) and is intended for morphs that are rectangular.</p><p>TODO: The class comment for <code>BoxMorph</code> says &quot;DON'T subclass from here.&quot; Why?</p><p>All the developer tool windows are subclasses of <code>BorderedBoxMorph</code>. For example, System Browsers are implemented by the <code>BrowserWindow</code> class which has the following inheritance hierarchy.</p><ul><li><code>Object</code><ul><li><code>Morph</code><ul><li><code>PlacedMorph</code><ul><li><code>BoxMorph</code><ul><li><code>ColoredBoxMorph</code><ul><li><code>BorderedBoxMorph</code><ul><li><code>PluggableMorph</code><ul><li><code>SystemWindow</code><ul><li><code>CodeWindow</code><ul><li><code>BrowserWindow</code></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="systemwindow" tabindex="-1">SystemWindow</h2><p>To implement a custom window, create an instance of the class <code>SystemWindow</code> or a custom subclass of it. This supplies the standard buttons in the upper-left to close the window (red), minimize it (orange), toggle to and from full screen (green; not really the full screen), and open a menu of other window-related commands (blue).</p><p>The menu includes:</p><ul><li>change title...</li><li>window color... (broken?)</li><li>close others...</li><li>send to back</li><li>make next-to-topmost (moves behind one other window)</li><li>make undraggable/draggable (toggles)</li><li>close (same as red button)</li><li>collapse (same as orange button)</li><li>expand/contract (same as green button)</li><li>resize... (graphically select both location and size)</li></ul><p>The simplest way to create a <code>SystemWindow</code> that displays a single morph is to send <code>#embeddedInMorphicWindowLabeled:</code> to the morph with an argument that is the label to be displayed in the window title bar.</p><p><code>SystemWindow</code> subclasses have a default extent (size) that is the returned by the <code>initialExtent</code> method which returns <code>RealEstate standardWindowExtent</code> which is <code>1079@830</code>. Override the <code>initialExtent</code> method to use a different size.</p><p>The window title defaults to &quot;Untitled Window&quot;. To change this, send <code>#setLabel:</code> with an argument that is the desired title string to an instance.</p><p>Instances of this class have the instance property <code>layoutMorph</code> that is set to a <code>LayoutMorph</code> whose <code>direction</code> defaults to <code>#vertical</code>.</p><p>To specify the size of a <code>SystemWindow</code>, implement the instance method <code>initialExtent</code>. For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialExtent<br><br>    <span class="token operator">^</span> <span class="token number">400</span><span class="token operator">@</span><span class="token number">300</span></code></pre><p>To size a <code>SystemWindow</code> based on its contents, do the following AFTER the window has been opened, perhaps by sending it <code>#openInWorld</code>:</p><pre class="language-smalltalk"><code class="language-smalltalk">extent <span class="token operator">:=</span> window layoutMorph minimumExtent<span class="token punctuation">.</span><br>window morphExtent<span class="token punctuation">:</span> extent<span class="token punctuation">.</span></code></pre><p>Here's a basic example that demonstrates adding a World menu item that opens a custom subclass of <code>SystemWindow</code>. The window prompts for your name. When a name is entered, it displays &quot;Hello {name}!&quot; below in the text input.</p><p><img alt="window before entering name" style="width: 40%" src="/blog/assets/cuis-smalltalk-greeter1.png?v=1.1.1"></p><p><img alt="window after entering name" style="width: 40%" src="/blog/assets/cuis-smalltalk-greeter2.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">SystemWindow subclass<span class="token punctuation">:</span> <span class="token symbol">#Greeter</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Greeter'</span><br><br><span class="token comment">"class method"</span><br>worldMenuOptions<br>    <span class="token operator">^</span>`<span class="token punctuation">{</span><br>        <span class="token punctuation">{</span><br>            <span class="token symbol">#submenuOf</span> <span class="token operator">-</span><span class="token operator">></span> TheWorldMenu openLabel<span class="token punctuation">.</span><br>            <span class="token symbol">#itemGroup</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">.</span><br>            <span class="token symbol">#itemOrder</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">42</span><span class="token punctuation">.</span><br>            <span class="token symbol">#label</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Greeter'</span><span class="token punctuation">.</span><br>            <span class="token symbol">#object</span> <span class="token operator">-</span><span class="token operator">></span> Greeter<span class="token punctuation">.</span><br>            <span class="token symbol">#selector</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token symbol">#open</span><span class="token punctuation">.</span><br>            <span class="token symbol">#icon</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token symbol">#chatIcon</span><span class="token punctuation">.</span><br>            <span class="token symbol">#balloonText</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Opens a window where you can greet yourself'</span><span class="token punctuation">.</span><br>        <span class="token punctuation">}</span> asDictionary<br>    <span class="token punctuation">}</span>`<br><br><span class="token comment">"class method"</span><br>open<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">extent</span> <span class="token variable">window</span> <span class="token punctuation">|</span></span><br><br>    window <span class="token operator">:=</span> <span class="token keyword">self</span> <span class="token keyword">new</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Set window size to the smallest height that contains its submorphs."</span><br>    extent <span class="token operator">:=</span> window layoutMorph minimumExtent<span class="token punctuation">.</span><br>    window<br>        morphExtent<span class="token punctuation">:</span> <span class="token number">300</span> <span class="token operator">@</span> extent y<span class="token punctuation">;</span><br>        openInWorld<span class="token punctuation">.</span><br><br><span class="token comment">"instance method"</span><br>initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">column</span> <span class="token variable">greetingLabel</span> <span class="token variable">nameInput</span> <span class="token variable">row</span> <span class="token punctuation">|</span></span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br><br>    <span class="token keyword">self</span> setLabel<span class="token punctuation">:</span> <span class="token string">'Greeter'</span><span class="token punctuation">.</span><br><br>    nameInput <span class="token operator">:=</span> TextModelMorph withModel<span class="token punctuation">:</span> <span class="token punctuation">(</span>TextModel withText<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>    nameInput emptyTextDisplayMessage<span class="token punctuation">:</span> <span class="token string">'Enter your name'</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Don't warn the user that changes have not been saved when the window is closed."</span><br>    nameInput askBeforeDiscardingEdits<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">.</span><br><br>    greetingLabel <span class="token operator">:=</span> LabelMorph contents<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">.</span><br><br>    <span class="token comment">"Update greetingLabel on any keystroke in nameInput."</span><br>    nameInput keystrokeAction<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:event</span> <span class="token punctuation">|</span></span><br>        <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">name</span> <span class="token punctuation">|</span></span><br>        name <span class="token operator">:=</span> nameInput text<span class="token punctuation">.</span><br>        greetingLabel contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>name isEmpty<br>            ifTrue<span class="token punctuation">:</span> <span class="token string">''</span><br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'Hello '</span><span class="token operator">,</span> name<span class="token operator">,</span> <span class="token string">'!'</span> <span class="token punctuation">]</span><br>        <span class="token punctuation">)</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    row <span class="token operator">:=</span> LayoutMorph newRow<span class="token punctuation">.</span><br>    row separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span> <span class="token comment">"between child morphs; defaults to 0"</span><br>    row padding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token comment">"must set after separation"</span><br>    row<br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Name:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> nameInput proportionalWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span> <span class="token comment">"fills row"</span><br><br>    column <span class="token operator">:=</span> <span class="token keyword">self</span> layoutMorph<span class="token punctuation">.</span><br>    column separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span> <span class="token comment">"between child morphs; defaults to 0"</span><br>    column padding<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span> <span class="token comment">"around window edges; must set after separation"</span><br>    column<br>        addMorph<span class="token punctuation">:</span> row fixedHeight<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">"to use minimum height that fits row children"</span><br>        addMorph<span class="token punctuation">:</span> greetingLabel<span class="token punctuation">.</span><br><br>    <span class="token comment">"To left align all child morphs of column ...<br>    column submorphs do: [ :morph | morph layoutSpec offAxisEdgeWeight: #leftOrTop ]."</span></code></pre><h2 id="world-menu-items" tabindex="-1">World Menu Items</h2><p>To add menu items in the World menu, add the class method <code>worldMenuOptions</code> to any class. This method must returns an array of <code>Dictionary</code> objects, each of which describes a single menu item. Saving a new or modified <code>worldMenuOptions</code> method immediately updates the World menu.</p><p>For example:</p><pre class="language-smalltalk"><code class="language-smalltalk">worldMenuOptions<br>    <span class="token operator">^</span>`<span class="token punctuation">{</span><br>        <span class="token punctuation">{</span><br>            \<span class="token symbol">#submenuOf</span> <span class="token operator">-</span><span class="token operator">></span> TheWorldMenu openLabel<span class="token punctuation">.</span><br>            \<span class="token symbol">#itemGroup</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">.</span><br>            \<span class="token symbol">#itemOrder</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">41</span><span class="token punctuation">.</span><br>            \<span class="token symbol">#label</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Method Finder'</span><span class="token punctuation">.</span><br>            \<span class="token symbol">#object</span> <span class="token operator">-</span><span class="token operator">></span> MethodFinderWindow<span class="token punctuation">.</span><br>            \<span class="token symbol">#selector</span> <span class="token operator">-</span><span class="token operator">></span> \<span class="token symbol">#open</span><span class="token punctuation">.</span><br>            \<span class="token symbol">#icon</span> <span class="token operator">-</span><span class="token operator">></span> \<span class="token symbol">#inspectIcon</span><span class="token punctuation">.</span><br>            \<span class="token symbol">#balloonText</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'A tool for finding methods that return a given answer.'</span><span class="token punctuation">.</span><br>        <span class="token punctuation">}</span> asDictionary<br>    <span class="token punctuation">}</span>`</code></pre><p>The <code>#submenuOf</code> key is optional and specifies the submenu within the World menu where a menu item will be added. If this is omitted, the menu item will appear directly in the World menu. For example, the &quot;Open&quot; submenu is identified by <code>TheWorldMenu openLabel</code>. All the current submenus of the World menu are defined in the class method <code>worldMenuOptions</code> in the class <code>TheWorldMenu</code>. These include:</p><ul><li><code>TheWorldMenu openLabel</code></li><li><code>TheWorldMenu preferencesLabel</code></li><li><code>TheWorldMenu windowsLabel</code></li><li><code>TheWorldMenu helpLabel</code></li><li><code>TheWorldMenu changesLabel</code></li><li><code>TheWorldMenu debugLabel</code></li></ul><p>The <code>#itemGroup</code> key specifies the group within the target menu where a menu item will be added. The &quot;Open&quot; menu has four groups numbered 10, 20, 30, and $0.</p><p>The <code>#itemOrder</code> key specifies the order in which a menu item will appear in its menu. Within the &quot;Open&quot; menu, the existing menu items use the following values:</p><ul><li>Text Editor: 10</li><li>Workspace: 20</li><li>Browser: 30</li><li>SearchBrowser: 40</li><li>MessageNames: 40</li><li>Transcript: 50.</li></ul><p>So the example above places the menu item &quot;Method Finder&quot; after &quot;Message Names&quot;.</p><p>The <code>#label</code> key specifies the text that will appear in the menu item.</p><p>The <code>#object</code> key specifies the class that implements the menu item. An instance of this class will be created when the menu item is selected. This defaults to the current class when omitted.</p><p>The <code>#selector</code> key specifies the message that will be sent to the class (not an instance of it) specified in the <code>#object</code> key. Often the corresponding class method creates an instance of a <code>SystemWindow</code> subclass and opens it.</p><p>The <code>#icon</code> key is optional and specifies the icon that will appear before the menu item label. The value is a selector for a <code>Theme</code> class instance method in the &quot;icons&quot; method category.</p><p>The <code>#balloonText</code> key is optional and specifies tooltip text that will appear when hovering over the menu item.</p><p>To learn more about the existing menu items in the World menu, search for implementors of the <code>worldMenuOptions</code> method.</p><p>Here's a simple example where selecting a custom menu item writes to the Transcript. Create the class <code>Greeter</code> as a subclass of <code>Object</code> and add the following class methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">worldMenuOptions<br>    <span class="token operator">^</span>`<span class="token punctuation">{</span><br>        <span class="token punctuation">{</span><br>            <span class="token symbol">#submenuOf</span> <span class="token operator">-</span><span class="token operator">></span> TheWorldMenu openLabel<span class="token punctuation">.</span><br>            <span class="token symbol">#itemGroup</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">.</span><br>            <span class="token symbol">#itemOrder</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">42</span><span class="token punctuation">.</span><br>            <span class="token symbol">#label</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Greet'</span><span class="token punctuation">.</span><br>            <span class="token symbol">#object</span> <span class="token operator">-</span><span class="token operator">></span> MyMenuItem<span class="token punctuation">.</span><br>            <span class="token symbol">#selector</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token symbol">#greet</span><span class="token punctuation">.</span><br>            <span class="token symbol">#icon</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token symbol">#chatIcon</span><span class="token punctuation">.</span><br>            <span class="token symbol">#balloonText</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Writes a greeting to the Transcript'</span><span class="token punctuation">.</span><br>        <span class="token punctuation">}</span> asDictionary<br>    <span class="token punctuation">}</span>`<br><br>greet<br><br>    <span class="token string">'Hello World!'</span> print</code></pre><h2 id="fonts" tabindex="-1">Fonts</h2><p>To see a popup list of the installed fonts and fonts available to install, enter <code>FontFamily promptUser</code> in a Workspace and &quot;Do it&quot;. The installed font names are displayed using their font. To install a font, click its checkbox under &quot;Available to install&quot;. The list may include the following:</p><ul><li>Alex Brush</li><li>Amaranth</li><li>CMU Typewriter Text</li><li>DejaVu Sans (default)</li><li>JetBrains Mono NL</li><li>Kiwi Maru Light</li><li>Kurinto Sans (defines many Unicode characters such as the wastebasket)</li><li>Learning Curve</li><li>Noto Sans EqyptHiero</li><li>Parc Place Legacy</li><li>Source Sans 3</li></ul><p>The font files are located in the <code>Cuis-Smalltalk-Dev/TrueTypeFonts</code> directory. To add a new font, create a subdirectory whose name is the font name and place <code>.ttf</code> files for each variation of the font inside it.</p><p>To set the default font size used in the development environment:</p><pre class="language-smalltalk"><code class="language-smalltalk">Preferences at<span class="token punctuation">:</span> <span class="token symbol">#defaultFontSize</span> put<span class="token punctuation">:</span> <span class="token number">14</span></code></pre><p>To set the default font family used in the development environment:</p><pre class="language-smalltalk"><code class="language-smalltalk">PreferenceSet setDefaultFont<span class="token punctuation">:</span> <span class="token string">'Alex Brush'</span></code></pre><p>If an invalid font name is used, the environment will lock up. TODO: Report this!</p><p>To get a <code>Dictionary</code> of available font families:</p><pre class="language-smalltalk"><code class="language-smalltalk">fontFamilies <span class="token operator">:=</span> FontFamily availableFamilies</code></pre><p>To get the default font:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyAndPointSize</code></pre><p>To get the default font with a specified point size:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily defaultFamilyPointSize<span class="token punctuation">:</span> <span class="token number">18</span></code></pre><p>To get the point size from a <code>FontFamily</code> object, send it <code>#pointSize</code>.</p><p>To get a font for a specific family and point size:</p><pre class="language-smalltalk"><code class="language-smalltalk">font <span class="token operator">:=</span> FontFamily familyName<span class="token punctuation">:</span> <span class="token string">'Alex Brush'</span> pointSize<span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">.</span></code></pre><p>To get the point size from a <code>FontFamily</code> object, send it <code>#pointSize</code>.</p><p>To change the font used by all instances of <code>TextEditor</code>, add a line like the following to its <code>initialize</code> method:</p><pre class="language-smalltalk"><code class="language-smalltalk">defaultFont <span class="token operator">:=</span> FontFamily familyName<span class="token punctuation">:</span> <span class="token string">'JetBrains Mono NL'</span> pointSize<span class="token punctuation">:</span> <span class="token number">14</span><span class="token punctuation">.</span></code></pre><h2 id="button-labels" tabindex="-1">Button Labels</h2><p>Button labels are automatically shortened to fit within the button width using the <code>String</code> instance method <code>squeezeTo:</code>. It begins by removing spaces from right to left. It then removes vowels from right to left. Finally, it removes consonants from right to left and adds an ellipsis at the end.</p><h2 id="button-issue" tabindex="-1">Button Issue</h2><p>The class <code>PluggableButtonMorph</code> uses the value of <code>Theme current buttonLabel</code> as the color for the label on all instances. But sending <code>#color:</code> to an instance changes its background color. Depending the background color selected, this can result in poor contrast. It also uses an embossed font for the label.</p><p>A way to fix this, suggested by Mariano Montone, is to create a subclass of <code>PluggableButtonMorph</code> as follows:</p><ol><li><p>Define the following new class:</p><pre class="language-smalltalk"><code class="language-smalltalk">PluggableButtonMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#VButtonMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'labelColor'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span></code></pre></li><li><p>Define the following instance methods in the <code>VButtonMorph</code> class:</p><pre class="language-smalltalk"><code class="language-smalltalk">labelColor<br>    <span class="token operator">^</span>labelColor ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span>Theme current buttonLabel<span class="token punctuation">]</span><br><br>labelColor<span class="token punctuation">:</span> anObject<br>    labelColor <span class="token operator">:=</span> anObject</code></pre></li><li><p>Override <code>VButtonMorph</code> instance method <code>drawEmbossedLabelOn:</code> by copying the same method from <code>PluggableButtonMorph</code> and modifying two lines, the one that sets <code>colorForLabel</code> and the one that sets <code>embossed</code>.</p><pre class="language-smalltalk"><code class="language-smalltalk">drawEmbossedLabelOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">availableW</span> <span class="token variable">center</span> <span class="token variable">colorForLabel</span> <span class="token variable">f</span> <span class="token variable">l</span> <span class="token variable">labelMargin</span> <span class="token variable">targetSize</span> <span class="token variable">w</span> <span class="token variable">x</span> <span class="token variable">y</span> <span class="token punctuation">|</span></span><br>    label ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">"The next line was modified."</span><br>        colorForLabel <span class="token operator">:=</span> <span class="token keyword">self</span> enableLabelColorWith<span class="token punctuation">:</span> <span class="token keyword">self</span> labelColor<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> isPressed<br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                <span class="token keyword">self</span> mouseIsOver<br>                    ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                        colorForLabel <span class="token operator">:=</span> colorForLabel<br>                            adjustSaturation<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.10</span><br>                            brightness<span class="token punctuation">:</span> <span class="token number">0.10</span><br>                        <span class="token punctuation">]</span><br>                    <span class="token punctuation">]</span><br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>               colorForLabel <span class="token operator">:=</span> colorForLabel<br>                   adjustSaturation<span class="token punctuation">:</span> <span class="token number">0.0</span><br>                   brightness<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.07</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br>        f <span class="token operator">:=</span> <span class="token keyword">self</span> fontToUse<span class="token punctuation">.</span><br>        center <span class="token operator">:=</span> extent <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">.</span><br>        labelMargin <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">.</span><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> label<span class="token punctuation">.</span><br>        availableW <span class="token operator">:=</span> extent x <span class="token operator">-</span> labelMargin <span class="token operator">-</span> labelMargin<span class="token punctuation">.</span><br>        availableW <span class="token operator">>=</span> w<br>            ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span>l <span class="token operator">:=</span> label<span class="token punctuation">]</span><br>            ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                x <span class="token operator">:=</span> labelMargin<span class="token punctuation">.</span><br>                targetSize <span class="token operator">:=</span> label size <span class="token operator">*</span> availableW <span class="token operator">//</span> w<span class="token punctuation">.</span><br>                l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize<span class="token punctuation">.</span><br>                <span class="token punctuation">(</span>f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">)</span> <span class="token operator">></span> availableW ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                    targetSize <span class="token operator">:=</span> targetSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span><br>                    l <span class="token operator">:=</span> label squeezedTo<span class="token punctuation">:</span> targetSize <span class="token punctuation">]</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>        w <span class="token operator">:=</span> f widthOfString<span class="token punctuation">:</span> l<span class="token punctuation">.</span><br>        x <span class="token operator">:=</span> center x <span class="token operator">-</span> <span class="token punctuation">(</span>w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        y <span class="token operator">:=</span> center y <span class="token operator">-</span> <span class="token punctuation">(</span>f lineSpacing <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>        aCanvas<br>            drawString<span class="token punctuation">:</span> l<br>            at<span class="token punctuation">:</span> x<span class="token operator">@</span>y<br>            font<span class="token punctuation">:</span> f<br>            color<span class="token punctuation">:</span> colorForLabel<br>            <span class="token comment">"The next line was modified."</span><br>            embossed<span class="token punctuation">:</span> <span class="token boolean">false</span><br>    <span class="token punctuation">]</span></code></pre></li></ol><h2 id="button-demo-in-cuis" tabindex="-1">Button Demo in Cuis</h2><p>Add this code in a Workspace, select it all, and &quot;Do it&quot;. It uses the class <code>VButtonMorph</code> defined above.</p><pre class="language-smalltalk"><code class="language-smalltalk">label <span class="token operator">:=</span> LabelMorph <span class="token keyword">new</span><br>  contents<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>  color<span class="token punctuation">:</span> Color white<span class="token punctuation">.</span><br>decBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Decrement'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color red<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span>label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> asString<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>incBtn <span class="token operator">:=</span> VButtonMorph <span class="token keyword">new</span><br>  color<span class="token punctuation">:</span> Color yellow<span class="token punctuation">;</span><br>  label<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">;</span><br>  labelColor<span class="token punctuation">:</span> Color green<span class="token punctuation">;</span><br>  model<span class="token punctuation">:</span> <span class="token punctuation">[</span>label contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>label contents asNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> asString<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>layout <span class="token operator">:=</span> LayoutMorph <span class="token keyword">new</span><br>  addMorph<span class="token punctuation">:</span> decBtn<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> label<span class="token punctuation">;</span><br>  addMorph<span class="token punctuation">:</span> incBtn<span class="token punctuation">;</span><br>  <span class="token comment">"color: Color transparent ;"</span><br>  separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>  location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">70</span><span class="token operator">@</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   rotateBy<span class="token punctuation">:</span> <span class="token number">15</span> degreesToRadians<span class="token punctuation">;</span><br>  scale<span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">;</span><br>  openInWorld<span class="token punctuation">.</span><br><br><span class="token comment">"Add horizontal padding in buttons."</span><br>decBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>incBtn morphWidth<span class="token punctuation">:</span> <span class="token punctuation">(</span>incBtn morphWidth <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p>To delete this from the World, enter layoutDelete in the Workspaces and &quot;Do it&quot;, or open the halo for the <code>LayoutMorph</code> and click the red button in the upper-left.</p><h2 id="svg" tabindex="-1">SVG</h2><p>To work with SVG images:</p><ul><li><p>Clone the following Git repositories from Cuis Smalltalk:</p><ul><li><a href="https://github.com/Cuis-Smalltalk/Numerics.git" target="_blank">Numerics</a></li><li><a href="https://github.com/Cuis-Smalltalk/SVG.git" target="_blank">SVG</a></li></ul></li><li><p>Open a Workspace and install the package <code>SVG</code>.</p><p>enter <code>Feature require: #SVG</code> and &quot;Do it&quot;.</p></li><li><p>Enter <code>SVGMainMorph exampleTiger openInWorld</code> and &quot;Do it&quot;.</p></li></ul><p>There are many more example class methods in the <code>SVGMainMorph</code> class. To open all the SVG examples, enter <code>SVGMainMorph openAllExamples SVGMainMorph</code> and &quot;Do it&quot;. To delete all those morphs, enter <code>SVGMainMorph allInstancesDo: [:obj | obj delete]</code>.</p><p>Another way to open all the SVG examples is to use reflection as follows:</p><pre class="language-smalltalk"><code class="language-smalltalk">selectors <span class="token operator">:=</span> SVGMainMorph class allMethodsInCategory<span class="token punctuation">:</span> <span class="token symbol">#examples</span><span class="token punctuation">.</span><br>selectors do<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:selector</span> <span class="token punctuation">|</span></span><br>    <span class="token punctuation">(</span>selector beginsWith<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">)</span> ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">(</span>SVGMainMorph perform<span class="token punctuation">:</span> selector<span class="token punctuation">)</span> openInWorld<br>    <span class="token punctuation">]</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="full-screen-buttons" tabindex="-1">Full Screen Buttons</h2><p>You can add buttons to the World that simplify toggling full screen mode. The following class defines a class method <code>buttons</code> that displays buttons that activate and deactivate full screen mode.</p><p><img alt="Cuis full screen buttons" class="logo" style="width: 20%" src="/blog/assets/cuis-full-screen-buttons.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#VFullScreenButtons</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br>fullScreen<span class="token punctuation">:</span> aBoolean<br>    Display fullScreenMode<span class="token punctuation">:</span> aBoolean<span class="token punctuation">.</span><br>    Display newDepth<span class="token punctuation">:</span> Display depth<br><br>fullScreenOff<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">false</span><br><br>fullScreenOn<br>    <span class="token keyword">self</span> fullScreen<span class="token punctuation">:</span> <span class="token boolean">true</span><br><br>initialize<br>    <span class="token comment">"renders buttons for setting full screen on or off"</span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    LayoutMorph newColumn<br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Full Screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span>LayoutMorph newRow<br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'On'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> fullScreenOn<span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            addMorph<span class="token punctuation">:</span> <span class="token punctuation">(</span><br>                VButtonMorph label<span class="token punctuation">:</span> <span class="token string">'Off'</span> block<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> fullScreenOff<span class="token punctuation">]</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>            color<span class="token punctuation">:</span> Color transparent<br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        location<span class="token punctuation">:</span> <span class="token punctuation">(</span>MorphicTranslation withTranslation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">@</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        openInWorld</code></pre><h2 id="morph-methods" tabindex="-1">Morph Methods</h2><p>The <code>Morph</code> class provides a large number of instance methods. Highlights are provided in the following table:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>collides</code></td><td>answers <code>Boolean</code> indicating if receiver contour overlaps argument contour</td></tr></tbody></table><p>TODO: Add more methods to this table.</p><h2 id="popups" tabindex="-1">Popups</h2><p>The classes <code>PopUpMenu</code>, <code>SelectionMenu</code>, and <code>StringRequestMorph</code> all display a dialog that shares information with users or prompts them for input.</p><h3 id="popupmenu" tabindex="-1">PopUpMenu</h3><p>The class <code>PopUpMenu</code> provides an easy way to render a dialog that displays information, asks the user for confirmation, or ask the user to select an option. It is similar to the JavaScript DOM functions <code>alert</code> and <code>confirm</code>.</p><p>For example:</p><p><img alt="Cuis PopupMenu inform" style="width: 50%" src="/blog/assets/cuis-popupmenu-inform.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">PopUpMenu inform<span class="token punctuation">:</span> <span class="token string">'Something interesting just happened.'</span><span class="token punctuation">.</span></code></pre><p><img alt="Cuis PopupMenu confirm" style="width: 32%" src="/blog/assets/cuis-popupmenu-confirm.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">likesIceCream <span class="token operator">:=</span> PopUpMenu confirm<span class="token punctuation">:</span> <span class="token string">'Do you like ice cream?'</span><span class="token punctuation">.</span><br>likesIceCream print<span class="token punctuation">.</span> <span class="token comment">"prints true or false"</span></code></pre><p><img alt="Cuis PopupMenu confirm:trueChoice:falseChoice:" style="width: 32%" src="/blog/assets/cuis-popupmenu-confirm-truechoice-falsechoice.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">likesIceCream <span class="token operator">:=</span> PopUpMenu<br>    confirm<span class="token punctuation">:</span> <span class="token string">'Do you like ice cream?'</span><br>    trueChoice<span class="token punctuation">:</span> <span class="token string">'Love it!'</span><br>    falseChoice<span class="token punctuation">:</span> <span class="token string">'Not for me'</span><span class="token punctuation">.</span><br>likesIceCream print<span class="token punctuation">.</span> <span class="token comment">"prints true or false"</span></code></pre><p><img alt="Cuis PopupMenu withCaption:chooseFrom" style="width: 24%" src="/blog/assets/cuis-popupmenu-withcaption-choosefrom.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">color <span class="token operator">:=</span> PopUpMenu withCaption<span class="token punctuation">:</span> <span class="token string">'Choose a color.'</span> chooseFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token string">'red'</span> <span class="token string">'green'</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>color print<span class="token punctuation">.</span> <span class="token comment">"prints choice index 1, 2, or 3"</span></code></pre><h3 id="selectionmenu" tabindex="-1">SelectionMenu</h3><p>The <code>SelectionMenu</code> class is a subclass of <code>PopupMenu</code>. For example:</p><p><img alt="Cuis SelectionMenu" style="width: 18%" src="/blog/assets/cuis-selectionmenu.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">labels <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span>burrito enchilada taco chips quacamole salsa water soda tea<span class="token punctuation">)</span><span class="token punctuation">.</span><br>lines <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">"draw lines after these indexes"</span><br>menu <span class="token operator">:=</span> SelectionMenu labels<span class="token punctuation">:</span> labels lines<span class="token punctuation">:</span> lines<span class="token punctuation">.</span><br>selection <span class="token operator">:=</span> menu startUpMenu<span class="token punctuation">.</span><br>selection print<span class="token punctuation">.</span> <span class="token comment">"prints selected label index"</span></code></pre><p>The following code demonstrates opening a <code>SelectionMenu</code> when a button is clicked.</p><p><img alt="Cuis SelectionMenu closed" style="width: 40%" src="/blog/assets/cuis-selectionmenu1.png?v=1.1.1"></p><p><img alt="Cuis SelectionMenu open" style="width: 40%" src="/blog/assets/cuis-selectionmenu2.png?v=1.1.1"></p><p><img alt="Cuis SelectionMenu selected" style="width: 40%" src="/blog/assets/cuis-selectionmenu3.png?v=1.1.1"></p><p>Define the following class:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#MenuDemo</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'colorButton colorMenu statusLabel colors window'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Demos'</span></code></pre><p>Define the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">layout</span> <span class="token punctuation">|</span></span><br><br>    colorButton <span class="token operator">:=</span> PluggableButtonMorph<br>        model<span class="token punctuation">:</span> <span class="token keyword">self</span><br>        action<span class="token punctuation">:</span> <span class="token symbol">#openMenu</span><br>        label<span class="token punctuation">:</span> <span class="token string">'Select Color'</span><span class="token punctuation">.</span><br><br>    colors <span class="token operator">:=</span> <span class="token symbol">#</span><span class="token punctuation">(</span>red orange yellow green blue purple<span class="token punctuation">)</span><span class="token punctuation">.</span><br>    colorMenu <span class="token operator">:=</span> SelectionMenu labels<span class="token punctuation">:</span> colors lines<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>    statusLabel <span class="token operator">:=</span> LabelMorph contents<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">.</span><br><br>    window <span class="token operator">:=</span> SystemWindow <span class="token keyword">new</span><span class="token punctuation">.</span><br>    window<br>        setLabel<span class="token punctuation">:</span> <span class="token string">'Menu Demo'</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> colorButton<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> statusLabel<span class="token punctuation">.</span><br><br>    <span class="token comment">"Set window size to the smallest height that contains its submorphs."</span><br>    layout <span class="token operator">:=</span> window layoutMorph<span class="token punctuation">.</span><br>    layout separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span><br>    window<br>        morphExtent<span class="token punctuation">:</span> <span class="token number">300</span> <span class="token operator">@</span> layout minimumExtent y<span class="token punctuation">;</span><br>        openInWorld<span class="token punctuation">.</span><br><br>openMenu<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">color</span> <span class="token variable">colorName</span> <span class="token variable">index</span> <span class="token punctuation">|</span></span><br><br>    index <span class="token operator">:=</span> colorMenu startUpMenu<span class="token punctuation">.</span><br>    index <span class="token operator">=</span> <span class="token number">0</span> ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        colorName <span class="token operator">:=</span> colors at<span class="token punctuation">:</span> index<span class="token punctuation">.</span><br>        colorButton label<span class="token punctuation">:</span> colorName<span class="token punctuation">.</span><br>        statusLabel contents<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'You selected {1}.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span> colorName <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>        color <span class="token operator">:=</span> colorName<br>            ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span> Color gray <span class="token punctuation">]</span><br>            ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>                <span class="token punctuation">[</span> Color perform<span class="token punctuation">:</span> colorName <span class="token punctuation">]</span><br>                    on<span class="token punctuation">:</span> MessageNotUnderstood<br>                    do<span class="token punctuation">:</span> <span class="token punctuation">[</span> Color gray <span class="token punctuation">]</span><br>            <span class="token punctuation">]</span><span class="token punctuation">.</span><br>        window layoutMorph color<span class="token punctuation">:</span> <span class="token punctuation">(</span>color alpha<span class="token punctuation">:</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span></code></pre><p>To run this, evaluate <code>MenuDemo new</code> in a Workspace.</p><h3 id="stringrequestmorph" tabindex="-1">StringRequestMorph</h3><p>The class <code>StringRequestMorph</code> prompts the user to enter a text response. It can verify the response using a provided block that returns a Boolean value indicating whether the response is valid. It can also evaluate a block if the user clicks the cancel button.</p><p>For example:</p><p><img alt="Cuis StringRequestMorph" style="width: 40%" src="/blog/assets/cuis-stringrequestmorph.png?v=1.1.1"></p><pre class="language-smalltalk"><code class="language-smalltalk">StringRequestMorph<br>    request<span class="token punctuation">:</span> <span class="token string">'Comment'</span><br>    initialAnswer<span class="token punctuation">:</span> <span class="token string">'no comment'</span><br>    verifying<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:answer</span> <span class="token punctuation">|</span></span> answer isEmpty not <span class="token punctuation">]</span><br>    do<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token block-arguments"><span class="token variable">:answer</span> <span class="token punctuation">|</span></span> answer print <span class="token punctuation">]</span><br>    orCancel<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'canceled'</span> print <span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><h2 id="pluggablelistmorph" tabindex="-1">PluggableListMorph</h2><p>The <code>PluggableListMorph</code> displays a scrollable list of items. Users can select an item by clicking it or by typing its first few letters.</p><p>The follow code implements a small application that allows users to select a color from a list to change the background color of the window. Users can also add new colors and delete existing colors.</p><p>In addition to demonstrating the use of <code>PluggableListMorph</code>, this also disables buttons when their use is not appropriate.</p><p><img alt="Cuis PluggableListMorph" style="width: 30%" src="/blog/assets/cuis-pluggablelistmorph.png?v=1.1.1"></p><p>Create the following class:</p><pre class="language-smalltalk"><code class="language-smalltalk">Object subclass<span class="token punctuation">:</span> <span class="token symbol">#ListDemo</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'colorList colors deleteButton newColorEntry selectedColorIndex selectedLabel window'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'LayoutMorphDemos'</span></code></pre><p>Add the following instance methods:</p><pre class="language-smalltalk"><code class="language-smalltalk">initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">addButton</span> <span class="token variable">layout</span> <span class="token variable">row</span> <span class="token punctuation">|</span></span><br><br>    colors <span class="token operator">:=</span> SortedCollection newFrom<span class="token punctuation">:</span> <span class="token symbol">#</span><span class="token punctuation">(</span>red orange yellow green blue purple<span class="token punctuation">)</span><span class="token punctuation">.</span><br>    selectedColorIndex <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    colorList <span class="token operator">:=</span> PluggableListMorph<br>        withModel<span class="token punctuation">:</span> <span class="token keyword">self</span><br>        listGetter<span class="token punctuation">:</span> <span class="token symbol">#colors</span><br>        indexGetter<span class="token punctuation">:</span> <span class="token symbol">#selectedColorIndex</span><br>        indexSetter<span class="token punctuation">:</span> <span class="token symbol">#selectedColorIndex</span><span class="token punctuation">:</span><span class="token punctuation">.</span><br>    colorList layoutSpec proportionalWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br><br>    newColorEntry <span class="token operator">:=</span>  <span class="token keyword">self</span> textEntryOn<span class="token punctuation">:</span> <span class="token symbol">#newColor</span><span class="token punctuation">.</span><br>    newColorEntry emptyTextDisplayMessage<span class="token punctuation">:</span> <span class="token string">'new color'</span><span class="token punctuation">.</span><br><br>    addButton <span class="token operator">:=</span> PluggableButtonMorph model<span class="token punctuation">:</span> <span class="token keyword">self</span> action<span class="token punctuation">:</span> <span class="token symbol">#addColor</span> label<span class="token punctuation">:</span> <span class="token string">'Add'</span><span class="token punctuation">.</span><br><br>    row <span class="token operator">:=</span> LayoutMorph newRow<br>        gap<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> newColorEntry<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> addButton<span class="token punctuation">.</span><br><br>    deleteButton <span class="token operator">:=</span> PluggableButtonMorph<br>        model<span class="token punctuation">:</span> <span class="token keyword">self</span><br>        action<span class="token punctuation">:</span> <span class="token symbol">#deleteColor</span><br>        label<span class="token punctuation">:</span> <span class="token string">'Delete Selected Color'</span><span class="token punctuation">.</span><br><br>    selectedLabel <span class="token operator">:=</span> LabelMorph contents<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">.</span><br><br>    window <span class="token operator">:=</span> SystemWindow <span class="token keyword">new</span><span class="token punctuation">.</span><br>    window<br>        setLabel<span class="token punctuation">:</span> <span class="token string">'List Demo'</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> colorList<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> row<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> deleteButton<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> selectedLabel<span class="token punctuation">.</span><br><br>    <span class="token comment">"Set window size to the smallest height that contains its submorphs."</span><br>    layout <span class="token operator">:=</span> window layoutMorph<span class="token punctuation">.</span><br>    layout separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">.</span><br>    window<br>        morphExtent<span class="token punctuation">:</span> <span class="token number">250</span> <span class="token operator">@</span> layout minimumExtent y<span class="token punctuation">;</span><br>        openInWorld<span class="token punctuation">.</span><br><br>    <span class="token keyword">self</span> selectedColorIndex<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span> <span class="token comment">"sets initial background color"</span><br><br>colors<br>    <span class="token operator">^</span> colors<br><br>newColor<br>    <span class="token comment">"In this app there is no need to retrieve this value<br>    or even hold it in an instance variable, but<br>    TextModelMorph requires that this method exists."</span><br><br>    <span class="token operator">^</span> <span class="token string">''</span><br><br>newColor<span class="token punctuation">:</span> aText<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">potentialColor</span> <span class="token punctuation">|</span></span><br><br>    potentialColor <span class="token operator">:=</span> aText asString withBlanksTrimmed<span class="token punctuation">.</span><br>    potentialColor ifNotEmpty<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        colors add<span class="token punctuation">:</span> potentialColor asSymbol<span class="token punctuation">.</span><br>        colorList updateList<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> selectedColorIndex<span class="token punctuation">:</span> <span class="token punctuation">(</span>colors indexOf<span class="token punctuation">:</span> potentialColor <span class="token punctuation">)</span><span class="token punctuation">.</span><br>        <span class="token keyword">self</span> changed<span class="token punctuation">:</span> <span class="token symbol">#clearUserEdits</span><span class="token punctuation">.</span><br>        <span class="token keyword">self</span> changed<span class="token punctuation">:</span> <span class="token symbol">#newColor</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>selectedColorIndex<br>    <span class="token operator">^</span> selectedColorIndex<br><br>selectedColorIndex<span class="token punctuation">:</span> anIndex<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">color</span> <span class="token variable">colorName</span> <span class="token variable">selected</span> <span class="token punctuation">|</span></span><br><br>    selectedColorIndex <span class="token operator">:=</span> anIndex<span class="token punctuation">.</span><br><br>    selected <span class="token operator">:=</span> anIndex <span class="token operator">~=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    deleteButton enable<span class="token punctuation">:</span> selected<span class="token punctuation">.</span><br>    colorName <span class="token operator">:=</span> selected ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> colors at<span class="token punctuation">:</span> anIndex <span class="token punctuation">]</span><span class="token punctuation">.</span><br><br>    selectedLabel contents<span class="token punctuation">:</span> <span class="token punctuation">(</span>colorName<br>        ifNil<span class="token punctuation">:</span> <span class="token string">''</span><br>        ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'You selected {1}.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span> colorName <span class="token punctuation">}</span> <span class="token punctuation">]</span><br>    <span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>    color <span class="token operator">:=</span> colorName<br>        ifNil<span class="token punctuation">:</span> <span class="token punctuation">[</span> Color gray <span class="token punctuation">]</span><br>        ifNotNil<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>          <span class="token punctuation">[</span> Color perform<span class="token punctuation">:</span> colorName <span class="token punctuation">]</span><br>              on<span class="token punctuation">:</span> MessageNotUnderstood<br>              do<span class="token punctuation">:</span> <span class="token punctuation">[</span> Color gray <span class="token punctuation">]</span><br>        <span class="token punctuation">]</span><span class="token punctuation">.</span><br>    window layoutMorph color<span class="token punctuation">:</span> <span class="token punctuation">(</span>color alpha<span class="token punctuation">:</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><br><br>addColor<br>    <span class="token keyword">self</span> newColor<span class="token punctuation">:</span> newColorEntry text<br><br>deleteColor<br><br>    selectedColorIndex <span class="token operator">=</span> <span class="token number">0</span> ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        colors removeAt<span class="token punctuation">:</span> selectedColorIndex<span class="token punctuation">.</span><br>        <span class="token keyword">self</span> selectedColorIndex<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span><br>        colorList updateList<span class="token punctuation">.</span><br>        selectedLabel contents<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">.</span><br>    <span class="token punctuation">]</span><br><br>textEntryOn<span class="token punctuation">:</span> aSymbol<br>    <span class="token comment">"Answer a TextModelMorph where aSymbol provides the name for the getter and setter."</span><br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">entry</span> <span class="token punctuation">|</span></span><br><br>    entry <span class="token operator">:=</span> TextModelMorph<br>        textProvider<span class="token punctuation">:</span> <span class="token keyword">self</span><br>        textGetter<span class="token punctuation">:</span> aSymbol<br>        textSetter<span class="token punctuation">:</span> <span class="token punctuation">(</span>aSymbol<span class="token operator">,</span> <span class="token string">':'</span><span class="token punctuation">)</span> asSymbol <span class="token punctuation">:</span><span class="token punctuation">:</span><br>        acceptOnCR<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        askBeforeDiscardingEdits<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        hideScrollBarsIndefinitely<span class="token punctuation">;</span><br>        <span class="token comment">"Width is made proportional below.<br>        Setting height to zero causes it to use minimum height for one line."</span><br>        morphExtent<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">@</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    entry layoutSpec proportionalWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    <span class="token operator">^</span> entry<span class="token punctuation">.</span></code></pre><p>To run this, evaluate <code>ListDemo new</code> in a Workspace.</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>The <code>Morph</code> class provides many methods for event handling in the &quot;events&quot; method category. Examples include:</p><ul><li><code>keyDown:</code></li><li><code>keyStroke:</code></li><li><code>keyUp:</code></li><li><code>keyboardFocusChange:</code></li><li><code>keyboardShortcut:</code></li><li><code>mouseButton1Down:localPosition:</code></li><li><code>mouseButton1Up:localPosition:</code></li><li><code>mouseButton2Down:localPosition:</code></li><li><code>mouseButton2Up:localPosition:</code></li><li><code>mouseButton3Down:localPosition:</code></li><li><code>mouseButton3Up:localPosition:</code></li><li><code>mouseEnter:</code></li><li><code>mouseHover:localPosition:</code></li><li><code>mouseLeave:</code></li><li><code>mouseMove:localPosition:</code></li><li><code>mouseScroll:localPosition:</code></li><li><code>windowEvent:</code></li></ul><p>The keyboard and mouse event handling methods are only called if the <code>Morph</code> is configured to handle them. For example, the <code>keyDown:</code>, <code>keyUp:</code>, and <code>keyStroke:</code> methods are only called if the <code>handlesKeyboard:</code> method is implemented to return <code>true</code>. Also, the <code>mouseEnter:</code> and <code>mouseLeave:</code> methods are only called if the <code>handlesMouseOver:</code> method is implemented to return <code>true</code>. See comments in each event handling method to determine how to enable it.</p><p>TODO: For a good code example, see <code>VGreet</code> class in the <code>Volkmann</code> category.</p><p>Each of these methods is passed a <code>MorphicEvent</code> object. To get the <code>Morph</code> object that triggered the event, send the message <code>#hand</code> to the event object.</p><p>To move focus to a <code>Morph</code>, get the instance of the <code>HandMorph</code> and send it the message <code>#newKeyboardFocus:</code> with the morph as the argument. To give up focus from a <code>Morph</code>, send the <code>HandMorph</code> the message <code>#releaseKeyboardFocus:</code> with the morph as the argument. The <code>HandMorph</code> can be obtained by sending <code>runningWorld activeHand</code> to any morph.</p><p>The <code>Morph</code> class provides several methods for focus handling in the &quot;focus handling&quot; method category. These include:</p><ul><li><code>hasKeyboardFocus</code> - answers a <code>Boolean</code></li><li><code>hasMouseFocus</code> - answers a <code>Boolean</code></li><li><code>keyboardFocusChange</code> - sent to morphs when they gain or lose focus</li><li><code>keyboardFocused</code> TODO: Why does this not have any code?</li></ul><p>Consider changing the background color of a custom <code>Morph</code> when it gains and loses focus.</p><p>The class <code>EventSensor</code> handles keyboard and mouse events.</p><p>TODO: Add much more detail on this.</p><p>The inheritance hierarchy of classes that describe events is as follows:</p><ul><li><code>MorphicEvent</code><ul><li><code>DropEvent</code></li><li><code>DropFilesEvent</code></li><li><code>UserInputEvent</code><ul><li><code>KeyboardEvent</code></li><li><code>MouseEvent</code><ul><li><code>MouseButtonEvent</code></li><li><code>MouseMoveEvent</code></li><li><code>MouseScrollEvent</code></li></ul></li></ul></li><li><code>WindowEvent</code></li></ul></li></ul><p>To add event handling to a specific <code>Morph</code> instances instead of adding it to the definition of a <code>Morph</code> subclass:</p><ul><li><p>Open the halo of the <code>Morph</code>.</p></li><li><p>Click the blue Menu button.</p></li><li><p>Press cmd-c (copy to clipboard).</p></li><li><p>Open a Workspace.</p></li><li><p>Press cmd-v (paste) which will insert a <code>Morph</code> reference like <code>ellipseMorph2611483</code>.</p></li><li><p>After the <code>Morph</code> reference, add code like the following:</p><pre class="language-smalltalk"><code class="language-smalltalk">ellipseMorph2611483 setProperty<span class="token punctuation">:</span> <span class="token symbol">#handlesMouseDown</span> toValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>ellipseMorph2611483<br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#mouseButton1Up</span><span class="token punctuation">:</span>localPosition<span class="token punctuation">:</span><br>    toValue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token variable">:position</span> <span class="token punctuation">|</span></span> <span class="token keyword">self</span> inform<span class="token punctuation">:</span> <span class="token string">'got click'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>Be careful when using <code>setProperty:</code> that the <code>Symbol</code> argument value is spelled correctly!</p></li><li><p>Select those lines of code and &quot;Do it&quot;.</p></li><li><p>Click the <code>Morph</code>.</p></li><li><p>Verify that a PopUpMenu appears containing &quot;got click&quot;.</p></li></ul><p>To create and configure an <code>EllipseMorph</code> in code:</p><pre class="language-smalltalk"><code class="language-smalltalk">em <span class="token operator">:=</span> EllipseMorph <span class="token keyword">new</span> openInWorld<span class="token punctuation">.</span><br>em setProperty<span class="token punctuation">:</span> <span class="token symbol">#handlesMouseDown</span> toValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">.</span><br>em<br>    setProperty<span class="token punctuation">:</span> <span class="token symbol">#mouseButton1Up</span><span class="token punctuation">:</span>localPosition<span class="token punctuation">:</span><br>    toValue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token block-arguments"><span class="token variable">:event</span> <span class="token variable">:position</span> <span class="token punctuation">|</span></span> <span class="token keyword">self</span> inform<span class="token punctuation">:</span> <span class="token string">'got click'</span><span class="token punctuation">]</span><span class="token punctuation">.</span></code></pre><p>The following class defines a <code>Morph</code> subclass that renders a close icon. The icon changes color when the mouse cursor is over it or it is pressed.</p><pre class="language-smalltalk"><code class="language-smalltalk">PluggableButtonMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#CloseButton</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Demo'</span><br><br>drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token keyword">super</span> drawOn<span class="token punctuation">:</span> aCanvas<span class="token punctuation">.</span><br>    aCanvas drawCloseIcon<span class="token punctuation">.</span></code></pre><p>Other methods to draw icons provided in the <code>AbstractVectorCanvas</code> class include <code>drawCollapseIcon</code>, <code>drawDownIcon</code>, <code>drawExpandIcon</code>, <code>drawHandleLarge</code>, <code>drawHandSmall</code>, <code>drawLeftIcon</code>, <code>drawMenuIcon</code>, <code>drawPushPinIcon</code>, <code>drawRightIcon</code>, and <code>drawUpIcon</code>.</p><p>The following code demonstrates using the <code>CloseButton</code> class in another morph to delete it.</p><pre class="language-smalltalk"><code class="language-smalltalk">PlacedMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#DeletableMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Demo'</span><br><br> initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">closeButton</span> <span class="token variable">label</span> <span class="token variable">layout</span> <span class="token punctuation">|</span></span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br><br>    closeButton <span class="token operator">:=</span> CloseButton model<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">self</span> delete <span class="token punctuation">]</span> action<span class="token punctuation">:</span> <span class="token symbol">#value</span><span class="token punctuation">.</span><br>    closeButton layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">.</span><br><br>    label <span class="token operator">:=</span> LabelMorph contents<span class="token punctuation">:</span> <span class="token string">'Delete Me'</span><span class="token punctuation">.</span><br>    label layoutSpec offAxisEdgeWeight<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span><br><br>    layout <span class="token operator">:=</span> LayoutMorph newColumn<span class="token punctuation">.</span><br>    layout<br>        separation<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> closeButton<span class="token punctuation">;</span><br>        addMorph<span class="token punctuation">:</span> label<span class="token punctuation">.</span><br><br>    <span class="token keyword">self</span> addMorph<span class="token punctuation">:</span> layout<span class="token punctuation">.</span><br><br>drawOn<span class="token punctuation">:</span> aCanvas<br>    <span class="token comment">"This overrides the method in Morph to do nothing<br>    so a blue rectangle is not drawn."</span></code></pre><h2 id="animation" tabindex="-1">Animation</h2><p>Animation in Morphic is achieved through stepping. Subclasses of <code>Morph</code> add animation by defining two instance methods. The <code>step</code> method defines what to do at each step of the animation and the optional <code>stepTime</code> method returns the number of milliseconds to delay between each step (defaults to 1000). After an instance of the morph is opened, send it the messages <code>#startStepping</code> and <code>#stopStepping</code> to start and stop the animation.</p><p>The following class animates the size of a <code>ColoredMorph</code> subclass.</p><pre class="language-smalltalk"><code class="language-smalltalk">ColoredBoxMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#AnimatedMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'delta maxSize minSize'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Demo'</span><br><br><span class="token comment">"class methods"</span><br><br>open<br><br>    <span class="token keyword">self</span> <span class="token keyword">new</span> openInWorld startStepping<br><br><span class="token comment">"instance methods"</span><br><br>initialize<br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    delta <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    maxSize <span class="token operator">:=</span> <span class="token number">200</span><span class="token punctuation">.</span><br>    minSize <span class="token operator">:=</span> <span class="token number">50</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> morphExtent<span class="token punctuation">:</span> minSize <span class="token operator">@</span> minSize<span class="token punctuation">.</span><br>    <span class="token keyword">self</span> color<span class="token punctuation">:</span> Color red<span class="token punctuation">.</span><br><br>step<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">newSize</span> <span class="token punctuation">|</span></span><br><br>    newSize <span class="token operator">:=</span> <span class="token keyword">self</span> morphExtent x <span class="token operator">+</span> delta<span class="token punctuation">.</span><br>    <span class="token keyword">self</span> morphExtent<span class="token punctuation">:</span> newSize <span class="token operator">@</span> newSize<span class="token punctuation">.</span><br>    delta <span class="token operator">=</span> <span class="token number">1</span><br>        ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> newSize <span class="token operator">=</span> maxSize ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> delta <span class="token operator">:=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span><br>        ifFalse<span class="token punctuation">:</span> <span class="token punctuation">[</span> newSize <span class="token operator">=</span> minSize ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span> delta <span class="token operator">:=</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span><br><br>stepTime<br>    <span class="token operator">^</span> <span class="token number">10</span></code></pre><p>The following class implements a morph that renders a red circle and animates to a random location in the World every time it is clicked. After defining this class in a System Browser, enter <code>AnimatedMorph new openInWorld</code> in a Workspace and &quot;Do it&quot;. This only animates position changes, but other properties such as rotation, scale, and color can also be animated.</p><pre class="language-smalltalk"><code class="language-smalltalk">EllipseMorph subclass<span class="token punctuation">:</span> <span class="token symbol">#AnimatedMorph</span><br>    instanceVariableNames<span class="token punctuation">:</span> <span class="token string">'dx dy stepNumber'</span><br>    classVariableNames<span class="token punctuation">:</span> <span class="token string">''</span><br>    poolDictionaries<span class="token punctuation">:</span> <span class="token string">''</span><br>    category<span class="token punctuation">:</span> <span class="token string">'Volkmann'</span><br><br><span class="token comment">"instance methods"</span><br><br>initialize<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">size</span> <span class="token punctuation">|</span></span><br><br>    <span class="token keyword">super</span> initialize<span class="token punctuation">.</span><br>    size <span class="token operator">:=</span> <span class="token keyword">self</span> size<span class="token punctuation">.</span><br>    <span class="token keyword">self</span> morphExtent<span class="token punctuation">:</span> size <span class="token operator">@</span> size<span class="token punctuation">.</span><br>    <span class="token keyword">self</span> color<span class="token punctuation">:</span> Color red<span class="token punctuation">.</span><br><br>size<br>    <span class="token operator">^</span> <span class="token number">100</span><br><br>handlesMouseDown<br>    <span class="token operator">^</span> <span class="token boolean">true</span><br><br>mouseButton1Up<span class="token punctuation">:</span> aMouseEvent localPosition<span class="token punctuation">:</span> aPosition<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">newX</span> <span class="token variable">newY</span> <span class="token variable">oldX</span> <span class="token variable">oldY</span> <span class="token variable">size</span> <span class="token variable">worldExtent</span> <span class="token punctuation">|</span></span><br><br>    oldX <span class="token operator">:=</span> <span class="token keyword">self</span> morphPosition x<span class="token punctuation">.</span><br>    oldY <span class="token operator">:=</span> <span class="token keyword">self</span> morphPosition y<span class="token punctuation">.</span><br>    <span class="token comment">"UISupervisor ui answers the WorldMorph instance."</span><br>    worldExtent <span class="token operator">:=</span> UISupervisor ui morphExtent<span class="token punctuation">.</span><br>    size <span class="token operator">:=</span> <span class="token keyword">self</span> size<span class="token punctuation">.</span><br>    newX <span class="token operator">:=</span> <span class="token punctuation">(</span>worldExtent x rounded <span class="token operator">-</span> size<span class="token punctuation">)</span> atRandom<span class="token punctuation">.</span><br>    newY <span class="token operator">:=</span> <span class="token punctuation">(</span>worldExtent y rounded <span class="token operator">-</span> size<span class="token punctuation">)</span> atRandom<span class="token punctuation">.</span><br>    dx <span class="token operator">:=</span> newX <span class="token operator">-</span> oldX <span class="token operator">/</span> <span class="token keyword">self</span> stepCount<span class="token punctuation">.</span><br>    dy <span class="token operator">:=</span> newY <span class="token operator">-</span> oldY <span class="token operator">/</span> <span class="token keyword">self</span> stepCount<span class="token punctuation">.</span><br>    stepNumber <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> startStepping<span class="token punctuation">.</span> <span class="token comment">"must send after morph is opened, not in initialize"</span><br><br>step<br><br>    <span class="token keyword">self</span> morphPosition<span class="token punctuation">:</span> <span class="token keyword">self</span> morphPosition <span class="token operator">+</span> <span class="token punctuation">(</span>dx <span class="token operator">@</span> dy<span class="token punctuation">)</span><span class="token punctuation">.</span><br>    <span class="token keyword">self</span> redrawNeeded<span class="token punctuation">.</span><br>    stepNumber <span class="token operator">:=</span> stepNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">.</span><br>    stepNumber <span class="token operator">=</span> <span class="token keyword">self</span> stepCount ifTrue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">self</span> stopStepping<span class="token punctuation">]</span><br><br>stepCount<br>    <span class="token operator">^</span> <span class="token number">50</span><br><br>stepTime<br>    <span class="token operator">^</span> <span class="token number">5</span> <span class="token comment">"default is 1000 for once per second"</span></code></pre><h2 id="blocking-ui-updates" tabindex="-1">Blocking UI Updates</h2><p>UI updates do not become visible until the method that made them completes. This can be an issue when methods are long-running. This affects all morphs, including those provided by the development environment, such as the Transcript window. To address this, run such methods in a new process. See the section &quot;Running in Another Process&quot; in the &quot;Blocks&quot; chapter.</p><h2 id="redrawing" tabindex="-1">Redrawing</h2><p>After making code changes, if the UI does not update properly, there are two things that can be done to update the display.</p><ol><li>Open the World menu and select &quot;Restore Display&quot;.</li><li>Open the World menu and select &quot;Debug ... Start drawing all again&quot;.</li></ol><p>TODO: What is the difference between these?</p><h2 id="creating-jpeg-images" tabindex="-1">Creating JPEG Images</h2><p>To create a JPEG image from any morph:</p><pre class="language-smalltalk"><code class="language-smalltalk">myMorph imageForm<span class="token punctuation">:</span> <span class="token number">32</span> <span class="token punctuation">:</span><span class="token punctuation">:</span> writeJPEGfileNamed<span class="token punctuation">:</span> <span class="token string">'myMorph.jpg'</span></code></pre><p>Consider adding the following method to the <code>Morph</code> class to simplify this:</p><pre class="language-smalltalk"><code class="language-smalltalk">writeJPEG<span class="token punctuation">:</span> aFilePath<br><br>   <span class="token keyword">self</span> imageForm<span class="token punctuation">:</span> <span class="token number">32</span> <span class="token punctuation">:</span><span class="token punctuation">:</span> writeJPEGfileNamed<span class="token punctuation">:</span> aFilePath</code></pre><p>The base image doesn't contain methods for writing other image formats such as PNG.</p><h2 id="more-morphs" tabindex="-1">More Morphs</h2><p>TODO: Study the following morphs defined in Cuis-Smalltalk-UI.</p><p>Clone the <code>Cuis-Smalltalk-UI</code> repository and install the morphs by evaluating <code>Feature require: 'UI-Click-Select'</code>.</p><ul><li><code>CheckButtonMorph</code></li><li><code>RadioButtonMorph</code></li><li><code>CheckGroup</code></li><li><code>RadioGroup</code></li><li><code>DropDownButtonMorph</code></li><li><code>DropDownListMorph</code></li><li><code>MultiSelectMenu</code></li><li><code>PluggableDropDownListMorph</code></li><li><code>PluggableListOfMorph</code></li></ul><h2 id="annoyances" tabindex="-1">Annoyances</h2><p>Some of the methods in Morphic classes are inconsistently named. For example, the class <code>TextModelMorph</code> defines the methods <code>alwaysHideVerticalScrollbar</code> and <code>hideScrollBarsIndefinitely</code>. Note how the &quot;b&quot; is sometimes lowercase and sometimes uppercase.</p><h2 id="todo-app" tabindex="-1">Todo App</h2><p>See <a href="https://github.com/mvolkmann/Cuis-Smalltalk-TodoApp">https://github.com/mvolkmann/Cuis-Smalltalk-TodoApp</a>. TODO: Learn how to deploy this app.</p></article>