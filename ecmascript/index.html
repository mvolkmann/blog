<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>ECMAScript</h2><aside><nav class="toc"><ol><li><a href="#2020-highlights">2020 Highlights</a></li><li><a href="#2021-highlights">2021 Highlights</a></li><li><a href="#2022-highlights">2022 Highlights</a></li></ol></nav></aside><article><h2 id="2020-highlights" tabindex="-1">2020 Highlights</h2><ul><li><p>dynamic imports</p><p>This enables deciding what to import at runtime.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/some/name.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// use the module</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/some/name.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>namespace re-exporting</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token punctuation">{</span>foo<span class="token punctuation">,</span> bar <span class="token keyword">as</span> baz<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'some-module'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> _ <span class="token keyword">from</span> <span class="token string">'some-module'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> _ <span class="token keyword">as</span> newName <span class="token keyword">from</span> <span class="token string">'some-module'</span><span class="token punctuation">;</span></code></pre></li><li><p>optional chaining</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> zip <span class="token operator">=</span> person<span class="token operator">?.</span>address<span class="token operator">?.</span>zipCode<span class="token punctuation">;</span><br><span class="token comment">// sets to undefined if person or person.address is undefined</span><br><br><span class="token keyword">const</span> bloodType <span class="token operator">=</span> person<span class="token operator">?.</span>getHealthData<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getBloodType<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// sets to undefined if person has no getHealthData method or if</span><br><span class="token comment">// the object returned by getHealthData has no getBloodType method</span></code></pre></li><li><p>nullish coalescing</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> age <span class="token operator">=</span> person<span class="token punctuation">.</span>age <span class="token operator">||</span> <span class="token number">21</span><span class="token punctuation">;</span><br><span class="token comment">// sets to 21 if expression on left</span><br><span class="token comment">// evaluates to a falsey value, including zero</span><br><br><span class="token keyword">const</span> age <span class="token operator">=</span> person<span class="token punctuation">.</span>age <span class="token operator">??</span> <span class="token number">21</span><span class="token punctuation">;</span><br><span class="token comment">// sets to 21 if expression on left</span><br><span class="token comment">// evaluates to undefined or null</span></code></pre></li><li><p><code>BigInt</code> type</p><p>supports arbitrarily large integer values</p></li><li><p><code>String</code> <code>matchAll</code> method</p><p>returns iterator over all matches of a regular expression that must have &quot;g&quot; flag</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> someText <span class="token operator">=</span> <span class="token string">'fooA1barB2bazC3'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> matches <span class="token operator">=</span> someText<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Z][0-9]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> matches<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'begins at'</span><span class="token punctuation">,</span> match<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>outputs: A1 begins at 3 B2 begins at 8 C3 begins at 13</p></li><li><p><code>Promise.allSettled</code></p><ul><li>takes an <code>Iterable</code> of promises</li><li>resolves after all either resolve or reject</li><li>resolved value is an array of object that each have a <code>status</code> property</li><li>if status is <code>'fulfilled'</code>, a <code>value</code> property is also present</li><li>if status is <code>'rejected'</code>, a <code>reason</code> property is also present</li></ul></li><li><p><code>globalThis</code></p><ul><li>provides a standard way to access the &quot;global object&quot; in all environments</li><li>alternative to <code>window</code>, <code>self</code>, or <code>frames</code> on the web</li><li>alternative to <code>self</code> in Web Workers</li><li>alternative to <code>global</code> in Node.js</li></ul></li></ul><h2 id="2021-highlights" tabindex="-1">2021 Highlights</h2><ul><li><p>numeric separators for readability (underscore)</p><p>ex. <code>1_234_567.89</code></p></li><li><p><code>String</code> <code>replaceAll</code> method</p><pre class="language-js"><code class="language-js">s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span><br>can be written <span class="token keyword">as</span><br>s<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span></code></pre></li><li><p><code>Promise.any</code></p><ul><li>takes an iterable of promises</li><li>resolves with the first one resolves</li><li>if all reject, rejects with an <code>AggregateError</code> exception that holds an error from each promise in order</li><li>alternative to <code>Promise.race</code> that resolves or rejects based on the first promise to complete</li></ul></li><li><p>private class members</p><ul><li>begin name of fields and methods with #</li><li>applies to both instance and static members</li></ul></li></ul><h2 id="2022-highlights" tabindex="-1">2022 Highlights</h2><ul><li><p>expected to be finalized in June 2022</p></li><li><p>can declare public fields of a class (instance or static) inside class, not in constructor</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  breed <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed<span class="token punctuation">;</span><br>    Dog<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>static</code> blocks</p><ul><li>used to initialize static fields in a class when their values must be computed</li><li>syntax: <code>static { code }</code></li><li>can have more than one in the same class</li></ul></li><li><p>top-level <code>await</code></p><p>can use <code>await</code> keyword outside of <code>async</code> functions</p></li><li><p>error cause</p><p><code>Error</code> objects can have a <code>cause</code> property that refers to another <code>Error</code> object</p></li><li><p><code>at</code> method added to <code>Array</code> and <code>String</code></p><ul><li>takes an index which can be negative to count from the end</li><li><code>myArr.at(0)</code> returns the first element</li><li><code>myArr.at(-1)</code> returns the last element</li></ul></li><li><p><code>RegExp</code> match indices</p><p>Adding the <code>/d</code> flag to a regular expression causes it to record the start and end index of each capture group.</p></li></ul></article>