<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Prolog</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#installing">Installing</a><ol><li><a href="#swi-prolog">SWI-Prolog</a></li><li><a href="#gnu-prolog">GNU Prolog</a></li></ol></li><li><a href="#online-repl">Online REPL</a></li><li><a href="#running">Running</a></li><li><a href="#exiting">Exiting</a></li><li><a href="#terminology">Terminology</a></li><li><a href="#basic-syntax">Basic Syntax</a></li><li><a href="#typical-flow">Typical Flow</a></li><li><a href="#hello-world">Hello World</a></li><li><a href="#special-characters">Special Characters</a></li><li><a href="#case-sensitive">Case-sensitive</a></li><li><a href="#conjunctions">Conjunctions</a></li><li><a href="#calling-from-other-languages">Calling From Other Languages</a></li><li><a href="#language-server">Language Server</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>Prolog is a logic-based programming language. The name is a contraction of &quot;programming in logic&quot;. Prolog has many uses including artificial intelligence, abstract problem solving, symbolic equation solving, and more. A core feature is search with backtracking.</p><p>Prolog first appeared in 1972. It was designed by three computer scientists, Alain Colmerauer (France), Phillipe Roussel (France), and Robert Kowalski (USA/Britan).</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://en.wikipedia.org/wiki/Prolog?v=1.0.21" rel="noopener" target="_blank">Wikipedia</a></li><li><a href="https://link.springer.com/book/10.1007/978-3-642-55481-0?v=1.0.21" rel="noopener" target="_blank">Programming in Prolog</a> Fifth edition book by Clocksin and Mellish</li><li><a href="https://www.swi-prolog.org?v=1.0.21" rel="noopener" target="_blank">SWI-Prolog</a></li><li><a href="https://www.linuxlinks.com/excellent-free-books-learn-prolog/?v=1.0.21" rel="noopener" target="_blank">13 Excellent Free Books to Learn Prolog</a></li><li><a href="https://www.iso.org/standard/21413.html?v=1.0.21" rel="noopener" target="_blank">Prolog ISO Standard</a></li></ul><h2 id="installing" tabindex="-1">Installing</h2><p>There are many implementations of the Prolog programming language. The most popular seems to be <a href="https://www.swi-prolog.org?v=1.0.21" rel="noopener" target="_blank">SWI-Prolog</a>. Another option is <a href="http://www.gprolog.org?v=1.0.21" rel="noopener" target="_blank">GNU Prolog</a>.</p><p>Both SWI-Prolog and GNU Prolog conform to the ISO standard and both were being actively maintained as of June 2023.</p><h3 id="swi-prolog" tabindex="-1">SWI-Prolog</h3><p><img alt="SWI-Prolog" style="width: 20%" src="/blog/assets/swipl-logo.png?v=1.0.21" title="SWI-Prolog"></p><blockquote><p>SWI-Prolog offers a comprehensive free Prolog environment. Since its start in 1987, SWI-Prolog development has been driven by the needs of real world applications. SWI-Prolog is widely used in research and education as well as commercial applications.&quot;</p></blockquote><p>SWI-Prolog is implemented in a combination of C (48%) and Prolog (39%).</p><p>To install the terminal command <code>swipl</code> in macOS, enter <code>brew install swi-prolog</code></p><p>To install a stable, binary version of SWI-Prolog app, browse <a href="https://www.swi-prolog.org/download/stable?v=1.0.21" rel="noopener" target="_blank">Download SWI-Prolog stable version</a>.</p><p>On macOS, double-click the downloaded <code>.dmg</code> file. This opens a Finder window containing several files and directories. Drag the file <code>SWI-Prolog.app</code> to the <code>Applications</code> directory.</p><h3 id="gnu-prolog" tabindex="-1">GNU Prolog</h3><p>To install the terminal command <code>gprolog</code> in macOS, enter <code>brew install gnu-prolog</code>.</p><h2 id="online-repl" tabindex="-1">Online REPL</h2><p>To enter and run Prolog code in a web browser, browse <a href="https://swish.swi-prolog.org?v=1.0.21" rel="noopener" target="_blank">SWISH</a>.</p><p>Enter facts and rules in the left pane. Enter a query in the lower-right pane. Press the &quot;Run!&quot; button or ctrl-return to execute the query.</p><h2 id="running" tabindex="-1">Running</h2><p>Double-click the SWI-Prolog app to open a window where Prolog commands can be entered. Initially macOS will not open the app because it is deemed untrusted. To make it trusted, open the &quot;System Settings&quot; app, select &quot;Privacy &amp; Security&quot;, and allowing opening <code>SWI-Prolog.app</code>.</p><h2 id="exiting" tabindex="-1">Exiting</h2><p>To exit the SWI-Prolog interpreter, enter <code>halt.</code> or press ctrl-d.</p><h2 id="terminology" tabindex="-1">Terminology</h2><table><thead><tr><th>Term</th><th>Meaning</th></tr></thead><tbody><tr><td>fact</td><td>description of something that is true</td></tr><tr><td>rule</td><td>description of a relationship about at least one unknown thing</td></tr><tr><td>question/query</td><td>asks if something is true or asks for a matching value</td></tr><tr><td>database</td><td>a collection of facts and rules</td></tr></tbody></table><p>A rule can be thought of as a special kind of fact that depends on a set of facts.</p><h2 id="basic-syntax" tabindex="-1">Basic Syntax</h2><p>Prolog programs are composed of facts, rules, and queries.</p><p>For example:</p><pre class="language-prolog"><code class="language-prolog"><span class="token comment">% These are facts that say comet is a whippet and spots is a cheetah.</span><br><span class="token function">whippet</span><span class="token punctuation">(</span>comet<span class="token punctuation">)</span><span class="token operator">.</span><br><span class="token function">cheetah</span><span class="token punctuation">(</span>spots<span class="token punctuation">)</span><span class="token operator">.</span><br><br><span class="token comment">% This is a rule that says if something is a whippet then it is fast.</span><br><span class="token function">fast</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token operator">:-</span> <span class="token function">whippet</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">.</span><br><span class="token function">fast</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token operator">:-</span> <span class="token function">cheetah</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">.</span><br><span class="token comment">% The previous two lines can be replaced with this.</span><br><span class="token comment">% fast(X) :- cheetah(X); whippet(X).</span><br><br><span class="token comment">% This is a query that asks whether comet is fast.</span><br><span class="token comment">% It returns "true".</span><br><span class="token operator">?-</span> <span class="token function">fast</span><span class="token punctuation">(</span>comet<span class="token punctuation">)</span><span class="token operator">.</span><br><br><span class="token comment">% This is a query that asks for something that is fast.</span><br><span class="token comment">% It returns "comet".</span><br><span class="token operator">?-</span> <span class="token function">fast</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">.</span><br><br><span class="token comment">% This rule ... TODO</span></code></pre><p>To stop searching for things that are fast, press the return key.</p><p>To search for something else that is fast, enter a semicolon and press the return key. After the last match is found, the prompt for another query will appear.</p><p>Suppose the following facts are loaded:</p><pre class="language-prolog"><code class="language-prolog"><span class="token function">likes</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> tacos<span class="token punctuation">)</span><span class="token operator">.</span><br><span class="token function">likes</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> books<span class="token punctuation">)</span><span class="token operator">.</span><br><span class="token function">likes</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> running<span class="token punctuation">)</span><span class="token operator">.</span></code></pre><p>The query <code>likes(mark, X)</code> will find tacos, books, and running that in that order. The query <code>likes(X, running)</code> will find mark.</p><h2 id="typical-flow" tabindex="-1">Typical Flow</h2><p>The typical steps to run a Prolog program are:</p><ol><li>Add facts and rules to a Prolog source file that has an extension of <code>.pl</code></li><li>Load Prolog source files into the Prolog app.</li><li>Enter queries in the Prolog app.</li></ol><p>To load a <code>.pl</code> file, enter <code>[file-name].</code> For example, to load the file <code>demo.pl</code>, <code>enter [demo].</code></p><p>After modifying source files that have already been loaded, enter <code>make.</code> to reload all of them.</p><p>To enter new facts and rules in a running session:</p><ul><li>Enter <code>[user].</code> to open stdin as a pseudo file.</li><li>Enter facts and rules.</li><li>Press ctrl-d to close and load the pseudo file.</li></ul><p>It seems this can replace existing facts rather than add to them.</p><p>Another way to add a fact or rule is to enter <code>assertz(fact-or-rule).</code></p><p>To remove a fact or rule, enter <code>retract(fact-or-rule).</code> TODO: I get &quot;ERROR: No permission to modify static procedure&quot;.</p><h2 id="hello-world" tabindex="-1">Hello World</h2><p>The <code>write</code> predicate writes to stdout.</p><pre class="language-prolog"><code class="language-prolog"><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nl<span class="token operator">.</span></code></pre><p>The <code>format</code> predicate also writes to stdout, but substitutes values into the text. TODO: Add more on format.</p><h2 id="special-characters" tabindex="-1">Special Characters</h2><table><thead><tr><th>Characters</th><th>Meaning</th></tr></thead><tbody><tr><td><code>:-</code></td><td>if; used to define rules</td></tr><tr><td><code>,</code></td><td>logical and</td></tr><tr><td><code>;</code></td><td>logical or</td></tr><tr><td><code>not</code></td><td>logical not</td></tr><tr><td><code>?-</code></td><td>begins a query</td></tr><tr><td><code>.</code></td><td>terminates all commands</td></tr><tr><td><code>%</code></td><td>begins single-line comment</td></tr><tr><td><code>/*</code> and <code>*/</code></td><td>delimits multi-line comment</td></tr></tbody></table><h2 id="case-sensitive" tabindex="-1">Case-sensitive</h2><p>Terms that begin with a lowercase letter represent objects or relationships.</p><p>Terms that begin with an uppercase letter represent variables.</p><h2 id="conjunctions" tabindex="-1">Conjunctions</h2><p>The comma operator is used to form rules and queries where multiple goals must be met. For example:</p><pre class="language-prolog"><code class="language-prolog"><span class="token comment">% This rule says that mark likes females that like cycling.</span><br><span class="token function">likes</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">:=</span> <span class="token function">female</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">likes</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> cycling<span class="token punctuation">)</span><span class="token operator">.</span><br><br><span class="token comment">% This query asks if mark loves tami AND tami loves mark.</span><br><span class="token operator">?-</span> <span class="token function">loves</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> tami<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">loves</span><span class="token punctuation">(</span>tami<span class="token punctuation">,</span> mark<span class="token punctuation">)</span>`<br><br><span class="token comment">% This query searches for things that both mark and tami love.</span><br><span class="token comment">% X stands for the same value in both goals.</span><br><span class="token operator">?-</span> <span class="token function">loves</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span> X<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">loves</span><span class="token punctuation">(</span>tami<span class="token punctuation">,</span> X<span class="token punctuation">)</span></code></pre><h2 id="calling-from-other-languages" tabindex="-1">Calling From Other Languages</h2><p>SWI-Prolog can be called from C. See <a href="https://www.swi-prolog.org/pldoc/man?section=calling-prolog-from-c?v=1.0.21" rel="noopener" target="_blank">Calling Prolog from C</a>.</p><p>TODO: Which other programming languages can call SWI-Prolog?</p><h2 id="language-server" tabindex="-1">Language Server</h2><p>TODO: How can you install a Prolog language server in Neovim? TODO: See <a href="https://github.com/jamesnvc/lsp_server">https://github.com/jamesnvc/lsp_server</a>.</p></article>