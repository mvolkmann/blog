<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Pagination</h2><aside></aside><article><p>Pagination is the 11ty term for producing multiple files from one input file. It operates on an array of data. The <code>size</code> variable specifies the number of array elements to be rendered on each page. Often it is set to 1 to render each element on a separate page. The array data can come from anywhere in the data cascade.</p><p>By default the URL for each page produced ends with a slash and a page number.</p><p>For example:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token key atrule">data</span><span class="token punctuation">:</span> employees <span class="token comment"># data over which to paginate</span><br>  <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">7</span> <span class="token comment"># number of employees per page</span></code></pre><p>The global variable <code>pagination</code> holds related data.</p><ul><li><code>pagination.data</code> holds the value of the pagination <code>data</code> property from the front matter.</li><li><code>pagination.pages</code> holds an array of items for each page. When the size is one the array holds each page item. When the size is greater than one it holds arrays of the items on each page. When <code>data</code> is an object rather than an array, it holds keys instead of items.</li><li><code>pagination.items</code> is an array of the objects to be rendered on the current page.</li><li><code>pagination.pages.length</code> is the number of pages.</li><li><code>pagination.pageNumber</code> holds the zero-based index of the current page.</li><li><code>pagination.firstPageLink</code> holds the URL of the first page (alias <code>first</code>).</li><li><code>pagination.firstPageHref</code> is the same, but omits <code>index.html</code> at end.</li><li><code>pagination.previousPageLink</code> holds the URL of the previous page (alias <code>previous</code>).</li><li><code>pagination.previousPageHref</code> is the same, but omits <code>index.html</code> at end.</li><li><code>pagination.nextPageLink</code> holds the URL of the next page; (alias <code>next</code>).</li><li><code>pagination.nextPageHref</code> is the same, but omits <code>index.html</code> at end.</li><li><code>pagination.lastPageLink</code> holds the URL of the last page (alias <code>last</code>).</li><li><code>pagination.lastPageHref</code> is the same, but omits <code>index.html</code> at end.</li><li><code>pagination.pageLinks</code> holds an array of all the page links (alias <code>links</code>).</li><li><code>pagination.href</code> holds an object with keys &quot;previous&quot;, &quot;next&quot;, &quot;first&quot;, and &quot;last&quot; whose values are those hrefs.</li><li><code>pagination.hrefs</code> holds an array of all the page hrefs.</li></ul><p>The URL for each page is <code>/{pagination.data}/{zero-based-index}</code>. The URL for the first page page is <code>/{data-name}</code>, omitting an index. The URL <code>/{data-name}/0</code> is not valid.</p><p><code>pagination.items</code> holds the current page item when the size is 1 or an array of the current page items when size is greater than 1. To add an alias for this add an <code>alias</code> property to the <code>pagination</code> front matter. For example:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">alias</span><span class="token punctuation">:</span> items</code></pre><p>With this alias in place, we can iterate over <code>items</code> instead of <code>pagination.items</code> to render all the items on the current page.</p><p>To display &quot;Page m of n&quot;:</p><pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>  Page <span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>pageNumber + <span class="token number">1</span><span class="token delimiter punctuation">}}</span></span> of <span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>pages<span class="token punctuation">.</span>length<span class="token delimiter punctuation">}}</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>To render links to the first, previous, next, and last pages so each is only rendered when it makes sense:</p><pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">if</span> pagination<span class="token punctuation">.</span>pageNumber <span class="token operator">></span> <span class="token number">0</span> <span class="token delimiter punctuation">%}</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">first</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>First<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">if</span> pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span>previous <span class="token delimiter punctuation">%}</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span>previous<span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Prev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">if</span> pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span>next <span class="token delimiter punctuation">%}</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span>next<span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Next<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">if</span> pagination<span class="token punctuation">.</span>pageNumber <span class="token operator">&lt;</span> pagination<span class="token punctuation">.</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token delimiter punctuation">%}</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>pagination<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">last</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Last<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span></code></pre><p>To render links to all the pages except the current by number:</p><pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">for</span> href <span class="token keyword">in</span> pagination<span class="token punctuation">.</span>hrefs <span class="token delimiter punctuation">%}</span></span><br>      <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span><span class="token keyword">if</span> loop<span class="token punctuation">.</span>index0 <span class="token operator">!=</span><span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageNumber <span class="token delimiter punctuation">%}</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>href<span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Page <span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span> loop<span class="token punctuation">.</span>index <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token liquid language-liquid"><span class="token delimiter punctuation">{%</span> <span class="token keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span></code></pre><p>Note that Nunjucks provides the variable <code>loop</code> that holds an object with the properties <code>index</code> (1-based) and <code>index0</code> (0-based). These hold the current loop index.</p><p>To style the anchor tags as buttons:</p><pre class="language-css"><code class="language-css"><span class="token selector">.pagination</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagination ol</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem 0<span class="token punctuation">;</span> <span class="token comment">/* to match "a" padding below */</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagination a</span> <span class="token punctuation">{</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> solid gray 1px<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>To style the anchor for the current page differently that the others, define a CSS rule for <code>a.current</code> and set the <code>class</code> on the <code>a</code> elements as follows:</p><pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span><span class="token string">'current'</span> <span class="token keyword">if</span> loop<span class="token punctuation">.</span>index0 <span class="token operator">==</span><span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageNumber <span class="token keyword">else</span> <span class="token string">''</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><br>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token liquid language-liquid"><span class="token delimiter punctuation">{{</span>href<span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span></code></pre><p>To paginate data in reverse order, add the <code>reverse</code> property to the <code>pagination</code> front matter.</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">reverse</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>When <code>data</code> is an object rather than an array, the items will be keys instead of items. To change this so the items are the property values, add the <code>resolve</code> property to the <code>pagination</code> front matter.</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">resolve</span><span class="token punctuation">:</span> values</code></pre><p>To produce different data to be paginated from existing data, use the <code>before</code> front matter property whose value is a JavaScript function that takes the data and returns new data. This can create new data to paginate by filtering, sort, and transforming. Using this requires all the front matter to be converted from YAML to JavaScript. For example, the following filters the employees so only those age 50 and older are retained and it makes their names all uppercase:</p><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>js<br><span class="token punctuation">{</span><br>  <span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">'employees-layout.njk'</span><span class="token punctuation">,</span><br>  <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'Employees'</span><span class="token punctuation">,</span><br>  <span class="token key atrule">pagination</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token string">'employees'</span><span class="token punctuation">,</span><br>    <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span><br>    <span class="token key atrule">alias</span><span class="token punctuation">:</span> <span class="token string">'items'</span><span class="token punctuation">,</span><br>    before(employees) <span class="token punctuation">{</span><br>      return employees.<br>        filter(emp =<span class="token punctuation">></span> emp.employee_age <span class="token punctuation">></span>= 50).<br>        map(emp =<span class="token punctuation">></span> (<span class="token punctuation">{</span><br>          <span class="token punctuation">...</span>emp<span class="token punctuation">,</span><br>          <span class="token key atrule">employee_name</span><span class="token punctuation">:</span> emp.employee_name.toUpperCase()<br>        <span class="token punctuation">}</span>));<br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">---</span></code></pre><p>To change the paths of the files produced for each page, specify a permalink. For example, if the file <code>employees.njk</code> uses pagination then it would normally generate files like <code>_site/employees/2/index.html</code> where 2 is a page number. To change this so it generates files like <code>_site/workers/group-2/index.html</code>, add the following front matter:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token string">'workers/group-/index.html'</span></code></pre><p>When a template uses pagination and gets data from a REST service as shown above, the REST service is invoked once, then again for each page. So if pagination results in three pages, there will be four calls to the REST service. TODO: Why is this? TODO: See the issue you created about pagination and .11ty.js files TODO: at <a href="https://github.com/11ty/eleventy/issues/919">https://github.com/11ty/eleventy/issues/919</a>.</p></article>