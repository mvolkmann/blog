<link rel="stylesheet" href="/blog/assets/topic.css"><h2>Data Cascade</h2><p>Data in an 11ty project is held in variables. Pages can access these variables. Variables can be defined in multiple places, and the &quot;cascade&quot; defines which definition takes precedence.</p><p>The places where variables can be defined, from highest to lowest precedence, include:</p><ul><li><code>{template-name}.{markup-extension}</code> in front matter</li><li>front matter in layouts used by the template</li><li><code>{template-name}.11tydata.js</code> file in same directory</li><li><code>{template-name}.11tydata.json</code> file in same directory</li><li><code>{dir-name}.11tydata.js</code> file in same directory</li><li><code>{dir-name}.11tydata.json</code> file in same directory</li><li><code>{dir-name}.11tydata.js</code> files in ancestor directories</li><li><code>{dir-name}.11tydata.json</code> files in ancestor directories</li><li><code>{data-name}.js</code> file in the <code>_data</code> directory</li><li><code>{data-name}.json</code> file in the <code>_data</code> directory</li></ul><p>JavaScript files can generate data and retrieve it from REST services. The use of the directory <code>_data</code> was inspired by Jekyll.</p><p>Data from a file whose name starts with <code>{template-name}.11tydata.</code> is only available in template files in the same directory whose name starts with <code>{template-name}.</code>.</p><p>Data from a file whose name starts with <code>{dir-name}.11tydata.</code> is available in all template files in the same directory and below.</p><p>Directory files that are closer to a template file take precedence over those higher in the directory hierarchy. TODO: It seems layout front matter is given the lowest precedences, TODO: but that does not match the docs. TODO: See this issue you created at <a href="https://github.com/11ty/eleventy/issues/915">https://github.com/11ty/eleventy/issues/915</a>.</p><p>Let's walk through a comprehensive example to demonstrate all the possible sources of data for a template. Consider the following directory structure. Each of these files define an array of dogs. Any one of them can be used as the source of this data. The files are numbered to indicate their precedence in providing data used in <code>dogs.md</code> with 1 being the highest.</p><ul><li>_includes<ul><li>layout.njk (10)</li></ul></li><li>_data<ul><li>dogs.js (8)</li><li>dogs.json (9)</li></ul></li><li>level1<ul><li>level1.11tydata.js (6)</li><li>level1.11tydata.json (7)</li><li>level2<ul><li>dogs.11tydata.js (2)</li><li>dogs.11tydata.json (3)</li><li>level2.11tydata.js (4)</li><li>level2.11tydata.json (5)</li><li>dogs.md (1)</li></ul></li></ul></li></ul><p>Here is example content from <code>_data/dogs.js</code>. It exports an array of dogs.</p><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Dasher'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Maisey'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Ramsey'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Native American Indian Dog'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Oscar'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>Here is example content from <code>_data/dogs.json</code>. It defines a value for the global variable <code>dogs</code>.</p><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Dasher"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Whippet"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Maisey"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Treeing Walker Coonhound"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ramsey"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Native American Indian Dog"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Oscar"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"German Shorthaired Pointer"</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><p>Here is example content from <code>level1/level1.11tydata.js</code>, <code>level1/level2/level2.11tydata.js</code>, and <code>level1/level2/dogs.11tydata.js</code>. They all export an object with a <code>dogs</code> property whose value is an array of dogs.</p><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  dogs<span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Dasher JS1'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Maisey JS1'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Ramsey JS1'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Native American Indian Dog'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Oscar JS1'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Here is example content from <code>level1/level1.11tydata.json</code>, <code>level1/level2/level2.11tydata.json</code>, and <code>level1/level2/dogs.11tydata.json</code>. They all define an object with a <code>dogs</code> property whose value is an array of dogs.</p><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Dasher"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Whippet"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Maisey"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Treeing Walker Coonhound"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ramsey"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"Native American Indian Dog"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Oscar"</span><span class="token punctuation">,</span> <span class="token property">"breed"</span><span class="token operator">:</span> <span class="token string">"German Shorthaired Pointer"</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><p>Here is the content of <code>level1/level2.dogs.md</code>. It defines an array of dogs using YAML syntax.</p><pre class="language-md"><code class="language-md"><span class="token hr punctuation">---</span><br>dogs:<br>  <span class="token list punctuation">-</span> name: Dasher<br>    breed: Whippet<br>  <span class="token list punctuation">-</span> name: Maisey<br>    breed: Treeing Walker Coonhound<br>  <span class="token list punctuation">-</span> name: Ramsey<br>    breed: Native American Indian Dog<br>  <span class="token list punctuation">-</span> name: Oscar<br>    breed: German Shorthaired Pointer<br><span class="token title important">layout: layout.njk<br><span class="token punctuation">---</span></span></code></pre><h1>Dogs</h1><pre class="language-liquid"><code class="language-liquid">{<span class="token operator">%</span> <span class="token keyword">for</span> dog <span class="token keyword">in</span> dogs <span class="token operator">%</span>}<br>  {{dog.name}} is a {{dog.breed}}.<br>{<span class="token operator">%</span> <span class="token keyword">endfor</span> <span class="token operator">%</span>}</code></pre><p>The set of variables obtained from these sources is merged, but their values are not. For example, if a template defines <code>tags</code> to be <code>['dog', 'pet']</code> and its layout defines <code>tags</code> to be <code>['canine', 'creature', 'pet']</code> the result will be <code>['dog', 'pet']</code>.</p><p>As another example, consider a template with the following front matter:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">layout</span><span class="token punctuation">:</span> myLayout.njk<br><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'Template Title'</span></code></pre><p>Suppose <code>myLayout.njk</code> contains the following front matter:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">score</span><span class="token punctuation">:</span> <span class="token number">7</span><br><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'Layout Title'</span></code></pre><p>The data available in the template will be:</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span><br>  layout<span class="token operator">:</span> myLayout<span class="token punctuation">.</span>njk<span class="token punctuation">,</span><br>  score<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span><br>  title<span class="token operator">:</span> <span class="token string">'Template Title'</span><br><span class="token punctuation">}</span></code></pre>