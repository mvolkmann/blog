<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Progressive Web Apps (PWAs)</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#advantages-over-native-apps">Advantages Over Native Apps</a></li><li><a href="#service-workers">Service Workers</a></li><li><a href="#manifest-file">Manifest File</a></li><li><a href="#evaluating-readiness">Evaluating Readiness</a></li><li><a href="#resources">Resources</a></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><p><img alt="PWA logo" style="border: none; width: 30%" src="/blog/assets/pwa-logo.svg?v=1.1.1" title="PWA logo"></p><h2 id="overview" tabindex="-1">Overview</h2><p>Progressive Web Apps (PWAs) enable using web technologies to implement mobile apps.</p><p>Supported features include background sync, bluetooth, camera access, contact access, device motion, file access, geolocation, offline mode, push notifications, and touch gestures.</p><p>When a PWA attempts to access device features, such as contacts or the camera, the user will be prompted to grant permission.</p><p>To open a PWA in a phone, browse its URL from the a mobile web browser. Users can optionally choose to install the PWA. Doing so downloads all the files required by the app. It also adds an app icon to the home screen so in the future the user can double-click that icon to relaunch the app. The app will still run in the mobile web browser, but the app can choose to hide the browser &quot;chrome&quot; so it appears more like a native app.</p><p>Production PWAs must be downloaded using HTTPS in order to use service workers. In development it is possible to configure the browser to allow using service workers with localhost URLs that use HTTP.</p><h2 id="advantages-over-native-apps" tabindex="-1">Advantages Over Native Apps</h2><p>The advantages that PWAs have over native mobile apps include the ability to:</p><ul><li>allow users to access apps by URL instead of needing to download from an app store</li><li>bypass app store review</li><li>avoid app store cut of purchase prices (such as Apple's 30% cut)</li><li>provide automatic app updates</li><li>implement using widely known web technologies</li><li>run on web, Android, and iOS with a single code base</li></ul><h2 id="service-workers" tabindex="-1">Service Workers</h2><p>A service worker is a kind of web worker. This means that its functionality is defined in a JavaScript source file and it runs in a background thread.</p><p>Service workers have many use cases:</p><ul><li>enable offline functionality by acting as a proxy between a web app and the network, deciding how to handle each resource request</li><li>listen for external events</li><li>periodically fetch data</li><li>send notifications to associated web apps using push notifications</li></ul><p>Service workers can allow parts of a web application to continue functioning after network connectivity is lost. They do this by returning cached responses for requests when requests for inaccessible resources are received.</p><p>Common tasks performed by service workers include:</p><ul><li>creating caches</li><li>storing resources in caches</li><li>intercepting network requests and deciding how to respond</li></ul><p>There is a limit to the amount of data each application domain can cache and a limit to the amount of data that can be cached across all domains. The limits differ across web browsers, but are mostly consistent for Chrome, Edge, and Firefox. The limit for a single domain is 20% of the overall limit. Typically the limits are based on the available space as shown in the following table.</p><table><thead><tr><th>Available Space</th><th>Total Cache Limit</th></tr></thead><tbody><tr><td>up to 8 GB</td><td>50 MB</td></tr><tr><td>8 to 32 GB</td><td>500 MB</td></tr><tr><td>32 to 128 GB</td><td>4% of volume size</td></tr><tr><td>over 128 GB</td><td>smaller of 20 GB or 4% of volume size</td></tr></tbody></table><p>Safari is an outlier. It limits each application to 50 MB of cache storage regardless of the available space, and it purges this after two weeks of not being used. An alternative is to use IndexedDB, which has a limit of 500 MB per application domain in Safari.</p><p>When the total limit is reached, some browsers (Chrome and Firefox) remove the least recently used caches to make room for new caches.</p><p>Service Workers do not have access to the DOM of their associated web app, so they cannot directly change what is rendered in the browser. However, they can communicate with the web app via message passing. The <code>Worker</code> <code>postMessage</code> method is used to send a message from a web worker to the web app or from the web app to a web worker.</p><h2 id="manifest-file" tabindex="-1">Manifest File</h2><h2 id="evaluating-readiness" tabindex="-1">Evaluating Readiness</h2><p>To determine if a web app can be used as a PWA:</p><ul><li>Use a desktop computer or laptop to open the app in the Chrome web browser.</li><li>Open the DevTools.</li><li>Click on the &quot;Lighthouse&quot; tab.</li><li>Click the &quot;Analyze page load&quot; button.</li><li>Look for the &quot;Progressive Web App&quot; score.</li></ul><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://web.dev/explore/progressive-web-apps?v=1.1.1" rel="noopener" target="_blank">web.dev</a> on PWAs</li></ul></article>