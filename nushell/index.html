<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Nushell</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a><ol><li><a href="#startup">startup</a></li><li><a href="#table_mode">table_mode</a></li><li><a href="#color_config-section">color_config Section</a></li><li><a href="#line_editor-section">line_editor Section</a></li><li><a href="#path-section">path Section</a></li></ol></li><li><a href="#terminology">Terminology</a></li><li><a href="#installing">Installing</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#text_view-section">text_view Section</a></li><li><a href="#env-section">env Section</a></li><li><a href="#environment-variables">Environment Variables</a></li><li><a href="#data-types">Data Types</a></li><li><a href="#common-commands">Common Commands</a></li><li><a href="#custom-commands">Custom Commands</a></li><li><a href="#variables">Variables</a></li><li><a href="#aliases">Aliases</a></li><li><a href="#vs-code">VS Code</a></li><li><a href="#more-commands">More Commands</a></li><li><a href="#tables">Tables</a></li><li><a href="#scripts">Scripts</a></li><li><a href="#plugins">Plugins</a></li><li><a href="#questions">Questions</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://www.nushell.sh?v=1.0.10" rel="noopener" target="_blank">Nushell</a> is &quot;a new type of shell&quot;. &quot;The goal of this project is to take the Unix philosophy of shells, where pipes connect simple commands together, and bring it to the modern style of development.&quot; Nushell was created by Jonathan Turner, Yehuda Katz, and Andres Robalino. It is implemented in Rust.</p><p>Nushell runs in Linux, macOS, and Windows.</p><p>Color coding of commands is applied while they are typed. When the command is invalid, all the text is red.</p><h2 id="terminology">Terminology</h2><p>Nushell commands are often chained together using the pipe (|) character. The output of the command on the left of a pipe is used as the input of the command on the right. Nushell refers to these sequences of commands as &quot;pipelines&quot;.</p><p>Commands that take no input and produce output are referred to as &quot;inputs&quot; or &quot;sources&quot;. An example is the <code>open</code> command.</p><p>Commands that take input and transform it are referred to as &quot;filters&quot;. Examples include the <code>where</code> and <code>sort-by</code> commands.</p><p>Commands that take input and display it or write it somewhere such as file are referred to as &quot;outputs&quot; or &quot;sinks&quot;. Examples include <code>autoview</code> and <code>save</code>.</p><h2 id="installing">Installing</h2><p>There are many options for installing the Nushell. If you have Rust installed, enter <code>cargo install nu</code>. This takes a long time to complete. If you are on macOS and have Homebrew installed, enter <code>brew install nushell</code>. Note that Homebrew may install a version that is several versions behind the latest. Prebuilt binaries for Linux, macOS, and Windows can also be downloaded. For more information on installation options, click the Nushell link above.</p><h2 id="getting-started">Getting Started</h2><p>To start the shell, enter <code>nu</code>.</p><p>For help, enter <code>help</code>. For a list of supported commands, enter <code>help commands</code>. In version 0.28.0 there are 105 commands. For help on a specific command, enter <code>help {command-name}</code> or {command-name} -h`.</p><p>For detailed documentation, see the <a href="https://www.nushell.sh/book/?v=1.0.10" rel="noopener" target="_blank">Book</a> link in the top nav of the website.</p><p>Nushell has great command recall and completion like the Fish and zsh shells.</p><h2 id="configuration">Configuration</h2><p>The configuration for Nushell is stored in a TOML file whose path can be obtained by entering <code>config path</code>. Configuration settings can be changed by editing this file or using the <code>config</code> subcommands described below. To edit the config file with Vim, enter <code>vim $(config path)</code>.</p><p>Some Nushell configuration settings are top-level and appear in a specific TOML section. Notable top-level options include:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>disable_table_indexes</code></td><td>when <code>true</code>, omits index column from table output</td></tr><tr><td><code>prompt</code></td><td>command whose output is used for the prompt</td></tr><tr><td><code>skip_welcome_message</code></td><td>when <code>true</code>, starting a shell doesn't output<br>welcome message including Nushell version</td></tr><tr><td><code>startup</code></td><td>list of commands to execute when a shell starts;<br>typically defines aliases and custom commands</td></tr><tr><td><code>table_mode</code></td><td>controls the border lines drawn when tables are rendered<br>(more detail below)</td></tr></tbody></table><p>For details on configuration options, see <a href="https://www.nushell.sh/book/configuration.html?v=1.0.10" rel="noopener" target="_blank">Configuration</a>.</p><p>The <code>config</code> command supports many subcommands that operate on the config file. These are summarized in the table below.</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>config</code></td><td>outputs all the settings</td></tr><tr><td><code>config path</code></td><td>outputs the file path of the configuration file</td></tr><tr><td><code>config set {name} {value}</code></td><td>sets or updates a specific setting</td></tr><tr><td><code>{pipeline} | config set_into {name}</code></td><td>sets a specific setting to a piped-in value</td></tr><tr><td><code>config get {name}</code></td><td>gets a specific setting</td></tr><tr><td><code>config remove {name}</code></td><td>removes a specific setting</td></tr><tr><td><code>config load {file-path}</code></td><td>loads settings from a file</td></tr></tbody></table><p>Configuration changes affect future shell sessions, not the current one.</p><p>For example, to change the prompt enter <code>config set prompt &quot;echo $(ansi yellow) 'ðŸ¦€Î½&gt; '&quot;</code>. This adds the line <code>prompt = &quot;echo $(ansi yellow) 'ðŸ¦€Î½&gt; '&quot;</code> to the configuration file. ðŸ¦€ is for the Rust mascot Ferris and Î½ is the Greek letter nu. To output the value of each setting in the config file, enter <code>config</code>.</p><p>Another option for customizing the prompt is to enable the use of <a href="https://starship.rs?v=1.0.10" rel="noopener" target="_blank">starship</a> which is enabled by setting the <code>use_starship</code> setting to <code>true</code>.</p><p>TODO: Why doesn't <code>config load $(config path)</code> work? TODO: You asked in the Nushell discussion page.</p><h3 id="startup">startup</h3><p>The <code>startup</code> setting specifies a list of commands to run each time a new Nushell session is started. Typically the commands define aliases and custom commands. For example:</p><pre class="language-toml"><code class="language-toml"><span class="token key property">startup</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"alias cls = clear"</span><span class="token punctuation">,</span><br>  <span class="token string">"def cdjs [] { cd $nu.env.JS_DIR }"</span><span class="token punctuation">,</span><br>  <span class="token string">"def cdrust [] { cd $nu.env.RUST_DIR }"</span><br><span class="token punctuation">]</span></code></pre><p>Aliases that use the &quot;cd&quot; command above currently causes Nushell to crash. See <a href="https://github.com/nushell/nushell/issues/3138?v=1.0.10" rel="noopener" target="_blank">this issue</a>.</p><h3 id="table_mode">table_mode</h3><p>Table borders can be customized with the <code>table_mode</code> setting. Supported values include:</p><ul><li>basic: uses +, -, and | characters for borders</li><li>compact: omits outer left and right borders</li><li>compact_double: like compact, but uses double lines for borders</li><li>heavy: thicker border on every cell</li><li>light: horizontal line below header and no other borders</li><li>none: no borders</li><li>other: TODO: What does this do?</li><li>reinforced: border on every cell with thick table corners</li><li>rounded: border on every cell and rounded table corners (my favorite)</li><li>thin: border on every cell</li><li>with_love: heart characters for borders</li></ul><h3 id="color_config-section">color_config Section</h3><p>The colors used to output data of each table element and data type can be customized by adding a <code>[color_config]</code> section in the config file. Supported colors include red, yellow, green, cyan, blue, purple, white, and black. Supported modifiers include bold, underline, italic, dimmed, and reverse. Colors and modifiers can be specified with their full names, separated by an underscore. For example, <code>yellow_bold</code>. They can also be abbreviated using only their first letters. For example, <code>yb</code>. The only exception is blue which uses the letter &quot;u&quot; because &quot;b&quot; is used for black.</p><p>The header elements that can be configured include header_align, header_bold, header_color, index_color, leading_trailing_space_bg, and separator_color (used for table lines). The types that can be configured include primitive_binary, primitive_boolean, primitive_columnpath, primitive_date, primitive_decimal, primitive_duration, primitive_filesize, primitive_int, primitive_line, primitive_path, primitive_pattern, primitive_range, and primitive_string</p><p>For example:</p><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">color_config</span><span class="token punctuation">]</span><br><span class="token key property">header_align</span> <span class="token punctuation">=</span> <span class="token string">"l"</span> <span class="token comment"># left|l, right|r, center|c</span><br><span class="token key property">header_bold</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><br><span class="token key property">header_color</span> <span class="token punctuation">=</span> <span class="token string">"r"</span><br><span class="token key property">index_color</span> <span class="token punctuation">=</span> <span class="token string">"wd"</span><br><span class="token key property">separator_color</span> <span class="token punctuation">=</span> <span class="token string">"wd"</span> <span class="token comment"># for table lines</span><br><br><span class="token key property">primitive_binary</span> <span class="token punctuation">=</span> <span class="token string">"c"</span><br><span class="token key property">primitive_boolean</span> <span class="token punctuation">=</span> <span class="token string">"p"</span><br><span class="token key property">primitive_date</span> <span class="token punctuation">=</span> <span class="token string">"u"</span><br><span class="token key property">primitive_decimal</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_filesize</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_int</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_path</span> <span class="token punctuation">=</span> <span class="token string">"y"</span><br><span class="token key property">primitive_string</span> <span class="token punctuation">=</span> <span class="token string">"w"</span></code></pre><h3 id="line_editor-section">line_editor Section</h3><p>Nushell line editing is provided by <a href="https://crates.io/crates/rustyline?v=1.0.10" rel="noopener" target="_blank">rustyline</a>. It can be configured with the &quot;[line_editor]&quot; section. Notable settings include:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>edit_mode</code></td><td><code>&quot;emacs&quot;</code> or <code>&quot;vi&quot;</code><br>default is to use <a href="https://github.com/kkawakam/rustyline#actions?v=1.0.10" rel="noopener" target="_blank">rustyline key bindings</a></td></tr><tr><td><code>history_duplicates</code></td><td><code>&quot;alwaysadd&quot;</code> or <code>&quot;ignoreconsecutive&quot;</code> (default)</td></tr><tr><td><code>history_ignore_space</code></td><td><code>true</code> (default) or <code>false</code>; doesn't add commands with leading whitespace to history</td></tr></tbody></table><p>For example:</p><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">line_editor</span><span class="token punctuation">]</span><br><span class="token key property">edit_mode</span> <span class="token punctuation">=</span> <span class="token string">"vi"</span> <span class="token comment"># or "emacs"; omit for default keystrokes (see rustyline docs)</span><br><span class="token key property">history_ignore_space</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token comment"># omits whitespace around commands saved in history?</span></code></pre><h3 id="path-section">path Section</h3><p>The list of directories in the path of the external shell are automatically used by the nu shell.</p><p>To see a nicely formatted list of directories in your path, enter <code>echo $nu.path</code> or <code>config | get path</code>.</p><p>The command <code>config set path $nu.path</code> writes the value of <code>$nu.path</code>, which is the value of the <code>PATH</code> environment variable in the parent shell, into the <code>config.toml</code> file as the <code>path</code> variable. This is useful because it enables setting a path that is specific to Nushell. Also, if Nushell is your login shell then there is no parent shell from which to inherit a path.</p><h2 id="text_view-section">text_view Section</h2><p>None of the settings in this section seem to work. For example, setting <code>tab_width = 4</code> seems to have no effect. When not set or set to zero to should pass tab characters through without converting them to spaces. Using <code>\t</code> in strings does not seem to produce a tab character. See <a href="https://github.com/nushell/nushell/issues/3171?v=1.0.10" rel="noopener" target="_blank">this issue</a>.</p><h2 id="env-section">env Section</h2><p>The command <code>config set env $nu.env</code> writes all the current environment variables into the <code>config.toml</code> file. This is useful because it enables setting environment variables that are specific to Nushell. Also, if Nushell is your login shell then there is no parent shell from which to inherit environment variables.</p><h2 id="environment-variables">Environment Variables</h2><p>To set the value of an environment variable, enter <code>let-env NAME = value</code>. To get the value of an environment variable, use <code>$nu.env.NAME</code> which can be passed to the <code>echo</code> command to print the value.</p><p>To see a nicely formatted list of environment variables, enter <code>echo $nu.env | pivot</code> or <code>config | get env | pivot</code>.</p><p>To get the value of a single environment variable, enter <code>config | get env.{name}</code>.</p><h2 id="data-types">Data Types</h2><p>Unlike most shells where only strings are used for command input and output, Nushell supports many primitive and structured data types.</p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>boolean</code></td><td>literal values are <code>$true</code> and <code>$false</code></td></tr><tr><td><code>integer</code></td><td>whole numbers</td></tr><tr><td><code>decimal</code></td><td>numbers with a fractional part</td></tr><tr><td><code>range</code></td><td><code>{start}..{end}</code> (inclusive) or <code>{start}..&lt;{end}</code> (end is exclusive)</td></tr><tr><td><code>string</code></td><td>single words need no delimiter; multiple words need single quotes, double quotes, or backticks</td></tr><tr><td><code>line</code></td><td>a string with an OS-dependent line ending</td></tr><tr><td>glob pattern</td><td>can include <code>*</code> wildcard and <code>**</code> for traversing directories</td></tr><tr><td><code>date</code></td><td>timezone-aware; defaults to UTC</td></tr><tr><td><code>duration</code></td><td>number followed by a unit which can be <code>sec</code>, <code>min</code>, <code>hr</code>, <code>day</code>, <code>wk</code>, <code>mon</code>, or <code>yr</code></td></tr><tr><td><code>file size</code></td><td></td></tr><tr><td>column path</td><td>dot-separated list of nested column names</td></tr><tr><td>file path</td><td>platform-independent path to a file or directory</td></tr><tr><td>file size</td><td>number followed by a unit which can be <code>b</code>, <code>kb</code>, <code>mb</code>, <code>gb</code>, <code>tb</code>, or <code>pb</code></td></tr><tr><td><code>binary</code></td><td>sequence of raw bytes</td></tr><tr><td><code>list</code></td><td>sequence of values of any type</td></tr><tr><td><code>row</code></td><td>list where each value represents a column with an associated name</td></tr><tr><td><code>table</code></td><td>list of rows; returned by many Nushell commands</td></tr><tr><td><code>block</code></td><td>block of nu script code that can be executed on each row of a table</td></tr><tr><td><code>group</code></td><td>semicolon-separated list of pipelines that can be run in parallel?</td></tr></tbody></table><p>Details about these data types can be found at <a href="https://www.nushell.sh/book/types_of_data.html?v=1.0.10" rel="noopener" target="_blank">Types of data</a>.</p><p>Strings delimited by backticks support templating with expressions in pairs of double curly brackets. For example:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span>x is <span class="token punctuation">{</span><span class="token punctuation">{</span>$x<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token variable">`</span></span></code></pre><p>If the start value of a range is omitted, it defaults to zero. If the end value of a range is omitted, the range has no upper bound.</p><p>Tables have a literal syntax that allows them to be created manually. all the data is surrounded in square brackets. The values in each row are also surrounded by square brackets. The row of column headings comes first and is followed by a semicolon. The remaining rows are separated by a space. For example, <code>echo [[Name, Score]; [Mark, 19] [Tami, 21]]</code> outputs the following table:</p><pre class="language-text"><code class="language-text">â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€<br> # â”‚ Name â”‚ Score<br>â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€<br> 0 â”‚ Mark â”‚    19<br> 1 â”‚ Tami â”‚    21<br>â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€</code></pre><h2 id="common-commands">Common Commands</h2><p>Many common UNIX commands are supported by Nushell. These are implemented in Rust and are very fast. They include:</p><ul><li><code>cal</code> displays a calendar</li><li><code>cd</code> changes the current working directory</li><li><code>clear</code> clears the terminal</li><li><code>cp</code> copies a file or directory</li><li><code>date</code> gets the current date</li><li><code>du</code> gets information about disk usage</li><li><code>echo</code> outputs the values of expressions</li><li><code>exit</code> exits the current shell</li><li><code>help</code> displays help information</li><li><code>history</code> displays command history</li><li><code>kill</code> kills a process</li><li><code>ls</code> lists the contents of the current directory or path</li><li><code>mkdir</code> makes (creates) a directory</li><li><code>mv</code> moves a file or directory</li><li><code>open</code> opens a file</li><li><code>ps</code> prints process information</li><li><code>pwd</code> prints the current working directory</li><li><code>rm</code> removes (deletes) a file or directory</li><li><code>source</code> runs a script file in the current context</li><li><code>which</code> outputs the path of an executable AND information about aliases and custom commands</li></ul><p>Commands not defined in Nushell are processed using the parent shell implementation. For commands defined in Nushell, the parent shell implementation can be invoked by prefixing the command name with <code>^</code>. For example, <code>^ls *.html</code>.</p><p>Note that the <code>cp</code>, <code>mv</code>, and <code>rm</code> commands do not currently support the <code>-i</code> flag to prompt for confirmation. However, aliases for these can be defined to use the corresponding commands from the parent shell. For example, <code>alias rm = ^rm -i</code>.</p><p>To clear the screen, enter <code>clear</code>.</p><p>The nu shell displays most data in tables. Commands that produce tables include <code>ls</code>, <code>ps</code>, and <code>sys</code>. When a column displays <code>[table n rows]</code>, use the <code>get</code> filter to display those rows (examples below). SQL-like filters like <code>where</code>, <code>sort-by</code>, and <code>reverse</code> can be used to modify the output. For example:</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Change directory to a subdirectory named "src".</span><br>src <span class="token comment"># no need to type the "cd" command</span><br><br><span class="token comment"># List all the package.json files in and below the current directory</span><br><span class="token comment"># using a glob pattern.</span><br><span class="token function">ls</span> **/package.json<br><br><span class="token comment"># List TypeScript files in and below the current directory</span><br><span class="token comment"># using a glob pattern.</span><br><span class="token function">ls</span> **/*.ts<br><br><span class="token comment"># List files in a tree layout</span><br><span class="token function">ls</span> <span class="token operator">|</span> tree<br><br><span class="token comment"># List files in the current directory with a size of 2kb or more,</span><br><span class="token comment"># sorted on size from largest to smallest.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> File <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span><span class="token operator">=</span> 2kb <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse<br><br><span class="token comment"># List directories in the current directory,</span><br><span class="token comment"># sorted on size from largest to smallest,</span><br><span class="token comment"># excluding the type column since all will be "Dir".</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> reject <span class="token builtin class-name">type</span><br><br><span class="token comment"># Output processes using more than 5% of a CPU</span><br><span class="token comment"># sorted on the usage in reverse order.</span><br><span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">|</span> sort-by cpu <span class="token operator">|</span> reverse<br><br><span class="token comment"># Output information about the current machine</span><br><span class="token comment"># including OS version, host name, and uptime.</span><br>sys <span class="token operator">|</span> get <span class="token function">host</span><br><br><span class="token comment"># Output the temperature of the CPUs, GPU, and battery (tested on macOS).</span><br>sys <span class="token operator">|</span> get temp<br><br><span class="token comment"># Output the parts of the current date and time in a table.</span><br><span class="token function">date</span> now <span class="token operator">|</span> <span class="token function">date</span> to-table</code></pre><p>To convert a table to a specific text format, use the <code>to</code> command. Supported formats include csv (comma-separated), html, json, md (Markdown), toml, tsv (tab-separated), url (url-encoded text), xml, and yaml.</p><p>To write the text output of a command to a file, use the <code>save</code> command. This is alternative to the <code>&gt;</code> redirect operator using in bash.</p><p>For example:</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Create an HTML file describing the largest directories</span><br><span class="token comment"># in the current directory that are more than 1 KB.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span> <span class="token number">1024</span> <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> to html <span class="token operator">|</span> save big-zips.html<br><br><span class="token comment"># The text format defaults to CSV if the file extension is .csv.</span><br><span class="token comment"># It does not do this for other file extensions.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span> <span class="token number">1024</span> <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> save big-zips.csv</code></pre><h2 id="custom-commands">Custom Commands</h2><p>To define a custom command, enter <code>def {name} [params] { commands }</code>. Square brackets are used to surround the parameters because they are treated as a list and that is the syntax for lists.</p><p>For example, this command has no parameters.</p><pre class="language-bash"><code class="language-bash">def <span class="token function">top</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">|</span> sort-by cpu <span class="token operator">|</span> reverse <span class="token punctuation">}</span></code></pre><p>Here is a version that has a CPU percentage parameter:</p><pre class="language-bash"><code class="language-bash">def topn <span class="token punctuation">[</span>pct:int<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span> <span class="token variable">$pct</span> <span class="token operator">|</span> sort-by cpu <span class="token operator">|</span> reverse <span class="token punctuation">}</span></code></pre><h2 id="variables">Variables</h2><p>To set a variable, enter <code>let name = value</code>. Note that these are distinct from environment variables. Their scope is the context or block in which they are defined.</p><p>To set a variable to the result of a command, enter <code>let name = $(command)</code>.</p><p>To set a variable to the result of concatenating two string variables, enter <code>let v3 = echo [$v1 $v2] | str collect</code>.</p><h2 id="aliases">Aliases</h2><p>To create an alias for a command, enter <code>alias {name} = {value}</code>. For example, <code>alias cls = clear</code>.</p><p>To make aliases available in each new Nushell session, add them to the <code>startup</code> list in the config file as shown in the &quot;Configuration&quot; section.</p><h2 id="vs-code">VS Code</h2><p>There is a VS Code extension for Nushell that provides syntax highlighting. See <a href="https://marketplace.visualstudio.com/items?itemName=TheNuProjectContributors.vscode-nushell-lang?v=1.0.10" rel="noopener" target="_blank">vscode-nushell-lang</a>.</p><h2 id="more-commands">More Commands</h2><p>The <code>open</code> command renders certain file types as tables. These file types include csv, ini, json, toml, xml, and yaml.</p><p>For example, the following outputs a table of scripts in a <code>package.json</code> file.</p><pre class="language-bash"><code class="language-bash"><span class="token function">open</span> package.json <span class="token operator">|</span> get scripts <span class="token operator">|</span> pivot</code></pre><p>The output will be similar to the following:</p><pre class="language-text"><code class="language-text">â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> # â”‚ Column0 â”‚                         Column1<br>â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> 0 â”‚ build   â”‚ rollup -c<br> 1 â”‚ dev     â”‚ rollup -c -w<br> 2 â”‚ format  â”‚ prettier --write '{public,src}/**/*.{css,html,js,svelte}'<br> 3 â”‚ lint    â”‚ eslint --fix --quiet src --ext .js,.svelte<br> 4 â”‚ start   â”‚ sirv public<br>â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre><p>To see the commands in the Nushell configuration file <code>startup</code> section, enter <code>open $(config path) | get startup</code>.</p><p>Other types of files are treated as a list of lines and rendered in a table where the first column contains line numbers. For known programming language file extensions, syntax highlighting is provided. Compare this to using the <code>cat</code> command where this does not happen.</p><p>To render delimited data as a table we can use the <code>lines</code> and <code>split</code> commands. For example, consider the following file content:</p><pre class="language-text"><code class="language-text">Go|2012|Rob Pike<br>Java|1995|James Gosling<br>JavaScript|1995|Brendan Eich<br>Python|1991|Guido van Rossum<br>Ruby|1995|Yukihiro Matsumoto<br>Rust|2010|Graydon Hoare<br>TypeScript|2012|Anders Hejlsberg</code></pre><p>To render a table where each row describes a programming language, the columns have proper names, and the rows are sorted on ascending year of creation, enter <code>open languages.txt | lines | split column '|' Language Year Creator | sort-by Year</code>. The following table is produced:</p><pre class="language-text"><code class="language-text">â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> # â”‚  Language  â”‚ Year â”‚      Creator<br>â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> 0 â”‚ Python     â”‚ 1991 â”‚ Guido van Rossum<br> 1 â”‚ Java       â”‚ 1995 â”‚ James Gosling<br> 2 â”‚ JavaScript â”‚ 1995 â”‚ Brendan Eich<br> 3 â”‚ Ruby       â”‚ 1995 â”‚ Yukihiro Matsumoto<br> 4 â”‚ Rust       â”‚ 2010 â”‚ Graydon Hoare<br> 5 â”‚ Go         â”‚ 2012 â”‚ Rob Pike<br> 6 â”‚ TypeScript â”‚ 2012 â”‚ Anders Hejlsberg<br>â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre><p>If the file extension on a file does not match its content type, use the <code>from</code> command to specify the actual content type. For example, <code>open really-json.txt | from json</code>.</p><p>To prevent the <code>open</code> command from processing a file, add the <code>--raw</code> option. For example, <code>open scores.csv --raw</code>.</p><p>To process data from a URL instead of a local file, use the <code>fetch</code> command. For example, the <a href="https://jsonplaceholder.typicode.com?v=1.0.10" rel="noopener" target="_blank">{JSON} Placeholder</a> site provides free data for testing and prototyping. Todo data from this site can be rendered as a table with the following:</p><pre class="language-bash"><code class="language-bash">fetch https://jsonplaceholder.typicode.com/todos <span class="token operator">|</span> where userId <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> completed <span class="token operator">==</span> <span class="token variable">$true</span> <span class="token operator">|</span> sort-by title</code></pre><h2 id="tables">Tables</h2><p>Many Nushell commands operate on tables.</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>append</code></td><td>appends a row</td></tr><tr><td><code>autoview</code></td><td>renders data as a table or list</td></tr><tr><td><code>compact</code></td><td>removes empty rows</td></tr><tr><td><code>count</code></td><td>counts rows or list items</td></tr><tr><td><code>drop n</code></td><td>removes the last n rows (n defaults to 1)</td></tr><tr><td><code>drop column n</code></td><td>removes the last n columns (n defaults to 1)</td></tr><tr><td><code>each</code></td><td>runs a block of code on each row</td></tr><tr><td><code>every n</code></td><td>show or skip every nth row</td></tr><tr><td><code>first n</code></td><td>show only the first n rows (n defaults to 1)</td></tr><tr><td><code>flatten</code></td><td>flattens a table</td></tr><tr><td><code>format</code></td><td>formats columns into a string</td></tr><tr><td><code>from {format}</code></td><td>parses a given file format into a table</td></tr><tr><td><code>get {column}</code></td><td>gets the content of a given column as a table</td></tr><tr><td><code>group-by</code></td><td>STUDY THIS</td></tr><tr><td><code>headers</code></td><td>uses the first row as column names</td></tr><tr><td><code>histogram</code></td><td>STUDY THIS</td></tr><tr><td><code>insert</code></td><td>inserts a column</td></tr><tr><td><code>keep n</code></td><td>keeps the first n rows (n defaults to 1); same as <code>first</code>?</td></tr><tr><td><code>last n</code></td><td>show only the last n rows (n defaults to 1)</td></tr><tr><td><code>lines</code></td><td>splits a string of lines into rows</td></tr><tr><td><code>match</code></td><td>filter rows using a regular expression</td></tr><tr><td><code>merge</code></td><td>merges tables; STUDY THIS</td></tr><tr><td><code>move</code></td><td>moves columns; STUDY THIS</td></tr><tr><td><code>nth</code></td><td>keep or skip specified rows</td></tr><tr><td><code>pivot</code></td><td>swaps the rows and columns</td></tr><tr><td><code>sort-by</code></td><td>sorts the rows on a given column</td></tr><tr><td><code>reject</code></td><td>removes given columns</td></tr><tr><td><code>rename</code></td><td>renames columns</td></tr><tr><td><code>reverse</code></td><td>reverses the order of the rows</td></tr><tr><td><code>roll n</code></td><td>rolls the bottom n rows to the top (n defaults to 1)</td></tr><tr><td><code>rotate</code></td><td>rotates the table 90 degrees clockwise; can apply multiple times</td></tr><tr><td><code>rotate counter-clockwise</code></td><td>rotates the table 90 degrees counter-clockwise</td></tr><tr><td><code>select</code></td><td>specifies columns to be retained and their order</td></tr><tr><td><code>shuffle</code></td><td>shuffles the rows randomly</td></tr><tr><td><code>skip n</code></td><td>skips the first n rows (n defaults to 1)</td></tr><tr><td><code>split-by</code></td><td>?</td></tr><tr><td><code>to {format}</code></td><td>converts a table to a given format such as json</td></tr><tr><td><code>update</code></td><td>updates data in a given column</td></tr><tr><td><code>where</code></td><td>specifies a condition rows must meet to render</td></tr><tr><td><code>wrap</code></td><td>wraps data in a table</td></tr></tbody></table><p>Let's look at some examples using the <code>ls</code> command. This produces a table with the columns &quot;name&quot;, &quot;type&quot;, &quot;size&quot;, and &quot;modified&quot;. Here is a command that lists the files with a <code>.ts</code> file extension, only includes the &quot;name&quot; and &quot;size&quot; columns, sorts the files from largest to smallest, and only outputs the three largest files:</p><pre class="language-bash"><code class="language-bash"><span class="token function">ls</span> *.ts <span class="token operator">|</span> <span class="token keyword">select</span> name size <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> first <span class="token number">3</span></code></pre><p>This produces output similar to the following:</p><pre class="language-text"><code class="language-text">â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> # â”‚          name          â”‚   size<br>â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br> 0 â”‚ lib.deno.unstable.d.ts â”‚ 194.4 KB<br> 1 â”‚ lib.deno.d.ts          â”‚ 145.8 KB<br> 2 â”‚ my_server.ts           â”‚   2.7 KB<br>â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre><p>The row indexes in the first column can be used to retrieve only a specific row using the <code>nth</code> command. For example, we can add <code>| nth 1</code> to the end of the command to only output the row for the file <code>lib.deno.d.ts</code>.</p><p>The <code>get</code> command can be used to output only the values in a single column. It returns a list rather than a table. For example, the following outputs the names of the three largest TypeScript files:</p><pre class="language-bash"><code class="language-bash"><span class="token function">ls</span> *.ts <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> first <span class="token number">3</span> <span class="token operator">|</span> get name</code></pre><p>The <code>get</code> command is especially useful when the type of a field is &quot;table&quot;. The key can be arbitrarily deep with sub-keys separated by periods. For example, <code>sys | get host.sessions | where name == 'root' | get groups</code>.</p><h2 id="scripts">Scripts</h2><p>Nushell scripts are written in files with a <code>.nu</code> extension.</p><p>To execute a Nushell script, ...</p><p>Commands commonly used in Nushell scripts include <code>if</code>, <code>each</code>, ...</p><p>To iterate over a range of integers, use <code>seq start end | each { ... }</code>.</p><h2 id="plugins">Plugins</h2><p>Nushell supports adding functionality through plugins. These can be installed using the Rust <code>cargo</code> utility. For example, <code>cargo install nu_plugin_chart</code>.</p><h2 id="questions">Questions</h2><p>TODO: Is it possible to change the nu shell prompt?</p><p>The <code>$it</code> variable holds the output of the previous command so it can be used in a block. TODO: Show examples of using this.</p></article>