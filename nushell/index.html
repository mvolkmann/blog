<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Nushell</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#terminology">Terminology</a></li><li><a href="#installing">Installing</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#configuration">Configuration</a><ol><li><a href="#startup-setting">startup Setting</a></li><li><a href="#table_mode-setting">table_mode Setting</a></li><li><a href="#color_config-section">color_config Section</a></li><li><a href="#line_editor-section">line_editor Section</a></li><li><a href="#path-setting">path setting</a></li><li><a href="#env-section">env Section</a></li><li><a href="#textview-section">textview Section</a></li></ol></li><li><a href="#data-types">Data Types</a><ol><li><a href="#type-conversions">Type Conversions</a></li><li><a href="#strings">Strings</a></li><li><a href="#ranges">Ranges</a></li></ol></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://www.nushell.sh?v=1.0.12" rel="noopener" target="_blank">Nushell</a> is &quot;a new type of shell&quot;. &quot;The goal of this project is to take the Unix philosophy of shells, where pipes connect simple commands together, and bring it to the modern style of development.&quot; Nushell was created by Jonathan Turner, Yehuda Katz, and Andres Robalino. It runs in Linux, macOS, and Windows.</p><p>Nushell is implemented in Rust. And like Rust, Nushell produces helpful, nicely formatted error messages.</p><p>Nushell includes the Nu language which excels at &quot;processing streams of structured data&quot;. This provides features that are somewhat like SQL for databases. It also has similarities to the Python-based <a href="https://pandas.pydata.org?v=1.0.12" rel="noopener" target="_blank">Pandas</a> data analysis library. These are features not typically seen in shell environments. It is far from a toy project and uses recursive descent parser that is driven by its many supported data types.</p><p>Nushell continues the UNIX tradition of commands whose input can be piped in from a previous command and whose output can be piped to a subsequent command. A series of commands separated by the pipe character <code>|</code> is referred to as a &quot;pipeline&quot;. Commands stream their output to the next command in the pipeline. A command does not have to run to completion before the next command in the pipeline can begin receiving that output as its input.</p><p>Some commands such as <code>echo</code> and <code>ls</code> are lazy. This means they do not produce output unless something is requesting data from their output stream. One way to do this it to pipe their output to the <code>autoview</code> command which determines how to render the data based on its type. Piping to <code>autoview</code> occurs implicitly in the shell after the last command in a pipeline. So the command <code>ls</code> is processed as if <code>ls | autoview</code> was entered. When semicolons are used to separate multiple pipelines on the same line, <code>autoview</code> is only applied to the last pipeline. For example, <code>let a = 2; let b = 3; = $a + $b</code> outputs <code>5</code>.</p><p>Color coding is applied to commands as they are typed. If a command becomes invalid, all the text changes to red.</p><p>Because Rust is a great source for compiling to WebAssembly, it was possible to implement a web-based environment for experimenting with Nushell. This can be found at <a href="https://www.nushell.sh/demo/?v=1.0.12" rel="noopener" target="_blank">Nushell demo</a>.</p><p>The Nu language can be used outside Nushell, such as in Jupyter Notebooks.</p><p>It costs nothing but some disk space to try Nushell (about 50 MB). You don't have to commit to making it your default shell. Just pop in periodically to try it and exit to return to your current shell. Over time you may decide you like it enough to make it your default shell.</p><h2 id="terminology">Terminology</h2><p>The term &quot;pipeline&quot; was described earlier. Command pipelines entered in the shell must be on a single line, but inside scripts lines that end with <code>|</code> continue on the next line. Nushell does not support using <code>\</code> as a line continuation character like in other shells such as Bash.</p><p>Commands that take no input and produce output are referred to as &quot;inputs&quot; or &quot;sources&quot;. An example is the <code>open</code> command which loads a file.</p><p>Commands that take input and transform it are referred to as &quot;filters&quot;. Examples include the <code>where</code> and <code>sort-by</code> commands.</p><p>Commands that take input and display it or write it somewhere such as file are referred to as &quot;outputs&quot; or &quot;sinks&quot;. Examples include the <code>autoview</code> and <code>save</code> commands.</p><h2 id="installing">Installing</h2><p>There are many options for installing the Nushell.</p><p>If you have Rust installed, enter <code>cargo install nu</code>. This takes several minutes to complete.</p><p>If you are on macOS and have Homebrew installed, enter <code>brew install nushell</code>. Note that Homebrew may install a version that is several versions behind the latest.</p><p>Prebuilt binaries for Linux, macOS, and Windows can also be downloaded.</p><p>For more information on installation options, click the Nushell link above.</p><h2 id="getting-started">Getting Started</h2><p>After installing Nushell, enter <code>nu</code> in a terminal to start a shell.</p><p>For help, enter <code>help</code>. For a list of supported commands, enter <code>help commands</code>. In version 0.28.0 there are 105 Nushell commands. For help on a specific command, enter <code>help {command-name}</code> or {command-name} -h`.</p><aside>To search for commands whose name or help text contains given text, define the following custom command and pass the text to it. Later we will see how to define custom commands so they are automatically available in new Nushell sessions.<pre class="language-bash"><code class="language-bash">def help-text <span class="token punctuation">[</span>s: string<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">help</span> commands <span class="token operator">|</span><br>    <span class="token keyword">select</span> name description <span class="token operator">|</span><br>    append <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">help</span> commands <span class="token operator">|</span> get subcommands <span class="token variable">)</span></span> <span class="token operator">|</span><br>    flatten <span class="token operator">|</span><br>    where description <span class="token operator">=</span>~ <span class="token variable">$s</span> <span class="token operator">||</span> name <span class="token operator">=</span>~ <span class="token variable">$s</span><br><span class="token punctuation">}</span></code></pre></aside><p>Like in all shells, commands are executed by typing them and pressing the enter key. Multi-line commands can be entered by pressing enter before a block, delimited by square brackets or curly braces, is complete.</p><p>Nushell has great command recall and completion like the Fish and Zsh shells. Command recall even supports multi-line command editing.</p><p>When a command not defined by Nushell is encountered, the directories listed in the <code>path</code> configuration setting are searched to find a matching executable. To run a command in the <code>path</code> that happens to have the same name as a Nushell command, prefix the command name with <code>^</code>. For example, <code>^ls *.html</code> uses the <code>ls</code> command defined in root shell rather than the version defined by Nushell.</p><p>For detailed documentation on Nushell commands, see the <a href="https://www.nushell.sh/book/?v=1.0.12" rel="noopener" target="_blank">Book</a> link in the top nav of the Nushell website.</p><p>For more help, join the <a href="https://discord.gg/NtAbbGn?v=1.0.12" rel="noopener" target="_blank">nushell Discord channel</a>.</p><h2 id="configuration">Configuration</h2><p>The configuration for Nushell is stored in a <a href="https://github.com/toml-lang/toml?v=1.0.12" rel="noopener" target="_blank">TOML</a> (Tom's Obvious, Minimal Language) file whose path can be obtained by entering <code>config path</code>. Configuration settings can be changed by editing this file or using the <code>config</code> subcommands described below. Changes to the config file only affect new shell sessions, not the current one.</p><p>To edit the config file with Vim, enter <code>vim $(config path)</code>. To edit the config file with VS Code, enter <code>code $(config path)</code>. When editing the config file using VS Code, consider installing the &quot;TOML Language Support&quot; extension which profiles syntax highlighting and formatting.</p><p>Some Nushell configuration settings are top-level and do not appear in a specific TOML section. Notable top-level options include:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>disable_table_indexes</code></td><td>when <code>true</code>, omits index column from table output</td></tr><tr><td><code>path</code></td><td>list of directories in quotes to search for executables</td></tr><tr><td><code>prompt</code></td><td>command whose output is used for the prompt</td></tr><tr><td><code>skip_welcome_message</code></td><td>when <code>true</code>, starting a shell doesn't output a<br>welcome message including the Nushell version</td></tr><tr><td><code>startup</code></td><td>list of commands to execute when a shell starts;<br>typically defines aliases and custom commands</td></tr><tr><td><code>table_mode</code></td><td>controls the border lines drawn when tables are rendered<br>(more detail below)</td></tr></tbody></table><p>For details on configuration options, see <a href="https://www.nushell.sh/book/configuration.html?v=1.0.12" rel="noopener" target="_blank">Configuration</a>.</p><p>The <code>config</code> command supports many subcommands that operate on the config file. These are summarized in the table below.</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>config</code></td><td>outputs all the settings</td></tr><tr><td><code>config path</code></td><td>outputs the file path to the configuration file</td></tr><tr><td><code>config set {name} {value}</code></td><td>sets or updates a specific setting</td></tr><tr><td><code>{pipeline} | config set_into {name}</code></td><td>sets a specific setting to a piped-in value</td></tr><tr><td><code>config get {name}</code></td><td>gets a specific setting</td></tr><tr><td><code>config remove {name}</code></td><td>removes a specific setting</td></tr></tbody></table><p>For example, to change the prompt enter the following:</p><pre class="language-bash"><code class="language-bash">config <span class="token builtin class-name">set</span> prompt <span class="token string">"echo <span class="token variable"><span class="token variable">$(</span>ansi yellow<span class="token variable">)</span></span> '🦀ν> '"</span></code></pre><p>This adds the line <code>prompt = &quot;echo $(ansi yellow) '🦀ν&gt; '&quot;</code> to the configuration file. 🦀 is for the Rust mascot Ferris and ν is the Greek letter nu.</p><p>For a fancier prompt setting that includes the current working directory in yellow, and a green, right-pointing triangle at the end, add the following line in the config file:</p><pre class="language-bash"><code class="language-bash">prompt <span class="token operator">=</span> <span class="token string">"echo <span class="token variable"><span class="token variable">`</span>🦀ν <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">$(</span>ansi yellow<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">$(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">$(</span>ansi green<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">$(</span>char prompt<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token variable">`</span></span>"</span></code></pre><p>Another option for customizing the prompt is to enable the use of <a href="/blog/starship">Starship</a>, which has many more options. It also has the advantage that it can be used with nearly any shell, which is great for users that sometimes switch between shells.</p><h3 id="startup-setting"><code>startup</code> Setting</h3><p>The <code>startup</code> setting specifies a list of commands to run each time a new Nushell session is started. Typically the commands define aliases and custom commands (using <code>def</code>). For example:</p><pre class="language-toml"><code class="language-toml"><span class="token key property">startup</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"alias cls = clear"</span><span class="token punctuation">,</span><br>  <span class="token string">"def cdjs [] { cd $nu.env.JS_DIR }"</span><span class="token punctuation">,</span><br>  <span class="token string">"def cdrust [] { cd $nu.env.RUST_DIR }"</span><br><span class="token punctuation">]</span></code></pre><p>Some code formatters reformat TOML arrays to be on a single line which makes reading these definitions difficult. VS Code and the &quot;TOML Language Support&quot; extension does not do this.</p><p>Aliases that use the &quot;cd&quot; command currently causes Nushell to crash. See <a href="https://github.com/nushell/nushell/issues/3138?v=1.0.12" rel="noopener" target="_blank">issue 3138</a>.</p><h3 id="table_mode-setting"><code>table_mode</code> Setting</h3><p>Table borders can be customized with the <code>table_mode</code> setting. Supported values include:</p><ul><li>basic: uses +, -, and | characters for borders</li><li>compact: omits outer left and right borders</li><li>compact_double: like compact, but uses double lines for borders</li><li>heavy: thicker border on every cell</li><li>light: horizontal line below header and no other borders</li><li>none: no borders</li><li>reinforced: border on every cell with thick table corners</li><li>rounded: border on every cell and rounded table corners (my favorite)</li><li>thin: border on every cell</li><li>with_love: heart characters for borders</li></ul><h3 id="color_config-section"><code>color_config</code> Section</h3><p>The colors used to output data of each table element and data type can be customized by adding a <code>[color_config]</code> section in the config file. Supported colors include red, yellow, green, cyan, blue, purple, white, and black. Supported modifiers include bold, underline, italic, dimmed, and reverse. Colors and modifiers can be specified with their full names, separated by an underscore. For example, <code>yellow_bold</code>. They can also be abbreviated using only their first letters. For example, <code>yb</code>. The only exception is blue which uses the letter &quot;u&quot; because &quot;b&quot; is used for black.</p><p>The header elements and styles that can be configured include <code>header_align</code>, <code>header_bold</code>, <code>header_color</code>, <code>index_color</code>, <code>leading_trailing_space_bg</code>, and <code>separator_color</code> (used for table lines). The data types that can be configured include <code>primitive_binary</code>, <code>primitive_boolean</code>, <code>primitive_columnpath</code>, <code>primitive_date</code>, <code>primitive_decimal</code>, <code>primitive_duration</code>, <code>primitive_filesize</code>, <code>primitive_int</code>, <code>primitive_line</code>, <code>primitive_path</code>, <code>primitive_pattern</code>, <code>primitive_range</code>, and <code>primitive_string</code>.</p><p>For example:</p><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">color_config</span><span class="token punctuation">]</span><br><span class="token key property">header_align</span> <span class="token punctuation">=</span> <span class="token string">"l"</span> <span class="token comment"># use left or l, right or r, and center or c</span><br><span class="token key property">header_bold</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><br><span class="token key property">header_color</span> <span class="token punctuation">=</span> <span class="token string">"r"</span><br><span class="token key property">index_color</span> <span class="token punctuation">=</span> <span class="token string">"wd"</span> <span class="token comment"># white dimmed</span><br><span class="token key property">separator_color</span> <span class="token punctuation">=</span> <span class="token string">"wd"</span> <span class="token comment"># white dimmed; for table lines</span><br><br><span class="token key property">primitive_binary</span> <span class="token punctuation">=</span> <span class="token string">"c"</span><br><span class="token key property">primitive_boolean</span> <span class="token punctuation">=</span> <span class="token string">"p"</span><br><span class="token key property">primitive_date</span> <span class="token punctuation">=</span> <span class="token string">"u"</span><br><span class="token key property">primitive_decimal</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_filesize</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_int</span> <span class="token punctuation">=</span> <span class="token string">"g"</span><br><span class="token key property">primitive_path</span> <span class="token punctuation">=</span> <span class="token string">"y"</span><br><span class="token key property">primitive_string</span> <span class="token punctuation">=</span> <span class="token string">"w"</span></code></pre><h3 id="line_editor-section"><code>line_editor</code> Section</h3><p>Nushell line editing is provided by <a href="https://crates.io/crates/rustyline?v=1.0.12" rel="noopener" target="_blank">rustyline</a>. It can be configured with the &quot;[line_editor]&quot; section. Notable settings include:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>edit_mode</code></td><td><code>&quot;emacs&quot;</code> or <code>&quot;vi&quot;</code><br>default is to use <a href="https://github.com/kkawakam/rustyline#actions?v=1.0.12" rel="noopener" target="_blank">rustyline key bindings</a></td></tr><tr><td><code>history_duplicates</code></td><td><code>&quot;alwaysadd&quot;</code> or <code>&quot;ignoreconsecutive&quot;</code> (default)</td></tr><tr><td><code>history_ignore_space</code></td><td><code>true</code> (default) or <code>false</code>;<br>when true, commands with leading whitespace are not added to history</td></tr></tbody></table><p>For example:</p><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">line_editor</span><span class="token punctuation">]</span><br><span class="token key property">edit_mode</span> <span class="token punctuation">=</span> <span class="token string">"vi"</span> <span class="token comment"># omit for default keystrokes (see rustyline link above)</span><br><span class="token key property">history_ignore_space</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></code></pre><h3 id="path-setting"><code>path</code> setting</h3><p>The <code>path</code> setting lists directories to be searched for executables.</p><p>To see a nicely formatted list of directories in your path, enter <code>echo $nu.path</code> or <code>config | get path</code>.</p><p>The command <code>config set path $nu.path</code> sets the <code>path</code> setting to the value of <code>$nu.path</code>, which is the value of the <code>PATH</code> environment variable in the parent shell. Once set, this can be customized to be specific to Nushell. Note that if Nushell is your login shell then there is no parent shell from which to inherit a path.</p><h3 id="env-section"><code>env</code> Section</h3><p>The command <code>config set env $nu.env</code> adds all the current environment variables in the <code>env</code> section of the config file. This section can also define environment variables that are specific to Nushell. Note that if Nushell is your login shell then there is no parent shell from which to inherit environment variables.</p><h3 id="textview-section"><code>textview</code> Section</h3><p>These settings affect operation of the <code>bat</code> crate which is used by the <code>open</code> command to view text files.</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td>grid</td><td><code>true</code> (default) or <code>false</code></td></tr><tr><td>header</td><td><code>true</code> (default) or <code>false</code></td></tr><tr><td>line_numbers</td><td><code>true</code> (default) or <code>false</code></td></tr><tr><td>theme</td><td>ex. &quot;Coldark-Dark&quot;</td></tr><tr><td>true_color</td><td><code>true</code> or <code>false</code></td></tr><tr><td>vcs_modification_markers</td><td><code>true</code> or <code>false</code> (seems to have no effect)</td></tr></tbody></table><p>TODO: Setting vcs_modification_markers to true has no effect. See <a href="https://github.com/nushell/nushell/issues/3254?v=1.0.12" rel="noopener" target="_blank">issue 3254</a>.</p><p>To see the supported themes, install <code>bat</code> by entering <code>cargo install bat</code> and enter <code>bat --list-themes</code>. There are over 20.</p><h2 id="data-types">Data Types</h2><p>Unlike most shells where only strings are used for command input and output, Nushell supports many primitive and structured data types.</p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>any</code></td><td>any type below (default for variables and custom command parameters)</td></tr><tr><td><code>binary</code></td><td>sequence of raw bytes</td></tr><tr><td><code>block</code></td><td>block of nu script code (can be executed on each row of a table)</td></tr><tr><td><code>boolean</code></td><td>literal values are <code>$true</code> and <code>$false</code></td></tr><tr><td>column path</td><td>dot-separated list of nested column names</td></tr><tr><td><code>date</code></td><td>timezone-aware; defaults to UTC</td></tr><tr><td><code>decimal</code></td><td>number with a fractional part and infinite precision</td></tr><tr><td><code>duration</code></td><td>number followed by a unit which can be <code>ms</code>, <code>sec</code>, <code>min</code>, <code>hr</code>, <code>day</code>, <code>wk</code>, <code>mon</code>, or <code>yr</code></td></tr><tr><td><code>filesize</code></td><td>number followed by a unit which can be <code>b</code>, <code>kb</code>, <code>mb</code>, <code>gb</code>, <code>tb</code>, or <code>pb</code></td></tr><tr><td><code>group</code></td><td>semicolon-separated list of pipelines where only output from the last is output</td></tr><tr><td><code>int</code></td><td>whole number with infinite precision</td></tr><tr><td><code>line</code></td><td>string with an OS-dependent line ending</td></tr><tr><td>list</td><td>sequence of values of any type</td></tr><tr><td><code>number</code></td><td><code>int</code> or <code>decimal</code>, both with infinite precision</td></tr><tr><td><code>path</code></td><td>platform-independent path to a file or directory</td></tr><tr><td><code>pattern</code></td><td>glob pattern that can include <code>*</code> wildcard and <code>**</code> for traversing directories</td></tr><tr><td><code>range</code></td><td><code>{start}..{end}</code> (inclusive) or <code>{start}..&lt;{end}</code> (end is exclusive); use 2 dots, not 3</td></tr><tr><td>row</td><td>list where each value represents a column with an associated name</td></tr><tr><td><code>string</code></td><td>single words need no delimiter; multiple words need single quotes, double quotes, or backticks</td></tr><tr><td><code>table</code></td><td>list of rows; returned by many Nushell commands</td></tr></tbody></table><p>To see the type of an expression, pipe it to the <code>describe</code> command. For example, <code>date now | describe</code> outputs <code>date</code>.</p><p>Values of type of <code>int</code> are reported as <code>integer</code>. This is likely a bug. See <a href="https://github.com/nushell/nushell/issues/3206?v=1.0.12" rel="noopener" target="_blank">issue 3206</a>.</p><p>The following types are never output by the <code>describe</code> command: <code>number</code>, list, <code>pattern</code>, <code>range</code>, and <code>table</code>. Perhaps the <code>describe</code> command should be modified to report these types. See <a href="https://github.com/nushell/nushell/issues/3206?v=1.0.12" rel="noopener" target="_blank">issue 3206</a>.</p><p>Details about these data types can be found at <a href="https://www.nushell.sh/book/types_of_data.html?v=1.0.12" rel="noopener" target="_blank">Types of data</a>.</p><h3 id="type-conversions">Type Conversions</h3><p>The following type conversions are supported:</p><p>TODO: Fill in the ??? in this table. TODO: How can you create values with these types? TODO: binary, line, path, pattern, row</p><table><thead><tr><th>From</th><th>To</th><th>Command</th></tr></thead><tbody><tr><td><code>any</code></td><td><code>string</code></td><td>pipe to <code>describe</code></td></tr><tr><td><code>binary</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>boolean</code></td><td><code>string</code></td><td>pipe to <code>str from</code></td></tr><tr><td><code>date</code></td><td><code>string</code></td><td>pipe to <code>str from</code></td></tr><tr><td><code>decimal</code></td><td><code>string</code></td><td>pipe to <code>str from</code></td></tr><tr><td><code>duration</code></td><td><code>string</code></td><td>pipe to <code>str from</code> *</td></tr><tr><td><code>filesize</code></td><td><code>string</code></td><td>pipe to <code>str from</code></td></tr><tr><td><code>int</code></td><td><code>string</code></td><td>pipe to <code>str from</code></td></tr><tr><td><code>line</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>list</code></td><td><code>string</code></td><td>pipe to <code>str collect</code> if the list contains strings</td></tr><tr><td><code>path</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>pattern</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>range</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>row</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>binary</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>boolean</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>date</code></td><td>pipe to <code>str to-datetime</code></td></tr><tr><td><code>string</code></td><td><code>decimal</code></td><td>pipe to <code>str to-decimal</code></td></tr><tr><td><code>string</code></td><td><code>duration</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>filesize</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>int</code></td><td>pipe to <code>str to-int</code></td></tr><tr><td><code>string</code></td><td><code>list</code></td><td>pipe to <code>split row</code></td></tr><tr><td><code>string</code></td><td><code>path</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>range</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>row</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>string</code></td><td><code>table</code></td><td>pipe to <code>???</code></td></tr><tr><td><code>table</code></td><td><code>string</code></td><td>pipe to <code>???</code></td></tr></tbody></table><p>* TODO: This gives an error.</p><p>The <code>echo</code> command is often used to feed the initial value into a command pipeline. This can be a literal value or an expression such as a variable reference. For example:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"2021-3-21 14:30"</span> <span class="token operator">|</span> str to-datetime <span class="token operator">|</span> <span class="token function">date</span> <span class="token function">format</span> -t <span class="token string">'%B %d, %Y'</span> <span class="token operator">|</span> get formatted<br><span class="token comment"># This outputs the string "March 21, 2021".</span></code></pre><p>This handy custom command produces a string from the items in a list where the value of each item is followed by a newline character. It is used in several examples that follow. Consider adding this to the startup array in your Nushell config file.</p><pre class="language-bash"><code class="language-bash">def as-lines <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> each <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span>build-string $it <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span><span class="token variable">)</span></span> <span class="token punctuation">}</span> <span class="token operator">|</span> str collect <span class="token punctuation">}</span></code></pre><h3 id="strings">Strings</h3><p>Strings delimited by backticks support templating (a.k.a interpolation) with expressions in pairs of double curly brackets. For example:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span>x is <span class="token punctuation">{</span><span class="token punctuation">{</span>$x<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token variable">`</span></span><br><br><span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">3</span><br><span class="token builtin class-name">let</span> y <span class="token operator">=</span> <span class="token number">5</span><br><span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span>product of <span class="token punctuation">{</span><span class="token punctuation">{</span>$x<span class="token punctuation">}</span><span class="token punctuation">}</span> and <span class="token punctuation">{</span><span class="token punctuation">{</span>$y<span class="token punctuation">}</span><span class="token punctuation">}</span> is <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">$(</span><span class="token operator">=</span> $x * $y<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token variable">`</span></span><br><span class="token comment"># As discussed in the "Operators" section later,</span><br><span class="token comment"># operators can only be used in "math mode".</span><br><span class="token comment"># An expression is in math mode if it begins with `=`.</span></code></pre><p>The operators <code>=~</code> and <code>!~</code> test whether one string contains or does not contain another.</p><p>For example:</p><pre class="language-bash"><code class="language-bash"><span class="token operator">=</span> <span class="token string">"foobarbaz"</span> <span class="token operator">=</span>~ <span class="token string">"bar"</span> <span class="token comment"># true</span><br><span class="token operator">=</span> <span class="token string">"foobarbaz"</span> <span class="token operator">!</span>~ <span class="token string">"bar"</span> <span class="token comment"># false</span></code></pre><h3 id="ranges">Ranges</h3><p>Values of the <code>range</code> type can use default values for their start or end. If the start value of a range is omitted, it defaults to zero. For example, <code>..10</code> is the same as <code>0..10</code>. If the end value of a range is omitted, the range has no upper bound.</p><p>The get the starting and ending values of a <code>range</code>, pipe it to the <code>first</code> and <code>last</code> commands.</p><p>For example:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token number">3</span><span class="token punctuation">..</span><span class="token number">7</span> <span class="token operator">|</span> first <span class="token comment"># 3</span><br><span class="token builtin class-name">echo</span> <span class="token number">3</span><span class="token punctuation">..</span><span class="token operator">&lt;</span><span class="token number">7</span> <span class="token operator">|</span> last <span class="token comment"># 6</span><br><span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span> <span class="token operator">|</span> as-lines <span class="token comment"># outputs 1, 2, and 3 on separate lines</span><br>``<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">### Types With Units</span><br><br>TODO: Continue reviewing from here.<br><br>Duration values with different <span class="token function">units</span> can be added.<br>For example, <span class="token variable">`</span></span>2hr + 57min + 11sec<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>my best marathon <span class="token function">time</span><span class="token punctuation">)</span>.<br><br>Values of the <span class="token variable">`</span></span>filesize<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">type</span> with different <span class="token function">units</span> can be added.<br>For example, <span class="token variable">`</span></span>2mb + 57kb + 11b<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Combining values of different types results <span class="token keyword">in</span> a coercion error.<br>For example, <span class="token variable">`</span></span>3hr + 2mb<span class="token variable"><span class="token variable">`</span> gives this kind of error and clearly identifies<br>that the first value is a <span class="token variable">`</span></span>duration<span class="token variable"><span class="token variable">`</span> and the 2nd is a <span class="token variable">`</span></span>filesize<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">### Lists</span><br><br>The literal syntax <span class="token keyword">for</span> creating a <span class="token variable">`</span></span>list<span class="token variable"><span class="token variable">`</span> is to include expressions<br><span class="token keyword">in</span> square brackets only separated by spaces or commas <span class="token punctuation">(</span>for readability<span class="token punctuation">)</span>.<br>For example, <span class="token variable">`</span></span><span class="token punctuation">[</span><span class="token string">"foo"</span> <span class="token string">"bar"</span> <span class="token string">"baz"</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span><span class="token punctuation">[</span><span class="token string">"foo"</span>, <span class="token string">"bar"</span>, <span class="token string">"baz"</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To iterate over the elements <span class="token keyword">in</span> a list, use the <span class="token variable">`</span></span>each<span class="token variable"><span class="token variable">`</span> command.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>Mark Tami Amanda Jeremy<span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $names <span class="token operator">|</span> as-lines <span class="token comment"># outputs each name on a separate line</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span> special variable holds the output of the previous <span class="token builtin class-name">command</span><br>so it can be used <span class="token keyword">in</span> a block.<br><br>To access a list element at a given index, use <span class="token variable">`</span></span><span class="token variable">$name</span>.index<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>For example, the second element <span class="token keyword">in</span> the list above<br><span class="token function">which</span> is <span class="token string">"Tami"</span> can be accessed with <span class="token variable">`</span></span><span class="token variable">$names</span>.1<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span><span class="token keyword">in</span><span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span>not <span class="token keyword">in</span><span class="token variable"><span class="token variable">`</span> operators are used to <span class="token builtin class-name">test</span> whether a value is <span class="token keyword">in</span> a list.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span>red green blue<span class="token punctuation">]</span><br><span class="token comment"># As discussed in the "Operators" section below, "=" enables math mode</span><br><span class="token comment"># which is required to use the "in" and "not-in" operators.</span><br><span class="token operator">=</span> blue <span class="token keyword">in</span> $colors <span class="token comment"># true</span><br><span class="token operator">=</span> yellow <span class="token keyword">in</span> $colors <span class="token comment"># false</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> can be used to create a subset of a list.<br>The following example gets all the colors whose names end <span class="token keyword">in</span> <span class="token string">"e"</span><span class="token builtin class-name">.</span><br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span>red orange yellow green blue purple<span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $colors <span class="token operator">|</span> where <span class="token punctuation">$(</span>each <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> $it <span class="token operator">|</span> str ends-with <span class="token string">'e'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token comment"># outputs the list [orange blue purple]</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>empty?<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> is used to <span class="token builtin class-name">test</span> whether a string, list, or table is empty.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Strings</span><br><span class="token builtin class-name">let</span> name <span class="token operator">=</span> <span class="token string">"Mark"</span><br><span class="token operator">=</span> $name <span class="token operator">|</span> empty? <span class="token comment"># false</span><br><span class="token builtin class-name">let</span> name <span class="token operator">=</span> <span class="token string">""</span><br><span class="token operator">=</span> $name <span class="token operator">|</span> empty? <span class="token comment"># true</span><br><br><span class="token comment"># Lists</span><br><span class="token operator">=</span> $colors <span class="token operator">|</span> empty? <span class="token comment"># false</span><br><span class="token builtin class-name">let</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token operator">=</span> $colors <span class="token operator">|</span> empty? <span class="token comment"># true</span><br><br><span class="token comment"># Tables</span><br><span class="token builtin class-name">let</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Name Score<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>Mark <span class="token number">19</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>Tami <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token operator">=</span> $scores <span class="token operator">|</span> empty? <span class="token comment"># false</span><br><span class="token builtin class-name">let</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token operator">=</span> $scores <span class="token operator">|</span> empty? <span class="token comment"># true; not empty header row is present</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>reduce<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> computes a single value from a list.<br>It takes a block <span class="token function">which</span> can use the special variables <span class="token variable">`</span></span><span class="token variable">$acc</span><span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>To specify an initial value <span class="token keyword">for</span> <span class="token variable">`</span></span><span class="token variable">$acc</span><span class="token variable"><span class="token variable">`</span>, use the <span class="token variable">`</span></span>--fold<span class="token variable"><span class="token variable">`</span> flag.<br>To change <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span> to have <span class="token variable">`</span></span><span class="token variable">$it</span>.index<span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span><span class="token variable">$it</span>.item<span class="token variable"><span class="token variable">`</span> values,<br><span class="token function">add</span> the <span class="token variable">`</span></span>--numbered<span class="token variable"><span class="token variable">`</span> flag.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">8</span> <span class="token number">4</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> <span class="token string">"total ="</span> <span class="token punctuation">$(</span>echo $scores <span class="token operator">|</span> reduce <span class="token punctuation">{</span> <span class="token operator">=</span> $acc + $it <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># 15</span><br><span class="token builtin class-name">echo</span> <span class="token string">"total ="</span> <span class="token punctuation">$(</span>echo $scores <span class="token operator">|</span> math <span class="token function">sum</span><span class="token punctuation">)</span> <span class="token comment"># easier approach, same result</span><br><span class="token builtin class-name">echo</span> <span class="token string">"product ="</span> <span class="token punctuation">$(</span>echo $scores <span class="token operator">|</span> reduce --fold <span class="token number">1</span> <span class="token punctuation">{</span> <span class="token operator">=</span> $acc * $it <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># 96</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">### Tables</span><br><br>The literal syntax <span class="token keyword">for</span> creating a table describe each row with a list<br>and separate the header row from the data rows with a semicolon.<br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Name Score<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>Mark <span class="token number">19</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>Tami <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span><br>outputs the following table:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>───┬──────┬───────<br> <span class="token comment"># │ Name │ Score</span><br>───┼──────┼───────<br> <span class="token number">0</span> │ Mark │    <span class="token number">19</span><br> <span class="token number">1</span> │ Tami │    <span class="token number">21</span><br>───┴──────┴───────<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>SQL-like syntax can be used to retrieve data from a table.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Name Score<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>Mark <span class="token number">19</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>Tami <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $scores <span class="token operator">|</span> where Name <span class="token operator">==</span> <span class="token string">'Tami'</span> <span class="token operator">|</span> get Score <span class="token comment"># 21</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The use of the <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> above is shorthand <span class="token keyword">for</span><br>the expanded syntax using the special variable <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span> <span class="token function">which</span> holds<br>the result of the previous <span class="token builtin class-name">command</span> or the current iteration value.<br>The previous pipeline can be written as follows using this syntax.<br>The curly braces after the <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> define a block on <span class="token function">which</span> it operates.<br>The <span class="token variable">`</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span> enters <span class="token string">"math mode"</span><span class="token builtin class-name">.</span><br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">echo</span> $scores <span class="token operator">|</span> where <span class="token punctuation">{</span> <span class="token operator">=</span> $it.Name <span class="token operator">==</span> <span class="token string">'Tami'</span><span class="token punctuation">}</span> <span class="token operator">|</span> get Score <span class="token comment"># 21</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Single-row tables can be used like objects <span class="token keyword">in</span> other languages.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>color flavor<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>yellow vanilla<span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $data.flavor <span class="token comment"># outputs vanilla</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Nushell is currently very picky about<br>splitting table data over multiple lines.<br>The newlines <span class="token keyword">in</span> the table definition below <span class="token builtin class-name">break</span> it<span class="token operator">!</span><br>See <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/nushell/nushell/issues/3186?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>issue <span class="token number">318</span><span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>/a<span class="token operator">></span>.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> sports <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">[</span>name players<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">[</span>baseball <span class="token number">9</span><span class="token punctuation">]</span><br>  <span class="token punctuation">[</span>basketball <span class="token number">5</span><span class="token punctuation">]</span><br>  <span class="token punctuation">[</span>football <span class="token number">11</span><span class="token punctuation">]</span><br>  <span class="token punctuation">[</span>hockey <span class="token number">6</span><span class="token punctuation">]</span><br><span class="token punctuation">]</span><br><span class="token builtin class-name">let</span> sport <span class="token operator">=</span> basketball<br><span class="token builtin class-name">let</span> players <span class="token operator">=</span> <span class="token punctuation">$(</span>echo $sports <span class="token operator">|</span> where name <span class="token operator">==</span> $sport <span class="token operator">|</span> get players<span class="token punctuation">)</span><br><span class="token builtin class-name">echo</span> <span class="token variable">`</span></span>The number of active players <span class="token keyword">in</span>  is <span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Tables can contain nested tables.<br>Note the placement of newlines <span class="token keyword">in</span> the example below<br><span class="token function">which</span> avoids the issue described above.<br>Note the use of <span class="token variable">`</span></span>to json<span class="token variable"><span class="token variable">`</span> to generate JSON from a table.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">[</span>name address<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><br>    <span class="token string">"Mark Volkmann"</span>, <span class="token punctuation">[</span><br>      <span class="token punctuation">[</span>street city state zip<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><br>        <span class="token string">"123 Some Street"</span> <span class="token string">"Somewhere"</span> <span class="token string">"MO"</span> <span class="token number">12345</span><br>      <span class="token punctuation">]</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">]</span><br><br><span class="token builtin class-name">echo</span> $person<br><span class="token builtin class-name">echo</span> $person <span class="token operator">|</span> get address<br><span class="token builtin class-name">echo</span> $person <span class="token operator">|</span> to json --pretty <span class="token number">2</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Running the code above produces the following result:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>╭───┬───────────────┬────────────────╮<br>│ <span class="token comment"># │ name          │ address        │</span><br>├───┼───────────────┼────────────────┤<br>│ <span class="token number">0</span> │ Mark Volkmann │ <span class="token punctuation">[</span>table <span class="token number">1</span> rows<span class="token punctuation">]</span> │<br>╰───┴───────────────┴────────────────╯<br><br>╭───┬─────────────────┬───────────┬───────┬───────╮<br>│ <span class="token comment"># │ street          │ city      │ state │ zip   │</span><br>├───┼─────────────────┼───────────┼───────┼───────┤<br>│ <span class="token number">0</span> │ <span class="token number">123</span> Some Street │ Somewhere │ MO    │ <span class="token number">12345</span> │<br>╰───┴─────────────────┴───────────┴───────┴───────╯<br><br><span class="token punctuation">{</span><br>  <span class="token string">"address"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      <span class="token string">"city"</span><span class="token builtin class-name">:</span> <span class="token string">"Somewhere"</span>,<br>      <span class="token string">"state"</span><span class="token builtin class-name">:</span> <span class="token string">"MO"</span>,<br>      <span class="token string">"street"</span><span class="token builtin class-name">:</span> <span class="token string">"123 Some Street"</span>,<br>      <span class="token string">"zip"</span><span class="token builtin class-name">:</span> <span class="token number">12345</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span>,<br>  <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"Mark Volkmann"</span><br><span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">## Operators</span><br><br>Nushell supports the following operators:<br><br><span class="token operator">|</span> Operator <span class="token operator">|</span> Description                     <span class="token operator">|</span><br><span class="token operator">|</span> -------- <span class="token operator">|</span> ------------------------------- <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>+<span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> <span class="token function">add</span>                             <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> subtract                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>*<span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> multiply                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>/<span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> divide                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>**<span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> exponentiation <span class="token punctuation">(</span>power<span class="token punctuation">)</span>          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>mod<span class="token variable"><span class="token variable">`</span>    <span class="token operator">|</span> modulo                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">==</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> equal                           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">!=</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> not equal                       <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">&lt;</span><span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> <span class="token function">less</span> than                       <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">&lt;</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> <span class="token function">less</span> than or equal              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">></span><span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> greater than                    <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">></span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> greater than or equal           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">=</span>~<span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> string contains another         <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">!</span>~<span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> string does not contain another <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token keyword">in</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> value <span class="token keyword">in</span> list                   <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>not <span class="token keyword">in</span><span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> value not <span class="token keyword">in</span> list               <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token operator">&amp;&amp;</span><span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> and two Boolean values          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token punctuation">\</span><span class="token operator">|</span><span class="token punctuation">\</span><span class="token operator">|</span><span class="token variable"><span class="token variable">`</span>   <span class="token operator">|</span> or two Boolean values           <span class="token operator">|</span><br><br>Parentheses can be used <span class="token keyword">for</span> <span class="token for-or-select variable">grouping</span> <span class="token keyword">in</span> order to specify evaluation order.<br>Operators can only be used <span class="token keyword">in</span> <span class="token string">"math mode"</span><span class="token builtin class-name">.</span><br>An expression is <span class="token keyword">in</span> math mode <span class="token keyword">if</span> it begins with <span class="token variable">`</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Some commands, such as <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span> are automatically evaluated <span class="token keyword">in</span> math mode.<br><br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">let</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token builtin class-name">let</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token variable">$a</span> * <span class="token variable">$b</span><span class="token variable"><span class="token variable">`</span> outputs <span class="token variable">`</span></span><span class="token number">6</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## Working with numbers</span><br><br>Many of the operators listed <span class="token keyword">in</span> the previous section operate on numbers.<br><br>The <span class="token variable">`</span></span>inc<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> has three uses.<br><br>The first use of the <span class="token variable">`</span></span>inc<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> is to<br><span class="token builtin class-name">return</span> a value that is one higher that the piped <span class="token keyword">in</span> value.<br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token number">2</span> <span class="token operator">|</span> inc<span class="token variable"><span class="token variable">`</span> gives <span class="token variable">`</span></span><span class="token number">3</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Since variables are immutable,<br>this cannot be used to increment the value <span class="token keyword">in</span> a variable.<br><br>The second use of the <span class="token variable">`</span></span>inc<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> is to increment all the <span class="token variable">`</span></span>int<span class="token variable"><span class="token variable">`</span> values<br><span class="token keyword">in</span> a given table <span class="token function">column</span> <span class="token keyword">if</span> all the values <span class="token keyword">in</span> the <span class="token function">column</span> are of <span class="token builtin class-name">type</span> <span class="token variable">`</span></span>int<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Name Size<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>Mark <span class="token number">33</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>Tami <span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">|</span> inc Size<span class="token variable"><span class="token variable">`</span><br>results <span class="token keyword">in</span> a table where the values <span class="token keyword">in</span> the <span class="token string">"Size"</span> <span class="token function">column</span> are <span class="token number">34</span> and <span class="token number">29</span>.<br><br>The third use of the <span class="token variable">`</span></span>inc<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> is to increment<br>a specify part of a semantic version number<br>that includes major, minor, and patch parts.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">echo</span> <span class="token number">1.2</span>.3 <span class="token operator">|</span> inc -M <span class="token comment"># increments major resulting in 2.0.0</span><br><span class="token builtin class-name">echo</span> <span class="token number">1.2</span>.3 <span class="token operator">|</span> inc -m <span class="token comment"># increments minor resulting in 1.3.0</span><br><span class="token builtin class-name">echo</span> <span class="token number">1.2</span>.3 <span class="token operator">|</span> inc -p <span class="token comment"># increments patch resulting in 1.2.4</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>There is no <span class="token variable">`</span></span>dec<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> <span class="token keyword">for</span> decrementing values.<br><br><span class="token comment">## Working with URLs</span><br><br>The <span class="token variable">`</span></span>fetch<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> can be used to get data from a URL.<br>The website <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://jsonplaceholder.typicode.com?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>JSONPlaceholder<span class="token operator">&lt;</span>/a<span class="token operator">></span><br>provides access to <span class="token function">free</span> sample JSON data.<br>The following example gets data about TODOs from this site.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>fetch https://jsonplaceholder.typicode.com/todos <span class="token operator">|</span><br>  where userId <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> completed <span class="token operator">==</span> $false <span class="token operator">|</span><br>  sort-by title<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>post<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> sends an HTTP POST requests to a server<br>and returns the response as a table.<br>The following example simulates creating a TODO resource<br>using the JSONPlaceholder site.<br>This particular <span class="token function">service</span> just simulates creating a resource.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> json <span class="token operator">=</span> <span class="token string">'{"title": "get milk", "userId": 5}"'</span><br>post https://jsonplaceholder.typicode.com/todos $json<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Nushell does not currently provide commands<br>to send PUT, PATCH, or DELETE requests.<br><br><span class="token comment">## Common Commands</span><br><br>Many common UNIX commands are supported by Nushell.<br>These are implemented <span class="token keyword">in</span> Rust and are very fast.<br>They include:<br><br>- <span class="token variable">`</span></span><span class="token function">cal</span><span class="token variable"><span class="token variable">`</span> displays a calendar<br>- <span class="token variable">`</span></span><span class="token builtin class-name">cd</span><span class="token variable"><span class="token variable">`</span> changes the current working directory<br>- <span class="token variable">`</span></span><span class="token function">clear</span><span class="token variable"><span class="token variable">`</span> clears the terminal<br>- <span class="token variable">`</span></span><span class="token function">cp</span><span class="token variable"><span class="token variable">`</span> copies a <span class="token function">file</span> or directory<br>- <span class="token variable">`</span></span><span class="token function">date</span><span class="token variable"><span class="token variable">`</span> gets the current <span class="token function">date</span><br>- <span class="token variable">`</span></span><span class="token function">du</span><span class="token variable"><span class="token variable">`</span> gets information about disk usage<br>- <span class="token variable">`</span></span><span class="token builtin class-name">echo</span><span class="token variable"><span class="token variable">`</span> outputs the values of expressions<br>- <span class="token variable">`</span></span><span class="token builtin class-name">exit</span><span class="token variable"><span class="token variable">`</span> exits the current shell<span class="token punctuation">;</span> can specify status code<br>- <span class="token variable">`</span></span><span class="token builtin class-name">help</span><span class="token variable"><span class="token variable">`</span> displays <span class="token builtin class-name">help</span> information<br>- <span class="token variable">`</span></span><span class="token function">history</span><span class="token variable"><span class="token variable">`</span> displays <span class="token builtin class-name">command</span> <span class="token function">history</span><br>- <span class="token variable">`</span></span><span class="token function">kill</span><span class="token variable"><span class="token variable">`</span> kills a process<br>- <span class="token variable">`</span></span><span class="token function">ls</span><span class="token variable"><span class="token variable">`</span> lists the contents of the current directory or path<br>- <span class="token variable">`</span></span><span class="token function">mkdir</span><span class="token variable"><span class="token variable">`</span> makes <span class="token punctuation">(</span>creates<span class="token punctuation">)</span> a directory<br>- <span class="token variable">`</span></span><span class="token function">mv</span><span class="token variable"><span class="token variable">`</span> moves a <span class="token function">file</span> or directory<br>- <span class="token variable">`</span></span><span class="token function">open</span><span class="token variable"><span class="token variable">`</span> opens a <span class="token function">file</span><br>- <span class="token variable">`</span></span><span class="token function">ps</span><span class="token variable"><span class="token variable">`</span> prints process information<br>- <span class="token variable">`</span></span><span class="token builtin class-name">pwd</span><span class="token variable"><span class="token variable">`</span> prints the current working directory<br>- <span class="token variable">`</span></span><span class="token function">rm</span><span class="token variable"><span class="token variable">`</span> removes <span class="token punctuation">(</span>deletes<span class="token punctuation">)</span> a <span class="token function">file</span> or directory<br>- <span class="token variable">`</span></span><span class="token builtin class-name">source</span><span class="token variable"><span class="token variable">`</span> runs a script <span class="token function">file</span> <span class="token keyword">in</span> the current context<br>- <span class="token variable">`</span></span><span class="token function">which</span><span class="token variable"><span class="token variable">`</span> outputs the path of an executable AND<br>  information about aliases and custom commands<br><br>Note that the <span class="token variable">`</span></span><span class="token function">cp</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span><span class="token function">mv</span><span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span><span class="token function">rm</span><span class="token variable"><span class="token variable">`</span> commands <span class="token keyword">do</span> not<br>currently support the <span class="token variable">`</span></span>-i<span class="token variable"><span class="token variable">`</span> flag to prompt <span class="token keyword">for</span> confirmation.<br>However, aliases <span class="token keyword">for</span> these can be defined to<br>use the corresponding commands from the parent shell.<br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">alias</span> <span class="token function">rm</span> <span class="token operator">=</span> ^rm -i<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To <span class="token function">clear</span> the screen, enter <span class="token variable">`</span></span><span class="token function">clear</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The nu shell displays <span class="token function">most</span> data <span class="token keyword">in</span> tables.<br>Commands that produce tables include <span class="token variable">`</span></span><span class="token function">ls</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span><span class="token function">ps</span><span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>sys<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>When a <span class="token function">column</span> displays <span class="token variable">`</span></span><span class="token punctuation">[</span>table n rows<span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span>,<br>use the <span class="token variable">`</span></span>get<span class="token variable"><span class="token variable">`</span> filter to display those rows <span class="token punctuation">(</span>examples below<span class="token punctuation">)</span>.<br>SQL-like filters like <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>sort-by<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>reverse<span class="token variable"><span class="token variable">`</span><br>can be used to modify the output.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Change directory to a subdirectory named "src".</span><br>src <span class="token comment"># no need to type the "cd" command</span><br><br><span class="token comment"># List all the package.json files in and below the current directory</span><br><span class="token comment"># using a glob pattern.</span><br><span class="token function">ls</span> **/package.json<br><br><span class="token comment"># List TypeScript files in and below the current directory</span><br><span class="token comment"># using a glob pattern.</span><br><span class="token function">ls</span> **/*.ts<br><br><span class="token comment"># List files in a tree layout</span><br><span class="token function">ls</span> <span class="token operator">|</span> tree<br><br><span class="token comment"># List files in the current directory with a size of 2kb or more,</span><br><span class="token comment"># sorted on size from largest to smallest.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> File <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span><span class="token operator">=</span> 2kb <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse<br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> File <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span><span class="token operator">=</span> 2kb <span class="token operator">|</span> sort-by -r size <span class="token comment"># same</span><br><br><span class="token comment"># List directories in the current directory,</span><br><span class="token comment"># sorted on size from largest to smallest,</span><br><span class="token comment"># excluding the type column since all will be "Dir".</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">|</span> sort-by -r size <span class="token operator">|</span> reject <span class="token builtin class-name">type</span><br><br><span class="token comment"># Output processes using more than 5% of a CPU</span><br><span class="token comment"># sorted on the usage in reverse order.</span><br><span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">|</span> sort-by -r cpu<br><br><span class="token comment"># Output information about the current machine</span><br><span class="token comment"># including OS version, host name, and uptime.</span><br>sys <span class="token operator">|</span> get <span class="token function">host</span><br><br><span class="token comment"># Output the temperature of the CPUs, GPU, and battery (tested on macOS).</span><br>sys <span class="token operator">|</span> get temp<br><br><span class="token comment"># Output the parts of the current date and time in a table.</span><br><span class="token function">date</span> now <span class="token operator">|</span> <span class="token function">date</span> to-table<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To convert a table to a specific text format, use the <span class="token variable">`</span></span>to<span class="token variable"><span class="token variable">`</span> command.<br>Supported formats include csv <span class="token punctuation">(</span>comma-separated<span class="token punctuation">)</span>, html, json,<br>md <span class="token punctuation">(</span>Markdown<span class="token punctuation">)</span>, toml, tsv <span class="token punctuation">(</span>tab-separated<span class="token punctuation">)</span>, url <span class="token punctuation">(</span>url-encoded text<span class="token punctuation">)</span>, xml, and yaml.<br><br>To <span class="token function">write</span> the text output of a <span class="token builtin class-name">command</span> to a file, use the <span class="token variable">`</span></span>save<span class="token variable"><span class="token variable">`</span> command.<br>This is alternative to the <span class="token variable">`</span></span><span class="token operator">></span><span class="token variable"><span class="token variable">`</span> redirect operator using <span class="token keyword">in</span> bash.<br><br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Create an HTML file describing the largest directories</span><br><span class="token comment"># in the current directory that are more than 1 KB.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span> <span class="token number">1024</span> <span class="token operator">|</span> sort-by -r size <span class="token operator">|</span> to html <span class="token operator">|</span> save big-zips.html<br><br><span class="token comment"># The text format defaults to CSV if the file extension is .csv.</span><br><span class="token comment"># It does not do this for other file extensions.</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token builtin class-name">type</span> <span class="token operator">==</span> Dir <span class="token operator">&amp;&amp;</span> size <span class="token operator">></span> <span class="token number">1024</span> <span class="token operator">|</span> sort-by -r size <span class="token operator">|</span> save big-zips.csv<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">## Aliases</span><br><br>To create an <span class="token builtin class-name">alias</span> <span class="token keyword">for</span> a command, enter <span class="token variable">`</span></span><span class="token builtin class-name">alias</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>command<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">alias</span> cls <span class="token operator">=</span> <span class="token function">clear</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token builtin class-name">command</span> can be built-in or custom<br>and literal arguments can be specified.<br>When the aliases is used, additional arguments can be specified.<br>For example, <span class="token builtin class-name">alias</span><br><br>To <span class="token function">make</span> aliases available <span class="token keyword">in</span> each new Nushell session,<br><span class="token function">add</span> them to the <span class="token variable">`</span></span>startup<span class="token variable"><span class="token variable">`</span> list <span class="token keyword">in</span> the config <span class="token function">file</span><br>as shown <span class="token keyword">in</span> the <span class="token string">"Configuration"</span> section.<br><br>Aliases cannot use pipelines. Custom commands must be used instead.<br>For example, this does not work:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">alias</span> <span class="token function">top</span> <span class="token operator">=</span> <span class="token function">ps</span> <span class="token operator">|</span> sort-by -r cpu <span class="token operator">|</span> first <span class="token number">10</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>But this does work:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def <span class="token function">top</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> sort-by cpu -r <span class="token operator">|</span> first <span class="token number">10</span> <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>For <span class="token function">more</span> detail on supported commands, see the <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://www.nushell.sh/book/command_reference.html?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>Command Reference<span class="token operator">&lt;</span>/a<span class="token operator">></span>.<br><br><span class="token comment">## Custom Commands</span><br><br>To define a custom command, enter <span class="token variable">`</span></span>def <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">[</span>params<span class="token punctuation">]</span> <span class="token punctuation">{</span> commands <span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Names can be <span class="token keyword">in</span> kebab-case, including hyphens <span class="token keyword">for</span> readability.<br>They can end with <span class="token variable">`</span></span>?<span class="token variable"><span class="token variable">`</span> to indicate that they <span class="token builtin class-name">return</span> a Boolean value.<br>Square brackets are used to surround the parameters because<br>they are treated as a list and that is the syntax <span class="token keyword">for</span> lists.<br>If no parameters are required, <span class="token variable">`</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span> must still be included.<br><br>The result of a custom <span class="token builtin class-name">command</span> is<br>the result of the last <span class="token builtin class-name">command</span> pipeline<br>or a string formed by the accumulation of everything it echoes.<br><br>The following custom <span class="token builtin class-name">command</span> has no parameters and outputs a table<br>showing the processes that are using <span class="token function">more</span> <span class="token number">5</span>% or <span class="token function">more</span> of CPU usage<br>sorted from highest to lowest.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def <span class="token function">top</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span><span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">|</span> sort-by -r cpu <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To run this, enter <span class="token variable">`</span></span><span class="token function">top</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Here is a version that has a CPU percentage parameter.<br>Parameter values are accessed by adding <span class="token variable">`</span></span>$<span class="token variable"><span class="token variable">`</span> before their names.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def topn <span class="token punctuation">[</span>pct<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span><span class="token operator">=</span> $pct <span class="token operator">|</span> sort-by -r cpu <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To run this, enter <span class="token variable">`</span></span><span class="token function">top</span><span class="token variable"><span class="token variable">`</span> followed by a number like <span class="token variable">`</span></span><span class="token function">top</span> <span class="token number">5</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token builtin class-name">type</span> of each parameter can optionally be specified after a colon to<br>provide better documentation and better error messages when used incorrectly.<br>Supported types include <span class="token variable">`</span></span>any<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>int<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>number<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>for float<span class="token punctuation">)</span>,<br><span class="token variable">`</span></span>path<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>for <span class="token function">file</span> paths<span class="token punctuation">)</span>, <span class="token variable">`</span></span>pattern<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>for glob patterns<span class="token punctuation">)</span>, <span class="token variable">`</span></span>range<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>string<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>table<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>block<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>unit<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>like void?<span class="token punctuation">)</span>.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def topn <span class="token punctuation">[</span>pct: number<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token function">ps</span> <span class="token operator">|</span> where cpu <span class="token operator">></span><span class="token operator">=</span> $pct <span class="token operator">|</span> sort-by -r cpu <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>When invoking a command, multiple arguments are separated by spaces.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def <span class="token function">sum</span> <span class="token punctuation">[</span>n1: number, n2: number<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token operator">=</span> $n1 + $n2 <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To run this, enter a <span class="token builtin class-name">command</span> like <span class="token variable">`</span></span><span class="token function">sum</span> <span class="token number">1</span> <span class="token number">2</span><span class="token variable"><span class="token variable">`</span> <span class="token function">which</span> outputs <span class="token variable">`</span></span><span class="token number">3</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Here are examples of custom commands whose result is defined by what they echo.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def evaluate <span class="token punctuation">[</span>n: int<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string <span class="token string">"The number "</span> $n <span class="token string">" is "</span><span class="token punctuation">)</span><br>  <span class="token keyword">if</span> $n <span class="token operator">></span> <span class="token number">5</span> <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> big <span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> small <span class="token punctuation">}</span><br>  <span class="token builtin class-name">echo</span> <span class="token string">"."</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>evaluate <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># The number 1 is small.</span><br><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>evaluate <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment"># The number 9 is big.</span><br><br>def evaluate2 <span class="token punctuation">[</span>n: int<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">let</span> word <span class="token operator">=</span> <span class="token punctuation">$(</span>if $n <span class="token operator">></span> <span class="token number">5</span> <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> big <span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> small <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string <span class="token string">"The number "</span> $n <span class="token string">" is "</span> $word <span class="token string">"."</span> <span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br><span class="token punctuation">}</span><br><br><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>evaluate2 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># The number 1 is small.</span><br><span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>evaluate2 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment"># The number 9 is big.</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Input from other commands can be piped into a custom <span class="token builtin class-name">command</span><br>and accessed with the <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span> variable.<br>Output from custom commands can be piped into other commands.<br><br>The parameters <span class="token keyword">in</span> the examples above are positional.<br>Named parameters <span class="token punctuation">(</span>a.k.a. flags<span class="token punctuation">)</span> can also be specified<br>by adding <span class="token variable">`</span></span>--<span class="token variable"><span class="token variable">`</span> before their names.<br>These are long-form names.<br>To also specify short-form names, follow the long name with <span class="token variable">`</span></span><span class="token punctuation">(</span>-short-name<span class="token punctuation">)</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Like positional parameters, types can be specified <span class="token keyword">for</span> flags.<br>For example:<br><br><br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Prints a value followed by a newline.</span><br>def logv <span class="token punctuation">[</span>value: any<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string $value <span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br>  <span class="token comment"># Another way to write the line above is:</span><br>  <span class="token comment">#echo [</span><span class="token variable">`</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">$value</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span> <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">|</span> str collect<br><span class="token punctuation">}</span><br><br><span class="token comment"># Prints "name = value" followed by a newline.</span><br>def lognv <span class="token punctuation">[</span>name: string, value: any<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  logv <span class="token punctuation">$(</span>build-string $name <span class="token string">" = "</span> $value<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br>def logv-color <span class="token punctuation">[</span><br>  text: string,<br>  --color <span class="token punctuation">(</span>-c<span class="token punctuation">)</span>: string <span class="token comment"># a flag</span><br><span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token comment"># This code does not work yet.</span><br>  <span class="token comment"># It gives a coercion error that supposed is fixed in the next version of nu.</span><br>  <span class="token comment"># See https://github.com/nushell/nushell/discussions/3178.</span><br>  <span class="token comment">#if $color == $nothing {</span><br><br>  <span class="token comment">#if $(echo $color | empty?) { # same as next line</span><br>  <span class="token keyword">if</span> <span class="token punctuation">$(</span><span class="token operator">=</span> $color <span class="token operator">|</span> empty?<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    logv $text<br>  <span class="token punctuation">}</span> <span class="token punctuation">{</span><br>    logv <span class="token punctuation">$(</span>build-string <span class="token punctuation">$(</span>ansi $color<span class="token punctuation">)</span> $text <span class="token punctuation">$(</span>ansi reset<span class="token punctuation">))</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>logv-color <span class="token string">"Giraffes are cool!"</span> <span class="token string">"yellow"</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><br><br>Custom commands can take arguments with a <span class="token builtin class-name">type</span> of <span class="token variable">`</span></span>block<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>The <span class="token variable">`</span></span><span class="token keyword">do</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> can be used to execute the block.<br>For example, this can be used to implement <span class="token variable">`</span></span>map<span class="token variable"><span class="token variable">`</span><br><span class="token function">which</span> takes a list and a block.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># You asked about this in Discord.</span><br>def map <span class="token punctuation">[</span>values, code: block<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token comment"># What type can be specified for values?</span><br>  <span class="token builtin class-name">echo</span> $values <span class="token operator">|</span> each $code<br><span class="token punctuation">}</span><br><br><span class="token builtin class-name">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>Mark Tami Amanda Jeremy<span class="token punctuation">]</span><br><br>map $names <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string <span class="token string">"Hello, "</span> $it <span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br><span class="token punctuation">}</span> <span class="token operator">|</span> str collect<br><br><span class="token comment"># Same result just using each.</span><br><span class="token builtin class-name">echo</span> $names <span class="token operator">|</span> each <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string <span class="token string">"Hello, "</span> $it <span class="token punctuation">(</span><span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br><span class="token punctuation">}</span> <span class="token operator">|</span> str collect<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Custom commands can take a variable number of arguments<br>using the parameter syntax <span class="token variable">`</span></span><span class="token punctuation">..</span>.rest<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>The parameter name must be <span class="token string">"rest"</span> and it must be the last parameter.<br>Its value is a list.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def labelled-sum <span class="token punctuation">[</span>label: string, <span class="token punctuation">..</span>.rest: int<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string $label <span class="token string">" = "</span> <span class="token punctuation">$(</span>echo $rest <span class="token operator">|</span> math <span class="token function">sum</span><span class="token punctuation">)</span> <span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br><span class="token punctuation">}</span><br><br>labelled-sum <span class="token string">"sum of scores"</span> <span class="token number">3</span> <span class="token number">7</span> <span class="token number">19</span> <span class="token comment"># sum of scores = 29</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Help <span class="token keyword">for</span> custom commands is obtained <span class="token keyword">in</span> the same way it is <span class="token keyword">for</span><br>built-in commands, using <span class="token variable">`</span></span><span class="token builtin class-name">help</span> <span class="token punctuation">{</span>command-name<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span><span class="token punctuation">{</span>command-name<span class="token punctuation">}</span> -h<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To <span class="token function">add</span> documentation to custom commands,<br><span class="token function">add</span> a comment before the definition and after each parameter.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Computes the sum of two numbers.</span><br>def <span class="token function">sum</span> <span class="token punctuation">[</span><br>  n1: number, <span class="token comment"># first number</span><br>  n2: number <span class="token comment"># second number</span><br><span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token operator">=</span> $n1 + $n2<br><span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Subcommands provide a way of grouping commands under a common <span class="token string">"namespace"</span><span class="token builtin class-name">.</span><br>Examples of such built-in namespaces include<br><span class="token variable">`</span></span><span class="token function">date</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>from<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>to<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>math<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>str<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>url<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span><span class="token function">date</span><span class="token variable"><span class="token variable">`</span> subcommands are<br><span class="token variable">`</span></span><span class="token function">format</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>list-timezone<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>now<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>to-table<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>to-timezone<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>from<span class="token variable"><span class="token variable">`</span> subcommands convert data from a given <span class="token function">format</span> to a table.<br>They are<br><span class="token variable">`</span></span>csv<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>eml<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ics<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ini<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>json<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ods<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ssv<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>toml<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>tsv<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>url<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>vcf<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>xlsx<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>xml<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>yaml<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>yml<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>to<span class="token variable"><span class="token variable">`</span> subcommands convert a table into a given output <span class="token function">format</span> and<br>are commonly piped to the <span class="token variable">`</span></span>save<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> to <span class="token function">write</span> the result to a file.<br>They are<br><span class="token variable">`</span></span>csv<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>html<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>json<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>md<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>toml<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>tsv<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>url<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>xml<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>yaml<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>math<span class="token variable"><span class="token variable">`</span> subcommands perform math calculations.<br>They are<br><span class="token variable">`</span></span>abs<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>avg<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ceil<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span><span class="token builtin class-name">eval</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>floor<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>max<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>median<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>min<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>mode<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>product<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>round<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>sqrt<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>stddev<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span><span class="token function">sum</span><span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>variance<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Also see the commands <span class="token variable">`</span></span>inc<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>into-int<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>random<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span><span class="token function">seq</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>str<span class="token variable"><span class="token variable">`</span> subcommands perform string operations.<br>They are<br><span class="token variable">`</span></span>camel-case<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>capitalize<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>collect<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>contains<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>downcase<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ends-with<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>find-replace<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>from<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>index-of<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>kebab-case<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>length<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>lpad<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>ltrim<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>pascal-case<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>reverse<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>rpad<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>rtrim<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>screaming-snake-case<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>snake-case<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>starts-with<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>substring<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>to-datetime<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>to-decimal<span class="token variable"><span class="token variable">`</span>,<br><span class="token variable">`</span></span>to-int<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>trim<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>upcase<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Also see the commands <span class="token variable">`</span></span>build-string<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>char<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>flatten<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span><span class="token function">format</span><span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>size<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>url<span class="token variable"><span class="token variable">`</span> subcommands get information from a URL.<br>They are <span class="token variable">`</span></span><span class="token function">host</span><span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>path<span class="token variable"><span class="token variable">`</span>, <span class="token variable">`</span></span>query<span class="token variable"><span class="token variable">`</span>, and <span class="token variable">`</span></span>scheme<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>ex. http<span class="token punctuation">)</span>.<br><br>Defining a custom subcommand is similar to defining a custom command,<br>but the name is specified as the parent <span class="token builtin class-name">command</span> and subcommand name<br>separated by a space and inside quotes.<br>In the following custom commands, the parent <span class="token builtin class-name">command</span> <span class="token variable">`</span></span>rmv<span class="token variable"><span class="token variable">`</span> is my initials:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># Parent command.</span><br>def rmv <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token comment"># Increments a number by 1.</span><br>def <span class="token string">"rmv increment"</span> <span class="token punctuation">[</span>n: number<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token operator">=</span> $n + <span class="token number">1</span> <span class="token punctuation">}</span><br><br><span class="token comment"># Doubles a number.</span><br>def <span class="token string">"rmv double"</span> <span class="token punctuation">[</span>n: number<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token operator">=</span> $n * <span class="token number">2</span> <span class="token punctuation">}</span><br><br><span class="token builtin class-name">let</span> score <span class="token operator">=</span> <span class="token number">3</span><br>lognv <span class="token string">'score'</span> <span class="token punctuation">$(</span>rmv double <span class="token punctuation">$(</span>rmv increment $score<span class="token punctuation">))</span> <span class="token comment"># 8</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">## Variables</span><br><br>Variables <span class="token keyword">in</span> Nushell are distinct from environment variables.<br>They are immutable, so they must be <span class="token builtin class-name">set</span> when they are declared.<br>However, they can be shadowed to have different values <span class="token keyword">in</span> different scopes.<br><br>To <span class="token builtin class-name">set</span> a variable, enter <span class="token variable">`</span></span><span class="token builtin class-name">let</span> name <span class="token operator">=</span> value<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Their scope is the context or block <span class="token keyword">in</span> <span class="token function">which</span> they are defined.<br><br>To <span class="token builtin class-name">set</span> a variable to the result of a <span class="token builtin class-name">command</span> pipeline,<br><span class="token function">which</span> may contain only a single command,<br>enter <span class="token variable">`</span></span><span class="token builtin class-name">let</span> name <span class="token operator">=</span> <span class="token variable"><span class="token variable">$(</span>pipeline<span class="token variable">)</span></span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>The syntax <span class="token variable">`</span></span><span class="token variable"><span class="token variable">$(</span><span class="token punctuation">..</span>.<span class="token variable">)</span></span><span class="token variable"><span class="token variable">`</span> is referred to as an <span class="token string">"invocation"</span><span class="token builtin class-name">.</span><br>It can also be used to pass the result of a <span class="token builtin class-name">command</span> pipeline<br>as a argument to a command.<br><br>To use a variable <span class="token keyword">in</span> an expression, precede its name with <span class="token variable">`</span></span>$<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>For example, <span class="token variable">`</span></span><span class="token variable">$total</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>When a variable holds a structured value such as a table,<br>dot syntax can be used to access nested values.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># A single row type can be used like objects in other languages.</span><br><span class="token builtin class-name">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>color flavor<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>yellow vanilla<span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $data.flavor <span class="token comment"># outputs vanilla</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To <span class="token builtin class-name">set</span> a variable to the result of concatenating two variable values as strings,<br>use <span class="token variable">`</span></span><span class="token builtin class-name">let</span> v3 <span class="token operator">=</span> <span class="token variable"><span class="token variable">$(</span>build-str $v1 $v2<span class="token variable">)</span></span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To get the <span class="token builtin class-name">type</span> of a primitive value, pipe it into the <span class="token variable">`</span></span>describe<span class="token variable"><span class="token variable">`</span> command.<br>For example, <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token number">19</span> <span class="token operator">|</span> describe<span class="token variable"><span class="token variable">`</span> outputs <span class="token string">"integer"</span><br>and <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token number">3.14</span> <span class="token operator">|</span> describe<span class="token variable"><span class="token variable">`</span> outputs <span class="token string">"decimal"</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## Environment Variables</span><br><br>Environment variables are distinct from regular variables.<br>Unlike regular variables, environment variables can be<br>used <span class="token keyword">in</span> executables that are run from Nushell.<br><br>To <span class="token builtin class-name">set</span> the value of an environment variable only <span class="token keyword">in</span> the current scope,<br>not permanently, enter <span class="token variable">`</span></span>let-env NAME <span class="token operator">=</span> value<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>This adds <span class="token variable">`</span></span>NAME<span class="token variable"><span class="token variable">`</span> to <span class="token variable">`</span></span><span class="token variable">$nu</span>.env<span class="token variable"><span class="token variable">`</span> <span class="token function">which</span> is a like a map of environment variables.<br><br>To <span class="token builtin class-name">set</span> the value of an environment variable<br>so it is available <span class="token keyword">in</span> subsequent Nushell sessions,<br><span class="token function">add</span> it to the <span class="token variable">`</span></span><span class="token function">env</span><span class="token variable"><span class="token variable">`</span> section of the Nushell configuration file.<br><br>To get the value of an environment variable, use <span class="token variable">`</span></span><span class="token variable">$nu</span>.env.NAME<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>To print the value, enter <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token variable">$nu</span>.env.NAME<span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span>config <span class="token operator">|</span> get env.<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To see a nicely formatted list of environment variables,<br>enter <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token variable">$nu</span>.env <span class="token operator">|</span> pivot<span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span>config <span class="token operator">|</span> get <span class="token function">env</span> <span class="token operator">|</span> pivot<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## open Command</span><br><br>The <span class="token variable">`</span></span><span class="token function">open</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> renders certain <span class="token function">file</span> types as tables.<br>These <span class="token function">file</span> types include csv, ini, json, toml, xml, and yaml.<br><br>For example, the following outputs a table of scripts <span class="token keyword">in</span> a <span class="token variable">`</span></span>package.json<span class="token variable"><span class="token variable">`</span> file.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">open</span> package.json <span class="token operator">|</span> get scripts <span class="token operator">|</span> pivot<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The output will be similar to the following:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>───┬─────────┬─────────────────────────────────────────────────────────<br> <span class="token comment"># │ Column0 │                         Column1</span><br>───┼─────────┼─────────────────────────────────────────────────────────<br> <span class="token number">0</span> │ build   │ rollup -c<br> <span class="token number">1</span> │ dev     │ rollup -c -w<br> <span class="token number">2</span> │ <span class="token function">format</span>  │ prettier --write <span class="token string">'{public,src}/**/*.{css,html,js,svelte}'</span><br> <span class="token number">3</span> │ lint    │ eslint --fix --quiet src --ext .js,.svelte<br> <span class="token number">4</span> │ start   │ sirv public<br>───┴─────────┴─────────────────────────────────────────────────────────<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To see the commands <span class="token keyword">in</span> the Nushell configuration <span class="token function">file</span> <span class="token variable">`</span></span>startup<span class="token variable"><span class="token variable">`</span> section,<br>enter <span class="token variable">`</span></span><span class="token function">open</span> <span class="token variable"><span class="token variable">$(</span>config path<span class="token variable">)</span></span> <span class="token operator">|</span> get startup<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Other types of files are treated as a list of lines and<br>rendered <span class="token keyword">in</span> a table where the first <span class="token function">column</span> contains line numbers.<br>For known programming language <span class="token function">file</span> extensions, syntax highlighting is provided.<br>Compare this to using the <span class="token variable">`</span></span><span class="token function">cat</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> where this does not happen.<br><br>To render delimited data as a table we can use the <span class="token variable">`</span></span>lines<span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span><span class="token function">split</span><span class="token variable"><span class="token variable">`</span> commands.<br>For example, consider the following <span class="token function">file</span> content:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>Go<span class="token operator">|</span><span class="token number">2012</span><span class="token operator">|</span>Rob Pike<br>Java<span class="token operator">|</span><span class="token number">1995</span><span class="token operator">|</span>James Gosling<br>JavaScript<span class="token operator">|</span><span class="token number">1995</span><span class="token operator">|</span>Brendan Eich<br>Python<span class="token operator">|</span><span class="token number">1991</span><span class="token operator">|</span>Guido van Rossum<br>Ruby<span class="token operator">|</span><span class="token number">1995</span><span class="token operator">|</span>Yukihiro Matsumoto<br>Rust<span class="token operator">|</span><span class="token number">2010</span><span class="token operator">|</span>Graydon Hoare<br>TypeScript<span class="token operator">|</span><span class="token number">2012</span><span class="token operator">|</span>Anders Hejlsberg<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To render a table where each row describes a programming language,<br>the columns have proper names, and<br>the rows are sorted on ascending year of creation, enter<br><span class="token variable">`</span></span><span class="token function">open</span> languages.txt <span class="token operator">|</span> lines <span class="token operator">|</span> <span class="token function">split</span> <span class="token function">column</span> <span class="token string">'|'</span> Language Year Creator <span class="token operator">|</span> sort-by Year<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>The <span class="token variable">`</span></span>lines<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> converts input text into a list of separate lines of text.<br>The following table is produced:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>───┬────────────┬──────┬────────────────────<br> <span class="token comment"># │  Language  │ Year │      Creator</span><br>───┼────────────┼──────┼────────────────────<br> <span class="token number">0</span> │ Python     │ <span class="token number">1991</span> │ Guido van Rossum<br> <span class="token number">1</span> │ Java       │ <span class="token number">1995</span> │ James Gosling<br> <span class="token number">2</span> │ JavaScript │ <span class="token number">1995</span> │ Brendan Eich<br> <span class="token number">3</span> │ Ruby       │ <span class="token number">1995</span> │ Yukihiro Matsumoto<br> <span class="token number">4</span> │ Rust       │ <span class="token number">2010</span> │ Graydon Hoare<br> <span class="token number">5</span> │ Go         │ <span class="token number">2012</span> │ Rob Pike<br> <span class="token number">6</span> │ TypeScript │ <span class="token number">2012</span> │ Anders Hejlsberg<br>───┴────────────┴──────┴────────────────────<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>If the <span class="token function">file</span> extension on a <span class="token function">file</span> does not match its content type,<br>use the <span class="token variable">`</span></span>from<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> to specify the actual content type.<br>For example, <span class="token variable">`</span></span><span class="token function">open</span> really-json.txt <span class="token operator">|</span> from json<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To prevent the <span class="token variable">`</span></span><span class="token function">open</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> from processing a file, <span class="token function">add</span> the <span class="token variable">`</span></span>--raw<span class="token variable"><span class="token variable">`</span> flag.<br>For example, <span class="token variable">`</span></span><span class="token function">open</span> scores.csv --raw<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>To process data from a URL instead of a <span class="token builtin class-name">local</span> file, use the <span class="token variable">`</span></span>fetch<span class="token variable"><span class="token variable">`</span> command.<br>For example, the<br><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://jsonplaceholder.typicode.com?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span><span class="token punctuation">{</span>JSON<span class="token punctuation">}</span> Placeholder<span class="token operator">&lt;</span>/a<span class="token operator">></span><br>site provides <span class="token function">free</span> data <span class="token keyword">for</span> testing and prototyping.<br>Todo data from this site can be rendered as a table with the following commands:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>fetch https://jsonplaceholder.typicode.com/todos <span class="token operator">|</span> first <span class="token number">10</span><br><br>fetch https://jsonplaceholder.typicode.com/todos <span class="token operator">|</span> where userId <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> completed <span class="token operator">==</span> $true <span class="token operator">|</span> sort-by title<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br><span class="token comment">## Table Commands</span><br><br>Many Nushell commands operate on tables.<br><br><span class="token operator">|</span> Command                    <span class="token operator">|</span> Description                                                                                                               <span class="token operator">|</span><br><span class="token operator">|</span> -------------------------- <span class="token operator">|</span> ------------------------------------------------------------------------------------------------------------------------- <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>append<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> creates a new table by appending a single row to an existing table                                                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>autoview<span class="token variable"><span class="token variable">`</span>                 <span class="token operator">|</span> renders data as a table or list                                                                                           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>compact<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> removes empty rows                                                                                                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>drop n<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> removes the last n rows <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                                 <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>drop <span class="token function">column</span> n<span class="token variable"><span class="token variable">`</span>            <span class="token operator">|</span> removes the last n columns <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>each<span class="token variable"><span class="token variable">`</span>                     <span class="token operator">|</span> runs a block of code on each row                                                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>every n<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> show or skip every nth row                                                                                                <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>first n<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> show only the first n rows <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>flatten<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> flattens a table                                                                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">format</span><span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> formats columns into a string                                                                                             <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>from <span class="token punctuation">{</span>format<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span>            <span class="token operator">|</span> parses a given <span class="token function">file</span> <span class="token function">format</span> into a table                                                                                   <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>get <span class="token punctuation">{</span>column-name<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span>        <span class="token operator">|</span> gets the content of a given <span class="token function">column</span> name as a table                                                                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>group-by<span class="token variable"><span class="token variable">`</span>                 <span class="token operator">|</span> creates multiple tables from one based on some grouping                                                                   <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>headers<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> creates a table from an existing one where the first row replaces the current <span class="token function">column</span> headers                              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>histogram<span class="token variable"><span class="token variable">`</span>                <span class="token operator">|</span> creates a table with <span class="token string">"value"</span>, <span class="token string">"count"</span>, <span class="token string">"percentage"</span>, and <span class="token string">"frequency"</span><span class="token operator">&lt;</span>br<span class="token operator">></span>columns based on a given <span class="token function">column</span> <span class="token keyword">in</span> an input table <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>insert<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> inserts a <span class="token function">column</span>                                                                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>keep n<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> keeps the first n rows <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> same as <span class="token variable">`</span></span>first<span class="token variable"><span class="token variable">`</span>?                                                                <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>last n<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> show only the last n rows <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                               <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>length<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> counts rows or list items                                                                                                 <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>lines<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> splits a string of lines into rows                                                                                        <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>match<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> filter rows using a regular expression                                                                                    <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>merge<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> merges tables by adding columns                                                                                           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>move<span class="token variable"><span class="token variable">`</span>                     <span class="token operator">|</span> moves columns                                                                                                             <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>nth<span class="token variable"><span class="token variable">`</span>                      <span class="token operator">|</span> keep or skip specified rows                                                                                               <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>parse<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> parses columns from a string using a pattern                                                                              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>pivot<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> swaps the rows and columns                                                                                                <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>prepend<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> prepends a row                                                                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>range<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> gets a subset of rows                                                                                                     <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>reduce<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> computes a single value from a list table                                                                                 <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>reject<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> removes columns by name                                                                                                   <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">rename</span><span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> renames columns                                                                                                           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>reverse<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> reverses the order of the rows                                                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>roll n<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> rolls the bottom n rows to the <span class="token function">top</span> <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                      <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>rotate<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> rotates the table <span class="token number">90</span> degrees clockwise<span class="token punctuation">;</span> can apply multiple <span class="token builtin class-name">times</span>                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>rotate counter-clockwise<span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> rotates the table <span class="token number">90</span> degrees counter-clockwise                                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token keyword">select</span> <span class="token punctuation">{</span>column-names<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span>    <span class="token operator">|</span> specifies columns to be retained by name and their order                                                                  <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>shuffle<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> shuffles the rows randomly                                                                                                <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>skip n<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> skips the first n rows <span class="token punctuation">(</span>n defaults to <span class="token number">1</span><span class="token punctuation">)</span>                                                                                  <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>skip <span class="token keyword">until</span> condition<span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> skips runs <span class="token keyword">until</span> the condition is met <span class="token punctuation">(</span>alternative to <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span><span class="token punctuation">)</span>                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>skip <span class="token keyword">while</span> condition<span class="token variable"><span class="token variable">`</span>     <span class="token operator">|</span> skips runs <span class="token keyword">while</span> the condition is met <span class="token punctuation">(</span>alternative to <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span><span class="token punctuation">)</span>                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>sort-by<span class="token variable"><span class="token variable">`</span>                  <span class="token operator">|</span> sorts rows on given columns                                                                                               <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">split</span> row<span class="token variable"><span class="token variable">`</span>                <span class="token operator">|</span> converts a string into a list of strings                                                                                  <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">split</span> <span class="token function">column</span><span class="token variable"><span class="token variable">`</span>             <span class="token operator">|</span> converts a list of strings into a table with generic <span class="token string">"Column{n}"</span> headers                                                  <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>split-by<span class="token variable"><span class="token variable">`</span>                 <span class="token operator">|</span> creates a new table from one with nested tables where <span class="token function">column</span> headings are values of a given nested table heading          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>table<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> views pipeline output as a table                                                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>to <span class="token punctuation">{</span>format<span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span>              <span class="token operator">|</span> converts a table to a given <span class="token function">format</span> such as json                                                                           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">uniq</span><span class="token variable"><span class="token variable">`</span>                     <span class="token operator">|</span> gets unique rows                                                                                                          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>update<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> updates data <span class="token keyword">in</span> a given <span class="token function">column</span>                                                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>where<span class="token variable"><span class="token variable">`</span>                    <span class="token operator">|</span> specifies a condition rows must meet to render                                                                            <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>wrap<span class="token variable"><span class="token variable">`</span>                     <span class="token operator">|</span> creates a table <span class="token function">column</span> from its data and a name                                                                           <span class="token operator">|</span><br><br>The <span class="token variable">`</span></span>sort-by<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> accepts<br>the <span class="token variable">`</span></span>--insensitive<span class="token variable"><span class="token variable">`</span> flag to <span class="token function">make</span> the <span class="token function">sort</span> case-insensitive and<br>the <span class="token variable">`</span></span>--reverse<span class="token variable"><span class="token variable">`</span> flag to reverse the <span class="token function">sort</span> order.<br><br>Let's <span class="token function">look</span> at some examples using the <span class="token variable">`</span></span><span class="token function">ls</span><span class="token variable"><span class="token variable">`</span> command.<br>This produces a table with the columns <span class="token string">"name"</span>, <span class="token string">"type"</span>, <span class="token string">"size"</span>, and <span class="token string">"modified"</span><span class="token builtin class-name">.</span><br>Here is a <span class="token builtin class-name">command</span> that lists the files with a <span class="token variable">`</span></span>.ts<span class="token variable"><span class="token variable">`</span> <span class="token function">file</span> extension,<br>only includes the <span class="token string">"name"</span> and <span class="token string">"size"</span> columns,<br>sorts the files from largest to smallest,<br>and only outputs the three largest files:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> *.ts <span class="token operator">|</span> <span class="token keyword">select</span> name size <span class="token operator">|</span> sort-by -r size <span class="token operator">|</span> first <span class="token number">3</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>This produces output similar to the following:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>───┬────────────────────────┬──────────<br> <span class="token comment"># │          name          │   size</span><br>───┼────────────────────────┼──────────<br> <span class="token number">0</span> │ lib.deno.unstable.d.ts │ <span class="token number">194.4</span> KB<br> <span class="token number">1</span> │ lib.deno.d.ts          │ <span class="token number">145.8</span> KB<br> <span class="token number">2</span> │ my_server.ts           │   <span class="token number">2.7</span> KB<br>───┴────────────────────────┴──────────<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The row indexes <span class="token keyword">in</span> the first <span class="token function">column</span> can be used to<br>retrieve only a specific row using the <span class="token variable">`</span></span>nth<span class="token variable"><span class="token variable">`</span> command.<br>For example, we can <span class="token function">add</span> <span class="token variable">`</span></span><span class="token operator">|</span> nth <span class="token number">1</span><span class="token variable"><span class="token variable">`</span> to the end of the <span class="token builtin class-name">command</span><br>to only output the row <span class="token keyword">for</span> the <span class="token function">file</span> <span class="token variable">`</span></span>lib.deno.d.ts<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The <span class="token variable">`</span></span>get<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> can be used to output<br>only the values <span class="token keyword">in</span> a single column.<br>It returns a list rather than a table.<br>For example, the following outputs the<br>names of the three largest TypeScript files:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> *.ts <span class="token operator">|</span> sort-by size <span class="token operator">|</span> reverse <span class="token operator">|</span> first <span class="token number">3</span> <span class="token operator">|</span> get name<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>get<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> is especially useful when the <span class="token builtin class-name">type</span> of a field is <span class="token string">"table"</span><span class="token builtin class-name">.</span><br>The key can be arbitrarily deep with sub-keys separated by periods.<br>For example, <span class="token variable">`</span></span>sys <span class="token operator">|</span> get host.sessions <span class="token operator">|</span> where name <span class="token operator">==</span> <span class="token string">'root'</span> <span class="token operator">|</span> get <span class="token function">groups</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The following example demonstrates getting all the headings from a table.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">echo</span> $myTable <span class="token operator">|</span> get<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Table columns can be accessed by their header name<br>using the <span class="token variable">`</span></span>get<span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span><span class="token keyword">select</span><span class="token variable"><span class="token variable">`</span> commands,<br>but there is no <span class="token builtin class-name">command</span> to get a table <span class="token function">column</span> by its index.<br>However, this can be <span class="token keyword">done</span> with the following pipeline:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">echo</span> $myTable <span class="token operator">|</span> <span class="token keyword">select</span> <span class="token punctuation">$(</span>echo $myTable <span class="token operator">|</span> get <span class="token operator">|</span> nth $columnIndex<span class="token punctuation">)</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>A new table can be created by appending a new row. For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> primaryColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>name red green blue<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><br>  red <span class="token number">255</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  green <span class="token number">0</span> <span class="token number">255</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  blue <span class="token number">0</span> <span class="token number">0</span> <span class="token number">255</span><span class="token punctuation">]</span><br><span class="token punctuation">]</span><br><span class="token builtin class-name">let</span> purple <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>name red green blue<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>purple <span class="token number">255</span> <span class="token number">0</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">let</span> colors <span class="token operator">=</span> <span class="token punctuation">$(</span>echo $primaryColors <span class="token operator">|</span> append $purple<span class="token punctuation">)</span><br><span class="token builtin class-name">echo</span> $colors<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>This produces the following output:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>╭───┬────────┬─────┬───────┬──────╮<br>│ <span class="token comment"># │ name   │ red │ green │ blue │</span><br>├───┼────────┼─────┼───────┼──────┤<br>│ <span class="token number">0</span> │ red    │ <span class="token number">255</span> │     <span class="token number">0</span> │    <span class="token number">0</span> │<br>│ <span class="token number">1</span> │ green  │   <span class="token number">0</span> │   <span class="token number">255</span> │    <span class="token number">0</span> │<br>│ <span class="token number">2</span> │ blue   │   <span class="token number">0</span> │     <span class="token number">0</span> │  <span class="token number">255</span> │<br>│ <span class="token number">3</span> │ purple │ <span class="token number">255</span> │     <span class="token number">0</span> │  <span class="token number">255</span> │<br>╰───┴────────┴─────┴───────┴──────╯<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>TODO: How could you iterate over the rows of a table<br>TODO: and <span class="token function">add</span> each one to another table? Use reduce and append?<br>TODO: See <span class="token variable">`</span></span>append-demo.nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The table <span class="token keyword">in</span> the previous example can be created from a string<br>using the <span class="token variable">`</span></span><span class="token function">split</span><span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span>headers<span class="token variable"><span class="token variable">`</span> commands.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> data <span class="token operator">=</span> <span class="token string">"name red green blue|red 255 0 0|green 0 255 0|blue 0 0 255|purple 255 0 255"</span><br><span class="token builtin class-name">let</span> colors <span class="token operator">=</span> <span class="token punctuation">$(</span>echo $data <span class="token operator">|</span> <span class="token function">split</span> row <span class="token string">"|"</span> <span class="token operator">|</span> <span class="token function">split</span> <span class="token function">column</span> <span class="token string">" "</span> <span class="token operator">|</span> headers<span class="token punctuation">)</span><br><span class="token builtin class-name">echo</span> $colors<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>split-by<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> doesn't seem very useful.<br>TODO: See <span class="token variable">`</span></span>split-by-demo.nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>The rows of a table can be segregated into multiple tables<br>using the <span class="token variable">`</span></span>group-by<span class="token variable"><span class="token variable">`</span> command.<br>For example, the output of <span class="token variable">`</span></span><span class="token function">ls</span><span class="token variable"><span class="token variable">`</span> can be <span class="token function">split</span> into two tables<br>where one contains rows with a <span class="token builtin class-name">type</span> of <span class="token string">"File"</span><br>and the other contains rows with a <span class="token builtin class-name">type</span> of <span class="token string">"Dir"</span><span class="token builtin class-name">.</span><br>The following <span class="token builtin class-name">command</span> produces a table with the columns <span class="token string">"File"</span> and <span class="token string">"Dir"</span><br>that contains a single row whose cells are themselves tables.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> <span class="token operator">|</span> group-by <span class="token builtin class-name">type</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The following code outputs the nested tables:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> temp <span class="token operator">=</span> <span class="token punctuation">$(</span>ls <span class="token operator">|</span> group-by <span class="token builtin class-name">type</span><span class="token punctuation">)</span><br><span class="token builtin class-name">echo</span> $temp <span class="token operator">|</span> get File<br><span class="token builtin class-name">echo</span> $temp <span class="token operator">|</span> get Dir<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>group-by<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> can be passed a block<br>that computes the value used to group the rows.<br>The following example <span class="token function">groups</span> files based on their <span class="token function">file</span> extension:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> <span class="token operator">|</span> group-by <span class="token punctuation">{</span> get name <span class="token operator">|</span> path extension <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To see the contents of one of the nested tables, pipe this to <span class="token variable">`</span></span>get ext-name<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Another way to see only the files whose name ends with certain characters is:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> <span class="token operator">|</span> where <span class="token punctuation">{</span><span class="token operator">=</span> <span class="token punctuation">$(</span>echo $it.name <span class="token operator">|</span> str ends-with <span class="token string">".rs"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">|</span> get name<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Table columns can be moved after or before another column.<br>For example, by default the <span class="token variable">`</span></span><span class="token function">ls</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> outputs a <span class="token builtin class-name">type</span><br>with the columns <span class="token string">"name"</span>, <span class="token string">"type"</span>, <span class="token string">"size"</span>, and <span class="token string">"modified"</span><span class="token builtin class-name">.</span><br>The following <span class="token builtin class-name">command</span> moves the <span class="token string">"type"</span> and <span class="token string">"size"</span> columns<br>to be after the <span class="token string">"modified"</span> column.<br>It also reorders the <span class="token string">"size"</span> and <span class="token string">"type"</span> columns to the specified order.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">ls</span> <span class="token operator">|</span> move size <span class="token builtin class-name">type</span> --after modified<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The columns of one table can be added to another to produce a new table<br>using the <span class="token variable">`</span></span>merge<span class="token variable"><span class="token variable">`</span> command. For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> t1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>name score<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>Mark <span class="token number">19</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>Tami <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $t1<br><br><span class="token comment"># Add a single column.</span><br><span class="token builtin class-name">let</span> <span class="token function">column</span> <span class="token operator">=</span> <span class="token punctuation">$(</span>echo <span class="token punctuation">[</span>yellow blue<span class="token punctuation">]</span> <span class="token operator">|</span> wrap color<span class="token punctuation">)</span><br><span class="token builtin class-name">echo</span> $t1 <span class="token operator">|</span> merge <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> $column <span class="token punctuation">}</span><br><br><span class="token comment"># Add all the columns from another table.</span><br><span class="token builtin class-name">let</span> t2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>color flavor<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>yellow vanilla<span class="token punctuation">]</span> <span class="token punctuation">[</span>blue chocolate<span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $t1 <span class="token operator">|</span> merge <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> $t2 <span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The output produced by this example is:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>╭───┬──────┬───────╮<br>│ <span class="token comment"># │ name │ score │</span><br>├───┼──────┼───────┤<br>│ <span class="token number">0</span> │ Mark │    <span class="token number">19</span> │<br>│ <span class="token number">1</span> │ Tami │    <span class="token number">21</span> │<br>╰───┴──────┴───────╯<br><br>╭───┬──────┬───────┬────────╮<br>│ <span class="token comment"># │ name │ score │ color  │</span><br>├───┼──────┼───────┼────────┤<br>│ <span class="token number">0</span> │ Mark │    <span class="token number">19</span> │ yellow │<br>│ <span class="token number">1</span> │ Tami │    <span class="token number">21</span> │ blue   │<br>╰───┴──────┴───────┴────────╯<br><br>╭───┬──────┬───────┬────────┬───────────╮<br>│ <span class="token comment"># │ name │ score │ color  │ flavor    │</span><br>├───┼──────┼───────┼────────┼───────────┤<br>│ <span class="token number">0</span> │ Mark │    <span class="token number">19</span> │ yellow │ vanilla   │<br>│ <span class="token number">1</span> │ Tami │    <span class="token number">21</span> │ blue   │ chocolate │<br>╰───┴──────┴───────┴────────┴───────────╯<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span>histogram<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> generates a histogram<br>from the data <span class="token keyword">in</span> a given table row.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token comment"># The newlines need to be placed like this</span><br><span class="token comment"># due to a parser bug.</span><br><span class="token builtin class-name">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">[</span>name color<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><br>  Mark yellow<span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Tami blue<span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Amanda green<span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Jeremy yellow<span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Sally blue<span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Sam yellow<span class="token punctuation">]</span><br><span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $data <span class="token operator">|</span> get color <span class="token operator">|</span> histogram<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>This produces the following table:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>╭───┬────────┬───────┬────────────┬─────────────────────────────────────────────────────────────────────────────────────────────────────╮<br>│ <span class="token comment"># │ value  │ count │ percentage │ frequency                                                                                           │</span><br>├───┼────────┼───────┼────────────┼─────────────────────────────────────────────────────────────────────────────────────────────────────┤<br>│ <span class="token number">0</span> │ blue   │     <span class="token number">2</span> │ <span class="token number">66.67</span>%     │ ******************************************************************                                  │<br>│ <span class="token number">1</span> │ green  │     <span class="token number">1</span> │ <span class="token number">33.33</span>%     │ *********************************                                                                   │<br>│ <span class="token number">2</span> │ yellow │     <span class="token number">3</span> │ <span class="token number">100.00</span>%    │ *************************************************************************************************** │<br>╰───┴────────┴───────┴────────────┴─────────────────────────────────────────────────────────────────────────────────────────────────────╯<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The percentage values are double what they should be.<br>See <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/nushell/nushell/issues/3215?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>issue <span class="token number">321</span><span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>/a<span class="token operator">></span>.<br><br><span class="token comment">## Plugins</span><br><br>Nushell plugins <span class="token function">add</span> new commands.<br>They can be installed using the Rust <span class="token variable">`</span></span>cargo<span class="token variable"><span class="token variable">`</span> utility.<br>After installing, <span class="token function">open</span> a new shell to gain access to commands that they add.<br><br><span class="token comment">### nu_plugin_start</span><br><br>This plugin adds the <span class="token variable">`</span></span>start<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> that opens a given <span class="token function">file</span><br>using its default application.<br>To <span class="token function">install</span> this, enter <span class="token variable">`</span></span>cargo <span class="token function">install</span> nu_plugin_start<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Then <span class="token function">open</span> a new shell and enter <span class="token variable">`</span></span>start file-path<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">### nu_plugin_chart</span><br><br>This plugin adds the <span class="token variable">`</span></span>chart<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> with the subcommands <span class="token variable">`</span></span>bar<span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span>line<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>To <span class="token function">install</span> this, enter <span class="token variable">`</span></span>cargo <span class="token function">install</span> nu_plugin_chart<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>Here is an example of creating both kinds of charts.<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>name score<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><br>  Mark <span class="token number">19</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Tami <span class="token number">21</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Amanda <span class="token number">17</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><br>  Jeremy <span class="token number">15</span><span class="token punctuation">]</span><br><span class="token punctuation">]</span><br><br><span class="token builtin class-name">echo</span> $data <span class="token operator">|</span> chart bar <span class="token punctuation">[</span>name score<span class="token punctuation">]</span><br><span class="token builtin class-name">echo</span> $data <span class="token operator">|</span> chart line <span class="token punctuation">[</span>name score<span class="token punctuation">]</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>After each chart is rendered, press enter to go to the next chart<br>or <span class="token builtin class-name">exit</span> <span class="token keyword">if</span> the last chart has been rendered.<br><br>Unfortunately these plot the frequencies of the values<br>and not values themselves.<br>So the bar chart shows four bars at <span class="token number">100</span>% because<br>the values <span class="token number">19</span>, <span class="token number">21</span>, <span class="token number">17</span>, and <span class="token number">15</span> each occur once.<br>See <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/nushell/nushell/issues/3096?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>issue <span class="token number">309</span><span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>/a<span class="token operator">></span>.<br><br><span class="token comment">## Default Shell</span><br><br>To <span class="token function">make</span> Nushell your default shell <span class="token keyword">in</span> Linux or macOS, first<br><span class="token function">add</span> a line containing the <span class="token function">file</span> path to the <span class="token variable">`</span></span>nu<span class="token variable"><span class="token variable">`</span> executable <span class="token keyword">in</span> <span class="token variable">`</span></span>/etc/shells<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>For example, <span class="token keyword">for</span> me using macOS I entered <span class="token variable">`</span></span><span class="token function">su</span> <span class="token function">vim</span> /etc/shells<span class="token variable"><span class="token variable">`</span><br>and added the line <span class="token variable">`</span></span>/Users/mark/.cargo/bin/nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>Then enter <span class="token variable">`</span></span>chsh -s nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>If using tmux, also change the value of <span class="token variable">`</span></span>default-shell<span class="token variable"><span class="token variable">`</span> <span class="token keyword">in</span> <span class="token variable">`</span></span>~/.tmux.conf<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## Scripts</span><br><br>Nushell scripts are written <span class="token keyword">in</span> files with a <span class="token variable">`</span></span>.nu<span class="token variable"><span class="token variable">`</span> extension.<br>To execute a script, enter <span class="token variable">`</span></span>nu <span class="token punctuation">{</span>name<span class="token punctuation">}</span>.nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>To <span class="token string">"source"</span> a script so its definitions become available <span class="token keyword">in</span> the current shell,<br>enter <span class="token variable">`</span></span><span class="token builtin class-name">source</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span>.nu<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>For examples of Nushell scripts, see <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/nushell/nu_scripts/tree/main/nu_101?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>Nu_101 Scripts<span class="token operator">&lt;</span>/a<span class="token operator">></span>.<br><br>To <span class="token function">add</span> comments or <span class="token string">"comment-out"</span> a line of code,<br>preceded the comment with a <span class="token variable">`</span></span><span class="token comment">#` character.</span><br><br>Commands commonly used <span class="token keyword">in</span> Nushell scripts include<br><span class="token variable"><span class="token variable">`</span>def<span class="token variable">`</span></span>, <span class="token variable"><span class="token variable">`</span><span class="token keyword">if</span><span class="token variable">`</span></span>, <span class="token variable"><span class="token variable">`</span>each<span class="token variable">`</span></span>, and <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span><span class="token variable">`</span></span><span class="token builtin class-name">.</span><br><br>The <span class="token variable"><span class="token variable">`</span>def<span class="token variable">`</span></span> <span class="token builtin class-name">command</span> defines a custom <span class="token builtin class-name">command</span><br><span class="token function">which</span> can be used like a <span class="token keyword">function</span> <span class="token keyword">in</span> many programming languages.<br><br>Conditional processing is implemented with the <span class="token variable"><span class="token variable">`</span><span class="token keyword">if</span><span class="token variable">`</span></span> command.<br>Its syntax is <span class="token variable"><span class="token variable">`</span><span class="token keyword">if</span> condition <span class="token punctuation">{</span> then-block <span class="token punctuation">}</span> <span class="token punctuation">{</span> else-block <span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token builtin class-name">.</span><br>Note that the condition is not surrounded by parentheses and<br>curly braces are required around the <span class="token keyword">then</span> and <span class="token keyword">else</span> blocks.<br>There are no <span class="token variable"><span class="token variable">`</span><span class="token keyword">then</span><span class="token variable">`</span></span> or <span class="token variable"><span class="token variable">`</span><span class="token keyword">else</span><span class="token variable">`</span></span> keywords.<br>Nested ifs must be placed inside a <span class="token keyword">then</span> or <span class="token keyword">else</span> block.<br>An <span class="token variable"><span class="token variable">`</span><span class="token keyword">if</span><span class="token variable">`</span></span> <span class="token builtin class-name">command</span> can be <span class="token function">split</span> over multiple lines.<br>For example:<br><br>``<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">let</span> temperature <span class="token operator">=</span> <span class="token number">80</span><br><span class="token keyword">if</span> $temperature <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">32</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> cold<br><span class="token punctuation">}</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> $temperature <span class="token operator">></span><span class="token operator">=</span> <span class="token number">80</span> <span class="token punctuation">{</span><br>    <span class="token builtin class-name">echo</span> hot<br>  <span class="token punctuation">}</span> <span class="token punctuation">{</span><br>    <span class="token builtin class-name">echo</span> warm<br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To iterate over a range of integers, use the <span class="token variable">`</span></span><span class="token function">seq</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span><br>and pipe the result to the <span class="token variable">`</span></span>each<span class="token variable"><span class="token variable">`</span> command.<br>The special variable <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span> holds each iteration value.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">4</span> <span class="token operator">|</span> each <span class="token punctuation">{</span> build-string $it <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">|</span> str collect<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Let's <span class="token builtin class-name">break</span> this down.<br><br>- <span class="token variable">`</span></span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">4</span><span class="token variable"><span class="token variable">`</span> returns the list <span class="token variable">`</span></span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>- <span class="token variable">`</span></span>each <span class="token punctuation">{</span> build-string <span class="token variable">$it</span> <span class="token variable"><span class="token variable">$(</span>char newline<span class="token variable">)</span></span> <span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span> returns the list<br>  <span class="token variable">`</span></span><span class="token punctuation">[</span><span class="token string">"1<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"2<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"3<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"4<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span><br>- <span class="token variable">`</span></span>str collect<span class="token variable"><span class="token variable">`</span> returns a string created by concatenating the list values.<br>- The output is:<br><br>  <span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>text<br>  <span class="token number">1</span><br>  <span class="token number">2</span><br>  <span class="token number">3</span><br>  <span class="token number">4</span><br>  <span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>The <span class="token variable">`</span></span><span class="token function">seq</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> creates a list of strings, not integers.<br>An alternative is to use the <span class="token variable">`</span></span><span class="token builtin class-name">echo</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> with a range<br>specified with <span class="token variable">`</span></span>start<span class="token punctuation">..</span>end<span class="token variable"><span class="token variable">`</span> <span class="token function">which</span> creates a list of integers.<br>The previous example can be written as follows:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br><span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token punctuation">..</span><span class="token number">4</span> <span class="token operator">|</span> each <span class="token punctuation">{</span> build-string $it <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">|</span> str collect<br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Iteration over the elements of a list is implemented with the <span class="token variable">`</span></span>each<span class="token variable"><span class="token variable">`</span> command.<br>Its syntax is <span class="token variable">`</span></span><span class="token builtin class-name">echo</span> some-list <span class="token operator">|</span> each <span class="token punctuation">{</span> block <span class="token punctuation">}</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>The block can use the special variable <span class="token variable">`</span></span><span class="token variable">$it</span><span class="token variable"><span class="token variable">`</span><br>to access the current element <span class="token keyword">in</span> the iteration.<br>For example:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span><br>def log-value <span class="token punctuation">[</span>label, value<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">echo</span> <span class="token punctuation">$(</span>build-string $label <span class="token string">" = "</span> $value <span class="token punctuation">$(</span>char newline<span class="token punctuation">))</span><br><span class="token punctuation">}</span><br><br>def report <span class="token punctuation">[</span>list<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token comment"># Without the --numbered flag, $it is set to each list value.</span><br>  <span class="token comment"># With it, $it is an object with the properties index and item.</span><br>  <span class="token builtin class-name">echo</span> $list <span class="token operator">|</span> each --numbered <span class="token punctuation">{</span><br>    build-string <span class="token punctuation">$(</span><span class="token operator">=</span> $it.index + <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">") "</span> $it.item <span class="token punctuation">$(</span>char newline<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span> <span class="token operator">|</span> str collect <span class="token comment"># with this the result is a table instead of a string</span><br><span class="token punctuation">}</span><br><br><span class="token builtin class-name">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>Mark Tami Amanda Jeremy<span class="token punctuation">]</span><br><br>log-value <span class="token string">"name at index 2"</span> <span class="token punctuation">$(</span>echo $names <span class="token operator">|</span> nth <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># Amanda</span><br><br>report $names<br><span class="token comment"># 1) Mark</span><br><span class="token comment"># 2) Tami</span><br><span class="token comment"># 3) Amanda</span><br><span class="token comment"># 4) Jeremy</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>To calculate the combined size of the <span class="token variable">`</span></span>nu<span class="token variable"><span class="token variable">`</span> executable and installed plugins,<br>enter <span class="token variable">`</span></span><span class="token function">ls</span> <span class="token variable"><span class="token variable">$(</span>build-string <span class="token punctuation">$(</span>which nu <span class="token operator">|</span> get path<span class="token punctuation">)</span> <span class="token string">'*'</span><span class="token variable">)</span></span> <span class="token operator">|</span> get size <span class="token operator">|</span> math <span class="token function">sum</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## VS Code</span><br><br>There is a VS Code extension <span class="token keyword">for</span> Nushell that<br>provides syntax highlighting <span class="token keyword">for</span> Nushell scripts.<br>See <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://marketplace.visualstudio.com/items?itemName=TheNuProjectContributors.vscode-nushell-lang?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>vscode-nushell-lang<span class="token operator">&lt;</span>/a<span class="token operator">></span>.<br><br><span class="token comment">## Comparison to Bash</span><br><br>The following table shows the Nushell equivalent of some common Bash commands.<br><br><span class="token operator">|</span> Bash                   <span class="token operator">|</span> Nushell                                  <span class="token operator">|</span> Description                                                                  <span class="token operator">|</span><br><span class="token operator">|</span> ---------------------- <span class="token operator">|</span> ---------------------------------------- <span class="token operator">|</span> ---------------------------------------------------------------------------- <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">man</span> <span class="token builtin class-name">command</span><span class="token variable"><span class="token variable">`</span>          <span class="token operator">|</span> <span class="token variable">`</span></span><span class="token builtin class-name">help</span> <span class="token builtin class-name">command</span><span class="token variable"><span class="token variable">`</span> only <span class="token keyword">for</span> Nushell commands <span class="token operator">|</span>                                                                              <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token environment constant">$PATH</span><span class="token variable"><span class="token variable">`</span>                <span class="token operator">|</span> <span class="token variable">`</span></span><span class="token variable">$nu</span>.path<span class="token variable"><span class="token variable">`</span>                               <span class="token operator">|</span> list of directories search <span class="token keyword">for</span> executables                                   <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">cat</span> file-path<span class="token variable"><span class="token variable">`</span>        <span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">open</span> --raw file-path<span class="token variable"><span class="token variable">`</span>                   <span class="token operator">|</span> print the contents of a <span class="token function">file</span><span class="token punctuation">;</span> omit <span class="token variable">`</span></span>--raw<span class="token variable"><span class="token variable">`</span> to output structured data         <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token builtin class-name">command</span> <span class="token operator">></span> file-path<span class="token variable"><span class="token variable">`</span>  <span class="token operator">|</span> <span class="token variable">`</span></span><span class="token builtin class-name">command</span> <span class="token punctuation">\</span><span class="token operator">|</span> save --raw file-path<span class="token variable"><span class="token variable">`</span>        <span class="token operator">|</span> saves <span class="token builtin class-name">command</span> output to a file<span class="token operator">&lt;</span>br<span class="token operator">></span>without converting based on <span class="token function">file</span> extension <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">mkdir</span> -p foo/bar/baz<span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> <span class="token variable">`</span></span><span class="token function">mkdir</span> foo/bar/baz<span class="token variable"><span class="token variable">`</span>                      <span class="token operator">|</span> creates directory structure, including any missing directories               <span class="token operator">|</span><br><span class="token operator">|</span> cmd1 <span class="token operator">&amp;&amp;</span> cmd2           <span class="token operator">|</span> cmd1<span class="token punctuation">;</span> cmd2                               <span class="token operator">|</span> run cmd1 and <span class="token keyword">then</span> only run cmd2 <span class="token keyword">if</span> cmd1 was successful                       <span class="token operator">|</span><br><br>The <span class="token builtin class-name">command</span> whose output is piped <span class="token keyword">in</span> the <span class="token variable">`</span></span>save<span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> must produce a string.<br>For example, <span class="token variable">`</span></span><span class="token function">date</span> now <span class="token operator">|</span> save --raw timestamp.txt<span class="token variable"><span class="token variable">`</span> does not work,<br>but <span class="token variable">`</span></span><span class="token function">date</span> now <span class="token operator">|</span> str from <span class="token operator">|</span> save --raw timestamp.txt<span class="token variable"><span class="token variable">`</span> does.<br><br><span class="token comment">## Per Directory Environment Variables</span><br><br>Nushell supports defining things to happen when changing to given directories.<br>To configure this, create a <span class="token variable">`</span></span>.nu-env<span class="token variable"><span class="token variable">`</span> <span class="token function">file</span> <span class="token keyword">in</span> each directory.<br>These are TOML files with the following sections:<br><br><span class="token operator">|</span> TOML Section   <span class="token operator">|</span> Description                                                                                                         <span class="token operator">|</span><br><span class="token operator">|</span> -------------- <span class="token operator">|</span> ------------------------------------------------------------------------------------------------------------------- <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token punctuation">[</span>env<span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span>        <span class="token operator">|</span> sets environment variables to literal values<span class="token punctuation">;</span> lines have syntax<span class="token operator">&lt;</span>br<span class="token operator">></span><span class="token variable">`</span></span>name <span class="token operator">=</span> <span class="token string">"value"</span><span class="token variable"><span class="token variable">`</span>                                 <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token punctuation">[</span>scriptvars<span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> sets environment variables to <span class="token builtin class-name">command</span> output<span class="token punctuation">;</span> lines have syntax<span class="token operator">&lt;</span>br<span class="token operator">></span><span class="token variable">`</span></span>name <span class="token operator">=</span> <span class="token string">"command-pipeline"</span><span class="token variable"><span class="token variable">`</span>                      <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token punctuation">[</span>scripts<span class="token punctuation">]</span><span class="token variable"><span class="token variable">`</span>    <span class="token operator">|</span> specifies commands to run when entering and exiting the directory<span class="token operator">&lt;</span>br<span class="token operator">></span>with <span class="token variable">`</span></span>entryscripts<span class="token variable"><span class="token variable">`</span> and <span class="token variable">`</span></span>exitscripts<span class="token variable"><span class="token variable">`</span> commands <span class="token operator">|</span><br><br>After creating the <span class="token variable">`</span></span>.nu-env<span class="token variable"><span class="token variable">`</span> <span class="token function">file</span> <span class="token keyword">in</span> each directory,<br>enter <span class="token variable">`</span></span>autoenv trust<span class="token variable"><span class="token variable">`</span> to give Nushell permission to <span class="token builtin class-name">read</span> the file.<br><br>For example, suppose we want to <span class="token builtin class-name">set</span> the environment variable <span class="token variable">`</span></span>NODE_ENV<span class="token variable"><span class="token variable">`</span><br>to <span class="token variable">`</span></span>development<span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span>production<span class="token variable"><span class="token variable">`</span> based on the current directory.<br>Add the following setting <span class="token keyword">in</span> the Nushell configuration file:<br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>toml<br>nu_env_dirs <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"~/projects/airline-reservations"</span>,<br>  <span class="token string">"~/projects/bank-accounts"</span><br><span class="token punctuation">]</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>In the <span class="token variable">`</span></span>~/projects/airline-reservations<span class="token variable"><span class="token variable">`</span> directory, create the <span class="token function">file</span> <span class="token variable">`</span></span>.nu-env<span class="token variable"><span class="token variable">`</span><br>containing the following and <span class="token keyword">then</span> enter <span class="token variable">`</span></span>autoenv trust<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">:</span><br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>toml<br><span class="token punctuation">[</span>env<span class="token punctuation">]</span><br>NODE_ENV <span class="token operator">=</span> <span class="token string">"development"</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Currently the <span class="token variable">`</span></span><span class="token builtin class-name">echo</span><span class="token variable"><span class="token variable">`</span> <span class="token builtin class-name">command</span> does not <span class="token function">write</span> to stdout when run from<br><span class="token variable">`</span></span>entryscripts<span class="token variable"><span class="token variable">`</span> or <span class="token variable">`</span></span>exitscripts<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br>In the <span class="token variable">`</span></span>~/projects/bank-accounts<span class="token variable"><span class="token variable">`</span> directory, create the <span class="token function">file</span> <span class="token variable">`</span></span>.nu-env<span class="token variable"><span class="token variable">`</span><br>containing the following and <span class="token keyword">then</span> enter <span class="token variable">`</span></span>autoenv trust<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">:</span><br><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>toml<br><span class="token punctuation">[</span>env<span class="token punctuation">]</span><br>NODE_ENV <span class="token operator">=</span> <span class="token string">"production"</span><br><span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><br><br>Now <span class="token variable">`</span></span><span class="token builtin class-name">cd</span><span class="token variable"><span class="token variable">`</span> to each of these directories and verify that<br>the <span class="token variable">`</span></span>NODE_ENV<span class="token variable"><span class="token variable">`</span> environment variable is <span class="token builtin class-name">set</span> to the expected value.<br><br>For <span class="token function">more</span> details on this feature, enter <span class="token variable">`</span></span><span class="token builtin class-name">help</span> autoenv<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br><br><span class="token comment">## Additional Shells</span><br><br>New shells can be created from the current shell.<br>This enables retaining the working directory of the current shell and<br>switching back to it using the <span class="token variable">`</span></span>n<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>for next<span class="token punctuation">)</span> and <span class="token variable">`</span></span>p<span class="token variable"><span class="token variable">`</span> <span class="token punctuation">(</span>for previous<span class="token punctuation">)</span> commands.<br><br><span class="token operator">|</span> Command           <span class="token operator">|</span> Description                                                                       <span class="token operator">|</span><br><span class="token operator">|</span> ----------------- <span class="token operator">|</span> --------------------------------------------------------------------------------- <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>enter dir-path<span class="token variable"><span class="token variable">`</span>  <span class="token operator">|</span> similar to <span class="token variable">`</span></span><span class="token builtin class-name">cd</span><span class="token variable"><span class="token variable">`</span>, but creates a new shell starting <span class="token keyword">in</span> the given directory          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>enter file-path<span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> creates a new shell whose context is the content of the given <span class="token function">file</span><span class="token punctuation">;</span> odd           <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>shells<span class="token variable"><span class="token variable">`</span>          <span class="token operator">|</span> lists the existing shells and indicates <span class="token function">which</span> one is active                       <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>n<span class="token variable"><span class="token variable">`</span>               <span class="token operator">|</span> makes the next shell <span class="token keyword">in</span> the list active<span class="token punctuation">;</span><span class="token operator">&lt;</span>br<span class="token operator">></span>wrapping to first <span class="token keyword">if</span> on last          <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span>p<span class="token variable"><span class="token variable">`</span>               <span class="token operator">|</span> makes the previous shell <span class="token keyword">in</span> the list active<span class="token punctuation">;</span><span class="token operator">&lt;</span>br<span class="token operator">></span>wrapping to last <span class="token keyword">if</span> on first      <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token builtin class-name">exit</span><span class="token variable"><span class="token variable">`</span>            <span class="token operator">|</span> exits the current shell, removing it from the list                                <span class="token operator">|</span><br><span class="token operator">|</span> <span class="token variable">`</span></span><span class="token builtin class-name">exit</span> --now<span class="token variable"><span class="token variable">`</span>      <span class="token operator">|</span> exits all the shells<span class="token punctuation">;</span><span class="token operator">&lt;</span>br<span class="token operator">></span>depending on configuration the terminal window may close <span class="token operator">|</span><br><br><span class="token comment">## Issues</span><br><br>- Fuzzy completion is not yet supported.<br>  For example, entering <span class="token variable">`</span></span><span class="token builtin class-name">cd</span> foo<span class="token variable"><span class="token variable">`</span> and pressing the tab key<br>  doesn’t auto complete to a directory that contains <span class="token variable">`</span></span>foo<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span><br>- The literal syntax <span class="token keyword">for</span> tables is currently very picky<br>  about the location of newline characters due to a parser bug.<br>  See <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/nushell/nushell/issues/3204?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>issue <span class="token number">320</span><span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>/a<span class="token operator">></span><br>- There is no built-in <span class="token variable">`</span></span>grep` command.<br>  Consider using <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"https://github.com/BurntSushi/ripgrep?v=1.0.12"</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">"noopener"</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span>ripgrep<span class="token operator">&lt;</span>/a<span class="token operator">></span>.</code></pre></article>