<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Bun</h2><aside></aside><article><p>These notes are currently in a very rough form!</p><p>Compare performance of bun, deno, and node on your rush-hour code. Implement your rush-hour program in Zig. Compare performance.</p><p>Is the only plan for profit to provide hosting?ar “Oven has decided to adopt a strategy twinned with Deno Company. They will launch sales of a cloud architecture based on Bun.”</p><p>Create code examples that demonstrate the most important bun-specific APIs.</p><p>Does it share module code across projects like pnpm?</p><p>See <a href="https://bun.sh">https://bun.sh</a></p><p>What is it?</p><ul><li>a free, open source, “complete” toolkit for JavaScript and TypeScript</li><li>created by startup company <a href="http://Oven.sh">Oven.sh</a> because that’s what buns come out of</li><li>started in 2022 by Jarred Sumner with VC funding</li><li>build, run, debug, test</li><li>built on JavaScriptCore from Safari which has faster startup times than V8</li><li>implemented in Zig and some C++; “Zig is sort of similar to writing C, but with better memory safety features in debug mode and modern features like defer (sort of similar to Go's) and arbitrary code can be executed at compile-time via comptime. It's really good for writing performant low-level software.”; “It has very few keywords so it's a lot easier to learn than, for example, C++ or Rust.”</li><li>works with nearly all major web frameworks including Next.js, SvelteKit, Astro, Nuxt, and Fastify</li><li>a package manager that works with npm packages</li><li>became stable (1.0) in September 2023</li><li>Oven will donate to the Zig Software Foundation to keep that project going</li></ul><p>The Name</p><p>“A friend suggested the name “bun” because she has a bunny named bun. My initial reaction was &quot;I'm not going to name it after your bunny.&quot; And then I thought about it more and it made some sense.”</p><p>Also “because it’s a bundling of the JavaScript ecosystem and a bundler”.</p><p>Why?</p><ul><li>simplifies current state of JS/TS tooling (transpilers, bundlers, testing tools, …); less to install and configure; easier to use</li><li>provides significantly better performance</li><li>supports both CommonJS (require) and ESM (import) in the same source files</li></ul><p>Features</p><ul><li>The bun runtime replaces Node.js and supports nearly all Node.js builtin modules (around 40 of them; rarely used modules such as dgram, http2, inspector, and repl are not yet supported; v8 module is specific to Webkit which Bun does not use)</li><li>Supports JSX/TSX files.</li><li>hot reloading with “bun —hot {file} (watch mode equivalent of nodemon?)</li><li>has a plugin API that is similar to that of esbuild, so many esbuild plugins work in bun without modification</li><li>bun:test a Jest-compatible test runner; 8 times faster than Vitest and 13 times faster than Jest</li><li>SQLite database built into the bun runtime; see bun:sqlite; 2 times faster than Deno and 4 times faster than Node in queries per second</li><li>bun-specific, highly-optimized APIs that perform better than Node.js equivalents<ul><li>Bun.file returns a File object with the same properties as DOM File objects; contents are lazily loaded; many async methods for reading content in different formats including text, json, stream, and ArrayBuffer; reads files up to 10 times faster</li><li>Bun.write to write many kinds of values including strings, buffers, files, and responses from HTTP requests; writes 3 times faster than Node.js</li><li>Bun.serve to start an HTTP server based on web APIs; handles 4 times as many requests per second as Node.js</li><li>Bun.env provides access to environment variables without using the dotenv package</li><li>Websocket support handles 5 times as many messages per second as Node.js and is easier to use</li><li>password hashing (uses Bcrypt and Argon)</li><li>many more APIs!</li></ul></li></ul><p>Performance</p><ul><li>4 times faster than Node.js for a hello world program</li><li>time to build and run TS code is 4 times faster than esbuild, 15 times faster than TSX, and 43 times faster than TSC + Node</li><li>“bun run” can be used in place of “npm run” and is 5 times faster</li><li>“bun install” is 29 times faster than npm and 17 times faster than pnpm; uses package.json files just like npm; uses a binary bun.lockb file instead of package-lock. json; can be used as a replacement for npm even when not using the bun runtime</li><li>“bunx” is the equivalent of “npx”</li></ul><p>To install locally, enter <code>curl -fsSL https://bun.sh/install | bash</code>. Also describe how to use with Docker, Cloudflare, and others.</p><p>Concerns</p><ul><li>Was it a good idea to build with Zig, a new, not yet popular language?</li><li>We’re the Node APIs implemented to have identical characteristics with no bugs?</li></ul><p>More</p><ul><li>Elysia is a bun-specific server framework which is 18 times faster than Express<ul><li><code>bun create elysia project-name</code> generates a scaffolded app</li><li><code>cd project-name</code></li><li><code>bun run dev</code> provides hot reloading</li><li>browse localhost:3000</li><li>bunx prisma init —datasource-provider mysql</li></ul></li><li>Hono is a close competitor to Elysia</li></ul></article>