<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>htmx</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#why-use-htmx%3F">Why Use htmx?</a></li><li><a href="#simplified-client-side">Simplified Client-side</a></li><li><a href="#history-and-future">History and Future</a></li><li><a href="#rest">REST</a></li><li><a href="#hateoas">HATEOAS</a></li><li><a href="#html-issues">HTML Issues</a></li><li><a href="#questions-to-consider">Questions to Consider</a></li><li><a href="#use-cases">Use Cases</a></li><li><a href="#offline-support">Offline Support</a></li><li><a href="#choosing-a-stack">Choosing a Stack</a></li><li><a href="#browser-reload-in-development">Browser Reload in Development</a></li><li><a href="#client-side-processing">Client-side Processing</a></li><li><a href="#json">JSON</a></li><li><a href="#installing">Installing</a></li><li><a href="#configuring">Configuring</a><ol><li><a href="#request-timeouts">Request Timeouts</a></li></ol></li><li><a href="#using-typescript">Using TypeScript</a></li><li><a href="#using-tailwind">Using Tailwind</a></li><li><a href="#triggers">Triggers</a></li><li><a href="#requests">Requests</a></li><li><a href="#dialogs">Dialogs</a></li><li><a href="#urls">URLs</a></li><li><a href="#security">Security</a><ol><li><a href="#content-security-policy-(csp)">Content Security Policy (CSP)</a></li><li><a href="#sanitizing-html">Sanitizing HTML</a></li></ol></li><li><a href="#targets">Targets</a></li><li><a href="#busy-indicators">Busy Indicators</a></li><li><a href="#multiple-updates">Multiple Updates</a><ol><li><a href="#expanding-the-target">Expanding the target</a></li><li><a href="#out-of-band-updates">Out-of-band Updates</a></li><li><a href="#custom-events">Custom Events</a></li></ol></li><li><a href="#common-patterns">Common Patterns</a><ol><li><a href="#lazy-loading">Lazy Loading</a></li><li><a href="#input-validation-with-api-calls">Input Validation with API calls</a></li><li><a href="#deleting-an-element">Deleting an Element</a></li><li><a href="#css-transitions">CSS Transitions</a></li><li><a href="#resetting-a-form">Resetting a Form</a></li><li><a href="#active-search">Active Search</a></li><li><a href="#optimistic-updates">Optimistic Updates</a></li><li><a href="#pagination">Pagination</a></li><li><a href="#infinite-scroll">Infinite Scroll</a></li><li><a href="#toggling-selection">Toggling Selection</a></li><li><a href="#polling">Polling</a><ol><li><a href="#fixed-rate-polling">Fixed Rate Polling</a></li><li><a href="#load-polling">Load Polling</a></li></ol></li><li><a href="#adding-header-to-all-requests">Adding Header to All Requests</a></li><li><a href="#click-to-edit">Click to Edit</a></li><li><a href="#dynamic-endpoints">Dynamic Endpoints</a></li><li><a href="#html-and-json-endpoints">HTML and JSON Endpoints</a></li></ol></li><li><a href="#http-request-headers">HTTP Request Headers</a></li><li><a href="#http-response-headers">HTTP Response Headers</a></li><li><a href="#components">Components</a></li><li><a href="#events">Events</a></li><li><a href="#validation">Validation</a></li><li><a href="#boosting">Boosting</a></li><li><a href="#other-attributes">Other Attributes</a></li><li><a href="#javascript-api">JavaScript API</a></li><li><a href="#debugging">Debugging</a></li><li><a href="#animation">Animation</a></li><li><a href="#websockets">WebSockets</a></li><li><a href="#server-sent-events">Server-Sent Events</a></li><li><a href="#browser-history">Browser History</a></li><li><a href="#_hyperscript">_hyperscript</a></li><li><a href="#mobile-apps">Mobile Apps</a></li><li><a href="#resources">Resources</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>figcaption {
    margin-top: 0.5rem;
    text-align: center;
  }
  img {
    border: 1px solid gray;
  }</style><figure style="width: 60%"><img alt="htmx logo" style="border: 0" src="/blog/assets/htmx-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://htmx.org?v=1.1.1" rel="noopener" target="_blank">Htmx</a> is a hypermedia-oriented, client-side JavaScript library. Hypermedia is any data format that can describe branching from one &quot;media&quot; (ex. a document) to another. A hypermedia control is an element that describes a server interaction such as HTML anchor (<code>a</code>) and <code>form</code> elements.</p><p>Htmx adds support for new HTML attributes that make HTML more expressive. These attributes enable implementing &quot;Hypermedia-Driven Applications&quot; (HDAs).</p><p>The new HTML attributes support responding to any kind of interaction (ex. click) with any HTML element by sending an HTTP request using any method (GET, POST, PUT, PATCH, or DELETE). The response must contain HTML or plain text, not JSON. Rather than performing a complete page refresh, the returned HTML replaces an existing DOM element (transclusion) or is inserted relative to one.</p><p>Htmx removes the need to serialize data to JSON on the server, parse the JSON on the client, and build an HTML representation from the data.</p><p><img alt="hypermedia driven applications" style="border: none; width: 70%" src="/blog/assets/hypermedia-driven-applications.png?v=1.1.1"></p><p>The server endpoints can be implemented using any programming language and server framework. This is referred to as &quot;Hypermedia On Whatever you'd Like&quot; (HOWL).</p><p>Servers for htmx applications plays two roles. First, they serves static files such as HTML, CSS, JavaScript, and images. Second, they respond to certain HTTP requests by returning HTML or text.</p><p>Many web app features typically thought to require custom JavaScript code can instead be implemented with only htmx. Examples include lazy loading of data, infinite scrolling, and searching while the user types in an <code>input</code>.</p><p>The fact that all HTML rendered by htmx applications is either static or server-rendered makes it great for SEO.</p><p>Users perceive apps built with htmx to be fast because the initial page load only requires the htmx library (&lt; 15.1 KB minified and compressed) and the initial HTML/CSS to render. Subsequent interactions only require fetching snippets of HTML or text. No client-side hydration of JavaScript code is needed. Browsers are very efficient at updating the DOM from strings of HTML.</p><p>The htmx library is implemented in JavaScript, not TypeScript, in a single source file. There are plans to add JSDoc TypeScript type definitions for better code editor support.</p><h2 id="why-use-htmx%3F" tabindex="-1">Why Use htmx?</h2><p>The following is a brief summary of the main benefits of using htmx compared to SPA frameworks. Many of these are discussed in more detail in subsequent sections.</p><ul><li><p>Fixes HTML shortcomings</p><p>Htmx enables many kinds of user interactions with any kind of HTML element to trigger any kind of HTTP request and insert HTML in the response into a specific location in the DOM without a full page refresh. Avoiding full page refreshes preserves scroll state.</p><p>Htmx dramatically reduces the need for custom client-side JavaScript code. Some refer to this as &quot;Low JS&quot;.</p></li><li><p>Improves startup time</p><p>With htmx browsers download considerably less JavaScript code which improves metrics such as &quot;First Contentful Paint&quot; and &quot;Time to Interactive&quot;. For users with modern computers/phones and fast internet connections, the improvement may not seem significant. But for users with old computers/phones and slow internet connections, a much better user experience will be provided.</p></li><li><p>Favors LoB over SoC</p><p>The Locality of Behavior (LoB) pattern places related code together which makes the code easier to understand and modify than following a Separation of Concerns (SoC) pattern. From Richard Gabriel (famous for his work at the MIT AI lab and with Lisp), LoB &quot;enables a programmer to understand source by looking at only a small portion of it.&quot; LoB doesn't require all the code for a feature to be implemented where it is used, just invoked from a common place.</p></li><li><p>Eliminates JSON as an intermediate format</p><p>Typically SPA application endpoints fetch data, serialize it to JSON, and return the JSON. Then code running in the browser parses the JSON and generates HTML from it.</p><p>Htmx endpoints fetch data, generate HTML from it, and return the HTML. The browser only has to render the returned HTML.</p><p>Removing JSON as an intermediate format provides efficiency gains.</p></li><li><p>Eliminates need for API versioning</p><p>JSON APIs that are intended to be used by multiple clients must be versioned and each version must remain stable to avoid breaking clients.</p><p>HTML APIs on the other hand are intended for use by a single client application and can be specific to it. Only browsers need to understand the HTML returned by these endpoints. Client-side code does not parse the HTML and extract data from it, as is done with JSON APIs.</p><p>This removes the need to version HTML APIs. They can be freely modified as long as the desire is for all users to use the latest version the next time they visit the site.</p><p>All that is needed is a URL for rendering the initial page of an application. All other interactions are derived through URLs in that page and pages reached from it. This is the crux of HATEOAS (described later)</p></li><li><p>Enables Hypermedia ON Whatever you'd Like (HOWL)</p><p>Htmx enables implementing web applications using any programming language that can implement an HTTP server whose endpoints return HTML responses. This includes most programming languages.</p></li><li><p>Encourages full-stack development</p><p>Often in SPA development one team of developers implements endpoints that return JSON data and another team of developers implements web user interfaces that use those endpoints.</p><p>With htmx, developers implement complete features by defining endpoints that return HTML including htmx attributes. This requires developers to know the selected programming language, HTML, and CSS, but not necessarily JavaScript.</p></li><li><p>Reduces learning curve</p><p>Learning how to use htmx attributes in HTML is significantly easier than learning a SPA framework.</p></li><li><p>Simplifies state management</p><p>Typical SPA applications manage state on both the server and client. Keeping the state in sync in two places introduces challenges.</p><p>With htmx all the state is only on the server, so no state synchronization is needed and browser memory usage is reduced.</p></li><li><p>Simplifies client-side code</p><p>See the next section for details.</p></li></ul><h2 id="simplified-client-side" tabindex="-1">Simplified Client-side</h2><p>Using endpoints that return HTML instead of JSON removes the need for many things including:</p><ul><li><p>nearly all client-side logic</p><p>This is mostly unnecessary because the logic is embedded in the HTML elements returned by the server. This implements Hypermedia As The Engine Of Application State (HATEOAS).</p><p>Fewer client-side dependencies are needed.</p></li><li><p>managing client-side data models</p><p>This is unnecessary because all the data remains only on the server.</p></li><li><p>client-side routing</p><p>This is unnecessary because page updates and transitions are handled by HTTP requests triggered on elements described in the HTML returned by the server.</p></li></ul><p>The HTML returned by endpoints is typically larger than a corresponding JSON response would be. This is a non-issue because htmx trades &quot;representational efficiency&quot; for achieving other goals such as the ones described above.</p><h2 id="history-and-future" tabindex="-1">History and Future</h2><p>Htmx was created by <a href="https://bigsky.software/cv/?v=1.1.1" rel="noopener" target="_blank">Carson Gross</a>. He is a principal software engineer at <a href="https://bigsky.software/?v=1.1.1" rel="noopener" target="_blank">Big Sky Software</a> and a part-time Computer Science instructor at Montana State University.</p><p>Carson been working on the approach of simplifying web development by adding attributes to HTML for a long time.</p><p>The predecessor of htmx, also created by Carson Gross, is <a href="https://intercoolerjs.org?v=1.1.1" rel="noopener" target="_blank">intercooler.js</a>. Work on intercooler.js began in 2013 and the first version was released in April 2014. Intercooler had a dependency on jQuery, but htmx does not.</p><p>The first version of htmx was released in May 2020. The 1.0 version was released in November, 2020. The latest version as of December 2023 is 1.9.10 which is less than 17K.</p><p>Htmx has an extensive set of integration tests implemented in Mocha.</p><p>Interest in htmx exploded in 2023 after YouTube videos from ThePrimeagen and Fireship were released. See <a href="https://www.youtube.com/watch?v=zjHHIqI9lUY?v=1.1.1" rel="noopener" target="_blank">htmx</a> and <a href="https://www.youtube.com/watch?v=r-GSGH2RxJs?v=1.1.1" rel="noopener" target="_blank">htmx in 100 seconds</a>.</p><p>Htmx had a strong showing in the 2023 JavaScript Rising Stars results. See <a href="https://risingstars.js.org/2023/en#section-framework?v=1.1.1" rel="noopener" target="_blank">Front-end Frameworks</a>.</p><p>Htmx 2.0 is expected in early 2024. It will remove legacy support for things like IE, old style WebSockets, and old style server sent events. There will also be some changes to default behavior such as not enabling CORS by default. Other changes are not expected to be dramatic.</p><p>Carson Gross wishes that the functionality of htmx would be folded into HTML, making htmx unnecessary.</p><p>Companies that sponsor the development of htmx are listed on the <a href="https://htmx.org?v=1.1.1" rel="noopener" target="_blank">htmx home page</a>. They include GitHub and JetBrains.</p><h2 id="rest" tabindex="-1">REST</h2><p>Web app frameworks such as React, Svelte, Angular, and Vue have popularized the creation of single-page applications (SPAs). SPA web apps typically use client-side JavaScript code to send HTTP requests to server-side endpoints that query/update databases, serialize the data into JSON, and return it. The browser parses the JSON into a JavaScript object and client code updates the page with HTML that is generated from that object. Client-side code is responsible for understanding the meaning of JSON data and breaks if the endpoints change to return different data. Many developers refer to this architecture as &quot;REST&quot;.</p><p>This is not what Roy Fielding had in mind when he wrote his famous PhD dissertation &quot;<a href="https://ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf?v=1.1.1" rel="noopener" target="_blank">Architectural Styles and the Design of Network-based Software Architectures</a>&quot; that gave birth to REST. Roy has been <a href="https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven?v=1.1.1" rel="noopener" target="_blank">quoted</a> saying &quot;I am getting frustrated by the number of people calling any HTTP-based interface a REST API. ... That is RPC.&quot;</p><p>This does not mean that architectures commonly referred to as REST are bad. They just do not fit the Fielding definition of REST.</p><p>A software architecture is RESTful if it:</p><ul><li>uses a client/server model</li><li>is stateless</li><li>caches responses</li><li>supports a uniform interface</li></ul><p>A uniform interface is one where:</p><ul><li>requests identify a resource</li><li>resources are manipulated through representations</li><li>messages are self-descriptive</li><li>HATEOAS is used (described next)</li></ul><h2 id="hateoas" tabindex="-1">HATEOAS</h2><p>&quot;Hypermedia As The Engine Of Application State&quot; (<a href="https://htmx.org/essays/hateoas/?v=1.1.1" rel="noopener" target="_blank">HATEOAS</a>) is a specific use of the REST architecture where services return hypermedia. The acronym HATEOAS does not appear in the dissertation, but its concepts are discussed.</p><p>Carson Gross describes HATEOAS systems as follows: &quot;Given an entry point into the system, the rest of the system can be accessed simply by inspecting the hypermedia.&quot;</p><p>HTML is a kind of hypermedia and web browsers are hypermedia clients. Responses to requests can contain HTML. Browsers render the HTML which enables users to view and operate on resources.</p><p>Such responses are similar to object-oriented programming where objects contain data and methods for operating on their data. Browsers simply render the HTML returned. They do not require any resource-specific knowledge about how to render or interact with resources.</p><p>JSON is not hypermedia. JSON responses do not support HATEOAS because they typically only contain raw data with no information on how to interact with it. In addition, browsers do not know how to render JSON data. Client code is required to understand the meaning of the data in order to render it in a human-readable way.</p><h2 id="html-issues" tabindex="-1">HTML Issues</h2><p>Htmx addresses four important shortcomings of HTML.</p><ol><li><p>Which elements can trigger sending an HTTP request?</p><p>The only HTML elements that send an HTTP request are <code>a</code> (anchor) and <code>form</code> When an anchor is clicked, it sends a GET requests to a specified URL. When a <code>form</code> is submitted, it sends a GET or POST request to a specified URL. For GET requests, form data is attached to the URL in query parameters. For POST requests, form data is included in the request body.</p><p>Htmx enables any element to send an HTTP request.</p></li><li><p>What events trigger sending an HTTP request?</p><p>In HTML, clicking an anchor or submitting a <code>form</code> are the only events that trigger sending an HTTP request.</p><p>Htmx enables any DOM event, and custom events, to trigger sending an HTTP request.</p></li><li><p>What kinds of HTTP requests can be sent?</p><p>HTML only sends GET and POST requests.</p><p>Htmx enables sending any kind of HTTP request which includes PUT, PATCH, and DELETE.</p></li><li><p>How is the response rendered?</p><p>When HTML sends an HTTP request, the entire page is replaced by the response.</p><p>Htmx enables replacing specific elements with the response (transclusion) or inserting the response relative to an existing element, while leaving the rest of the page intact.</p></li></ol><h2 id="questions-to-consider" tabindex="-1">Questions to Consider</h2><p>What is the benefit of serializing data to JSON on the server, returning JSON to the browser, parsing JSON in the browser, and using client-side code to convert the data into HTML? With htmx the steps of serializing data to JSON on the server and parsing JSON in the browser are eliminated.</p><p>What are the advantages of generating HTML in the browser instead of doing the same work on the server?</p><p>Why should we restrict ourselves to only using JavaScript to implement web applications? With htmx the server code can be implemented in any programming language that supports implementing HTTP servers. The most suitable languages are ones that provide good support for HTML templating. It is also desirable to have editor tooling that provides syntax highlighting of HTML and checking for proper HTML including attribute usage and element nesting.</p><h2 id="use-cases" tabindex="-1">Use Cases</h2><p>Htmx is great for CRUD-based applications and dashboards. But htmx is not appropriate for all web app features.</p><p>Using htmx to update the UI on every mouse move or drag would be too slow since each movement would trigger a new HTTP request. Examples of apps that require this kind of functionality include Google Maps and many games.</p><p>Htmx is not appropriate for spreadsheet-like UIs where a change in one part of the UI triggers changes in many other parts that need to be reflected quickly.</p><p>Htmx can be used in conjunction with other approaches. Consider using it for all the parts of apps that do not require high frequency updates.</p><h2 id="offline-support" tabindex="-1">Offline Support</h2><p>Using htmx in apps that require offline support is tricky because htmx relies on sending HTTP requests to get new HTML updates to the UI.</p><p>One way to achieve this is to use a service worker to intercept and process HTTP requests. For an example of this approach, see <a href="https://github.com/mvolkmann/htmx-offline?v=1.1.1" rel="noopener" target="_blank">htmx-offline</a>.</p><p>An effort is underway to address offline usage of htmx at <a href="https://github.com/spirodonfl/htmx-offline-mode?v=1.1.1" rel="noopener" target="_blank">htmx-offline-mode</a>.</p><h2 id="choosing-a-stack" tabindex="-1">Choosing a Stack</h2><p>The server side of htmx web apps can be implemented with any programming language and HTTP server library. Of course some options are better than others.</p><p>Good choices make it easy to do the following:</p><ul><li><p>Create new endpoints for any HTTP verb.</p><p>One of the primary activities when using htmx is defining endpoints. It's best when an endpoint can be described in a single source file, rather than requiring editing multiple files. It's also convenient when multiple, related endpoints can be defined in the same source file.</p></li><li><p>Specify type checking and validation of request data and receive helpful error messages in responses.</p><p>Request data includes request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON. An example is the TypeScript library <a href="https://zod.dev?v=1.1.1" rel="noopener" target="_blank">Zod</a>.</p></li><li><p>Get request data in the form of request headers, path parameters, query parameters, and request bodies that can contain text, form data, JSON.</p></li><li><p>Send HTTP responses that can include headers and bodies that contain text or HTML.</p></li></ul><p>Good choices have tooling that supports the following:</p><ul><li>Fast server startup with no build process (or a simple one) to support iterative development.</li><li>Automatic server restarts after source code changes are detected.</li><li>Good HTML templating support such as JSX, rather than relying on string concatenation. JSX is an XML-based syntax popularized by the React framework for embedding HTML-like syntax directly in JavaScript code.</li><li>Syntax highlighting of HTML in code editors.</li></ul><p>One tech stack that meets all these criteria includes the following:</p><ul><li><a href="/blog/topics/#/blog/typescript/" target="_blank">TypeScript</a> as the programming language which adds types to JavaScript.</li><li><a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> as a JavaScript runtime and package manager.</li><li><a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> as the HTTP library.</li></ul><p>This is the tech stack we will use for all the examples in this book. It was chosen due to familiarity with JavaScript, performance of Bun/Hono, and the simplicity of Hono which supports defining endpoints with very little code.</p><p><img alt="htmx plus Bun" style="width: 40%" src="/blog/assets/htmx-plus-bun.jpg?v=1.1.1"></p><p>Other popular tech stacks for htmx include:</p><ul><li><a href="https://ahastack.dev?v=1.1.1" rel="noopener" target="_blank">AHA stack</a> which uses Astro, htmx, and <a href="/blog/topics/#/blog/alpine/?v=1.1.1" rel="noopener" target="_blank">AlpineJS</a></li><li><a href="https://github.com/ethanniser/the-beth-stack?v=1.1.1" rel="noopener" target="_blank">BETH stack</a> which uses Bun, Elysia, Turso, and htmx.</li><li>Go with <a href="https://templ.guide?v=1.1.1" rel="noopener" target="_blank">templ</a></li><li>Python with Flask (see the <code>render_template</code> function) or Django (see the <code>loader.get_template</code> and <code>template.render</code> methods)</li><li><a href="https://github.com/stolinski/hype?v=1.1.1" rel="noopener" target="_blank">Hype</a> which uses TypeScript, Bun, Elysia, SQLite, and Drizzle.</li></ul><p>One downside of having many options is that there are no canonical examples of implementing endpoints for an htmx application.</p><h2 id="browser-reload-in-development" tabindex="-1">Browser Reload in Development</h2><p>Many tech stacks support automatically restarting servers when code changes are saved, but they often do not reload browser windows that render the HTML that they serve. The following steps add this behavior.</p><ul><li><p>Create the file <code>src/reload-server.js</code> containing the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> WebSocket <span class="token keyword">from</span> <span class="token string">'ws'</span><span class="token punctuation">;</span><br><br><span class="token comment">// Browser code will connect to this so it</span><br><span class="token comment">// can detect when the server is restarted.</span><br><span class="token comment">// On restart, the browser will reload the page.</span><br><span class="token comment">// Any unused port can be used here.</span><br><span class="token keyword">const</span> wss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">.</span><span class="token function">Server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// If any files in or below the public directory change,</span><br><span class="token comment">// send the client a message to tell it to reload.</span><br><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>recursive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">,</span> filename<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">detected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> client <span class="token keyword">of</span> wss<span class="token punctuation">.</span>clients<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'reload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>Create the file <code>public/reload-client.js</code> containing the following:</p><pre class="language-js"><code class="language-js"><span class="token comment">// The port here must match the port used in src/reload-server.js.</span><br><span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://localhost:3001'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// This assumes the server will restart and create a new WebSocket server.</span><br>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// gives the server time to restart</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'reload'</span><span class="token punctuation">)</span> location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>Add the following near the beginning the main server source file, perhaps named <code>src/server.tsx</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token string">'./reload-server.js'</span><span class="token punctuation">;</span></code></pre></li><li><p>Add the following to the <code>head</code> tag of each page, such as <code>public/index.html</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reload-client.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Add the following properties in <code>tsconfig.json</code> inside the <code>compilerOptions</code> object:</p><pre class="language-json"><code class="language-json"><span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br><span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"nodeNext"</span><span class="token punctuation">,</span><br><span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"nodeNext"</span><span class="token punctuation">,</span><br><span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span><br><span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"bun-types"</span><span class="token punctuation">]</span></code></pre></li></ul><p>When using Bun, this approach assumes that the server was started with a script like the following:</p><pre class="language-json"><code class="language-json"><span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"bun run --watch src/server.tsx"</span><span class="token punctuation">,</span></code></pre><p>Note that this uses <code>--watch</code>. The WebSocket server will not be restarted if <code>--hot</code> is used.</p><h2 id="client-side-processing" tabindex="-1">Client-side Processing</h2><p>Htmx applications to not require sending an HTTP request for every user interaction.</p><p>For user interactions that do not require server-side updates, consider using HTML elements such as <code>details</code> and <code>dialog</code>. Also consider client-side scripting options include vanilla JavaScript, <a href="/blog/topics/#/blog/alpine/?v=1.1.1" rel="noopener" target="_blank">AlpineJS</a>, and <a href="/blog/topics/#/blog/hyperscript/?v=1.1.1" rel="noopener" target="_blank">_hyperscript</a>. All of these support updating the UI by performing DOM manipulation.</p><p>Alpine adds support for many new HTML attributes. _hyperscript adds support for one new HTML attribute whose name is a single underscore (<code>_</code>) and whose value is _hyperscript code. Both differ from htmx in that they focus on client-side interactions rather that processing HTTP requests.</p><p>Like HTMLx, Alpine and _hyperscript are client-side JavaScript libraries. These are much lighter than libraries and frameworks like React.</p><h2 id="json" tabindex="-1">JSON</h2><p>While htmx applications do not require implementing and using REST APIs that returns JSON data, it may still be desirable to implement them. For example, Android and iOS mobile apps may wish to use such APIs. To use these in htmx apps, call them from HTTP endpoints that use the data to generate HTML responses.</p><p>Alternatively, write functions that return the desired data and call them from both the endpoints that return JSON and the endpoints that return HTML.</p><h2 id="installing" tabindex="-1">Installing</h2><p>There are three ways to use htmx.</p><ol><li><p>Used htmx from a CDN by including the following <code>script</code> tag:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/htmx.org@1.9.10<span class="token punctuation">"</span></span><br>  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC<span class="token punctuation">"</span></span><br>  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>The <code>integrity</code> and <code>crossorigin</code> attributes can be omitted, but including them allows the browser to verify that the script has not been manipulated.</p><p>The <code>crossorigin</code> attribute enables CORS checking. It is required if the <code>integrity</code> attribute is present. When the value is &quot;anonymous&quot;, no credentials are sent.</p></li><li><p>Install htmx using a package manager like npm or bun.</p><p>Enter <code>npm install htmx.org</code> or <code>bun add htmx.org</code>. Then bundle the file <code>node_modules/htmx.org/dist/htmx.min.js</code> with other JavaScript files being used by the application OR copy that file to a directory whose files are served by your application server and include a <code>script</code> tag to include it.</p></li><li><p>Download htmx as a single, minified JavaScript file by clicking the &quot;~14k min.gz’d&quot; link near the top of the <a href="https://htmx.org?v=1.1.1" rel="noopener" target="_blank">htmx home page</a>. Place the downloaded file in a directory whose files are served by your application server and include a <code>script</code> tag like the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li></ol><h2 id="configuring" tabindex="-1">Configuring</h2><p>Htmx supports a large number of configuration options. For details, see <a href="https://htmx.org/docs/#config" target="_blank">Configuring htmx</a>.</p><p>The options can be configured in a <code>meta</code> tag that is a child of the <code>head</code> tag of each page.</p><p>For example, the configuration option <code>htmx.config.allowScriptTags</code> is <code>true</code> by default. The following <code>meta</code> tag changes this <code>script</code> tags in content returned from endpoints are ignored.</p><p>The value of the <code>content</code> attribute must be a JSON string.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx-config<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"allowScriptTags": false}<span class="token punctuation">'</span></span> <span class="token punctuation">/></span></span></code></pre><h3 id="request-timeouts" tabindex="-1">Request Timeouts</h3><p>By default no HTTP requests send by htmx have a timeout.</p><p>To set a timeout to be used for all requests (ex. 2 seconds), add the following <code>meta</code> tag in the <code>head</code> tag of all pages.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx-config<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"timeout": 2000}<span class="token punctuation">'</span></span> <span class="token punctuation">/></span></span></code></pre><p>To set a timeout to be used for a specific request, add the <a href="https://htmx.org/attributes/hx-request/?v=1.1.1" rel="noopener" target="_blank">hx-request</a> attribute. This attribute is inherited by all descendant elements, so it can be placed on the element that triggers the request OR on any of its ancestor elements.</p><p>The following example configures the timeout for HTTP requests triggered by a <code>form</code> to two seconds.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><br>  <span class="token attr-name">hx-post</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/render<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#result<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-request</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">"</span>timeout":2000<span class="token punctuation">'</span></span><br>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-form<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>markup<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{3}<span class="token punctuation">"</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{40}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>result<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>When a request timeout occurs, htmx dispatches a <code>htmx:timeout</code> event. This event will bubble up all the way to the <code>body</code> element. The following code listens for this event and displays a message informing the user that a request timeout occurred.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-form'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>form <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'htmx:timeout'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'The request timed out.'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="using-typescript" tabindex="-1">Using TypeScript</h2><p>There are several ways to create an htmx project that uses TypeScript. One way it to use Bun which provides TypeScript support out of the box.</p><p>Another way is to use Vite as described below. Vite provides a local HTTP server with hot reload. Alpine can be used to manage any client-side state and interactivity.</p><ul><li><p>Enter <code>npm init vite@latest</code></p><ul><li>Enter a project name.</li><li>For the framework, select &quot;Vanilla&quot;.</li><li>For the variant, select &quot;TypeScript&quot;.</li></ul></li><li><p>cd to the newly created project directory</p></li><li><p>Enter <code>npm install</code></p></li><li><p>Enter <code>npm install alpinejs</code></p></li><li><p>Enter <code>npm install -D @types/alpinejs</code></p></li><li><p>Create the file <code>src/global.d.ts</code> containing the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>Alpine <span class="token keyword">as</span> AlpineType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'alpinejs'</span><span class="token punctuation">;</span><br><br><span class="token keyword">declare</span> global <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> Alpine<span class="token operator">:</span> AlpineType<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></li><li><p>Replace the contents of <code>src/main.ts</code> with the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> Alpine <span class="token keyword">from</span> <span class="token string">'alpinejs'</span><span class="token punctuation">;</span><br>globalThis<span class="token punctuation">.</span>Alpine <span class="token operator">=</span> Alpine<span class="token punctuation">;</span><br>Alpine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>Edit <code>index.html</code> which already contains a <code>script</code> tag for <code>/src/main.ts</code>. Add HTML that uses Alpine directives here. For example, change the <code>body</code> content to the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span> <span class="token attr-name">x-data</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alert('got click')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Press Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/main.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Enter <code>npm run dev</code></p></li><li><p>Browse localhost:5173.</p></li></ul><h2 id="using-tailwind" tabindex="-1">Using Tailwind</h2><p>There are two approaches for using Tailwind for CSS styling in an htmx app.</p><p>The easiest approach is to include it from a CDN with this <code>link</code> tag:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.tailwindcss.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>This has the downside that it includes every Tailwind CSS class, not just the ones actually used in the app.</p><p>A more involved approach is to generate a CSS file that only contains the Tailwind CSS classes that are actually used. The steps to do this are as follows:</p><ol><li><p>Install Tailwind by entering <code>bun install -d tailwindcss</code></p></li><li><p>Enter <code>bunx tailwindcss init</code> to create the file <code>tailwind.config.js</code>.</p></li><li><p>Edit the value of <code>content</code> in <code>tailwind.config.js</code> to be <code>content: ['**/*.tsx'],</code></p></li><li><p>Create the file <code>global.css</code> containing the following:</p><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span><br><span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span><br><span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span></code></pre><p>This file can also define custom CSS classes.</p></li><li><p>Generate a CSS file containing only the Tailwind classes used in your app.</p><p>Enter <code>bunx tailwindcss -i ./global.css -o public/tailwind.css --watch</code> to generate <code>public/tailwind.css</code> now and again every time any of thew &quot;content&quot; files are modified.</p><p>Consider adding a <code>package.json</code> script for this such as:</p><pre class="language-json"><code class="language-json"><span class="token property">"tw"</span><span class="token operator">:</span> <span class="token string">"bunx tailwindcss -i ./global.css -o public/tailwind.css --watch"</span></code></pre><p>To run this, enter <code>bun run tw</code>.</p></li><li><p>Include the following <code>link</code> element in the base HTML of the app.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/tailwind.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>The documentation for the <code>@elysiajs/static</code> plugin says it defaults to looking in the <code>public</code> directory, but it actual defaults to looking in the root directory and I haven't found a way to change that. See this <a href="https://github.com/elysiajs/elysia/issues/352?v=1.1.1" rel="noopener" target="_blank">issue</a>.</p></li></ol><p>This also requires enabling serving static files with the following steps:</p><ol><li>Install a plugin by entering <code>bun add @elysiajs/static</code></li><li>In the server code, add a call to <code>app.use(staticPlugin());</code></li></ol><h2 id="triggers" tabindex="-1">Triggers</h2><p>With htmx, any element can trigger an HTTP request. The first thing to consider is what will trigger a request to be sent.</p><p>HTML elements such as <code>input</code>, <code>textarea</code>, and <code>select</code> automatically trigger when they emit a &quot;change&quot; event. HTML <code>form</code> elements automatically trigger when they emit a <code>submit</code> event. The default trigger for all other elements is &quot;click&quot;.</p><p>To trigger on different events, add the <code>hx-trigger</code> attribute. The value of this attribute can be a single event, a comma-separated list of events, or <code>every {timing}</code> to trigger repeatedly at a given time interval (for polling).</p><p>DOM event names include <code>blur</code>, <code>change</code>, <code>click</code>, <code>contextmenu</code>, <code>dblclick</code>, <code>focus</code>, <code>hashchange</code>, <code>input</code>, <code>keydown</code>, <code>keypress</code>, <code>keyup</code>, <code>load</code>, <code>mousedown</code>, <code>mouseenter</code>, <code>mouseleave</code>, <code>mousemove</code>, <code>mouseout</code>, <code>mouseover</code>, <code>mouseup</code>, <code>resize</code>, <code>scroll</code>, <code>submit</code>, <code>touchcancel</code>, <code>touchend</code>, <code>touchmove</code>, <code>touchstart</code>, <code>unload</code>, and more. Custom event names can also be used.</p><p>A space-separated list of event modifiers can follow an event name. Supported event modifiers include:</p><ul><li><code>changed</code> - only send request if the element value has changed</li><li><code>consume</code> - stops the event from bubbling up to ancestor elements</li><li><code>delay:{time}</code> - wait at least this long before each request is sent (debouncing)</li><li><code>from:{css-selector}</code> - listen for the event on a different element</li><li><code>once</code> - only trigger the request one time</li><li><code>queue</code> - affects how concurrent events are processed</li><li><code>target</code> - only trigger if event occurred on an element matching a CSS selector</li><li><code>throttle:{time}</code> - only send the last event received in the specified time and then wait again</li></ul><p>For example, the following trigger is useful for implementing active search.</p><pre class="language-html"><code class="language-html">hx-trigger="keyup changed delay:500ms"</code></pre><p>The &quot;changed&quot; modifier causes the HTTP request to only be sent if the value of the input has changed. For example, using the arrow keys to move the cursor does not change the value.</p><p>The &quot;delay&quot; modifier adds debouncing so an HTTP request is only sent when the user briefly stops typing, not for every change.</p><p>Events can be filtered so they only trigger in specific circumstances. This is specified in square brackets after an event name. For example, <code>click[shiftKey]</code> only triggers when an element is clicked while the shift key is held down. Multiple filters can be specify by and'ing them. For example, <code>click[shiftKey &amp;&amp; ctrlKey]</code>. The square brackets can also contain a call to a JavaScript function that returns a Boolean value where triggering doesn't occur if the function returns <code>false</code>.</p><p>Typically the <code>hx-trigger</code> attribute is applied to elements that also specify an HTTP request to be sent using an attribute like <code>hx-get</code>. But <code>hx-trigger</code> can also be applied to elements that do not trigger an HTTP request. These are referred to as &quot;naked triggers&quot;.</p><p>For example, the following button dispatches a &quot;:triggered&quot; event when it is clicked. It uses the <code>hx-on</code> attribute to listen for that event and execute JavaScript code, in this case to display an alert.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string-property property">'hx-on::trigger'</span><span class="token operator">:</span> <span class="token string">"alert('Got click!')"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token operator">...</span><br><span class="token operator">&lt;</span>button hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"click consume"</span> <span class="token punctuation">{</span><span class="token operator">...</span>attrs<span class="token punctuation">}</span><span class="token operator">></span><br>  Click Me<br><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><p>In this case, the following is a easier way to do the same thing.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button hx<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"alert('Got click!')"</span><span class="token operator">></span>Click Me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><h2 id="requests" tabindex="-1">Requests</h2><p>Interacting with any HTML element can trigger an HTTP request.</p><p>The following attributes all specify the URL to which a specific kind of HTTP request should be sent when the user triggers the element: <a href="https://htmx.org/attributes/hx-get/?v=1.1.1" rel="noopener" target="_blank">hx-get</a>, <a href="https://htmx.org/attributes/hx-post/?v=1.1.1" rel="noopener" target="_blank">hx-post</a>, <a href="https://htmx.org/attributes/hx-put/?v=1.1.1" rel="noopener" target="_blank">hx-put</a>, <a href="https://htmx.org/attributes/hx-patch/?v=1.1.1" rel="noopener" target="_blank">hx-patch</a>, and <a href="https://htmx.org/attributes/hx-delete/?v=1.1.1" rel="noopener" target="_blank">hx-delete</a>.</p><p>When an HTTP request is triggered on a <code>form</code> element, the values of all inputs inside the form will be included in the request. When a non-GET HTTP request is triggered on a non-form element, htmx will search upward in the DOM hierarchy for a <code>form</code> element. If one is found, htmx will include the values of all inputs inside the form in the request. If a form is not found, only the value of the element that triggered the request is included.</p><p>To include the values of additional form elements that are outside the <code>form</code> (or when no <code>form</code> is used), add the <a href="https://htmx.org/attributes/hx-include/?v=1.1.1" rel="noopener" target="_blank">hx-include</a> attribute. Its value is a comma-separated list of CSS selectors, include the relative values described in the &quot;Targets&quot; section.</p><p>See the working example project that uses <code>hx-include</code> at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/non-form-submit?v=1.1.1" rel="noopener" target="_blank">non-form-submit</a>.</p><p>To omit the values of some of the form elements that are inside the form, add the <code>hx-params</code> attribute. For more detail, see <a href="https://htmx.org/attributes/hx-params/?v=1.1.1" rel="noopener" target="_blank">hx-params</a>.</p><p>The <a href="https://htmx.org/attributes/hx-sync/?v=1.1.1" rel="noopener" target="_blank">hx-sync</a> attribute coordinates concurrent requests. For example, entering data in an <code>input</code> that is inside a <code>form</code> could trigger two requests, one to validate the <code>input</code> value and one to submit the <code>form</code>. By default, these requests will run in parallel. If <code>hx-sync=&quot;closest form:abort</code> is applied to the <code>input</code>, the validation request will be sent first. If the validation succeeds then the submit request will be sent. Otherwise it will be aborted.</p><h2 id="dialogs" tabindex="-1">Dialogs</h2><p>The <code>hx-confirm</code> attribute specifies a question to display in a browser-supplied confirmation dialog (using the <code>Window</code> method <code>confirm</code>) before an HTTP request is sent. The dialog contains &quot;OK&quot; and &quot;Cancel&quot; buttons. The request will only be sent if the user clicks the &quot;OK&quot; button.</p><p>The <code>hx-prompt</code> attribute specifies a prompt to display in a browser-supplied prompt dialog (using the <code>Window</code> method <code>prompt</code>) before an HTTP request is sent. The dialog contain a text input and &quot;OK&quot; and &quot;Cancel&quot; buttons. The request will only be sent if the user clicks the &quot;OK&quot; button. The request header <code>HX-Prompt</code> will hold the value the user entered in the text input.</p><p>The confirmation dialog is very plain and cannot be styled. It may be preferable to use a dialog that can be styled, perhaps using the HTML <code>dialog</code> element. Another option is to use a dialog library like <a href="https://sweetalert2.github.io?v=1.1.1" rel="noopener" target="_blank">sweetalert2</a>.</p><p>The following code demonstrates using using <code>hx-confirm</code> with a sweetalert2 confirmation dialog.</p><p><img alt="htmx hx-confirm with sweetalert2" style="width: 60%" src="/blog/assets/htmx-hx-confirm-sweetalert2.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>Custom Confirm Dialog<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/sweetalert2@11"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script<span class="token operator">></span><br>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'htmx:confirm'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prevents use of browser confirm dialog</span><br>        Swal<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'question'</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Confirm Action'</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Are you sure you want to do this?'</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">cancelButtonText</span><span class="token operator">:</span> <span class="token string">'No way!'</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'Yes, do it!'</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>isConfirmed<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">issueRequest</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>button<br>      hx<span class="token operator">-</span>confirm<span class="token operator">=</span><span class="token string">"Are you sure you want to do this?"</span><br>      hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/pokemon"</span><br>      hx<span class="token operator">-</span>indicator<span class="token operator">=</span><span class="token string">".htmx-indicator"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#pokemon-list"</span><br>    <span class="token operator">></span><br>      Load Pokemon<br>    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"pokemon-list"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">"loading..."</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"htmx-indicator"</span> src<span class="token operator">=</span><span class="token string">"/spinner.gif"</span> <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h2 id="urls" tabindex="-1">URLs</h2><p>Htmx endpoints return HTML, not JSON. Their URLs are based on user interface functionality, not resource paths. For example, <code>/todos/:id/toggle</code> is a reasonable URL path for an endpoint that toggles the completed status of todo and returns HTML for the updated todo item.</p><h2 id="security" tabindex="-1">Security</h2><p>Three ways to increase the security of an htmx application are:</p><ul><li>Use a Content Security Policy (CSP) which limits the sources of assets.</li><li>Configure htmx to ignore script tags in HTML returned by endpoints. This is described in the <a href="#configuring">Configuring</a> section.</li><li>Prevent Cross-Site Scripting (XSS) attacks by sanitizing the HTML returned from endpoints if it includes user-entered content.</li></ul><p>All three of these options can prevent executing <code>script</code> tags found in user-entered text.</p><h3 id="content-security-policy-(csp)" tabindex="-1">Content Security Policy (CSP)</h3><p>A CSP is specified by adding a <code>meta</code> tag as a child of the <code>head</code> tag in each HTML page. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span><br>  <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Security-Policy<span class="token punctuation">"</span></span><br>  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default-src 'self'; img-src https://*<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span></code></pre><p>This CSP says:</p><ul><li>By default all content must come from the domain of this web app.</li><li>An exception is made for images which can come from any <code>https</code> URL.</li></ul><p>With this CSP in place, all JavaScript libraries including htmx will need to be downloaded and served from the web app domain.</p><p>For more detail on what can be specified in a CSP, see the MDN <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy?v=1.1.1" rel="noopener" target="_blank">Content-Security-Policy</a> page.</p><h3 id="sanitizing-html" tabindex="-1">Sanitizing HTML</h3><p>A good library for sanitizing HTML is <a href="https://github.com/apostrophecms/sanitize-html?v=1.1.1" rel="noopener" target="_blank">sanitize-html</a>. This provides the function <code>sanitizeHtml</code> which strips out all elements that are not in an approved list. The <code>script</code> element is not in this list because they may do malicious things.</p><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/sanitizing-html?v=1.1.1" rel="noopener" target="_blank">sanitizing-html</a>.</p><p>The following are the relevant lines of code from that project.</p><p>Requests sent to the <code>/render</code> endpoint contain the form data property <code>markup</code>. Users can enter any HTML, including <code>script</code> tags.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>Context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> sanitizeHtml <span class="token keyword">from</span> <span class="token string">'sanitize-html'</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/render'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> markup <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'markup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'index.tsx /render: markup ='</span><span class="token punctuation">,</span> markup<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">sanitizeHtml</span><span class="token punctuation">(</span>markup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If the user enters text like <code>&lt;p&gt;Hello&lt;/p&gt;&lt;script&gt;alert('pwned')&lt;/script&gt;&lt;p&gt;Goodbye&lt;/p&gt;</code>, all that will be rendered are the paragraphs containing &quot;Hello&quot; and &quot;Goodbye&quot;.</p><h2 id="targets" tabindex="-1">Targets</h2><p>Content returned from HTTP endpoints can be placed at a specific target location in the DOM.</p><p>The <code>hx-target</code> attribute specifies a target DOM element. Supported values include:</p><ul><li><code>{css-selector}</code> targets first element that matches</li><li><code>this</code> targets current element (default)</li><li><code>closest {css-selector}</code> targets closest ancestor element or itself that matches</li><li><code>find {css-selector}</code> targets first descendant element that matches</li><li><code>next</code> targets next sibling element</li><li><code>next {css-selector}</code> targets next matching element</li><li><code>previous</code> targets previous sibling element</li><li><code>previous {css-selector}</code> targets previous matching sibling</li></ul><p>These enable identifying elements that do not have <code>id</code> attributes.</p><p>The new content can replace existing content or be inserted relative to existing content. This is specified with the <code>hx-swap</code> attribute. Supported values include:</p><ul><li><code>outerHTML</code>: replace target element</li><li><code>innerHTML</code>: replace content of target element (default)</li><li><code>beforebegin</code>: insert before target element</li><li><code>afterbegin</code>: insert before first child of target element</li><li><code>beforeend</code>: insert after last child of target element</li><li><code>afterend</code>: insert after target element</li><li><code>delete</code>: delete target element; new content is not used</li><li><code>none</code>: do not change the DOM; new content is not used</li></ul><p><img alt="hx-swap" style="width: 80%" src="/blog/assets/htmx-hx-swap.png?v=1.1.1"></p><p>The <code>hx-swap</code> attribute also supports the following space-separated modifiers:</p><ul><li><code>focus-scroll</code>: enables scrolling to a focused input</li><li><code>ignoreTitle</code>: disables default behavior of updating the page title when the content contains a <code>title</code> element</li><li><code>scroll</code>: smoothly scrolls the page to the <code>top</code> or <code>bottom</code> of the target element or a specified element</li><li><code>settle</code>: specifies the time between the swap and settle (?) logic</li><li><code>show</code>: abruptly scrolls the page to the <code>top</code> or <code>bottom</code> of the target element or a specified element</li><li><code>swap</code>: specifies time to wait after receiving new content before swapping/inserting it</li><li><code>transition</code>: uses the View Transitions API</li></ul><p>An endpoint can prevent a swap from occurring by returning a status code of 204 (No Content).</p><p>The <code>hx-select</code> attribute specifies a CSS selector or a comma-separated list of them that indicates which elements from the returned HTML to include. When this is not specified, all the returned HTML is used. When a response contains a full HTML document, Htmx automatically only includes the content of the <code>body</code> element.</p><p>The <code>hx-preserve</code> attribute can be applied to elements that should be preserved through a swap. For example, if there is an <code>audio</code> or <code>video</code> element that is playing and a request for new content returns the same element, it can continue playing without restarting at the beginning. Nothing about preserved elements is modified.</p><h2 id="busy-indicators" tabindex="-1">Busy Indicators</h2><p>The <code>hx-indicator</code> attribute specifies a CSS selector that matches one or more elements. Those elements will have their opacity changed from 0 to 1 while an associated HTTP request is being processed.</p><p>In addition, when an HTTP request is triggered, the CSS class <code>htmx-request</code> is added to the element(s) identified by the <code>hx-indicator</code> attribute OR the element that triggered the request if the <code>hx-indicator</code> attribute is not present. In the latter case, a CSS rule matching <code>htmx-request</code> can be used to style the triggering element.</p><p>The <code>hx-disabled-elt</code> attribute specifies a CSS selector that matches one or more elements. Those elements will have the <code>:disabled</code> CSS pseudo-class applied while an associated HTTP request is being processed.</p><p>The following HTML demonstrates showing an indicator and disabling the &quot;Add&quot; button while waiting for a new todo to be added.</p><p>The spinner image must be given the CSS class <code>htmx-indicator</code>, which hides the spinner by setting <code>opacity</code> to <code>0</code>. When the CSS class <code>htmx-request</code> is also applied, the spinner is shown by setting <code>opacity</code> to <code>1</code>.</p><pre class="language-html"><code class="language-html">&lt;form<br>  hx-post="/todos"<br>  hx-swap="afterend"<br>  hx-disabled-elt="#add-btn"<br>  hx-indicator=".htmx-indicator"<br>  _="on submit target.reset()" // resets form using _hyperscript<br>><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>add-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Add<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br>    <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading...<span class="token punctuation">"</span></span><br>    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx-indicator<span class="token punctuation">"</span></span><br>    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/spinner.gif<span class="token punctuation">"</span></span><br>  <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><h2 id="multiple-updates" tabindex="-1">Multiple Updates</h2><p>There are three ways to update multiple parts of the current page.</p><ol><li>Expanding the target</li><li>Out-of-band swaps</li><li>Triggering events</li></ol><h3 id="expanding-the-target" tabindex="-1">Expanding the target</h3><p>Rather than updating multiple elements, this approach uses a single target that encompasses all the elements that require updating.</p><p>This can be non-optimal because it requires the endpoint to build and return more HTML that is technically necessary. Much of it will likely be identical to what is already rendered.</p><h3 id="out-of-band-updates" tabindex="-1">Out-of-band Updates</h3><p>Top-level HTML elements in endpoint responses can include the <a href="https://htmx.org/attributes/hx-swap-oob/?v=1.1.1" rel="noopener" target="_blank">hx-swap-oob</a> attribute. This attribute typical has the value <code>&quot;true&quot;</code> which specifies that an element with the same id should be replaced by this element. The elements being replaced do not need to have the <code>hx-swap-oob</code> attribute, just a matching <code>id</code> value.</p><p>In this context, &quot;out-of-band&quot; means outside the target specified with <code>hx-target</code>.</p><p>For example, a todo app can display the number of uncompleted todos and the total number of todos. Adding a new todo, deleting a todo, and toggling the completed state of a todo all change what is displayed. One way to accomplish this is for all those endpoints to return the following in addition to any other HTML they need to return.</p><pre class="language-ts"><code class="language-ts"><span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"todo-status"</span> hx<span class="token operator">-</span>swap<span class="token operator">-</span>oob<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><br>  <span class="token punctuation">{</span>uncompletedCount<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token punctuation">{</span>totalCount<span class="token punctuation">}</span> remaining<br><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></code></pre><p>The <a href="https://htmx.org/attributes/hx-select-oob/?v=1.1.1" rel="noopener" target="_blank">hx-select-oob</a> attribute provides a list of CSS selectors that specify elements in the response to be included out-of-band. It provides a way to only use a subset of the elements in the response that have the <code>hx-swap-oob</code> attributes. The <code>hx-select-oob</code> attribute is typically used together with the <code>hx-select</code> attribute which also provides a list of CSS selectors, but those specify a subset the elements to be included at the target location.</p><p>The <a href="https://htmx.org/extensions/multi-swap/?v=1.1.1" rel="noopener" target="_blank">multi-swap</a> extension supports more advanced use cases.</p><h3 id="custom-events" tabindex="-1">Custom Events</h3><p>Any endpoint can trigger a custom event by setting the HTTP response header <code>HX-Trigger</code> to an event name. The event will be dispatched in the browser with no associated data. Any HTML element can listen for the event. One option is for the event handling to trigger another HTTP request whose response is used to swap in new content.</p><p>For example, a todo app can display the number of uncompleted todos and the total number of todos. Adding a new todo, deleting a todo, and toggling the completed state of a todo all change what is displayed. One way to accomplish this is for all those endpoints to trigger the same custom event (ex. &quot;status-change&quot;).</p><p>HTML elements that trigger sending HTTP requests to those endpoints will receive the event. By default, the event will bubble up the DOM hierarchy.</p><p>Any element can listen for the event on the <code>body</code> element. For example, the following element listens for the custom event &quot;status-change&quot; on the <code>body</code> element. That triggers the element to send a GET request to <code>/todos/status</code> which returns the text to include in the paragraph tag. This also occurs when the element is initially loaded because <code>load</code> is also one of the triggers.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>p hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/todos/status"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"load, status-change from:body"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/todo-hono?v=1.1.1" rel="noopener" target="_blank">todo-hono</a>. This uses <a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> and the <a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> framework.</p><h2 id="common-patterns" tabindex="-1">Common Patterns</h2><h3 id="lazy-loading" tabindex="-1">Lazy Loading</h3><p>When displaying content that is expensive to acquire, it is useful to wait to request it until the rest of the page has loaded or until the part of the page that will display it scrolls into view. That can be done using <code>hx-trigger=&quot;load&quot;</code> or <code>hx-trigger=&quot;revealed&quot;</code>.</p><p>For example:</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>table hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/weather/forecast"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"revealed"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span></code></pre><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/lazy-load?v=1.1.1" rel="noopener" target="_blank">lazy-load</a>.</p><p><img alt="htmx Lazy Loading" style="width: 70%" src="/blog/assets/htmx-lazy-loading.png?v=1.1.1"></p><p>The following HTML appears near the bottom of the page so it is out of view when the page is first loaded.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>h2<span class="token operator">></span>Users<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><br><span class="token operator">&lt;</span>div<br>  hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/users"</span><br>  hx<span class="token operator">-</span>indicator<span class="token operator">=</span><span class="token string">".htmx-indicator"</span><br>  hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"revealed"</span><br><span class="token operator">/</span><span class="token operator">></span><br><span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">"loading..."</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"htmx-indicator"</span> src<span class="token operator">=</span><span class="token string">"/spinner.gif"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>The following code defines the <code>/users</code> endpoint which returns an HTML <code>table</code> containing user data.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  Bun<span class="token punctuation">.</span><span class="token function">sleepSync</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// simulates long-running query</span><br>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>table<span class="token operator">></span><br>      <span class="token operator">&lt;</span>thead<span class="token operator">></span><br>        <span class="token operator">&lt;</span>tr<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span><span class="token constant">ID</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span>Email<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>          <span class="token operator">&lt;</span>th<span class="token operator">></span>Company<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span><br>      <span class="token operator">&lt;</span>tbody<span class="token operator">></span><br>        <span class="token punctuation">{</span>users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>tr<span class="token operator">></span><br>            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>email<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>            <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>company<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="input-validation-with-api-calls" tabindex="-1">Input Validation with API calls</h3><p>Some input validation must be performed on the server. For example, when validating setup of a new user that is identified by their email address, it is common to verify that the provided email address is not already in use by an existing user. This can be done as the user types instead of waiting for the <code>form</code> to be submitted.</p><p>The following HTML validates an email address as it is typed. The &quot;/email-validate&quot; endpoint returns an empty string when the email address is not in use or the message &quot;email in use&quot;. The returned string is used at the content of the <code>span</code> element that follows the <code>input</code> element.</p><p><img alt="htmx Input Validation" style="width: 50%" src="/blog/assets/htmx-input-validation.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span><br>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-get</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/email-validate<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#email-error<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keyup changed delay:200ms<span class="token punctuation">"</span></span><br>  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><br>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email-error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/email-validation?v=1.1.1" rel="noopener" target="_blank">email-validation</a>.</p><h3 id="deleting-an-element" tabindex="-1">Deleting an Element</h3><p>Sometimes the result of sending a request to an endpoint should be deleting the element that triggered the request. For example, in a todo app clicking a button to delete a todo needs to send an HTTP request so the todo can be deleted on the server. Then the row describing the todo should be removed from the DOM.</p><p>The following HTML can be used to describe each todo. Note the use of <code>hx-swap=&quot;outerHTML&quot;</code> and <code>hx-target=&quot;closest div&quot;</code> on the <code>button</code> element. With those in place, the HTML returned by the <code>/todo/${id}</code> endpoint will replace the <code>div</code> that contains the <code>button</code>. That endpoint deletes the todo from the collection of todos on the server and returns nothing, effectively deleting that <code>div</code>.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"todo-item"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>input<br>    type<span class="token operator">=</span><span class="token string">"checkbox"</span><br>    checked<span class="token operator">=</span><span class="token punctuation">{</span>isCompleted<span class="token punctuation">}</span><br>    hx<span class="token operator">-</span>patch<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/toggle-complete</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>    hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML"</span><br>    hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"closest div"</span><br>  <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token punctuation">{</span>isCompleted <span class="token operator">?</span> <span class="token string">'completed'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>description<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token operator">&lt;</span>button<br>    <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"plain"</span><br>    hx<span class="token operator">-</span>confirm<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Really delete "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>    hx<span class="token operator">-</span><span class="token keyword">delete</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>    hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML"</span><br>    hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"closest div"</span><br>  <span class="token operator">></span><br>    🗑<br>  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/todo-hono?v=1.1.1" rel="noopener" target="_blank">todo-hono</a>. This uses <a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> and the <a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> framework.</p><p><img alt="htmx Todo App" style="width: 50%" src="/blog/assets/htmx-todo-app.png?v=1.1.1"></p><h3 id="css-transitions" tabindex="-1">CSS Transitions</h3><p>When htmx swaps HTML into the DOM it does the following:</p><ul><li>Add the <code>htmx-swapping</code> CSS class to the target element.</li><li>Delay for a short time (<code>htmx.config.defaultSwapDelay</code> defaults to 0).</li><li>Remove the <code>htmx-swapping</code> CSS class to the target element.</li><li>Add the <code>htmx-settling</code> CSS class to the target element.</li><li>Create a DOM element representing the new HTML and add the CSS class <code>htmx-added</code> to it.</li><li>Swap the new DOM element into the DOM, either replacing the target or placing it relative to the target,</li><li>Delay for a short time (<code>htmx.config.defaultSettleDelay</code> defaults to 20ms).</li><li>Remove the <code>htmx-added</code> CSS class from the new DOM element.</li><li>Remove the <code>htmx-settling</code> CSS class from the target element.</li></ul><p>The delays described above enable adding CSS transitions.</p><p>Two things are required to implement a CSS transition. First, the existing element and the new element must have the same <code>id</code> attribute value. This is referred to as having a &quot;stable id&quot;. Second, the <code>swap</code> delay should be set to the same duration as the CSS transition. For example, <code>hx-swap=&quot;outerHTML swap:1s&quot;</code>.</p><p>The todo list app described in the previous section fades out the row of a todo before deleting it.</p><p>The following CSS is added to describe the desired transition.</p><pre class="language-css"><code class="language-css"><span class="token selector">.todo-item.htmx-swapping</span> <span class="token punctuation">{</span><br>  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-out<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The <code>hx-swap</code> attribute on the delete button is modified to increase the delay between adding the <code>htmx-swapping</code> CSS class to the target and removing it. The target in this case is the element that represents the todo row and contains the delete button. This delays actually removing the target until the CSS transition has time to complete.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button<br>  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"plain"</span><br>  hx<span class="token operator">-</span>confirm<span class="token operator">=</span><span class="token string">"Are you sure?"</span><br>  hx<span class="token operator">-</span><span class="token keyword">delete</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>  hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML swap:1s"</span><br>  hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"closest div"</span><br><span class="token operator">></span><br>  🗑<br><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><p>In a similar way, the delay between adding the <code>htmx-settling</code> CSS class to the target and removing it can be modified by adding the modifier <code>settle:{time}</code>.</p><p>To fade content into view, no <code>settle</code> delay is need. Suppose the new content has the CSS class <code>new-content</code>. The following CSS are rules are all that is required to fade it into view.</p><pre class="language-css"><code class="language-css"><span class="token selector">.new-content.htmx-added</span> <span class="token punctuation">{</span><br>  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.new-content</span> <span class="token punctuation">{</span><br>  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-in<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>For another example of using a CSS transition, see the working project <a href="https://github.com/mvolkmann/htmx-examples/tree/main/progress-bar?v=1.1.1" rel="noopener" target="_blank">progress-bar</a>. This repeatedly renders an element with a fixed <code>id</code> value and achieves smooth animation using a CSS transition.</p><h3 id="resetting-a-form" tabindex="-1">Resetting a Form</h3><p>Often it is desirable to reset a <code>form</code> after a successful submit. This can be done by calling <code>this.reset()</code> where <code>this</code> refers to the <code>form</code>.</p><p>Checking the request path is needed if any of the inputs can also send requests, perhaps for validation.</p><p>To specify code to run after a request has been sent and a response has been received, use the <code>hx-on:htmx:after-request</code> attribute. When using JSX, we can avoid cluttering the <code>form</code> element by using attribute spreading. Another reason to use this is because VS Code does not recognize <code>hx-on:htmx:after-request</code> as a valid attribute name.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> reset <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token string-property property">'hx-on:htmx:after-request'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    if (event.detail.pathInfo.requestPath === '/account' &amp;&amp;<br>      event.detail.successful) this.reset()</span><span class="token template-punctuation string">`</span></span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">return</span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span><span class="token operator">></span><br>    <span class="token operator">...</span><br>    <span class="token operator">&lt;</span>form hx<span class="token operator">-</span>post<span class="token operator">=</span><span class="token string">"/account"</span> hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#result"</span> <span class="token punctuation">{</span><span class="token operator">...</span>reset<span class="token punctuation">}</span><span class="token operator">></span><br>      <span class="token punctuation">{</span><span class="token comment">/* Add form inputs here.<br>          HTML form validation will not work<br>          if the hx-post attribute is moved<br>          from the form to this button. */</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span>button<span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"result"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">...</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="active-search" tabindex="-1">Active Search</h3><p>Htmx can be used to implement an active search where a list of matching data is retrieved as the user enters search text. The following code demonstrates this. It uses Tailwind CSS classes. The full project can be found in <a href="https://github.com/mvolkmann/bun-examples/tree/main/active-search?v=1.1.1" rel="noopener" target="_blank">GitHub</a>.</p><p>In particular, see the <code>hx-</code> attributes on the <code>input</code> element below.</p><p><img alt="htmx Active Search" style="width: 30%" src="/blog/assets/htmx-active-search.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Context<span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> type <span class="token punctuation">{</span><span class="token constant">FC</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/jsx'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Serve static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token literal-property property">names</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">'Amanda'</span><span class="token punctuation">,</span><br>  <span class="token string">'Gerri'</span><span class="token punctuation">,</span><br>  <span class="token string">'Jeremy'</span><span class="token punctuation">,</span><br>  <span class="token string">'Mark'</span><span class="token punctuation">,</span><br>  <span class="token string">'Meghan'</span><span class="token punctuation">,</span><br>  <span class="token string">'Pat'</span><span class="token punctuation">,</span><br>  <span class="token string">'RC'</span><span class="token punctuation">,</span><br>  <span class="token string">'Richard'</span><span class="token punctuation">,</span><br>  <span class="token string">'Tami'</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token literal-property property">Layout</span><span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>html<span class="token operator">></span><br>    <span class="token operator">&lt;</span>head<span class="token operator">></span><br>      <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token constant">HTMX</span> Active Search<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>      <span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string">"/tailwind.css"</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.9"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>body <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"p-8"</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>Layout<span class="token operator">></span><br>      <span class="token operator">&lt;</span>main<span class="token operator">></span><br>        <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"font-bold mr-4"</span> <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span><br>          Name<br>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>        <span class="token operator">&lt;</span>input<br>          autofocus<br>          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"border border-gray-500 p-1 rounded-lg"</span><br>          hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"keyup changed delay:200ms"</span><br>          hx<span class="token operator">-</span>post<span class="token operator">=</span><span class="token string">"/search"</span><br>          hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#matches"</span><br>          hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"innerHTML"</span><br>          name<span class="token operator">=</span><span class="token string">"name"</span><br>          size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span><br>        <span class="token operator">/</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">"matches"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/search'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> lowerName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> matches <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=></span> n<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>lowerName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span><span class="token operator">></span><br>      <span class="token punctuation">{</span>matches<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><h3 id="optimistic-updates" tabindex="-1">Optimistic Updates</h3><p>If an endpoint might be slow to return a response, using <code>hx-indicator</code> to display a spinner is a good idea. Alternatively, the front end can assume success and update the UI optimistically. For example, clicking a &quot;like&quot; button can immediately change its color to a muted version of the color that will be used when the response is received. If the response indicates success, the color can be changed to the full color. If the response indicates failure, the color can be reset.</p><p>TODO: Add an example of this.</p><h3 id="pagination" tabindex="-1">Pagination</h3><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/pagination?v=1.1.1" rel="noopener" target="_blank">pagination</a>.</p><p>This example initially renders the following HTML which includes the initial <code>table</code>, loaded with the first &quot;page&quot; of rows. It also includes a row containing the pagination buttons and a loading spinner that is only displayed when waiting on an HTTP response.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><br>  <span class="token attr-name">hx-indicator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.htmx-indicator<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>load<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-get</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pokemon-rows?page=1<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination-row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination-buttons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading...<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx-indicator<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/spinner.gif<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>The &quot;pokemon-rows&quot; endpoint returns the following JSX in order to replace the <code>table</code> with one containing a new set of rows. It also returns new pagination buttons that replace the current ones using the <code>hx-swap-oob</code> attribute.</p><pre class="language-js"><code class="language-js"><span class="token keyword">return</span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>table id<span class="token operator">=</span><span class="token string">"pokemon-table"</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>tr<span class="token operator">></span><br>        <span class="token operator">&lt;</span>th<span class="token operator">></span><span class="token constant">ID</span><span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>        <span class="token operator">&lt;</span>th<span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>        <span class="token operator">&lt;</span>th<span class="token operator">></span>Description<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>      <span class="token punctuation">{</span>pokemonList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pokemon<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> isLast <span class="token operator">=</span> index <span class="token operator">===</span> <span class="token constant">ROWS_PER_PAGE</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> <span class="token function">TableRow</span><span class="token punctuation">(</span>pageNumber<span class="token punctuation">,</span> pokemon<span class="token punctuation">,</span> isLast<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span><br><br>    <span class="token punctuation">{</span><span class="token comment">/* The hx-indicator and hx-target attributes are<br>        inherited by the buttons inside this span. */</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span>span<br>      id<span class="token operator">=</span><span class="token string">"pagination-buttons"</span><br>      hx<span class="token operator">-</span>swap<span class="token operator">-</span>oob<span class="token operator">=</span><span class="token string">"true"</span><br>      hx<span class="token operator">-</span>indicator<span class="token operator">=</span><span class="token string">".htmx-indicator"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#pokemon-table"</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>button<br>        disabled<span class="token operator">=</span><span class="token punctuation">{</span>pageNumber <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">}</span><br>        hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pokemon-rows?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>      <span class="token operator">></span><br>        Previous<br>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>      <span class="token operator">&lt;</span>button hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pokemon-rows?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">></span>Next<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img alt="htmx Pagination" style="width: 30%" src="/blog/assets/htmx-pagination.png?v=1.1.1"></p><h3 id="infinite-scroll" tabindex="-1">Infinite Scroll</h3><p>See the working example project at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/infinite-scroll?v=1.1.1" rel="noopener" target="_blank">infinite-scroll</a>.</p><p>This example renders the following HTML which includes a <code>table</code> and a loading spinner that is only displayed when waiting on an HTTP response. It includes <code>hx-trigger=&quot;load&quot;</code> in order to immediately send a request to get the first &quot;page&quot; of rows.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><br>  <span class="token attr-name">hx-trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>load<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-get</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pokemon-rows?page=1<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-indicator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.htmx-indicator<span class="token punctuation">"</span></span><br>  <span class="token attr-name">hx-swap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beforeend<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>Description<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading...<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>htmx-indicator<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/spinner.gif<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>The &quot;pokemon-rows&quot; endpoint returns the following JSX in order to append the next set of rows to the <code>table</code>.</p><pre class="language-js"><code class="language-js"><span class="token keyword">return</span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span><span class="token operator">></span><br>    <span class="token punctuation">{</span>pokemonList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pokemon<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> isLast <span class="token operator">=</span> index <span class="token operator">===</span> <span class="token constant">ROWS_PER_PAGE</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span> <span class="token function">TableRow</span><span class="token punctuation">(</span>pageNumber<span class="token punctuation">,</span> pokemon<span class="token punctuation">,</span> isLast<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following code is definition of the <code>TableRow</code> function which returns a single table row. This follows the convention where functions that return JSX should be treated as components and have names begin uppercase. The <code>isLast</code> parameter is used to determine whether <code>hx-*</code> attributes will be included in the <code>tr</code> element. The <code>hx-trigger</code> attribute causes a request for the next &quot;page&quot; of rows to be sent whenever the <code>tr</code> becomes visible (<code>revealed</code>).</p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">TableRow</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">page</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">pokemon</span><span class="token operator">:</span> Pokemon<span class="token punctuation">,</span> <span class="token literal-property property">isLast</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> attributes <span class="token operator">=</span> isLast<br>    <span class="token operator">?</span> <span class="token punctuation">{</span><br>        <span class="token string-property property">'hx-trigger'</span><span class="token operator">:</span> <span class="token string">'revealed'</span><span class="token punctuation">,</span><br>        <span class="token string-property property">'hx-get'</span><span class="token operator">:</span> <span class="token string">'/pokemon-rows?page='</span> <span class="token operator">+</span> <span class="token punctuation">(</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token string-property property">'hx-indicator'</span><span class="token operator">:</span> <span class="token string">'.htmx-indicator'</span><span class="token punctuation">,</span><br>        <span class="token string-property property">'hx-swap'</span><span class="token operator">:</span> <span class="token string">'afterend'</span><br>      <span class="token punctuation">}</span><br>    <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> url<span class="token punctuation">}</span> <span class="token operator">=</span> pokemon<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> id <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 7th part of the URL</span><br>  <span class="token keyword">const</span> imageUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>tr <span class="token punctuation">{</span><span class="token operator">...</span>attributes<span class="token punctuation">}</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>      <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>      <span class="token operator">&lt;</span>td<span class="token operator">></span><br>        <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> src<span class="token operator">=</span><span class="token punctuation">{</span>imageUrl<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p><img alt="htmx Infinite Scroll" style="width: 30%" src="/blog/assets/htmx-infinite-scroll.png?v=1.1.1"></p><h3 id="toggling-selection" tabindex="-1">Toggling Selection</h3><p>When there is a collection of items where only one can be selected at a time, the pattern below can be used. See the comments in the code.</p><p>This code uses TypeScript and the <a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> framework, but the same pattern can be applied with other languages and libraries.</p><p><img alt="htmx Toggling Selection" style="width: 60%" src="/blog/assets/htmx-toggling-selection.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> type <span class="token punctuation">{</span>Context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> type <span class="token punctuation">{</span><span class="token constant">FC</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/jsx'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This serves static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> dogs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Comet'</span><span class="token punctuation">,</span> <span class="token string">'Maisey'</span><span class="token punctuation">,</span> <span class="token string">'Oscar'</span><span class="token punctuation">,</span> <span class="token string">'Ramsay'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token literal-property property">Layout</span><span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>head<span class="token operator">></span><br>      <span class="token operator">&lt;</span>title<span class="token operator">></span>Toggle Selection<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>      <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>script<br>        src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><br>        integrity<span class="token operator">=</span><span class="token string">"sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC"</span><br>        crossorigin<span class="token operator">=</span><span class="token string">"anonymous"</span><br>      <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>  c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>Layout<span class="token operator">></span><br>      <span class="token punctuation">{</span>dogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">dog</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>        <span class="token comment">// The Dog component is defined below.</span><br>        <span class="token operator">&lt;</span>Dog name<span class="token operator">=</span><span class="token punctuation">{</span>dog<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><br>  <span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This holds the name of the one selected dog.</span><br><span class="token keyword">let</span> selectedName <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>type DogProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">:</span> DogProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// The CSS class "selected" is only added for the selected dog.</span><br>  <span class="token comment">// It changes the background color to cornflowerblue.</span><br>  <span class="token keyword">const</span> classes <span class="token operator">=</span> <span class="token string">'dog'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> selectedName <span class="token operator">?</span> <span class="token string">' selected'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// All swaps for these divs are performed out-of-band.</span><br>  <span class="token comment">// This is why hx-swap is set to none.</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>div<br>      <span class="token keyword">class</span><span class="token operator">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">}</span><br>      hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/toggle/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><br>      hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"none"</span><br>      hx<span class="token operator">-</span>swap<span class="token operator">-</span>oob<span class="token operator">=</span><span class="token string">"true"</span><br>      hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"click"</span><br>      id<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token punctuation">{</span>name<span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/toggle/:name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> name <span class="token operator">=</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> previousDog <span class="token operator">=</span> selectedName <span class="token operator">?</span> <span class="token operator">&lt;</span>Dog name<span class="token operator">=</span><span class="token punctuation">{</span>selectedName<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> thisDog <span class="token operator">=</span> <span class="token operator">&lt;</span>Dog name<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span><br>  selectedName <span class="token operator">=</span> name <span class="token operator">===</span> selectedName <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> name<span class="token punctuation">;</span><br><br>  <span class="token comment">// If a dog was previously selected, two Dog components are returned.</span><br>  <span class="token comment">// Otherwise only one is returned.</span><br>  <span class="token comment">// Both will have hx-swap-oob set to true.</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span><span class="token operator">></span><br>      <span class="token punctuation">{</span>previousDog<span class="token punctuation">}</span><br>      <span class="token punctuation">{</span>thisDog<span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><h3 id="polling" tabindex="-1">Polling</h3><p>Polling is a way to repeatedly update the UI using server data. Two polling approaches supported by htmx are &quot;fixed rate polling&quot; and &quot;load polling&quot;.</p><h4 id="fixed-rate-polling" tabindex="-1">Fixed Rate Polling</h4><p>Fixed rate polling sends requests at regular intervals.</p><p>See the working example of fixed rate polling at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/fixed-rate-polling?v=1.1.1" rel="noopener" target="_blank">fixed-rate-polling</a>.</p><p>This example renders the following HTML which reports the current score of an NFL game. Score updates are randomly generated every five seconds.</p><p>An endpoint can terminate fixed rate polling by returning a status code of 286 which is not a standard code. This is done when the score of either team exceeds 30.</p><p><img alt="htmx Fixed Rate Polling" style="width: 30%" src="/blog/assets/htmx-fixed-rate-polling.png?v=1.1.1"></p><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>BaseHtml<span class="token operator">></span><br>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Polling<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>      <span class="token punctuation">{</span><span class="token comment">/* Send a request to the /score endpoint<br>          immediately and every five seconds thereafter. */</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span>h2 hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/score"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"load, every 5s"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>BaseHtml<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> chiefsHaveBall <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> bills <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> chiefs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token comment">// Randomly get points for a touchdown, field goal, or nothing.</span><br><span class="token keyword">function</span> <span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> number <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> touchdown <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> fieldGoal <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> number <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> touchdown <span class="token operator">:</span> number <span class="token operator">>=</span> <span class="token number">5</span> <span class="token operator">?</span> fieldGoal <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/score'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>chiefsHaveBall<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    chiefs <span class="token operator">+=</span> <span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    bills <span class="token operator">+=</span> <span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  chiefsHaveBall <span class="token operator">=</span> <span class="token operator">!</span>chiefsHaveBall<span class="token punctuation">;</span><br>  <span class="token comment">// Returning a status of 286 terminates fixed rate polling.</span><br>  c<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>chiefs <span class="token operator">></span> <span class="token number">30</span> <span class="token operator">||</span> bills <span class="token operator">></span> <span class="token number">30</span> <span class="token operator">?</span> <span class="token number">286</span> <span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Chiefs: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chiefs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Bills: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bills<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="load-polling" tabindex="-1">Load Polling</h4><p>Load polling sends a single request and then sends another after the HTML response from the previous request is loaded.</p><p>See the working example of load polling at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/progress-bar?v=1.1.1" rel="noopener" target="_blank">progress-bar</a>. This also demonstrates repeatedly rendering an element with a fixed <code>id</code> value and achieving smooth animation using a CSS transition.</p><p><img alt="htmx Load Polling" style="width: 100%" src="/blog/assets/htmx-load-polling.png?v=1.1.1"></p><p>The following HTML renders a progress bar.</p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">ProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// The HTML progress element cannot be animated.</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>div<br>      id<span class="token operator">=</span><span class="token string">"progress-container"</span><br>      hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/progress"</span><br>      hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML"</span><br>      hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token punctuation">{</span>percentComplete <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token operator">?</span> <span class="token string">'load delay:1s'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><br>      role<span class="token operator">=</span><span class="token string">"progressbar"</span><br>      aria<span class="token operator">-</span>valuenow<span class="token operator">=</span><span class="token punctuation">{</span>percentComplete<span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"progress-text"</span><span class="token operator">></span><span class="token punctuation">{</span>percentComplete<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token punctuation">{</span><span class="token comment">/* This div MUST have an id in order for the transition to work! */</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"progress-bar"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>percentComplete<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The following endpoint renders the initial progress bar and button to reset it.</p><p>The <code>/progress</code> endpoint can be triggered in two ways, from the <code>div</code> with <code>id=&quot;progress-container&quot;</code> above or from the <code>button</code> with <code>id=&quot;reset-btn&quot;</code> below. The <code>div</code> above only triggers the endpoint if <code>percentComplete</code> has not yet reached 100. If that is the case, it waits one second before triggering it.</p><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>BaseHtml<span class="token operator">></span><br>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Progress Bar<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>      <span class="token operator">&lt;</span>ProgressBar <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button<br>        id<span class="token operator">=</span><span class="token string">"reset-btn"</span><br>        hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/progress"</span><br>        hx<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"outerHTML"</span><br>        hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#progress-container"</span><br>      <span class="token operator">></span><br>        Reset<br>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>BaseHtml<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The value of the <code>HX-Trigger</code> HTTP request header is the value of the <code>id</code> attribute of the element that triggered the request. The following endpoint updates the progress bar. It checks the <code>HX-Trigger</code> request header to determine if the endpoint was triggered by the Reset button.</p><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/progress'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>headers<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Header names are converted to lowercase.</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token string">'hx-trigger'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'reset-btn'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    percentComplete <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> delta <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">;</span><br>    percentComplete <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> percentComplete <span class="token operator">+</span> delta<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>ProgressBar <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following CSS styles the parts of the progress bar and defines a <code>linear</code> <code>transition</code> for the <code>width</code> of the filled portion of the progress bar.</p><pre class="language-css"><code class="language-css"><span class="token selector">#progress-container</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> lightgray<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid black<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 50rem<span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* This centers the value text on the progress bar. */</span><br><span class="token selector">#progress-text</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#progress-bar</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 0%<span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> width 1s linear<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">#reset-btn</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="adding-header-to-all-requests" tabindex="-1">Adding Header to All Requests</h3><p>In some cases it is desirable to add a specific HTTP header to all requests send by htmx. For example, an authentication token can be passed in a header named &quot;X-Token&quot;. This can be done by adding an event listener for the <code>htmx:configRequest</code> event as follows.</p><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'htmx:configRequest'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'X-Token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'some-token'</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In addition, request parameters can be added by adding properties to the <code>event.detail.parameters</code> object. Parameters can also be removed or modified, but that seems less useful. The values of <code>event.detail.target</code> and <code>event.detail.verb</code> can also be modified, but both seem like odd things to do.</p><p>See the working example at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/token-header?v=1.1.1" rel="noopener" target="_blank">token-header</a>.</p><h3 id="click-to-edit" tabindex="-1">Click to Edit</h3><p>In apps that display a list of items (such as Todo List), it may be desirable to allow users to initiate editing text associated with one of the items (such as a todo description) by clicking the text. The following are the steps that can support this.</p><ul><li>Hide the static text.</li><li>Show an HTML <code>input</code> element that initially contains the current value.</li><li>Allow the user to modify the value of that <code>input</code>.</li><li>When the enter key is pressed or focus is moved out of the <code>input</code>, send the change to an endpoint that saves the change.</li><li>The endpoint returns updated HTML for the entire item, including the new text.</li><li>Replace the previous item HTML with the new item HTML.</li><li>Hide the HTML <code>input</code>.</li><li>Show the static text.</li></ul><p>While this pattern can be implementing using only htmx, it can be implemented more efficiently by adding the use of AlpineJS.</p><p>Typically it is desirable for only one item to be edited at a time. If text of a different item is clicked, the <code>input</code> for the previously selected item should revert to displaying the text. This can be implemented by keeping track of the id of the item currently being edited in client-side state using the Alpine <code>x-data</code> directive.</p><p>In the the Todo List scenario, the UI for each todo item can be comprised of a checkbox, the text description, a text <code>input</code> for modifying the description, and a button for deleting the todo item. While both a text description AND a text <code>input</code> are present in the DOM, at any point in time only one of them should be rendered. The other will have the CSS property <code>display: none</code> applied to it.</p><p>See the working example at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/todo-hono?v=1.1.1" rel="noopener" target="_blank">todo-hono</a>. This uses <a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> and the <a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> framework.</p><p><img alt="htmx Todo App" style="width: 50%" src="/blog/assets/htmx-todo-app.png?v=1.1.1"></p><p>The Alpine directives <code>x-bind</code>, <code>x-data</code>, <code>x-on</code>, and <code>x-show</code> are used in <code>src/components.tsx</code>. Look for references to <code>editingId</code> in that file. This is an example of state that only belongs in the client.</p><h3 id="dynamic-endpoints" tabindex="-1">Dynamic Endpoints</h3><p>There are several ways for the URL that is associated with an htmx attribute like <code>hx-get</code> to be dynamic. It can, for example, change whenever the value of an Alpine variable changes.</p><p>The three approaches shown below all uses the following UI.</p><p><img alt="htmx dynamic endpoint" style="width: 50%" src="/blog/assets/htmx-dynamic-endpoint.png?v=1.1.1"></p><p>The following code implements the server and the endpoint that will be invoked by <code>hx-get</code>. It uses Bun and the Hono framework. The same server code is used for all three client approaches that will be shown.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>type Context<span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Serve static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/time/:count'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> count <span class="token operator">=</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The count at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p>In the first client approach, the Alpine directives <code>x-effect</code> and <code>x-bind</code> (with shorthand syntax <code>:</code>) are used. The JavaScript code that is the value of the <code>x-effect</code> directive is reevaluated every time any Alpine variable it uses changes. When the value of the Alpine variable <code>count</code> changes, the <code>hx-process</code> function is called to re-process the current element. The syntax <code>:hx-get</code> means that the value will be recomputed every time the element is processed.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>htmx Demo<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script<br>      defer<br>      src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"</span><br>    <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body x<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string">"{count: 0}"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>button<br>      <span class="token operator">:</span>hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"`/time/${count}`"</span><br>      x<span class="token operator">-</span>effect<span class="token operator">=</span><span class="token string">"count; htmx.process($el)"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#time"</span><br>    <span class="token operator">></span><br>      Get Time<br>    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"time"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"counter"</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button x<span class="token operator">-</span>bind<span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"count &lt;= 0"</span> x<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"count--"</span><span class="token operator">></span>Less<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"count"</span> x<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"count"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span>button x<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"count++"</span><span class="token operator">></span>More<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>Two more client approaches are shown below, but the approach above is the simplest.</p><p>Another client approach is to listen for the <code>htmx:configRequest</code> event. This provides a way to modify the URL used by <code>hx-get</code> before a request is sent:</p><p>The following code demonstrates using the text content of an element that is set by Alpine to determine the URL to use for a GET request. Note how the <code>hx-get</code> attribute has no value. It is supplied by setting <code>event.detail.path</code> in the <code>setPath</code> function which is invoked just before the request is sent. Also note the event name used with <code>hx-on</code> which must be <code>htmx-config-request</code> rather than <code>htmx:configRequest</code>.</p><p>The parts of the code that are identical to the previous client example are omitted.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">...</span><br>    <span class="token operator">&lt;</span>script<span class="token operator">></span><br>      <span class="token keyword">function</span> <span class="token function">setPath</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span><br>        event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token string">"/time/"</span> <span class="token operator">+</span> count<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body x<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string">"{count: 0}"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>button<br>      hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">""</span><br>      hx<span class="token operator">-</span>on<span class="token operator">:</span>htmx<span class="token operator">-</span>config<span class="token operator">-</span>request<span class="token operator">=</span><span class="token string">"setPath(event)"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#time"</span><br>    <span class="token operator">></span><br>      Get Time<br>    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">...</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>The client approach above relies on extracting a text value from the DOM in order to get the current &quot;count&quot; value. We can use the following approach to avoid relying on the DOM, but it requires a bit more JavaScript code. It maintains the value of <code>count</code> in a JavaScript object that is accessible to the <code>setPath</code> function.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">...</span><br>    <span class="token operator">&lt;</span>script<span class="token operator">></span><br>      <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"alpine:init"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        Alpine<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"myData"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">function</span> <span class="token function">setPath</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/time/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body x<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string">"myData"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>button<br>      hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">""</span><br>      hx<span class="token operator">-</span>on<span class="token operator">:</span>htmx<span class="token operator">-</span>config<span class="token operator">-</span>request<span class="token operator">=</span><span class="token string">"setPath(event)"</span><br>      hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#time"</span><br>    <span class="token operator">></span><br>      Get Time<br>    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">...</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h3 id="html-and-json-endpoints" tabindex="-1">HTML and JSON Endpoints</h3><p>In some cases it is useful to have endpoints that return the same data, but different formats ... such as HTML versus JSON.</p><p>The <a href="https://github.com/mvolkmann/htmx-examples/tree/main/todo-hono?v=1.1.1" rel="noopener" target="_blank">todo-hono</a> app does this for retrieving all the current todos. This uses <a href="/blog/topics/#/blog/bun/" target="_blank">Bun</a> and the <a href="/blog/topics/#/blog/hono/" target="_blank">Hono</a> framework.</p><p>The following code from the file <code>src/index.tsx</code> demonstrates this. Note how the data fetching logic is shared by the HTML and JSON endpoints.</p><pre class="language-js"><code class="language-js"><span class="token comment">// This is used by the endpoints that return JSON and HTML.</span><br><span class="token keyword">function</span> <span class="token function">getAllTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Todo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> getAllTodosQuery<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Todo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This endpoint returns all the todos as HTML.</span><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/todos'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">getAllTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// We could choose between returning JSON and HTML</span><br>  <span class="token comment">// based on the value of the Accept header.</span><br>  <span class="token keyword">const</span> accept <span class="token operator">=</span> c<span class="token punctuation">.</span>req<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'accept'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>accept<span class="token operator">?.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>todos<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>Layout<span class="token operator">></span><br>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>To Do List<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>      <span class="token operator">&lt;</span>p hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/todos/status"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"load, status-change from:body"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>Err <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>TodoForm <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>TodoList todos<span class="token operator">=</span><span class="token punctuation">{</span>todos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This endpoint returns all the todos as JSON.</span><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/todos/json'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">getAllTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>todos<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="http-request-headers" tabindex="-1">HTTP Request Headers</h2><p>HTTP header names are case-insensitive.</p><p>Htmx automatically adds following request headers to all HTTP requests it sends if they are applicable. Code that handles requests can use the values of these headers to determine the appropriate response.</p><table><thead><tr><th>Header</th><th>Description</th></tr></thead><tbody><tr><td><code>HX-Boosted</code></td><td>&quot;true&quot; if the element making request has <code>hx-boost</code> (see <a href="#boosting">Boosting</a>)</td></tr><tr><td><code>HX-Current-Url</code></td><td>current URL in the browser location bar</td></tr><tr><td><code>HX-History-Restore-Request</code></td><td>&quot;true&quot; if the request is for history restoration after a cache miss</td></tr><tr><td><code>HX-Prompt</code></td><td>value user entered in prompt dialog rendered by the <code>hx-prompt</code> attribute</td></tr><tr><td><code>HX-Request</code></td><td>always &quot;true&quot;; identifies requests that come from htmx</td></tr><tr><td><code>HX-Target</code></td><td>value of the &quot;id&quot; attribute of the target element, if an id selector was used</td></tr><tr><td><code>HX-Trigger</code></td><td>value of the &quot;id&quot; attribute of the triggered element, if specified</td></tr><tr><td><code>HX-Trigger-Name</code></td><td>value of the &quot;name&quot; attribute of the triggered event, if specified</td></tr></tbody></table><p>The <code>HX-Current-Url</code>, <code>HX-Target</code>, <code>HX-Trigger</code>, and <code>HX-Trigger-Name</code> headers can all be used in an endpoint to determine the appropriate HTML to send in the response.</p><p>From the htmx documentation on <a href="https://htmx.org/docs/#caching" target="_blank">caching</a>, &quot;If your server can render different content for the same URL depending on some other headers, you need to use the <code>Vary</code> response HTTP header. For example, if your server renders the full HTML when the <code>HX-Request</code> header is missing or <code>false</code>, and it renders a fragment of that HTML when <code>HX-Request: true</code>, you need to add <code>Vary: HX-Request</code>. That causes the cache to be keyed based on a composite of the response URL and the <code>HX-Request</code> request header — rather than being based just on the response URL.&quot;</p><h2 id="http-response-headers" tabindex="-1">HTTP Response Headers</h2><p>HTTP header names are case-insensitive.</p><p>An endpoint can cause a client-side redirection by including the <code>HX-Location</code> response header.</p><p>See the working example at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/redirection?v=1.1.1" rel="noopener" target="_blank">redirection</a>.</p><p>The following endpoint receives a number in the <code>value</code> body property. It doubles the value and returns it. But if the result is more than 10, it includes the <code>HX-Location</code> header set to <code>/page2</code> which causes the browser to redirect to that page.</p><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/process'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>body<span class="token punctuation">,</span> set<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> body<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> doubled <span class="token operator">=</span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>doubled <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> set<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'HX-Location'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'/page2'</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> doubled<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>An endpoint can cause the URL in the browser location bar to change by including the HTTP response header <code>HX-Push-Url</code>.</p><p>An endpoint can cause the browser to refresh the current page by including the HTTP response header <code>HX-Refresh</code>.</p><p>An endpoint can change the target element of its response by including the HTTP response header <code>HX-Retarget</code>.</p><h2 id="components" tabindex="-1">Components</h2><p>One issue with htmx is that it doesn't support defining components in the sense that SPA frameworks like React do. For example, we can't define a &quot;ProgressBar&quot; component and then render it with HTML like <code>&lt;ProgressBar value={value} max={100} /&gt;</code>.</p><p>One solution is to use <a href="/blog/bun" target="_blank">Components</a> which has built-in support for JSX. This enables writing JavaScript functions that act like React components (minus support for hooks and DOM diffing), taking props and returning JSX. Bun can be combined with a server framework like <a href="https://elysiajs.com?v=1.1.1" rel="noopener" target="_blank">Elysia</a>.</p><p>For a potential solution, see <a href="/blog/alpine#components" target="_blank">Components</a>.</p><h2 id="events" tabindex="-1">Events</h2><p>The <a href="https://htmx.org/docs/#hx-on?v=1.1.1" rel="noopener" target="_blank">hx-on</a> attribute supports handling of more types of events than the HTML <code>on*</code> attributes such as <code>onclick</code>. It provides a small subset of the capabilities in <a href="https://alpinejs.dev?v=1.1.1" rel="noopener" target="_blank">Alpine</a> and <a href="https://hyperscript.org?v=1.1.1" rel="noopener" target="_blank">_hyperscript</a> which can be used in place of this attribute.</p><h2 id="validation" tabindex="-1">Validation</h2><p>TODO: Try this.</p><p>The <a href="https://htmx.org/attributes/hx-validate/?v=1.1.1" rel="noopener" target="_blank">hx-validate</a> attribute causes an element to validate itself using the HTML5 Validation API before a request is sent. This occurs by default for <code>form</code> elements, but not for <code>input</code>, <code>textarea</code>, and <code>select</code>elements. When those elements have <code>hx-\*</code> attributes that send an HTTP request, adding <code>hx-validate=&quot;true&quot;</code> causes them to be validated before the request is sent.</p><h2 id="boosting" tabindex="-1">Boosting</h2><p>Anchor (<code>&lt;a&gt;</code>) and <code>form</code> elements that do not have attributes like <code>hx-get</code> or <code>hx-post</code> send HTTP requests to a given URL even when JavaScript is disabled. When an anchor is clicked, a GET request is sent. When a <code>form</code> is submitted, a GET or POST request (depending on the <code>method</code> attribute value) is sent.</p><p>The <a href="https://htmx.org/attributes/hx-boost/?v=1.1.1" rel="noopener" target="_blank">hx-boost</a> attribute can be added to any element. This changes descendant anchor and <code>form</code> elements that do not have attributes like <code>hx-get</code> or <code>hx-post</code> to use AJAX for sending the HTTP request, but only if JavaScript is enabled. For example, <code>hx-boost=&quot;true&quot;</code> can be added to the <code>body</code> element to &quot;boost&quot; all anchor and <code>form</code> elements.</p><p>The advantage boosting is that less processing will be done. Rather than a full page refresh, the body content in the response will replace the body content of the current page and the <code>title</code> in the <code>head</code> tag will replace that in the current <code>head</code>. This avoids processing <code>link</code> and <code>script</code> tags in the <code>head</code> tag of the response which provides a significant performance advantage. Of course this assumes that the current page has already loaded all the CSS and JavaScript that is needed by the new content. The result is faster navigation and a better user experience.</p><p>To disable boosting of specific anchors and forms that are descendants of an element with <code>hx-boost=&quot;true&quot;</code>, add <code>hx-boost=&quot;false&quot;</code> to them.</p><p>Note that many features of htmx will not work if JavaScript is disable.</p><h2 id="other-attributes" tabindex="-1">Other Attributes</h2><ul><li><p><a href="https://htmx.org/attributes/hx-disinherit/?v=1.1.1" rel="noopener" target="_blank">hx-disinherit</a></p></li><li><p><a href="https://htmx.org/attributes/hx-encoding/?v=1.1.1" rel="noopener" target="_blank">hx-encoding</a></p></li><li><p><a href="https://htmx.org/attributes/hx-vals/?v=1.1.1" rel="noopener" target="_blank">hx-vals</a></p><p>This specifies additional, static data to be passed in HTTP requests. The value is string representing a JSON object. For example: <code>hx-vals='{&quot;planet&quot;: &quot;Earth&quot;, &quot;year&quot;: 2024}'</code></p><p>To evaluate JavaScript expressions in the JSON values, add the &quot;js:&quot; prefix to the JSON string. For example: <code>hx-vals='js:{&quot;planet&quot;: &quot;Earth&quot;, &quot;year&quot;: new Date().getFullYear()}'</code></p><p>The values will be passed a query parameters for GET requests and in the request body for all other kinds of requests.</p><p>See the working example project that uses <code>hx-vals</code> at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/non-form-submit?v=1.1.1" rel="noopener" target="_blank">non-form-submit</a>.</p></li><li><p><a href="https://htmx.org/attributes/hx-vars/?v=1.1.1" rel="noopener" target="_blank">hx-vars</a></p></li></ul><h2 id="javascript-api" tabindex="-1">JavaScript API</h2><p>In addition to supporting many new HTML attributes, htmx also provides a small JavaScript API. This is a set of JavaScript functions that are defined as properties on the global <code>htmx</code> object.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>htmx.addClass</code></td><td>adds a CSS class to a given HTML element</td></tr><tr><td><code>htmx.ajax</code></td><td>sends an HTTP request and inserts the HTML response</td></tr><tr><td><code>htmx.closest</code></td><td>finds the closest ancestor element that matches a CSS selector</td></tr><tr><td><code>htmx.config</code></td><td>object that holds htmx configuration options</td></tr><tr><td><code>htmx.createEventSource</code></td><td>creates a Server-Sent Event (SSE) source</td></tr><tr><td><code>htmx.createWebSocket</code></td><td>creates a new WebSocket</td></tr><tr><td><code>htmx.defineExtension</code></td><td>defines a new htmx extension</td></tr><tr><td><code>htmx.find</code></td><td>finds one element that matches a CSS selector</td></tr><tr><td><code>htmx.findAll</code></td><td>finds all elements that match a CSS selector</td></tr><tr><td><code>htmx.logAll</code></td><td>logs all htmx events for debugging</td></tr><tr><td><code>htmx.logNone</code></td><td>disables logging of htmx events</td></tr><tr><td><code>htmx.logger</code></td><td>holds the function used to log htmx events; can change</td></tr><tr><td><code>htmx.off</code></td><td>removes an event listener from an element</td></tr><tr><td><code>htmx.on</code></td><td>adds an event listener to an element</td></tr><tr><td><code>htmx.onLoad</code></td><td>specifies a function to call when the <code>htmx:load</code> event is dispatched</td></tr><tr><td><code>htmx.parseInterval</code></td><td>returns the milliseconds represented by a time string (ex. 2s)</td></tr><tr><td><code>htmx.process</code></td><td>processes the htmx attributes in a newly added element</td></tr><tr><td><code>htmx.remove</code></td><td>removes an element from the DOM</td></tr><tr><td><code>htmx.removeClass</code></td><td>removes a CSS class from an element</td></tr><tr><td><code>htmx.removeExtension</code></td><td>removes an extension from htmx</td></tr><tr><td><code>htmx.takeClass</code></td><td>modifies all sibling elements so only one has a given CSS class</td></tr><tr><td><code>htmx.toggleClass</code></td><td>toggles the presence of a CSS class on an element</td></tr><tr><td><code>htmx.trigger</code></td><td>triggers an event on an element</td></tr><tr><td><code>htmx.values</code></td><td>returns the input values present on a given element such as a <code>form</code></td></tr></tbody></table><p>The <code>hx-get</code>, <code>hx-post</code>, <code>hx-put</code>, <code>hx-patch</code>, and <code>hx-delete</code> attribute send an HTTP request when the element they are on is &quot;triggered&quot;. The <code>htmx.ajax</code> function is similar, but enables conditionally sending an HTTP request based on something other than user triggering.</p><p>The following code from the file <code>public/index.html</code> renders a UI with a <code>button</code> that can be clicked to conditionally send an HTTP request and a <code>div</code> to display the result of the HTTP request.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>Programmatic <span class="token constant">AJAX</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"utils.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>Programmatic <span class="token constant">AJAX</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>    <span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">"maybeSend()"</span><span class="token operator">></span>Send<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"result"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>The following code from the file <code>public/utils.js</code> defines a function that imposes a quota on the number of times an HTTP request can be sent to a specified endpoint.</p><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> quota <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">maybeSend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>quota <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    quota<span class="token operator">--</span><span class="token punctuation">;</span><br>    htmx<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/result'</span><span class="token punctuation">,</span> <span class="token string">'#result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    result<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'The call quota has been reached.'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following code from the file <code>src/index.js</code> defines a function that imposes a quota on the number of times an HTTP request can be sent to a specified endpoint.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> type <span class="token punctuation">{</span>Context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This serves static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/result'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  count<span class="token operator">++</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result #</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p>The following screenshot shows the UI after the first button click.</p><p><img alt="htmx ajax function" style="width: 50%" src="/blog/assets/htmx-ajax-function-1.png?v=1.1.1"></p><p>The following screenshot shows the UI after the fourth button click.</p><p><img alt="htmx ajax function" style="width: 50%" src="/blog/assets/htmx-ajax-function-4.png?v=1.1.1"></p><p>See <a href="https://htmx.org/api/#ajax" target="_blank">htmx-ajax</a> for details on the arguments that can be passed to this function.</p><h2 id="debugging" tabindex="-1">Debugging</h2><p>To cause htmx to log all the actions it performs to the browser DevTools console, create a JavaScript file with a name like <code>setup.js</code> containing the following:</p><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'htmx:load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  htmx<span class="token punctuation">.</span><span class="token function">logAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setup.js: logging enabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Then add the following <code>script</code> tag to the base HTML used by all the pages.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>setup.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>A single interaction with an element that triggers an HTTP request will cause a lot of debugging output, perhaps too much to be useful. For example:</p><pre class="language-text"><code class="language-text">htmx:xhr:progress ...<br>htmx:beforeOnLoad ...<br>htmx:beforeRequest ...<br>htmx:beforeSwap ...<br>htmx:afterSwap ...<br>htmx:afterRequest ...<br>htmx:afterOnLoad ...<br>htmx:xhr:loadend ...<br>htmx:afterSettle ...</code></pre><p>We can listen for these events and execute JavaScript code when they occur.</p><p>From the <code>hx-on</code> documentation, &quot;DOM attributes do not preserve case. This means an attribute like <code>hx-on:htmx:beforeRequest</code> will not work, because the DOM lowercases the attribute names. Fortunately, htmx supports both camel case event names and also kebab-case event names, so you can use <code>hx-on:htmx:before-request</code> instead.&quot;</p><p>For example:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token string-property property">'hx-on:htmx:before-request'</span><span class="token operator">:</span> <span class="token string">'alert("Sending request")'</span><span class="token punctuation">,</span><br>  <span class="token string-property property">'hx-on:htmx:after-request'</span><span class="token operator">:</span> <span class="token string">'alert("Got response")'</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token operator">...</span><br><span class="token operator">&lt;</span>div <span class="token punctuation">{</span><span class="token operator">...</span>attrs<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p>Another debugging approach is to use an unminified version of the htmx library and set breakpoints in its functions.</p><h2 id="animation" tabindex="-1">Animation</h2><p>TODO: Try this.</p><h2 id="websockets" tabindex="-1">WebSockets</h2><p>The htmx <a href="https://htmx.org/extensions/web-sockets/?v=1.1.1" rel="noopener" target="_blank">websockets</a> extension adds the ability to connect to a <a href="/blog/topics/#/blog/websockets/" target="_blank">WebSockets</a> server, send messages to it, and insert responses into HTML. It is defined by a separate JavaScript file that must be included with a <code>script</code> tag.</p><p>The extension adds support for the following attributes:</p><ul><li><code>ws-connect</code> specifies the URL of a WebSocket endpoint</li><li><code>ws-send</code> can be applied to a <code>form</code> element to send its data to a WebSocket endpoint</li></ul><p>WebSocket endpoints specify where the result should be inserted in the DOM by using an out-of-band swap.</p><p>The following code in the file <code>index.tsx</code> creates a WebSocket endpoint using Bun and the Hono framework. The file extension is <code>.tsx</code> because it uses JSX for generating strings of HTML.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This serves static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>root<span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> wsServer <span class="token operator">=</span> Bun<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token comment">// The WebSocket port defaults to 3000 which conflicts with the HTTP server.</span><br>  port<span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span><br>  <span class="token function">fetch</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Upgrade the request to support WebSockets.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">upgrade</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// no Response</span><br>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'WebSockets upgrade failed'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  websocket<span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token function">open</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebSocket opened'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token function">message</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> json<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// "start" is a form input name.</span><br>      <span class="token function">countdown</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token function">close</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// For code values, see</span><br>      <span class="token comment">// https://datatracker.ietf.org/doc/html/rfc6455#section-7.4.1</span><br>      <span class="token comment">// 1000 = Normal Closure</span><br>      <span class="token comment">// 1001 = Going Away (browser navigated away or server shut down)</span><br>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebSocket closed with code'</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This sends WebSocket messages that are numbers</span><br><span class="token comment">// starting at a specified number and counting down to zero.</span><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">countdown</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> n <span class="token operator">=</span> start<span class="token punctuation">;</span><br>  <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> swap <span class="token operator">=</span> n <span class="token operator">===</span> start <span class="token operator">?</span> <span class="token string">'innerHTML'</span> <span class="token operator">:</span> <span class="token string">'beforeend'</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"countdown"</span> hx<span class="token operator">-</span>swap<span class="token operator">-</span>oob<span class="token operator">=</span><span class="token punctuation">{</span>swap<span class="token punctuation">}</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">await</span> Bun<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    n<span class="token operator">--</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebSocket server is listening on port'</span><span class="token punctuation">,</span> wsServer<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p>Htmx dispatches the following events related to WebSockets:</p><ul><li><code>htmx:wsConnecting</code></li><li><code>htmx:wsOpen</code></li><li><code>htmx:wsClose</code></li><li><code>htmx:wsError</code></li><li><code>htmx:wsBeforeMessage</code></li><li><code>htmx:wsAfterMessage</code></li><li><code>htmx:wsConfigSend</code></li><li><code>htmx:wsBeforeSend</code></li><li><code>htmx:wsAfterSend</code></li></ul><p>To listen for these events with the <code>hx-on</code> attribute, change the names from camelCase to kebab-case.</p><p>The code below listens for the <code>htmx:wsAfterSend</code> event in order to reset the <code>form</code> which clears the <code>input</code>.</p><p><img alt="htmx WebSockets" style="width: 50%" src="/blog/assets/htmx-websockets.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>WebSockets<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org/dist/ext/ws.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>WebSockets<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>    <span class="token operator">&lt;</span>div<br>      hx<span class="token operator">-</span>ext<span class="token operator">=</span><span class="token string">"ws"</span><br>      ws<span class="token operator">-</span>connect<span class="token operator">=</span><span class="token string">"ws://localhost:3001"</span><br>      hx<span class="token operator">-</span>on<span class="token operator">:</span>htmx<span class="token operator">:</span>ws<span class="token operator">-</span>after<span class="token operator">-</span>send<span class="token operator">=</span><span class="token string">"document.querySelector('form').reset()"</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>form ws<span class="token operator">-</span>send<span class="token operator">></span><br>        <span class="token operator">&lt;</span>label<span class="token operator">></span><br>          <span class="token literal-property property">Start</span><span class="token operator">:</span><br>          <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"start"</span> type<span class="token operator">=</span><span class="token string">"number"</span> <span class="token operator">/</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>        <span class="token operator">&lt;</span>button<span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"countdown"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>See the working example project that includes the code above at <a href="https://github.com/mvolkmann/websocket-examples?v=1.1.1" rel="noopener" target="_blank">websocket-examples</a>.</p><h2 id="server-sent-events" tabindex="-1">Server-Sent Events</h2><p>The htmx <a href="https://htmx.org/extensions/server-sent-events/?v=1.1.1" rel="noopener" target="_blank">server-sent-events</a> extension adds the ability to listen for <a href="/blog/topics/#/blog/server-sent-events/" target="_blank">Server-Sent Events</a> (SSE). It is defined by a separate JavaScript file that must be included with a <code>script</code> tag.</p><p>The extension adds support for the following attributes:</p><ul><li><code>sss-connect</code> specifies the URL of an SSE endpoint</li><li><code>sse-swap</code> specifies the name of the events, defaulting to &quot;message&quot; when not specified</li></ul><p>In addition, the extension enables the <code>hx-trigger</code> attribute to listen for SSE events by prefixing their name with &quot;:sse&quot;. This can only be applied to descendant elements of an element that has the <code>sse-connect</code> attribute. However, the events won't be triggered if that element uses the <code>sse-swap</code> attribute, because that element will swallow the events.</p><p>The following code demonstrates the new capabilities.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Context<span class="token punctuation">,</span> Hono<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>serveStatic<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/bun'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> type <span class="token punctuation">{</span><span class="token constant">FC</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/jsx'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>streamSSE<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hono/streaming'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hono</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// This serves static files from the public directory.</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token function">serveStatic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">'./public'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token literal-property property">BaseHtml</span><span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>html<span class="token operator">></span><br>    <span class="token operator">&lt;</span>head<span class="token operator">></span><br>      <span class="token operator">&lt;</span>title<span class="token operator">></span>Server<span class="token operator">-</span>Sent Events<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>      <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/styles.css"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org@1.9.10"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>      <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/htmx.org/dist/ext/sse.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>BaseHtml<span class="token operator">></span><br>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Server<span class="token operator">-</span>Sent Events<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br><br>      <span class="token punctuation">{</span><span class="token comment">/* This listens for SSE "count" events and<br>          replaces the contents of a target element with their data.<br>          If hx-target is omitted, the results will<br>          replace the contents of the current element. */</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span>div<br>        hx<span class="token operator">-</span>ext<span class="token operator">=</span><span class="token string">"sse"</span><br>        hx<span class="token operator">-</span>target<span class="token operator">=</span><span class="token string">"#count"</span><br>        sse<span class="token operator">-</span>connect<span class="token operator">=</span><span class="token string">"/sse"</span><br>        sse<span class="token operator">-</span>swap<span class="token operator">=</span><span class="token string">"count"</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>div<span class="token operator">></span><br>        count <span class="token operator">=</span> <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"count"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br><br>      <span class="token punctuation">{</span><span class="token comment">/* This listens for SSE "count" events and<br>          sends an HTTP request to get other data when they occur. */</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span>div hx<span class="token operator">-</span>ext<span class="token operator">=</span><span class="token string">"sse"</span> sse<span class="token operator">-</span>connect<span class="token operator">=</span><span class="token string">"/sse"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>div hx<span class="token operator">-</span>get<span class="token operator">=</span><span class="token string">"/related-data"</span> hx<span class="token operator">-</span>trigger<span class="token operator">=</span><span class="token string">"sse:count"</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>BaseHtml<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token comment">// This streams count values using server-sent events.</span><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/sse'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c</span><span class="token operator">:</span> Context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token function">streamSSE</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">stream</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">await</span> stream<span class="token punctuation">.</span><span class="token function">writeSSE</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">'starting'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      count<span class="token operator">++</span><span class="token punctuation">;</span><br>      <span class="token keyword">await</span> stream<span class="token punctuation">.</span><span class="token function">writeSSE</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>crypto<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">await</span> stream<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> app<span class="token punctuation">;</span></code></pre><p>See the working example project that includes the code above at <a href="https://github.com/mvolkmann/server-sent-events-examples?v=1.1.1" rel="noopener" target="_blank">server-sent-events-examples</a>.</p><h2 id="browser-history" tabindex="-1">Browser History</h2><p>TODO: Describe hx-history-elt.</p><p>The <code>hx-push-url</code> attribute pushes a browser history entry for a page update. The value of this attribute can be:</p><ul><li><code>&quot;true&quot;</code> to create an entry without changing what appears in the browser navigation bar</li><li><code>&quot;{some-relative-url}&quot;</code> to create an entry AND change what appears in the browser navigation bar (ex. <code>hx-push-url=&quot;/todo/detail&quot;</code>)</li><li><code>&quot;false&quot;</code> to avoid creating an entry when the value <code>&quot;true&quot;</code> would be inherited from an ancestor element</li></ul><p>See the working example project that uses <code>hx-push-url</code> at <a href="https://github.com/mvolkmann/htmx-examples/tree/main/non-form-submit?v=1.1.1" rel="noopener" target="_blank">non-form-submit</a>.</p><h2 id="_hyperscript" tabindex="-1">_hyperscript</h2><p><a href="https://hyperscript.org?v=1.1.1" rel="noopener" target="_blank">_hyperscript</a> is &quot;an easy &amp; approachable language for modern web front-ends&quot;. It can be used in conjunction with htmx.</p><p>To enable use of _hyperscript, add a script tag like the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/hyperscript.org@0.9.12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>One use of _hyperscript is to clear form inputs after a form is submitted. Specify the code to run as the value of the underscore attribute on the <code>form</code> element. For example:</p><pre class="language-html"><code class="language-html">_="on submit target.reset()"</code></pre><h2 id="mobile-apps" tabindex="-1">Mobile Apps</h2><p>The hypermedia approach used by htmx to build web applications can also be used to build mobile apps. See <a href="https://hyperview.org?v=1.1.1" rel="noopener" target="_blank">Hyperview</a> which builds on React Native.</p><p>Another option is to build a <a href="/blog/topics/#/blog/progressive-web-apps?v=1.1.1" rel="noopener" target="_blank">Progressive Web App</a> (PWA).</p><p>For PWAs that hold all their data on the device using localStorage or <a href="/blog/topics/#/blog/indexeddb?v=1.1.1" rel="noopener" target="_blank">IndexedDB</a>, there is no need for user authentication. The endpoints used by htmx to get HTML snippets can be managed by a service worker which intercepts fetch requests and runs local JavaScript code to build responses. For an example of this approach, see <a href="https://github.com/mvolkmann/pwa-cloudflare-demo?v=1.1.1" rel="noopener" target="_blank">pwa-cloudflare-demo</a>.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://htmx.org?v=1.1.1" rel="noopener" target="_blank">htmx Home Page</a></p></li><li><p><a href="https://htmx.org/docs/?v=1.1.1" rel="noopener" target="_blank">htmx Documentation</a></p></li><li><p><a href="https://htmx.org/reference/?v=1.1.1" rel="noopener" target="_blank">htmx Reference</a></p></li><li><p><a href="https://htmx.org/examples/?v=1.1.1" rel="noopener" target="_blank">htmx Examples</a></p></li><li><p><a href="https://htmx.org/essays/?v=1.1.1" rel="noopener" target="_blank">htmx-related Essays</a></p></li><li><p><a href="https://htmx.org/essays/how-did-rest-come-to-mean-the-opposite-of-rest/?v=1.1.1" rel="noopener" target="_blank">How Did REST Come To Mean The Opposite of REST?</a></p></li><li><p><a href="https://htmx.org/discord?v=1.1.1" rel="noopener" target="_blank">htmx Discord Channel</a></p></li><li><p><a href="https://hypermedia.systems?v=1.1.1" rel="noopener" target="_blank">Hypermedia Systems</a> book</p></li><li><p><a href="https://bigsky.software?v=1.1.1" rel="noopener" target="_blank">Big Sky Software</a></p></li><li><p><a href="https://twitter.com/htmx_org?v=1.1.1" rel="noopener" target="_blank">Carson Gross on Twitter</a></p></li><li><p><a href="https://thevalleyofcode.com/htmx?v=1.1.1" rel="noopener" target="_blank">The Valley of CODE - htmx</a></p></li><li><p><a href="https://ahastack.dev?v=1.1.1" rel="noopener" target="_blank">The AHA Stack</a></p></li><li><p><a href="https://hotwired.dev?v=1.1.1" rel="noopener" target="_blank">Hotwire</a> competitor to htmx</p></li><li><p><a href="https://unpoly.com?v=1.1.1" rel="noopener" target="_blank">Unpoly</a> competitor to htmx</p></li></ul><p>TODO: Read &quot;The Valley of CODE&quot; page above!</p><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><ul><li><p>Study how htmx supports dialog boxes.</p></li><li><p>Read essays by Carson Gross on the htmx website.</p></li><li><p><code>hx-push-url=&quot;true&quot;</code> provides history support so the back button can go to a previous state of the UI. Try this! It does this by creating a snapshot of the entire DOM and saving it in <code>localStorage</code>. This uses the standard Web <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API?v=1.1.1" rel="noopener" target="_blank">History API</a>. Writing to <code>localstorage</code> can be disabled if desired.</p></li><li><p>The <code>HX-Request</code> HTTP header can be used to determine how to render a page when the browser is refreshed. This enables support for deep links. This is useful when htmx has replaced portions of a page.</p></li><li><p>See <a href="http://unpoly.com">unpoly.com</a> which is a competitor to htmx. Supposedly it is better at progressive enhancement.</p></li><li><p>See <a href="https://www.npmjs.com/package/@jop-software/hx-chart">https://www.npmjs.com/package/@jop-software/hx-chart</a>.</p></li><li><p>See HoTMiXer for starting new htmx projects at <a href="https://www.npmjs.com/package/hotmixer">https://www.npmjs.com/package/hotmixer</a></p></li></ul></article>