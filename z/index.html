<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>z</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#fonts">Fonts</a></li><li><a href="#change-directory">Change Directory</a></li><li><a href="#command-line-git">Command-line Git</a></li><li><a href="#avoid-accidents">Avoid Accidents</a></li><li><a href="#kill-processes">Kill Processes</a></li><li><a href="#search-for-files">Search For Files</a></li><li><a href="#starship">Starship</a></li><li><a href="#vim">Vim</a></li><li><a href="#other-shells">Other Shells</a></li><li><a href="#use-warp">Use Warp</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>You might be using the terminal all wrong ... or at least not as efficiently as you could. Here are ten tips to improve your terminal usage.</p><h2 id="fonts" tabindex="-1">Fonts</h2><p>Everything looks better in a terminal that is configured to use a nice font!</p><p>Personal preference certainly enters in here. I prefer to use a monospace font, meaning all characters have the same width. I also prefer fonts that support ligatures which Google describes as follows:</p><blockquote><p>A ligature is a glyph that combines the shapes of certain sequences of characters into a new form that makes for a more harmonious reading experience.</p></blockquote><p>For example, an exclamation point followed by an equal sign (meaning not equal) is replaced by an equal sign with a slash through it.</p><p>My current favorite font is <a href="https://www.nerdfonts.com/font-downloads?v=1.0.20" rel="noopener" target="_blank">FiraCode Nerd Font</a>.</p><h2 id="change-directory" tabindex="-1">Change Directory</h2><p>If your work involves switching between projects during a typical day then you likely use the <code>cd</code> command quite a bit. A great time saver is to define aliases in your shell configuration file to quickly move to your most commonly used directories. For example, if you use the zsh shell then you could add the following in your <code>~/.zshrc</code> file</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">DOCUMENTS_DIR</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>/Documents<br><br><span class="token comment"># This directory holds on the files related to my blog</span><br><span class="token comment"># that is implemented using the Eleventy static site generator.</span><br><span class="token builtin class-name">export</span> <span class="token assign-left variable">BLOG_DIR</span><span class="token operator">=</span><span class="token variable">$DOCUMENTS_DIR</span>/blog<br><br><span class="token comment"># This directory contains subdirectories related to software development.</span><br><span class="token builtin class-name">export</span> <span class="token assign-left variable">DEV_DIR</span><span class="token operator">=</span><span class="token variable">$DOCUMENTS_DIR</span>/dev<br><br><span class="token comment"># This directory contains subdirectories for projects.</span><br><span class="token builtin class-name">export</span> <span class="token assign-left variable">PROJECTS_DIR</span><span class="token operator">=</span><span class="token variable">$DOCUMENTS_DIR</span>/projects<br><br><span class="token comment"># This directory contains subdirectories for documentation and code examples</span><br><span class="token comment"># in various programming languages.</span><br><span class="token builtin class-name">export</span> <span class="token assign-left variable">LANG_DIR</span><span class="token operator">=</span><span class="token variable">$DEV_DIR</span>/lang<br><br><span class="token comment"># This directory contains Swift documentation and code examples.</span><br><span class="token builtin class-name">export</span> <span class="token assign-left variable">SWIFT_DIR</span><span class="token operator">=</span><span class="token variable">$LANG_DIR</span>/swift<br><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cdblog</span><span class="token operator">=</span><span class="token string">"cd <span class="token variable">$BLOG_DIR</span>"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cddev</span><span class="token operator">=</span><span class="token string">"cd <span class="token variable">$DEV_DIR</span>"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cdjs</span><span class="token operator">=</span><span class="token string">"cd <span class="token variable">$JS_DIR</span>"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cdprojects</span><span class="token operator">=</span><span class="token string">"cd <span class="token variable">$PROJECTS_DIR</span>"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cdswift</span><span class="token operator">=</span><span class="token string">"cd <span class="token variable">$SWIFT_DIR</span>"</span></code></pre><h2 id="command-line-git" tabindex="-1">Command-line Git</h2><p>If you sometimes work with Git from the command-line, defining the following aliases and shell functions can make this easier. Use these when you are in or below the root directory of a git repository.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># This lists all the local branches in the current git repository.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">br</span><span class="token operator">=</span><span class="token string">"git branch"</span><br><br><span class="token comment"># This prompts for a commit message using Vim.</span><br><span class="token comment"># Diffs for all the modified files are displayed inside Vim</span><br><span class="token comment"># so they can be verified and serve as the basis for a good commit message.</span><br><span class="token comment"># After a message is entered and saved (:wq),</span><br><span class="token comment"># it commits all the modified files.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">ci</span><span class="token operator">=</span><span class="token string">"git commit -av"</span><br><br><span class="token comment"># This creates a new branch off of the current branch</span><br><span class="token comment"># with the name specified after `cob`.</span><br><span class="token comment"># For example, `cob feature-compute-score`.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cob</span><span class="token operator">=</span><span class="token string">"git checkout -b"</span><br><br><span class="token comment"># This checks out the branch specified after `co`.</span><br><span class="token comment"># For example, `co feature-compute-score`.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">co</span><span class="token operator">=</span><span class="token string">"git checkout"</span><br><br><span class="token comment"># This lists all the commits on the current branch from newest to oldest.</span><br><span class="token comment"># For each commit the SHA, author, date, and commit message are output.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">log</span><span class="token operator">=</span><span class="token string">"git log"</span><br><br><span class="token comment"># This deletes the local AND remote branches with a given name.</span><br><span class="token comment"># For example, `rmb feature-compute-score`.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">rmb</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/bin/rmb"</span> <span class="token comment"># defined below</span><br><br><span class="token comment"># This outputs lists of all modified, deleted, and untracked files.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token string">"git status"</span><br><br><span class="token comment"># This cd's up to root directory of current git repository.</span><br><span class="token keyword">function</span> <span class="token function-name function">cdgitroot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">`</span><span class="token function">git</span> rev-parse --git-dir<span class="token variable">`</span></span><br>  <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span><br><span class="token punctuation">}</span><br><br><span class="token comment"># This pulls down the latest changes from the remote branch</span><br><span class="token comment"># that corresponds to the current local branch.</span><br><span class="token keyword">function</span> <span class="token function-name function">pull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">git</span> pull origin <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse --abbrev-ref HEAD<span class="token variable">)</span></span><br><span class="token punctuation">}</span><br><br><span class="token comment"># This pushes the latest changes on the current local branch</span><br><span class="token comment"># up to the corresponding remote branch.</span><br><span class="token keyword">function</span> <span class="token function-name function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">git</span> push origin <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse --abbrev-ref HEAD<span class="token variable">)</span></span><br><span class="token punctuation">}</span></code></pre><p>Here is the shell script <code>rmb</code> that must be in a directory listed in the <code>PATH</code> environment variable.</p><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span><br><span class="token comment"># Removes a given git branch, both local and remote.</span><br><br><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token builtin class-name">echo</span> usage: rmb <span class="token punctuation">{</span>branch-name<span class="token punctuation">}</span><br>  <span class="token builtin class-name">exit</span> <span class="token number">1</span><br><span class="token keyword">fi</span><br><br><span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token variable">$1</span><br><span class="token function">git</span> branch <span class="token parameter variable">-rd</span> origin/<span class="token variable">$1</span></code></pre><h2 id="avoid-accidents" tabindex="-1">Avoid Accidents</h2><p>The <code>cp</code> (copy), <code>mv</code> (move), and <code>rm</code> (remove) commands can result in loss of data if a file is accidentally replaced or removed. To avoid this, define the following aliases that shadow those commands with a version that prompts for permission before overwriting or deleting a file.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Ask for confirmation before overwriting or deleting files.</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cp</span><span class="token operator">=</span><span class="token string">"cp -i"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">mv</span><span class="token operator">=</span><span class="token string">"mv -i"</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">rm</span><span class="token operator">=</span><span class="token string">"rm -i"</span></code></pre><h2 id="kill-processes" tabindex="-1">Kill Processes</h2><p>Here's a common scenario. You attempt to start a server that listens on port 3000, but you get the error &quot;Something is already running on port 3000&quot;. You currently have ten shells open in various terminal windows and panes. If you could find the one what is running a server using port 3000 you could navigate to it and press ctrl-c to kill it. But finding it takes too long.</p><p>It would be much more convenient if you could enter a command that would kill the process that is listening on a given port. You can with <code>klp 3000</code>!</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">klp</span><span class="token operator">=</span><span class="token string">"kill-listening-process"</span></code></pre><p>Ths script <code>kill-listening-process</code> will differ somewhat based on the operating system. For macOS it can be defined as follows:</p><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span><br><span class="token comment"># This kills the process listening on a given port.</span><br><br><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token builtin class-name">echo</span> usage: kill-listening-process <span class="token punctuation">{</span>port<span class="token punctuation">}</span><br>  <span class="token builtin class-name">exit</span> <span class="token number">1</span><br><span class="token keyword">fi</span><br><br><span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token variable">$1</span><br><span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">lsof</span> <span class="token parameter variable">-n</span> -iTCP:$port <span class="token parameter variable">-sTCP:LISTEN</span> <span class="token parameter variable">-t</span><span class="token variable">)</span></span><br><br><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$pid</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token function">kill</span> <span class="token variable">$pid</span><br>  <span class="token builtin class-name">echo</span> killed process <span class="token variable">$pid</span><br><span class="token keyword">else</span><br>  <span class="token builtin class-name">echo</span> no process is listening on port <span class="token variable">$port</span><br><span class="token keyword">fi</span></code></pre><h2 id="search-for-files" tabindex="-1">Search For Files</h2><p>There are multiple ways to search for files in and below the current directory that have a specific file extension and contain given text. One way is to use the <code>find</code> command as follows:</p><pre class="language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">'*.js'</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">grep</span> <span class="token string">'some text'</span></code></pre><p>This has several issues. The syntax is hard to remember, it is somewhat slow, the output doesn't indicate the line numbers where matches were found, and the output is not color-coded.</p><p>A better alternative is to use <a href="https://github.com/BurntSushi/ripgrep?v=1.0.20" rel="noopener" target="_blank">ripgrep</a>. This link contains installation instructions for Linux, macOS, and Windows.</p><p>Ripgrep is implemented in Rust and is very fast.</p><p>The equivalent of the <code>find</code> command above is <code>rg --type=js 'some text'</code>.</p><p>The paths to files that contain the text are displayed in purple. Matching line numbers are displayed in green. Text on the matching lines is displayed in white, except the matching text which is displayed in red.</p><h2 id="starship" tabindex="-1">Starship</h2><p><a href="https://starship.rs/?v=1.0.20" rel="noopener" target="_blank">Starship</a> is a highly customizable tool for customizing shell prompts. It works in nearly all shells including Bash, Fish, Nushell, Powershell, and Zsh. This removes the need to customize the prompt in shell-specific ways.</p><p>Starship can be configured in one place for all shells, which is great for developers that utilize multiple shells.</p><p>To use Starship with zsh, add the following line in <code>~/.zshrc</code>:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>starship init <span class="token function">zsh</span><span class="token variable">)</span></span>"</span></code></pre><p>Configure Starship by creating the file <code>~/.config/starship.toml</code>. Here is my configuration. Note the use of unicode characters.</p><pre class="language-toml"><code class="language-toml"><span class="token key property">format</span> <span class="token punctuation">=</span> <span class="token string">"$shell$custom$git_branch$git_status$directory$character "</span><br><br><span class="token comment"># Displays text, typically a single character,</span><br><span class="token comment"># based on the status of the previous command.</span><br><span class="token punctuation">[</span><span class="token table class-name">character</span><span class="token punctuation">]</span><br><span class="token key property">success_symbol</span> <span class="token punctuation">=</span> <span class="token string">"[▶](green)"</span> <span class="token comment"># normal prompt</span><br><span class="token key property">error_symbol</span> <span class="token punctuation">=</span> <span class="token string">"[✗](bold red)"</span> <span class="token comment"># used if previous command failed</span><br><br><span class="token comment"># Displays current directory.</span><br><span class="token punctuation">[</span><span class="token table class-name">directory</span><span class="token punctuation">]</span><br><span class="token key property">format</span> <span class="token punctuation">=</span> <span class="token string">"[$path]($style)"</span><br><span class="token key property">style</span> <span class="token punctuation">=</span> <span class="token string">"yellow"</span><br><span class="token key property">truncate_to_repo</span> <span class="token punctuation">=</span> <span class="token boolean">false</span><br><span class="token key property">truncation_length</span> <span class="token punctuation">=</span> <span class="token number">3</span> <span class="token comment"># parent directories to show; default is 3</span><br><span class="token key property">truncation_symbol</span> <span class="token punctuation">=</span> <span class="token string">"…/"</span><br><br><span class="token comment"># Displays current Git branch when in a directory of a Git repository.</span><br><span class="token punctuation">[</span><span class="token table class-name">git_branch</span><span class="token punctuation">]</span><br><span class="token key property">format</span> <span class="token punctuation">=</span> <span class="token string">"[$symbol ](green)[$branch ]($style)"</span><br><span class="token key property">style</span> <span class="token punctuation">=</span> <span class="token string">"italic green"</span><br><span class="token key property">symbol</span> <span class="token punctuation">=</span> <span class="token string">""</span><br><br><span class="token comment"># Displays status of Git repository when in a directory of a Git repository.</span><br><span class="token punctuation">[</span><span class="token table class-name">git_status</span><span class="token punctuation">]</span><br><span class="token key property">format</span> <span class="token punctuation">=</span> <span class="token string">"[$all_status$ahead_behind]($style)"</span><br><span class="token key property">ahead</span> <span class="token punctuation">=</span> <span class="token string">"⇡ $count "</span><br><span class="token key property">behind</span> <span class="token punctuation">=</span> <span class="token string">"⇣ $count "</span><br><span class="token key property">deleted</span> <span class="token punctuation">=</span> <span class="token string">"🗑 $count "</span><br><span class="token key property">diverged</span> <span class="token punctuation">=</span> <span class="token string">" $count "</span><br><span class="token key property">stashed</span> <span class="token punctuation">=</span> <span class="token string">"📦 $count "</span><br><span class="token key property">modified</span> <span class="token punctuation">=</span> <span class="token string">"פֿ $count "</span><br><span class="token key property">staged</span> <span class="token punctuation">=</span> <span class="token string">'[ $count ](green)'</span><br><span class="token key property">renamed</span> <span class="token punctuation">=</span> <span class="token string">" $count "</span><br><span class="token key property">untracked</span> <span class="token punctuation">=</span> <span class="token string">"🤷 ‍$count "</span><br><span class="token key property">style</span> <span class="token punctuation">=</span> <span class="token string">"bold red"</span><br><br><span class="token punctuation">[</span><span class="token table class-name">shell</span><span class="token punctuation">]</span><br><span class="token key property">disabled</span> <span class="token punctuation">=</span> <span class="token boolean">false</span><br><span class="token key property">bash_indicator</span> <span class="token punctuation">=</span> <span class="token string">"🚀"</span><br><span class="token key property">fish_indicator</span> <span class="token punctuation">=</span> <span class="token string">"🐠"</span><br><span class="token key property">nu_indicator</span> <span class="token punctuation">=</span> <span class="token string">"🦀"</span><br><span class="token key property">zsh_indicator</span> <span class="token punctuation">=</span> <span class="token string">"🧙"</span></code></pre><p>For more detail, see <a href="https://mvolkmann.github.io/blog/topics/#/blog/starship/?v=1.0.20" rel="noopener" target="_blank">Starship</a>.</p><h2 id="vim" tabindex="-1">Vim</h2><p>Many software developers know a little bit about Vim and grudgingly use it when nothing else is available. You don't need to be an expert in Vim or customize it in order to derive a lot of its benefits.</p><p>In macOS and Linux, vim is already installed. Despite this, I recommend installing <a href="https://neovim.io?v=1.0.20" rel="noopener" target="_blank">neovim</a> which is a modern replacement for Vim. Click the &quot;Install Now&quot; button at the link above for installation instructions. In macOS it can be installed using the Homebrew command <code>brew install neovim</code>.</p><p>For a summary of the minimal set of commands you need to know to be productive in vim or neovim, see my <a href="https://mvolkmann.github.io/blog/topics/#/blog/vim/?v=1.0.20" rel="noopener" target="_blank">Vim blog page</a>. Especially see the section on netrw.</p><p>Perhaps you are a fan of <a href="https://code.visualstudio.com/?v=1.0.20" rel="noopener" target="_blank">VS Code</a> and prefer for avoid using any flavor of Vim. Enter <code>vscode .</code> in a terminal to launch VS Code use it to edit any files in and below the current directory.</p><h2 id="other-shells" tabindex="-1">Other Shells</h2><p><a href="https://mvolkmann.github.io/blog/topics/#/blog/nushell/?v=1.0.20" rel="noopener" target="_blank">Nushell</a> is &quot;a new type of shell&quot;. &quot;The goal of this project is to take the Unix philosophy of shells, where pipes connect simple commands together, and bring it to the modern style of development.&quot;</p><p>The output of many commands is a table and there are many commands for manipulating tables.</p><p>TODO: Get more content from <a href="https://www.nushell.sh/">https://www.nushell.sh/</a>.</p><h2 id="use-warp" tabindex="-1">Use Warp</h2><p>There are many options for terminal applications. In macOS you can use the built-in Terminal app. A popular alternative is <a href="https://iterm2.com?v=1.0.20" rel="noopener" target="_blank">iTerm2</a>. Many developers using iTerm2 in conjunction with <a href="https://mvolkmann.github.io/blog/topics/#/blog/tmux/?v=1.0.20" rel="noopener" target="_blank">tmux</a> in order to gain features such as multiple tabs that each contain split panes where each pane hosts a separate shell session.</p><p><a href="https://mvolkmann.github.io/blog/topics/#/blog/warp/?v=1.0.20" rel="noopener" target="_blank">Warp</a> is a fairly new option, currently only supported on macOS, that provides most of the features of iTerm2 and tmux. It also adds many features not found in those tools such as command &quot;blocks&quot;, better command editing capability, workflows, a command palette, provided and custom themes, permalinks to commands and their output, and &quot;AI Command Search&quot;.</p><p>AI Command Search helps with discovering the shell command needed to perform a task described in English. For example, searching for &quot;delete remote git branch&quot; suggests <code>git push origin --delete &lt;branch&gt;</code>.</p><p>Warp makes it easy to create a separate tab for each category of work being done. This allows you to focus on a task at hand. To switch tasks, just click a different tab.</p><p>For example, perhaps you editing your blog and working on two projects. Create a separate tab for each of these whose names are &quot;blog&quot; and the project names. Inside each tab create multiple panes by splitting the initially pane horizontally, vertically, or both. In the panes of a project tab you can run a web server, an API server, and a database server. Other panes can be used for executing shell commands.</p><p>TODO: Add some screenshots!</p><p>Warp supports the Bash, Zsh, and Fish shells. It does not currently support Nushell.</p></article>