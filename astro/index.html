<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Astro</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#projects">Projects</a></li><li><a href="#prettier">Prettier</a></li><li><a href="#dev-toolbar">Dev Toolbar</a></li><li><a href="#directory-structure">Directory Structure</a></li><li><a href="#using-vscode">Using VSCode</a></li><li><a href="#imports">Imports</a></li><li><a href="#astro-components">Astro Components</a></li><li><a href="#naming-conventions">Naming Conventions</a></li><li><a href="#styling">Styling</a></li><li><a href="#layouts">Layouts</a></li><li><a href="#images">Images</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#collections">Collections</a></li><li><a href="#mdx">MDX</a></li><li><a href="#other-frameworks">Other Frameworks</a></li><li><a href="#custom-404-page">Custom 404 Page</a></li><li><a href="#view-transitions">View Transitions</a></li><li><a href="#api-endpoints">API Endpoints</a></li><li><a href="#htmx">HTMX</a></li><li><a href="#internationalization">Internationalization</a></li><li><a href="#starlight">Starlight</a></li><li><a href="#resources">Resources</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>figcaption {
      margin-top: 0.5rem;
      text-align: center;
    }
    img {
        border: 1px solid gray;
    }
    .row {
      display: flex;
      align-items: center;
    }</style><div class="row"><figure style="width: 40%"><img alt="Astro logo" style="border: 0" src="/blog/assets/astro-logo.svg?v=1.0.22"><figcaption>Astro logo</figcaption></figure><figure style="width: 20%"><img alt="Houston" style="border: 0" src="/blog/assets/astro-houston.png?v=1.0.22"><figcaption>Houston</figcaption></figure></div><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://astro.build?v=1.0.22" rel="noopener" target="_blank">Astro</a> is &quot;the web framework for content-driven websites&quot;. It can be used to generate static sites, build server-side rendered (SSR) sites, and define API endpoints.</p><p>A major focus of Astro is shipping less JavaScript code to browsers and doing more work on the server side.</p><p>Astro supports using many kinds of UI components including Astro, Alpine, Lit, Preact, React, SolidJS, Svelte, Vue, WebComponents, and more.</p><p>Astro uses the <a href="https://docs.astro.build/en/concepts/islands/?v=1.0.22" rel="noopener" target="_blank">Islands architecture</a>. Jason Miller describes this approach as a way to &quot;render HTML pages on the server, and inject placeholders or slots around highly dynamic regions that can then be hydrated on the client into small self-contained widgets, reusing their server-rendered initial HTML.&quot; Each island is a bit of JavaScript-enabled interactivity and the water around them is static HTML.</p><p>Astro allows each &quot;island&quot; to use a different web UI frameworks, combining them into in a single web application.</p><p>Astro supports SSR adapters for Cloudflare, Netlify, Node, and Vercel.</p><p>Astro provides integrations with Tailwind for CSS styling and a few other packages.</p><p>Astro provides file-based routing that is specified by the files and directories under the <code>src/pages</code> directory. For example, the URL path <code>/foo/bar</code> refers to the page defined in the file <code>src/pages/foo/bar.astro</code>.</p><p>Astro was created by <a href="http://fredkschott.com/about/?v=1.0.22" rel="noopener" target="_blank">Fred K. Schott</a>. Fred previously worked on WebComponents at Google and was on the Polymer team. He also created <a href="https://www.snowpack.dev?v=1.0.22" rel="noopener" target="_blank">Snowpack</a>, &quot;a lightning-fast frontend build tool&quot;, that is no longer maintained. The functionality of Snowpack was superseded by <a href="https://vitejs.dev?v=1.0.22" rel="noopener" target="_blank">Vite</a> which is used as the build tool in Astro.</p><h2 id="projects" tabindex="-1">Projects</h2><p>To create an Astro project, enter <code>npm create astro@latest</code>. This will prompt for the following:</p><ul><li><p>permission to install create-astro</p></li><li><p>&quot;Where should we created your new project?&quot;</p><p>Enter a directory path that can begin with &quot;./&quot;. Enter only &quot;.&quot; to create the project in the current directory.</p></li><li><p>&quot;How would you like to start your new project?&quot;</p><p>The options are &quot;Include sample files&quot;, &quot;Use blog template&quot;, and &quot;Empty&quot;.</p></li><li><p>&quot;Install dependencies?&quot; Yes or No</p><p>Press return to accept the default of &quot;Yes&quot;.</p></li><li><p>&quot;Do you plan to write TypeScript?&quot; Yes or No</p><p>Press return to accept the default of &quot;Yes&quot;.</p></li><li><p>&quot;How strict should TypeScript be? Strict, Strictest, or Relaxed</p><p>The default is &quot;Strict&quot;, but its best to select &quot;Strictest&quot;.</p></li><li><p>&quot;Initialize a new git repository? Yes or No</p></li></ul><p>Once the project is created, follow the instructions that are output.</p><ul><li><code>cd</code> to the newly created directory.</li><li>Optionally enter <code>npx astro add tailwind</code> to add support for Tailwind CSS styling.</li><li>Enter <code>npm start</code> or <code>npm run dev</code> to start a local server. Both do the same thing.</li><li>Browse localhost:4321 (the default port).</li></ul><p>The Astro logo is a rocket. Astro uses 4321 for the default port because it is like a countdown sequence for a rocket launch.</p><p>Hot reloading is automatically configured so saved changes are automatically reflected in the browser.</p><p>To check for issues in the project code, enter <code>npx astro check</code> or <code>npm run astro check</code>. This will output errors, warnings, and hints.</p><p>To build the site for production, enter <code>npm run build</code>. This creates a <code>dist</code> directory containing all the files needed to deploy the site.</p><p>To preview the built site, enter <code>npm run preview</code> and browse localhost:4321.</p><p>To see a list of the available &quot;astro&quot; commands, enter <code>npm run astro</code>.</p><p>To open the Astro documentation in the default web browser, enter <code>npm run astro docs</code>.</p><p>The file <code>astro.config.mjs</code> defines all the Astro configuration options including adapters and extensions (like Tailwind).</p><h2 id="prettier" tabindex="-1">Prettier</h2><p>The steps to configure an Astro project to use Prettier are:</p><ul><li><p>Enter <code>npm install -D prettier-plugin-astro</code></p></li><li><p>Create the file <code>.prettierrc</code> at the root of the project.</p><p>Some suggested options are shown here. The only one that is required is <code>plugins</code>.</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"arrowParens"</span><span class="token operator">:</span> <span class="token string">"avoid"</span><span class="token punctuation">,</span><br>  <span class="token property">"astroAllowShorthand"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"bracketSpacing"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span><br>  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"prettier-plugin-astro"</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre></li><li><p>Add the following script in <code>package.json</code>.</p><pre class="language-json"><code class="language-json"><span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"prettier --write '{public,src}/**/*.{astro,css,html,js,ts}'"</span><span class="token punctuation">,</span></code></pre></li></ul><p>To format all the files in the project, enter <code>npm run format</code>.</p><h2 id="dev-toolbar" tabindex="-1">Dev Toolbar</h2><p>When running in dev mode, Astro provides a Dev Toolbar in a dark gray oval that is centered at the bottom of the browser window. It is partially hidden from view until the mouse hovers over it.</p><p><img alt="Astro Dev Toolbar" style="border: none; width: 30%" src="/blog/assets/astro-dev-toolbar.png?v=1.0.22"></p><p>The toolbar contains the following four buttons:</p><ul><li><p>Menu (Astro icon)</p><p>This provides options to &quot;Report a Bug&quot;, provide &quot;Feedback&quot;, view &quot;Documentation&quot;, and join the &quot;Community&quot; (on Discord). It also features some optional integrations. The &quot;View all&quot; link opens a browser tab for viewing all available integrations.</p><p>The &quot;Copy debug info&quot; button in the upper-right copies information to the clipboard that is useful when reporting a bug. This includes the version of Astro, version of Node, operating system, package manager (ex. npm), the adapter in use (ex. @astrojs/node), and a list of the installed integrations. The copied text can be pasted into a bug report.</p></li><li><p>Inspect (arrow cursor icon)</p><p>TODO: Finish this description.</p></li><li><p>Audit (document icon)</p><p>TODO: Finish this description.</p></li><li><p>Settings (gear icon)</p><p>TODO: Finish this description.</p></li></ul><h2 id="directory-structure" tabindex="-1">Directory Structure</h2><p>The <code>public</code> directory holds assets such as audio, images, and video that will be served as-is and not affected by any optimizations.</p><p>Common subdirectories of the <code>src</code> directory are described in the table below. The only special names are <code>pages</code> and <code>content</code>. There are common names used for the others, but they are not enforced.</p><table><thead><tr><th>Directory Name</th><th>Purpose</th></tr></thead><tbody><tr><td><code>src/components</code></td><td>This contains component source files that can be used in page components.</td></tr><tr><td><code>src/content</code></td><td>This holds collections of Markdown files.</td></tr><tr><td><code>src/images</code></td><td>This holds images that will be used with the provided <code>Image</code> component in order to optimized them.</td></tr><tr><td><code>src/layouts</code></td><td>This holds component source files that typically provide boilerplate HTML used by pages.</td></tr><tr><td><code>src/pages</code></td><td>This contains component source files that represent complete pages of the app or API endpoints. Initially only <code>index.astro</code> is present.</td></tr><tr><td><code>src/styles</code></td><td>This contains CSS files that define global styling.</td></tr></tbody></table><p>It is useful to define path aliases in <code>tsconfig.json</code> to simplify importing files from commonly used directories. For example:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"astro/tsconfigs/strictest"</span><span class="token punctuation">,</span><br>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./src"</span><span class="token punctuation">,</span><br>    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"@components/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"components/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token property">"@images/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"images/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token property">"@layouts/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"layouts/*"</span><span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>This enables replacing an import like</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'../../../layouts/Layout.astro'</span><span class="token punctuation">;</span></code></pre><p>with this:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@layouts/Layout.astro'</span><span class="token punctuation">;</span></code></pre><p>For site-wide constants, consider creating the file <code>src/constants.ts</code> that export the constants. In files that need the constants, import them from this file.</p><h2 id="using-vscode" tabindex="-1">Using VSCode</h2><p>The <a href="https://marketplace.visualstudio.com/items?itemName=astro-build.astro-vscode?v=1.0.22" rel="noopener" target="_blank">Astro</a> extension from astro.build provides syntax highlighting, intellisense, and more.</p><p>To configure code formatting, open any <code>.astro</code> file, open the Command Palette, and enter &quot;Format Document&quot;. It will prompt for configuring this and automatically do so.</p><h2 id="imports" tabindex="-1">Imports</h2><p>Astro supports importing many kinds of file in JavaScript code. The supported file types include:</p><ul><li>Astro components (.astro)</li><li>CSS (.css)</li><li>CSS Modules (.module.css)</li><li>Images (.svg, .jpg, .png, etc.)</li><li>JavaScript (.js, .mjs)</li><li>JSON (.json)</li><li>JSX (.jsx, .tsx)</li><li>Markdown (.md, .markdown, etc.)</li><li>NPM Packages</li><li>TypeScript (.ts)</li><li>Other kinds of assets (TODO: audio and video?)</li></ul><p>For example, the following line imports a JSON file with the path <code>src/data/dogs.json</code> from a <code>.astro</code> file in the <code>src/pages</code> directory:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> dogs <span class="token keyword">from</span> <span class="token string">'../data/dogs.json'</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dogs ='</span><span class="token punctuation">,</span> dogs<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Import paths can be relative to the current file or be absolute from the root directory of the project. For example, when inside the file <code>src/components/shopping/PetShop.astro</code>, the file <code>src/images/animals/dog.png</code> can be imported in these ways:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> dogImage <span class="token keyword">from</span> <span class="token string">'../../images/animals/dog.png'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> dogImage <span class="token keyword">from</span> <span class="token string">'/src/images/animals/dog.png'</span><span class="token punctuation">;</span></code></pre><h2 id="astro-components" tabindex="-1">Astro Components</h2><p>Astro components are defined in source files with a <code>.astro</code> extension. These describe HTML that will be rendered on the server. This can contain three sections:</p><ul><li><p>optional component script</p><p>This section begins and ends with lines that only contain three dashes, referred to as &quot;code fences&quot;. This is is the same syntax that is used in Markdown files for &quot;front matter&quot;.</p><p>Write JavaScript code inside the code fences. If TypeScript was enabled for the project, it can be used here.</p><p>Everything in component scripts stays on the server. The variables and functions defined in them are not sent to the browser. Output from <code>console.log</code> calls appear where the server is running, not in the browser. Place code that should run in the browser inside a <code>script</code> tag that appears after the component script.</p><p>Code in a component script can:</p><ul><li><p>import other files with ESM syntax</p></li><li><p>declare types, such as the type of the props it accepts</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This can be defined with either "type" or "interface".</span><br><span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><br>  prop1<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// optional prop</span><br>  prop2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// required prop</span><br><span class="token punctuation">}</span></code></pre></li><li><p>use destructuring to get the values of props</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token punctuation">{</span>prop1 <span class="token operator">=</span> <span class="token string">'default value'</span><span class="token punctuation">,</span> prop2<span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props <span class="token keyword">as</span> Props<span class="token punctuation">;</span></code></pre></li><li><p>declare variables that can be used in the HTML that follows</p></li><li><p>declare functions that can be called in the HTML that follows</p></li><li><p>use the Fetch API with top-level <code>await</code> to get data from API endpoints</p></li></ul></li><li><p>HTML to be rendered</p><p>This section uses a JSX-like syntax. Unlike JSX, this content is not pure XML. For example, it an contain unclosed elements like <code>!doctype</code> and self closing elements like <code>br</code> and <code>hr</code>.</p><p>A root element is not required, but the fragment syntax from React is supported (<code>&lt;&gt;...&lt;/&gt;</code>).</p><p>To insert the value of a JavaScript expression, use <code>{expression}</code>. This can appear in element attribute values and content.</p><p>Conditional logic uses the same syntax as in React. For example, <code>{condition &amp;&amp; HTML}</code> or <code>{condition ? HTML1 : HTML2}</code>.</p><p>Iteration also uses the same approach as in React. For example, <code>{collection.map(element =&gt; HTML)}</code>.</p><p>Expressions in curly braces are not reactive. <code>.astro</code> files are rendered on the server only one time.</p></li><li><p>optional <code>style</code> tag</p><p>This defines CSS rules that are scoped to this component.</p></li></ul><h2 id="naming-conventions" tabindex="-1">Naming Conventions</h2><p>Files under the <code>src/pages</code> directory have lowercase names because their names are used in URL paths.</p><p>Files under the <code>src/components</code> directory have PascalCase names because their names become UI component names.</p><h2 id="styling" tabindex="-1">Styling</h2><p>As described above, components defined in <code>.astro</code> files can include a <code>style</code> tag that defines CSS rules that are scoped to the component.</p><p>Global styles can be defined in three ways.</p><p>The first option is to add a <code>link</code> tag to the <code>head</code> section of the HTML that refers to a CSS file.</p><p>The second option is to include a <code>&lt;style is:global&gt;</code> tag in a layout source file that is used by many pages.</p><p>The third option is to define a file like <code>global.css</code> in the <code>src</code> or <code>src/styles</code> directory and include it in all the page components that wish to use it as follows.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token string">'../styles/global.css'</span><span class="token punctuation">;</span></code></pre><p>TODO: Is the third option the only one that supports hot reload of the browser when styles are modified?</p><h2 id="layouts" tabindex="-1">Layouts</h2><p>By convention, the <code>src/layouts</code> directory contains <code>.astro</code> files that describe common content that should wrap around the content of pages. Any number of layout components can be defined. Each page can choose the layout component it wishes to wrap its content inside.</p><p>Layout components can do all the things other components can do including taking props, importing files, and using other components.</p><p>For example, the file <code>src/layouts/Layout.astro</code> could contain the following. Note the use of <code>&lt;slot /&gt;</code> to specify where content will be inserted into the layout. Only one <code>slot</code> element can be used and named slots are not supported.</p><pre class="language-js"><code class="language-js"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props<span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">></span><br><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"description"</span> content<span class="token operator">=</span><span class="token string">"Astro description"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"icon"</span> type<span class="token operator">=</span><span class="token string">"image/svg+xml"</span> href<span class="token operator">=</span><span class="token string">"/favicon.svg"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"generator"</span> content<span class="token operator">=</span><span class="token punctuation">{</span>Astro<span class="token punctuation">.</span>generator<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>slot <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><br><span class="token operator">&lt;</span>style is<span class="token operator">:</span>global<span class="token operator">></span><br>  html <span class="token punctuation">{</span><br>    font<span class="token operator">-</span>family<span class="token operator">:</span> system<span class="token operator">-</span>ui<span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><p>This layout can be used in a page <code>.astro</code> file as follows. Attribute syntax is used to pass props to components. Note how the <code>title</code> prop value is passed to the <code>Layout</code> component.</p><pre class="language-js"><code class="language-js"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../layouts/Layout.astro"</span><span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"My Page"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>main<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>My Page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span></code></pre><p>Layouts can be nested. For example, a page component <code>MyPage</code> can wrap itself in <code>LayoutInner</code> which wraps itself in <code>LayoutOuter</code>.</p><h2 id="images" tabindex="-1">Images</h2><p>Images can be placed under the <code>public</code> directory, typically in <code>public/images</code>. These can be referenced using a path string that is relative to the <code>public</code> directory. For example, <code>&lt;img alt=&quot;logo&quot; src=&quot;/images/logo.png&quot; /&gt;</code> searches from the <code>public</code> directory. Astro will server images files placed under the <code>public</code> directory as-is and will not provide image optimization.</p><p>In order to take advantage of image optimizations, place images under the <code>src/images</code> directory, import them into JavaScript code, and render them using the provided <code>Image</code> component.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Image <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"astro:assets"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> logo from ‘<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>images<span class="token operator">/</span>logo<span class="token punctuation">.</span>png’<span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>Image alt<span class="token operator">=</span><span class="token string">"logo"</span> src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">300</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>The <code>Image</code> component requires specifying both <code>height</code> and <code>width</code> to avoid content layout shift (CLS).</p><p>From the documentation at <a href="https://docs.astro.build/en/guides/images/?v=1.0.22" rel="noopener" target="_blank">Images</a>, The <code>Image</code> component &quot;can transform a local or authorized remote image's dimensions, file type, and quality for control over your displayed image. The resulting <code>&lt;img&gt;</code> tag includes <code>alt</code>, <code>loading</code>, and <code>decoding</code> attributes and infers image dimensions to avoid Cumulative Layout Shift (CLS).&quot;</p><p>Astro will also optimize remote images if the following appears in the <code>astro.config.mjs</code> file:</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">domains</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'astro.build'</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Astro image optimization includes:</p><ul><li>adding <code>img</code> element attributes like <code>decoding=&quot;async&quot;</code> and <code>loading=&quot;lazy&quot;</code>.</li><li>generating WEBP versions of images to reduce file sizes (All major web browsers support the WEBP format.)</li><li>adding attributes required to take advantage of services like Cloudinary</li></ul><p>More image optimization is performed in production builds than when running in dev mode.</p><p>This mostly removes the need to use tools like Squoosh to optimize images.</p><p>Image optimization is performed by the <a href="https://github.com/lovell/sharp?v=1.0.22" rel="noopener" target="_blank">sharp</a> package.</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>Code in the component script section is only run on the server-side. This means functions defined there cannot be used for client-side event handling.</p><p>One way specify client-side JavaScript code is to place it in a script tag within the HTML section. For example:</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">"my-btn"</span><span class="token operator">></span>Press Me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br><br><span class="token operator">&lt;</span>script<span class="token operator">></span><br>  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'got click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> myBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  myBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h2 id="collections" tabindex="-1">Collections</h2><p>Astro supports describing and retrieving collections of data from Markdown files that are typically placed under the <code>src/content</code> directory. Each subdirectory represents a different collection.</p><p>The following steps can be taken to define and render a collection of dogs.</p><ul><li><p>Create the directory <code>src/content</code>.</p></li><li><p>Create the file <code>config.ts</code> in this directory.</p><p>This file defines each of the collections. It uses <a href="https://zod.dev?v=1.0.22" rel="noopener" target="_blank">Zod</a> to describe and validate the schema of each collection. The schema defines which front matter properties are valid and provides a type-safe way to use the data.</p><p>For example, the following describes a single collection named &quot;dogs&quot;.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>defineCollection<span class="token punctuation">,</span> z<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro:content'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> dogs <span class="token operator">=</span> <span class="token function">defineCollection</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  type<span class="token operator">:</span> <span class="token string">'content'</span><span class="token punctuation">,</span><br>  schema<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token comment">// The return value from z.string() can be saved in a variable</span><br>    <span class="token comment">// and used on multiple properties to avoid calling it repeatedly.</span><br>    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    breed<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> collections <span class="token operator">=</span> <span class="token punctuation">{</span>dogs<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li><li><p>Create the directory <code>src/content/dogs</code>.</p></li><li><p>Create one Markdown file for each dog inside this directory.</p><p>For example:</p><pre class="language-md"><code class="language-md"><span class="token front-matter-block"><span class="token punctuation">---</span><br><span class="token front-matter yaml language-yaml">name: 'Comet'<br>breed: 'Whippet'<br>website: https://www.akc.org/dog-breeds/whippet/</span><br><span class="token punctuation">---</span></span><br><br>Comet loves pool balls and basketballs.</code></pre><p>Note the use of front matter to describe properties of this instance.</p></li><li><p>Access the collection in a component.</p><p>For example:</p><p><img alt="Astro Dogs" style="width: 50%" src="/blog/assets/astro-dogs.png?v=1.0.22"></p><pre class="language-html"><code class="language-html">---<br>import Layout from "../../layouts/Layout.astro";<br>import Dog from "../../components/Dog.astro";<br>import { getCollection, type CollectionEntry } from "astro:content";<br><br>const dogs: CollectionEntry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>"dogs"</span><span class="token punctuation">></span></span>[] = await getCollection("dogs");<br>---<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Layout</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Welcome to Astro<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    { dogs.map((dog) => (<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dog</span><br>      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.data.name}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">breed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.data.breed}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">website</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.website}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.body.trim()}<span class="token punctuation">"</span></span><br>    <span class="token punctuation">/></span></span><br>    )) }<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Layout</span><span class="token punctuation">></span></span></code></pre></li><li><p>Here is the <code>Dog</code> component:</p><pre class="language-ts"><code class="language-ts"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><br>  dog<span class="token operator">:</span> CollectionEntry<span class="token operator">&lt;</span><span class="token string">"dogs"</span><span class="token operator">></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> <span class="token punctuation">{</span> dog <span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props<span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> breed<span class="token punctuation">,</span> image<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> dog<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> Content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> dog<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span><br><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-4"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"font-bold"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token keyword">is</span> a <span class="token punctuation">{</span>breed<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>  <span class="token operator">&lt;</span>Content <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>website<span class="token punctuation">}</span><span class="token operator">></span>American Kennel Club<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></li></ul><h2 id="mdx" tabindex="-1">MDX</h2><p>The MDX extension enables using components inside Markdown files. To install this in an Astro project, enter <code>npx astro add mdx</code>.</p><p>If VS Code is being used, install the <a href="https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx?v=1.0.22" rel="noopener" target="_blank">MDX</a> extension from unified.</p><p>Markdown files that wish to render components must have the file extension <code>.mdx</code>.</p><p>For example, here is a component definition in <code>src/components/Greet.astro</code>:</p><pre class="language-html"><code class="language-html">---<br>const { name } = Astro.props;<br>---<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-bold text-red-500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello, {name}!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><p>And here is a content file in <code>src/content/dogs/comet.mdx</code>. Note how it imports and uses the <code>Greet</code> component:</p><pre class="language-html"><code class="language-html">---<br>name: 'Comet'<br>breed: 'Whippet'<br>website: https://www.akc.org/dog-breeds/whippet/<br>---<br><br>import Greet from "../../components/Greet.astro"; He loves the following: - pool<br>balls - basketballs - frisbees<br>![Whippet](https://www.akc.org/wp-content/uploads/2017/11/Whippet-On-White-01.jpg)<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Greet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Comet<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><h2 id="other-frameworks" tabindex="-1">Other Frameworks</h2><p>Astro supports using components from many other frameworks including Alpine, Lit, Preact, React, SolidJS, Svelte, Vue, WebComponents, and more.</p><p>Let's walk through the steps to use a Svelte component.</p><ol><li><p>Install the Svelte integration by entering <code>npx astro add svelte</code>.</p></li><li><p>Define a Svelte component in the <code>src/components</code> directory.</p><p>For example, here is the file <code>Counter.svelte</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token keyword">export</span> <span class="token keyword">let</span> label <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  {#if label}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>{label}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  {/if}<br>  &lt;button disabled={count &lt;= 0} on:click={() => count--}>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>{count}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  &lt;button on:click={() => count++}>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">button, h1</span> <span class="token punctuation">{</span><br>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">.row</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>    <span class="token property">gap</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre></li><li><p>Use the new component in another component or page.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">"@components/Counter.svelte"</span><span class="token punctuation">;</span><br><span class="token operator">...</span><br><span class="token operator">&lt;</span>Counter label<span class="token operator">=</span><span class="token string">"Tally"</span> <span class="token literal-property property">client</span><span class="token operator">:</span>load <span class="token operator">/</span><span class="token operator">></span></code></pre><p>The <code>client:load</code> attribute tells Astro that this component requires client-side JavaScript code.</p></li></ol><h2 id="custom-404-page" tabindex="-1">Custom 404 Page</h2><p>To create a custom 404 page, add the file <code>src/pages/404.astro</code>. This page can import and use layouts and other components just like any other page.</p><p>The following is an example.</p><p><img alt="Astro 404 page" style="width: 30%" src="/blog/assets/astro-404-page.png?v=1.0.22"></p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>    The Web site you seek<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>    cannot be located, but<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>    countless more exist.<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>    No content was found at<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>path<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token keyword">const</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>span<span class="token punctuation">)</span> span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">main</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br>    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>    <span class="token property">gap</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span><br><br>    <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span><br><br>    <span class="token property">background-color</span><span class="token punctuation">:</span> linen<span class="token punctuation">;</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span><br>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">hr</span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">p</span> <span class="token punctuation">{</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><br>    <span class="token property">margin</span><span class="token punctuation">:</span> 1rem 0<span class="token punctuation">;</span><br>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">#path</span> <span class="token punctuation">{</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h2 id="view-transitions" tabindex="-1">View Transitions</h2><p>Astro supports adding <a href="https://docs.astro.build/en/guides/view-transitions/?v=1.0.22" rel="noopener" target="_blank">view transitions</a> that are applied when navigating from one page to another. This includes clicking links implemented with <code>&lt;a&gt;</code> elements and triggering the browser forward and back buttons. For more control over when transitions occur, see <a href="https://docs.astro.build/en/guides/view-transitions/#router-control?v=1.0.22" rel="noopener" target="_blank">router control</a>.</p><p>This feature is built on the Web <a href="https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API?v=1.0.22" rel="noopener" target="_blank">View Transitions API</a>. As of December 2023, the only major web browsers that support this are Chrome and Edge.</p><p>Astro disables all view transitions when the CSS media feature &quot;prefer-reduce-motion&quot; is enabled. This is based on an operating system specific setting. For example, in macOS this is configured in the Settings app under Accessibility ... Display ... Reduce motion.</p><p>For basic fade out, fade in transitions between all pages, modify the layout files used by all the pages as follows. This specifies the transition that should occur when leaving a page.</p><pre class="language-html"><code class="language-html">---<br>import { ViewTransitions } from "astro:transitions";<br>...<br><br>---<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    ...<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ViewTransitions</span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  ...<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>The <code>ViewTransitions</code> component must appear as a child of the <code>head</code> element for <em>any</em> transitions to occur, including custom transitions.</p><p>The built-in transitions include:</p><ul><li><p><code>fade</code></p><p>The current page fades out and new page fades in.</p></li><li><p><code>initial</code></p><p>This uses the browser default transition.</p></li><li><p><code>slide</code></p><p>The current page slides out to the left and new page slides in from the right. The opposite occurs when navigating back to the previous page.</p></li><li><p><code>none</code></p><p>This disables transition animations. It is typically applied to the <code>html</code> element to disable all transition animations for the entire page.</p></li></ul><p>To specify a transition on a specific element (which can be the root element of a page), add the attribute <code>transition:animate=&quot;{transition-type}&quot;</code>. For example, <code>&lt;main transition:animate=&quot;slide&quot;&gt;</code>.</p><p>To customize the transition, pass a configuration object to the transition function. For example, <code>&lt;main transition:animate={slide({ duration: '2s' })}&gt;</code>.</p><p>To define a custom transition, create an object that conforms to the <code>TransitionDirectionalAnimations</code> interface which requires <code>forwards</code> and <code>backwards</code> properties. Those properties must be objects that conform to the <code>TransitionAnimation</code> interface which requires <code>old</code> and <code>new</code> properties.</p><p>For example: TODO: GET THIS TO WORK!</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> spinAnim <span class="token operator">=</span> <span class="token punctuation">{</span><br>  old<span class="token operator">:</span> <span class="token punctuation">{</span><br>    name<span class="token operator">:</span> <span class="token string">'spinOut'</span><span class="token punctuation">,</span><br>    duration<span class="token operator">:</span> <span class="token string">'1s'</span><span class="token punctuation">,</span><br>    easing<span class="token operator">:</span> <span class="token string">'linear'</span><span class="token punctuation">,</span><br>    fillMode<span class="token operator">:</span> <span class="token string">'forwards'</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    name<span class="token operator">:</span> <span class="token string">'spinIn'</span><span class="token punctuation">,</span><br>    duration<span class="token operator">:</span> <span class="token string">'1s'</span><span class="token punctuation">,</span><br>    easing<span class="token operator">:</span> <span class="token string">'linear'</span><span class="token punctuation">,</span><br>    fillMode<span class="token operator">:</span> <span class="token string">'backwards'</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> spin <span class="token operator">=</span> <span class="token punctuation">{</span><br>  forwards<span class="token operator">:</span> spinAnim<span class="token punctuation">,</span><br>  backwards<span class="token operator">:</span> spinAnim<br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>When identical <code>audio</code> and <code>video</code> elements are on both the current page and the next page and they are playing, they will continue playing without interruption through the view transition if they have the <code>transition:persist</code> attribute.</p><p>For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span><br>  <span class="token attr-name">controls</span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/sample.mp3<span class="token punctuation">"</span></span><br>  <span class="token attr-name"><span class="token namespace">transition:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-audio<span class="token punctuation">"</span></span><br>  <span class="token attr-name"><span class="token namespace">transition:</span>persist</span><br><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>audio</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">controls</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">transition-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-video<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">transition:</span>persist</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/bunny-video.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/mp4<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span></code></pre><p>This works for <code>audio</code> elements, but it seems to be broken for <code>video</code> elements.</p><h2 id="api-endpoints" tabindex="-1">API Endpoints</h2><p>Endpoints are defined by <code>.js</code> and <code>.ts</code> files under the <code>src/pages</code> directory. Their URLs are defined by file-based routing, just like UI pages.</p><p>Endpoints can return data in any format including JSON and HTML (perhaps for use with HTMX). However, currently endpoints cannot use Astro components to generate HTML. That capability is planned for the future. For now, see the HTMX section below which uses Astro pages as endpoints.</p><p>The following code in the file <code>src/pages/pets/dog.json.ts</code> demonstrates creating an endpoint that returns JSON created from data found in the collection defined in the previous section.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>getCollection<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">CollectionEntry</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro:content'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> dogs<span class="token operator">:</span> CollectionEntry<span class="token operator">&lt;</span><span class="token string">'dogs'</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCollection</span><span class="token punctuation">(</span><span class="token string">'dogs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> dogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dog <span class="token operator">=></span> dog<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>To demonstrate defining endpoints that support CRUD operations we will see code that performs these on a collection of todo objects. Each object has the properties <code>id</code>, <code>text</code>, and <code>completed</code>.</p><p>API endpoints are defined by the functions <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code>. Each of this take an <code>APIContext</code> object that contains the following properties:</p><ul><li><code>params</code>: an object containing properties that match the dynamic segments of the route.</li><li><code>props</code>: an object containing properties supplied by the getStaticPaths function (only available in server-side rendering)</li><li><code>request</code>: a Request object that contains the method, url, headers, and body</li><li><code>clientAddress</code></li><li><code>cookies</code></li><li><code>generator</code></li><li><code>locals</code></li><li><code>redirect</code></li><li><code>site</code></li><li><code>url</code></li></ul><p>We need to share the collection of todos between two source files. One way to accomplish this is to create a source file that creates and exports the collection. This file can be imported by other source files that need to access the collection. The following file in <code>src/pages/todo-state.ts</code> does this.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">Todo</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><br>  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  completed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> todoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> Todo<span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The endpoints defined in <code>src/pages/todos.ts</code> do two things:</p><ul><li>retrieve all the todos as a JSON array</li><li>create a new todo, returning its JSON</li></ul><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>APIContext<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>todoMap<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./todos-state.ts'</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> lastId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// used by addTodo and POST functions</span><br><br><span class="token comment">// Add some initial todos.</span><br><span class="token keyword">function</span> <span class="token function">addTodo</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> todo <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token operator">++</span>lastId<span class="token punctuation">,</span> text<span class="token punctuation">,</span> completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  todoMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token string">'buy milk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token string">'cut grass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>todoMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">POST</span><span class="token punctuation">(</span><span class="token punctuation">{</span>request<span class="token punctuation">}</span><span class="token operator">:</span> APIContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> todo <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">.</span>completed <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> todo<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token operator">++</span>lastId<span class="token punctuation">;</span><br>  todo<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span><br>  todoMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">201</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The endpoints defined in <code>src/pages/todos/[id].ts</code> do four things:</p><ul><li>retrieve a todo as JSON</li><li>update a todo with JSON</li><li>patch a todo with JSON</li><li>delete a todo</li></ul><p>Files with square brackets in the name define dynamic routes where path parameters are used. In this case the path parameter is the id of a todo.</p><p>Dynamic routes can be used for both pages and API endpoints.</p><p>Dynamic routes require enabling SSR. To do this, enter <code>npx astro add node</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>APIContext<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>todoMap<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../todos-state.ts'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token punctuation">{</span>params<span class="token punctuation">}</span><span class="token operator">:</span> APIContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> idNumber <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> todo <span class="token operator">=</span> todoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">PUT</span><span class="token punctuation">(</span><span class="token punctuation">{</span>params<span class="token punctuation">,</span> request<span class="token punctuation">}</span><span class="token operator">:</span> APIContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> idNumber <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> todo <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  todo<span class="token punctuation">.</span>id <span class="token operator">=</span> idNumber<span class="token punctuation">;</span> <span class="token comment">// ensures the id matches the path parameter</span><br>  <span class="token keyword">const</span> exists <span class="token operator">=</span> todoMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> todoMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> status <span class="token operator">=</span> exists <span class="token operator">?</span> <span class="token number">200</span> <span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">PATCH</span><span class="token punctuation">(</span><span class="token punctuation">{</span>params<span class="token punctuation">,</span> request<span class="token punctuation">}</span><span class="token operator">:</span> APIContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> idNumber <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> updates <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  updates<span class="token punctuation">.</span>id <span class="token operator">=</span> idNumber<span class="token punctuation">;</span> <span class="token comment">// ensures the id matches the path parameter</span><br>  <span class="token keyword">let</span> todo <span class="token operator">=</span> todoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>todo<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    todo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>todo<span class="token punctuation">,</span> <span class="token operator">...</span>updates<span class="token punctuation">}</span><span class="token punctuation">;</span><br>    todoMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">,</span> todo<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> status <span class="token operator">=</span> todo <span class="token operator">?</span> <span class="token number">200</span> <span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">DELETE</span><span class="token punctuation">(</span><span class="token punctuation">{</span>params<span class="token punctuation">,</span> request<span class="token punctuation">}</span><span class="token operator">:</span> APIContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">'missing "id" parameter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> idNumber <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> status <span class="token operator">=</span> todoMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>idNumber<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">200</span> <span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>When starting the server, include the <code>--host</code> option to enable using <code>localhost</code> in URLs that hit the endpoints. For example, the <code>dev</code> and <code>start</code> scripts in <code>package.json</code> should match the following:</p><pre class="language-json"><code class="language-json">    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"astro dev --host"</span><span class="token punctuation">,</span><br>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"astro dev --host"</span><span class="token punctuation">,</span></code></pre><p>For more detail, see <a href="https://docs.astro.build/en/core-concepts/endpoints/#server-endpoints-api-routes?v=1.0.22" rel="noopener" target="_blank">Server Endpoints (API Routes)</a>.</p><h2 id="htmx" tabindex="-1">HTMX</h2><p>Astro added support for &quot;partials&quot; which make it more natural to use HTMX. For an example app that combines Astro and HTMX, see <a href="https://github.com/mvolkmann/astro-htmx-todo-app?v=1.0.22" rel="noopener" target="_blank">astro-htmx-todo-app</a>. This uses Astro page as endpoints.</p><p>HTTP requests with any verb can target an Astro page. The component script can determine which verb was used and respond accordingly.</p><h2 id="internationalization" tabindex="-1">Internationalization</h2><p>Astro supports <a href="https://docs.astro.build/en/guides/internationalization/?v=1.0.22" rel="noopener" target="_blank">internationalization</a>.</p><p>The Astro approach is it to duplicate each component for each supported language and store them in directories whose names are language codes. This is a bad approach because any changes require modifying multiple files.</p><p>TODO: Describe how to use this.</p><h2 id="starlight" tabindex="-1">Starlight</h2><p><a href="https://starlight.astro.build?v=1.0.22" rel="noopener" target="_blank">Starlight</a> is a documentation theme built on Astro.</p><p>TODO: Describe how to use this.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://astro.build?v=1.0.22" rel="noopener" target="_blank">Astro Home Page</a></li><li><a href="https://www.youtube.com/watch?v=XoIHKO6AkoM?v=1.0.22" rel="noopener" target="_blank">Astro Quick Start Course</a> by Traversy Media</li></ul><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>What are the benefits of using the tailwind typography plug-in?</p><p>Learn about enabling SSR so pages are not generated at build time and are instead generated on demand. Is that how it works?</p><p>Learn about Astro support for pagination.</p><p>What is the reasonable number of markdown documents to have in a collection where if you need more then you should use a database?</p><p>Learn about and document using the Astro Dev toolbar that appears at the bottom of the page in the browser when running in dev mode.</p></article>