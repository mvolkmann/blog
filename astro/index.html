<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Astro</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#creating-a-project">Creating a Project</a></li><li><a href="#using-vscode">Using VSCode</a></li><li><a href="#astro-components">Astro Components</a></li><li><a href="#styling">Styling</a></li><li><a href="#layouts">Layouts</a></li><li><a href="#images">Images</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#collections">Collections</a></li><li><a href="#api-endpoints">API Endpoints</a></li><li><a href="#resources">Resources</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>img {
        border: 1px solid gray;
    }</style><figure style="width: 40%"><img alt="Astro logo" style="border: 0" src="/blog/assets/astro-logo.svg?v=1.0.22"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://astro.build?v=1.0.22" rel="noopener" target="_blank">Astro</a> is &quot;the web framework for content-driven websites&quot;. It can be used to generate static sites, build server-side rendered (SSR) sites, and define API endpoints.</p><p>A major focus of Astro is shipping less JavaScript code to browsers and doing more work on the server side.</p><p>Astro supports using many kinds of UI components including Astro, Alpine, Lit, Preact, React, SolidJS, Svelte, Vue, WebComponents, and more.</p><p>Astro uses the Island architecture which enables combining the use of multiple web UI frameworks in a single application. HTML is rendered on the server and with placeholders for dynamic regions. These placeholders are hydrated on the client-side.</p><p>Astro supports SSR adapters for Cloudflare, Netlify, Node, and Vercel.</p><p>Astro provides integrations with Tailwind for CSS styling and a few other packages.</p><p>Astro provides file-based routing that is specified by the files and directories under the <code>src/pages</code> directory.</p><p>Astro was created by <a href="http://fredkschott.com/about/?v=1.0.22" rel="noopener" target="_blank">Fred K. Schott</a>. Fred previously worked on WebComponents at Google and was on the Polymer team. He also created <a href="https://www.snowpack.dev?v=1.0.22" rel="noopener" target="_blank">Snowpack</a>, &quot;a lightning-fast frontend build tool&quot;, that is no longer maintained. The functionality of Snowpack was superseded by <a href="https://vitejs.dev?v=1.0.22" rel="noopener" target="_blank">Vite</a> which is used as the build tool in Astro.</p><h2 id="creating-a-project" tabindex="-1">Creating a Project</h2><p>Enter <code>npm create astro@latest</code>. This will prompt for the following:</p><ul><li>permission to install create-astro</li><li>&quot;Where should we created your new project?&quot; Enter a directory path that can begin with &quot;./&quot;. Enter just &quot;.&quot; to create the project in the current directory.</li><li>&quot;How would you like to start your new project?&quot; with the options &quot;Include sample files&quot;, &quot;Use blog template&quot;, and &quot;Empty&quot;.</li><li>&quot;Install dependencies?&quot; Yes or No</li><li>&quot;Do you plan to write TypeScript?&quot; Yes or No</li><li>&quot;How strict should TypeScript be? Strict, Strictest, or Relaxed</li><li>&quot;Initialize a new git repository? Yes or No</li></ul><p>Once the project is created, follow the instructions that are output.</p><ul><li><code>cd</code> to the newly created directory.</li><li>Setup Typescript types by entering <code>npx astro sync</code>.</li><li>Optionally enter <code>npx astro add tailwind</code> to add support for Tailwind CSS styling.</li><li>Enter <code>npm run dev</code> or <code>npm run start</code> to start a local server. Both do the same thing.</li><li>Browse localhost:4321 (the default port).</li></ul><p>Hot reloading is automatically configured so saved changes are automatically reflected in the browser.</p><p>The file <code>astro.config.mjs</code> defines all the Astro configuration options including adapters and extensions (like Tailwind).</p><p>The <code>src/pages</code> directory contains component source files that represent complete pages of the app. Initially this will only contain the file <code>index.astro.</code></p><p>The <code>src/components</code> directory contains component source files that can be used in page components. Initially this will only contain the file <code>index.astro.</code></p><p>The <code>src/layouts</code> directory contains source files that define the boilerplate HTML used by pages.</p><p>The <code>public</code> directory holds assets such as audio, images, and video.</p><p>To build the site for production, enter <code>npm run build</code>.</p><p>To preview the built site, enter <code>npm run preview</code> and browse localhost:4321.</p><p>To see a list of the available &quot;astro&quot; commands, enter <code>npm run astro</code>.</p><p>To open the Astro documentation in the default web browser, enter <code>npm run astro docs</code>.</p><h2 id="using-vscode" tabindex="-1">Using VSCode</h2><p>The <a href="https://marketplace.visualstudio.com/items?itemName=astro-build.astro-vscode?v=1.0.22" rel="noopener" target="_blank">Astro</a> extension from astro.build provides syntax highlighting, intellisense, and more.</p><p>To configure code formatting, open any <code>.astro</code> file, open the Command Palette, and enter &quot;Format Document&quot;. It will prompt for configuring this and automatically do so.</p><h2 id="astro-components" tabindex="-1">Astro Components</h2><p>Astro components are defined in source files with a <code>.astro</code> extension. These describe HTML that will be rendered on the server. This can contain three sections:</p><ul><li><p>optional component script</p><p>This section begins and ends with lines that only contain three dashes, referred to as &quot;code fences&quot;. This is is the same syntax that is used in Markdown files for &quot;front matter&quot;. Write JavaScript code inside the code fences. If TypeScript was enabled for the project, it can be used here. This code can:</p><ul><li><p>import other files with ESM syntax</p></li><li><p>declare types, such as the type of the props it accepts</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span> <span class="token comment">// TODO: Does this need to use "interface" instead?</span><br>  prop1<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// optional prop</span><br>  prop2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// required prop</span><br><span class="token punctuation">}</span></code></pre></li><li><p>use destructuring to get the values of props</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token punctuation">{</span>prop1 <span class="token operator">=</span> <span class="token string">'default value'</span><span class="token punctuation">,</span> prop2<span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props <span class="token keyword">as</span> Props<span class="token punctuation">;</span></code></pre></li><li><p>declare variables that can be used in the HTML that follows</p></li><li><p>declare functions that can be called in the HTML that follows</p></li><li><p>use the Fetch API with top-level <code>await</code> to get data from API endpoints</p></li></ul></li><li><p>HTML to be rendered</p><p>This section uses a JSX-like syntax.</p><p>A root element is not required, but the fragment syntax from React is supported (<code>&lt;&gt;...&lt;/&gt;</code>).</p><p>To insert the value of a JavaScript expression, use <code>{expression}</code>. This can appear in element attribute values and content.</p><p>Conditional logic uses the same syntax as in React. For example, <code>{condition &amp;&amp; HTML}</code> or <code>{condition ? HTML1 : HTML2}</code>.</p><p>Iteration also uses the same approach as in React. For example, <code>{collection.map(element =&gt; HTML)}</code>.</p><p>Expressions in curly braces are not reactive. The <code>.astro</code> files are rendered on the server only one time.</p></li><li><p>optional <code>style</code> tag</p><p>This defines CSS rules that are scoped to this component.</p></li></ul><h2 id="styling" tabindex="-1">Styling</h2><p>As described above, components defined in <code>.astro</code> files can include a <code>style</code> tag that defines CSS rules that are scoped to the component.</p><p>Global styles can be defined in two ways. One way is to include a style tag in a layout source file that is used by many pages. TODO: Does this need to use <code>&lt;style is:global&gt;</code>? Another way is to define a file like <code>global.css</code> in the <code>src</code> or <code>src/styles</code> directory and include it in all the page components that wish to use it as follows.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token string">'../styles/global.css'</span><span class="token punctuation">;</span></code></pre><h2 id="layouts" tabindex="-1">Layouts</h2><p>The <code>src/layouts</code> directory can contain <code>.astro</code> files that describe common content that should appear in many pages.</p><p>For example, the file <code>src/layouts/Layout.astro</code> could contain the following. Note the use of <code>&lt;slot /&gt;</code> to specify where content will be inserted into the layout. TODO: Are named slots supported?</p><pre class="language-js"><code class="language-js"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props<span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">></span><br><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"description"</span> content<span class="token operator">=</span><span class="token string">"Astro description"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"icon"</span> type<span class="token operator">=</span><span class="token string">"image/svg+xml"</span> href<span class="token operator">=</span><span class="token string">"/favicon.svg"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"generator"</span> content<span class="token operator">=</span><span class="token punctuation">{</span>Astro<span class="token punctuation">.</span>generator<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>slot <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><br><span class="token operator">&lt;</span>style is<span class="token operator">:</span>global<span class="token operator">></span><br>  html <span class="token punctuation">{</span><br>    font<span class="token operator">-</span>family<span class="token operator">:</span> system<span class="token operator">-</span>ui<span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><p>This layout can be used in a page <code>.astro</code> file as follows. Attribute syntax is used to pass props to components. Note how the <code>title</code> prop value is passed to the <code>Layout</code> component.</p><pre class="language-js"><code class="language-js"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../layouts/Layout.astro"</span><span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"My Page"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>main<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>My Page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span></code></pre><h2 id="images" tabindex="-1">Images</h2><p>Images can be placed under the <code>public</code> directory, typically in <code>public/images</code>. These can be referenced using a path string that is relative to the <code>public</code> directory. For example, <code>&lt;img alt=&quot;logo&quot; src=&quot;/images/logo.png&quot; /&gt;</code> searches from the public directory. Astro will not provide image optimization for images in this location.</p><p>In order to take advantage of image optimizations, place images under the <code>src/images</code> directory, import them into JavaScript code, and render them using the provided <code>Image</code> component.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Image <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"astro:assets"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> logo from ‘<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>images<span class="token operator">/</span>logo<span class="token punctuation">.</span>png’<span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>Image alt<span class="token operator">=</span><span class="token string">"logo"</span> src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">300</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>From the documentation at <a href="https://docs.astro.build/en/guides/images/?v=1.0.22" rel="noopener" target="_blank">Images</a>, The <code>Image</code> component &quot;can transform a local or authorized remote image’s dimensions, file type, and quality for control over your displayed image. The resulting <code>&lt;img&gt;</code> tag includes <code>alt</code>, <code>loading</code>, and <code>decoding</code> attributes and infers image dimensions to avoid Cumulative Layout Shift (CLS).&quot;</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>Code in the component script section is only run on the server-side. This means functions defined there cannot be used for client-side event handling.</p><p>One way specify client-side JavaScript code is to place it in a script tag within the HTML section. For example:</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">"my-btn"</span><span class="token operator">></span>Press Me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br><br><span class="token operator">&lt;</span>script<span class="token operator">></span><br>  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'got click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">const</span> myBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  myBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h2 id="collections" tabindex="-1">Collections</h2><p>Astro supports describing and retrieving collections of data from Markdown files.</p><p>The following steps can be taken to define and render a collection of dogs.</p><ul><li><p>Create the directory <code>src/content</code>.</p></li><li><p>Create the file <code>config.ts</code> in this directory. This file defines each of the collections. It uses <a href="https://zod.dev?v=1.0.22" rel="noopener" target="_blank">Zod</a> to describe the schema of each collection. The schema defines which front matter properties are valid. For example, the following describes a single collection named &quot;dogs&quot;.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>defineCollection<span class="token punctuation">,</span> z<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro:content'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> dogs <span class="token operator">=</span> <span class="token function">defineCollection</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  type<span class="token operator">:</span> <span class="token string">'content'</span><span class="token punctuation">,</span><br>  schema<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    breed<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> collections <span class="token operator">=</span> <span class="token punctuation">{</span>dogs<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li><li><p>Create the directory <code>src/content/dogs</code>.</p></li><li><p>Create one Markdown file for each dog inside this directory. For example:</p><pre class="language-md"><code class="language-md"><span class="token front-matter-block"><span class="token punctuation">---</span><br><span class="token front-matter yaml language-yaml">name: 'Comet'<br>breed: 'Whippet'<br>slug: https://www.akc.org/dog-breeds/whippet/</span><br><span class="token punctuation">---</span></span><br><br>Comet loves pool balls and basketballs.</code></pre><p>Note the use of front matter to describe properties of this instance.</p></li><li><p>Access the collection in a component. For example:</p><p><img alt="Astro Dogs" style="width: 50%" src="/blog/assets/astro-dogs.png?v=1.0.22"></p><pre class="language-html"><code class="language-html">---<br>import Layout from "../../layouts/Layout.astro";<br>import Dog from "../../components/Dog.astro";<br>import { getCollection, type CollectionEntry } from "astro:content";<br><br>const dogs: CollectionEntry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>"dogs"</span><span class="token punctuation">></span></span>[] = await getCollection("dogs");<br>---<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Layout</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Welcome to Astro<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    { dogs.map((dog) => (<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dog</span><br>      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.data.name}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">breed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.data.breed}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">slug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.slug}<span class="token punctuation">"</span></span><br>      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{dog.body.trim()}<span class="token punctuation">"</span></span><br>    <span class="token punctuation">/></span></span><br>    )) }<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Layout</span><span class="token punctuation">></span></span></code></pre></li><li><p>Here is the <code>Dog</code> component:</p><pre class="language-ts"><code class="language-ts"><span class="token operator">--</span><span class="token operator">-</span><br><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><br>breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>slug<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token punctuation">{</span> breed<span class="token punctuation">,</span> content<span class="token punctuation">,</span> name<span class="token punctuation">,</span> slug <span class="token punctuation">}</span> <span class="token operator">=</span> Astro<span class="token punctuation">.</span>props<span class="token punctuation">;</span><br><span class="token operator">--</span><span class="token operator">-</span><br><br><span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span><br><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-4"</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"font-bold"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token keyword">is</span> a <span class="token punctuation">{</span>breed<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>  <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>slug<span class="token punctuation">}</span><span class="token operator">></span>American Kennel Club<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></li></ul><h2 id="api-endpoints" tabindex="-1">API Endpoints</h2><p>Endpoints are defined by <code>.js</code> and <code>.ts</code> files under the <code>src/pages</code> directory. Their URLs are defined by file-based routing, just like UI pages.</p><p>Endpoints can return data in any format including JSON and HTML (for HTMX).</p><p>The following code in the file <code>src/pages/pets/dog.json.ts</code> demonstrates creating an endpoint that returns JSON created from data found in the collection defined in the previous section.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>getCollection<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">CollectionEntry</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'astro:content'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> dogs<span class="token operator">:</span> CollectionEntry<span class="token operator">&lt;</span><span class="token string">'dogs'</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCollection</span><span class="token punctuation">(</span><span class="token string">'dogs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> dogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dog <span class="token operator">=></span> dog<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Endpoints can use path and query parameters. The following code in the file <code>src/pages/pets/[id].json.ts</code> demonstrates creating an endpoint that returns JSON for a specific dog.</p><pre class="language-ts"><code class="language-ts"></code></pre><p>For more detail, see <a href="https://docs.astro.build/en/core-concepts/endpoints/#static-file-endpoints?v=1.0.22" rel="noopener" target="_blank">Static File Endpoints</a>.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://astro.build?v=1.0.22" rel="noopener" target="_blank">Astro Home Page</a></li><li><a href="https://www.youtube.com/watch?v=XoIHKO6AkoM?v=1.0.22" rel="noopener" target="_blank">Astro Quick Start Course</a> by Traversy Media</li></ul><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>File-based routing works as you would expect. /foo/bar refers to src/pages/foo/bar.astro.</p><p>The code fence at the top of a .astro file is also called the component script. it is like Markdown front matter. can import data from a JSON file here. Everything in the components script stays on the server. None of the variables are functions defined their are sent to the browser. output from console.log calls appear where the server is running, not in the browser place code that should run in the browser inside a script tag that appears after the component script.</p><p>can define multiple layout files to use different ones and specific pages. is it the case that page components cannot use the slot element and only layout components can do that? is there a syntax to import files starting from the src directory to avoid using ../ ? can create the file src/constants.ts that export site-wide constants. import and use these where needed. don’t need to export the definition of the Props type in a component. can you define the Props type using either the interface or type keyword? to create a custom 404 page, add the file src/pages/404.astro. This page can also import and use layouts and other components.</p><p>you can define collections of data as Markdown files under the src/content directory. create the file config.ts under the src/content directory. This file … see email on defining collections. The schema for collections uses zod.</p><p>when do you need to run npx astro sync ? this sets up typescript types. Does it do anything else?</p></article>