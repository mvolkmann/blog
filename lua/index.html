<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Lua</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#where-used">Where Used</a></li><li><a href="#installing">Installing</a></li><li><a href="#resources">Resources</a></li><li><a href="#cheat-sheets">Cheat Sheets</a></li><li><a href="#source-files">Source Files</a></li><li><a href="#keywords">Keywords</a></li><li><a href="#comments">Comments</a></li><li><a href="#types">Types</a></li><li><a href="#variables">Variables</a></li><li><a href="#booleans">Booleans</a></li><li><a href="#numbers">Numbers</a></li><li><a href="#strings">Strings</a></li><li><a href="#operators">Operators</a></li><li><a href="#conditional-logic">Conditional Logic</a></li><li><a href="#iteration">Iteration</a></li><li><a href="#functions">Functions</a></li><li><a href="#data-structures">Data Structures</a><ol><li><a href="#tables">Tables</a></li></ol></li><li><a href="#standard-library">Standard Library</a></li><li><a href="#math-module">math module</a></li><li><a href="#multitasking">Multitasking</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://www.lua.org/?v=1.0.20" rel="noopener" target="_blank">Lua</a> is a dynamically typed scripting language created in 1993 by a team at <a href="http://www.puc-rio.br?v=1.0.20" rel="noopener" target="_blank">Pontifical Catholic University of Rio de Janeiro</a> in Brazil.</p><p>Lua is considered to be the fastest scripting language. Compared to Python, Lua is simpler (only 21 keywords) and faster.</p><p>The Lua programming language was named after the Moon.</p><p>One reason Lua is popular is that it is easy to embed in a C/C++ application. It is easy to run C code from Lua and run Lua code from C.</p><p>Lua has a relatively small standard library, but has a large collection of packages that can be installed using the <a href="https://luarocks.org?v=1.0.20" rel="noopener" target="_blank">LuaRocks</a> package manager.</p><h2 id="where-used" tabindex="-1">Where Used</h2><p>Notable uses of Lua include:</p><ul><li><a href="https://www.minecraft.net/?v=1.0.20" rel="noopener" target="_blank">Minecraft</a> game</li><li><a href="https://www.roblox.com?v=1.0.20" rel="noopener" target="_blank">Roblox</a> game</li><li><a href="http://www.legoengineering.com/platform/nxt/?v=1.0.20" rel="noopener" target="_blank">Lego Mindstorms NXT</a></li><li><a href="https://neovim.io?v=1.0.20" rel="noopener" target="_blank">Neovim</a> text editor</li><li><a href="https://redis.io?v=1.0.20" rel="noopener" target="_blank">Redis</a> database</li></ul><p>For an extensive, see the <a href="https://en.wikipedia.org/wiki/List_of_applications_using_Lua?v=1.0.20" rel="noopener" target="_blank">List of applications using Lua</a> Wikipedia page.</p><h2 id="installing" tabindex="-1">Installing</h2><p>Lua can be installed in macOS using Homebrew. Enter <code>brew install lua</code> to install it and enter <code>lua -v</code> to verify that it worked and see the version.</p><p>For installing in other operating systems, see <a href="http://www.lua.org/start.html?v=1.0.20" rel="noopener" target="_blank">Getting Started</a>.</p><p>To experiment with Lua on the web without installing anything, see <a href="http://www.lua.org/demo.html?v=1.0.20" rel="noopener" target="_blank">Lua Demo</a>.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://www.lua.org/manual/?v=1.0.20" rel="noopener" target="_blank">Lua Reference Manual</a></li><li><a href="https://www.amazon.com/exec/obidos/ASIN/8590379868/lua-pilindex-20?v=1.0.20" rel="noopener" target="_blank">Programming in Lua</a> book</li></ul><h2 id="cheat-sheets" tabindex="-1">Cheat Sheets</h2><ul><li><a href="https://www.codecademy.com/learn/learn-lua/modules/learn-lua-introduction/cheatsheet?v=1.0.20" rel="noopener" target="_blank">codecademy</a></li><li><a href="https://devhints.io/lua?v=1.0.20" rel="noopener" target="_blank">DevHints.io</a></li><li><a href="https://cheatography.com/srgmc/cheat-sheets/lua-scripting-5-1/?v=1.0.20" rel="noopener" target="_blank">Cheatography</a></li></ul><h2 id="source-files" tabindex="-1">Source Files</h2><p>Source files have a <code>.lua</code> extension. To execute a source file, enter <code>lua filename.lua</code>.</p><p>A source file can use the variables and functions defined in another source file by using the <code>require</code> function. For example:</p><pre class="language-lua"><code class="language-lua">require <span class="token string">"other"</span></code></pre><h2 id="keywords" tabindex="-1">Keywords</h2><p>Lua only defines 21 keywords. Some of the keywords such as <code>end</code>, <code>and</code>, <code>or</code>, and <code>then</code> make the syntax similar to the Ruby programming language.</p><p>Boolean literal values:</p><ul><li>true</li><li>false</li></ul><p>Conditional Logic:</p><ul><li>if</li><li>then</li><li>elseif</li><li>else</li></ul><p>Functions:</p><ul><li>function</li><li>return</li></ul><p>Iteration:</p><ul><li>for: loop over numbers or pairs</li><li>in: specifies what to loop over</li><li>while: top-tested loop</li><li>repeat and until: bottom-tested loop</li><li>break: exit loop early</li></ul><p>Logical Operators:</p><ul><li>and</li><li>or</li><li>not</li></ul><p>Variables:</p><ul><li>local</li></ul><p>Other:</p><ul><li>do: begins a new lexical block</li><li>end: marks the end of a lexical block</li><li>nil: represents having no value</li></ul><h2 id="comments" tabindex="-1">Comments</h2><p>Single-line comments begin with two dashes. Multiline comments are delimited by <code>--[[</code> and <code>--]]</code>.</p><h2 id="types" tabindex="-1">Types</h2><p>Lua uses dynamic types. The types of variables and function parameters are never specified and are always inferred.</p><h2 id="variables" tabindex="-1">Variables</h2><p>Variables are global by default. Use the <code>local</code> keyword to make scoped to their environment.</p><p>Variables with no assigned value have the value <code>nil</code>.</p><p>New values of any type can be assigned to a variable at any time.</p><p>The <code>type(someVar)</code> function returns a string containing the type name of the variable value. This can be <code>nil</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, <code>table</code>, or <code>function</code>.</p><h2 id="booleans" tabindex="-1">Booleans</h2><p>Boolean literal values are <code>true</code> and <code>false</code>.</p><h2 id="numbers" tabindex="-1">Numbers</h2><p>TODO: Are all numbers represented by double-precision floating point?</p><h2 id="strings" tabindex="-1">Strings</h2><p>Strings can be delimited with either single or double quotes.</p><p>String indexes start from zero.</p><p>Use the <code>..</code> operator to concatenate strings. For example, <code>fullName = firstName .. ' ' .. lastName</code>.</p><p>TODO: Does Lua support string interpolation?</p><p>String operations include:</p><ul><li><code>string.len(var)</code> or <code>#var</code></li><li><code>string.gsub(source, oldValue, newValue)</code></li><li><code>string.find(source, target)</code></li><li><code>string.upper(var)</code></li><li><code>string.lower(var)</code></li></ul><h2 id="operators" tabindex="-1">Operators</h2><p>Lua supports the following mathematical operators:</p><ul><li><code>+</code> addition</li><li><code>-</code> subtraction</li><li><code>*</code> multiplication</li><li><code>/</code> division</li><li><code>%</code> modulo</li></ul><p>The ++ and — operators are not supported. Lua supports the following relational operators:</p><ul><li><code>==</code> equal</li><li><code>~=</code> not equal</li><li><code>&lt;</code> less than</li><li><code>&gt;</code> greater than</li><li><code>&lt;=</code> less than or equal to</li><li><code>&gt;=</code> greater than or equal to</li></ul><p>Lua supports the following logical operators:</p><ul><li><code>and</code></li><li><code>or</code></li><li><code>not</code></li></ul><p>Lua does not support shorthand assignment operators like +=. Adding a number to a variable must be done with <code>myVar = myVar + n</code>.</p><h2 id="conditional-logic" tabindex="-1">Conditional Logic</h2><p>Parentheses are not required around conditions.</p><p>In an <code>if</code> statement, the <code>elseif</code> and <code>else</code> blocks shown below are optional.</p><p>All the parts of the <code>if</code> statement can be written on a single line if desired.</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">if</span> condition <span class="token keyword">then</span><br>  <span class="token punctuation">...</span><br><span class="token keyword">elseif</span> condition <span class="token keyword">then</span><br>  <span class="token punctuation">...</span><br><span class="token keyword">else</span><br>  <span class="token punctuation">...</span><br><span class="token keyword">end</span></code></pre><p>Lua does not have a <code>switch</code> statement or an equivalent.</p><p>Lua does not have a ternary operator, but the same functionality can be achieved with the following:</p><pre class="language-lua"><code class="language-lua">let result <span class="token operator">=</span> condition <span class="token keyword">and</span> trueValue <span class="token keyword">or</span> falseValue</code></pre><h2 id="iteration" tabindex="-1">Iteration</h2><pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">do</span><br>  <span class="token punctuation">...</span><br><span class="token keyword">end</span><br><br><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span><br>  <span class="token punctuation">...</span><br><span class="token keyword">end</span><br><br><span class="token keyword">while</span> condition <span class="token keyword">do</span> — top<span class="token operator">-</span>tested<br>  <span class="token punctuation">...</span><br><span class="token keyword">end</span><br><br><br><span class="token keyword">repeat</span> — bottom<span class="token operator">-</span>tested<br>  <span class="token punctuation">...</span><br><span class="token keyword">until</span> condition</code></pre><p>Loops can use the <code>break</code> keyword, but the <code>continue</code> keyword is not supported.</p><h2 id="functions" tabindex="-1">Functions</h2><p>Functions are defined with the <code>function</code> keyword.</p><p>For example:</p><pre class="language-lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span><br>  <span class="token keyword">return</span> n1 <span class="token operator">+</span> n2<br><span class="token keyword">end</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- 5</span></code></pre><p>Functions in Lua are first-class. This means they can take other functions as arguments and can return functions.</p><h2 id="data-structures" tabindex="-1">Data Structures</h2><p>Lua only provides one data structure called a &quot;table&quot;. It can represent arrays, dictionaries, trees, and graphs.</p><p>Lua does not support defining classes. Instead it uses a combination of tables and functions for everything.</p><h3 id="tables" tabindex="-1">Tables</h3><p>A table is an associative array. Values for keys are defined integer values by default starting from 1. Tables are indexed starting from 1 instead of 0.</p><p>To iterate over keys and values, use a <code>for</code> loop with the <code>pairs</code> function.</p><h2 id="standard-library" tabindex="-1">Standard Library</h2><ul><li><a href="https://www.lua.org/manual/5.4/manual.html#6.1" target="_blank">basic</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.2" target="_blank">coroutine</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.10" target="_blank">debug</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.8" target="_blank">io</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.7" target="_blank">math</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.3" target="_blank">modules/package</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.9" target="_blank">os</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.4" target="_blank">string</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.6" target="_blank">table</a></li><li><a href="https://www.lua.org/manual/5.4/manual.html#6.5" target="_blank">utf8</a></li></ul><h2 id="math-module" tabindex="-1">math module</h2><p>Random numbers:</p><ul><li><code>math.randomseed(os.time())</code> seeds the random number generator</li><li><code>math.random()</code> returns a number in the range [0, 1)</li><li><code>math.random(10)</code> returns a number in the range [0, 10)</li><li><code>math.random(5, 10)</code> returns a nubmer in the range [5, 10)</li><li><code>print(string.format('pi is %.2f', math.pi)</code> outputs <code>pi is 3.14</code></li></ul><p>Trigonometry functions:</p><ul><li><p><code>math.sin(angle)</code></p></li><li><p><code>math.cos(angle)</code></p></li><li><p><code>math.tan(angle)</code></p></li><li><p>TODO: Add more!</p></li></ul><h2 id="multitasking" tabindex="-1">Multitasking</h2><p>Lua supports collaborative multitasking with coroutines.</p><pre class="language-lua"><code class="language-lua">co <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><br>…<br>coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>“intermediate value”<span class="token punctuation">)</span><br>…<br><span class="token keyword">return</span> “final value”<br><span class="token keyword">end</span><span class="token punctuation">)</span><br><br>v1 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">)</span><br>v2 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">)</span><br>v3 <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">)</span> — error</code></pre><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>Can Lua be compiled to an executable?</p><p>Delimit multiline strings with [[and]] Can multiline comments end with just ]] instead of —]] ?</p><p>An alternative to the print function is io.write. What is the difference?</p><p>#someVar when someVar holds a string gives its length.</p><p>Can convert between types. tostring(numberOrBoolean) toboolean? tonumber?</p><p>input = io.read()</p></article>