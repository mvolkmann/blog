<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><link rel="stylesheet" href="/blog/assets/github-extensions.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>D3 data/enter/exit</h2><aside><nav class="toc"><ol><li><a href="#data-method">data method</a></li><li><a href="#enter-and-exit-methods">enter and exit methods</a></li></ol></nav></aside><article><h2 id="data-method" tabindex="-1">data method</h2><p>The data method &quot;joins&quot; data values in an array to DOM elements. By default it does this by index. The first data array value is joined to the first target DOM element, and so on.</p><p>For example, the following HTML contains an ordered list with three empty list items. The variable <code>letters</code> is an array holding three letters. We first select all the DOM list items. Then we use the <code>data</code> method to set their text to the values in the <code>letters</code> array.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>D3 data basic demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>      <span class="token keyword">const</span> letters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">const</span> lis <span class="token operator">=</span> d3<br>        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>letters<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=></span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>The <code>data</code> method associates data values with the DOM elements to which they are added by setting the property <code>__data__</code> to the value. For example, the first <code>li</code> DOM element above will have a <code>__data__</code> property set to <code>a</code>. To see this in the browser DevTools, enter the following in the Console: <code>document.querySelector('li').__data__</code>.</p><p>There are three possibilities to consider when the <code>data</code> method joins data values to DOM elements.</p><ol><li>The number of data values is equal to the number target DOM elements.</li><li>There are more data values, so new target DOM elements to be added.</li><li>There are fewer data values, so some target DOM elements need to be removed.</li></ol><p>The <code>data</code> method supports the last two possibilities by returning what is referred to as an &quot;update selection&quot;. This holds two collections referred to as the &quot;enter selection&quot; and &quot;exit selection&quot;. If the number of data values is greater than the number of targeted DOM elements, the excess data values are placed in the enter selection. If the number of targeted DOM elements is greater than the number of data values, the excess DOM elements are placed in the &quot;exit selection&quot;.</p><h2 id="enter-and-exit-methods" tabindex="-1">enter and exit methods</h2><p>The <code>enter</code> and <code>exit</code> methods are useful when rendering data where the target DOM elements do not exist yet or the number of data values can change, perhaps in response to user interactions.</p><p>The <code>enter</code> and <code>exit</code> methods can be called on an update selection returned by the <code>data</code> method. The <code>enter</code> method iterates over its enter selection. The <code>exit</code> method iterates over its exit selection.</p><p>The example below illustrates this. The variable <code>letters</code> holds an array of letters, 'a' through 'e'. These are rendered as list items in an ordered list by calling the <code>populateList</code> function. The ordered list begins with two empty list items. These list items have assigned CSS class names so we can identify them when inspecting the DOM.</p><p>Since we initially have more data values (5) than list items (2), new list items need to be created. After the initial data values are used to populate the existing list items, the <code>enter</code> method iterates over the remaining data values. We follow this with a call to append a new list item and then set its text. Note that the text is the uppercase version of the letter so it's easy to see which list items were populated using <code>enter</code>.</p><p>Pressing the &quot;Remove One&quot; button invokes the <code>removeOne</code> function. This removes the last element from the <code>letters</code> array and calls the <code>populateList</code> function again. Now there are five list item elements, so there is no work for the <code>enter</code> method to do. We can tell that the <code>enter</code> method isn't responsible for any of the current list item values because all of them are lowercase letters now.</p><p>The <code>exit</code> method iterates over the unused list item DOM elements. Since we went from having five data values to four, there is now one unused list item DOM element. We follow the call to <code>exit</code> with a call to <code>remove</code> to remove the excess DOM elements. Without this line of code, the list item DOM element for 'e' would still be present.</p><p>This process repeats each time the &quot;Remove One&quot; button is pressed, removing one more value for the end of the <code>letters</code> array and removing one more list item element from the DOM.</p><p>Pressing the &quot;Add One&quot; button invokes the <code>addOne</code> function. This adds an <code>x</code> to the end of the <code>letters</code> array and calls the <code>populateList</code> function again. Now there is work for the <code>enter</code> method to do because there are not enough list item DOM elements to hold all the values in the <code>letters</code> array. We can tell that the <code>enter</code> method is responsible for adding the new value because it will be uppercase.</p><p>In typical usage, initially there are no existing target DOM elements to hold data values and they all need to be created using the <code>enter</code> method.</p><p>The <code>exit</code> method is only needed if the number of data values might be reduced after they are initially rendered. If the <code>exit</code> method is not used, excess DOM elements will be retained.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>D3 enter/exit demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>second<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Add One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">removeOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Remove One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>      <span class="token keyword">const</span> letters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">function</span> <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> lis <span class="token operator">=</span> d3<br>          <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token comment">// A - see B below</span><br>          <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>letters<span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=></span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        lis<br>          <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token comment">// B - should match element at A above</span><br>          <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        lis<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">function</span> <span class="token function">addOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        letters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">function</span> <span class="token function">removeOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        letters<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>In the example above, we call <code>selectAll</code> with &quot;li&quot; and also call <code>append</code> with &quot;li&quot;. The important thing is that we select elements that match those we will create. Another option is to select elements with certain CSS class, perhaps using <code>'.my-class'</code>, and create elements that have that class, perhaps using <code>.append('div').attr('class', 'my-class')</code>.</p><p>The <code>data</code> method can be passed a second argument that is a function. This takes a data value and returns a string that uniquely identifies the data value. This provides an alternative to joining data values to DOM elements by index. When this approach is used, changes to data that is already joined to a DOM element result in the same DOM elements being updated and their order within their parent element is maintained.</p><p>Here is an example that demonstrates this:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>D3 enter/exit demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Add One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Remove First<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>Remove Last<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>      <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tami'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Amanda'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'purple'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Jeremy'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">}</span><br>      <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">const</span> <span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=></span> person<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' likes '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>color<span class="token punctuation">;</span><br><br>      <span class="token keyword">function</span> <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> lis <span class="token operator">=</span> d3<br>          <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><br><br>          <span class="token comment">// With no key function, this uses the existing li elements.</span><br>          <span class="token comment">//.data(people)</span><br><br>          <span class="token comment">// With a key function, this doesn't use</span><br>          <span class="token comment">// existing li elements because keys don't match.</span><br>          <span class="token comment">// The person argument is undefined when the empty</span><br>          <span class="token comment">// li elements are processed in the first call.</span><br>          <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token parameter">person</span> <span class="token operator">=></span> <span class="token punctuation">(</span>person <span class="token operator">?</span> person<span class="token punctuation">.</span>name <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>          <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        lis<br>          <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><br>          <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=></span> <span class="token function">toString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        lis<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">function</span> <span class="token function">addOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        people<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'brown'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">function</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        people<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token comment">// Passing a key function to the data method above</span><br>        <span class="token comment">// allows the exiting li elements that match data</span><br>        <span class="token comment">// to retain their position in the list despite this sort.</span><br>        <span class="token comment">// If the key function is not passed, the list will be reordered</span><br>        <span class="token comment">// to match this sorted order.</span><br>        people<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p1<span class="token punctuation">,</span> p2</span><span class="token punctuation">)</span> <span class="token operator">=></span> p1<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'enter-exit-people.html removeFirst: people ='</span><span class="token punctuation">,</span> people<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">function</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        people<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token function">populateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>For another explanation of the <code>data</code>, <code>enter</code>, and <code>exit</code> methods, see <a href="https://medium.com/@c_behrens/enter-update-exit-6cafc6014c36">https://medium.com/@c_behrens/enter-update-exit-6cafc6014c36</a>,</p><p>For a detailed explanation of the internals, see Mike Bostock's article &quot;How Selections Work&quot; at <a href="https://bost.ocks.org/mike/selection/">https://bost.ocks.org/mike/selection/</a>.</p></article>