<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Supporting IE11 in Svelte</h2><aside></aside><article><p>Polyfills are required in order for a Svelte app to run in IE11. Here are the steps required:</p><ol><li><p>Add the following in <code>public/index.html</code> before the <code>script</code> tag for <code>bundle.js</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://polyfill.io/v3/polyfill.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Add the following in <code>rollup.config.js</code> just before the line <code>production &amp;&amp; terser()</code>:</p><pre class="language-js"><code class="language-js"><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  babelHelpers<span class="token operator">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span><br>  extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.mjs'</span><span class="token punctuation">,</span> <span class="token string">'.html'</span><span class="token punctuation">,</span> <span class="token string">'.svelte'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  exclude<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules/@babel/**'</span><span class="token punctuation">,</span> <span class="token string">'node_modules/core-js/**'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  presets<span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">[</span><br>      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span><br>      <span class="token punctuation">{</span><br>        targets<span class="token operator">:</span> <span class="token punctuation">{</span><br>          ie<span class="token operator">:</span> <span class="token string">'11'</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span><br>        corejs<span class="token operator">:</span> <span class="token number">3</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">'@babel/plugin-syntax-dynamic-import'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">[</span><br>      <span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">,</span><br>      <span class="token punctuation">{</span><br>        useESModules<span class="token operator">:</span> <span class="token boolean">true</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre></li><li><p>Enter <code>npm install -D</code> for each of these packages:</p><ul><li>@babel/plugin-syntax-dynamic-import</li><li>@babel/plugin-transform-runtime</li><li>@babel/runtime</li><li>@rollup/plugin-babel</li><li>corejs</li><li>whatwg-fetch</li></ul></li><li><p>In each source file where the Fetch API is being used, add the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">'whatwg-fetch'</span><span class="token punctuation">;</span></code></pre></li><li><p>Remove all use of CSS variables.</p></li><li><p>Test all uses of CSS flexbox and grid layout. There are some bugs in the IE11 implementation of these.</p></li></ol><p>UnfortunatelyÂ all the polyfills make the generated <code>bundle.js</code> file much bigger. For one app the size changed from 52K to 410K.</p></article>