<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Gleam</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#installing">Installing</a></li><li><a href="#vs-code">VS Code</a></li><li><a href="#projects">Projects</a></li><li><a href="#dependencies">Dependencies</a></li><li><a href="#importing-packages">Importing Packages</a></li><li><a href="#type-inference">Type Inference</a></li><li><a href="#error-handling">Error Handling</a></li><li><a href="#currying">Currying</a></li><li><a href="#web-development">Web Development</a></li></ol></nav></aside><article><figure style="width: 30%"><img alt="Gleam logo" style="border: 0" src="/blog/assets/gleam-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://gleam.run?v=1.1.1" rel="noopener" target="_blank">Gleam</a> is &quot;a friendly language for building type-safe systems that scale!&quot; It runs on Beam, the Erlang virtual machine. Gleam programs can be compiled to Erlang or JavaScript.</p><p>Gleam has a syntax that is inspired by Elm, OCaml, and Rust. Like OCaml, Gleam has strong type inference, making it unnecessary to specify types.</p><p>Gleam includes a compiler (implemented in Rust), build tool, package manager, code formatter, language server, standard library, JavaScript bindings, and a WASM API. It was released in 2024.</p><p>Gleam programs can use libraries implemented in Gleam, Elixir, and Erlang.</p><p>The Gleam logo is a pink starfish named Lucy that glows underwater.</p><h2 id="installing" tabindex="-1">Installing</h2><p>To install in macOS, enter <code>brew update</code>, <code>brew install erlang</code>, and <code>brew install gleam</code>. For other platforms, see <a href="https://gleam.run/getting-started/installing/" target="_blank">Installing Gleam</a>.</p><h2 id="vs-code" tabindex="-1">VS Code</h2><p>To edit Gleam code using VS Code, consider installing the extension Gleam by Gleam.</p><p>Code formatting will not be performed on save by default. To configure it, open the Command Palette, select Format Document, and choose &quot;Gleam&quot;. After doing this one time, code will be formatted on save.</p><h2 id="projects" tabindex="-1">Projects</h2><p>To create a new Gleam project, enter <code>gleam new {name}</code>.</p><p>This creates the following files:</p><ul><li><code>.github/workflows/test.yml</code></li><li><code>.gitignore</code></li><li><code>README.md</code></li><li><code>gleam.toml</code></li><li><code>src/{name}.gleam</code></li><li><code>test/{name}_test.gleam</code></li></ul><p>Gleam source files have the <code>.gleam</code> file extension.</p><p>To format all the <code>.gleam</code> files in the project from the command-line rather than in an editor like VS Code, enter <code>gleam format</code>. The code formatter automatically sorts <code>import</code> statements.</p><p>To run the project, enter <code>gleam run</code>.</p><p>This compiles the project into Erlang files (<code>.erl</code> extension) that can be found in the <code>build/dev/erlang/{name}/_gleam_artefacts</code> directory. It then runs the <code>main</code> function in the <code>.gleam</code> file within the <code>src</code> directory identified by the <code>name</code> property in the <code>gleam.toml</code> file. It will output a log of all the steps it takes, and finally &quot;Hello from {name}!&quot;.</p><p>To compile to JavaScript instead of Erlang, add the <code>--target</code> (or <code>-t</code>) option with the value <code>javascript</code> (default is <code>erlang</code>). For example, <code>gleam run -t javascript</code>. This compiles the project into JavaScript files (<code>.mjs</code> extension for JavaScript modules) that can be found in the <code>build/dev/javascript/{name}</code> directory. It will output a log of all the steps it takes, and finally produce the same output as when using Erlang.</p><p>Each source file defines a module. To run a different module, specify it with the <code>--module</code> or <code>-m</code> option. For example, <code>gleam run -m other</code> runs the <code>main</code> function in the file <code>src/other.gleam</code>.</p><p>To run all the tests, enter <code>gleam test</code>.</p><p>This will output a log of all the steps it takes, and finally &quot;1 tests, 0 failures&quot;.</p><h2 id="dependencies" tabindex="-1">Dependencies</h2><p>To add a dependency, enter <code>gleam add {name1} {name2} ...</code></p><p>This updates the <code>gleam.toml</code> file and installs the packages in the <code>build/packages</code> directory.</p><p>The <code>build</code> directory can be deleted. It will be recreated automatically when <code>gleam run</code> or <code>gleam test</code> are executed. All packages listed as &quot;dependencies&quot; or &quot;dev-dependencies&quot; in the <code>gleam.toml</code> file will be re-installed.</p><h2 id="importing-packages" tabindex="-1">Importing Packages</h2><p>To import a package in a Gleam source file:</p><pre class="language-ocaml"><code class="language-ocaml">import <span class="token punctuation">{</span>name<span class="token punctuation">}</span></code></pre><p>Some packages have subpackages. To import a subpackage:</p><pre class="language-ocaml"><code class="language-ocaml">import <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span>sub<span class="token operator">-</span>name<span class="token punctuation">}</span></code></pre><p>The line <code>import gleam/io</code> makes the module name <code>io</code> available as a prefix that can be used to access all the functions it defines. For example, <code>io.println(&quot;Hello, World!&quot;)</code>.</p><p>A module can be given an alternate name with the <code>as</code> keyword. This can be used to prevent name conflicts. For example, <code>import gleam/string as text</code>.</p><p>Module functions can be imported to enable using them without a module name qualifier. For example, <code>import gleam/io.{debug, println}</code>. followed by <code>println(&quot;Hello, World!&quot;)</code>.</p><p>The <code>as</code> keyword can also be used to assign alternate names to imported functions. For example:</p><pre class="language-ocaml"><code class="language-ocaml">import gleam<span class="token operator">/</span>int<span class="token punctuation">.</span><span class="token punctuation">{</span>square_root <span class="token keyword">as</span> sqrt<span class="token punctuation">}</span></code></pre><p>The Gleam community discourages the use of function calls that are not qualified by their module name.</p><h2 id="type-inference" tabindex="-1">Type Inference</h2><p>Gleam infers the types of all variables, function parameters, and function return types. Types can be specified for documentation purposes, but they must match the inferred types.</p><p>The Gleam language server, used by VS Code Gleam extension, enables hovering over a variable, function defintion, or function call to display their inferred types in a popup.</p><p>For example:</p><pre class="language-ocaml"><code class="language-ocaml"><span class="token operator">//</span> No types specified<span class="token punctuation">.</span><br>fn add<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  a <span class="token operator">+</span> b<br><span class="token punctuation">}</span><br><br><span class="token operator">//</span> Types specified<span class="token punctuation">.</span><br>fn subtract<span class="token punctuation">(</span>a<span class="token punctuation">:</span> Int<span class="token punctuation">,</span> b<span class="token punctuation">:</span> Int<span class="token punctuation">)</span> <span class="token operator">-></span> Int <span class="token punctuation">{</span><br>  a <span class="token operator">-</span> b<br><span class="token punctuation">}</span></code></pre><p>Just like OCaml, Gleam supports different operators for integer and floating point values.</p><h2 id="error-handling" tabindex="-1">Error Handling</h2><p>Many Gleam functions return a Result type which holds either an <code>Ok</code> or an <code>Error</code> value. There are several ways to handle this that are demonstrated below. Note that the <code>square_root</code> function produces an error when passed a negative number.</p><pre class="language-ocaml"><code class="language-ocaml">import gleam<span class="token operator">/</span>float<br>import gleam<span class="token operator">/</span>int<br>import gleam<span class="token operator">/</span>io<span class="token punctuation">.</span><span class="token punctuation">{</span>debug<span class="token punctuation">,</span> println<span class="token punctuation">}</span><br>import gleam<span class="token operator">/</span>result<br><br>pub fn main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token operator">//</span> All case branches must have the same result <span class="token keyword">type</span><span class="token punctuation">.</span><br>  <span class="token operator">//</span> Here all case braches have a Float result<span class="token punctuation">.</span><br>  case int<span class="token punctuation">.</span>square_root<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Ok<span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">-></span> result<br>    Error<span class="token punctuation">(</span><span class="token punctuation">_</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token number">0.0</span><br>  <span class="token punctuation">}</span><br>  <span class="token operator">|></span> debug<br><br>  <span class="token operator">//</span> Here all case braches have a String result<span class="token punctuation">.</span><br>  case int<span class="token punctuation">.</span>square_root<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Ok<span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">-></span> float<span class="token punctuation">.</span>to_string<span class="token punctuation">(</span>r<span class="token punctuation">)</span><br>    Error<span class="token punctuation">(</span><span class="token punctuation">_</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token string">"No real root"</span><br>  <span class="token punctuation">}</span><br>  <span class="token operator">|></span> debug<br><br>  <span class="token operator">//</span> <span class="token keyword">assert</span> causes a crash the <span class="token keyword">function</span> after <span class="token operator">=</span> results <span class="token keyword">in</span> an Error<span class="token punctuation">.</span><br>  <span class="token keyword">let</span> <span class="token keyword">assert</span> Ok<span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=</span> int<span class="token punctuation">.</span>square_root<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><br>  debug<span class="token punctuation">(</span>result<span class="token punctuation">)</span><br><br>  <span class="token operator">//</span> result<span class="token punctuation">.</span>unwrap takes a <span class="token keyword">value</span> <span class="token keyword">of</span> <span class="token keyword">type</span> Result <span class="token operator">and</span><br>  <span class="token operator">//</span> returns its OK <span class="token keyword">value</span> <span class="token operator">or</span> the supplied <span class="token keyword">value</span> on Error<span class="token punctuation">.</span><br>  <span class="token operator">-</span><span class="token number">25</span><br>  <span class="token operator">|></span> int<span class="token punctuation">.</span>square_root<br>  <span class="token operator">|></span> result<span class="token punctuation">.</span>unwrap<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><br>  <span class="token operator">//</span> returns supplied <span class="token keyword">value</span> on Error<br>  <span class="token operator">|></span> debug<br><span class="token punctuation">}</span></code></pre><h2 id="currying" tabindex="-1">Currying</h2><p>Unlike OCaml, Gleam does not provide automatic function currying. Calling a function with fewer arguments than it has parameters results in an error rather than returning a new function that expects the remaining arguments.</p><p>The <code>gleam/function</code> module defines the functions <code>curry2</code> through <code>curry6</code> where the number indicates the number of parameters in a function passed to it. A new function is returned that is curried, meaning it takes a single argument and returns another function that takes a single argument, repeatedly until all arguments are supported. For example:</p><pre class="language-ocaml"><code class="language-ocaml">import gleam<span class="token operator">/</span><span class="token keyword">function</span><br>import gleam<span class="token operator">/</span>io<br><br>fn add2<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  a <span class="token operator">+</span> b<br><span class="token punctuation">}</span><br><br>fn add3<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  a <span class="token operator">+</span> b <span class="token operator">+</span> c<br><span class="token punctuation">}</span><br><br>pub fn main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token operator">//</span> The <span class="token keyword">type</span> <span class="token keyword">of</span> plus10 is fn<span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-></span> Int<span class="token punctuation">.</span><br>  <span class="token keyword">let</span> plus10 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">.</span>curry2<span class="token punctuation">(</span>add2<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><br>  debug<span class="token punctuation">(</span>plus10<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">19</span><br><br>  <span class="token operator">//</span> The <span class="token keyword">type</span> <span class="token keyword">of</span> curried_add3 is fn<span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-></span> fn<span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-></span> fn<span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-></span> Int<span class="token punctuation">.</span><br>  <span class="token keyword">let</span> curried_add3 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">.</span>curry3<span class="token punctuation">(</span>add3<span class="token punctuation">)</span><br>  debug<span class="token punctuation">(</span>curried_add3<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">6</span><br><span class="token punctuation">}</span></code></pre><h2 id="web-development" tabindex="-1">Web Development</h2><p>Gleam web development is supported by many libraries including gleam_http, lustre, mist, ...</p></article>