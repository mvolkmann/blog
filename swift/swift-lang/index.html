<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Swift Language</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#installing">Installing</a></li><li><a href="#editing">Editing</a><ol><li><a href="#getting-started-with-vs-code">Getting Started with VS Code</a></li></ol></li><li><a href="#using-the-interpreter">Using the Interpreter</a></li><li><a href="#global-print-function">Global print Function</a></li><li><a href="#packages">Packages</a></li><li><a href="#libraries">Libraries</a></li><li><a href="#comments">Comments</a></li><li><a href="#operators">Operators</a></li><li><a href="#functions">Functions</a></li><li><a href="#closures">Closures</a></li><li><a href="#error-handling">Error Handling</a></li><li><a href="#type-aliases">Type Aliases</a></li><li><a href="#primitive-types">Primitive Types</a><ol><li><a href="#bool-type">Bool Type</a></li><li><a href="#numeric-types">Numeric Types</a></li><li><a href="#measurement-type">Measurement Type</a></li><li><a href="#string-and-character-type">String and Character Type</a></li><li><a href="#character-type">Character Type</a></li></ol></li><li><a href="#dates">Dates</a></li><li><a href="#ranges">Ranges</a></li><li><a href="#enumerations">Enumerations</a></li><li><a href="#generics">Generics</a></li><li><a href="#some-keyword">some keyword</a></li><li><a href="#any-keyword">any keyword</a></li><li><a href="#built-in-collection-types">Built-in Collection Types</a><ol><li><a href="#arrays">Arrays</a></li><li><a href="#sets">Sets</a></li><li><a href="#dictionaries">Dictionaries</a></li><li><a href="#tuples">Tuples</a></li></ol></li><li><a href="#variables">Variables</a></li><li><a href="#type-checking-and-casting">Type Checking and Casting</a></li><li><a href="#optionals">Optionals</a></li><li><a href="#control-structures">Control Structures</a><ol><li><a href="#conditional-logic">Conditional Logic</a></li><li><a href="#iteration">Iteration</a></li></ol></li><li><a href="#structs">Structs</a></li><li><a href="#classes">Classes</a></li><li><a href="#initializers">Initializers</a></li><li><a href="#protocols">Protocols</a><ol><li><a href="#protocol-extensions">Protocol Extensions</a></li><li><a href="#where-clauses">where Clauses</a></li><li><a href="#protocol-associated-types">Protocol Associated Types</a></li></ol></li><li><a href="#extensions">Extensions</a></li><li><a href="#some-keyword-1">some Keyword</a></li><li><a href="#implementing-operators">Implementing Operators</a></li><li><a href="#access-control">Access Control</a></li><li><a href="#json">JSON</a></li><li><a href="#concurrency">Concurrency</a></li><li><a href="#file-i%2Fo">File I/O</a></li><li><a href="#threads">Threads</a></li><li><a href="#asyncstream">AsyncStream</a></li><li><a href="#asyncalgorithms">AsyncAlgorithms</a></li><li><a href="#actors">Actors</a></li><li><a href="#http">HTTP</a></li><li><a href="#instruments">Instruments</a></li><li><a href="#shell-commands">Shell Commands</a></li><li><a href="#compiler-directives">Compiler Directives</a></li><li><a href="#logging">Logging</a></li><li><a href="#tools">Tools</a><ol><li><a href="#simulator">Simulator</a></li><li><a href="#pragma-marks">Pragma Marks</a></li><li><a href="#app-icons">App Icons</a></li><li><a href="#running-on-a-device">Running on a Device</a></li><li><a href="#code-formatting">Code Formatting</a></li><li><a href="#source-control">Source Control</a></li><li><a href="#xcode-issues">Xcode Issues</a></li><li><a href="#vs-code">VS Code</a></li><li><a href="#fastlane">Fastlane</a></li></ol></li><li><a href="#apple-developer-program">Apple Developer Program</a></li><li><a href="#annoyances">Annoyances</a></li><li><a href="#questions">Questions</a></li></ol></nav></aside><article><p><img alt="Swift logo" style="width: 30%" src="/blog/assets/swift-logo.png?v=1.0.20" title="Swift logo"></p><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://swift.org?v=1.0.20" rel="noopener" target="_blank">Swift</a> is an open source programming language created by Apple. Key facts about Swift include the following:</p><ul><li>introduced by Apple at the 2014 WWDC conference</li><li>became open source under an Apache license in December 2015</li><li>goals are to be safe, fast, and expressive</li><li>a compiled language, but there is also an interpreter</li><li>strongly typed with type inference</li><li>supports both object-oriented and functional programming</li><li>a big language with a large number of features and a corresponding learning curve</li><li>can be used to build applications for macOS, iOS, and Watch OS</li><li>can be used to build command-line and server-side applications</li><li>has six major types: structs, classes, enums, protocols, functions, and generics</li><li>supports tuples</li><li>standout features include computed properties, closure syntax, trailing closures, key paths, and a succinct way to refer to enum cases when their type can be inferred</li><li>built on <a href="https://llvm.org?v=1.0.20" rel="noopener" target="_blank">LLVM</a> (Low Level Virtual Machine)</li><li>interoperates with <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/?v=1.0.20" rel="noopener" target="_blank">Objective-C</a> code</li><li>includes a <a href="https://developer.apple.com/documentation/swift/swift_standard_library?v=1.0.20" rel="noopener" target="_blank">Standard Library</a></li><li>compiler is slow, not swift</li><li>language makes some efforts to be concise, but also uses many long keywords and method names</li></ul><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p>Swift home page - <a href="https://swift.org?v=1.0.20" rel="noopener" target="_blank">https://swift.org</a></p></li><li><p><a href="https://docs.swift.org/swift-book/?v=1.0.20" rel="noopener" target="_blank">The Swift Programming Language Book</a></p></li><li><p><a href="https://www.apple.com/swift/playgrounds/?v=1.0.20" rel="noopener" target="_blank">Swift Playgrounds</a> iOS app - free</p></li><li><p><a href="https://www.youtube.com/c/PaulHudson?v=1.0.20" rel="noopener" target="_blank">Hacking with Swift</a> video series on Swift and SwiftUI by Paul Hudson (@twostraws) - free</p></li><li><p><a href="https://www.hackingwithswift.com/100?v=1.0.20" rel="noopener" target="_blank">100 Days of Swift</a> by Paul Hudson (@twostraws) - free</p></li><li><p><a href="https://www.youtube.com/channel/UCp25X4LzOLaksp5qY0YMUzg?v=1.0.20" rel="noopener" target="_blank">Swiftful Thinking</a> YouTube videos by Nick Sarno - free</p></li><li><p><a href="https://www.swiftbysundell.com?v=1.0.20" rel="noopener" target="_blank">Swift by Sundell</a> by John Sundell</p></li><li><p><a href="https://www.youtube.com/c/StewartLynch?v=1.0.20" rel="noopener" target="_blank">CreaTECH Solutions</a> YouTube videos by StewartLynch- free</p></li><li><p><a href="https://seanallen.co?v=1.0.20" rel="noopener" target="_blank">Sean Allen</a> YouTube videos and paid courses</p></li><li><p><a href="https://codewithchris.com/swift-tutorial/?v=1.0.20" rel="noopener" target="_blank">Code With Chris</a> by Chris Ching</p></li><li><p><a href="https://cs193p.sites.stanford.edu?v=1.0.20" rel="noopener" target="_blank">Stanford CS193p - Developing Apps for iOS</a> course by Paul Hegarty - free</p></li><li><p><a href="https://www.udemy.com/course/ios-13-app-development-bootcamp/?v=1.0.20" rel="noopener" target="_blank">iOS &amp; Swift - The Complete iOS App Development Bootcamp</a> Udemy course by Angela Yu - $14.99</p></li></ul><h2 id="installing" tabindex="-1">Installing</h2><p>Swift can be installed on macOS, Windows 10, Amazon Linux 2, CentOS, and Ubuntu.</p><p>To install Swift on macOS, install Xcode from the macOS App Store. For other operating systems, download it from <a href="https://swift.org/download/?v=1.0.20" rel="noopener" target="_blank">Download Swift</a>.</p><h2 id="editing" tabindex="-1">Editing</h2><p>Most Swift developers use Xcode as their editor/IDE. However, there are good reasons to use VS Code in addition to Xcode.</p><p>VS Code as the following advantages over Xcode:</p><ul><li>There is a built-way to format code every time changes to a file are saved. To format code in Xcode, select the lines to be formatted and press ctrl-shift-i. Xcode can be configured to run <a href="/blog/topics/#/blog/swift/SwiftFormat/?v=1.0.20" rel="noopener" target="_blank">SwiftFormat</a> on save, but this requires a number of undocumented steps. SwiftFormat is a separate tool that is similar to a combination of the JavaScript tools ESLint (with autofix) and Prettier.</li><li>Git integration is better. You can see at a glance which files have been added or modified and see side-by-side diffs without initiating a commit.</li><li>Snippet support is much better. A snippet can refer to built-in variables for inserting things like the current file name and placeholders can be repeated so the same entered text can be inserted in multiple places.</li><li>Files in the Navigator pane are always listed in alphabetical order.</li><li>The Vim support in VS Code (provided by the Vim extension) is far better than the Vim support in Xcode (enabled by checking &quot;Vim mode&quot; on the Editor menu). In VS Code, the dot command (for repeating the last command) and macros (for recording and repeating a sequence of operations) are supported.</li></ul><p>However, Xcode also has the following advantages over VS Code:</p><ul><li>Syntax error messages are displayed inline with the code where they appear.</li><li>iOS projects can be run in the Simulator and on devices directly from Xcode.</li></ul><p>I recommend simultaneously opening a project in both VS Code and Xcode and switching between them as needed to get the benefits of both. When a change is made to a file that is open in both, the other will automatically update to show the change.</p><h3 id="getting-started-with-vs-code" tabindex="-1">Getting Started with VS Code</h3><p>Install the Swift and SwiftFormat extensions.</p><p>In &quot;User Settings&quot; under Text Editor ... Formatting, enable &quot;Format on Save&quot;.</p><p>Create the file <code>.swiftformat</code> in the top project directory with contents like the following:</p><pre class="language-text"><code class="language-text">--maxwidth 80<br>--ranges no-space<br>--swiftversion 5.6</code></pre><p>For more options supported by SwiftFormat, see <a href="https://github.com/nicklockwood/SwiftFormat/blob/master/Rules.md?v=1.0.20" rel="noopener" target="_blank">Rules</a>.</p><h2 id="using-the-interpreter" tabindex="-1">Using the Interpreter</h2><p>To start the interpreter as a REPL (Read Eval Print Loop), enter <code>swift</code>. Then enter Swift statements to be evaluated. For example, enter <code>print(1 + 2)</code>.</p><p>To run the interpreter on code in a file, enter <code>swift {file-path}</code>. For example, create the file <code>greet.swift</code> containing <code>print(&quot;Hello, World!&quot;)</code> and enter <code>swift greet.swift</code> to run it.</p><p>Interpreter commands begin with a colon. The most commonly used commands are described in the table below.</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>:exit</code></td><td>exits the interpreter</td></tr><tr><td><code>:help</code></td><td>prints help on all REPL commands</td></tr></tbody></table><h2 id="global-print-function" tabindex="-1">Global <code>print</code> Function</h2><p>The global <a href="https://developer.apple.com/documentation/swift/print(_:separator:terminator:)?v=1.0.20" rel="noopener" target="_blank">print</a> function takes any number of arguments and prints them to stdout.</p><p>The literal expressions <code>#file</code>, <code>#fileID</code>, <code>#function</code>, <code>#line</code>, and <code>#column</code> can be used to provide context. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token literal constant">#fileID</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token literal constant">#function</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> score ="</span></span><span class="token punctuation">,</span> score<span class="token punctuation">)</span></code></pre><h2 id="packages" tabindex="-1">Packages</h2><p>The <a href="https://www.swift.org/package-manager/?v=1.0.20" rel="noopener" target="_blank">Swift Package Manager</a> is a &quot;tool for managing the distribution of Swift code&quot;. It is similar to npm for JavaScript. Installing the Swift compiler also installs the Swift package manager.</p><p>To install a package in Xcode:</p><ul><li>select File ... Add Packages...</li><li>Enter the GitHub URL of a package in the search input in the upper-right.</li><li>Select the package</li><li>Click the &quot;Add Package&quot; button.</li></ul><h2 id="libraries" tabindex="-1">Libraries</h2><p>Xcode is aware of many standard libraries such as SwiftUI and UIKit. To use the public types, functions, and values that a library defines, import them. For example, <code>import SwiftUI</code>.</p><p>Packages that are added to a project as described in the previous section must also be imported.</p><p>It is possible for two libraries/packages to define the same names. One approach to resolve such conflicts is to prefix the names with the name of the library/package. For example, <code>SwiftUI.List</code>. Another approach is to define type aliases and use those names. For example, <code>typealias SUIList = SwiftUI.List</code>.</p><h2 id="comments" tabindex="-1">Comments</h2><p>Single-line comments begin with <code>//</code>. Multi-line comments are delimited by <code>/*</code> and <code>*/</code>. Multi-line comments can be nested which makes it easy to comment out blocks of code that contain multi-line comments. Documentation comments begin with <code>///</code> and appear before type definitions. This documentation appears when a name is option-clicked in Xcode.</p><p>Xcode can toggle whether lines are commented. To comment/uncomment the current line or selected lines, press cmd-/.</p><p>Comments whose purpose is to remind you to make a change later can be written in three ways:</p><ul><li><p><code>// TODO: some text</code></p><p>This approach is not flagged when the project is built.</p></li><li><p><code>#warning(&quot;some text&quot;)</code></p><p>This approach results in a warning message when the project is built which makes it less likely to be overlooked than a TODO comment. The project will still build successfully.</p></li><li><p><code>#error(&quot;some text&quot;)</code></p><p>This approach results in an error message when the project is built which makes it impossible to forget because the project will not build.</p></li></ul><h2 id="operators" tabindex="-1">Operators</h2><table><thead><tr><th>Category</th><th>Operators</th></tr></thead><tbody><tr><td>equal</td><td><code>==</code> (equal), <code>!=</code> (not equal)</td></tr><tr><td>identical</td><td><code>===</code> (identical), <code>!==</code> (not identical)</td></tr><tr><td>relational</td><td><code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&gt;</code></td></tr><tr><td>pattern match</td><td><code>~=</code></td></tr><tr><td>logical</td><td><code>&amp;&amp;</code> (and), <code>||</code>, (or), <code>!</code> (not)</td></tr><tr><td>ternary</td><td>condition <code>?</code> true-value <code>:</code> false-value</td></tr><tr><td>mathematical</td><td><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code> (mod)</td></tr><tr><td>assignment</td><td><code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code></td></tr><tr><td>concatenation</td><td><code>+</code></td></tr><tr><td>unary sign</td><td><code>+</code> (positive), <code>-</code> (negative)</td></tr><tr><td>closed range</td><td><code>a...b</code> (inclusive upper), <code>a..&lt;b</code> (exclusive upper)</td></tr><tr><td>open range</td><td><code>a...</code>, <code>...b</code>, <code>..&lt;b</code></td></tr><tr><td>nil-coalescing</td><td>a <code>??</code> b (value is <code>a</code> if not nil and <code>b</code> otherwise)</td></tr><tr><td>bit shift</td><td><code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&amp;&lt;&lt;</code>, <code>&amp;&gt;&gt;</code></td></tr><tr><td>bitwise</td><td><code>&amp;</code> (and), <code>|</code> (or), <code>^</code> (xor)</td></tr><tr><td>types</td><td><code>is</code> (type check), <code>as</code>, <code>as?</code>, <code>as!</code> (type cast)</td></tr></tbody></table><p>The binary mathematical operators require the variables on each side to have the same type. For example, a <code>Float</code> cannot be divided by an <code>Int</code>. When the types differ, one side must be cast to the type of the other side.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">8.0</span><br><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">3</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token number">8.0</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// both sides are literals so allowed; 2.666...</span><br><span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// one side is literal so allowed; same result</span><br><span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">/</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// variables on both sides so cast required; same result</span></code></pre><p>When an <code>Int</code> is divided by an <code>Int</code> using the <code>/</code> operator, the result is truncated to an <code>Int</code>, not rounded.</p><p>The nil coalescing operator in <code>a ?? b</code> is shorthand for <code>a != nil ? a! : b</code>. This is often used to provide a default value to use when <code>a</code> is <code>nil</code>.</p><p>Swift supports optional chaining with the <code>?.</code> operator so chains of references to optional values (see the &quot;Optionals&quot; section later) do not have to check for nil values. See the example in the Structs section.</p><h2 id="functions" tabindex="-1">Functions</h2><p>Functions are defined using the <code>func</code> keyword, followed by the function name, the parameter list in parentheses, and an optional return type preceded by <code>-&gt;</code>. The parentheses are required even for functions that have no parameters.</p><p>When the return type of a function cannot be inferred and no return type is specified, it defaults to the <code>Void</code> type The <code>Void</code> type has a single value which is an empty tuple (<code>()</code>).</p><p>To call a function, specify the function name followed by arguments in parentheses. The parentheses are required even when not passing any arguments.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Hello, World!"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// outputs Hello, World!</span></code></pre><p>Parameters must have a name and type. They can also have an &quot;argument label&quot; that is the name callers must use when providing a value. The argument label defaults to the parameter name. Typically argument labels are omitted and callers use the parameter names.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">order</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token class-name">Item</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Place order and get order number.</span><br>    <span class="token keyword">return</span> orderNumber<br><span class="token punctuation">}</span><br><span class="token keyword">let</span> orderNumber <span class="token operator">=</span> <span class="token function">order</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"chicken fried rice"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre><p>All function parameters are treated as <code>let</code> constants. This prevents function code from assigning new values to them. This also applies to the properties of objects passed to functions.</p><p>Swift does not support a shorthand syntax for calling functions when in-scope variables have the same names are argument labels.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"chicken fried rice"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> quantity <span class="token operator">=</span> <span class="token number">2</span><br><span class="token comment">//let orderNumber = order(item, quantity) // doesn't work</span><br><span class="token keyword">let</span> orderNumber <span class="token operator">=</span> <span class="token function">order</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> item<span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> quantity<span class="token punctuation">)</span></code></pre><p>When an argument label is underscore, it is a positional argument. The function must be called with only a value for that parameter. Otherwise calls must include the argument label. A function can have a mixture of parameters with argument labels and positional parameters.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> n2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> n1 <span class="token operator">+</span> n2<br><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span></code></pre><p>If the body of the function is a single expression, the <code>return</code> keyword` is not required to return its value. The previous function can rewritten as follows:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> n2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>    n1 <span class="token operator">+</span> n2<br><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span></code></pre><p>If the return type can be inferred, the return type can be omitted. The previous function can rewritten as follows:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> n2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    n1 <span class="token operator">+</span> n2<br><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span></code></pre><p>A parameter can specify a default value by including an equal sign (<code>=</code>) followed by a value after the type. Doing so makes the corresponding argument optional. All parameters with default values must follow those that do not have a default value.</p><p>Calls to a function must provide all the required arguments. Each argument is specified by the argument label, a colon, and a value. These must appear in the same orders as the corresponding parameters. The rationale for this is that it can make some calls more expressive, almost like sentences. It is useful to think of the argument labels as being part of the function name.</p><p>Here is an example of a function where it is useful for argument labels to differ from parameters names. It uses the types <code>Ingredient</code> and <code>Food</code> that are not defined here.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">getDailyPercentage</span><span class="token punctuation">(</span>of ingredient<span class="token punctuation">:</span> <span class="token class-name">Ingredient</span><span class="token punctuation">,</span> <span class="token keyword">in</span> food<span class="token punctuation">:</span> <span class="token class-name">Food</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Float</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Perhaps look up the value in a Dictionary and return it.</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> sugar <span class="token operator">=</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"sugar"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> frostedFlakes <span class="token operator">=</span> <span class="token class-name">Food</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Frosted Flakes"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> dailySugarPct <span class="token operator">=</span> <span class="token function">getDailyPercentage</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> sugar<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> frostedFlakes<span class="token punctuation">)</span></code></pre><p>Code hints provided by Xcode help developers know the argument labels and types that must be provided.</p><p>A &quot;variadic&quot; parameter accepts multiple values of the same type, indicated by following the type with three periods. The parameter value will be a constant array of values.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">displaySum</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> numbers<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> sum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">label</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">sum</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>Function names can be overloaded based on their parameter types.</p><p>To return multiple values, return a tuple which is written as a list of values inside parentheses.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">getAvgSum</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Float</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">,</span> <span class="token class-name">Float</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> sum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token short-argument">$0</span> <span class="token operator">+</span> <span class="token short-argument">$1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token keyword">let</span> avg <span class="token operator">=</span> sum <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>numbers<span class="token punctuation">.</span>count<span class="token punctuation">)</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span>avg<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">getAvgSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// (4.0, 12.0)</span><br><br><span class="token comment">// This defines a "tuple" type and assigns a name to it.</span><br><span class="token keyword">typealias</span> <span class="token constant">RGB</span> <span class="token operator">=</span> <span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><br><br><span class="token keyword">let</span> rgbDict<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span> <span class="token punctuation">:</span> <span class="token constant">RGB</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string-literal"><span class="token string">"red"</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string-literal"><span class="token string">"green"</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string-literal"><span class="token string">"blue"</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">)</span><br><span class="token punctuation">]</span><br><br><span class="token comment">// The question mark at the end of the return type</span><br><span class="token comment">// indicates that the function might return nil.</span><br><span class="token keyword">func</span> <span class="token function-definition function">getRgb</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">RGB</span><span class="token operator">?</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> rgbDict<span class="token punctuation">[</span>color<span class="token punctuation">]</span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">getRgb</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"red"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// (red: 255, green: 0, blue: 0)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">getRgb</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"green"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// (red: 0, green: 255, blue: 0)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">getRgb</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"pink"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// nil</span></code></pre><p>By default, parameters cannot be modified in function bodies. Adding the keyword <code>inout</code> before their type changes this. Modifying the values of these parameters changes the value of the corresponding argument in the caller. This only works if the value passed in is a variable (<code>var</code>) rather than a constant (<code>let</code>). This seems like a feature to avoid!</p><p>The type of a function is described by its parameter types and return type. For example, the type of the <code>displaySum</code> function above is <code>(String, Int) -&gt; Void</code>. The type of a function that takes no arguments and returns nothing is <code>() -&gt; Void</code>.</p><p>Function types can be used for variable, parameter, and return types. This means that compatible functions can be assigned to variables, passed to functions, and returned from functions.</p><p>Argument labels are not used when calling a function stored in a variable because each function that can be assigned to the variable could specify different argument labels. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token class-name">BinaryFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>n1<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> n2<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> n1 <span class="token operator">+</span> n2 <span class="token punctuation">}</span><br><span class="token keyword">let</span> subtract<span class="token punctuation">:</span> <span class="token class-name">BinaryFn</span> <span class="token operator">=</span> <span class="token punctuation">{</span> n1<span class="token punctuation">,</span> n2 <span class="token keyword">in</span> n1 <span class="token operator">-</span> n2 <span class="token punctuation">}</span><br><span class="token keyword">let</span> multiply<span class="token punctuation">:</span> <span class="token class-name">BinaryFn</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token short-argument">$1</span> <span class="token punctuation">}</span><br><br><span class="token keyword">var</span> operation<span class="token punctuation">:</span> <span class="token class-name">BinaryFn</span> <span class="token operator">=</span> add<br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5.0</span><br>operation <span class="token operator">=</span> subtract<br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -1.0</span><br>operation <span class="token operator">=</span> multiply<br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6.0</span></code></pre><p>Functions can defined in the bodies of other functions to scope their usage. Otherwise they are global and can be called from anywhere. Nested functions can be returned by their enclosing function to allow them to be called from outside.</p><p>Swift does not support function currying. This creates a new version of an existing function that takes one fewer argument and uses a fixed value for the omitted argument. JavaScript functions support this using the <code>bind</code> method.</p><h2 id="closures" tabindex="-1">Closures</h2><p>Anonymous functions (a.k.a closures) can be used as the values of variables and arguments. They are written with the following syntax: <code>{ parameter-list -&gt; return-type in statements }</code>. The return type can be omitted when it can be inferred. Note the use of the <code>in</code> keyword to mark the end of the parameter list and the beginning of the statements.</p><p>The following code defines and calls several closures.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// This function has no parameters.</span><br><span class="token keyword">let</span> printTime <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// now</span><br>    <span class="token keyword">let</span> dateFormatter <span class="token operator">=</span> <span class="token class-name">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    dateFormatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"M/d/yyyy"</span></span><br>    <span class="token function">print</span><span class="token punctuation">(</span>dateFormatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><span class="token function">printTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3/8/2022</span><br><br><span class="token comment">// This function specifies all of its parameter types and the return type.</span><br><span class="token keyword">let</span> product <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token keyword">in</span> a <span class="token operator">*</span> b<span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">product</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6.0</span><br><br><span class="token comment">// This function omits the return type because it can be inferred.</span><br><span class="token keyword">let</span> product2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token keyword">in</span> a <span class="token operator">*</span> b<span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">product2</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6.0</span></code></pre><p>If the parameter types of a closure can be inferred from usage, the parameter list can be omitted and the parameter values can be referred to by index using the names <code>$0</code>, <code>$1</code>, and so on.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><br><span class="token keyword">let</span> doubled <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// [2, 6, 14]</span></code></pre><p>If parameters to a closure are not used, their names can be replaced by underscores.</p><p>If a closure takes no arguments and just returns the value of an expression, it can be written as just the expression inside curly braces. For example, the closure <code>{ 7 }</code> takes no arguments and always returns 7.</p><p>If the last parameters to a function or method are functions, they can be passed using &quot;trailing closures&quot;. Typically this is only done for the last argument. For example, these are equivalent:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token number">2.34</span><span class="token punctuation">,</span> <span class="token number">3.45</span><span class="token punctuation">]</span><br><span class="token keyword">let</span> total <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> result<span class="token punctuation">,</span> price <span class="token keyword">in</span> result <span class="token operator">+</span> price <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> total <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> result<span class="token punctuation">,</span> price <span class="token keyword">in</span> result <span class="token operator">+</span> price <span class="token punctuation">}</span><br><span class="token keyword">let</span> total <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token short-argument">$0</span> <span class="token operator">+</span> <span class="token short-argument">$1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Closures can be passed as arguments to other functions. If the receiving function has asynchronous behavior that invokes the closure after the function returns, the closure parameter must be declared to be <code>@escaping</code>. TODO: Why is this required? TODO: Are non-escaping closures handled in an optimized way that discards their context after the function returns?</p><p>When an escaping closure reference <code>self</code>, typically the closure parameter list should be preceded by <code>[weak self]</code> so the object that uses the escaping closure can be garbage collected when there are no longer references to it.</p><h2 id="error-handling" tabindex="-1">Error Handling</h2><p>Errors in that occur in Swift code are described by objects that conform to the <code>Error</code> protocol. A protocol is like an interface in other programming languages. These are described in detail later in the &quot;Protocol&quot; section. The <code>Error</code> protocol is merely a marker protocol, not requiring any properties or methods. Often errors are described by an <code>enum</code> that conforms to the <code>Error</code> protocol. Each <code>enum</code> <code>case</code> represents a variation of the error and specific cases are thrown.</p><p>To throw an error, use the <code>throw</code> keyword followed by an instance of any type that conforms to the <code>Error</code> protocol.</p><p>To handle errors, use one of the following approaches:</p><ul><li><p>allow errors to propagate to the caller</p><p>This is done by adding the <code>throws</code> keyword after the parameter list and before the return type. It is not possible to indicate the kinds of errors that can be thrown. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">divide</span><span class="token punctuation">(</span>numerator<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> denominator<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><span class="token punctuation">}</span></code></pre></li><li><p>use a <code>do</code>/<code>catch</code> statement</p><p>The <code>do</code> statement supports having any number of associated <code>catch</code> blocks that each handle different kinds of errors.</p><p>Each statement in the <code>do</code> block that can throw an error must be preceded by the <code>try</code> keyword. This is different from most programming languages where it is assumed that any statement in a <code>try</code> block can thrown.</p><p>Each <code>catch</code> can be followed by a pattern, or list of patterns, that identify the kinds of errors it handles. To access data associated with errors caught by these cases, use the <code>let</code> syntax shown in the example code below.</p><p>A <code>catch</code> with no pattern can appear at the end and is used to handle all remaining kinds of errors. Inside this block the variable <code>error</code> is set to the value that was thrown.</p><p>If none of the catches handle the error type that has occurred, the error is propagated to the caller.</p><p>If an error propagates to the top of the call chain and is not handled, the program will terminate with a fatal error.</p></li><li><p>treat the error as an optional value</p><p>When setting a variable to the result of an expression that can throw, one option is to precede the expression with <code>try?</code>. If the expression throws, the variable is set to <code>nil</code> and error is considered handled. Such code does not need to be in a <code>do</code> block.</p></li><li><p>assert that the error should never occur</p><p>If an expression or statement technically can throw, but should never throw given the way it is being used, it can be preceded with <code>try!</code>. This performs a force unwrap of the result and frees the code from needing the handle errors. If the code actually does throw, the program will terminate with a fatal error. For this reason is not frequently used.</p></li></ul><p>We have seen three variations of trying something that can throw which are <code>try</code>, <code>try?</code>, and <code>try!</code>. It is important to understand the differences between these.</p><p>A <code>defer</code> block contains code to execute before its containing block or function exits, regardless of whether an error was thrown. This is similar to a &quot;finally&quot; block in other languages. The code in a <code>defer</code> block typically performs cleanup activities such as closing files or database connections.</p><p>The following code demonstrates using the <code>do</code>/<code>catch</code> syntax:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">IntError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token function">negative</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> other<br>    <span class="token keyword">case</span> zero<br>    <span class="token keyword">case</span> <span class="token function">tooHigh</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">PositiveInteger</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span><span class="token function">negative</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span>zero <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">></span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span><span class="token function">tooHigh</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> max<span class="token punctuation">:</span> max<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>        <span class="token comment">// This is used to test a catch with no pattern.</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span>other <span class="token punctuation">}</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Try each of the variations below by uncommented it</span><br>    <span class="token comment">// and commenting all the others.</span><br><br>    <span class="token keyword">let</span> pi <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">PositiveInteger</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// doesn't throw</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"pi ="</span></span><span class="token punctuation">,</span> pi<span class="token punctuation">)</span><br><br>    <span class="token comment">//let pi = try PositiveInteger(0, max: 10) // throws zero</span><br>    <span class="token comment">//print("pi =", pi)</span><br><br>    <span class="token comment">//let pi = try PositiveInteger(-2, max: 10) // throws negative</span><br>    <span class="token comment">//print("pi =", pi)</span><br><br>    <span class="token comment">//let pi = try PositiveInteger(11, max: 10) // throws tooHigh</span><br>    <span class="token comment">//print("pi =", pi)</span><br><br>    <span class="token comment">//let pi = try PositiveInteger(7, max: 10) // throws other</span><br>    <span class="token comment">//print("pi =", pi)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span><span class="token function">negative</span><span class="token punctuation">(</span><span class="token keyword">let</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"negative numbers like </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">n</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> are not allowed"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span>zero <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"zero is not allowed"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">IntError</span><span class="token punctuation">.</span><span class="token function">tooHigh</span><span class="token punctuation">(</span><span class="token keyword">let</span> n<span class="token punctuation">,</span> <span class="token keyword">let</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"value </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">n</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> exceeds the maximum of </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">max</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"error value is"</span></span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="type-aliases" tabindex="-1">Type Aliases</h2><p>A type alias assigns an alternate name to another type. By convention these names are CamelCase, beginning with an uppercase letter.</p><p>One use is to provide additional documentation for primitive types. For example, the following documents the expected format of a <code>String</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token constant">MMDDYYYY</span> <span class="token operator">=</span> <span class="token class-name">String</span><br><span class="token keyword">var</span> date<span class="token punctuation">:</span> <span class="token constant">MMDDYYYY</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"04161961"</span></span></code></pre><p>Another use of type aliases is to give a shorter name to a long name or complicated type definition that is used multiple times. For example, <code>typealias ToString = CustomStringConvertible</code>.</p><p>The type of a closure can be assigned to a <code>typealias</code>. This is useful for declaring the types of functions that are passed as arguments to other functions. For example, the product function above can be written as follows:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token class-name">DoublePairToDouble</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span><br><span class="token keyword">let</span> product<span class="token punctuation">:</span> <span class="token class-name">DoublePairToDouble</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token short-argument">$1</span><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">product</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>Swift does not support type unions like in TypeScript. For example, it is not possible to define a type that can be an <code>Int</code> or a <code>Double</code> using <code>typealias Number = Int | Double</code>.</p><p>A <code>typealias</code> can be used to give a name to a combination of protocols. For example, the following type alias is defined by Swift.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token class-name">Codable</span> <span class="token operator">=</span> <span class="token class-name">Decodble</span> <span class="token operator">&amp;</span> <span class="token class-name">Encodable</span></code></pre><p>Instances of types that conform to this protocol can be serialized and deserialized to and from formats like JSON.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Sport</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">let</span> playerCount<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> hockey <span class="token operator">=</span> <span class="token class-name">Sport</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Hockey"</span></span><span class="token punctuation">,</span> playerCount<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">)</span><br><br><span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token class-name">JSONEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> decoder <span class="token operator">=</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>hockey<span class="token punctuation">)</span><br>    <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> data<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span><span class="token operator">!</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token comment">// {"name":"Hockey","playerCount":6}</span><br><br>    <span class="token comment">// The first argument to decode specifies the type to be created.</span><br>    <span class="token keyword">let</span> newSport <span class="token operator">=</span> <span class="token keyword">try</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Sport</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>newSport<span class="token punctuation">)</span> <span class="token comment">// Sport(name: "Hockey", playerCount: 6)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"fail"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="primitive-types" tabindex="-1">Primitive Types</h2><p>In Swift, values of these types are objects with properties and methods.</p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>Bool</code></td><td>boolean; literal values are <code>true</code> and <code>false</code></td></tr><tr><td><code>UInt</code></td><td>unsigned integer; same number of bits as platform (32 or 64)</td></tr><tr><td><code>Int</code></td><td>signed integer; same number of bits as platform (32 or 64)</td></tr><tr><td><code>Float</code></td><td>32-bit floating point number</td></tr><tr><td><code>Double</code></td><td>64-bit floating point number</td></tr><tr><td><code>Character</code></td><td>single character</td></tr><tr><td><code>String</code></td><td>text</td></tr><tr><td><code>Range</code></td><td>interval from inclusive lower bound to exclusive upper bound</td></tr><tr><td><code>ClosedRange</code></td><td>interval from inclusive lower bound to inclusive upper bound</td></tr></tbody></table><p>All of these types are defined as structs and are therefore immutable.</p><p>Variables of these types cannot be set to <code>nil</code> unless a <code>?</code> follows the type to indicate that it is optional. See the &quot;Optionals&quot; section later.</p><p>The <code>type</code> function returns the type of its argument as a <code>String</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> c<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"x"</span></span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "Character"</span></code></pre><h3 id="bool-type" tabindex="-1">Bool Type</h3><p>The <code>Bool</code> type has two possible values, <code>true</code> and <code>false</code>.</p><p><code>Bool</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>description</code></td><td><code>String</code> &quot;true&quot; or &quot;false&quot;</td></tr></tbody></table><p><code>Bool</code> type methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>random()</code></td><td>randomly returns <code>true</code> or <code>false</code></td></tr></tbody></table><p><code>Bool</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>toggle()</code></td><td>toggles the value between <code>true</code> and <code>false</code></td></tr></tbody></table><p>Note that <code>myBool.toggle()</code> is equivalent to <code>myBool = !myBool</code>.</p><h3 id="numeric-types" tabindex="-1">Numeric Types</h3><p>The type hierarchy of Swift numeric types is:</p><ul><li>Numeric<ul><li>BinaryInteger<ul><li>UnsignedInteger<ul><li>UInt*</li></ul></li><li>SignedInteger<ul><li>Int*</li></ul></li><li>FixedWidthInteger<ul><li>Int* and UInt*</li></ul></li></ul></li><li>SignedNumeric<ul><li>SignedInteger (see above)</li><li>FloatingPoint<ul><li>BinaryFloatingPoint<ul><li>CGFloat, Float*, and Double</li></ul></li></ul></li></ul></li></ul></li></ul><p>The <code>Int</code>, <code>Float</code>, and <code>Double</code> types have some common properties and methods. But some are not shared by all of these types.</p><p>Global numeric constants include:</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>M_E</code></td><td><code>Double</code> value of e</td></tr><tr><td><code>M_PI</code></td><td><code>Double</code> value of pi</td></tr><tr><td><code>M_PI_2</code></td><td><code>Double</code> value of half pi</td></tr></tbody></table><p>Number type properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>greatestFiniteMagnitude</code></td><td>maximum value of <code>Float</code> or <code>Double</code> type</td></tr><tr><td><code>leastNonzeroMagnitude</code></td><td>minimum value of <code>Float</code> or <code>Double</code> type</td></tr><tr><td><code>max</code></td><td>maximum value of <code>Int</code> type</td></tr><tr><td><code>min</code></td><td>minimum value of <code>Int</code> type</td></tr><tr><td><code>pi</code></td><td>value of <code>Float</code> or <code>Double</code> Pi</td></tr></tbody></table><p>Number type methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>random(in: Range) -&gt; number</code></td><td>returns a random number in the given range</td></tr><tr><td><code>maximum(number, number) -&gt; Double</code></td><td>returns the larger of two floating point numbers</td></tr><tr><td><code>minimum(number, number) -&gt; Double</code></td><td>returns the smaller of two floating point numbers</td></tr></tbody></table><pre class="language-swift"><code class="language-swift"><span class="token comment">// Generate a random integer from 0 to 9.</span><br><span class="token comment">// This can also be used on the Float and Double types.</span><br><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">10</span><span class="token punctuation">)</span></code></pre><p>Number instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>isMultiple(of: Int) -&gt; Bool</code></td><td>determines if the <code>Int</code> receiver is a multiple of another <code>Int</code></td></tr><tr><td><code>remainder(dividingBy: Double)</code></td><td>returns remainder</td></tr><tr><td><code>round()</code></td><td>mutates value to rounded value</td></tr><tr><td><code>rounded() -&gt; Double</code></td><td>returns rounded value</td></tr><tr><td><code>signum() -&gt; Int</code></td><td>returns -1, 0, or 1</td></tr><tr><td><code>squareRoot()</code></td><td>returns square root</td></tr></tbody></table><p>Many more math functions are defined in the <code>Foundation</code> framework. This &quot;provides a base layer of functionality for apps and frameworks, including data storage and persistence, text processing, date and time calculations, sorting and filtering, and networking.&quot; Many math functions can only be used if the Foundation framework is imported.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">3.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// gives absolute value which is 3.</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">45.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0.8509...</span></code></pre><p>Numeric <code>Foundation</code> functions include:</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code>abs(number)</code></td><td>returns absolute value</td></tr><tr><td><code>ceil(number)</code></td><td>returns ceiling value</td></tr><tr><td><code>floor(number)</code></td><td>returns floor value</td></tr><tr><td><code>rounded(number)</code></td><td>returns rounded value</td></tr><tr><td><code>sign(number)</code></td><td>returns -1, 0, or 1</td></tr><tr><td><code>trunc(number)</code></td><td>returns truncated value</td></tr><tr><td><code>pow(base, exponent)</code></td><td>returns a number raised to a power</td></tr><tr><td><code>sqrt(number)</code></td><td>returns the square root of a number</td></tr><tr><td><code>exp(exponent)</code></td><td>returns e raised to a power</td></tr><tr><td><code>log(number)</code></td><td>returns the natural log of a number</td></tr><tr><td><code>log10(number)</code></td><td>returns the log base 10 value of a number</td></tr><tr><td><code>sin(number)</code></td><td>returns sine of angle in radians</td></tr><tr><td><code>cos(number)</code></td><td>returns cosine of angle in radians</td></tr><tr><td><code>tan(number)</code></td><td>returns tangent of angle in radians</td></tr><tr><td><code>asin(number)</code></td><td>returns arc sine in radians</td></tr><tr><td><code>acos(number)</code></td><td>returns arc cosine in radians</td></tr><tr><td><code>atan(number)</code></td><td>returns arc tangent in radians</td></tr></tbody></table><p>To create an <code>Int</code> by rounding a <code>Double</code>, use <code>Int(myDouble.rounded())</code>.</p><p>To format a <code>Double</code> value as a <code>String</code> with a limited number of decimal places use the <code>String</code> initializer that takes a format string and the value. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> angle <span class="token operator">=</span> <span class="token number">57.2169308</span><br><span class="token keyword">let</span> formatted <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>format<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Angle: %.2f"</span></span><span class="token punctuation">,</span> angle<span class="token punctuation">)</span> <span class="token comment">// 57.22</span></code></pre><h3 id="measurement-type" tabindex="-1">Measurement Type</h3><p>The <a href="https://developer.apple.com/documentation/foundation/measurement?v=1.0.20" rel="noopener" target="_blank">Measurement</a> struct from the Foundation library is used to specify a quantity (<code>Double</code>) with a unit of measure. Values of this type can be passed to the <code>Text</code> initializer along with a <code>format</code> argument of type <a href="https://developer.apple.com/documentation/foundation/measurement/formatstyle?v=1.0.20" rel="noopener" target="_blank">Measurement.FormatStyle</a>.</p><p>The supported quantity types include <code>UnitAcceleration</code>, <code>UnitAngle</code>, <code>UnitArea</code>, <code>UnitDispersion</code>, <code>UnitDuration</code>, <code>UnitElectricalCharge</code>, <code>UnitElectricalCurrent</code>, <code>UnitEnergy</code>, <code>UnitFrequency</code>, <code>UnitFuelEfficiency</code>, <code>UnitIlluminance</code>, <code>UnitLength</code>, <code>UnitMass</code>, <code>UnitPoint</code>, <code>UnitPower</code>, <code>UnitPressure</code>, <code>UnitSpeed</code>, <code>UnitTemperature</code>, and <code>UnitVolume</code>. Each of these define a set of class properties that specify the supported units. For example, <code>UnitLength</code> defines the metric system class properties <code>millimeters</code>, <code>centimeters</code>, <code>meters</code>, and <code>kilometers</code>, the imperial system class properties <code>inches</code>, <code>feet</code>, <code>yards</code>, and <code>miles</code>, and many more.</p><p>A <code>Measurement</code> has a <code>value</code> and a <code>unit</code>.</p><p>Measurements support many operators including <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>. These operators return a new <code>Measurement</code> instance. Only one operand can be a <code>Measurement</code>. The other must be a number.</p><p>Measurements support comparison operators like ==, &lt;, and &gt;.</p><p>Measurements can be converted to compatible units.</p><p>For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> metricLength <span class="token operator">=</span> <span class="token class-name">Measurement</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> unit<span class="token punctuation">:</span> <span class="token class-name">UnitLength</span><span class="token punctuation">.</span>centimeters<span class="token punctuation">)</span><br><span class="token keyword">let</span> imperialWidth <span class="token operator">=</span> <span class="token class-name">Measurement</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> unit<span class="token punctuation">:</span> <span class="token class-name">UnitLength</span><span class="token punctuation">.</span>inches<span class="token punctuation">)</span><br><span class="token keyword">let</span> metricWidth <span class="token operator">=</span> imperialWidth<span class="token punctuation">.</span><span class="token function">converted</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> metricLength<span class="token punctuation">.</span>unit<span class="token punctuation">)</span><br><span class="token keyword">let</span> metricArea <span class="token operator">=</span> <span class="token class-name">Measurement</span><span class="token punctuation">(</span><br>    value<span class="token punctuation">:</span> metricLength<span class="token punctuation">.</span>value <span class="token operator">*</span> metricWidth<span class="token punctuation">.</span>value<span class="token punctuation">,</span><br>    unit<span class="token punctuation">:</span> <span class="token class-name">UnitArea</span><span class="token punctuation">.</span>squareCentimeters<br><span class="token punctuation">)</span> <span class="token comment">// 177.8 square centimeters</span></code></pre><p>The SwiftUI <code>Text</code> view supports displaying <code>Measurement</code> instances including their value and unit.</p><h3 id="string-and-character-type" tabindex="-1">String and Character Type</h3><p>The <code>String</code> type is a <code>struct</code> that represents a sequence of Unicode characters. Literal <code>Character</code> and single-line <code>String</code> values are both delimited by double-quotes.</p><p>Multi-line <code>String</code> values are delimited by triple double-quotes that are on their own lines. The lines of text between the delimiters should not be indented because indentation whitespace is retained. Newline characters other than the first and last are retained unless each line but the last ends with a backslash. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> someParagraph <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"""<br>The newline at the end of this line is retained.<br>But the newline here is not retained </span><span class="token punctuation">\</span><span class="token string"><br>because the line ends with a backslash.<br>"""</span></span></code></pre><p>Strings are value types. This means that assigning a <code>String</code> variable to another makes a copy rather than assigning a reference to the same memory.</p><p>To insert expressions in string values use the string interpolation syntax.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"milk"</span></span><br><span class="token keyword">let</span> price <span class="token operator">=</span> <span class="token number">2.59</span><br><span class="token keyword">let</span> taxRate <span class="token operator">=</span> <span class="token number">0.8</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">item</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> costs </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">price <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> taxRate<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// single string</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"item"</span></span><span class="token punctuation">,</span> item<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"costs"</span></span><span class="token punctuation">,</span> price <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> taxRate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// alternative</span></code></pre><p>A new string can be created by concatenating existing strings using the <code>+</code> operator.</p><p>A string can be appended to an existing string variable using the <code>+=</code> operator.</p><p>To iterate over the characters in a <code>String</code>, use a <code>for-in</code> loop or the <code>forEach</code> method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><br><br><span class="token keyword">for</span> c <span class="token keyword">in</span> name <span class="token punctuation">{</span><br>  <span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br>name<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">(</span>c<span class="token punctuation">:</span> <span class="token class-name">Character</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Void</span> <span class="token keyword">in</span> <span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>name<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">{</span>c <span class="token keyword">in</span> <span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// same as previous line</span></code></pre><p><code>String</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>count</code></td><td>number of current characters</td></tr><tr><td><code>first</code></td><td>first character</td></tr><tr><td><code>isEmpty</code></td><td><code>Bool</code> value indicating whether <code>count</code> is zero</td></tr><tr><td><code>last</code></td><td>last character</td></tr></tbody></table><p><code>String</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>append(Character)</code></td><td>appends a given <code>Character</code> to the receiver</td></tr><tr><td><code>append(String)</code></td><td>appends a given <code>String</code> to the receiver</td></tr><tr><td><code>contains(Character or String) -&gt; Bool</code></td><td>determines if receiver contains a given character or substring</td></tr><tr><td><code>dropFirst(Int) -&gt; Substring</code></td><td>returns substring not including first n characters</td></tr><tr><td><code>dropLast(Int) -&gt; Substring</code></td><td>returns substring not including last n characters</td></tr><tr><td><code>firstIndex(of: Character or String) -&gt; Int</code></td><td>returns index of first occurrence of a character or substring</td></tr><tr><td><code>hasPrefix(String) -&gt; Bool</code></td><td>determines if receiver begins with a substring</td></tr><tr><td><code>hasSuffix(String) -&gt; Bool</code></td><td>determines if receiver ends with a substring</td></tr><tr><td><code>insert(Character, at: index)</code></td><td>inserts a given <code>Character</code> in the receiver</td></tr><tr><td><code>lowercased() -&gt; String</code></td><td>returns lowercase version</td></tr><tr><td><code>popLast() -&gt; Character?</code></td><td>removes and returns last character</td></tr><tr><td><code>prefix(Int) -&gt; Substring</code></td><td>returns first n characters</td></tr><tr><td><code>remove(at: index)</code></td><td>removes and returns the character at a given index</td></tr><tr><td><code>removeAll()</code></td><td>removes all characters</td></tr><tr><td><code>removeFirst([n])</code></td><td>removes first n characters, defaulting to 1</td></tr><tr><td><code>removeLast([n])</code></td><td>removes last n characters, defaulting to 1</td></tr><tr><td><code>removeSubrange(Range)</code></td><td>removes characters in <code>Range</code></td></tr><tr><td><code>replaceSubrange(Range, with: String)</code></td><td>replaces characters in a given range</td></tr><tr><td><code>split(separator: Character) -&gt; [Substring]</code></td><td>returns <code>Array</code> of substrings delimited by a given character</td></tr><tr><td><code>sorted() -&gt; [Character]</code></td><td>returns <code>Array</code> of characters in sorted order</td></tr><tr><td><code>suffix(Int) -&gt; Substring</code></td><td>returns last n characters</td></tr><tr><td><code>uppercased() -&gt; String</code></td><td>returns uppercase version</td></tr></tbody></table><p>Indexes into strings have the type <code>String.Index</code> rather than <code>Int</code>. This makes many string operations more verbose than in other languages because obtaining a <code>String.Index</code> value requires a method call.</p><p>For example, the following gets the 2nd and 3rd characters of a string.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><br><span class="token keyword">let</span> start <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> end <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>name<span class="token punctuation">[</span>start<span class="token operator">...</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "ar"</span></code></pre><p>Getting the character at a given index requires using the <code>index</code> method which makes if quite verbose.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><br><span class="token function">print</span><span class="token punctuation">(</span>name<span class="token punctuation">[</span>name<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "r"</span></code></pre><p>Fortunately we can override the subscript operator to make this easier.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">BidirectionalCollection</span> <span class="token punctuation">{</span><br>    <span class="token keyword">subscript</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> <span class="token class-name">Index</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Character</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> characters<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span>name<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "r"</span></code></pre><p>Comparing strings in a case-insensitive way is quite verbose.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">if</span> s1<span class="token punctuation">.</span>name<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">caseInsensitiveCompare</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">.</span>orderedSame <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"s1 and s2 are the same when not considering case."</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>Strings that contain numbers can be converted to numbers using casting which returns an optional. The following code demonstrates three approaches.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"3"</span></span><br><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"3.14"</span></span><br><span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"3.14159"</span></span><br><br><span class="token comment">// "Int" returns an "optional".</span><br><span class="token comment">// "if let" unwraps it if the conversion is successful.</span><br><span class="token comment">// See the "Optionals" section for details.</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>number <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 6</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Using nil-coalescing</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 5.14</span><br><br><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><br><span class="token keyword">if</span> number <span class="token operator">!=</span> <span class="token nil constant">nil</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Using force unwrap</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>number<span class="token operator">!</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 5.14159</span><br><span class="token punctuation">}</span></code></pre><p>To create a <code>String</code> from a number with a specific format, use the <code>NumberFormatter</code> class. For example, this creates a <code>String</code> where that contains grouping commas:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token number">1234567</span><br><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>formatter<span class="token punctuation">.</span>numberStyle <span class="token operator">=</span> <span class="token punctuation">.</span>decimal<br><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">NSNumber</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> value<span class="token punctuation">)</span><br><span class="token keyword">let</span> formatted <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">""</span></span> <span class="token comment">// 1,234,567</span></code></pre><p>The <code>formatted</code> method can be applied to many kinds of values to produce a locale-specific, formatted string. See the example code at <a href="https://github.com/mvolkmann/FormattingDemo/tree/main?v=1.0.20" rel="noopener" target="_blank">FormattingDemo</a>.</p><h3 id="character-type" tabindex="-1">Character Type</h3><p>The <code>Character</code> type is a <code>struct</code> that represents a single Unicode character. Literal <code>Character</code> values are delimited by double-quotes.</p><p><code>Character</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>asciiValue</code></td><td><code>UInt8</code> ASCII value, if it is an ASCII character</td></tr><tr><td><code>description</code></td><td>textual representation</td></tr><tr><td><code>hashValue</code></td><td><code>Int</code> hash value</td></tr><tr><td><code>hexDigitValue</code></td><td><code>Int</code> hex value</td></tr><tr><td><code>isASCII</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isCased</code></td><td><code>Bool</code> value indicating if it is changed by case conversion</td></tr><tr><td><code>isCurrencySymbol</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isHexDigit</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isLetter</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isLowercase</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isMathSymbol</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isNewline</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isNumber</code></td><td><code>Bool</code> value; true for Unicode characters that represent a fraction</td></tr><tr><td><code>isPunctuation</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isSymbol</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isUppercase</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isWhitespace</code></td><td><code>Bool</code> value</td></tr><tr><td><code>isWholeNumber</code></td><td><code>Bool</code> value; false for Unicode characters that represent a fraction</td></tr><tr><td><code>utf16</code></td><td>UTF-16 encoding value</td></tr><tr><td><code>utf8</code></td><td>UTF-8 encoding value</td></tr><tr><td><code>wholeNumberValue</code></td><td><code>Int</code> value</td></tr></tbody></table><p><code>Character</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>lowercased()</code></td><td>returns <code>Character</code> that is lowercase version</td></tr><tr><td><code>uppercased()</code></td><td>returns <code>Character</code> that is uppercase version</td></tr></tbody></table><h2 id="dates" tabindex="-1">Dates</h2><p>Swift provides the <code>Date</code> and <code>Calendar</code> structs for operating on dates.</p><p>The <code>formatted</code> method can return part of a <code>Date</code> as a <code>String</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// run on September 3, 2022 at 2:16:41 PM</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">dayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 246</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">era</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// AD</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 PM</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 16</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">month</span><span class="token punctuation">(</span><span class="token punctuation">.</span>wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// September</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">quarter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Q3</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 41</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">timeZone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// CDT</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">week</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 36</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">weekday</span><span class="token punctuation">(</span><span class="token punctuation">.</span>wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Saturday</span><br><span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2022</span></code></pre><p>For more date formatting options, see <a href="https://developer.apple.com/documentation/foundation/dateformatter?v=1.0.20" rel="noopener" target="_blank">DateFormatter</a>.</p><p>For details on date format strings, see <a href="https://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns?v=1.0.20" rel="noopener" target="_blank">Date Format Patterns</a>.</p><p><a href="https://nsdateformatter.com">https://nsdateformatter.com</a></p><p>Date/time strings in ISO 8601 format have content like &quot;2022-08-30T15:39:19Z&quot;. To convert one of these strings to a Swift <code>Date</code>:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">ISO8601DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> date <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> dateString<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token punctuation">.</span>now</code></pre><p>To get the number of days between two dates:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> days <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">dateComponents</span><span class="token punctuation">(</span><br>    <span class="token punctuation">[</span><span class="token punctuation">.</span>day<span class="token punctuation">]</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> date1<span class="token punctuation">,</span> to<span class="token punctuation">:</span> date2<br><span class="token punctuation">)</span><span class="token punctuation">.</span>day <span class="token operator">??</span> <span class="token number">0</span></code></pre><h2 id="ranges" tabindex="-1">Ranges</h2><p>There are many uses of ranges including:</p><ul><li>iterating over a range of values</li><li>checking whether a value is in a range</li><li>extracting a subset of data from a collection</li><li>modifying a subset of a collection</li></ul><p>Swift supports four kinds of ranges.</p><ul><li><p><code>Range</code>: <code>start..&lt;end</code></p><p>This is half-open, meaning that the end index is not included. <code>CountableRange</code> is a typealias of this type.</p></li><li><p><code>ClosedRange</code>: <code>start...end</code> This is a closed, meaning that the end index is included. <code>CountableClosedRange</code> is a typealias of this type.</p></li><li><p><code>PartialRangeFrom</code>: <code>start...</code></p><p>This is one-sided, meaning that the end index is not specified.</p></li><li><p><code>PartialRangeUpTo</code>: <code>..&lt;end</code> This is one-sided at the end, meaning that the start index is not specified.</p></li></ul><p>A range can be assigned to a variable.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">...</span><span class="token number">4</span></code></pre><p>To determine if a number is in a range, pass it to the <code>contains</code> method.</p><pre class="language-swift"><code class="language-swift"><span class="token function">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span><br><span class="token function">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span></code></pre><p>To iterate over the values in a range, use a <code>for-in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> n <span class="token keyword">in</span> r <span class="token punctuation">{</span><br>  <span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="enumerations" tabindex="-1">Enumerations</h2><p>Enumerations are declared with the <code>enum</code> keyword. They have a name and a list of possible cases. Each <code>case</code> has a name and an optional value that can be any type, though <code>Int</code>, and <code>String</code> are common types. By convention both <code>enum</code> names and <code>case</code> names use camel-case, but <code>enum</code> names begin uppercase and <code>case</code> names begin lowercase. These names should be singular rather than plural.</p><p>Enums are value types like structs. When an enum value is assigned to a variable or passed to a function, it is copied rather than using a reference.</p><p>When <code>case</code> values are provided, their type must be specified after the <code>enum</code> name. These values are accessed with the <code>rawValue</code> property. TODO: Why doesn't an enum name evaluate to its value like in other languages so <code>rawValue</code> would not be needed? TODO: Why isn't this property just named <code>value</code>?</p><p>If a type is provided after the <code>enum</code> name, any cases without specified values are given default values. For example, if the type is <code>Int</code>, incrementing values starting with zero are assigned. When the type is <code>String</code>, values matching the case name are assigned.</p><p>If no type is provided, the cases are not assigned default values. This differs from many other programming languages.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Multiple cases can be specified on the same line.</span><br>    <span class="token keyword">case</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<br><span class="token punctuation">}</span><br><br><span class="token comment">// The cases here have specified values.</span><br><span class="token keyword">enum</span> <span class="token class-name">ColorHex</span><span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> red <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ff0000"</span></span><br>    <span class="token keyword">case</span> green <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"00ff00"</span></span><br>    <span class="token keyword">case</span> blue <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"0000ff"</span></span><br><span class="token punctuation">}</span></code></pre><p>When the type of a value can be inferred to be a specific <code>enum</code> type, a value can be specified with only a period followed by a <code>case</code> name as a shorthand. This is a distinguishing feature of Swift and is used frequently.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>red<br><span class="token function">print</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>rawValue<span class="token punctuation">)</span> <span class="token comment">// ff0000</span><br><span class="token keyword">var</span> c2<span class="token punctuation">:</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token punctuation">.</span>red <span class="token comment">// using shorthand</span><br><span class="token function">print</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span>rawValue<span class="token punctuation">)</span> <span class="token comment">// ff0000</span><br><br><span class="token keyword">switch</span> c1 <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span>red<span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"hot"</span></span><span class="token punctuation">)</span> <span class="token comment">// this prints</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span>green<span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"warm"</span></span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span>blue<span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"color"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>An enumeration <code>case</code> value can have associated data specified as a list. Each piece of associated data:</p><ul><li>must specify its type</li><li>can have a name for documentation, but is identified by position when used</li><li>can have a default value which makes it optional to specify a value when creating an instance</li></ul><p>Typically a <code>switch</code> statement is used to evaluate <code>enum</code> instances and take different actions based on the <code>case</code>. These must be exhaustive, meaning that either there is a <code>case</code> for every possible value or the <code>default</code> case must be specified.</p><p>For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token function">swim</span><span class="token punctuation">(</span>googles<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">,</span> inPool<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> <span class="token function">bike</span><span class="token punctuation">(</span><span class="token class-name">Bike</span><span class="token punctuation">)</span> <span class="token comment">// this associated data item has no name</span><br>    <span class="token keyword">case</span> <span class="token function">run</span><span class="token punctuation">(</span>shoes<span class="token punctuation">:</span> <span class="token class-name">Shoe</span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> sleep <span class="token comment">// no associated data</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// CustomStringConvertible is a protocol implemented by types that can</span><br><span class="token comment">// be converted to a string using the computed property "description".</span><br><span class="token keyword">struct</span> <span class="token class-name">Bike</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> brand<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> model<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">brand</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">model</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Shoe</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> brand<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> model<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">brand</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">model</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">printActivity</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> activity<span class="token punctuation">:</span> <span class="token class-name">Activity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">switch</span> activity <span class="token punctuation">{</span><br>    <span class="token comment">// Variable names are not required to match associated data names.</span><br>    <span class="token comment">// These become local variables that are scoped to the case.</span><br>    <span class="token comment">// _ can be used for a name if it isn't used.</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token keyword">let</span> g<span class="token punctuation">,</span> <span class="token keyword">let</span> inP<span class="token punctuation">)</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"swimming </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">inP <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"in"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"out of"</span></span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> a pool </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">g <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"with"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"without"</span></span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> goggles"</span></span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">bike</span><span class="token punctuation">(</span><span class="token keyword">let</span> bike<span class="token punctuation">)</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"riding a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bike</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// uses description</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">let</span> shoes<span class="token punctuation">)</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"running in </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">shoes</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> shoes"</span></span><span class="token punctuation">)</span> <span class="token comment">// uses description</span><br>    <span class="token keyword">case</span> <span class="token punctuation">.</span>sleep<span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"sleeping"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> activity<span class="token punctuation">:</span> <span class="token class-name">Activity</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span>googles<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><br><span class="token function">printActivity</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span> <span class="token comment">// swimming in a pool with googles</span><br>activity <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">bike</span><span class="token punctuation">(</span><span class="token class-name">Bike</span><span class="token punctuation">(</span>brand<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Cannondale"</span></span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Topstone"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token function">printActivity</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span> <span class="token comment">// riding a Cannondale Topstone</span><br>activity <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>shoes<span class="token punctuation">:</span> <span class="token class-name">Shoe</span><span class="token punctuation">(</span>brand<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Hoka"</span></span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Clifton"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token function">printActivity</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span> <span class="token comment">// running in Hoka Clifton shoes</span><br>activity <span class="token operator">=</span> <span class="token punctuation">.</span>sleep<br><span class="token function">printActivity</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span> <span class="token comment">// sleeping</span></code></pre><p>If an <code>enum</code> conforms to the <code>CaseIterable</code> protocol then its cases will be held in the <code>allCases</code> type property. This can be used to iterate over the cases. If a value type is also specified, it must appear before <code>CaseIterable</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Color</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">CaseIterable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> red <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ff0000"</span></span><br>    <span class="token keyword">case</span> green <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"00ff00"</span></span><br>    <span class="token keyword">case</span> blue <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"0000ff"</span></span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>allCases<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 3</span><br><span class="token keyword">for</span> color <span class="token keyword">in</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>allCases <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token comment">// red, green, and blue</span><br><span class="token punctuation">}</span></code></pre><p>Like structs and classes (described later), enumerations can define initializers, computed properties, and methods. Enumerations cannot have regular (non-computed) properties. The following <code>enum</code> defines a computed property and a method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Color</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">CaseIterable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> red <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"ff0000"</span></span><br>    <span class="token keyword">case</span> green <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"00ff00"</span></span><br>    <span class="token keyword">case</span> blue <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"0000ff"</span></span><br><br>    <span class="token comment">// Computed property</span><br>    <span class="token keyword">var</span> redHex<span class="token punctuation">:</span> <span class="token class-name">Substring</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> hex <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>rawValue<br>        <span class="token keyword">let</span> start <span class="token operator">=</span> hex<span class="token punctuation">.</span>startIndex<br>        <span class="token keyword">let</span> end <span class="token operator">=</span> hex<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br>        <span class="token keyword">return</span> hex<span class="token punctuation">[</span>start<span class="token operator">...</span>end<span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Method</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">greenHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Substring</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> hex <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>rawValue<br>        <span class="token keyword">let</span> start <span class="token operator">=</span> hex<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>hex<span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><br>        <span class="token keyword">let</span> end <span class="token operator">=</span> hex<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br>        <span class="token keyword">return</span> hex<span class="token punctuation">[</span>start<span class="token operator">...</span>end<span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><br><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">temperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Methods can test for the case by switching on "self".</span><br>        <span class="token keyword">switch</span> <span class="token keyword">self</span> <span class="token punctuation">{</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>red<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"hot"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>green<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"comfortable"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>blue<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"cold"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">.</span>redHex<span class="token punctuation">)</span> <span class="token comment">// ff</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">.</span>redHex<span class="token punctuation">)</span> <span class="token comment">// 00</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">.</span><span class="token function">greenHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 00</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">.</span><span class="token function">greenHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ff</span><br><span class="token keyword">let</span> color<span class="token punctuation">:</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token punctuation">.</span>red<br><span class="token function">print</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">temperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// hot</span></code></pre><h2 id="generics" tabindex="-1">Generics</h2><p>Swift supports generic types. These can be used in many settings including struct, class, and function definitions.</p><p>The following example defines a <code>Stack</code> where all the elements have the same type. The element type must be specified when a <code>Stack</code> instance is created using a &quot;type parameter&quot;.</p><p>Any number of type parameters can be specified inside angle brackets, separated by commas. By convention, type parameter names are CamelCase, beginning with an uppercase letter. Type parameters can be used anywhere a type can appear inside the definition including properties, variables, parameters, and return types.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token operator">></span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> elements<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Element</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><br>    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">push</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> item<span class="token punctuation">:</span> <span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        elements<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Element</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> elements<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Moe"</span></span><span class="token punctuation">)</span><br>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Larry"</span></span><span class="token punctuation">)</span><br>s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Curly"</span></span><span class="token punctuation">)</span><br><span class="token comment">//s.push(7) // Cannot convert value of type 'Int' to expected argument type 'String'</span><br><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Curly</span><br><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Larry</span><br><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Moe</span></code></pre><p>The type of a type parameter can be constrained to only types that conform to given protocols using the <code>where</code> keyword. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// The Equatable protocol requires a type</span><br><span class="token comment">// to implement the == and != operators.</span><br><span class="token comment">// The Identifiable protocol requires a type</span><br><span class="token comment">// to have an "id" property that uniquely identifies an instance.</span><br><span class="token keyword">struct</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token operator">></span> <span class="token keyword">where</span> <span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token operator">&amp;</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><span class="token punctuation">}</span></code></pre><p>There are two ways to define functions that take generic arguments. These are equivalent, but the second is easier to read.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">update</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">CloudKitable</span><span class="token operator">></span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">update</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">CloudKitable</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span></code></pre><h2 id="some-keyword" tabindex="-1">some keyword</h2><p>The <code>some</code> keyword is used to define an &quot;opaque type&quot; whose actual type will be known at compile-time. Opaque types are often uses for function return types and computed property types. These can choose the actual type that will be returned. Callers of such functions and computed properties do not get to make that decision.</p><p>For example, in SwiftUI every struct that conforms to the <code>View</code> protocol must define a computed property named <code>body</code> whose type is <code>some View</code>. This means that the value returned will be of some type that conforms to the <code>View</code> protocol. It must be possible to determine at compile-time the actual type that will be returned. The code cannot, for example, use conditional logic to sometimes return a <code>Button</code> and other times return a <code>Picker</code>.</p><p>Below are three versions of the same function. Two of them compile and one does not.</p><pre class="language-swift"><code class="language-swift">    <span class="token comment">// This compiles because the function</span><br>    <span class="token comment">// does return an instance of the Text struct.</span><br>    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">getText</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> text<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Text</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This does not compile because the `border` view modifier</span><br>    <span class="token comment">// does not return an instance of the Text struct.</span><br>    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">getText</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> text<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Text</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This compiles because the `border` view modifier</span><br>    <span class="token comment">// does return some kind of View.</span><br>    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">getText</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> text<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span></code></pre><p>Adding the <code>some</code> keyword to a function parameter type is an alternative to specifying a generic type. It is typically preferred because it is shorter. For example, these are equivalent:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">myFunction</span><span class="token operator">&lt;</span><span class="token class-name">S</span><span class="token punctuation">:</span> <span class="token class-name">MyProtocol</span><span class="token operator">></span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><br><span class="token keyword">func</span> <span class="token function-definition function">myFunction</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">MyProtocol</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span></code></pre><p>Generic types and opaque types are opposites. In a function that returns a generic type, the caller chooses the concrete type. In a function that returns an opaque type, the function chooses the concrete type, not the caller. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// This function takes and returns a generic type.</span><br><span class="token keyword">func</span> <span class="token function-definition function">biggest</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token omit keyword">_</span> first<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> second<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">T</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Comparable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> first <span class="token operator">>=</span> second <span class="token operator">?</span> first <span class="token punctuation">:</span> second<br><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">biggest</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// T type will be Int; prints 4</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">biggest</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"foo"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"bar"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// T type will be String; prints foo</span><br><br><span class="token comment">// This function returns an opaque type.</span><br><span class="token keyword">func</span> <span class="token function-definition function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"I choose Text!"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="any-keyword" tabindex="-1">any keyword</h2><p>The <code>any</code> keyword is placed before a protocol name and can be used for a function parameter type or return type. It signals opting-in to runtime determination of the actual type which generates more code and is slower than compile-time determination. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// The Int and String types both conform to the CustomStringConvertible</span><br><span class="token comment">// protocol which requires having a `description` property.</span><br><span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">stringLength</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> value<span class="token punctuation">:</span> any <span class="token class-name">CustomStringConvertible</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> value<span class="token punctuation">.</span>description<span class="token punctuation">.</span>count<br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">stringLength</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"test"</span></span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">stringLength</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><br><span class="token comment">// When a function return type uses the `any` keyword,</span><br><span class="token comment">// the return values can have different types.</span><br><span class="token comment">// This prevents knowing the concrete type at compile-time</span><br><span class="token comment">// and is slower.</span><br><span class="token comment">// The Int and String types both conform to the Comparable protocol</span><br><span class="token comment">// which requires implementing the operators &lt; and == as static methods.</span><br><span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">greatOne</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> condition<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token operator">-></span> any <span class="token class-name">Comparable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> condition <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token number">99</span> <span class="token comment">// Int</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"Gretzky"</span></span> <span class="token comment">// String</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// When the return type uses the `some` keyword,</span><br><span class="token comment">// all return values must have the same type.</span><br><span class="token comment">// This allows knowing the concrete type at compile-time</span><br><span class="token comment">// and is faster.</span><br><span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">greatTwo</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> condition<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">Comparable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> condition <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"99"</span></span> <span class="token comment">// String</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"Gretzky"</span></span> <span class="token comment">// String</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">greatOne</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">greatOne</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">greatTwo</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token function">greatTwo</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span></code></pre><h2 id="built-in-collection-types" tabindex="-1">Built-in Collection Types</h2><p>Swift provides several generic collection types.</p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>Array</code></td><td>indexed collection of values with the same type</td></tr><tr><td><code>Dictionary</code></td><td>collection of key/value pairs where all keys have the same type and all values have the same type</td></tr><tr><td><code>Set</code></td><td>unordered collection of values with the same type and no duplicates</td></tr><tr><td>tuple</td><td>fixed-length, ordered collection of values whose types can differ</td></tr></tbody></table><p>All of these types are defined as structs.</p><p>When a variable is set to a collection instance, the elements in the collection can be modified. However, when a constant is initialized to a collection instance, the elements in the collection cannot be modified.</p><p>The following is a partial class hierarchy of the built-in collections, including the protocols to which they conform:</p><ul><li><code>Sequence</code> protocol<ul><li><code>Collection</code> protocol<ul><li><code>Dictionary</code> struct</li><li><code>Range</code> struct</li><li><code>Set</code> struct</li><li><code>Slice</code> struct</li><li><code>BidirectionalCollection</code> protocol<ul><li><code>RandomAccessCollection</code> protocol<ul><li><code>Array</code> struct</li><li><code>Data</code> struct - byte buffer</li><li><code>range</code> struct</li></ul></li><li><code>Range</code> struct</li><li><code>String</code></li></ul></li><li><code>MutableCollection</code> protocol<ul><li><code>Array</code> struct</li><li><code>Data</code> struct - byte buffer</li><li><code>Dictionary.Values</code> struct</li></ul></li></ul></li></ul></li></ul><p>The <code>Sequence</code> protocol defines operations for collections that &quot;provide sequential, iterated access to their elements&quot;. Iterating can be destructive to the elements.</p><p>The <code>Collection</code> protocol defines operations for collections that &quot;can be traversed multiple times, nondestructively, and accessed by an indexed subscript&quot;.</p><p>The <code>MutableCollection</code> protocol defines operations that change the values of elements. Methods include <code>reverse</code>, <code>shuffle</code>, and <code>sort</code>.</p><p>When an instance is assigned to another variable or passed to a function, a copy-on-write version is created that shares the data with the original. Operations that attempt to modify an instance have two possible behaviors. If there is only one reference to the object, it is modified in place. Otherwise the data is copied before being modified.</p><p>From &quot;The Swift Programming Language&quot;:</p><blockquote><p>Collections defined by the standard library like arrays, dictionaries, and strings use an optimization to reduce the performance cost of copying. Instead of making a copy immediately, these collections share the memory where the elements are stored between the original instance and any copies. If one of the copies of the collection is modified, the elements are copied just before the modification. The behavior you see in your code is always as if a copy took place immediately.</p></blockquote><h3 id="arrays" tabindex="-1">Arrays</h3><p>Arrays can be created by listing elements in square brackets, separated by commas.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment">// type is inferred to be [Int]</span><br><br><span class="token keyword">var</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// can't infer type, so must specify; uses short form</span><br><span class="token keyword">var</span> numbers<span class="token punctuation">:</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// same as previous line; uses long form</span><br><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// same as previous lines</span><br><br><span class="token keyword">var</span> zeros <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>repeating<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// array containing 5 zeros</span></code></pre><p>To append new elements to an array:</p><pre class="language-swift"><code class="language-swift">scores <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// now [2, 5, 10, 3]</span><br>scores<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment">// can only pass one value; now [2, 5, 10, 3, 9]</span></code></pre><p>To change values at specific indexes:</p><pre class="language-swift"><code class="language-swift">scores<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment">// now [4, 5, 10, 3, 9]</span><br>scores<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">...</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// inclusive range; now [4, 5, 1, 2, 9]</span></code></pre><p>To iterate over the elements in an <code>Array</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> score <span class="token keyword">in</span> scores <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over the indices in an <code>Array</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span>scores<span class="token punctuation">.</span>count <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This is equivalent and reads better.</span><br><span class="token keyword">for</span> index <span class="token keyword">in</span> scores<span class="token punctuation">.</span>indices <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To access both the index and value of each element, use the <code>enumerated</code> method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">in</span> scores<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"score </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index <span class="token operator">+</span> <span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">score</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p><code>Array</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>capacity</code></td><td>number of elements that can be held without allocating more space</td></tr><tr><td><code>count</code></td><td>number of current elements</td></tr><tr><td><code>first</code></td><td>optional first element; <code>nil</code> when empty</td></tr><tr><td><code>isEmpty</code></td><td><code>Bool</code> value indicating whether <code>count</code> is zero</td></tr><tr><td><code>last</code></td><td>optional last element; <code>nil</code> when empty</td></tr></tbody></table><p><code>Array</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>allSatisfy((Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if every element satisfies predicate; like JS <code>every</code></td></tr><tr><td><code>append(Element)</code></td><td>adds new element at end</td></tr><tr><td><code>append(contentsOf: S)</code></td><td>adds elements in <code>S</code> at end</td></tr><tr><td><code>compactMap&lt;T&gt;((Element) -&gt; T) -&gt; [T]</code></td><td>returns <code>Array</code> of non-nil values returned by function</td></tr><tr><td><code>contains(Element) -&gt; Bool</code></td><td>determines if an element is a member</td></tr><tr><td><code>contains(where: (Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if some element satisfies predicate; like JS <code>some</code></td></tr><tr><td><code>drop(while: (Element) -&gt; Bool) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of elements after those at beginning that match predicate</td></tr><tr><td><code>dropFirst(Int) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of elements after first n</td></tr><tr><td><code>dropLast(Int) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of elements before last n</td></tr><tr><td><code>enumerated(t) -&gt; EnumeratedSequence</code></td><td>returns subsequence of (n, x) pairs where n is an index and x is the element at that index</td></tr><tr><td><code>filter((Element) -&gt; Bool) -&gt; [Element]</code></td><td>returns a new array containing a subset of the elements that match predicate</td></tr><tr><td><code>first(where: (Element) -&gt; Bool) -&gt; Element?</code></td><td>returns first element that satisfies predicate</td></tr><tr><td><code>firstIndex(of: Element) -&gt; Int?</code></td><td>returns index of first element matching given element</td></tr><tr><td><code>firstIndex(where: (Element) -&gt; Bool) -&gt; Int?</code></td><td>returns index of first element that satisfies predicate</td></tr><tr><td><code>flatMap&lt;T&gt;((Element) -&gt; T) -&gt; [T]</code></td><td>like <code>map</code>, but concatenates results that are arrays</td></tr><tr><td><code>forEach((Element) -&gt; Void)</code></td><td>passes each element to given function</td></tr><tr><td><code>last(where: (Element) -&gt; Bool) -&gt; Element?</code></td><td>returns last element that matches a predicate</td></tr><tr><td><code>lastIndex(of: Element) -&gt; Int?</code></td><td>returns index of last element matching element</td></tr><tr><td><code>lastIndex(where: (Element) -&gt; Bool) -&gt; Int?</code></td><td>returns index of last element that matches a predicate</td></tr><tr><td><code>insert(Element, at: Int)</code></td><td>inserts new element at given index</td></tr><tr><td><code>joined(String) -&gt; String</code></td><td>returns concatenation of elements with separator between each</td></tr><tr><td><code>lazy</code></td><td>returns sequence that can be used lazily by another function</td></tr><tr><td><code>map&lt;T&gt;((Element) -&gt; T) -&gt; [T]</code></td><td>returns Array of results of calling a function on each element</td></tr><tr><td><code>max() -&gt; Element?</code></td><td>returns maximum element</td></tr><tr><td><code>max((Element, Element) -&gt; Bool) -&gt; Element?</code></td><td>returns maximum element as determined by a comparator</td></tr><tr><td><code>min() -&gt; Element?</code></td><td>returns minimum element</td></tr><tr><td><code>min((Element, Element) -&gt; Bool) -&gt; Element?</code></td><td>returns minimum element as determined by a comparator</td></tr><tr><td><code>partition(by: (Element) -&gt; Bool) -&gt; Int</code></td><td>reorders elements using a predicate so all <code>false</code> are before all <code>true</code></td></tr><tr><td><code>popLast() -&gt; Element?</code></td><td>removes last element and returns it; returns <code>nil</code> if empty</td></tr><tr><td><code>prefix(Int) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of first n elements</td></tr><tr><td><code>prefix(while: (Element) -&gt; Bool) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of first elements that match a predicate</td></tr><tr><td><code>randomElement()</code></td><td>returns a random element</td></tr><tr><td><code>reduce(Result, (Result, Element) -&gt; Result) -&gt; Result</code></td><td>takes an initial value and a function; returns result of combining elements</td></tr><tr><td><code>remove(at: Int) -&gt; Element</code></td><td>removes element at given index and returns it</td></tr><tr><td><code>removeAll(keepingCapacity: Bool)</code></td><td>removes all elements, optionally retaining the capacity</td></tr><tr><td><code>removeAll(where: (Element) -&gt; Bool)</code></td><td>removes all elements that match a predicate</td></tr><tr><td><code>removeFirst() -&gt; Element</code></td><td>removes first element and returns it</td></tr><tr><td><code>removeFirst(Int)</code></td><td>removes given number of elements from beginning</td></tr><tr><td><code>removeLast() -&gt; Element</code></td><td>removes last element and returns it; crashes if empty</td></tr><tr><td><code>removeLast(Int)</code></td><td>removes given number of elements from end</td></tr><tr><td><code>removeSubrange(Range&lt;Int&gt;)</code></td><td>removes elements in range</td></tr><tr><td><code>replaceSubrange(Range&lt;Int&gt;, with: C)</code></td><td>replaces elements in the range with elements in <code>C</code></td></tr><tr><td><code>reserveCapacity(Int)</code></td><td>reserves enough space for at least the given number of elements</td></tr><tr><td><code>reverse()</code></td><td>reverses the elements in place</td></tr><tr><td><code>reversed() -&gt; ReversedCollection</code></td><td>returns view of elements in reverse order</td></tr><tr><td><code>shuffle()</code></td><td>shuffles elements in place</td></tr><tr><td><code>shuffled()</code></td><td>returns new array of elements in shuffled order</td></tr><tr><td><code>sort()</code></td><td>sorts elements in place</td></tr><tr><td><code>sort(by: (Element, Element) -&gt; Bool)</code></td><td>sorts elements in place using a given comparator</td></tr><tr><td><code>sorted() -&gt; [Element]</code></td><td>returns new array of elements in sorted order</td></tr><tr><td><code>sorted(by: (Element, Element) -&gt; Bool) -&gt; [Element]</code></td><td>returns new array of elements in sorted using a given comparator</td></tr><tr><td><code>subscript(Int)</code></td><td>returns element at given index</td></tr><tr><td><code>subscript(Range&lt;Int&gt;)</code></td><td>returns <code>ArraySlice</code> of elements in given range</td></tr><tr><td><code>suffix(Int) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of last n elements</td></tr><tr><td><code>suffix(while: (Element) -&gt; Bool) -&gt; ArraySlice&lt;Element&gt;</code></td><td>returns subsequence of last elements that match a predicate</td></tr><tr><td><code>swapAt(Int, Int)</code></td><td>swaps elements at the given indexes</td></tr></tbody></table><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><br><br><span class="token keyword">let</span> doubled <span class="token operator">=</span> data<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token comment">// uses a trailing closure</span><br><span class="token function">print</span><span class="token punctuation">(</span>doubled<span class="token punctuation">)</span> <span class="token comment">// [2, 8, 14, 20, 32]</span><br><br><span class="token keyword">let</span> allData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><br><span class="token keyword">let</span> goodData <span class="token operator">=</span> allData<span class="token punctuation">.</span>compactMap <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span>goodData<span class="token punctuation">)</span> <span class="token comment">// [1, 7, 10]</span><br><br><span class="token keyword">let</span> evens <span class="token operator">=</span> data<span class="token punctuation">.</span>filter <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">}</span><br><span class="token function">print</span><span class="token punctuation">(</span>evens<span class="token punctuation">)</span> <span class="token comment">// [4, 10, 16]</span><br><br><span class="token comment">// This shows three ways to use the Array reduce method to sum numbers.</span><br><br><span class="token comment">// Passing a closure as the last argument.</span><br><span class="token keyword">let</span> sum <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>acc<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token keyword">in</span> acc <span class="token operator">+</span> n<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 38</span><br><br><span class="token comment">// Using a trailing closure.</span><br><span class="token keyword">let</span> sum <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>acc<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token keyword">in</span> acc <span class="token operator">+</span> n<span class="token punctuation">}</span> <span class="token comment">// 38</span><br><br><span class="token comment">// Passing a binary operator.</span><br><span class="token comment">// This works because binary operators are</span><br><span class="token comment">// implemented as functions that take two arguments</span><br><span class="token keyword">let</span> sum <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">+</span><span class="token punctuation">)</span> <span class="token comment">// 38</span><br><span class="token function">print</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><br><br><span class="token keyword">let</span> prices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token number">5.79</span><span class="token punctuation">,</span> <span class="token number">3.48</span><span class="token punctuation">]</span><br><span class="token keyword">let</span> quantities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 7 and 1 are ignored</span><br><span class="token comment">// The zip function only takes two sequences</span><br><span class="token comment">// and only uses elements up to the shortest count.</span><br><span class="token comment">// It returns a Sequence, not an Array.</span><br><span class="token keyword">let</span> zipped <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token function">zip</span><span class="token punctuation">(</span>prices<span class="token punctuation">,</span> quantities<span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>zipped<span class="token punctuation">)</span> <span class="token comment">// [(1.23, 5), (5.79, 2), (3.48, 4)]</span><br><span class="token function">print</span><span class="token punctuation">(</span>zipped<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 3.48</span></code></pre><h3 id="sets" tabindex="-1">Sets</h3><p>Sets are created by assigning an <code>Array</code> literal or by passing elements to the <code>Set</code> initializer.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// The type of the following is inferred to be Set&lt;String>.</span><br><span class="token keyword">var</span> cards<span class="token punctuation">:</span> <span class="token class-name">Set</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"5C"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"KH"</span></span><span class="token punctuation">]</span> <span class="token comment">// 5 of clubs and King of hearts</span><br><br><span class="token keyword">var</span> cards <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// starts empty; can't infer type so must specify</span></code></pre><p>To add an element, use the <code>insert</code> method:</p><pre class="language-swift"><code class="language-swift">cards<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"AD"</span></span><span class="token punctuation">)</span> <span class="token comment">// Ace of diamonds</span></code></pre><p>To iterate over the elements in a <code>Set</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> card <span class="token keyword">in</span> cards <span class="token punctuation">{</span> <span class="token comment">// elements are unordered</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over the elements in a <code>Set</code> in sorted order, add use of the <code>sorted</code> method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> card <span class="token keyword">in</span> cards<span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>The <code>==</code> operator can be used to determine if two sets contain the same elements.</p><p><code>Set</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>capacity</code></td><td>number of elements that can be held without allocating more space</td></tr><tr><td><code>count</code></td><td>number of current elements</td></tr><tr><td><code>isEmpty</code></td><td><code>Bool</code> value indicating whether <code>count</code> is zero</td></tr></tbody></table><p><code>Set</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>allSatisfy((Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if every element satisfies predicate; like JS <code>every</code></td></tr><tr><td><code>contains(Element) -&gt; Bool</code></td><td>determines if an element is a member</td></tr><tr><td><code>contains(where: (Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if some element satisfies predicate; like JS <code>some</code></td></tr><tr><td><code>insert(element)</code></td><td>adds an element</td></tr><tr><td><code>intersection(otherSet) -&gt; Set</code></td><td>returns new <code>Set</code> that is intersection of receiver with another</td></tr><tr><td><code>isDisjoint(with: otherSet) -&gt; Bool</code></td><td>true if receiver has no elements in common with <code>otherSet</code></td></tr><tr><td><code>isStrictSuperset(of: seq) -&gt; Bool</code></td><td>like <code>isSuperset</code>, but <code>false</code> when equal</td></tr><tr><td><code>isSubset(of: seq) -&gt; Bool</code></td><td>determines if receiver is a subset of a sequence</td></tr><tr><td><code>isSuperset(of: seq) -&gt; Bool</code></td><td>determines if receiver is a superset of a sequence</td></tr><tr><td><code>remove(element)</code></td><td>deletes an element</td></tr><tr><td><code>subtracting(otherSet) -&gt; Set</code></td><td>returns new <code>Set</code> containing elements in receiver not also in another</td></tr><tr><td><code>symmetricDifference(otherSet) -&gt; Set</code></td><td>returns new <code>Set</code> containing elements in either <code>Set</code>, but not in both</td></tr><tr><td><code>union(otherSet) -&gt; Set</code></td><td>returns new <code>Set</code> that is union of receiver with another</td></tr></tbody></table><h3 id="dictionaries" tabindex="-1">Dictionaries</h3><p>Dictionaries are hash tables that hold key/value pairs. They can be created by listing key/value pairs in square brackets, separated by commas. Keys and values are separated by colons. While typically the keys are strings, they can be any type that conforms to the <code>Hashable</code> protocol. For details on the <code>Hashable</code> protocol, see the <a href="https://developer.apple.com/documentation/swift/hashable?v=1.0.20" rel="noopener" target="_blank">Apple Developer Documentation</a>.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// When the type can't be inferred, it must be specified.</span><br><span class="token comment">// The syntax for an empty Dictionary includes a colon.</span><br><span class="token keyword">var</span> pairs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span> <span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// uses short form of the type</span><br><span class="token keyword">var</span> pairs<span class="token punctuation">:</span> <span class="token class-name">Dictionary</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// same as previous line; uses long form</span><br><span class="token keyword">var</span> pairs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span> <span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// same as previous lines</span><br><br><span class="token comment">// The type of fruitColors is inferred to be [String : String].</span><br><span class="token keyword">var</span> fruitColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"apple"</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"red"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"banana"</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"yellow"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"orange"</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"orange"</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>To set the value of a given key, use the subscript operator <code>[]</code> and an assignment.</p><pre class="language-swift"><code class="language-swift">fruitColors<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"strawberry"</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"red"</span></span></code></pre><p>To get the value of a given key, use the subscript operator <code>[]</code> which returns an <code>Optional</code>:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> color <span class="token operator">=</span> fruitColors<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"banana"</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Optional("yellow")</span></code></pre><p>To delete a key pair:</p><pre class="language-swift"><code class="language-swift">fruitColors<span class="token punctuation">.</span><span class="token function">removeValue</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"banana"</span></span><span class="token punctuation">)</span> <span class="token comment">// returns value</span><br>fruitColors<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"banana"</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token nil constant">nil</span> <span class="token comment">// same, but shorter and doesn't return value</span></code></pre><p>To iterate over the keys and values in a <code>Dictionary</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token keyword">in</span> fruitColors <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">color</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over the keys in a <code>Dictionary</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> name <span class="token keyword">in</span> fruitColors<span class="token punctuation">.</span>keys <span class="token punctuation">{</span> <span class="token comment">// can add .sorted()</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"name is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over the values in a <code>Dictionary</code>, use a <code>for</code>/<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> color <span class="token keyword">in</span> fruitColors<span class="token punctuation">.</span>values <span class="token punctuation">{</span> <span class="token comment">// can add .sorted()</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"color is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">color</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>The <code>default</code> argument provides default values for missing keys.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// This holds the sum of the scores for each person.</span><br><span class="token keyword">var</span> scoreMap<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">addScore</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> score<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> to name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    scoreMap<span class="token punctuation">[</span>name<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> score<br><span class="token punctuation">}</span><br><br><span class="token function">addScore</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">addScore</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Tami"</span></span><span class="token punctuation">)</span><br><span class="token function">addScore</span><span class="token punctuation">(</span><span class="token number">93</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>scoreMap<span class="token punctuation">)</span> <span class="token comment">// ["Mark": 178, "Tami": 90]</span><br><br><span class="token comment">// This holds an Array of all the scores for each person.</span><br><span class="token keyword">var</span> scoresMap<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">collectScore</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> score<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> to name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    scoresMap<span class="token punctuation">[</span>name<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">collectScore</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">collectScore</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Tami"</span></span><span class="token punctuation">)</span><br><span class="token function">collectScore</span><span class="token punctuation">(</span><span class="token number">93</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>scoresMap<span class="token punctuation">)</span> <span class="token comment">// ["Mark": [85, 93], "Tami": [90]]</span></code></pre><p><code>Dictionary</code> instance properties include the following:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>capacity</code></td><td>number of pairs that can be held without allocating more space</td></tr><tr><td><code>count</code></td><td>number of current elements</td></tr><tr><td><code>isEmpty</code></td><td><code>Bool</code> value indicating whether <code>count</code> is zero</td></tr><tr><td><code>keys</code></td><td><code>Keys</code> <code>Collection</code> of keys</td></tr><tr><td><code>values</code></td><td><code>Values</code> <code>MutableCollection</code> of values</td></tr></tbody></table><p><code>Dictionary</code> instance methods include, but are not limited to the following:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>allSatisfy((Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if every element satisfies a predicate; like JS <code>every</code></td></tr><tr><td><code>contains(where: (Element) -&gt; Bool) -&gt; Bool</code></td><td>determines if some element satisfies a predicate; like JS <code>some</code></td></tr><tr><td><code>filter((Element) -&gt; Bool) -&gt; Bool) -&gt; Dictionary</code></td><td>returns new <code>Dictionary</code> containing pairs that satisfy predicate</td></tr><tr><td><code>forEach((Element)) -&gt; Void)</code></td><td>alternate way to iterate over pairs; elements have <code>key</code> and <code>value</code> properties</td></tr><tr><td><code>map&lt;T&gt;((Element) -&gt; T) -&gt; [T]</code></td><td>returns <code>Array</code> of values computed from elements</td></tr><tr><td><code>mapValues((Value) -&gt; newValue) -&gt; Dictionary</code></td><td>returns new <code>Dictionary</code> with same keys but transformed values</td></tr><tr><td><code>removeAll()</code></td><td>removes all pairs</td></tr><tr><td><code>removeValue(forKey: key) -&gt; prevValue</code></td><td>removes pair with given key and returns previous value or <code>nil</code></td></tr><tr><td><code>sorted(by: (Element, Element) -&gt; Bool) =&gt; [Element]</code></td><td>returns <code>Array</code> of elements sorted using a comparator function</td></tr><tr><td><code>updateValue(newValue, forKey: key) -&gt; prevValue</code></td><td>sets value of given key and returns previous value or <code>nil</code> if not present</td></tr></tbody></table><p>Here are examples of using some of these methods.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> scoreDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Tami"</span></span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Amanda"</span></span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Jeremy"</span></span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">]</span><br><span class="token keyword">let</span> allOdd <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">allSatisfy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// false</span><br><span class="token keyword">let</span> someOdd <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// true</span><br><span class="token keyword">let</span> odds <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// includes Mark &amp; Jeremy elements</span><br><span class="token keyword">let</span> upperNames <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">uppercased</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// array of uppercase names</span><br><span class="token keyword">let</span> doubledScoresDict <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">mapValues</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// scoreDict w/ doubled scores</span><br>scoreDict<span class="token punctuation">.</span><span class="token function">removeValue</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> sorted <span class="token operator">=</span> scoreDict<span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">></span> <span class="token short-argument">$1</span><span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// descending</span></code></pre><h3 id="tuples" tabindex="-1">Tuples</h3><p>To define a tuple type, provide a list of elements types in parentheses. These can be named or unnamed. Access elements by zero-based index or by name.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token class-name">MyUnnamedTuple</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Bool</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> t1<span class="token punctuation">:</span> <span class="token class-name">MyUnnamedTuple</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// accessed by zero-based index; 19</span><br><br><span class="token keyword">typealias</span> <span class="token class-name">MyNamedTuple</span> <span class="token operator">=</span> <span class="token punctuation">(</span>happy<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">,</span> score<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> t2<span class="token punctuation">:</span> <span class="token class-name">MyNamedTuple</span> <span class="token operator">=</span> <span class="token punctuation">(</span>happy<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> score<span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token comment">// accessed by name; 19</span></code></pre><p>The elements of a tuple can be assigned to variables using destructuring, All of the elements must be assigned, not just a subset.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> myTuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"test"</span></span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2.3</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> <span class="token punctuation">(</span>b<span class="token punctuation">,</span> s<span class="token punctuation">,</span> i<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">=</span> myTuple</code></pre><p>Swift only supports destructuring of tuples, not arrays or objects.</p><h2 id="variables" tabindex="-1">Variables</h2><p>Mutable variables are declared with the <code>var</code> keyword. Immutable variables are declared with the <code>let</code> keyword. This is an unfortunate choice for JavaScript developers where <code>let</code> is used for mutable variables and <code>const</code> is used for immutable variables.</p><p>Variable names can be followed by a colon and a type. They can also be followed by <code>=</code> and an initial value. The type can be omitted if the desired type can be inferred from the initial value.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> name1<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span> <span class="token comment">// type and initial value</span><br><br><span class="token keyword">let</span> name2 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span> <span class="token comment">// only value; String type is inferred</span><br><br><span class="token keyword">var</span> score1<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token comment">// only type; can't use until initialized</span><br>score1 <span class="token operator">=</span> <span class="token number">19</span> <span class="token comment">// initializes</span><br><br><span class="token keyword">var</span> score2 <span class="token operator">=</span> <span class="token number">19</span> <span class="token comment">// only value; inferred type is Int</span><br><br><span class="token keyword">var</span> score3 <span class="token operator">=</span> <span class="token number">1.23</span> <span class="token comment">// inferred type is Double, not Float</span></code></pre><p>Multiple variables can be declared on the same line.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2.3</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"test"</span></span><br><br><span class="token keyword">var</span> e<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token operator">?</span><span class="token punctuation">,</span> g<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token operator">?</span><span class="token punctuation">,</span> h<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><br>e <span class="token operator">=</span> <span class="token number">1</span><br>f <span class="token operator">=</span> <span class="token number">2.3</span><br>g <span class="token operator">=</span> <span class="token boolean">true</span><br>h <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"test"</span></span></code></pre><p>Swift is able to optimized storage of <code>let</code> variables more than <code>var</code> variables. Because the value of a <code>let</code> variable never changes, its size is known. This allows it to be allocated on the stack rather than the heap. Data on the stack can be accessed more efficiently. Values of <code>let</code> variables can also be inlined in the generated code.</p><h2 id="type-checking-and-casting" tabindex="-1">Type Checking and Casting</h2><p>Basic type names can be used as functions to cast another primitive type to a given type. The <code>Bool</code> and <code>Characters</code> types can be cast to and from a <code>String</code>, but no other types.</p><p>The following code demonstrates the supported primitive type casts.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token boolean">true</span><br><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><br><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token number">3.14</span><br><span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token number">3.14159</span><br><span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"4"</span></span><br><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"7"</span></span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "true"</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.0</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.0</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "3"</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.14</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "3.14"</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.14159</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "3.14159"</span><br><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "4"</span><br><br><span class="token keyword">let</span> bStr <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"true"</span></span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "7"; Fatal Error if String contains more than one character</span><br><span class="token comment">// The remaining examples use nil-coalescing</span><br><span class="token comment">// because the typecasts return nil if they fail.</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Bool</span><span class="token punctuation">(</span>bStr<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// true</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 7</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 7.0</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 7.0</span></code></pre><p>The <code>is</code> operator is used to check the type of an expression and returns a <code>Bool</code>.</p><p>The <code>as?</code> operator is used to downcast a value of a superclass type to a value of a subclass type. Since this can fail, it is typically used in an <code>if let</code> statement. The code example below uses the <code>is</code> and <code>as?</code> operators in the <code>evaluate</code> function.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This is a computed property that is required</span><br>    <span class="token comment">// by the CustomStringConvertible protocol.</span><br>    <span class="token comment">// It is used when a variable of this type</span><br>    <span class="token comment">// is printed or converted to a string.</span><br>    <span class="token keyword">public</span> <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">:</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> declawed<span class="token punctuation">:</span> <span class="token class-name">Bool</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> declawed<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>declawed <span class="token operator">=</span> declawed<br>        <span class="token comment">// All properties in this class must be initialized</span><br>        <span class="token comment">// before the superclass init method is called.</span><br>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> name<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">:</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> hasTail<span class="token punctuation">:</span> <span class="token class-name">Bool</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> hasTail<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>hasTail <span class="token operator">=</span> hasTail<br>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> name<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mystery"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whiskers"</span></span><span class="token punctuation">,</span> declawed<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">,</span> hasTail<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">evaluate</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> animal<span class="token punctuation">:</span> <span class="token class-name">Animal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> animal <span class="token keyword">is</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">animal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a cat. "</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> animal <span class="token keyword">is</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">animal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a dog."</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">animal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is an unknown kind of animal."</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// The as? operator attempts to perform downcasting to a subclass type.</span><br>    <span class="token comment">// This is necessary to access properties</span><br>    <span class="token comment">// or call methods defined in a subclass.</span><br>    <span class="token keyword">if</span> <span class="token keyword">let</span> cat <span class="token operator">=</span> animal <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"has claws? </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token operator">!</span>cat<span class="token punctuation">.</span>declawed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token keyword">let</span> dog <span class="token operator">=</span> animal <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"has tail? </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>hasTail</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function">evaluate</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// Mystery is an unknown kind of animal.</span><br><span class="token function">evaluate</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// Whiskers is a cat.\nhas claws? false</span><br><span class="token function">evaluate</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token comment">// Comet is a dog.\nhas tail? true</span></code></pre><h2 id="optionals" tabindex="-1">Optionals</h2><p>Variables must be assigned a value before they are accessed unless they have an <code>Optional</code> type. This is a generic <code>enum</code> with the following definition:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Optional</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token keyword">none</span><br>    <span class="token keyword">case</span> <span class="token keyword">some</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token comment">// associated data of type T</span><br><span class="token punctuation">}</span></code></pre><p>Adding <code>?</code> after a type name is syntactic sugar for creating an <code>Optional</code> value. It allows the value to be <code>nil</code>.</p><p>The following are equivalent:</p><table><thead><tr><th>Full Syntax</th><th>Syntactic Sugar</th></tr></thead><tbody><tr><td><code>var name: Optional&lt;String&gt; = .none</code></td><td><code>var name: String?</code> (defaults to nil)</td></tr><tr><td><code>var name: Optional&lt;String&gt; = .some(&quot;Mark&quot;)</code></td><td><code>var name: String? = &quot;Mark</code></td></tr></tbody></table><p>There are several ways to extract the value from a variable or property with an optional type.</p><ul><li><p>if let</p><p><code>if let unwrapped = someOptional { ... }</code></p><p>If the value is not <code>nil</code>, it is assigned to the variable <code>value</code> (which is scoped to the block that follows) and the block is executed. If the value is <code>nil</code>, the block is not executed. An <code>else</code> block can be included to specify code to run when the value is <code>nil</code>.</p><p>It is common to unwrap an optional held in a variable (<code>someOptional</code> above) into a variable with the same name (<code>unwrapped</code> above). The one on the left shadows the one on the right inside the block. For example, <code>if let result = result { ... }</code></p></li><li><p>optional chaining</p><p><code>let value = myOptionalObject?.someProperty;</code></p><p>This uses the optional chaining operator <code>?.</code>. If <code>myOptionalObject</code> is <code>nil</code>, <code>value</code> will be set to <code>nil</code>. Otherwise it will be set to the value of <code>someProperty</code> in the object. This operator can also precede method calls to avoid calling them if the receiver is <code>nil</code>.</p></li><li><p>nil-coalescing</p><p><code>let value = myDictionary[someKey] ?? defaultValue</code></p><p>This uses the nil-coalescing operator <code>??</code> to get either the unwrapped value or a default value. The example above gets a value from <code>myDictionary</code> if it exist or uses a default value.</p></li><li><p>guard</p><p><code>guard let value = myOptional else { ... }</code></p><p>This uses a &quot;guard&quot; to assign the value of an optional to a variable if it is not <code>nil</code> or run the code in the <code>else</code> block if it is <code>nil</code>. In a sense this it the opposite of the <code>if let</code> syntax. It is typically used near the beginning of function bodies to check the value of an argument and exit if it is unacceptable. For this reason, the <code>else</code> block usually contains a <code>return</code> statement.</p></li><li><p>force unwrap</p><p><code>if myOptional != nil { let value = myOptional!; ... }</code></p><p>This uses the <code>!</code> operator to &quot;force unwrap&quot; an optional. If the optional set to <code>nil</code>, the program will crash with a fatal error. Use this option only when the value should never be <code>nil</code>.</p></li></ul><p>Here are more examples of working with optionals.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token comment">// optional type</span><br><br><span class="token comment">// Test for a value AND unwrap into another variable if not nil.</span><br><span class="token comment">// Executes a block of code depending on whether the value is nil.</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> msg <span class="token operator">=</span> message <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token comment">// doesn't print</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"no message"</span></span><span class="token punctuation">)</span> <span class="token comment">// does print</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Print the message if it is set, otherwise do nothing.</span><br><span class="token keyword">func</span> <span class="token function-definition function">printMessage</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">guard</span> <span class="token keyword">let</span> msg <span class="token operator">=</span> message <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br>message <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Hello, World!"</span></span><br><span class="token comment">// This uses the "force unwrap" operator.</span><br><span class="token function">print</span><span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token nil constant">nil</span> <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"no message"</span></span> <span class="token punctuation">:</span> message<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token comment">// "Hello, World!"</span><br><span class="token function">printMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token comment">// "Hello, World!"</span><br><br>message <span class="token operator">=</span> <span class="token nil constant">nil</span><br><span class="token function">print</span><span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token nil constant">nil</span> <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"no message"</span></span> <span class="token punctuation">:</span> message<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token comment">// "no message"</span><br><span class="token function">printMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token comment">// no output</span></code></pre><h2 id="control-structures" tabindex="-1">Control Structures</h2><p>Swift does not require parentheses around conditions in control structures. It does require the code to be executed to be in a block surrounded by curly braces, even if they only contain a single statement.</p><h3 id="conditional-logic" tabindex="-1">Conditional Logic</h3><p>Conditional logic is implemented with the <code>if</code> statement that can optionally include <code>else if</code> and <code>else</code> parts.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">if</span> score1 <span class="token operator">==</span> <span class="token number">21</span> <span class="token operator">&amp;&amp;</span> score2 <span class="token operator">&lt;=</span> <span class="token number">19</span> <span class="token punctuation">{</span><br>  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Player 1 has won by at least 2."</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> score1 <span class="token operator">></span> score2 <span class="token punctuation">{</span><br>  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Player 1 is leading."</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Player 1 is not leading."</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>Conditions being tested must evaluate to a <code>Bool</code>. Other types are not automatically coerced to a <code>Bool</code> value. For example, an <code>Int</code> with a value of 0 is not treated as <code>false</code>.</p><p>Conditions can be specified by a comma-separated list of expressions which must all evaluate to <code>true</code>. This is useful in <code>if let</code> and <code>guard let</code> statements. The advantage using commas has over using the <code>&amp;&amp;</code> operator is that <code>let</code> variables can be accessed in subsequent conditions.</p><p>In the following example, assume that the <code>firstPlayer</code> method returns an optional <code>Player</code> object with a <code>score</code> property.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>  <span class="token keyword">var</span> score<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> players<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Player</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> game <span class="token operator">=</span> <span class="token class-name">Game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment">// This gives the error "Cannot find 'player' in scope".</span><br><span class="token comment">// because the player variable IS NOT available after &amp;&amp;.</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> player <span class="token operator">=</span> game<span class="token punctuation">.</span>players<span class="token punctuation">.</span>first <span class="token operator">&amp;&amp;</span> player<span class="token punctuation">.</span>score <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"first player has no score"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This works because the player variable IS available after the comma.</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> player <span class="token operator">=</span> game<span class="token punctuation">.</span>players<span class="token punctuation">.</span>first<span class="token punctuation">,</span> player<span class="token punctuation">.</span>score <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"first player has no score"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To compare an expression against multiple values, use a <code>switch</code> statement. The expression can have any kind of value including enums and collections such as tuples. Unlike in many other languages, after executing the statements in the first matching <code>case</code> execution does not fall through to the next <code>case</code>. No <code>break</code> statement is needed to prevent this. If falling through is desired, add a <code>fallthrough</code> statement at the end of a <code>case</code> block.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">switch</span> <span class="token function">computeScore</span><span class="token punctuation">(</span>player1<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token number">21</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Winner!"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">case</span> <span class="token number">18</span><span class="token operator">...</span><span class="token number">20</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Very good hand."</span></span><span class="token punctuation">)</span><br>    <span class="token keyword">default</span><span class="token punctuation">:</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Will likely lose."</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>If the <code>default</code> case is omitted, there must be a <code>case</code> that matches every possible value of the expression, i.e. it must be exhaustive. When the <code>switch</code> expression is a <code>String</code>, it's not possible to have a <code>case</code> for every possible value and the <code>default</code> case is required. If the value of the <code>switch</code> expression is an <code>enum</code>, there must either be a <code>case</code> that matches each value of the <code>enum</code> or the <code>default</code> case must be included.</p><h3 id="iteration" tabindex="-1">Iteration</h3><p>To iterate over a range of integers, use a <code>for</code>-<code>in</code> loop with a range operator. See the &quot;Ranges&quot; section for more detail on these.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> frame <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">...</span><span class="token number">10</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span> <span class="token comment">// prints integers from 1 to 10 inclusive</span><br><span class="token punctuation">}</span></code></pre><p>If the current iteration value is not needed, use an underscore for the variable name.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> times <span class="token operator">=</span> <span class="token number">3</span><br><span class="token keyword">for</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span>times <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Hello"</span></span><span class="token punctuation">)</span> <span class="token comment">// prints 3 times</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over elements in a sequence (such as an array), use a <code>for</code>-<code>in</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Maisey"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Ramsay"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Oscar"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">]</span><br><span class="token keyword">for</span> name <span class="token keyword">in</span> names <span class="token punctuation">{</span> <span class="token comment">// variable name does not need to be declared</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To iterate over elements in a sequence and also get index values, use the <code>enumerated</code> method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">for</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">in</span> names<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index <span class="token operator">+</span> <span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>A <code>where</code> clause can be added to restrict the items processed.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">enum</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span> <span class="token keyword">case</span> small<span class="token punctuation">,</span> medium<span class="token punctuation">,</span> large <span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">let</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">let</span> size<span class="token punctuation">:</span> <span class="token class-name">Size</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> dogs <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token class-name">Dog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Maisey"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Treeing Walker Coonhound"</span></span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token punctuation">.</span>medium<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token class-name">Dog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Ramsay"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Native American Indian Dog"</span></span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token punctuation">.</span>large<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token class-name">Dog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Oscar"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"German Shorthaired Pointer"</span></span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token punctuation">.</span>medium<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token class-name">Dog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whippet"</span></span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token punctuation">.</span>small<span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><br><br><span class="token keyword">for</span> dog <span class="token keyword">in</span> dogs <span class="token keyword">where</span> dog<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token punctuation">.</span>medium <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Maisey and Oscar</span><br><span class="token punctuation">}</span></code></pre><p>To iterate while a condition is true, use a <code>while</code> loop which is top-tested.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">while</span> condition <span class="token punctuation">{</span><br>    statements<br><span class="token punctuation">}</span></code></pre><p>For a bottom-tested loop that always runs at least once, use a <code>repeat</code>-<code>while</code> loop.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">repeat</span> <span class="token punctuation">{</span><br>    statements<br><span class="token punctuation">}</span> <span class="token keyword">while</span> condition</code></pre><h2 id="structs" tabindex="-1">Structs</h2><p>Structs define named groups of properties and methods. By convention their names begin with an uppercase letter. Typically these names are singular rather than plural.</p><p>Structs cannot inherit from another struct or class, but they can conform to any number of protocols which are similar to interfaces in other languages.</p><p>Properties are declared with the <code>let</code> (immutable) and <code>var</code> (mutable) keywords, just like variables. Mutable properties can only be modified if the instance is also mutable (assigned to a <code>var</code>).</p><p>Changing a mutable struct property creates a new instance of the struct rather than modifying the single property of the existing instance. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token comment">// using `var` makes this a mutable property</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// We must use `var` here instead of `let`</span><br><span class="token comment">// to enable changing mutable properties.</span><br><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><br><span class="token comment">// This changes `p` to refer to a</span><br><span class="token comment">// new instance of the `Person` struct.</span><br>p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Tami"</span></span></code></pre><p>Immutable properties must be given a value when an instance is initialized and cannot be changed after that.</p><p>Here is an example of a simple struct definition.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> age<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><span class="token punctuation">}</span></code></pre><p>In structs that do not define an initializer (<code>init</code> method), a default memberwise initializer is provided. This has argument labels that match the property names and are in the order in which the properties are defined. No default memberwise initializer is provided for classes.</p><p>An instance of a struct or class is created by calling the struct name as a function, and passing arguments required by an initializer. Note that unlike in many other languages, use a <code>new</code> keyword is not required.</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// Create an instance using the provided memberwise initializer.</span><br><span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whippet"</span></span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>breed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// Comet is a Whippet</span></code></pre><p>Properties of structs and classes whose values are allowed to be <code>nil</code> are considered to be <code>Optional</code>. The shorthand syntax for indicating this is to add a <code>?</code> after their type. Just like with optional variables, they must be unwrapped to access their value.</p><p>If all of the properties are optional or have a default value, a default initializer that takes no arguments is provided.</p><p>Structs are value types. This means that assigning one to a variable creates a copy rather than assigning a reference to the same instance.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> dog2 <span class="token operator">=</span> dog <span class="token comment">// dog2 is a copy of dog.</span><br>dog<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// This change doesn't affect dog2.</span><br><span class="token function">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>age<span class="token punctuation">,</span> dog2<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 2 1</span></code></pre><p>Properties of a struct, class, or enum can be computed based on the values of other properties. Computed properties must be declared with <code>var</code> rather than <code>let</code>. A type must be specified and is followed by a code block with no equal sign preceding it.</p><p>Computed properties always define a <code>get</code> function that computes the value every time it is referenced. They can optionally define a <code>set</code> function whose purpose is the change the values of properties used to compute the value so the result will be a given value. If there is no <code>set</code> function then a surrounding <code>get</code> block is not needed. Often there is no need for a <code>set</code> function.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span><br>    <span class="token keyword">private</span> <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><br><br>    <span class="token comment">// Computed property with no set function.</span><br>    <span class="token keyword">var</span> doubled<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> n <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span><br><br>    <span class="token comment">// Computed property with both get and set functions.</span><br>    <span class="token keyword">var</span> tripled<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            n <span class="token operator">*</span> <span class="token number">3</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            n <span class="token operator">=</span> newValue <span class="token operator">/</span> <span class="token number">3</span> <span class="token comment">// truncates</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// n is initially set to 1</span><br><span class="token function">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>tripled<span class="token punctuation">)</span> <span class="token comment">// returns 1 * 3 = 3, but doesn't change n</span><br><br>counter<span class="token punctuation">.</span>tripled <span class="token operator">=</span> <span class="token number">9</span> <span class="token comment">// changes n to 3</span><br><span class="token function">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>doubled<span class="token punctuation">)</span> <span class="token comment">// 3 * 2 = 6</span><br><span class="token function">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>tripled<span class="token punctuation">)</span> <span class="token comment">// 3 * 3 = 9</span></code></pre><p>A lazy property is similar to a computed property, but its value is only computed the first time it is accessed. This is ideal for expensive computations that may not be accessed. It must be declared with <code>var</code> and can be mutated after its initial value is computed. Lazy properties are not thread safe and will be computed again in each thread.</p><p>Methods are defined with the <code>func</code> keyword. They can use the <code>self</code> keyword to refer the instance on which they are invoked. Definitions of <code>struct</code> methods that modify properties of the receiver must begin with the <code>mutating</code> keyword to explicitly indicate that they do this.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span> <span class="token comment">// needed to use functions like sin, cos, and atan</span><br><span class="token comment">// Importing UIKit imports Foundation for you.</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// has default value; type inferred to be Int</span><br><span class="token punctuation">}</span><br><br><span class="token comment">//var dog = Dog(breed: "Whippet", name: "Comet") // uses default value for age</span><br><span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whippet"</span></span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>age</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> year old </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>breed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><br><span class="token keyword">var</span> dog2 <span class="token operator">=</span> dog <span class="token comment">// creates a copy</span><br>dog<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span><br><span class="token function">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>age<span class="token punctuation">,</span> dog2<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 2 1</span><br><br><span class="token comment">/// This represents a 2D Cartesian point.</span><br><span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This is a "type property".</span><br>    <span class="token comment">// Other languages refer to this as a "class property".</span><br>    <span class="token comment">// This is used to keep track of the largest y value</span><br>    <span class="token comment">// ever assigned to any instance of a Point struct.</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> maxY <span class="token operator">=</span> <span class="token operator">-</span><span class="token class-name">Double</span><span class="token punctuation">.</span>greatestFiniteMagnitude<br><br>    <span class="token comment">// This is a basic property.</span><br>    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Double</span><br><br>    <span class="token comment">// This property has a property observer.</span><br>    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token keyword">willSet</span> <span class="token punctuation">{</span> <span class="token comment">// runs before changes; can access newValue</span><br>            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"y is about to change to </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">newValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">didSet</span> <span class="token punctuation">{</span> <span class="token comment">// runs after changes; can access oldValue</span><br>            <span class="token class-name">Point</span><span class="token punctuation">.</span>maxY <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">maximum</span><span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">.</span>maxY<span class="token punctuation">,</span> y<span class="token punctuation">)</span><br>            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"y changed from </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">oldValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> to </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// A "memberwise initializer" is automatically supplied.</span><br>    <span class="token comment">// Writing this yourself enables doing more</span><br>    <span class="token comment">// than just assign property values.</span><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// self. is only needed here because there is a</span><br>        <span class="token comment">// parameter name with the same name as the property being set.</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<br>        <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<br>        <span class="token class-name">Point</span><span class="token punctuation">.</span>maxY <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">maximum</span><span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">.</span>maxY<span class="token punctuation">,</span> y<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This is a basic computed property.</span><br>    <span class="token comment">// Its value is computed by a function every time it is referenced.</span><br>    <span class="token keyword">var</span> distanceFromOrigin<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This is a computed property that uses the full syntax</span><br>    <span class="token comment">// that supports defining "get" and "set" functions.</span><br>    <span class="token keyword">var</span> distanceFromOrigin2<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token comment">//return (x*x + y*y).squareRoot()</span><br>            <span class="token comment">// If the body is a single expression, return can be omitted.</span><br>            <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token comment">// This moves the point along its current angle from the origin</span><br>        <span class="token comment">// to the new distance.</span><br>        <span class="token comment">/*<br>        set(distance) {<br>            let angle = atan(y / x)<br>            x = distance * cos(angle)<br>            y = distance * sin(angle)<br>        }<br>        */</span><br>        <span class="token comment">// If no name is specified for the new value, it defaults to newValue.</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> angle <span class="token operator">=</span> <span class="token function">atan</span><span class="token punctuation">(</span>y <span class="token operator">/</span> x<span class="token punctuation">)</span><br>            x <span class="token operator">=</span> newValue <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><br>            y <span class="token operator">=</span> newValue <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This is a lazy property.  Its value is computed by</span><br>    <span class="token comment">// a function only the first time it is referenced.</span><br>    <span class="token keyword">lazy</span> <span class="token keyword">var</span> initialDistance<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"computing lazy property"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// note that the function is being called</span><br><br>    <span class="token comment">// This is an instance method.</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"(</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This is a mutating instance method.</span><br>    <span class="token comment">// In a class, var properties can be modified in instance methods.</span><br>    <span class="token comment">// In a struct they cannot unless the method is declared to be "mutating".</span><br>    <span class="token comment">// The underscores mean that this method can be called</span><br>    <span class="token comment">// with raw values, not including argument labels.</span><br>    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">translate</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> dx<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> dy<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        x <span class="token operator">+=</span> dx<br>        y <span class="token operator">+=</span> dy<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> pt <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// creates an instance</span><br><span class="token function">print</span><span class="token punctuation">(</span>pt<span class="token punctuation">.</span>distanceFromOrigin<span class="token punctuation">)</span> <span class="token comment">// invokes computed property get function; 5</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"initial distance ="</span></span><span class="token punctuation">,</span> pt<span class="token punctuation">.</span>initialDistance<span class="token punctuation">)</span> <span class="token comment">// 5</span><br>pt<span class="token punctuation">.</span>distanceFromOrigin <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// invokes computed property set function</span><br>pt<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// invokes instance method; (6, 8)</span><br><span class="token function">print</span><span class="token punctuation">(</span>pt<span class="token punctuation">.</span>distanceFromOrigin2<span class="token punctuation">)</span> <span class="token comment">// invokes computed property; 10</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"initial distance ="</span></span><span class="token punctuation">,</span> pt<span class="token punctuation">.</span>initialDistance<span class="token punctuation">)</span> <span class="token comment">// uses previous value; 5</span><br><br>pt<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// invokes a property observer</span><br><br>pt<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// (6, 2)</span><br>pt<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><br>pt<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// (2.0, 5.0)</span><br>pt<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"initial distance ="</span></span><span class="token punctuation">,</span> pt<span class="token punctuation">.</span>initialDistance<span class="token punctuation">)</span> <span class="token comment">// still 5</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">.</span>maxY<span class="token punctuation">)</span> <span class="token comment">// 8</span><br><span class="token keyword">let</span> pt2 <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment">// creates a second instance</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">.</span>maxY<span class="token punctuation">)</span> <span class="token comment">// 9</span></code></pre><p>Swift supports optional chaining so chains of references to optional values do not have to check for nil values. The result is either an <code>Optional</code> value or <code>nil</code>. The following code demonstrates this.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> street<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> state<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> zip<span class="token punctuation">:</span> <span class="token class-name">String</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> address<span class="token punctuation">:</span> <span class="token class-name">Address</span><span class="token operator">?</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>street<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"123 Some Lane"</span></span><span class="token punctuation">,</span> city<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Somewhere"</span></span><span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"MO"</span></span><span class="token punctuation">,</span> zip<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"12345"</span></span><span class="token punctuation">)</span><br><span class="token keyword">var</span> p<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">,</span> address<span class="token punctuation">:</span> a<span class="token punctuation">)</span><br><br><span class="token function">print</span><span class="token punctuation">(</span>p<span class="token operator">?</span><span class="token punctuation">.</span>address<span class="token operator">?</span><span class="token punctuation">.</span>zip <span class="token keyword">as</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token comment">// Optional(12345)</span><br><br><span class="token keyword">if</span> <span class="token keyword">let</span> zip <span class="token operator">=</span> p<span class="token operator">?</span><span class="token punctuation">.</span>address<span class="token operator">?</span><span class="token punctuation">.</span>zip <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>zip<span class="token punctuation">)</span> <span class="token comment">// 12345</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"no zip"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br>p<span class="token operator">!</span><span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token nil constant">nil</span><br><span class="token function">print</span><span class="token punctuation">(</span>p<span class="token operator">?</span><span class="token punctuation">.</span>address<span class="token operator">?</span><span class="token punctuation">.</span>zip <span class="token keyword">as</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token comment">// nil</span><br><br>p <span class="token operator">=</span> <span class="token nil constant">nil</span><br><span class="token function">print</span><span class="token punctuation">(</span>p<span class="token operator">?</span><span class="token punctuation">.</span>address<span class="token operator">?</span><span class="token punctuation">.</span>zip <span class="token keyword">as</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token comment">// nil</span><br><span class="token function">print</span><span class="token punctuation">(</span>p<span class="token operator">?</span><span class="token punctuation">.</span>address<span class="token operator">?</span><span class="token punctuation">.</span>zip <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"no zip"</span></span><span class="token punctuation">)</span> <span class="token comment">// alternate way to handle optional; "no zip"</span></code></pre><h2 id="classes" tabindex="-1">Classes</h2><p>Classes are similar to structs in many ways. By convention their names begin with an uppercase letter. Typically these names are singular rather than plural.</p><p>Classes do the following things that structs cannot.</p><ul><li>refer to instances by reference rather than making a copy</li><li>inherit properties and methods from one other class</li><li>use type casting to determine if an object is an instance at runtime</li><li>define a &quot;deinitializer&quot; to perform cleanup when an instance is destroyed</li><li>use automatic reference counting (ARC) for garbage collection</li></ul><p>Classes are reference types. This means that assigning one to a variable assigns a reference to the same instance rather than making a copy. Use a class instead of struct when it is important to share data by holding multiple references to the same object.</p><p>To define a class, use the <code>class</code> keyword. A class can have:</p><ul><li>one or more initializers (named <code>init</code>) that play the role of constructors in other languages</li><li>type (or class-level) properties declared with <code>class</code> instead of <code>static</code></li><li>type (or class-level) methods declared with <code>class</code> instead of <code>static</code></li><li>instance-level properties</li><li>instance-level methods</li><li>a superclass</li></ul><p>The default value of a property cannot depend on the value of another property.</p><p>Classes, unlike structs, are not provided with a default memberwise initializer. They are provided with an initializer that takes no arguments only if all of their properties have a default value, It's not clear why this difference exists.</p><p>Definitions of <code>class</code> methods that modify properties of the receiver cannot begin with <code>mutating</code> keyword. That is only applied to <code>struct</code> and <code>extension</code> methods.</p><p>Typically structs are used instead of classes when the need for inheritance is not anticipated.</p><p>Let's re-implement the &quot;Point&quot; struct as a class named &quot;Point2&quot;.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token punctuation">{</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> maxY <span class="token operator">=</span> <span class="token operator">-</span><span class="token class-name">Double</span><span class="token punctuation">.</span>greatestFiniteMagnitude<br>    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Double</span><br>    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token keyword">willSet</span> <span class="token punctuation">{</span><br>            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"y is about to change to </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">newValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">didSet</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Point2</span><span class="token punctuation">.</span>maxY <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">maximum</span><span class="token punctuation">(</span><span class="token class-name">Point2</span><span class="token punctuation">.</span>maxY<span class="token punctuation">,</span> y<span class="token punctuation">)</span><br>            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"y changed from </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">oldValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> to </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<br>        <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<br>        <span class="token class-name">Point2</span><span class="token punctuation">.</span>maxY <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">maximum</span><span class="token punctuation">(</span><span class="token class-name">Point2</span><span class="token punctuation">.</span>maxY<span class="token punctuation">,</span> y<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> distanceFromOrigin<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> distanceFromOrigin2<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> angle <span class="token operator">=</span> <span class="token function">atan</span><span class="token punctuation">(</span>y <span class="token operator">/</span> x<span class="token punctuation">)</span><br>            x <span class="token operator">=</span> newValue <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><br>            y <span class="token operator">=</span> newValue <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">lazy</span> <span class="token keyword">var</span> initialDistance<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>        <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">squareRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// note that the function is being called</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"(</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Note that the "mutating" keyword was removed</span><br>    <span class="token comment">// because that is only used on struct methods.</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">translate</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> dx<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> dy<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        x <span class="token operator">+=</span> dx<br>        y <span class="token operator">+=</span> dy<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Instance properties and instance methods that refer to type properties and methods must prefix them with the class name followed by a period. However, initializers and type methods do not require prefixing to refer to type properties and methods.</p><p>To implement a subclass that inherits the properties and methods of a superclass, add a colon after the subclass name followed by the superclass name.</p><p>Methods in a subclass that override methods in the superclass must begin with the <code>override</code> keyword.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a person."</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">Programmer</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> languages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> languages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Must initialize all properties of this class</span><br>        <span class="token comment">// before calling super.init.</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>languages <span class="token operator">=</span> languages<br><br>        <span class="token comment">// The "super" keyword is used to call methods in the superclass.</span><br>        <span class="token comment">// Subclasses must have an "init" method that</span><br>        <span class="token comment">// calls an "init" method of the superclass.</span><br>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> name<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> langs <span class="token operator">=</span> languages<span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">" &amp; "</span></span><span class="token punctuation">)</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a programmer that knows </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">langs</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">."</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> mark <span class="token operator">=</span> <span class="token class-name">Programmer</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">,</span> languages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"JavaScript"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Swift"</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>mark<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Mark is a programmer that knows JavaScript &amp; Swift.</span></code></pre><p>Marking classes as <code>final</code> prevents defining subclasses and can improve build times.</p><p>Definitions of both classes and structs can be nested inside each other to limit their visibility and/or scope their names.</p><h2 id="initializers" tabindex="-1">Initializers</h2><p>Structs and classes can define <code>init</code> methods that are called when instances are created. They do not begin with the <code>func</code> keyword. Those that initialize ALL of non-optional properties (no default value) are referred to as &quot;designated initializers&quot;. Designated initializers for classes must also initialize all inherited properties, typically by calling a superclass <code>init</code> method.</p><p>As seen earlier, structs provided a default initializer. Structs are not required to explicitly defining more. Classes do not provide a default initializer and at least one must be explicitly defined.</p><p>There can be more than one <code>init</code> method as long as each has a different set of argument labels and initializes all of the properties. Classes typically only define one designated initializer.</p><p>If a class inherits from another, its designated initializers must call one in its immediate superclass. If an initializer has the same signature as one in the superclass, it must indicate that it is overriding the one in the superclass by adding the <code>override</code> keyword before <code>init</code>.</p><p>Just like with functions and other kinds of methods, <code>init</code> methods can use <code>_</code> for argument labels to allow values to be passed without a label.</p><p>&quot;Convenience initializers&quot; are <code>init</code> methods that invoke another designated or convenience initializer in the same struct or class. These must be labeled with the <code>convenience</code> keyword. TODO: Why doesn't Swift allow any <code>init</code> method to do this? Congratulations Swift for having what may be the longest keyword in any programming language!</p><p>&quot;Failable initializers&quot; are methods named <code>init?</code> that can return <code>nil</code> to prevent an instance from being created if the supplied arguments are deemed invalid. An optional value is returned when an instance is created using a failable initializer. As with any optional value, callers must test and unwrap the value in order to use it.</p><p>Deinitializers are methods named <code>deinit</code> that are used to perform cleanup. They do not begin with the <code>func</code> keyword, have no parameters, and cannot be followed by a pair of parentheses. If a struct or class defines this method, it will be called when any instance is destroyed.</p><p>I have two issues with the method name <code>deinit</code>. First, &quot;deinitialize&quot; is not a word. Second, the method doesn't necessarily only clean up after actions taken in an initializer. It can perform cleanup of actions taken by any method. A better name would have been &quot;cleanup&quot; or &quot;onDestroy&quot;.</p><h2 id="protocols" tabindex="-1">Protocols</h2><p>A protocol is like an interface in other programming languages. It can describe type properties, instance properties, type method signatures, and instance method signatures. Properties can be constant (<code>let</code>) or variable (<code>var</code>).</p><p>Other types (structs, classes, and enums) can declare that they conform to protocols by following their name with a colon and a comma-separated list of protocol names. The same syntax can be used by a protocol to inherit the requirements of other protocols.</p><p>A protocol defines a type that can be used in many places where concrete types can appear to state that any value whose concrete type conforms to the protocol is acceptable. This includes constant (<code>let</code>) types, variable (<code>var</code>) types, collection element types, function parameter types, function return types, and object property types.</p><p>Unlike in method implementations, methods described in protocols cannot specify default parameter values.</p><p>Examples of commonly used built-in protocols include <code>Animatable</code>, <code>Collection</code>, <code>Comparable</code>, <code>CustomStringConvertible</code>, <code>Equatable</code>, <code>Hashable</code>, <code>Identifiable</code>, <code>Numeric</code>, <code>ObservedObject</code>, <code>Sequence</code>, and <code>View</code>. Other built-in protocols that may be encountered include <code>App</code>, <code>Scene</code>, <code>Shape</code>, and <code>ViewModifier</code>.</p><p>For many custom types Swift can provide a &quot;synthesized implementation&quot; of the <code>Comparable</code>, <code>Equatable</code>, and <code>Hashable</code> built-in protocols. All that is required is to state that a type conforms to the protocol and only define properties with types that also conform to the protocol.</p><p>Protocols can use the type name <code>Self</code> to refer to the actual type that conforms to the protocol. <code>Self</code> can also be used to refer to static properties and methods of a struct, class, or enum.</p><p>Xcode can add stubs for a protocol to a type that claims to conform to it. To trigger this, click the red circle to the left of the error message &quot;Type does not conform to protocol&quot; and then click the &quot;Fix&quot; button.</p><p>The following code demonstrates defining and using a custom protocol.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">protocol</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Structs can conform to protocols,</span><br><span class="token comment">// but cannot inherit from other structs or classes.</span><br><span class="token keyword">struct</span> <span class="token class-name">Triangle</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> base<span class="token punctuation">:</span> <span class="token class-name">Double</span><br>    <span class="token keyword">var</span> height<span class="token punctuation">:</span> <span class="token class-name">Double</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>base<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>base <span class="token operator">=</span> base<br>        <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        base <span class="token operator">*</span> height <span class="token operator">*</span> <span class="token number">0.5</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Classes can inherit from another class and</span><br><span class="token comment">// they can conform to any number of protocols.</span><br><span class="token keyword">class</span> <span class="token class-name">Rectangle</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> height<span class="token punctuation">:</span> <span class="token class-name">Double</span><br>    <span class="token keyword">var</span> width<span class="token punctuation">:</span> <span class="token class-name">Double</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<br>        <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span><br>        width <span class="token operator">*</span> height<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Any object that conforms to the Shape protocol</span><br><span class="token comment">// can be passed to this function.</span><br><span class="token comment">// Calling getArea on a Shape demonstrates polymorphism because</span><br><span class="token comment">// what the call does is determined by the receiver type.</span><br><span class="token keyword">func</span> <span class="token function-definition function">logShape</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> shape<span class="token punctuation">:</span> <span class="token class-name">Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"area = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">shape<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">logShape</span><span class="token punctuation">(</span><span class="token class-name">Triangle</span><span class="token punctuation">(</span>base<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// area = 6</span><br><span class="token function">logShape</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// area = 20</span></code></pre><p>The following contrived example demonstrates many of the features of protocols.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">protocol</span> <span class="token class-name">Demoable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> typeSetOptional<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> typeSetRequired<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">typeMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><br><br>    <span class="token keyword">var</span> instanceSetOptional<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span><br>    <span class="token keyword">var</span> instanceSetRequired<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">instanceMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><br>    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">instanceMutatingMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Demo</span><span class="token punctuation">:</span> <span class="token class-name">Demoable</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This property can be a constant since "set" is optional.</span><br>    <span class="token keyword">static</span> <span class="token keyword">let</span> typeSetOptional<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">1</span><br><br>    <span class="token comment">// This property cannot be a constant since "set" is required.</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> typeSetRequired<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">2</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">typeMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> p1 <span class="token operator">+</span> p2<br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This property can be a constant since "set" is optional.</span><br>    <span class="token keyword">let</span> instanceSetOptional<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">3</span><br><br>    <span class="token comment">// This property cannot be a constant since "set" is required.</span><br>    <span class="token keyword">var</span> instanceSetRequired<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Don't need to initialize instanceSetOptional</span><br>        <span class="token comment">// because it is a constant.</span><br>        instanceSetRequired <span class="token operator">=</span> p1 <span class="token operator">+</span> p2<br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This method cannot mutate properties of this object.</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">instanceMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        <span class="token comment">// The next line is not allowed because</span><br>        <span class="token comment">// this is not a "mutating" method.</span><br>        <span class="token comment">//instanceSetRequired = p1 + p2</span><br>        <span class="token keyword">return</span> instanceSetOptional <span class="token operator">+</span> instanceSetRequired <span class="token operator">+</span> p1 <span class="token operator">+</span> p2<br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This method can mutate properties of this object.</span><br>    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">instanceMutatingMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        instanceSetRequired <span class="token operator">=</span> instanceSetOptional <span class="token operator">+</span> p1 <span class="token operator">+</span> p2<br>        <span class="token keyword">return</span> instanceSetRequired<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> demo <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>a1<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> a2<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">)</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Demo</span><span class="token punctuation">.</span>typeSetOptional<span class="token punctuation">)</span> <span class="token comment">// 1</span><br><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Demo</span><span class="token punctuation">.</span>typeSetRequired<span class="token punctuation">)</span> <span class="token comment">// 2</span><br><span class="token function">print</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>instanceSetOptional<span class="token punctuation">)</span> <span class="token comment">// 3</span><br><span class="token function">print</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>instanceSetRequired<span class="token punctuation">)</span> <span class="token comment">// 7 + 8 = 15</span><br><span class="token function">print</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span><span class="token function">instanceMethod</span><span class="token punctuation">(</span>a1<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> a2<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3 + 15 + 1 + 2 = 21</span><br><span class="token function">print</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span><span class="token function">instanceMutatingMethod</span><span class="token punctuation">(</span>a1<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> a2<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3 + 1 + 2 = 6</span><br><span class="token function">print</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>instanceSetRequired<span class="token punctuation">)</span> <span class="token comment">// 6</span></code></pre><p>In summary, when a type conforms to a protocol it can mean two things:</p><ol><li>The type may be required to implement some things.</li><li>The type may be given implementations of some things through extensions.</li></ol><h3 id="protocol-extensions" tabindex="-1">Protocol Extensions</h3><p>Default method implementations cannot be defined in a protocol, but they can be defined in an <code>extension</code> (described later) of the protocol. When this is done for a given method, types that conform to the protocol are not required to implement the method. However, can implement the method to override the implementation specified in the extension.</p><p>A protocol extension is used to define methods like <code>filter</code> on the <code>Sequence</code> protocol that is conformed to by concrete types like <code>Array</code>, <code>Dictionary</code>, <code>Range</code>, <code>String</code>, and more.</p><p>We can define a default implementation of the <code>Demoable</code> protocol <code>instanceMethod</code> method (see code above) so types that conform to the protocol are not required to implement that method.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">Demoable</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This property now has a default implementation</span><br>    <span class="token comment">// that is a computed property.</span><br>    <span class="token keyword">var</span> instanceSetOptional<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> instanceSetRequired <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span><br><br>    <span class="token comment">// This instance method now has a default implementation.</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">instanceMethod</span><span class="token punctuation">(</span>a1 p1<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> a2 p2<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> instanceSetOptional <span class="token operator">+</span> instanceSetRequired <span class="token operator">+</span> p1 <span class="token operator">+</span> p2<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="where-clauses" tabindex="-1">where Clauses</h3><p>The type of a function parameter can be specified to be anything that conforms to a list of protocols using the <code>where</code> keyword with the <code>&amp;</code> operator between each protocol name. For example, see the <code>doThis</code> function below.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">protocol</span> <span class="token class-name">HasSize</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> size<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Drink</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span><span class="token punctuation">,</span> <span class="token class-name">HasSize</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">"Drink has size </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">size</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">}</span><br>    <span class="token keyword">var</span> size<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// T can be any type that conforms to the</span><br><span class="token comment">// CustomStringConvertible and HasSize protocols.</span><br><span class="token keyword">func</span> <span class="token function-definition function">doThis</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span>a p<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span> <span class="token operator">&amp;</span> <span class="token class-name">HasSize</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><span class="token function">doThis</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Drink</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Drink has size 1</span><br><br><span class="token comment">// Alternate way to implement the code above is to use a typealias.</span><br><span class="token keyword">typealias</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token class-name">CustomStringConvertible</span> <span class="token operator">&amp;</span> <span class="token class-name">HasSize</span><br><span class="token keyword">func</span> <span class="token function-definition function">doThat</span><span class="token punctuation">(</span>a p<span class="token punctuation">:</span> <span class="token class-name">MyType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><span class="token function">doThat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Drink</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Drink has size 2</span></code></pre><h3 id="protocol-associated-types" tabindex="-1">Protocol Associated Types</h3><p>Protocols that use generic types must declare them in a different way than other types do. Rather than following the name with type parameters in angle brackets, the first lines in the protocol body begin with the <code>associatedtype</code> keyword followed by a type parameter name and optional constraints. Constraints can be written as <code>where TypeParamName: SomeProtocol</code> or just <code>: SomeProtocol</code>.</p><p>TODO: Add more detail!</p><h2 id="extensions" tabindex="-1">Extensions</h2><p>Extensions add functionality to existing types, including structs, classes, enums, and protocols. This can even be done to types defined by the standard library.</p><p>The functionality that can be added includes:</p><ul><li>computed type and instance properties</li><li>initializers</li><li>type and instance methods</li><li>conformance to a protocol</li></ul><p>Extensions cannot add regular properties (a.k.a stored properties).</p><p>Definitions of <code>extension</code> methods that modify properties of the receiver must begin with the <code>mutating</code> keyword to explicitly indicate that they do this.</p><p>Strings in Swift are notoriously difficult to work with because indexes to characters within them must be specified using the type <code>String.Index</code> instead of <code>Int</code>. String operations that require finding a character at a given index are O(n) due to the fact that Unicode characters can vary in length. These operations require traversing all the characters from the beginning, and is the reason Swift doesn't support them out of the box. However, these operations are commonly needed and I think these operations should be supported despite being O(n).</p><p>It is common to use an extension to the <code>String</code> class to add support for <code>Int</code> indexes to the subscript operator. The following is an implementation of this idea.</p><p>When overriding the subscript operator, five argument types should be supported.</p><ul><li>single index: <code>start</code></li><li><code>Range</code>: <code>start..&lt;end</code></li><li><code>ClosedRange</code>: <code>start...end</code></li><li><code>PartialRangeFrom</code>: <code>start...</code></li><li><code>PartialRangeUpTo</code>: <code>..&lt;end</code></li></ul><pre class="language-swift"><code class="language-swift"><span class="token keyword">public</span> <span class="token keyword">extension</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Handles negative indexes by counting from end of string.</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">getOffset</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count<br>        <span class="token keyword">var</span> offset <span class="token operator">=</span> i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> i <span class="token punctuation">:</span> i <span class="token operator">+</span> count<br>        offset <span class="token operator">=</span> offset <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> offset <span class="token operator">></span> count <span class="token operator">?</span> count <span class="token punctuation">:</span> offset<br>        <span class="token keyword">return</span> offset<br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// single index</span><br>    <span class="token keyword">subscript</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><br>            <span class="token keyword">if</span> offset <span class="token operator">>=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">""</span></span> <span class="token punctuation">}</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> offset<span class="token punctuation">)</span><br>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> offset<span class="token punctuation">)</span><br>            <span class="token function">replaceSubrange</span><span class="token punctuation">(</span>idx<span class="token operator">...</span>idx<span class="token punctuation">,</span> with<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// start..&lt;end</span><br>    <span class="token keyword">subscript</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span> r<span class="token punctuation">:</span> <span class="token class-name">Range</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> si <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> ei <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>si<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset <span class="token operator">-</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">[</span>si<span class="token operator">..&lt;</span>ei<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> si <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> ei <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>si<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset <span class="token operator">-</span> startOffset<span class="token punctuation">)</span><br>            <span class="token function">replaceSubrange</span><span class="token punctuation">(</span>si<span class="token operator">..&lt;</span>ei<span class="token punctuation">,</span> with<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// start...end</span><br>    <span class="token keyword">subscript</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span> r<span class="token punctuation">:</span> <span class="token class-name">ClosedRange</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">var</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">if</span> endOffset <span class="token operator">>=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span> endOffset <span class="token operator">-=</span> <span class="token number">1</span> <span class="token punctuation">}</span><br>            <span class="token keyword">let</span> si <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> ei <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>si<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset <span class="token operator">-</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">[</span>si<span class="token operator">...</span>ei<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">var</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">if</span> endOffset <span class="token operator">>=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span> endOffset <span class="token operator">-=</span> <span class="token number">1</span> <span class="token punctuation">}</span><br>            <span class="token keyword">let</span> si <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> ei <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>si<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset <span class="token operator">-</span> startOffset<span class="token punctuation">)</span><br>            <span class="token function">replaceSubrange</span><span class="token punctuation">(</span>si<span class="token operator">...</span>ei<span class="token punctuation">,</span> with<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// start...</span><br>    <span class="token keyword">subscript</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span> r<span class="token punctuation">:</span> <span class="token class-name">PartialRangeFrom</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">[</span>idx<span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> startOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>lowerBound<span class="token punctuation">)</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> startOffset<span class="token punctuation">)</span><br>            <span class="token function">replaceSubrange</span><span class="token punctuation">(</span>idx<span class="token operator">...</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// ..&lt;end</span><br>    <span class="token keyword">subscript</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span> r<span class="token punctuation">:</span> <span class="token class-name">PartialRangeUpTo</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">get</span> <span class="token punctuation">{</span><br>            <span class="token keyword">var</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">if</span> endOffset <span class="token operator">>=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span> endOffset <span class="token operator">-=</span> <span class="token number">1</span> <span class="token punctuation">}</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset<span class="token punctuation">)</span><br>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">[</span><span class="token operator">...</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">set</span> <span class="token punctuation">{</span><br>            <span class="token keyword">var</span> endOffset <span class="token operator">=</span> <span class="token function">getOffset</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>upperBound<span class="token punctuation">)</span><br>            <span class="token keyword">if</span> endOffset <span class="token operator">>=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span> endOffset <span class="token operator">-=</span> <span class="token number">1</span> <span class="token punctuation">}</span><br>            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>startIndex<span class="token punctuation">,</span> offsetBy<span class="token punctuation">:</span> endOffset<span class="token punctuation">)</span><br>            <span class="token function">replaceSubrange</span><span class="token punctuation">(</span><span class="token operator">...</span>idx<span class="token punctuation">,</span> with<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// using two Int arguments instead of a range</span><br>    <span class="token keyword">func</span> <span class="token function-definition function">substring</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> start<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> end<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">[</span>start<span class="token operator">...</span>end<span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following code demonstrates using the methods added by the extension above. It uses the built-in <a href="https://developer.apple.com/documentation/swift/1541112-assert?v=1.0.20" rel="noopener" target="_blank">assert</a> function.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><br><br><span class="token comment">// Positive indexes</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ar"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"a"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ar"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..&lt;</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ar"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ark"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">..&lt;</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Mar"</span></span><span class="token punctuation">)</span><br><br><span class="token comment">// Negative indexes</span><br><span class="token comment">// These must be wrapped in parentheses or</span><br><span class="token comment">// separated from the range operator by a space.</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"r"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span> <span class="token operator">...</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ar"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span> <span class="token operator">..&lt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ar"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ark"</span></span><span class="token punctuation">)</span> <span class="token comment">// parens work, but a space doesn't</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">..&lt;</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Mar"</span></span><span class="token punctuation">)</span> <span class="token comment">// parens work, but a space doesn't</span><br><br><span class="token comment">// Handling indexes that are out of range</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ark"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ark"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..&lt;</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"ark"</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span><br><span class="token function">assert</span><span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token operator">..&lt;</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Mark"</span></span><span class="token punctuation">)</span><br><br><span class="token comment">// Setting substrings</span><br>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"o"</span></span><br><span class="token function">assert</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Mork"</span></span><span class="token punctuation">)</span><br>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..&lt;</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"as"</span></span><br><span class="token function">assert</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Mask"</span></span><span class="token punctuation">)</span><br>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"il"</span></span><br><span class="token function">assert</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Milk"</span></span><span class="token punctuation">)</span><br>text<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"eet"</span></span><br><span class="token function">assert</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Meet"</span></span><span class="token punctuation">)</span><br>text<span class="token punctuation">[</span><span class="token operator">..&lt;</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Goa"</span></span><br><span class="token function">assert</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string-literal"><span class="token string">"Goat"</span></span><span class="token punctuation">)</span></code></pre><h2 id="some-keyword-1" tabindex="-1"><code>some</code> Keyword</h2><p>The <code>some</code> keyword proceeds the name of a protocol to specify that a type (called an &quot;opaque type&quot;) will be some type that conforms to the protocol. In a way this is the opposite of using a generic type. Generic types allow calling code to specify the type that will be used by a function, struct, class, or enum. Opaque types allow a function, struct, class, or enum to select the type to be used.</p><p>A common place whether the <code>some</code> keyword is used is in SwiftUI views. Their <code>body</code> property has the type <code>some View</code>. The value of this property is a function that returns any kind of object that conforms to the View protocol.</p><h2 id="implementing-operators" tabindex="-1">Implementing Operators</h2><p>Built-in operators can be implemented for custom types. For example, the following code defines a way to add two colors.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> red <span class="token operator">=</span> <span class="token number">0</span><br>    <span class="token keyword">var</span> green <span class="token operator">=</span> <span class="token number">0</span><br>    <span class="token keyword">var</span> blue <span class="token operator">=</span> <span class="token number">0</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">+</span><span class="token punctuation">(</span>c1<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">,</span> c2<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Color</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">(</span>c1<span class="token punctuation">.</span>red <span class="token operator">+</span> c2<span class="token punctuation">.</span>red<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">256</span><br>        <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>c1<span class="token punctuation">.</span>green <span class="token operator">+</span> c2<span class="token punctuation">.</span>green<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">256</span><br>        <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">(</span>c1<span class="token punctuation">.</span>blue <span class="token operator">+</span> c2<span class="token punctuation">.</span>blue<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">256</span><br>        <span class="token keyword">return</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> r<span class="token punctuation">,</span> green<span class="token punctuation">:</span> g<span class="token punctuation">,</span> blue<span class="token punctuation">:</span> b<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> c2 <span class="token operator">=</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> c3 <span class="token operator">=</span> c1 <span class="token operator">+</span> c2<br><span class="token function">print</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span></code></pre><p>A similar approach can be used to implement an operator in an existing type using an <code>extension</code>.</p><h2 id="access-control" tabindex="-1">Access Control</h2><p>Swift supports many keywords for controlling access to values like functions, types, and the properties and methods of types. These keywords appear at the beginning of declarations.</p><p>The access control keywords include:</p><ul><li><code>open</code>: access from anywhere; only used for classes and class members</li><li><code>public</code>: same as <code>open</code> except cannot be used in subclasses or overridden</li><li><code>internal</code>: access from any source in the same module (default level)</li><li><code>fileprivate</code>: access only from code in the same source file</li><li><code>private</code>: access only within enclosing declaration (such as a struct or class)</li></ul><p>The most commonly used access control keyword is <code>private</code>. The second most commonly used is <code>internal</code>, which is the default.</p><p>Specifying <code>private(set)</code> on a property means that the property can be accessed as if it were <code>public</code>, but can only be modified as if it were <code>private</code>.</p><h2 id="json" tabindex="-1">JSON</h2><p>Serializing Swift types to JSON and deserializing JSON back to Swift types is supported by the <code>JSONEncoder</code> and <code>JSONDecoder</code> classes. These tasks are a bit more difficult in Swift than in JavaScript.</p><p>Swift types must conform to the <code>Encodable</code> and <code>Decodable</code> protocols in order be converted to and from JSON. <code>Codable</code> is a typealias to <code>Decodable &amp; Encodable</code>, so custom types typically just state that they conform to it.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><br><span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token class-name">JSONEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>encoder<span class="token punctuation">.</span>outputFormatting <span class="token operator">=</span> <span class="token punctuation">.</span>prettyPrinted <span class="token comment">// optional setting</span><br><span class="token keyword">let</span> decoder <span class="token operator">=</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><br><span class="token comment">// Encode the array as JSON.</span><br><span class="token keyword">var</span> encoded <span class="token operator">=</span> <span class="token keyword">try</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><br><span class="token comment">// This String initializer returns an optional.</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> encoded<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"array JSON ="</span></span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"failed to encode JSON"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Demo</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> b<span class="token punctuation">:</span> <span class="token class-name">Bool</span><br>    <span class="token keyword">var</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span><br>    <span class="token keyword">var</span> f<span class="token punctuation">:</span> <span class="token class-name">Float</span><br>    <span class="token keyword">var</span> d<span class="token punctuation">:</span> <span class="token class-name">Double</span><br>    <span class="token keyword">var</span> s<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token comment">// The Character type does not conform to Encodable or Decodable</span><br>    <span class="token comment">// so it cannot easily be converted to and from JSON.</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> demo <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>b<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> i<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">3.14159</span><span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"test"</span></span><span class="token punctuation">)</span><br><span class="token comment">// Encode the object as JSON.</span><br>encoded <span class="token operator">=</span> <span class="token keyword">try</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><br><span class="token keyword">if</span> <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> encoded<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"object JSON ="</span></span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><br><br>    <span class="token comment">// Prepare to decode the JSON.</span><br>    <span class="token comment">// The data method returns an optional.</span><br>    <span class="token keyword">if</span> <span class="token keyword">let</span> data <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Decode the JSON into a Demo objet.</span><br>        <span class="token keyword">let</span> demo2<span class="token punctuation">:</span> <span class="token class-name">Demo</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Demo</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>demo2 <span class="token operator">!=</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Demo object ="</span></span><span class="token punctuation">,</span> demo2<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"failed to encode JSON"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To read JSON from a file in a project into a variable whose type is described by <code>SomeType</code> (typically a struct), use the <code>Bundle</code> class as follows:</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// VERIFY THIS!</span><br><span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token class-name">Bundle</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">SomeType</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"some-file.json"</span></span><span class="token punctuation">)</span></code></pre><p>To convert JSON data that uses snake-case in keys to camel-case names,</p><pre class="language-swift"><code class="language-swift">decoder<span class="token punctuation">.</span>keyDecodingStrategy <span class="token operator">=</span> <span class="token punctuation">.</span>convertFromSnakeCase</code></pre><p>To convert ISO 8601 date strings to Swift dates:</p><pre class="language-swift"><code class="language-swift">decoder<span class="token punctuation">.</span>dateDecodingStrategy <span class="token operator">=</span> <span class="token punctuation">.</span>iso8601</code></pre><h2 id="concurrency" tabindex="-1">Concurrency</h2><p>See <a href="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html?v=1.0.20" rel="noopener" target="_blank">Swift Concurrency</a>.</p><p>Swift 5.5 added support for the <code>async</code> and <code>await</code> keywords. This was announced at the WWDC 2021 event. It offers an alternative to passing escaping closures (a.k.a. completion handlers) or using the Combine framework. Using async/await allows the compiler to provide more and better error messages than with other approaches.</p><p>Functions that use the <code>await</code> keyword must include the <code>async</code> keyword after their parameter list.</p><p>For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">getPets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-></span> <span class="token class-name">Pets</span><span class="token operator">?</span> <span class="token punctuation">{</span><br>  <span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> dogs <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">let</span> cats <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> <span class="token class-name">Pets</span><span class="token punctuation">(</span>dogs<span class="token punctuation">:</span> dogs<span class="token punctuation">,</span> cats<span class="token punctuation">:</span> cats<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"error: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> <span class="token nil constant">nil</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Async functions must be called from an asynchronous context. This can be another <code>async</code> function. Another option is to embed the calls in a <code>Task</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Task</span> <span class="token punctuation">{</span><br>    <span class="token keyword">do</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">getPhoto</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"some-name"</span></span><span class="token punctuation">)</span><br>        <span class="token comment">// Do something with photo.</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"error getting photo: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error<span class="token punctuation">.</span>localizedDescription</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The code in a <code>Task</code> runs asynchronously. For example, when the following function is called the output will be 1, 3, 2.</p><pre><code>func taskDemo() {
    print(&quot;1&quot;)
    Task {
        print(&quot;2&quot;)
    }
    print(&quot;3&quot;)
}
</code></pre><p>To bridge between functions that take callback functions, referred to as &quot;completion handlers&quot;, use the <a href="https://developer.apple.com/documentation/swift/withcheckedcontinuation(function:_:)?v=1.0.20" rel="noopener" target="_blank">withCheckedContinuation</a> or the <a href="https://developer.apple.com/documentation/swift/withcheckedthrowingcontinuation(function:_:)?v=1.0.20" rel="noopener" target="_blank">withCheckedThrowingContinuation</a> function. See this post from <a href="https://www.hackingwithswift.com/quick-start/concurrency/how-to-use-continuations-to-convert-completion-handlers-into-async-functions?v=1.0.20" rel="noopener" target="_blank">Hacking with Swift</a>.</p><p>Suppose <code>getData</code> is a function that takes a completion handler. To call this function inside an <code>async</code> function so callers can use the <code>await</code> keyword:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">getDataAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-></span> <span class="token class-name">SomeData</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> withCheckedThrowingContinuation <span class="token punctuation">{</span> continuation <span class="token keyword">in</span><br>    <span class="token function">getData</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> <span class="token punctuation">{</span> result<span class="token punctuation">,</span> error <span class="token keyword">in</span><br>      <span class="token keyword">if</span> <span class="token keyword">let</span> error <span class="token punctuation">{</span><br>        continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>throwing<span class="token punctuation">:</span> error<span class="token punctuation">)</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>returning<span class="token punctuation">:</span> result<span class="token punctuation">)</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="file-i%2Fo" tabindex="-1">File I/O</h2><p>To write and read files, use the <code>FileManager</code> class.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><br><span class="token keyword">let</span> dirUrl <span class="token operator">=</span> <span class="token class-name">FileManager</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span>homeDirectoryForCurrentUser<br><span class="token comment">// file:///Users/mark/</span><br><br><span class="token comment">// For iOS, use this instead:</span><br><span class="token comment">// let dirUrl = FileManager.default.urls(</span><br><span class="token comment">//     for: .documentDirectory, in: .userDomainMask)[0]</span><br><br><span class="token keyword">var</span> filePath <span class="token operator">=</span> dirUrl<span class="token punctuation">.</span><span class="token function">appendingPathComponent</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"demo.txt"</span></span><span class="token punctuation">)</span><br><span class="token comment">// file:///Users/mark/demo.txt</span><br><br><span class="token comment">// Write to the file.</span><br><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Hello, World!"</span></span><br><span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Setting atomically to true means that it will</span><br>    <span class="token comment">// write to an auxillary file first and then</span><br>    <span class="token comment">// rename that file to the target file to guarantee that the file</span><br>    <span class="token comment">// won't be partially written if the app crashes while writing.</span><br>    <span class="token keyword">try</span> text<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> filePath<span class="token punctuation">,</span> atomically<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"wrote file"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Read from the file.</span><br><span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">Data</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> filePath<span class="token punctuation">)</span><br>    <span class="token keyword">if</span> <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> data<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">// Hello, World!</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"failed to read from file"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="threads" tabindex="-1">Threads</h2><p>Swift applications can run tasks (blocks of code) in multiple threads. While it is possible explicitly create new threads, typically we place work in various queues and let the operating system pull work from the queues and assign it to threads.</p><p>Queues can be serial or concurrent. Serial queues execute one assigned block of code at a time. Concurrent queues can execute multiple assigned blocks of code at a time.</p><p>Swift provides several queues and new ones can be created. TODO: What are the names of the provided queues?</p><p>All code that updates UI state and renders the UI should run on the main thread.</p><p>To view the thread usage of an app running in Xcode, click the spray can icon at the top of the Navigator. This displays the &quot;Debug Navigator&quot;. Click the &quot;CPU&quot; tab to see the CPU usage on each of the active threads.</p><p>To run code on a new thread:</p><pre class="language-swift"><code class="language-swift"><span class="token comment">// qos stands for Quality Of Service.</span><br><span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>qosName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token keyword">some</span><span class="token operator">-</span>code <span class="token punctuation">}</span><br><span class="token comment">// where qosName is one of</span><br><span class="token comment">// background - for maintenance or cleanup tasks</span><br><span class="token comment">// default - default qos used when none is specified</span><br><span class="token comment">// unspecified - for no specific purpose</span><br><span class="token comment">// userInitiated - for tasks that prevent active use of app</span><br><span class="token comment">// userInteractive - for animations, event handling, and UI updates</span><br><span class="token comment">// utility - for tasks the user does not actively track</span></code></pre><p>When code running off of the main thread needs to update UI state, it should register a function to run on the main thread as follows:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">await</span> <span class="token class-name">MainActor</span><span class="token punctuation">.</span>run <span class="token punctuation">{</span> <span class="token keyword">some</span><span class="token operator">-</span>code <span class="token punctuation">}</span></code></pre><p>The code above must be run in an asynchronous context such as an <code>async</code> function or a <code>Task</code>.</p><p>To run code on the main thread from a synchronous context:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Dispatch</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token keyword">some</span><span class="token operator">-</span>code <span class="token punctuation">}</span></code></pre><p><code>Thread.isMainThread</code> is a <code>Bool</code> property that indicates whether the code from which it is referenced is running on the main thread.</p><p><code>Thread.current</code> holds a reference to the current thread object. These have <code>name</code> (ex. &quot;main&quot;) and <code>number</code> (ex. 1) properties.</p><p>To run code on the main thread after some number of seconds (ex. 2):</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">asyncAfter</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">some</span><span class="token operator">-</span>code <span class="token punctuation">}</span></code></pre><p>To run code on a given thread after some number of seconds:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>qosName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asyncAfter</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">some</span><span class="token operator">-</span>code<br><span class="token punctuation">}</span></code></pre><p>TODO: Add more detail?</p><h2 id="asyncstream" tabindex="-1">AsyncStream</h2><p><a href="https://developer.apple.com/documentation/swift/asyncstream?v=1.0.20" rel="noopener" target="_blank">AsyncStream</a> is a provided struct that supports asynchronous sequences that are generated by a closure that produces new elements.</p><p>TODO: Add lots of examples!</p><h2 id="asyncalgorithms" tabindex="-1">AsyncAlgorithms</h2><p><a href="https://github.com/apple/swift-async-algorithms?v=1.0.20" rel="noopener" target="_blank">AsyncAlgorithms</a> is a Swift package from Apple that implements many algorithms for working with asynchronous sequences.</p><p>TODO: Add lots of examples!</p><p>See the SwiftLeeds talk <a href="https://www.youtube.com/watch?v=ObYLV30-dwg?v=1.0.20" rel="noopener" target="_blank">SwiftUI, Async/Await, AsyncAlgorithms: How does it all fit?</a>.</p><h2 id="actors" tabindex="-1">Actors</h2><p>An <a href="https://developer.apple.com/documentation/swift/actor?v=1.0.20" rel="noopener" target="_blank">Actor</a> is a data type that is used to isolate parallel tasks. Actors are defined similarly to classes, but use the <code>actor</code> keyword instead of the <code>class</code> keyword.</p><p>TODO: Add much more detail about these!</p><p><a href="?v=1.0.20" rel="noopener" target="_blank">MainActor</a> is a provided global actor that executes the associated code in the main queue.</p><p>To cause a function or method to run in the main queue, annotated it with <code>@MainActor</code>.</p><p>To cause all code in a type such as a <code>class</code> or <code>struct</code> annotated it with <code>@MainActor</code>.</p><p>To run a block of code in the main queue, place it in a closure that is passed to <code>MainActor.run</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">await</span> <span class="token class-name">MainActor</span><span class="token punctuation">.</span>run <span class="token punctuation">{</span><br>    <span class="token comment">// code goes here</span><br><span class="token punctuation">}</span></code></pre><p>For more on <code>MainActor</code> see the <a href="https://www.hackingwithswift.com/quick-start/concurrency/how-to-use-mainactor-to-run-code-on-the-main-queue?v=1.0.20" rel="noopener" target="_blank">Hacking With Swift</a> post.</p><h2 id="http" tabindex="-1">HTTP</h2><p>Sending HTTP requests and processing HTTP responses in Swift is fairly tedious. Using the new <code>async</code> and <code>await</code> keywords and creating some utility functions makes this easier.</p><p>The following example demonstrates sending HTTP DELETE, GET, POST, and PUT requests.</p><p>Utility functions for sending HTTP requests below are defined in the file <code>HttpUtil.swift</code>.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><br><span class="token keyword">enum</span> <span class="token class-name">HttpError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token function">badStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><br>    <span class="token keyword">case</span> badUrl<br>    <span class="token keyword">case</span> jsonEncode<br><span class="token punctuation">}</span><br><br><span class="token keyword">extension</span> <span class="token class-name">HttpError</span><span class="token punctuation">:</span> <span class="token class-name">LocalizedError</span> <span class="token punctuation">{</span><br>    <span class="token keyword">public</span> <span class="token keyword">var</span> errorDescription<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token punctuation">{</span><br>        <span class="token keyword">switch</span> <span class="token keyword">self</span> <span class="token punctuation">{</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">badStatus</span><span class="token punctuation">(</span><span class="token keyword">let</span> status<span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"bad status </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">status</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>badUrl<span class="token punctuation">:</span><br>            <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"bad URL"</span></span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>jsonEncode<span class="token punctuation">:</span><br>            <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"JSON encoding failed"</span></span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">HttpUtil</span> <span class="token punctuation">{</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">delete</span><span class="token punctuation">(</span>from url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">url</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">/</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span>badUrl<br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token class-name">URLRequest</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span><br>        request<span class="token punctuation">.</span>httpMethod <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"DELETE"</span></span><br>        <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> request<span class="token punctuation">)</span><br><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> res <span class="token operator">=</span> res <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">HTTPURLResponse</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">!=</span> <span class="token number">200</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span><span class="token function">badStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">get</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span><br>        from url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        type<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">.</span><span class="token keyword">Type</span><br>    <span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">T</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Decodable</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> url<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span>badUrl<br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> url<span class="token punctuation">)</span><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> res <span class="token operator">=</span> res <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">HTTPURLResponse</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">!=</span> <span class="token number">200</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span><span class="token function">badStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">post</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token operator">></span><span class="token punctuation">(</span><br>        to url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        with data<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span><br>        type<span class="token punctuation">:</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token keyword">Type</span><br>    <span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">U</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Encodable</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">:</span> <span class="token class-name">Decodable</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">httpWithBody</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> url<span class="token punctuation">,</span> method<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"POST"</span></span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> data<span class="token punctuation">,</span> type<span class="token punctuation">:</span> type<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">put</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token operator">></span><span class="token punctuation">(</span><br>        to url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        with data<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span><br>        type<span class="token punctuation">:</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token keyword">Type</span><br>    <span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">U</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Encodable</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">:</span> <span class="token class-name">Decodable</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">httpWithBody</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> url<span class="token punctuation">,</span> method<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"PUT"</span></span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> data<span class="token punctuation">,</span> type<span class="token punctuation">:</span> type<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">httpWithBody</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token operator">></span><span class="token punctuation">(</span><br>        to url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        method<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        with data<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span><br>        type<span class="token punctuation">:</span> <span class="token class-name">U</span><span class="token punctuation">.</span><span class="token keyword">Type</span><br>    <span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">U</span> <span class="token keyword">where</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Encodable</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">:</span> <span class="token class-name">Decodable</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> url<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span>badUrl<br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">JSONEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span>jsonEncode<br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token class-name">URLRequest</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span><br>        request<span class="token punctuation">.</span>httpMethod <span class="token operator">=</span> method<br>        request<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"application/json"</span></span><span class="token punctuation">,</span> forHTTPHeaderField<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Content-Type"</span></span><span class="token punctuation">)</span><br><br>        <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> request<span class="token punctuation">,</span> from<span class="token punctuation">:</span> json<span class="token punctuation">)</span><br><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> res <span class="token operator">=</span> res <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">HTTPURLResponse</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">!=</span> <span class="token number">200</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">HttpError</span><span class="token punctuation">.</span><span class="token function">badStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>A SwiftUI <code>ViewModel</code> that uses the utility functions above is defined in <code>ViewModel.swift</code> which follows. In a real app, most of the code in the <code>init</code> method below would be placed in various views. One of the views could create an instance of <code>ViewModel</code> with <code>@StateObject var vm = ViewModel()</code> and <code>vm</code> could be passed to the other views that need it.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Dog</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span><span class="token punctuation">,</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token class-name">Int</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">breed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This only differs from Dog in that it doesn't have an id property.</span><br><span class="token keyword">struct</span> <span class="token class-name">NewDog</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span><span class="token punctuation">,</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">breed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">ViewModel</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> dogs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Dog</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"http://localhost:8001/dog"</span></span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">deleteDog</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token class-name">ViewModel</span><span class="token punctuation">.</span>url<span class="token punctuation">,</span> id<span class="token punctuation">:</span> id<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">getDog</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token class-name">ViewModel</span><span class="token punctuation">.</span>url</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">/</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> url<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">getDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Dog</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token class-name">ViewModel</span><span class="token punctuation">.</span>url<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Dog</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">postDog</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> dog<span class="token punctuation">:</span> <span class="token class-name">NewDog</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><br>            to<span class="token punctuation">:</span> <span class="token class-name">ViewModel</span><span class="token punctuation">.</span>url<span class="token punctuation">,</span><br>            with<span class="token punctuation">:</span> dog<span class="token punctuation">,</span><br>            type<span class="token punctuation">:</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">self</span><br>        <span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">putDog</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> dog<span class="token punctuation">:</span> <span class="token class-name">Dog</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token class-name">ViewModel</span><span class="token punctuation">.</span>url</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">/</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><br>        <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">HttpUtil</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> url<span class="token punctuation">,</span> with<span class="token punctuation">:</span> dog<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Task creates an asynchronous context that can use the await keyword.</span><br>        <span class="token class-name">Task</span><span class="token punctuation">(</span>priority<span class="token punctuation">:</span> <span class="token punctuation">.</span>medium<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">do</span> <span class="token punctuation">{</span><br>                <span class="token comment">// Create a new dog.</span><br>                <span class="token keyword">let</span> newDog <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">postDog</span><span class="token punctuation">(</span><br>                    <span class="token class-name">NewDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Clarice"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whippet"</span></span><span class="token punctuation">)</span><br>                <span class="token punctuation">)</span><br>                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"created dog with id </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">newDog<span class="token punctuation">.</span>id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><br>                <span class="token comment">// Get the dog with id 1.</span><br>                <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">getDog</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><br>                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"first dog ="</span></span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><br><br>                <span class="token comment">// Update an existing dog.</span><br>                dog<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Moo"</span></span><br>                dog<span class="token punctuation">.</span>breed <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Cow"</span></span><br>                <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">putDog</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><br><br>                <span class="token comment">// Delete an existing dog.</span><br>                <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">deleteDog</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><br><br>                <span class="token comment">// Get all the dogs.</span><br>                <span class="token keyword">let</span> fetchedDogs <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">getDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                <span class="token keyword">for</span> dog <span class="token keyword">in</span> fetchedDogs <span class="token punctuation">{</span><br>                    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>breed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>                <span class="token punctuation">}</span><br><br>                <span class="token comment">// Update the published property dogs in the main thread.</span><br>                <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span><br>                    <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>dogs <span class="token operator">=</span> fetchedDogs<br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"error ="</span></span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>It is also possible to implement HTTP servers in Swift. The most popular package for doing this is <a href="https://github.com/vapor/vapor?v=1.0.20" rel="noopener" target="_blank">Vapor</a>. To install Vapor, first install <a href="https://brew.sh?v=1.0.20" rel="noopener" target="_blank">Homebrew</a> and then enter <code>brew install vapor</code>.</p><p>To create, build, and run a new Vapor project:</p><ul><li>Enter <code>vapor new {project-name} -n</code>.</li><li>Enter <code>open Package.swift</code> to open the project in Xcode and install the dependencies. This takes a couple of minutes to complete.</li><li>Press the play button in the upper-right to build and start the server. The first build takes a couple of minutes to complete.</li></ul><p>The server listens on port 8080 by default. To change this, add the following in the <code>configure</code> function inside <code>Sources/App/Controllers/configure.swift</code>:</p><pre class="language-swift"><code class="language-swift">app<span class="token punctuation">.</span>http<span class="token punctuation">.</span>server<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>port <span class="token operator">=</span> <span class="token punctuation">{</span>new<span class="token operator">-</span>port<span class="token operator">-</span>number<span class="token punctuation">}</span></code></pre><p>The routes are defined in <code>Sources/App/Controllers/routes.swift</code>. The only provided routes are <code>GET /</code>which returns &quot;It works!&quot; and <code>GET /hello</code> which returns &quot;Hello, world!&quot;.</p><p>After modifying the routes, stop the server by clicking the stop button (square) in the upper-right of Xcode and restart the server by clicking the play button.</p><p>The following example demonstrates using Vapor to implement a set of REST services for performing CRUD operations on a collection of dogs. To start the server from a terminal, enter <code>vapor run</code>. This takes a couple of minutes the first time the server is started.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Vapor</span><br><br><span class="token comment">// Must conform to the Content protocol</span><br><span class="token comment">// in order to return from a route.</span><br><span class="token keyword">struct</span> <span class="token class-name">Dog</span><span class="token punctuation">:</span> <span class="token class-name">Content</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token class-name">Int</span><br>    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">var</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">NewDog</span><span class="token punctuation">:</span> <span class="token class-name">Content</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token keyword">let</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> dogMap<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">:</span> <span class="token class-name">Dog</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><br><br><span class="token keyword">var</span> lastId <span class="token operator">=</span> <span class="token number">0</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span><br>    lastId <span class="token operator">+=</span> <span class="token number">1</span><br>    <span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> lastId<span class="token punctuation">,</span> name<span class="token punctuation">:</span> name<span class="token punctuation">,</span> breed<span class="token punctuation">:</span> breed<span class="token punctuation">)</span><br>    dogMap<span class="token punctuation">[</span>lastId<span class="token punctuation">]</span> <span class="token operator">=</span> dog<br>    <span class="token keyword">return</span> dog<br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Maisey"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Treeing Walker Coonhound"</span></span><span class="token punctuation">)</span><br>    <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Ramsay"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Native American Indian Dog"</span></span><span class="token punctuation">)</span><br>    <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Oscar"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"German Shorthaired Pointer"</span></span><span class="token punctuation">)</span><br>    <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Comet"</span></span><span class="token punctuation">,</span> breed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Whippet"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">routes</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> app<span class="token punctuation">:</span> <span class="token class-name">Application</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span><br>    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>    <span class="token comment">// Could refactor to use a controller.</span><br><br>    app<span class="token punctuation">.</span><span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token string-literal"><span class="token string">"Hello, World!"</span></span> <span class="token punctuation">}</span><br><br>    <span class="token comment">// The Content-Type header will automatically be set to "application/json".</span><br>    app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dog"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Dog</span><span class="token punctuation">]</span> <span class="token keyword">in</span><br>        <span class="token class-name">Array</span><span class="token punctuation">(</span>dogMap<span class="token punctuation">.</span>values<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dog"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">":id"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> req <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token keyword">in</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"id"</span></span><span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"missing id param"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> dog <span class="token operator">=</span> dogMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> dog<br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>notFound<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dog"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> req <span class="token operator">-></span> <span class="token class-name">EventLoopFuture</span><span class="token operator">&lt;</span><span class="token class-name">Response</span><span class="token operator">></span> <span class="token keyword">in</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> byteBuffer <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>data <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"invalid or missing body"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">do</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> newDog <span class="token operator">=</span> <span class="token keyword">try</span> req<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">NewDog</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><br>            <span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token function">addDog</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> newDog<span class="token punctuation">.</span>name<span class="token punctuation">,</span> breed<span class="token punctuation">:</span> newDog<span class="token punctuation">.</span>breed<span class="token punctuation">)</span><br><br>            <span class="token keyword">var</span> headers <span class="token operator">=</span> <span class="token class-name">HTTPHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">.</span>location<span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">req<span class="token punctuation">.</span>url</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">/</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dog<span class="token punctuation">.</span>id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>            <span class="token keyword">return</span> dog<span class="token punctuation">.</span><span class="token function">encodeResponse</span><span class="token punctuation">(</span><br>                status<span class="token punctuation">:</span> <span class="token punctuation">.</span>created<span class="token punctuation">,</span> headers<span class="token punctuation">:</span> headers<span class="token punctuation">,</span> <span class="token keyword">for</span><span class="token punctuation">:</span> req<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dog"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">":id"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> req <span class="token operator">-></span> <span class="token class-name">Dog</span> <span class="token keyword">in</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"id"</span></span><span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"missing id param"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// This creates a copy of the struct.</span><br>        <span class="token keyword">guard</span> <span class="token keyword">var</span> dog <span class="token operator">=</span> dogMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>notFound<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"no dog with id </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> found"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> byteBuffer <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>data <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"invalid or missing body"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">do</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> newDog <span class="token operator">=</span> <span class="token keyword">try</span> req<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">NewDog</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><br><br>            <span class="token comment">// Update the copied struct.</span><br>            dog<span class="token punctuation">.</span>name <span class="token operator">=</span> newDog<span class="token punctuation">.</span>name<br>            dog<span class="token punctuation">.</span>breed <span class="token operator">=</span> newDog<span class="token punctuation">.</span>breed<br><br>            <span class="token comment">// Update the value in dogMap.</span><br>            dogMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> dog<br>            <span class="token keyword">return</span> dog<br>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"failed to decode body to Dog"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dog"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">":id"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> req <span class="token operator">-></span> <span class="token class-name">HTTPStatus</span> <span class="token keyword">in</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"id"</span></span><span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token class-name">Abort</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badRequest<span class="token punctuation">,</span> reason<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"missing id param"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">let</span> dog <span class="token operator">=</span> dogMap<span class="token punctuation">.</span><span class="token function">removeValue</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> id<span class="token punctuation">)</span><br>        <span class="token keyword">return</span> dog <span class="token operator">==</span> <span class="token nil constant">nil</span> <span class="token operator">?</span> <span class="token punctuation">.</span>notFound <span class="token punctuation">:</span> <span class="token punctuation">.</span>ok<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="instruments" tabindex="-1">Instruments</h2><p>Instruments is an app included with Xcode for analyzing ...</p><p>To launch the app, select Xcode ... Open Developer Tool ... Instruments.</p><p>To analyze HTTP traffic, choose Network.</p><p>TODO: Add more detail.</p><h2 id="shell-commands" tabindex="-1">Shell Commands</h2><p>TODO: Is it possible to execute shell commands from Swift? See the <code>Process</code> class.</p><h2 id="compiler-directives" tabindex="-1">Compiler Directives</h2><p>The <code>#if</code> compiler directive conditionally includes a block of code. A common use is to include code that is specific to iOS, macOS, tvOS, or watchOS.</p><pre class="language-swift"><code class="language-swift"><span class="token directive property"><span class="token directive-name">#if</span> os<span class="token punctuation">(</span>macOS<span class="token punctuation">)</span></span><br>  <span class="token comment">// macOS code</span><br><span class="token directive property"><span class="token directive-name">#elseif</span> os<span class="token punctuation">(</span>iOS<span class="token punctuation">)</span></span><br>  <span class="token comment">// iOS code</span><br><span class="token directive property"><span class="token directive-name">#else</span></span><br>  <span class="token comment">// Other code</span><br><span class="token directive property"><span class="token directive-name">#endif</span></span></code></pre><p>To include code only when the app is compiled in debug mode, surround it with <code>#if DEBUG ... #endif</code>.</p><p>To include code only when the app is not compiled in debug mode, surround it with <code>#if RELEASE ... #endif</code>.</p><p>To include code only when the app is compiled with a specific version of Swift, surround it with <code>#if swift(&lt;version) ... #endif</code> where <code>version</code> is replaced by a number like 5.</p><p>To include code only when the app is running in the Simulator, surround it with <code>#if targetEnvironment(simulator) ... #endif</code>.</p><h2 id="logging" tabindex="-1">Logging</h2><p>Apple provides the <code>Logger</code> struct for writing log messages that appear in the Xcode console and in the Console app.</p><p>Here is a custom struct named <code>Log</code> that wraps the functionality of <code>Logger</code>. It provides better output, capturing the location of log messages including their file name, function name, and line number. Consider copying this code into each project that needs logging.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span> <span class="token comment">// for Bundle</span><br><span class="token keyword">import</span> os<br><br><span class="token comment">// This is necessary to allow OSLogType values to be Dictionary keys.</span><br><span class="token keyword">extension</span> <span class="token class-name">OSLogType</span><span class="token punctuation">:</span> <span class="token class-name">Hashable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span><br>    <span class="token comment">// MARK: - Constants</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> typeToEmoji<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">OSLogType</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">.</span>debug<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>error<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>fault<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>info<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><br>    <span class="token punctuation">]</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> typeToName<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">OSLogType</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">.</span>debug<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"debug"</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>error<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"error"</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>fault<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fault"</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span>info<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"info"</span></span><br>    <span class="token punctuation">]</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">(</span><br>        subsystem<span class="token punctuation">:</span> <span class="token class-name">Bundle</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>bundleIdentifier<span class="token operator">!</span><span class="token punctuation">,</span><br>        category<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><br>    <span class="token punctuation">)</span><br><br>    <span class="token comment">// MARK: - Methods</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildMessage</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> type<span class="token punctuation">:</span> <span class="token class-name">OSLogType</span><span class="token punctuation">,</span><br>        <span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        <span class="token omit keyword">_</span> file<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        <span class="token omit keyword">_</span> function<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        <span class="token omit keyword">_</span> line<span class="token punctuation">:</span> <span class="token class-name">Int</span><br>    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> fileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span>separatedBy<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"/"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>last <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"unknown"</span></span><br>        <span class="token keyword">let</span> emoji <span class="token operator">=</span> typeToEmoji<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">""</span></span><br>        <span class="token keyword">let</span> name <span class="token operator">=</span> typeToName<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">""</span></span><br>        <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"""<br>        </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">fileName</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">function</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> line </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">line</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"><br>        </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">emoji</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"><br>        """</span></span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">debug</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        file<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#file</span><span class="token punctuation">,</span><br>        function<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#function</span><span class="token punctuation">,</span><br>        line<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token literal constant">#line</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token function">buildMessage</span><span class="token punctuation">(</span><span class="token punctuation">.</span>debug<span class="token punctuation">,</span> message<span class="token punctuation">,</span> file<span class="token punctuation">,</span> function<span class="token punctuation">,</span> line<span class="token punctuation">)</span><br>        <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token punctuation">.</span>debug<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">error</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> err<span class="token punctuation">:</span> <span class="token class-name">Error</span><span class="token punctuation">,</span><br>        file<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#file</span><span class="token punctuation">,</span><br>        function<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#function</span><span class="token punctuation">,</span><br>        line<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token literal constant">#line</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> message <span class="token operator">=</span> err<span class="token punctuation">.</span>localizedDescription<br>        <span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> file<span class="token punctuation">:</span> file<span class="token punctuation">,</span> function<span class="token punctuation">:</span> function<span class="token punctuation">,</span> line<span class="token punctuation">:</span> line<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">error</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        file<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#file</span><span class="token punctuation">,</span><br>        function<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#function</span><span class="token punctuation">,</span><br>        line<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token literal constant">#line</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token function">buildMessage</span><span class="token punctuation">(</span><span class="token punctuation">.</span>error<span class="token punctuation">,</span> message<span class="token punctuation">,</span> file<span class="token punctuation">,</span> function<span class="token punctuation">,</span> line<span class="token punctuation">)</span><br>        <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token punctuation">.</span>error<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">fault</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        file<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#file</span><span class="token punctuation">,</span><br>        function<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#function</span><span class="token punctuation">,</span><br>        line<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token literal constant">#line</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token function">buildMessage</span><span class="token punctuation">(</span><span class="token punctuation">.</span>fault<span class="token punctuation">,</span> message<span class="token punctuation">,</span> file<span class="token punctuation">,</span> function<span class="token punctuation">,</span> line<span class="token punctuation">)</span><br>        <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token punctuation">.</span>fault<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">info</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>        file<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#file</span><span class="token punctuation">,</span><br>        function<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token literal constant">#function</span><span class="token punctuation">,</span><br>        line<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token literal constant">#line</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token function">buildMessage</span><span class="token punctuation">(</span><span class="token punctuation">.</span>info<span class="token punctuation">,</span> message<span class="token punctuation">,</span> file<span class="token punctuation">,</span> function<span class="token punctuation">,</span> line<span class="token punctuation">)</span><br>        <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token punctuation">.</span>info<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">/*<br>     This sets "privacy" to "public" to prevent values<br>     in string interpolations from being redacted.<br>     From https://developer.apple.com/documentation/os/logger<br>     "When you include an interpolated string or custom object in your message,<br>     the system redacts the value of that string or object by default.<br>     This behavior prevents the system from leaking potentially user-sensitive<br>     information in the log files, such as the users account information.<br>     If the data doesnt contain sensitive information, change the<br>     privacy option of that value when logging the information."<br>     */</span><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token class-name">OSLogType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">switch</span> type <span class="token punctuation">{</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>debug<span class="token punctuation">:</span><br>            <span class="token comment">// The argument in each of the logger calls below</span><br>            <span class="token comment">// MUST be a string interpolation!</span><br>            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message<span class="token punctuation">,</span> privacy<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">public</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>error<span class="token punctuation">:</span><br>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message<span class="token punctuation">,</span> privacy<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">public</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>fault<span class="token punctuation">:</span><br>            logger<span class="token punctuation">.</span><span class="token function">fault</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message<span class="token punctuation">,</span> privacy<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">public</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">case</span> <span class="token punctuation">.</span>info<span class="token punctuation">:</span><br>            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message<span class="token punctuation">,</span> privacy<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">public</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token keyword">default</span><span class="token punctuation">:</span><br>            logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">message<span class="token punctuation">,</span> privacy<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">public</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="tools" tabindex="-1">Tools</h2><h4 id="simulator" tabindex="-1">Simulator</h4><p>See SwiftUI notes.</p><h4 id="pragma-marks" tabindex="-1">Pragma Marks</h4><p>Each section of a source file can be preceded by a special comment called a &quot;pragma mark&quot;. The syntax is <code>// MARK: - SectionName</code> where SectionName is typically something like <code>Nested Types</code>, <code>Constants</code>, <code>Properties</code>, <code>Initializers</code>, or <code>Methods</code>. Xcode will display these section names in the Minimap and in the dropdown of source file elements at the top of the Editor pane. The <code>-</code> in the comment is optional and causes a horizontal line to be drawn above the section name.</p><p>To toggle display of the Minimap, select Editor ... Minimap or press cmd-ctrl-M.</p><h4 id="app-icons" tabindex="-1">App Icons</h4><p>To add app icons:</p><ul><li>browse <a href="https://appicon.co">https://appicon.co</a></li><li>drag an image file into the drag area</li><li>check the checkboxes for the target devices</li><li>click the Generate button</li><li>open the Finder and go to the Downloads directory</li><li>double-click the <code>AppIcons.zip</code> file to expand it</li><li>open the <code>AppIcons</code> folder</li><li>open the <code>Assets.xcassets</code> folder to expose the <code>AppIcon.appiconset</code> folder</li><li>open an Xcode project</li><li>right-click <code>Assets.xcassets</code> in the Navigator and select &quot;Show in Finder&quot;</li><li>drag the <code>AppIcon.appiconset</code> folder from the Finder into the directory opened by the previous command and click the &quot;Replace&quot; button</li></ul><h4 id="running-on-a-device" tabindex="-1">Running on a Device</h4><p>To run an app on a real iOS device:</p><ul><li>Attach the device with a USB cable.</li><li>Wait for the computer to recognize the device. It will appear in the left nav. of the Finder under &quot;Locations&quot;.</li><li>In Xcode, select the device from the dropdown list of targets at the top that includes the names of available simulators. It will have a generic name like &quot;iPhone&quot;.</li><li>Press the play button or cmd-r.</li><li>Enter the computer password.</li><li>Look for a new app icon to appear on the device.</li><li>One-time setup on the device:<ul><li>Open the Settings app.</li><li>Select General ... VPN &amp; Device Management.</li><li>Tap the new app.</li><li>Tap the &quot;Trust&quot; button.</li></ul></li></ul><p>To run an app on a real iOS device wirelessly:</p><ul><li>The device must be on the same WiFi network as the computer.</li><li>In Xcode, select Window ... Devices and Simulators.</li><li>In the dialog that is opened, select the device in the left nav.</li><li>Check the &quot;Connect vis network&quot; checkbox.</li><li>In the Finder, eject the device.</li><li>Disconnect the device from the computer.</li><li>Press the play button or cmd-r.</li></ul><h4 id="code-formatting" tabindex="-1">Code Formatting</h4><p>To fix Swift code indentation in Xcode, select the lines to be fixed (cmd-a for all) and press ctrl-i which is the keyboard shortcut for Editor ... Structure ... Re-Indent. The default code indentation is four spaces. Chained method calls that appear on separate lines are indented, but those chained onto trailing closures are not.</p><p>Other options for Swift code formatting include <a href="https://github.com/nicklockwood/SwiftFormat?v=1.0.20" rel="noopener" target="_blank">SwiftFormat</a> and <a href="https://github.com/apple/swift-format?v=1.0.20" rel="noopener" target="_blank">swift-format</a>.</p><p>SwiftFormat can be run as a command-line tool or an Xcode extension</p><p>To install SwiftFormat for command-line usage, enter <code>brew install swiftformat</code>. To format a <code>.swift</code> file, enter <code>swiftformat file-name.swift</code>. To format all the <code>.swift</code> files in the current directory, enter <code>swiftformat *.swift</code>.</p><p>To install SwiftFormat as an Xcode extension:</p><ul><li>enter <code>brew install --cask swiftformat-for-xcode</code></li><li>open the Finder and navigate to the Applications directory</li><li>double-click the SwiftFormat app</li><li>follow the displayed instructions</li><li>The SwiftFormat app can also be used to customize the rules.</li><li>restart Xcode</li><li>add a keyboard shortcut<ul><li>select Xcode ... Preferences ... Key Bindings</li><li>enter &quot;SwiftFormat&quot; in the Filter input</li><li>double-click in the Key column for &quot;SwiftFormat - Format File&quot;</li><li>press a key combination to assign like option-f</li></ul></li></ul><p>To format all the lines in the current file, press the assigned keyboard shortcut or select Editor ... SwiftFormat ... Format File.</p><p>There is currently no way within Xcode to format files on save. However, this can be configured using an Automator script and a System Preferences keyboard shortcut. The steps to configure this are described at <a href="https://luisramos.dev/xcode-format-and-save?v=1.0.20" rel="noopener" target="_blank">Xcode Format and Save</a>.</p><h4 id="source-control" tabindex="-1">Source Control</h4><p>The &quot;Source Control&quot; menu supports many Git commands including Commit, Push, Pull, Fetch Changes, Stash Changes, and Discard All Changes.</p><p>Modified files are indicated in the Navigator by adding an &quot;M&quot; after their name. Added files have an &quot;A&quot; after their name.</p><p>To start the process of committing changes, select Source Control ... Commit... or press cmd-option-c (conflicts with my Alfred settings). A dialog will open that lists the modified files. Select a file in this dialog to see side-by-side diffs. By default the new version is displayed on the left. To switch this, select Preferences ... Source Control ... Comparison View ... Local Revision on Right Side.</p><p>By default the checkbox for each file is checked. Uncheck any that should not be committed.</p><p>To commit the checked files, click the &quot;Commit Files&quot; button. To also push the changes to a remote repository, check the &quot;Push to remote&quot; checkbox before pressing the &quot;Commit Files&quot; button or commit the changes first and then select Source Control ... Push....</p><h4 id="xcode-issues" tabindex="-1">Xcode Issues</h4><p>While Xcode is generally fine, it does have a few issues.</p><ul><li><p>Xcode is slow.</p><p>After saving code changes it can take a few seconds for it to identify syntax errors. This may be caused by the Swift compiler being slow.</p></li><li><p>Xcode only supports limited Vim keybindings.</p><p>To enable this, select Editor ... Vim Mode.</p><p>The Vim support is very basic. No colon commands are supported. This means changes cannot be saved with &quot;:w&quot; and find/replace cannot be performed with &quot;:s/foo/bar&quot;. Pressing the &quot;/&quot; key invokes Xcode find, but it does not support regular expressions. It does not support repeating commands with the period key, defining macros, and other more advanced Vim features. For a list of supported Vim commands, see this <a href="https://developer.apple.com/forums/thread/681968?login=true&page=1#692795022?v=1.0.20" rel="noopener" target="_blank">Apple Developer Forum post</a>.</p></li></ul><h3 id="vs-code" tabindex="-1">VS Code</h3><p>For tips on writing Swift code in VS Code, see <a href="https://nshipster.com/vscode/?v=1.0.20" rel="noopener" target="_blank">Swift Development with Visual Studio Code</a>.</p><p>The setup steps are:</p><ul><li>install Xcode</li><li>install VS Code</li><li><code>git clone https://github.com/apple/sourcekit-lsp.git</code></li><li><code>cd sourcekit-lsp/Editors/vscode/</code></li><li><code>npm install</code></li><li><code>npm run dev-package</code></li><li><code>code --install-extension out/sourcekit-lsp-vscode-dev.vsix</code></li></ul><h3 id="fastlane" tabindex="-1">Fastlane</h3><p><a href="https://fastlane.tools?v=1.0.20" rel="noopener" target="_blank">Fastlane</a> is &quot;the easiest way to build and release mobile apps.&quot;</p><p>Fastlane provides the ability to:</p><ul><li>distribute beta builds to testing services like TextFlight</li><li>publish to app stores by pushing a button</li><li>automatically code sign iOS apps</li></ul><p>TODO: Add more detail. Does this only help after the first manual deployment?</p><h2 id="apple-developer-program" tabindex="-1">Apple Developer Program</h2><p>In order to submit apps to the App Store it is necessary to join the Apple Developer Program. This has an annual fee of $99 USD.</p><p>Benefits include:</p><ul><li><p>access to AppStore Connect</p><p>This is used to summit and manage apps on the App Store.</p></li><li><p>access to TestFlight</p><p>This enables up to 10,000 users to download and test beta versions of your apps. In addition, up to 100 users can install your apps directly on their devices for testing without going through app review or the App Store (referred to as &quot;Ad Hoc&quot;).</p></li><li><p>access to Provisioning Portal</p><p>This is an online tool that takes developers through the steps to test apps on iOS devices and prepare them for the App Store.</p></li><li><p>access to beta OS releases for all platforms</p><p>This includes iOS, iPadOS, macOS, watchOS, and tvOS.</p></li><li><p>access to App Analytics</p></li><li><p>support from Apple engineers</p><p>Submit a Technical Support Incident (TSI) to request help.</p></li></ul><h2 id="annoyances" tabindex="-1">Annoyances</h2><p>In a sense if you want to do web development, your opinions about JavaScript don't matter. Web development is primary done with JavaScript (or TypeScript) and you have to accept that.</p><p>In a similar way, if you want to do native iOS or Mac development, your opinions about Swift don't matter. Most developers prefer it over Objective-C and there are no other choices.</p><p>However, it's still interesting to discuss the features of Swift that are annoying, at least in my opinion.</p><ul><li><p>String interpolation syntax</p><p>Swift should have copied the <code>${expression}</code> syntax already in use by other languages instead of using the <code>\(expression)</code> syntax that is unique to Swift.</p></li><li><p>Trailing closures</p><p>The syntax for trailing closures is unique to Swift. It's nice when used with methods like <code>Array</code> <code>map</code>. However, the syntax looks strange when more than one is used in the same function/method call. Using more than one shouldn't be supported.</p></li><li><p>Too many features in enumerations</p><p>It's not clear that enumerations t need to support initializers, computed properties, methods, and recursive enumerations.</p></li><li><p>Some names are way too long</p><p>Examples include:</p><ul><li><p><code>convenience</code> keyword on <code>init</code> methods</p><p>Why is this even necessary?</p></li><li><p><code>localizedDescription</code></p><p>This is an <code>Error</code> property that could have been named <code>message</code>. It can be given this name with</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> message<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> localizedDescription <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>CustomStringConvertible</code></p><p>This is a protocol that could have been named <code>ToString</code>. It can be given this name with <code>typealias ToString = CustomStringConvertible</code>.</p></li></ul></li><li><p>Lack of wait cursors</p><p>When creating a new project, there is a long pause after each step and there is no indication that work is happening in the background. This is surprising coming from Apple which has a reputation for building great UIs.</p></li><li><p>Code not re-evaluated</p><p>Sometimes after fixing an error reported by the compiler, Xcode doesn't re-evaluate the code and the error remains. Resuming Preview triggers it to compile the code again.</p></li><li><p>Flaky builds</p><p>Sometimes a project will fail to build with no errors identified in the code. Pressing the &quot;Diagnostics&quot; button displays error messages that are typically not helpful. Sometimes pressing the &quot;Try Again&quot; button results in a clean build. Other times it is necessary to close the project, reopen it, and build again to resolve the mystery issues.</p></li><li><p>Too many warnings about things developers cannot fix</p><p>Common warnings include &quot;[LayoutConstraints] Unable to simultaneously satisfy constraints&quot; and &quot;Will attempt to recover by breaking constraint&quot;, followed by long stack traces. These make it difficult to find your own <code>print</code> output.</p></li><li><p>If a view attempts to render more than 10 sub-views, an error message is output that doesn't explain that limit ... or worse, building the app just never finishes.</p></li></ul><h2 id="questions" tabindex="-1">Questions</h2><ul><li><p>Why is a default memberwise initializer is provided for structs, but not for classes?</p></li><li><p>Why do <code>struct</code> methods that modify properties have to be marked with the <code>mutating</code> keyword, but <code>class</code> methods that modify properties are not required to do do this, and in fact cannot do it?</p></li><li><p>The compiler knows whether a struct method modifies properties. It reports an error if a non-modifying method is marked as <code>mutating</code>. It also reports an error if a modifying method is not marked as <code>mutating</code>. So why are developers required to apply the <code>mutating</code> keyword?</p></li><li><p>Why do closure parameters that outlive a function call need to be annotated with <code>@escaping</code>? Can't the compiler determine how to manage them?</p></li><li><p>Since all initializers are required to initialize all properties, either directly or through a call to <code>super.init</code>, why is the <code>convenience</code> keyword needed?</p></li><li><p>Why are subclass initializers required to initialize their own properties before calling <code>super.init</code>?</p></li><li><p>Why doesn't Swift assume that any statement in a <code>do</code> block can throw? It seems tedious to require the <code>try</code> keyword in front of every expression that can throw.</p></li><li><p>Why doesn't the <code>Character</code> type conform to the <code>Decodable</code> and <code>Encodable</code> protocols like the other primitive types?</p></li><li><p>Why is the type <code>Int</code> abbreviated from Integer and <code>Bool</code> is abbreviated from Boolean, but the <code>Character</code> type is not abbreviated to <code>Char</code>?</p></li><li><p>How is a new module defined? Can it be implemented by multiple source files? Why don't source files indicate what they use from other modules in import statements? Is the only way to determine where something being used comes from to command-click and select &quot;Jump to Definition...&quot;?</p></li><li><p>I wish Swift functions supported a shorthand syntax for arguments when there is a variable with the same name. For example, instead of <code>area(width: width, height: height)</code> we could write <code>area(width:, height:)</code>.</p></li><li><p>Why do protocols use a different syntax for type parameters that functions, structs, and classes? They use the <code>associatedtype</code> keyword instead of the generic syntax of placing type parameters in angle brackets.</p></li><li><p>Can the <code>set</code> part of a computed property reject a potential change?</p></li><li><p>How can I make all new Xcode projects default to iOS 15? Currently they default to iOS 14.</p></li><li><p>Adding an editor pane in Xcode displays the currently selected file, but it also remains displayed in the original editor pane. I want it to only be in the new editor pane. It would be even better if a file could be dragged to the right edge to create a new editor pane like in VS Code.</p></li></ul></article>