<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Packages</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#creating-a-package">Creating a Package</a></li><li><a href="#package-contents">Package Contents</a></li><li><a href="#manifest-file">Manifest File</a></li><li><a href="#available-features">Available Features</a></li><li><a href="#using-github">Using GitHub</a></li><li><a href="#using-a-package">Using a Package</a></li><li><a href="#updating-a-package">Updating a Package</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p>Packages are code libraries that can be used by applications and other packages.</p><p>Packages typically reside in their own Git repository.</p><p>Packages can be added as a dependency in multiple applications using their GitHub URL.</p><h2 id="creating-a-package">Creating a Package</h2><p>To create a new package in Xcode:</p><ul><li>Select File ... New ... Package... .</li><li>Enter a name for the package.</li><li>Select the directory where it will be stored.</li><li>Click the Create button.</li></ul><h2 id="package-contents">Package Contents</h2><p>The initial package contents are:</p><ul><li><p><a href="http://README.md">README.md</a></p><p>Enter a description of the package and usage instructions here.</p></li><li><p>Package.swift</p><p>This defines the package name, products, dependencies, and targets. It is referred to as the &quot;manifest file&quot; and takes the place of having a <code>.xcodeproj</code> file as is present in applications.</p></li><li><p>Sources</p><ul><li><p>{PackageName}</p><ul><li><p>{PackageName}.swift</p><p>This is the starting point of the code.</p></li></ul></li></ul></li><li><p>Tests</p><ul><li><p>{PackageName}Tests</p><ul><li><p>{PackageName}Tests.swift</p><p>This contains unit test code that uses XCTest.</p></li></ul></li></ul></li></ul><p>Items that should be accessible must be marked as <code>public</code>. Note that default memberwise initializers in structs are not <code>public</code>, so it is necessary to add <code>public</code> initializers.</p><h2 id="manifest-file">Manifest File</h2><p>The file <code>Package.swift</code> is the package manifest. It lists all the source files to be included and the packages on which this package depends.</p><p>Here is an example manifest for a package that defines two targets.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">PackageDescription</span><br><br><span class="token keyword">let</span> package <span class="token operator">=</span> <span class="token class-name">Package</span><span class="token punctuation">(</span><br>    name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVGeometry"</span></span><span class="token punctuation">,</span><br>    products<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">// Products define the executables and libraries a package produces,</span><br>        <span class="token comment">// and make them visible to other packages.</span><br>        <span class="token punctuation">.</span><span class="token function">library</span><span class="token punctuation">(</span><br>            name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVGeometry"</span></span><span class="token punctuation">,</span><br>            targets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"RMVCircle"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"RMVGeometry"</span></span><span class="token punctuation">]</span><br>        <span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">// Dependencies declare other packages that this package depends on.</span><br>        <span class="token comment">// .package(url: /* package url */, from: "1.0.0"),</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    targets<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">// A target can define a module or a test suite.</span><br>        <span class="token comment">// Targets can depend on other targets in this package,</span><br>        <span class="token comment">// and on products in packages this package depends on.</span><br>        <span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVCircle"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span><span class="token function">testTarget</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVCircleTests"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVGeometry"</span></span><span class="token punctuation">,</span> dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">.</span><span class="token function">testTarget</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"RMVGeometryTests"</span></span><span class="token punctuation">,</span> dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"RMVGeometry"</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token punctuation">]</span><br><span class="token punctuation">)</span></code></pre><h2 id="available-features">Available Features</h2><p>To state that items in a library should only be available in applications that require at least a certain version of iOS, add an <code>@available(iOS {version}, *)</code> attribute before the item definition where <code>{version}</code> is an iOS version like <code>16.0</code>. This is alway needed when an item uses SwiftUI.</p><h2 id="using-github">Using GitHub</h2><p>Swift packages are frequently stored in a GitHub repository. Package versions are specified with Git tags that are semantic version numbers. To add a tag to the current commit of a Swift package:</p><ul><li>Open the Source Control Navigator which is the second Navigator tab.</li><li>Click the &quot;Repositories&quot; tab.</li><li>Expand the &quot;Tabs&quot; section to see the existing tags.</li><li>Right-click the top entry and select &quot;Tag {branch-name}...&quot;.</li><li>In the dialog that appears, enter a semantic version number that is higher than the previous tag (ex. 1.2.3).</li><li>Optionally enter a description in the Message input.</li><li>Click the Create button.</li></ul><p>The new tag only exists in the local repository. To push it to the remote repository, open a terminal window and enter <code>git push origin --tags</code>.</p><h2 id="using-a-package">Using a Package</h2><p>To use a package from an application or other package:</p><ul><li><p>Open the application or package that will use the package in Xcode.</p></li><li><p>Select File ... Add Packages... .</p><p>Alternatively this longer set of steps can be used:</p><ul><li>Select the top entry in the Navigator.</li><li>Select the project.</li><li>Click the &quot;Package Dependencies&quot; tab.</li><li>Click the &quot;+&quot; button at the bottom.</li></ul></li><li><p>Paste the Git URL into the search input.</p></li><li><p>In the &quot;Dependency Rule&quot; dropdown, select one of the options.</p></li><li><p>Enter a semantic version number.</p></li><li><p>Click the &quot;Add Package&quot; button.</p></li><li><p>In the confirmation dialog that appears, click a second &quot;Add Package&quot; button.</p></li><li><p>In source files that will use the package, import the desired package targets.</p></li><li><p>Add code that uses the public types, functions, and values defined in the imported package targets.</p></li></ul><h2 id="updating-a-package">Updating a Package</h2><p>To use the latest version of all dependencies that are compatible with the selected dependency rule for each, select File ... Packages ... Update to Latest Package Versions.</p></article>