<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Localization</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#specifying-supported-languages">Specifying Supported Languages</a></li><li><a href="#string-catalogs">String Catalogs</a><ol><li><a href="#creating">Creating</a></li><li><a href="#languages">Languages</a></li><li><a href="#automatic-keys">Automatic Keys</a></li><li><a href="#translations">Translations</a></li><li><a href="#manual-keys">Manual Keys</a></li><li><a href="#plurals">Plurals</a></li><li><a href="#device-specific-translations">Device-specific Translations</a></li><li><a href="#more-strings-catalog-editor-features">More Strings Catalog Editor Features</a></li></ol></li><li><a href="#strings-files">Strings Files</a><ol><li><a href="#creating-a-strings-file">Creating a Strings File</a></li><li><a href="#populating-a-strings-file">Populating a Strings File</a></li><li><a href="#preview-locale">Preview Locale</a></li></ol></li><li><a href="#simulator-and-device-locale">Simulator and Device Locale</a></li><li><a href="#user-selected-locale">User-selected Locale</a></li><li><a href="#localizing-strings">Localizing Strings</a></li><li><a href="#localized-string-arguments">Localized String Arguments</a></li><li><a href="#stringsdict-files">Stringsdict Files</a></li><li><a href="#numbers-and-currency">Numbers and Currency</a></li><li><a href="#dates">Dates</a></li><li><a href="#images">Images</a></li><li><a href="#device-testing">Device Testing</a></li><li><a href="#exporting-and-importing-localizations">Exporting and Importing Localizations</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>There many facets to localization including text translation, enabling users to select a locale within an app, plural forms, numbers, currency, dates, and images. Each of these are discussed here.</p><p>Many SwiftUI views automatically perform translations. These include <code>Text</code>, <code>Label</code>, and <code>Button</code>.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li>WWDC 2023 video <a href="https://developer.apple.com/videos/play/wwdc2022/10110/?v=1.0.21" rel="noopener" target="_blank">Build global apps: Localization by example</a></li><li>WWDC 2023 video <a href="https://developer.apple.com/videos/play/wwdc2023/10155/?v=1.0.21" rel="noopener" target="_blank">Discover String Catalogs</a></li></ul><h2 id="specifying-supported-languages" tabindex="-1">Specifying Supported Languages</h2><ol><li>Select the top entry in the Project Navigator.</li><li>In the left nav of the project editor, select the project.</li><li>Select the &quot;Info&quot; tab.</li><li>In the &quot;Localization&quot; section there will already be an entry for &quot;English&quot;. For each additional language to be supported, click the &quot;+&quot; Button and select a language.</li></ol><h2 id="string-catalogs" tabindex="-1">String Catalogs</h2><p>Support for String Catalogs was added in iOS 17. These supercede &quot;Strings&quot; and &quot;StringsDict&quot; files. Behind the scenes the build process compiles String Catalog files to Strings and StringsDict files, but those do not appear in the Project Navigator.</p><p>Existing String and StringsDict files can be converted to String Catalog files. To do so, right-click on any one of them and select &quot;Migrate to String Catalog...&quot;. In the dialog that appears, select all the migratable files that should be migrated. Then click the &quot;Migrate&quot; button.</p><p>A String Catalog is a JSON file that stores the translations for all supported languages. Most projects will have a single String Catalog file.</p><p>Xcode provides a specialized editor for String Catalog files that displays a separate table for each supported language.</p><h3 id="creating" tabindex="-1">Creating</h3><p>To create a String Catalog file:</p><ul><li>Select File ... New or press cmd-n.</li><li>Select &quot;String Catalog&quot; in the &quot;Resource&quot; section.</li><li>Click the &quot;Next&quot; button.</li><li>Specify the name of the file. Typically the default name &quot;Localizable.xcstrings&quot; is retained.</li><li>Click the &quot;Create&quot; button.</li></ul><p>A project can use multiple String Catalog, but for most projects there is no reason to have more than one.</p><h3 id="languages" tabindex="-1">Languages</h3><p>There are two ways to add a language to a project.</p><p>The older, long way is to:</p><ul><li>Select the topmost entry in the Project Navigator.</li><li>Select the project.</li><li>Select the &quot;Info&quot; tab.</li><li>Expand the &quot;Localizations&quot; section.</li><li>Click the &quot;+&quot; at the bottom of the section.</li><li>Select a language from the dropdown.</li></ul><p>The newer, short way is to:</p><ul><li>Select the String Catalog file which is typically named <code>Localized.xcstrings</code>.</li><li>Click the &quot;+&quot; in the lower-left corner of the language list.</li><li>Select a language from the dropdown.</li></ul><p>Either way all current translation keys will now appear in the String Catalog editor for the new language, ready for their translations to be entered.</p><p>To delete a language:</p><ul><li>Select the topmost entry in the Project Navigator.</li><li>Select the project.</li><li>Select the &quot;Info&quot; tab.</li><li>Expand the &quot;Localizations&quot; section.</li><li>Select the language to be deleted.</li><li>Click the &quot;-&quot; at the bottom of the section.</li></ul><p>Languages cannot be deleted from the String Catalog editor.</p><h3 id="automatic-keys" tabindex="-1">Automatic Keys</h3><p>A String Catalog can be automatically populated from string literals in source files that define SwiftUI views. To enable this:</p><ul><li>select the top-most entry in the Project Navigator</li><li>select the project</li><li>select the &quot;Build Settings&quot; tab</li><li>scroll down to the &quot;Localization&quot; section</li><li>change &quot;Use Compiler to Extract Swift Strings&quot; from &quot;No&quot; to &quot;Yes&quot;</li></ul><p><img alt="Xcode Build Settings for Localization" style="width: 80%" src="/blog/assets/xcode-build-settings-localization.png?v=1.0.21" title="Xcode Build Settings for Localization"></p><p>Once this is enabled, the String Catalog file will be updated during each build.</p><p>The build process looks for string literals in view code. It uses all strings passed to functions where the parameter type is <code>LocalizedStringKey</code>.</p><p>It also looks for the following kinds of values in non-view code. Use these instead of plain String values to indicate that they require language translation.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">LocalizedStringResource</span><span class="token punctuation">(</span><br>    <span class="token string-literal"><span class="token string">"some text"</span></span><span class="token punctuation">,</span><br>    table<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"SomeTable"</span></span><span class="token punctuation">,</span> <span class="token comment">// optional</span><br>    local<span class="token punctuation">:</span> someLocale<span class="token punctuation">,</span> <span class="token comment">// optional</span><br>    comment<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"some comment"</span></span> <span class="token comment">// optiona</span><br><span class="token punctuation">)</span><br><br><span class="token class-name">String</span><span class="token punctuation">(</span>localized<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"some text"</span></span><span class="token punctuation">)</span><br><br><span class="token class-name">AtributedString</span><span class="token punctuation">(</span>localized<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"some text"</span></span><span class="token punctuation">)</span></code></pre><p><code>LocalizedStringResource</code> is a new type that can hold the following four components of localizable strings:</p><ul><li><p>key</p><p>This is a unique identifier (within a table) that is used at runtime to lookup the text to render. It can match the English text.</p></li><li><p>defaultValue</p><p>This is an optional value that defaults to the value corresponding to the key in the default locale. Specifying this value is useful when the strings in the source files are not in English. The default locale can be selected in the project editor.</p></li><li><p>comment</p><p>This describes where and how a particular translation is being used in the UI.</p></li><li><p>table</p><p>One or more files where translations are stored. By default the &quot;localizable&quot; table is used.</p></li></ul><p>For long sentences or paragraphs, it is useful to choose a key rather than typing the full text into a source file. This requires entering the translation for the default locale (often English).</p><p>For example, the key &quot;app-overview&quot; could have the English translation &quot;This app provides weather forecasts in a delightful way.&quot;</p><h3 id="translations" tabindex="-1">Translations</h3><p>To add or edit translations for a given language:</p><ul><li>Select the Project Navigator.</li><li>Select the String Catalog file, typically named <code>Localized.xcstrings</code>.</li><li>Select a language on the left side of the String Catalog editor.</li><li>Select a key.</li><li>Enter or modify the translation text for the key.</li></ul><p>For languages that are missing translations, a percentage of supplied translations is displayed after the language name. Once all the translations for a language are supplied, the percentage is replaced by a green check mark. When all languages have a green check mark, language translation is complete for the current set of keys.</p><p>The last column in the translations tables indicates the state of the translations which can be one of the following:</p><ul><li>&quot;NEW&quot; - found in code, but no translation has been supplied yet</li><li>&quot;STALE&quot; - no longer found in code, but a translation has been supplied</li><li>NEEDS REVIEW - someone marked the translation as needing review by right-clicking the row and selecting &quot;Mark for Review&quot;</li><li>green check mark - successfully translateds</li></ul><p>Keys for stale translations can be deleted if it is suspected that it will never be used in the future.</p><p>After a translation that needs review is reviewed, right-click it and select &quot;Mark as Reviewed&quot;.</p><p>To delete a translation, select it and press the delete key. This removes the key from all languages, not just from the currently selected language. Do not press cmd-delete because that offers to delete the entire String Catalog file!</p><h3 id="manual-keys" tabindex="-1">Manual Keys</h3><p>Translations can be manually added to String Catalog. This enables working on translations before their keys are actually used in the code.</p><p>To add a new key:</p><ul><li>Select any language on the left.</li><li>Click the &quot;+&quot; at the top of the list of keys.</li><li>Enter a key which adds it to the table for all current languages.</li><li>For each language:<ul><li>Select the language.</li><li>Enter a translation for the key.</li></ul></li></ul><p>Manually added keys are not managed by Xcode. This means they will not be automatically updated or removed by Xcode. To cause a manually added key to be managed by Xcode, select its row, open the inspector on the right, and change the value for &quot;Managed&quot; from &quot;Manually&quot; to &quot;Automatically&quot;.</p><p><img alt="Xcode Strings Catalog Inspector" style="width: 50%" src="/blog/assets/xcode-strings-catalog-inspector.png?v=1.0.21" title="Xcode Strings Catalog Inspector"></p><h3 id="plurals" tabindex="-1">Plurals</h3><p>To support plurals in a translation:</p><ul><li>Add count placeholders for each count in the key. For example, &quot;The %lld dogs barked at the %lld squirrels.&quot;. Note that <code>%lld</code> is a C-style format specifier.</li><li>For each count placeholder, right-click the row and select &quot;Vary by Plural&quot;. This adds sub-rows that are appropriate for the language.</li><li>Enter translations for each plural option.</li></ul><p>Repeat the steps above for each language that requires platform-specific translations.</p><p>When there is more than one number placeholder in a key, each is given a name like <code>@arg1</code>. These placeholders can be renamed to make their meaning more clear. To rename a placeholder, click the name in its sub-row and enter a new name that still begins with <code>@</code>.</p><p>In the example above, <code>@arg1</code> might be renamed to <code>@dogs</code> and <code>@arg2</code> might be renamed to <code>@squirrels</code>.</p><p>The following view code might be used with the example translation.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>    <span class="token class-name">HStack</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Dog Count"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $dogCount<span class="token punctuation">)</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dogCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token class-name">HStack</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Squirrel Count"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $squirrelCount<span class="token punctuation">)</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">squirrelCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token class-name">Text</span><span class="token punctuation">(</span><br>        <span class="token class-name">String</span><span class="token punctuation">(</span><br>            localized<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"The </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">dogCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> dogs barked at the </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">squirrelCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> squirrels."</span></span><br>        <span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>The following screenshot shows the definition for this plural translation in the Strings Catalog file.</p><p><img alt="Xcode Strings Catalog plurals" style="width: 100%" src="/blog/assets/xcode-strings-catalog-plurals.png?v=1.0.21" title="Xcode Strings Catalog plurals"></p><p>The full code for this project can be found at <a href="https://github.com/mvolkmann/Localization2023Demo?v=1.0.21" rel="noopener" target="_blank">Localization2023Demo</a>.</p><p>As of Xcode 15 beta, translated plurals always display English in previews instead of the requested locale. However, they display correctly in the Simulator.</p><h3 id="device-specific-translations" tabindex="-1">Device-specific Translations</h3><p>The translated strings can vary by device. For example, the word &quot;tap&quot; which is appropriate for iOS and iPadOS can be changed to &quot;click&quot; for macOS.</p><p>To add device-specific translations for a key:</p><ul><li>Select a language.</li><li>Right-click a translation row.</li><li>Select &quot;Vary by Device&quot; and a device type such as &quot;Mac&quot; or &quot;Apple Watch&quot;.</li><li>Enter the translation text for each device type. For example, it may be desirable to have shorter translation strings on &quot;Apple Watch&quot; to fit on the smaller screen.</li></ul><p>This will add sub-rows to the row where each row begins with a platform name or &quot;Other&quot;.</p><p><img alt="Xcode Strings Catalog Vary by Device" style="width: 100%" src="/blog/assets/xcode-strings-catalog-vary-by-device.png?v=1.0.21" title="Xcode Strings Catalog Vary by Device"></p><p>Repeat the steps above for each language that requires platform-specific translations.</p><h3 id="more-strings-catalog-editor-features" tabindex="-1">More Strings Catalog Editor Features</h3><p>The &quot;Filter&quot; input can be used to filter the list of translations to those that contain given text in their key or translation.</p><p>Any table column heading can be clicked to sort the rows on that column in either ascending or descending order.</p><h2 id="strings-files" tabindex="-1">Strings Files</h2><p>These were used before iOS 17. For iOS 17 and beyond, using String Catalogs is preferred.</p><h3 id="creating-a-strings-file" tabindex="-1">Creating a Strings File</h3><p>Translations are described in a &quot;Strings&quot; file. To create one:</p><ol><li>Add a file to the project by pressing cmd-n.</li><li>In the Resource section, select the &quot;Strings File&quot; template.</li><li>Click the &quot;Next&quot; button.</li><li>Keep the default directory and the default file name &quot;Localizable.strings&quot;.</li><li>Click the &quot;Create&quot; button.</li><li>Select the &quot;Localizable.strings&quot; file in the Project Navigator.</li><li>Open the Inspector panel on the right.</li><li>Under &quot;Localization&quot;, click the &quot;Localize...&quot; button.</li><li>In the dialog that appears, click the &quot;Localize&quot; button.</li><li>Once again, select the &quot;Localizable.strings&quot; file in the Project Navigator.</li><li>In the Inspector panel on the right under &quot;Localization&quot;, check all the language checkboxes. This will add one entry under &quot;Localizable.strings&quot; in the Project Navigator for each selected language.</li></ol><h3 id="populating-a-strings-file" tabindex="-1">Populating a Strings File</h3><ol><li><p>In the Project Navigator, expand the &quot;Localizable.strings&quot; entry to expose an entry for each supported language.</p></li><li><p>For each supported language</p><ol><li><p>Select its entry in the Project Navigator.</p></li><li><p>For each string to be translated</p><ol><li><p>Enter an assignment statement of the form <code>&quot;key&quot; = &quot;translation&quot;;</code></p><p><strong>Note the semicolon at the end.</strong></p></li></ol></li></ol></li></ol><p>For example, the key could be &quot;greeting&quot;, the English translation could be &quot;Hello&quot;, and the French translation could be &quot;Bonjour&quot;.</p><p>When no translation is found for a given key in the current language, the key itself is used.</p><p>If a key is the same as its English translation then it is not necessary to add an entry for it in the English file. For example, if the key is &quot;Hello&quot; then there is no need to add <code>&quot;Hello&quot; = &quot;Hello&quot;;&quot;</code> in the English file and the French file could contain <code>&quot;Hello&quot; = &quot;Bonjour&quot;;</code>. This is the recommend approach unless the English translation is long.</p><p>Translation strings can contain Markdown syntax. For example, this can be used to make some of the text bold, italic, or underlined.</p><p>Comments using the syntax <code>//</code> or <code>/* ... */</code> can be used.</p><p>To validate a <code>Localizable.strings</code> file, cd to the project directory that contains the <code>.lproj</code> files and enter <code>plutil -lint {language-code}.lproj/Localizable.strings</code>.</p><h3 id="preview-locale" tabindex="-1">Preview Locale</h3><p>To select a locale to use in the Preview, apply the <code>environment</code> view modifier to the top-most view. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"la"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>where <code>la</code> is replaced by a language abbreviation such as <code>en</code> for English or a combination of a language and region abbreviation such as <code>en-US</code>.</p><p>A view can have multiple previews. A button for each preview is displays at the top of the canvas. Click a button to see the corresponding preview.</p><p><img alt="Xcode Preview buttons" style="width: 50%" src="/blog/assets/xcode-preview-buttons.png?v=1.0.21" title="Xcode Preview buttons"></p><pre class="language-swift"><code class="language-swift"><span class="token other-directive property">#Preview</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"English"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token other-directive property">#Preview</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Spanish"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"es"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token other-directive property">#Preview</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"French"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><h2 id="simulator-and-device-locale" tabindex="-1">Simulator and Device Locale</h2><p>To select a locale in the Simulator or on a device:</p><ul><li>Open the Settings app.</li><li>Select General.</li><li>If the desired language is not displayed under &quot;PREFERRED LANGUAGES&quot;, tap &quot;Add Language...&quot;, select the language, and tap one of the &quot;Use {language}&quot; buttons to specify which language should be active now.</li><li>Drag the language to be used now to the top of the list of languages using the drag handles to right of each language name.</li><li>Tap the &quot;Continue&quot; button.</li><li>Return to the app being tested.</li></ul><p>Another way to select the locale to use is to:</p><ul><li>Click the project name in top-center of Xcode.</li><li>Select &quot;Edit Scheme...&quot;</li><li>Select &quot;Run&quot; in the left nav.</li><li>Select the &quot;Options&quot; tab.</li><li>Change the value of the &quot;App Language&quot; dropdown from &quot;System Language&quot; to the language to be used.</li><li>Click the &quot;Close&quot; button.</li><li>Run the app.</li></ul><h2 id="user-selected-locale" tabindex="-1">User-selected Locale</h2><p>The <code>environment</code> view modifier can be used to allow the user to select a locale within the app.</p><p>This <a href="https://developer.apple.com/forums/thread/13155?answerId=36704022#36704022?v=1.0.21" rel="noopener" target="_blank">Apple Forums post</a> says the following:</p><blockquote><p>If the system puts up a UI component on your behalf it will do so in the localization that it thinks that your app is running in. If your app is 'pretending' to run in some other language, you'll end up with a mixed localization, where some parts of your app (the parts you control) are in one language and other parts of your app (the parts controlled by the OS) are in another. That's a very poor user experience.</p></blockquote><p>Despite this warning, the <code>environment</code> view modifier can be used to change the current locale. For example:</p><pre class="language-swift"><code class="language-swift">        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Picker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Locale"</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $language<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"English in U.S."</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"en-US"</span></span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"French in France"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"fr-FR"</span></span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Spanish in Spain"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"es-ES"</span></span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>            <span class="token punctuation">.</span><span class="token function">pickerStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>segmented<span class="token punctuation">)</span><br><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Hello!"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> language<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>Changing the locale in this way rather than in the Settings app works for many kinds of translations, but not all.</p><p>Either of the following approaches can be used to get a translation in code:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> translation <span class="token operator">=</span> <span class="token class-name">Bundle</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">localizedString</span><span class="token punctuation">(</span><br>    forKey<span class="token punctuation">:</span> key<span class="token punctuation">,</span><br>    value<span class="token punctuation">:</span> key<span class="token punctuation">,</span> <span class="token comment">// translation defaults to the key</span><br>    table<span class="token punctuation">:</span> <span class="token nil constant">nil</span> <span class="token comment">// defaults to "Localizable"</span><br>               <span class="token comment">// which uses the file Localizable.strings</span><br><span class="token punctuation">)</span><br><br><span class="token comment">// This is a shortcut for the above where table is nil</span><br><span class="token comment">// which causes it to use `Localizable` for the table.</span><br><span class="token keyword">let</span> translation <span class="token operator">=</span> <span class="token class-name">NSLocalizedString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span></code></pre><p>These approaches get a translation based on the locale selected in the Settings app. However, neither of these honor the locale specified with the environment view modifier.</p><p>The same issue exists with retrieving localized images from an &quot;Image Set&quot;. TODO: Is this a bug in SwiftUI?</p><h2 id="localizing-strings" tabindex="-1">Localizing Strings</h2><p>The <a href="https://developer.apple.com/documentation/foundation/nslocalizedstring?v=1.0.21" rel="noopener" target="_blank">macro</a> returns a localized string. To simplify use of this, define the following <code>String</code> extension:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Foundation</span><br><br><span class="token keyword">extension</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> localized<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name">NSLocalizedString</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> comment<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>To use this, add references to this new computed property to any string. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Hello"</span></span><span class="token punctuation">.</span>localized<span class="token punctuation">)</span><br><br><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Hello"</span></span><br><span class="token function">print</span><span class="token punctuation">(</span>greeting<span class="token punctuation">.</span>localized<span class="token punctuation">)</span></code></pre><h2 id="localized-string-arguments" tabindex="-1">Localized String Arguments</h2><p>Localized strings can specify arguments accepted and where they should be inserted in translations. Arguments are represented by <code>%@</code> for <code>String</code> values, <code>%lld</code> for <code>Int</code> values, and <code>%f</code> for <code>Double</code> values. Arguments are passed to the <code>LocalizedStringKey</code> initializer using string interpolation.</p><p>For example, the following translations can be defined:</p><pre class="language-text"><code class="language-text">// English<br>"Annie %@ %@" = "The %@ will come out %@.";<br><br>// French<br>"Annie %@ %@" = "Le %@ sortira %@.";<br>"sun" = "soleil";<br>"tomorrow" = "demain";<br><br>// Spanish<br>"Annie %@ %@" = "El %@ saldra %@.";<br>"sun" = "sol";<br>"tomorrow" = "mañana";</code></pre><p>The following code uses these translations:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> thing <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"sun"</span></span><br><span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"tomorrow"</span></span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Annie </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">sun</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">tomorrow</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span></code></pre><p>TODO: How can we translate the strings &quot;sun&quot; and &quot;tomorrow&quot;?</p><h2 id="stringsdict-files" tabindex="-1">Stringsdict Files</h2><p>Stringsdict files provide a way to define pluralization rules for translations. These were used before iOS 17. For iOS 17 and beyond, using String Catalogs is preferred.</p><p>SwiftUI can automate displaying phrases that describe a number of things where the word that describes the thing varies based on the count. For example, &quot;dog&quot; vs. &quot;dogs&quot; or &quot;cactus&quot; vs. &quot;cacti&quot;.</p><p>There are two kinds of plural values to consider. Cardinal numbers specify a count or quantity (ex. two). Ordinal numbers specify a position within an ordered list (ex. second).</p><p>Pluralization of cardinal numbers is supported by a <code>.stringsdict</code> file which is described in this section. Pluralization of ordinal numbers is supported by <code>NumberFormatter</code> as described in the <a href="#numbers-and-currency">Numbers and Currency</a> section.</p><p>To define how specific words should be pluralized based on a count:</p><ol><li>Add a file to the project by pressing cmd-n.</li><li>In the Resource section, select the &quot;Stringsdict File&quot; template.</li><li>Click the &quot;Next&quot; button.</li><li>Keep the default directory and the default file name &quot;Localizable.stringsdict&quot;.</li><li>Click the &quot;Create&quot; button.</li><li>To support multiple languages:<ol><li>Select the &quot;Localizable.stringsdict&quot; file in the Project Navigator.</li><li>Open the Inspector panel on the right.</li><li>Under &quot;Localization&quot;, click the &quot;Localize...&quot; button.</li><li>In the dialog that appears, click the &quot;Localize&quot; button.</li><li>Once again, select the &quot;Localizable.stringsdict&quot; file in the Project Navigator.</li><li>In the Inspector panel on the right under &quot;Localization&quot;, check all the language checkboxes. This will add one entry under &quot;Localizable.stringsdict&quot; in the Project Navigator for each selected language.</li></ol></li><li>For each supported language:<ol><li>Select its entry in the Project Navigator.</li><li>Add rows with keys, types, and values similar to what is shown in the screenshot below for each phrase to be pluralized. A row and all its descendant rows can be copied from one language entry to another to save typing.</li></ol></li></ol><figure style="width: 90%"><img alt="SwiftUI English plural localization" src="/blog/assets/swiftui-plural-localization-en.png?v=1.0.21" title="Swift English plural localization"><figcaption>English plural rules</figcaption></figure><figure style="width: 90%"><img alt="SwiftUI French plural localization" src="/blog/assets/swiftui-plural-localization-fr.png?v=1.0.21" title="Swift French plural localization"><figcaption>French plural rules</figcaption></figure><figure style="width: 90%"><img alt="SwiftUI Spanish plural localization" src="/blog/assets/swiftui-plural-localization-es.png?v=1.0.21" title="Swift Spanish plural localization"><figcaption>Spanish plural rules</figcaption></figure><p>The supported format specifiers include:</p><ul><li><code>%d</code> - signed integer</li><li><code>%u</code> - unsigned integer</li><li><code>%lld</code> - long long decimal (<code>Int64</code>)</li><li><code>%f</code> - double</li></ul><p><code>%lld</code> works for <code>Int</code> values, but it seems the <code>%d</code> and <code>%u</code> do not!</p><p>The following keys are used to define how counts should be pluralized. Their meaning differs based on the locale, especially the meaning of &quot;few&quot; and &quot;many&quot;.</p><table><thead><tr><th>Key</th><th>English Meaning</th></tr></thead><tbody><tr><td><code>zero</code></td><td>0</td></tr><tr><td><code>one</code></td><td>1</td></tr><tr><td><code>two</code></td><td>2</td></tr><tr><td><code>few</code></td><td>3</td></tr><tr><td><code>many</code></td><td>&gt; 3</td></tr><tr><td><code>other</code></td><td>any value not specified</td></tr></tbody></table><p>Many languages such as English, French, German, Italian, and Spanish only use <code>zero</code>, <code>one</code>, and <code>other</code>. Chinese and Japanese only use one form. Arabic uses all six forms.</p><p>For more details see the Unicode Common Locale Data Repository (CLDR) <a href="https://cldr.unicode.org/index/cldr-spec/plural-rules?v=1.0.21" rel="noopener" target="_blank">Plural Rules</a> and <a href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html?v=1.0.21" rel="noopener" target="_blank">Language Plural Rules</a>.</p><p>The following code demonstrates displaying a number of apples. The string to be formatted must contain one string interpolation. The count can be hard-coded in the interpolation or provided by a variable.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">2</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// a pair of apples</span><br><span class="token keyword">let</span> appleCount <span class="token operator">=</span> <span class="token number">7</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">appleCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// 7 apples</span></code></pre><h2 id="numbers-and-currency" tabindex="-1">Numbers and Currency</h2><p>The <a href="https://developer.apple.com/documentation/foundation/numberformatter?v=1.0.21" rel="noopener" target="_blank">NumberFormatter</a> class will localize date formats when its <code>locale</code> property is set.</p><p>Currency formatting requires the locale identifier to contain both a language code and a country code.</p><p>The following code demonstrates all the supported number formatting styles:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">NSNumber</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">1234.5678</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">demo</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> style<span class="token punctuation">:</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">.</span><span class="token class-name">Style</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    formatter<span class="token punctuation">.</span>numberStyle <span class="token operator">=</span> style<br>    formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en-US"</span></span><span class="token punctuation">)</span> <span class="token comment">// English U.S.</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"invalid"</span></span><span class="token punctuation">)</span><br>    formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr-FR"</span></span><span class="token punctuation">)</span> <span class="token comment">// French France</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"invalid"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token keyword">none</span><span class="token punctuation">)</span><br><span class="token comment">// 1235</span><br><span class="token comment">// 1235</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>decimal<span class="token punctuation">)</span><br><span class="token comment">// 1,234.568</span><br><span class="token comment">// 1 234,568</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>percent<span class="token punctuation">)</span><br><span class="token comment">// 123,457%</span><br><span class="token comment">// 123 457 %</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>scientific<span class="token punctuation">)</span><br><span class="token comment">// 1.2345678E3</span><br><span class="token comment">// 1,2345678E3</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>spellOut<span class="token punctuation">)</span><br><span class="token comment">// one thousand two hundred thirty-four point five six seven eight</span><br><span class="token comment">// mille deux cent trente-quatre virgule cinq six sept huit</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>ordinal<span class="token punctuation">)</span><br><span class="token comment">// 1,235th</span><br><span class="token comment">// 1 235e</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currency<span class="token punctuation">)</span><br><span class="token comment">// $1,234.57</span><br><span class="token comment">// 1 234,57 €</span><br><br><span class="token comment">// From the Apple documentation,</span><br><span class="token comment">// "This style behaves like the .currency style,</span><br><span class="token comment">// except that negative numbers representations are</span><br><span class="token comment">// surrounded by parentheses rather than preceded by a negative symbol.</span><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currencyAccounting<span class="token punctuation">)</span><br><span class="token comment">// $1,234.57</span><br><span class="token comment">// 1 234,57 €</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currencyPlural<span class="token punctuation">)</span><br><span class="token comment">// 1,234.57 US dollars</span><br><span class="token comment">// 1 234,57 euros</span></code></pre><h2 id="dates" tabindex="-1">Dates</h2><p>The <a href="https://developer.apple.com/documentation/foundation/dateformatter?v=1.0.21" rel="noopener" target="_blank">DateFormatter</a> class will localize date formats when its <code>locale</code> property is set. This works with predefined date/time styles and also with custom date/time templates. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>formatter<span class="token punctuation">.</span>dateStyle <span class="token operator">=</span> <span class="token punctuation">.</span>short<br>formatter<span class="token punctuation">.</span>timeStyle <span class="token operator">=</span> <span class="token punctuation">.</span>short<br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span> <span class="token comment">// English</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1/3/23, 1:36 PM</span><br><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span> <span class="token comment">// French</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3/01/2023 13:36</span><br><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">0</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">2</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">3</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token number">4</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><span class="token keyword">let</span> appleCount <span class="token operator">=</span> <span class="token number">7</span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"apple </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">appleCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><br>formatter<span class="token punctuation">.</span><span class="token function">setLocalizedDateFormatFromTemplate</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dd MMMM"</span></span><span class="token punctuation">)</span><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span> <span class="token comment">// English</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 03 January</span><br><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span> <span class="token comment">// French</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 03 janvier</span></code></pre><p>For a summary of patterns for formatting dates and times see <a href="https://www.datetimeformatter.com/how-to-format-date-time-in-swift/?v=1.0.21" rel="noopener" target="_blank">How To Format Date Time In Swift</a>.</p><h2 id="images" tabindex="-1">Images</h2><p>To render a localized image where a different image is displayed for each supported language:</p><ol><li>Add an &quot;Image Set&quot; to the <code>Assets.xcassets</code> file.</li><li>Open the Inspector pane on the right side.</li><li>Click the last tab which shows the &quot;Attributes Inspector&quot;.</li><li>In the &quot;Localizations&quot; section, check all the languages to be supported. This opens a separate area in the image editor panel for each language where 1x, 2x, and 3x images can be added.</li><li>Add at least one image size for each language.</li><li>Render the image by passing the image set name to the <code>Image</code> view in the same way as for any other image.</li></ol><p>The following code assumes that an Image Set named &quot;landmark&quot; was created in the <code>Assets.xcassets</code> file and it contains different images for English, French, and Spanish.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"landmark"</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">resizable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">aspectRatio</span><span class="token punctuation">(</span>contentMode<span class="token punctuation">:</span> <span class="token punctuation">.</span>fit<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span> <span class="token comment">// This does not help!</span></code></pre><p>The image changes when the user changes the region specified in the Settings app. For the steps to do this, see <a href="#simulator-and-device-locale">## Simulator and Device Locale</a>.</p><p>If the locale is changed within the app using the <code>environment</code> view modifier, localized images do not update. Perhaps this is a SwiftUI bug.</p><p>Another approach that does work is to create a separate Image Set for each supported locale. The following code assumes that Image Sets named &quot;landmark-en-US&quot;, &quot;landmark-fr-FR&quot;, and &quot;landmark-es-ES&quot; were created in the <code>Assets.xcassets</code> file. It does update when the value of the <code>locale</code> variable changes.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"landmark-"</span></span> <span class="token operator">+</span> locale<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">resizable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">aspectRatio</span><span class="token punctuation">(</span>contentMode<span class="token punctuation">:</span> <span class="token punctuation">.</span>fit<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">)</span></code></pre><h2 id="device-testing" tabindex="-1">Device Testing</h2><p>To change the default language on an iOS device:</p><ol><li>Open the Settings app.</li><li>Tap &quot;General&quot;.</li><li>Tap &quot;Language &amp; Region&quot;.</li><li>To add a language to the list of &quot;PREFERRED LANGUAGES&quot;:<ol><li>Tap &quot;Add Language...&quot;</li><li>Tap a language in the list.</li><li>Tap a button to either use that language now or continue using the current language.</li></ol></li><li>To change the current language, drag it to the top of the list using the drag handles on the trailing edge of the list rows.</li><li>To delete a language, swipe its row to the left, tap the &quot;Delete&quot; button, and tap the &quot;Continue&quot; button.</li></ol><p>It can be important to also select a specific region. For example, an iOS device in the United States will typically have the language set to &quot;English&quot; and the region set to &quot;United States&quot;. If the language is changed to &quot;Français&quot;, but the region remains set to &quot;United States&quot; then dates will not be formatted in the expected way for French. Changing the region to &quot;France&quot; corrects this.</p><p>To also change the default region on an iOS device:</p><ol><li>Tap &quot;Region&quot;</li><li>Tap the name of a region.</li><li>Tap the &quot;Change to {region-name}&quot; button.</li></ol><h2 id="exporting-and-importing-localizations" tabindex="-1">Exporting and Importing Localizations</h2><p>Localization strings found in String Catalog files, Strings files, and StringsDict files can be exported to a file that can be sent to localization experts that will supply translations. Once the file is returned, it can be imported into the project to update the files that define them.</p><p>When using String Catalogs:</p><ul><li>Select the top-most entry in the Project Navigator.</li><li>Select the project.</li><li>Select the &quot;Build Settings&quot; tab.</li><li>Scroll down to the &quot;Localizations&quot; section.</li><li>Verify that &quot;Localization Prefers String Catalogs&quot; is set to &quot;Yes&quot;</li></ul><p><img alt="Xcode Build Settings for Localization" style="width: 80%" src="/blog/assets/xcode-build-settings-localization.png?v=1.0.21" title="Xcode Build Settings for Localization"></p><p>To export the localizations:</p><ul><li>Select Product ... Export Localizations...</li><li>Select the directory where a new directory will be created (defaults to the project directory).</li><li>Enter a name for the new directory (defaults to &quot;{project-name} Localizations&quot;).</li><li>Uncheck any languages whose translations should not be exported.</li><li>Click the &quot;Export&quot; button.</li></ul><p>The new directory will contain one localization catalog (<code>.xcloc</code> directory) for each supported language. A localization catalog contains several subdirectories and files. The translations for a localization catalog can be found in the <code>.xliff</code> file inside the &quot;Localized Contents&quot; subdirectory.</p><p><a href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/os/xliff-core-v2.1-os.html?v=1.0.21" rel="noopener" target="_blank">XLIFF</a> is an industry standard XML format. XLIFF files contains one <code>trans-unit</code> element for each translation. These elements contain the child elements <code>source</code>, <code>target</code>, and <code>comment</code>. People with language translation experience can edit these files, modifying the <code>target</code> and <code>comment</code> element contents.</p><p>To import modified localizations:</p><ul><li>Select Product ... Import Localizations...</li><li>Select a <code>.xcloc</code> file for a specific language.</li><li>Click the &quot;Import&quot; button.</li><li>Differences between the current translations and the translations to be imported will be displayed side-by-side. No editing can be performed here.</li><li>If the differences are acceptable, click the &quot;Import&quot; button. The changes will be merged into the file from which they originated, a Strings Catalog file or a Strings File. However, it seems that modified comments are not merged.</li></ul></article>