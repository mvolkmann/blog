<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Localization</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#specifying-supported-languages">Specifying Supported Languages</a></li><li><a href="#creating-a-%22strings%22-file">Creating a "Strings" File</a></li><li><a href="#populating-the-%22strings%22-file">Populating the "Strings" File</a></li><li><a href="#preview-locale">Preview Locale</a></li><li><a href="#simulator-locale">Simulator Locale</a></li><li><a href="#user-selected-locale">User-selected Locale</a></li><li><a href="#localized-string-arguments">Localized String Arguments</a></li><li><a href="#plurals">Plurals</a></li><li><a href="#numbers-and-currency">Numbers and Currency</a></li><li><a href="#dates">Dates</a></li><li><a href="#images">Images</a></li><li><a href="#exporting-and-importing-localizations">Exporting and Importing Localizations</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>TODO: Which SwiftUI views automatically look for String translations? TODO: I know Text does. How about Label, Button, TextField, Link, navigation title, ...? TODO: When should LocalizedStringKey be used?</p><h2 id="specifying-supported-languages" tabindex="-1">Specifying Supported Languages</h2><ol><li>Select the top entry in the File Navigator.</li><li>In the left nav of the project editor, select the project.</li><li>Select the &quot;Info&quot; tab.</li><li>In the &quot;Localization&quot; section there will already be an entry for &quot;English&quot;. For each additional language to be supported, click the &quot;+&quot; Button and select a language.</li></ol><h2 id="creating-a-%22strings%22-file" tabindex="-1">Creating a &quot;Strings&quot; File</h2><p>Translations are described in a &quot;Strings&quot; file. To create one:</p><ol><li>Add a file to the project by pressing cmd-n.</li><li>In the Resource section, select the &quot;Strings File&quot; template.</li><li>Click the &quot;Next&quot; button.</li><li>Keep the default directory and the default file name &quot;Localizable.strings&quot;.</li><li>Click the &quot;Create&quot; button.</li><li>Select the &quot;Localizable.strings&quot; file in the File Navigator.</li><li>Open the Inspector panel on the right.</li><li>Under &quot;Localization&quot;, click the &quot;Localize...&quot; button.</li><li>In the dialog that appears, click the &quot;Localize&quot; button.</li><li>Once again, select the &quot;Localizable.strings&quot; file in the File Navigator.</li><li>Once again, open the Inspector panel on the right.</li><li>Under &quot;Localization&quot;, check all the language checkboxes.</li><li>This will add one entry under &quot;Localizable.strings&quot; in the File Navigator for each selected language.</li></ol><h2 id="populating-the-%22strings%22-file" tabindex="-1">Populating the &quot;Strings&quot; File</h2><ol><li>In the File Navigator, expand the &quot;Localizable.strings&quot; entry to expose an entry for each supported language.</li><li>For each supported language<ol><li>Select its entry in the File Navigator.</li><li>For each string to be translated<ol><li>Enter an assignment statement of the form <code>&quot;key&quot; = &quot;translation&quot;;</code> (note the semicolon at the end).</li></ol></li></ol></li></ol><p>For example, the key could be &quot;greeting&quot;, the English translation could be &quot;Hello&quot;, and the French translation could be &quot;Bonjour&quot;.</p><p>When no translation is found for a given key in the current language, the key itself is used.</p><p>If a key is the same as its English translation then it is not necessary to add an entry for it in the English file. For example, if the key is &quot;Hello&quot; then there is no need to add <code>&quot;Hello&quot; = &quot;Hello&quot;;&quot;</code> in the English file and the French file could contain <code>&quot;Hello&quot; = &quot;Bonjour&quot;;</code>. This is the recommend approach unless the English translation is long.</p><p>Translation strings can contain Markdown syntax. For example, this can be used to make some of the text bold, italic, or underlined.</p><h2 id="preview-locale" tabindex="-1">Preview Locale</h2><p>To select a locale to use in the Preview, apply the <code>environment</code> view modifier to the top-most view. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"la"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>where <code>la</code> is replaced by a language abbreviation such as <code>fr</code> for French.</p><h2 id="simulator-locale" tabindex="-1">Simulator Locale</h2><p>To select a locale in the Simulator:</p><ul><li>Open the Settings app.</li><li>Select General.</li><li>If the desired language is not displayed under &quot;PREFERRED LANGUAGES&quot;, tap &quot;Add Language...&quot;, select the language, and tap one of the &quot;Use {language}&quot; buttons to specify which language should be active now.</li><li>Drag the language to be used now to the top of the list of languages using the drag handles to right of each language name.</li><li>Tap the &quot;Continue&quot; button.</li><li>Return to the app being tested.</li></ul><h2 id="user-selected-locale" tabindex="-1">User-selected Locale</h2><p>The <code>environment</code> view modifier can be used to allow the user to select a language within the app. For example:</p><pre class="language-swift"><code class="language-swift">        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Picker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Language"</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $language<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"English"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"French"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Spanish"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"es"</span></span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>            <span class="token punctuation">.</span><span class="token function">pickerStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>segmented<span class="token punctuation">)</span><br><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Hello!"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> language<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="localized-string-arguments" tabindex="-1">Localized String Arguments</h2><p>Localized strings can specific arguments accepted and where they should be inserted in translations. Arguments are represented by <code>%@</code> for string values and <code>%d</code> for numeric values. Arguments are passed to the <code>LocalizedStringKey</code> initializer using string interpolation. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> thing <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"sun"</span></span><br><span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"tomorrow"</span></span><br><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">LocalizedStringKey</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"The </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">thing</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> will come out </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">time</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">."</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="plurals" tabindex="-1">Plurals</h2><p>To specify how plural strings should be handled, create a file using the template &quot;Stringsdict File&quot;. TODO: Add more detail!</p><h2 id="numbers-and-currency" tabindex="-1">Numbers and Currency</h2><p>The <a href="https://developer.apple.com/documentation/foundation/numberformatter?v=1.0.20" rel="noopener" target="_blank">NumberFormatter</a> class will localize date formats when its <code>locale</code> property is set.</p><p>Currency formatting requires the locale identifier to contain both a language code and a country code.</p><p>The following code demonstrates all the supported number formatting styles:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">NSNumber</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">1234.5678</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">demo</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> style<span class="token punctuation">:</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">.</span><span class="token class-name">Style</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    formatter<span class="token punctuation">.</span>numberStyle <span class="token operator">=</span> style<br>    formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en-US"</span></span><span class="token punctuation">)</span> <span class="token comment">// English U.S.</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"invalid"</span></span><span class="token punctuation">)</span><br>    formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr-FR"</span></span><span class="token punctuation">)</span> <span class="token comment">// French France</span><br>    <span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">"invalid"</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token keyword">none</span><span class="token punctuation">)</span><br><span class="token comment">// 1235</span><br><span class="token comment">// 1235</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>decimal<span class="token punctuation">)</span><br><span class="token comment">// 1,234.568</span><br><span class="token comment">// 1 234,568</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>percent<span class="token punctuation">)</span><br><span class="token comment">// 123,457%</span><br><span class="token comment">// 123 457 %</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>scientific<span class="token punctuation">)</span><br><span class="token comment">// 1.2345678E3</span><br><span class="token comment">// 1,2345678E3</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>spellOut<span class="token punctuation">)</span><br><span class="token comment">// one thousand two hundred thirty-four point five six seven eight</span><br><span class="token comment">// mille deux cent trente-quatre virgule cinq six sept huit</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>ordinal<span class="token punctuation">)</span><br><span class="token comment">// 1,235th</span><br><span class="token comment">// 1 235e</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currency<span class="token punctuation">)</span><br><span class="token comment">// $1,234.57</span><br><span class="token comment">// 1 234,57 €</span><br><br><span class="token comment">// From the Apple documentation,</span><br><span class="token comment">// "This style behaves like the .currency style,</span><br><span class="token comment">// except that negative numbers representations are</span><br><span class="token comment">// surrounded by parentheses rather than preceded by a negative symbol.</span><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currencyAccounting<span class="token punctuation">)</span><br><span class="token comment">// $1,234.57</span><br><span class="token comment">// 1 234,57 €</span><br><br><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">.</span>currencyPlural<span class="token punctuation">)</span><br><span class="token comment">// 1,234.57 US dollars</span><br><span class="token comment">// 1 234,57 euros</span></code></pre><h2 id="dates" tabindex="-1">Dates</h2><p>The <a href="https://developer.apple.com/documentation/foundation/dateformatter?v=1.0.20" rel="noopener" target="_blank">DateFormatter</a> class will localize date formats when its <code>locale</code> property is set. This works with predefined date/time styles and also with custom date/time templates. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>formatter<span class="token punctuation">.</span>dateStyle <span class="token operator">=</span> <span class="token punctuation">.</span>short<br>formatter<span class="token punctuation">.</span>timeStyle <span class="token operator">=</span> <span class="token punctuation">.</span>short<br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span> <span class="token comment">// English</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1/3/23, 1:36 PM</span><br><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span> <span class="token comment">// French</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 03/01/2023 13:36</span><br><br>formatter<span class="token punctuation">.</span><span class="token function">setLocalizedDateFormatFromTemplate</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"dd MMMM"</span></span><span class="token punctuation">)</span><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"en"</span></span><span class="token punctuation">)</span> <span class="token comment">// English</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 03 January</span><br><br>formatter<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"fr"</span></span><span class="token punctuation">)</span> <span class="token comment">// French</span><br><span class="token function">print</span><span class="token punctuation">(</span>formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 03 janvier</span></code></pre><h2 id="images" tabindex="-1">Images</h2><p>To render a localized image where a different image is displayed for each supported language:</p><ol><li>Add an &quot;Image Set&quot; to the <code>Assets.xcassets</code> file.</li><li>Open the Inspector pane on the right side.</li><li>Click the last tab which shows the &quot;Attributes Inspector&quot;.</li><li>In the &quot;Localizations&quot; section, check all the languages to be supported. This opens a separate area in the image editor panel for each language where 1x, 2x, and 3x images can be added.</li><li>Add at least one image size for each language.</li><li>Render the image by passing the image set name to the <code>Image</code> view in the same way as for any other image.</li></ol><p>A localized image</p><h2 id="exporting-and-importing-localizations" tabindex="-1">Exporting and Importing Localizations</h2></article>