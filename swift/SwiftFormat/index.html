<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>SwiftFormat</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#installing">Installing</a></li><li><a href="#running-from-a-terminal">Running from a Terminal</a></li><li><a href="#running-from-xcode">Running from Xcode</a><ol><li><a href="#warning">WARNING</a></li></ol></li><li><a href="#configuration">Configuration</a></li><li><a href="#rules">Rules</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://github.com/nicklockwood/SwiftFormat?v=1.0.20" rel="noopener" target="_blank">SwiftFormat</a> is a &quot;command-line tool and Xcode Extension for formatting Swift code&quot;.</p><h2 id="installing" tabindex="-1">Installing</h2><p>One way to install SwiftFormat is to use <a href="https://brew.sh?v=1.0.20" rel="noopener" target="_blank">HomeBrew</a>. Enter <code>brew install swiftformat</code>.</p><p>For other options, see the <a href="https://github.com/nicklockwood/SwiftFormat#how-do-i-install-it?v=1.0.20" rel="noopener" target="_blank">How do I install it?</a>.</p><p>Create the file <code>.swift-version</code> in each project root directory that contains the version of Swift being used such as &quot;5.6&quot;.</p><h2 id="running-from-a-terminal" tabindex="-1">Running from a Terminal</h2><p>To run SwiftFormat from a terminal, cd to a project directory and enter <code>swiftformat --swiftversion 5.7 .</code>. This will output the number of files that were modified and the number of files that were evaluated.</p><p>DO NOT RUN THIS FROM YOUR ROOT DIRECTORY! Doing so will reformat every <code>.swift</code> file found in and below it.</p><h2 id="running-from-xcode" tabindex="-1">Running from Xcode</h2><p>To configure Xcode so SwiftFormat can be run on the file currently being edited by selecting a menu option:</p><ol><li>Enter <code>brew install --cask swiftformat-for-xcode</code></li><li>Open Finder.</li><li>Open the Applications folder.</li><li>Double-click &quot;SwiftFormat for Xcode.app&quot;.</li><li>Optionally configure the rules to be applied by clicking the &quot;Rules&quot; button at the top and checking and unchecking rules. Some rules offer more fine-grained configuration.</li><li>Open &quot;System Preferences&quot;.</li><li>Click &quot;Extensions&quot;.</li><li>In the left nav, select &quot;Xcode Source Editor&quot;. If this is missing, see the WARNING section below.</li><li>Check the checkbox for &quot;SwiftFormat&quot;.</li><li>Restart Xcode.</li></ol><p>To run SwiftFormat inside Xcode on a single <code>.swift</code> file:</p><ol><li>Open the file inside Xcode.</li><li>Select Editor ... Swift Format ... Format File to format the entire file.</li></ol><p>To configure a keyboard shortcut for this:</p><ol><li>Select Xcode ... Preferences ... Key Bindings</li><li>Type &quot;SwiftFormat&quot; in the the filter input on the right.</li><li>In the row that begins with &quot;SwiftFormat - Format File&quot;, double-click in the &quot;Key&quot; column.</li><li>Type the desired keyboard shortcut (ex. cmd-s). Using cmd-s will format the file AND save it.</li><li>If that keyboard shortcut is already in use, a message at the bottom of the dialog will describe the current mapping. Choose another keyboard shortcut to avoid disabling the current mapping.</li><li>Close the Preferences dialog.</li></ol><p>There is no built-in way to configure a keyboard shortcut for running SwiftFormat inside Xcode and</p><p>SwiftFormat will continue working inside Xcode after quitting the &quot;SwiftFormat for Xcode&quot; app.</p><p>There is currently no way to configure Xcode to run SwiftFormat every time a file is saved.</p><p>To configure Xcode to run SwiftFormat every time the project is built, see <a href="https://github.com/nicklockwood/SwiftFormat#xcode-build-phase?v=1.0.20" rel="noopener" target="_blank">Xcode build phase</a>.</p><h3 id="warning" tabindex="-1">WARNING</h3><p>Periodically Xcode loses the ability to run SwiftFormat and the Editor menu will no longer contain &quot;SwiftFormat&quot; at the bottom. This happens when System Preferences ... Extensions loses the left nav entry for &quot;Xcode Source Editor&quot;. Pressing cmd-s will do nothing but make a sound. To fix this, enter the following commands from a terminal:</p><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support:<span class="token string">"<span class="token environment constant">$PATH</span>"</span><br>lsregister <span class="token parameter variable">-f</span> /Applications/Xcode.app <span class="token comment"># or whatever executable name is used</span></code></pre><p>This tip was found in this GitHub <a href="https://github.com/nicklockwood/SwiftFormat/issues/494?v=1.0.20" rel="noopener" target="_blank">issue</a>.</p><p>Since this fix is required periodically, it's a good idea to write a script that does this and an alias to make it easy to run. Here is the script <code>fix-swift-format</code>:</p><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span><br><span class="token comment"># This fixes the use of SwiftFormat in Xcode.</span><br><span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support:<span class="token string">"<span class="token environment constant">$PATH</span>"</span><br>lsregister <span class="token parameter variable">-f</span> /Applications/Xcode.app</code></pre><p>Here is the alias definition from <code>.zshrc</code>:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">fixsf</span><span class="token operator">=</span><span class="token string">"fix-swift-format"</span></code></pre><p>Now when &quot;format on save&quot; stops working in Xcode you can just enter <code>fixsf</code> from a terminal.</p><h2 id="configuration" tabindex="-1">Configuration</h2><p>The app &quot;SwiftFormat for Xcode&quot; is installed by the &quot;brew install&quot; command described above. When running SwiftFormat from Xcode, use this app to configure the rules.</p><p>When running SwiftFormat from the command line, configure the rules by creating the file <code>.swiftformat</code> at the root of each project. This file should contain one line for each desired command-line option. Here are recommended rule settings:</p><pre><code>--hexgrouping 2,2
--indent 4
--maxwidth 80
--unusedarguments unnamed-only
--wraparguments before-first
--wrapcollections before-first
--wrapconditions after-first
--wrapparameters before-first
--disable trailingCommas,wrapMultilineStatementBraces
</code></pre><h2 id="rules" tabindex="-1">Rules</h2><p>For documentation on supported rules, see the <a href="https://github.com/nicklockwood/SwiftFormat/blob/master/Rules.md?v=1.0.20" rel="noopener" target="_blank">Rule.md</a>.</p></article>