<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>ARKit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#terminology">Terminology</a></li><li><a href="#getting-started">Getting Started</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://developer.apple.com/documentation/arkit?v=1.0.20" rel="noopener" target="_blank">ARKit</a> is an Apple framework for rendering augmented reality experiences.</p><p>One of the most important classes provided by ARKit is <a href="https://developer.apple.com/documentation/realitykit/arview?v=1.0.20" rel="noopener" target="_blank">ARView</a>. This displays a camera stream on a device.</p><p><a href="https://developer.apple.com/documentation/realitykit/?v=1.0.20" rel="noopener" target="_blank">RealityKit</a> is another Apple framework that is often used with ARKit. It renders 3D images and simulates changes to them. It can be used to add virtual objects to an ARKit view.</p><h2 id="terminology" tabindex="-1">Terminology</h2><ul><li><p>anchor</p><p>An anchor ties entities to a location in a scene such as a coordinate relative to an iPhone location when the app launches. There are several kinds of anchors including a 3D coordinate (specified by a 3x3 matrix of the type <code>SIMD3&lt;Scalar&gt;</code>), a horizontal plane (ex. the floor or a desk top), a vertical plane (ex. a wall), a face, a body, and image in the scene.</p><p>After creating an anchor it must be added to a scene with <code>scene.addAnchor(myAnchor)</code>.</p></li><li><p>entity</p><p>An entity is a 3D object that can be placed in a scene. There are many ways to load entities into a project. One option is to use a USDZ file. Many of these can be downloaded from the Apple Developer website.</p><p>To load an entity from a file and place it at an anchor:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> entity <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">Entity</span><span class="token punctuation">.</span> <span class="token function">load</span> <span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"usdz-file-name"</span></span><span class="token punctuation">)</span><br>anchor<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span></code></pre><p>The Apple <a href="https://developer.apple.com/augmented-reality/tools/?v=1.0.20" rel="noopener" target="_blank">Augmented Reality Tools</a> web page contains links for downloading the tools &quot;Reality Composer&quot; (iPhone and iPad only) and &quot;Reality Converter&quot;.</p><p>The <strong>Reality Composer</strong> iOS app (best used on an iPad) allows users to &quot;easily prototype and produce AR experiences directly with no prior 3D experience&quot;. This includes creating virtual objects, adding animations to them, adding audio that can be triggered in many ways. The app can &quot;record sensor and camera data in the actual location you are building it for, and then replay it on your iOS device&quot;.</p><p>The <strong>Reality Converter</strong> macOS app &quot;converts common 3D file formats such as <code>.obj</code>, <code>.gltf</code>, <code>.fbx</code>, and <code>USD</code> to <code>USDZ</code>. It also lets you view the converted model, customize its material properties with your own textures, and edit the file's metadata.&quot;</p><p>Files produced by these apps can be loaded into an ARKIt app in the same way as USDZ files.</p><p>Entities can be created using the <a href="https://developer.apple.com/documentation/realitykit/meshresource?v=1.0.20" rel="noopener" target="_blank">MeshResource</a> class provided by ARKit. This has the methods <code>generateBox</code>, <code>generatePlane</code>, and <code>generateSphere</code>. For example, to create a blue box:</p><pre class="language-swift"><code class="language-swift"></code></pre></li></ul><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>An Xcode project that uses ARKit can be created in two ways. It can be an SwiftUI &quot;App&quot; or an &quot;Augmented Reality App&quot; which does not use SwiftUI. We will only consider the first option here.</p><p>Currently ARKit views are compatible with UIKit, but not SwiftUI. We need to wrap the <code>ARView</code> in a <code>UIViewRepresentable</code> in order to access it from SwiftUI.</p><ol><li>In Xcode, create a SwiftUI project.</li><li></li></ol></article>