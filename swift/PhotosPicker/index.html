<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>PhotosPicker</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#example-app">Example App</a><ol><li><a href="#single-image-tab">Single Image tab</a></li><li><a href="#multiple-images-tab">Multiple Images tab</a></li></ol></li><li><a href="#embedding">Embedding</a></li></ol></nav></aside><article><style>img {
        border: 1px solid gray;
    }</style><h2 id="overview" tabindex="-1">Overview</h2><p>iOS 16 introduced the <a href="https://developer.apple.com/documentation/photokit/photospicker?v=1.0.21" rel="noopener" target="_blank">PhotosPicker</a> view.</p><p>It provides an easier way to allow users to select assets from their photo library than using <a href="https://developer.apple.com/documentation/uikit/uiimagepickercontroller?v=1.0.21" rel="noopener" target="_blank">UIPickerController</a> from UIKit.</p><p>See the excellent YouTube videos from Stewart Lynch, <a href="https://www.youtube.com/watch?v=gfUBKhZLcK0?v=1.0.21" rel="noopener" target="_blank">PhotosPicker - SwiftUI</a>.</p><h2 id="example-app" tabindex="-1">Example App</h2><p>See <a href="https://github.com/mvolkmann/PhotosPickerDemo?v=1.0.21" rel="noopener" target="_blank">PhotosPickerDemo</a> which demonstrates everything shared in the Steward Lynch video linked above.</p><p>The app has two tabs.</p><p><img alt="PhotosPicker Initial" style="width: 50%" src="/blog/assets/swiftui-photospicker-initial.png?v=1.0.21"></p><h3 id="single-image-tab" tabindex="-1">Single Image tab</h3><p>The first tab &quot;Single Image&quot; allows the user to select a single image from their photo library. Tap the icon in the upper-right corner to view the photo library.</p><p><img alt="PhotosPicker Single" style="width: 50%" src="/blog/assets/swiftui-photospicker-single.png?v=1.0.21"></p><p>See the code for <a href="https://github.com/mvolkmann/PhotosPickerDemo/blob/main/PhotosPickerDemo/Views/SingleImagePicker.swift?v=1.0.21" rel="noopener" target="_blank">SingleImagePicker</a>.</p><p>The <code>matching</code> argument to <code>PhotosPicker</code> accepts many values. Examples from <a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-let-users-select-pictures-using-photospicker?v=1.0.21" rel="noopener" target="_blank">How to let users select pictures using PhotosPicker</a> by Paul Hudson include:</p><ul><li><code>.screenshots</code> to only accept screenshots.</li><li><code>.any(of: [.panoramas, .screenshots])</code></li><li><code>.not(.videos)</code> to accept anything that is not a video</li><li><code>.any(of: [.images, .not(.screenshots)]))</code></li></ul><h3 id="multiple-images-tab" tabindex="-1">Multiple Images tab</h3><p>The second tab &quot;Multiple Images&quot; allows the user to select multiple images from their photo library. Tap the icon in the upper-right corner to view the photo library.</p><p><img alt="PhotosPicker Multiple" style="width: 50%" src="/blog/assets/swiftui-photospicker-multiple.png?v=1.0.21"></p><p>See the code for <a href="https://github.com/mvolkmann/PhotosPickerDemo/blob/main/PhotosPickerDemo/Views/MultipleImagePicker.swift?v=1.0.21" rel="noopener" target="_blank">MultipleImagePicker</a>.</p><h2 id="embedding" tabindex="-1">Embedding</h2><p>iOS 17 added the ability to embed a <code>PhotosPicker</code> in an app. instead of rendering it in a sheet controlled by a separate process. This is configured with three new view modifiers.</p><p>To display a <code>PhotosPicker</code> inline within an app, apply the view modifier <code>photosPickerStyle(.inline)</code>.</p><p>To hide specific controls that the <code>PhotosPicker</code> supplies by default, apply the <code>photosPickerDisabledCapabilities({capability})</code> view modifier. where the supported capabilities are <code>collectionNavigation</code>, <code>search</code>, <code>selectionActions</code>, <code>sensitivityAnalysisIntervention</code>, and <code>stagingArea</code>. The <code>selectionActions</code> capability includes the &quot;Clear&quot; button (deselects all) and the &quot;Done&quot; button (closes picker when not inline).</p><p>It seems there is no need to disable any of the capabilities if they are configured to be hidden using the <code>photosPickerAccessoryVisibility</code> view modifier. The first argument specifies whether you will indicate which edges containing controls should be <code>.visible</code> or <code>.hidden</code>. The association of controls to edges differs based on the platform. In iOS, the navigation bar is at the top and contains the Clear button, the Done button, and a segmented Picker to select &quot;Photos&quot; or &quot;Albums&quot;. In iOS, the toolbar is at the bottom and contains the &quot;Options&quot; button and some text. The following view modifier hides all edges:</p><pre class="language-swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">photosPickerAccessoryVisibility</span><span class="token punctuation">(</span><span class="token punctuation">.</span>hidden<span class="token punctuation">,</span> edges<span class="token punctuation">:</span> <span class="token punctuation">.</span>all<span class="token punctuation">)</span></code></pre><p>See the demo app <a href="https://github.com/mvolkmann/PhotosPicker2023Demo/blob/main/PhotosPicker2023Demo/ContentView.swift?v=1.0.21" rel="noopener" target="_blank">PhotosPicker2023Demo</a>.</p><p>The app above renders a <code>PhotoPicker</code> with the following:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">PhotosPicker</span><span class="token punctuation">(</span><br>    selection<span class="token punctuation">:</span> $imageSelections<span class="token punctuation">,</span><br><br>    <span class="token comment">// Places checkmarks in blue circles on each selected image.</span><br>    <span class="token comment">// Most buttons are hidden when the value is</span><br>    <span class="token comment">// `.continuous` or `.continuousAndOrdered`</span><br>    selectionBehavior<span class="token punctuation">:</span> <span class="token punctuation">.</span>continuous<span class="token punctuation">,</span> <span class="token comment">// value added in iOS 17</span><br><br>    <span class="token comment">// Places numbered blue circles on each selected image.</span><br>    <span class="token comment">// selectionBehavior: .continuousAndOrdered, // value added in iOS 17</span><br><br>    <span class="token comment">// matching: .images,</span><br><br>    preferredItemEncoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>current<br><br>    <span class="token comment">// photoLibrary: .shared()</span><br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"photo"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">imageScale</span><span class="token punctuation">(</span><span class="token punctuation">.</span>large<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This embeds the PhotosPicker in this app instead of</span><br><span class="token comment">// rendering it in a sheet controlled by a separate process.</span><br><span class="token punctuation">.</span><span class="token function">photosPickerStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>inline<span class="token punctuation">)</span><br><br><span class="token comment">// This hides all controls normally rendered by the PhotosPicker.</span><br><span class="token punctuation">.</span><span class="token function">photosPickerAccessoryVisibility</span><span class="token punctuation">(</span><span class="token punctuation">.</span>hidden<span class="token punctuation">,</span> edges<span class="token punctuation">:</span> <span class="token punctuation">.</span>all<span class="token punctuation">)</span><br><br><span class="token comment">// .ignoresSafeArea()</span><br><span class="token comment">// The height of each row is 120.</span><br><span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">)</span> <span class="token comment">// two rows</span></code></pre></article>