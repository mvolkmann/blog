<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Navigation</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#example-app">Example App</a><ol><li><a href="#fruits-tab">Fruits tab</a></li><li><a href="#authors-tab">Authors tab</a></li><li><a href="#countries-stack-tab">Countries Stack tab</a></li><li><a href="#countries-split-tab">Countries Split tab</a></li></ol></li><li><a href="#deep-linking">Deep Linking</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>iOS 16 introduced new ways to manage screen navigation.</p><p>See the WWDC 2022 video on the new navigation API titled <a href="https://developer.apple.com/videos/play/wwdc2022/10054/?v=1.0.20" rel="noopener" target="_blank">The SwiftUI cookbook for navigation</a>.</p><p>Also see the excellent YouTube videos from Stewart Lynch:</p><ul><li><a href="https://www.youtube.com/watch?v=6-OeaFfDXXw?v=1.0.20" rel="noopener" target="_blank">NavigationStack in iOS 16</a></li><li><a href="https://www.youtube.com/watch?v=pwP3_OX2G9A?v=1.0.20" rel="noopener" target="_blank">Back to Root and Deep Links</a></li><li><a href="https://www.youtube.com/watch?v=RsmMLLL8FB0?v=1.0.20" rel="noopener" target="_blank">NavigationSplitView in iOS 16</a></li></ul><h2 id="example-app" tabindex="-1">Example App</h2><p>See <a href="https://github.com/mvolkmann/NavigationStackDemo?v=1.0.20" rel="noopener" target="_blank">NavigationStackDemo</a> which demonstrates everything shared in the Steward Lynch videos linked above.</p><p>The app has four tabs.</p><h3 id="fruits-tab" tabindex="-1">Fruits tab</h3><p>The first tab &quot;Fruits&quot; is implemented in the file <code>FruitListView.swift</code>. It uses a <code>NavigationStack</code> to allow the user to select a fruit from a <code>List</code> of <code>NavigationLink</code> views.</p><img alt="Fruits List" src="/blog/assets/swiftui-navigation-01-fruits.png?v=1.0.20"><p>Nested inside the <code>NavigationStack</code> are instances of <code>NavigationLink</code>. This struct supports many initializers, some of which take a <code>value</code> argument. When these links are tapped, their value is placed on the stack.</p><p>When a fruit is selected, a view that displays &quot;You chose {fruit-emoji}.&quot; is pushed onto the navigation stack.</p><img alt="Fruits Detail" src="/blog/assets/swiftui-navigation-02-fruit.png?v=1.0.20"><p>Click &quot;&lt; Fruits&quot; in the upper-left to return to the list of fruits. The &quot;Show Favorite&quot; button at the bottom demonstrates a <code>NavigationList</code> that is outside of the <code>List</code>. The &quot;Smile&quot; button at the bottom demonstrates a <code>NavigationList</code> that takes advantage of the fact that the only registered <code>navigationDestination</code> handles any <code>String</code> value.</p><h3 id="authors-tab" tabindex="-1">Authors tab</h3><p>The second tab &quot;Authors&quot; is implemented in the file <code>AuthorListView</code>. It uses a <code>NavigationStack</code> to allow the user to select an <code>Author</code> from a <code>List</code> of <code>NavigationLink</code> views.</p><img alt="Authors List" src="/blog/assets/swiftui-navigation-03-authors.png?v=1.0.20"><p>When an author is selected, a view that displays specific information about the author is pushed onto the navigation stack.</p><img alt="Author Detail" src="/blog/assets/swiftui-navigation-04-author.png?v=1.0.20"><p>There are four <code>navigationDestination</code> registrations that handle the types:</p><ul><li><code>String</code> for author name</li><li><code>Int</code> for number of books by an author</li><li><code>Color</code> for a color associated with an author</li><li><code>Author</code> for an entire <code>Author</code> object</li></ul><p>The &quot;Random&quot; button selects a random author and displays information about that author.</p><p>Unlike in the Fruits tab, a <code>path</code> is passed to <code>NavigationStack</code>. This can be an instance of <code>NavigationPath</code> or any array of any type whose values conform to the <code>Codable</code> and <code>Hashable</code> protocols. Many builtin types such as <code>String</code> already conform to both of these protocols.</p><p>It seems the <code>NavigationStack</code> is only populated when the <code>NavigationLink</code> instances supply the <code>value</code> argument. This enables modifying the stack to navigate to another screen. For example, the following code navigates to the &quot;root&quot; screen:</p><pre class="language-swift"><code class="language-swift">path<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>count<span class="token punctuation">)</span></code></pre><p>If the path passed to <code>NavigationStack</code> is an <code>Array</code> of any type instead of a <code>NavigationPath</code> instance and it is held in state, navigate to the &quot;root&quot; screen by setting the that state variable to an empty array.</p><h3 id="countries-stack-tab" tabindex="-1">Countries Stack tab</h3><p>The third tab &quot;Countries Stack&quot; uses a <code>NavigationStack</code> to allow the user to select a <code>Country</code> from a <code>List</code> of <code>NavigationLink</code> views.</p><img alt="Countries List" src="/blog/assets/swiftui-navigation-05-stack.png?v=1.0.20"><p>When a country is selected, a view that displays a list of cities in the country is pushed onto the navigation stack.</p><img alt="Cities List" src="/blog/assets/swiftui-navigation-06-stack.png?v=1.0.20"><p>Each city is represented by a <code>NavigationLink</code>. Tapping one of these pushes a view onto the stack that displays detailed information about that city. A star icon is displayed behind the information if the city is the capital of its country. A bar chart showing the population of each supported city in the same country is displayed below the city data. The &quot;Back to Countries&quot; button demonstrates popping back to the initial view in this tab.</p><img alt="City Detail" src="/blog/assets/swiftui-navigation-07-stack.png?v=1.0.20"><h3 id="countries-split-tab" tabindex="-1">Countries Split tab</h3><p>The fourth tab &quot;Countries Split&quot; is similar to the third tab, but uses a <code>NavigationSplitView</code> instead of a <code>NavigationStack</code>. A <code>NavigationSplitView</code> can have two of three sections arranged horizontally. These are named &quot;sidebar&quot;, &quot;content&quot; (optional), and &quot;detail&quot;. This app uses a three-column view where the first column contains a list of countries, the second column contains a list of cities in the selected country, and the third column contains detail about the selected city. Having a &quot;Back to Countries&quot; button doesn't apply in this scenario.</p><img alt="Countries List" src="/blog/assets/swiftui-navigation-08-split.png?v=1.0.20"> <img alt="Cities List" src="/blog/assets/swiftui-navigation-09-split.png?v=1.0.20"> <img alt="City Detail" src="/blog/assets/swiftui-navigation-10-split.png?v=1.0.20"><h2 id="deep-linking" tabindex="-1">Deep Linking</h2><p>This app supports navigation via a URL.</p><p>To create a URL scheme:</p><ul><li>Select the top item in Navigator.</li><li>Select the main target.</li><li>Select the Info tab.</li><li>Expand &quot;URL Types&quot;.</li><li>Click the &quot;+&quot; button.</li><li>For &quot;Identifier&quot;, enter the app bundle id found in the target General tab.</li><li>For &quot;URL Schemas&quot;, enter a name that is unique within the app such as &quot;NavStack&quot;.</li><li>&quot;Icon&quot; is not required.</li><li>&quot;Role&quot; can keep the default value of &quot;Editor&quot;.</li></ul><p>To configure use of URLs:</p><ul><li>In the App subclass, add the <code>onOpenURL</code> view modifier to the initial view (<code>ContentView</code> here).</li></ul><p>To test use of URLS:</p><ul><li><p>Launch the Simulator. The app does not need to be running in the Simulator.</p></li><li><p>In a terminal window, enter a command like these:</p><ul><li><code>xcrun simctl openurl booted NavStack://Canada</code></li><li><code>xcrun simctl openurl booted NavStack://Canada/Vancouver</code></li></ul></li><li><p>The URLs above can also be links in an email or reminder. Clicking these links will launch the app if it is not already running and will navigate to the appropriate navigation path.</p></li><li><p>The app will ask for permission to receive a URL the first time a request is received.</p></li></ul></article>