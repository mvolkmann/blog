<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Face ID</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#setup">Setup</a></li><li><a href="#implementation">Implementation</a></li><li><a href="#testing-in-simulator">Testing in Simulator</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p>The <code>LocalAuthentication</code> package supports authentication in iOS apps using either Face ID or Touch ID.</p><h2 id="setup">Setup</h2><ol><li>Select the top entry in the Navigator.</li><li>Under &quot;TARGETS&quot;, select the app target.</li><li>Click the &quot;Info&quot; tab.</li><li>Click the &quot;+&quot; button to the right of the last key in the table.</li><li>Enter the key &quot;Privacy - Face ID Usage Description&quot;.</li><li>Enter a value that describes why Face ID is being used such as &quot;We want to ensure that only you can view your data.&quot;</li></ol><h2 id="implementation">Implementation</h2><ol><li><p>In the main view of the app add <code>import LocalAuthentication</code></p></li><li><p>Add the following:</p><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> isUnlocked <span class="token operator">=</span> <span class="token boolean">false</span><br><br><span class="token keyword">func</span> <span class="token function-definition function">authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token class-name">LAContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">var</span> error<span class="token punctuation">:</span> <span class="token class-name">NSError</span><span class="token operator">?</span><br><br>    <span class="token keyword">if</span> context<span class="token punctuation">.</span><span class="token function">canEvaluatePolicy</span><span class="token punctuation">(</span><br>        <span class="token punctuation">.</span>deviceOwnerAuthenticationWithBiometrics<span class="token punctuation">,</span><br>        error<span class="token punctuation">:</span> <span class="token operator">&amp;</span>error<br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> reason <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"We want to ensure that only you can see your data."</span></span><br>        context<span class="token punctuation">.</span><span class="token function">evaluatePolicy</span><span class="token punctuation">(</span><br>            <span class="token punctuation">.</span>deviceOwnerAuthenticationWithBiometrics<span class="token punctuation">,</span><br>            localizedReason<span class="token punctuation">:</span> reason<br>        <span class="token punctuation">)</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> error <span class="token keyword">in</span><br>            <span class="token keyword">if</span> success <span class="token punctuation">{</span><br>                isUnlocked <span class="token operator">=</span> <span class="token boolean">true</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>                <span class="token comment">// The user did not authenticate.</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token comment">// The device does not support biometrics.</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p>Use the value of <code>isUnlocked</code> to decide what to render.</p></li><li><p>Provide an alternate way for users to authenticate such as entering a username and password in case there are reasons they cannot currently use Face ID.</p></li></ol><h2 id="testing-in-simulator">Testing in Simulator</h2><p>To test in the Simulator, open the Simulator app and select Features ... Face ID ... Enrolled.</p><p>To simulate a successful Face ID scan, select Features ... Face ID ... Matching Face.</p><p>To simulate an unsuccessful Face ID scan, select Features ... Face ID ... Non-matching Face.</p></article>