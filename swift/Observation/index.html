<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Observation</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#%40binding">@Binding</a></li><li><a href="#%40observable">@Observable</a></li><li><a href="#%40bindable">@Bindable</a></li><li><a href="#example-app">Example App</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>Observation enables defining model objects using Swift syntax and triggering SwiftUI updates based on changes to model objects.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://developer.apple.com/wwdc23/10149?v=1.0.21" rel="noopener" target="_blank">What is Observation?</a> video from WWDC 2023</li></ul><h2 id="%40binding" tabindex="-1">@Binding</h2><p>The <code>@Binding</code> property wrapper allows a view to mutate data that is owned by another view, typically its parent view.</p><p>The following code implements a checkbox view:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span><br><br><span class="token keyword">struct</span> <span class="token class-name">Checkbox</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token class-name">String</span><br>    <span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> isOn<span class="token punctuation">:</span> <span class="token class-name">Bool</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token comment">// This approach only works in macOS.</span><br>        <span class="token comment">// Toggle(isOn: $isOn) { Text(label) }.toggleStyle(.checkbox)</span><br><br>        <span class="token class-name">Button</span> <span class="token punctuation">{</span><br>            isOn<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span> label<span class="token punctuation">:</span><br>            <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> isOn <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"checkmark.square"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"square"</span></span><span class="token punctuation">)</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>plain<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following code demonstrates using the <code>Checkbox</code> view:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> isHappy <span class="token operator">=</span> <span class="token boolean">false</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Checkbox</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Happy?"</span></span><span class="token punctuation">,</span> isOn<span class="token punctuation">:</span> $isHappy<span class="token punctuation">)</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span>isHappy <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"Good for you!"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Maybe tomorrow."</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="%40observable" tabindex="-1">@Observable</h2><p>To define a data model, apply the <code>Observable</code> macro to a class definition. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@Observable</span> <span class="token keyword">class</span> <span class="token class-name">TodosModel</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> todos<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Todo</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><h2 id="%40bindable" tabindex="-1">@Bindable</h2><p>The <code>@Bindable</code> property wrapper creates a two-way binding to a property in a class to which the <code>@Observable</code> property wrapper is applied.</p><p>TODO: Add information about this.</p><h2 id="example-app" tabindex="-1">Example App</h2><p>See <a href="https://github.com/mvolkmann/ObservationDemo/blob/main/ObservationDemo/ContentView.swift?v=1.0.21" rel="noopener" target="_blank">ObservableDemo</a>.</p></article>