<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>SpriteKit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#creating-a-game">Creating a Game</a></li><li><a href="#example">Example</a></li><li><a href="#game-projects">Game Projects</a></li><li><a href="#resources">Resources</a></li><li><a href="#random-notes">Random Notes</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>The <a href="https://developer.apple.com/documentation/spritekit/?v=1.1.1" rel="noopener" target="_blank">SpriteKit</a> framework supports drawing text, shapes, images, and video. It supports physics behaviors which makes it useful for creating games.</p><h2 id="creating-a-game" tabindex="-1">Creating a Game</h2><ol><li>Open Xcode.</li><li>Select File ... New ... Project...</li><li>Select iOS ... Game.</li><li>Enter a &quot;Product Name&quot;, preferably with no spaces or special characters.</li><li>Leave &quot;Language&quot; set to &quot;Swift&quot;.</li><li>Leave &quot;Game Technology&quot; set to &quot;SpriteKit&quot;.</li><li>Check the &quot;Integrate GameplayKit&quot; checkbox.</li><li>Click the &quot;Next&quot; button.</li><li>Select a directory where the project will be saved.</li><li>Click the &quot;Create&quot; button.</li></ol><h2 id="example" tabindex="-1">Example</h2><p>Here is a simple example derived from the &quot;Hacking With Swift&quot; article <a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-integrate-spritekit-using-spriteview?v=1.1.1" rel="noopener" target="_blank">How to integrate SpriteKit using SpriteView</a>.</p><p>Tap the black scene area to drop a box with a random fill color. The box will fall to the bottom and interact with previous boxes using physics effects.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SpriteKit</span><br><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span><br><br><span class="token keyword">class</span> <span class="token class-name">GameScene</span><span class="token punctuation">:</span> <span class="token class-name">SKScene</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> boxSize <span class="token operator">=</span> <span class="token number">50</span><br><br>    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">didMove</span><span class="token punctuation">(</span>to view<span class="token punctuation">:</span> <span class="token class-name">SKView</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>edgeLoopFrom<span class="token punctuation">:</span> frame<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">UIColor</span> <span class="token punctuation">{</span><br>        <span class="token class-name">UIColor</span><span class="token punctuation">(</span><br>            red<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">...</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            green<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">...</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            blue<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token operator">...</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            alpha<span class="token punctuation">:</span> <span class="token number">1</span><br>        <span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">touchesBegan</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> touches<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">UITouch</span><span class="token operator">></span><span class="token punctuation">,</span> with event<span class="token punctuation">:</span> <span class="token class-name">UIEvent</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> touch <span class="token operator">=</span> touches<span class="token punctuation">.</span>first <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span><br>        <span class="token keyword">let</span> location <span class="token operator">=</span> touch<span class="token punctuation">.</span><span class="token function">location</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span><br>        <span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token class-name">CGSize</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> boxSize<span class="token punctuation">,</span> height<span class="token punctuation">:</span> boxSize<span class="token punctuation">)</span><br>        <span class="token keyword">let</span> box <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> <span class="token function">randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> size<span class="token punctuation">)</span><br>        box<span class="token punctuation">.</span>position <span class="token operator">=</span> location<br>        box<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>rectangleOf<span class="token punctuation">:</span> size<span class="token punctuation">)</span><br>        <span class="token function">addChild</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token class-name">CGSize</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">)</span><br>    <span class="token keyword">var</span> scene<span class="token punctuation">:</span> <span class="token class-name">SKScene</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> scene <span class="token operator">=</span> <span class="token class-name">GameScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        scene<span class="token punctuation">.</span>size <span class="token operator">=</span> size<br>        scene<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token punctuation">.</span>fill<br>        <span class="token keyword">return</span> scene<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Tap to drop a box."</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><br>            <span class="token class-name">SpriteView</span><span class="token punctuation">(</span>scene<span class="token punctuation">:</span> scene<span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> size<span class="token punctuation">.</span>width<span class="token punctuation">,</span> height<span class="token punctuation">:</span> size<span class="token punctuation">.</span>height<span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">ignoresSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="game-projects" tabindex="-1">Game Projects</h2><p>One way to begin creating a game is to create a new project in Xcode using the &quot;Game&quot; template. This uses UIKit rather than SwiftUI.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://www.youtube.com/watch?v=TJfh8wXbfEw?v=1.1.1" rel="noopener" target="_blank">Building a SpriteKit game with physics, particles, and shaders</a></li><li><a href="https://www.youtube.com/watch?v=0-lM51yI-PA?v=1.1.1" rel="noopener" target="_blank">Building a space shooter with SpriteKit and Codable</a></li></ul><h2 id="random-notes" tabindex="-1">Random Notes</h2><p>In the debugging info in the lower right corner, why are the number of nodes shown but the FPS is cut off?</p><p>Can set the friction on nodes.</p><p>Does the light blue outline added by settings show physics to true follow the edge of images that have no background?</p><p>See the debugging options showNodes and showFPS that can be set on a SKView.</p><p>When does the SKScene method didMove get invoked?</p><p>Nodes are identified by name. Use an if let statement to try to find them.</p><p>To avoid a large number of conditional assignments when assigning properties to a physicsBody, do this:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">if</span> <span class="token keyword">let</span> body <span class="token operator">=</span> node<span class="token punctuation">.</span>physicsBody <span class="token punctuation">{</span> … <span class="token punctuation">}</span></code></pre><p>See the SKScene method update which is called every time before it renders.</p><p>Describe the difference between the properties, anchorPoint in position.</p><p>When you have an issue with nodes moving and being affected by friction, maybe you can fix it by turning off allowsRotation.</p><p>Document the touchDown, touchMoved, and touchUp methods.</p></article>