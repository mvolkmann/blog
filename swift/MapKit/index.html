<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>MapKit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#example-app">Example App</a></li><li><a href="#annotations">Annotations</a></li><li><a href="#overlays">Overlays</a></li><li><a href="#directions">Directions</a></li><li><a href="#look-around">Look Around</a></li><li><a href="#map-vs-mkmapview">Map vs MKMapView</a></li><li><a href="#relationships">Relationships</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#showing-current-location">Showing Current Location</a></li><li><a href="#simulator">Simulator</a></li><li><a href="#more">More</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://developer.apple.com/documentation/mapkit/?v=1.0.20" rel="noopener" target="_blank">MapKit</a> enables embedding maps in apps. Users can pan and zoom to adjust their view of the map. The maps can contain markers that can be tappable to invoke app-specific actions.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://developer.apple.com/videos/play/wwdc2022/10035/?v=1.0.20" rel="noopener" target="_blank">What's new in MapKit</a> from WWDC 2022</li><li><a href="https://holyswift.app/new-mapkit-configurations-with-swiftui/?v=1.0.20" rel="noopener" target="_blank">New MapKit Configurations with SwiftUI</a></li></ul><h2 id="example-app" tabindex="-1">Example App</h2><p>See the demo app at <a href="https://github.com/mvolkmann/swiftui-mapkit?v=1.0.20" rel="noopener" target="_blank">swiftui-mapkit</a>.</p><p><img alt="MapKit Initial" style="width: 32%" src="/blog/assets/mapkit-initial.jpg?v=1.0.20" title="MapKit Initial"> <img alt="MapKit Selected Place" style="width: 32%" src="/blog/assets/mapkit-selected-place.jpg?v=1.0.20" title="MapKit Selected Place"> <img alt="MapKit Browse Place" style="width: 32%" src="/blog/assets/mapkit-browse-place.jpg?v=1.0.20" title="MapKit Browse Place"></p><h2 id="annotations" tabindex="-1">Annotations</h2><p>Annotations are markers that are rendered on a map. The easiest way to add annotations is to use the provided <a href="https://developer.apple.com/documentation/mapkit/mkmarkerannotationview?v=1.0.20" rel="noopener" target="_blank">MKMarkerAnnotationView</a> which displays a pin in a bubble.</p><p>Custom annotations can be created using <a href="https://developer.apple.com/documentation/mapkit/mkannotationview?v=1.0.20" rel="noopener" target="_blank">MKAnnotationView</a>. See the Swiftful Thinking YouTube video <a href="https://www.youtube.com/watch?v=javFZbCYGfc?v=1.0.20" rel="noopener" target="_blank">Custom Map Annotation Pins for SwiftUI MapKit Map</a>.</p><h2 id="overlays" tabindex="-1">Overlays</h2><p>Overlays draw on top of a map. A common example is drawing route lines that indicate how to travel from one location to another.</p><p>The provided subclasses of <a href="https://developer.apple.com/documentation/mapkit/mkoverlayrenderer?v=1.0.20" rel="noopener" target="_blank">MKOverlayRenderer</a> include:</p><ul><li><a href="https://developer.apple.com/documentation/mapkit/mkcirclerenderer?v=1.0.20" rel="noopener" target="_blank">MKCircleRenderer</a> - fills and strokes a circle</li><li><a href="https://developer.apple.com/documentation/mapkit/mkpolylinerenderer?v=1.0.20" rel="noopener" target="_blank">MKPolylineRenderer</a> - like MKPolygonRender but doesn't fill because the shape isn't necessarily closed</li><li><a href="https://developer.apple.com/documentation/mapkit/mkpolygonrenderer?v=1.0.20" rel="noopener" target="_blank">MKPolygonRenderer</a> - fills and strokes</li><li><a href="https://developer.apple.com/documentation/mapkit/mkoverlaypathrenderer?v=1.0.20" rel="noopener" target="_blank">MKOverlayPathRenderer</a> - renders shape defined by a CGPath</li><li><a href="https://developer.apple.com/documentation/mapkit/mktileoverlayrenderer?v=1.0.20" rel="noopener" target="_blank">MKTileOverlayRenderer</a> for bitmap images</li><li><a href="https://developer.apple.com/documentation/mapkit/mkgradientpolygonrenderer?v=1.0.20" rel="noopener" target="_blank">MKGradientPolygonRenderer</a> - like MKPolylineRenderer but uses gradient color</li><li><a href="https://developer.apple.com/documentation/mapkit/mkmultipolygonrenderer?v=1.0.20" rel="noopener" target="_blank">MKMultiPolygonRenderer</a> - renders multiple polygons</li><li><a href="https://developer.apple.com/documentation/mapkit/mkmultipolylinerenderer?v=1.0.20" rel="noopener" target="_blank">MKMultiPolylineRenderer</a> - renders multiple polylines</li></ul><h2 id="directions" tabindex="-1">Directions</h2><p>Driving and walking directions are available in most cities. But as of 2022, transit directions are only available in around 80 cities. For a list, see <a href="https://www.apple.com/ios/feature-availability/#maps-look-around?v=1.0.20" rel="noopener" target="_blank">iOS and iPadOS 16 Feature Availability</a>. Click the &quot;Transit&quot; link in the &quot;Maps&quot; section. Transit directions are not currently available in London or Paris. Actually I've never been able to get transit directions from the <code>MKDirections</code> <code>calculate</code> method in any city!</p><p>The list also includes many cities outside the U.S. such as Berlin, Germany, London, United Kingdom, and Venice, Italy.</p><p>The <a href="https://developer.apple.com/documentation/mapkit/mklocalsearch?v=1.0.20" rel="noopener" target="_blank">MKLocalSearch</a> class can be used to search for places that match given text and markers for each match can be added to the map.</p><h2 id="look-around" tabindex="-1">Look Around</h2><p>&quot;Look Around&quot; capabilities, introduced in iOS16, can be added to display street level views. See <a href="https://developer.apple.com/videos/play/wwdc2022/10035/">https://developer.apple.com/videos/play/wwdc2022/10035/</a>.</p><p>Countries and cities for which Look Around support has been added are listed at <a href="https://www.apple.com/ios/feature-availability/#maps-look-around?v=1.0.20" rel="noopener" target="_blank">iOS and iPadOS 16 Feature Availability</a>. Click the &quot;Look Around&quot; link in the &quot;Maps&quot; section.</p><p>The list includes the following U.S. cities:</p><ul><li>Atlanta, Georgia</li><li>Boston, Massachusetts</li><li>Chicago, Illinois</li><li>Denver, Colorado</li><li>Detroit, Michigan</li><li>Dublin, Ireland</li><li>Houston, Texas</li><li>Las Vegas, Nevada</li><li>Los Angeles, California</li><li>Miami, Florida</li><li>New York, New York</li><li>Philadelphia, Pennsylvania</li><li>Phoenix, Arizona</li><li>Portland, Oregon</li><li>San Diego, California</li><li>San Francisco, California</li><li>Santa Cruz, California</li><li>Seattle, Washington</li><li>Washington, D.C.</li></ul><p>When using the Apple Maps app, if Look Around is available for the current map location then a button containing a binocular icon will appear in the lower-left. Tap the button to open a Look Around view. This works in iOS Maps app, but doesn't not seem to work in macOS Maps app.</p><h2 id="map-vs-mkmapview" tabindex="-1">Map vs MKMapView</h2><p>There are two options for displaying maps. UIKit provides <a href="https://developer.apple.com/documentation/mapkit/mkmapview?v=1.0.20" rel="noopener" target="_blank">MKMapView</a>. In iOS 14 MapKit added the SwiftUI view <a href="https://developer.apple.com/documentation/mapkit/map?v=1.0.20" rel="noopener" target="_blank">Map</a>. <code>Map</code> only supports a subset of the features available in <code>MKMapView</code>. For this reason in SwiftUI apps it is often desirable to define a struct that conforms to <code>UIViewRepresentable</code> and wraps access to a <code>MKMapView</code>.</p><p><code>MKMapView</code> supports listening for tap gestures and getting the corresponding map coordinates. <code>Map</code> is not able to do this.</p><p>Both <code>Map</code> and <code>MKMapView</code> support including annotations which are single point markers. <code>MKMapView</code> also supports overlays which are graphical elements like lines, shapes, and images displayed on top of a map. These are often used to draw routes from one map location to another. <code>Map</code> does not support overlays.</p><p><code>MKMapView</code> is able to load custom map tiles for a map background instead of relying on the default map tiles. <code>Map</code> is not able to do this.</p><h2 id="relationships" tabindex="-1">Relationships</h2><p><a href="https://developer.apple.com/documentation/mapkitjs/place?v=1.0.20" rel="noopener" target="_blank">MKPlacemark</a> objects provide a description of a map location. This class inherits from the <code>CLPlacemark</code> class.</p><p><a href="https://developer.apple.com/documentation/corelocation/clplacemark?v=1.0.20" rel="noopener" target="_blank">CLPlacemark</a> objects also provide a description of a map location. The <code>location</code> property is a <code>CLLocation</code></p><p><a href="https://developer.apple.com/documentation/corelocation/cllocation?v=1.0.20" rel="noopener" target="_blank">CLLocation</a> holds latitude, longitude, and course information. The <code>coordinate</code> property has the type <code>CLLocationCoordinate2D</code>.</p><p><a href="https://developer.apple.com/documentation/corelocation/cllocationcoordinate2d?v=1.0.20" rel="noopener" target="_blank">CLLocationCoordinate2D</a> holds latitude and longitude values.</p><p>MKPlacemark -&gt; CLLocation -&gt; CLLocationCoordinate2D</p><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>To enable use of MapKit in a project:</p><ul><li>Select the top entry in the file navigator.</li><li>Select the main target.</li><li>Select the &quot;Signing &amp; Capabilities&quot; tab.</li><li>Click the &quot;+ Capability&quot; button in the upper-left.</li><li>Enter &quot;MapKit&quot;.</li><li>Double-click that capability to add it to the project.</li><li>Check the checkboxes for the desired routing modes such as &quot;Bike&quot;, &quot;Car&quot;, and &quot;Pedestrian&quot;.</li></ul><h2 id="showing-current-location" tabindex="-1">Showing Current Location</h2><p>To show the current location of the user on the map, add the <code>showUserLocation</code> argument with a value of <code>true</code> to the <code>Map</code> initializer call.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Map</span><span class="token punctuation">(</span><br>    <span class="token operator">...</span><br>     showsUserLocation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>     <span class="token operator">...</span><br><span class="token punctuation">)</span></code></pre><h2 id="simulator" tabindex="-1">Simulator</h2><p>To simulate a drag event, simply click and drag.</p><p>To zoom in, double-click. To zoom out, hold down the option key and click. Another option is to hold down the option key to display two circles that represent finger touch points. Drag the circles closer together to zoom out and farther apart to zoom in.</p><p>In the Simulator the location defaults to the location of Apple headquarters in Cupertino, California near San Jose. To change this, select Features ... Location ... Custom Location... and enter latitude and longitude values.</p><h2 id="more" tabindex="-1">More</h2><p>TODO: Add many more sections!</p></article>