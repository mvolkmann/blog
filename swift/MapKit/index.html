<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>MapKit</h2><aside><nav class="toc"><ol><li><a href="#todo">TODO</a></li><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#example-app">Example App</a></li><li><a href="#basic-map-display">Basic Map Display</a></li><li><a href="#distance-vs.-angle">Distance vs. Angle</a></li><li><a href="#map-points">Map Points</a></li><li><a href="#annotations">Annotations</a></li><li><a href="#overlays">Overlays</a></li><li><a href="#directions">Directions</a></li><li><a href="#look-around">Look Around</a></li><li><a href="#map-vs-mkmapview">Map vs MKMapView</a></li><li><a href="#relationships">Relationships</a></li><li><a href="#showing-current-location">Showing Current Location</a></li><li><a href="#tracking-user">Tracking User</a></li><li><a href="#simulator">Simulator</a></li><li><a href="#deploying">Deploying</a></li><li><a href="#more">More</a></li></ol></nav></aside><article><h2 id="todo" tabindex="-1">TODO</h2><p>Add content from <a href="https://www.appcoda.com/mapkit-polyline-polygon/?v=1.1.0" rel="noopener" target="_blank">MapKit Beginner's Guide: Polylines, Polygons, and Callouts</a></p><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://developer.apple.com/documentation/mapkit/?v=1.1.0" rel="noopener" target="_blank">MapKit</a> enables embedding maps in apps. Users can pan and zoom to adjust their view of the map. The maps can contain markers that can be tappable to invoke app-specific actions.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><a href="https://developer.apple.com/videos/play/wwdc2022/10035/?v=1.1.0" rel="noopener" target="_blank">What's new in MapKit</a> from WWDC 2022</li><li><a href="https://holyswift.app/new-mapkit-configurations-with-swiftui/?v=1.1.0" rel="noopener" target="_blank">New MapKit Configurations with SwiftUI</a></li><li><a href="https://developer.apple.com/videos/play/wwdc2023/10043/?v=1.1.0" rel="noopener" target="_blank">Meet MapKit for SwiftUI</a> from WWDC 2023</li></ul><h2 id="getting-started" tabindex="-1">Getting Started</h2><p>To enable use of MapKit in a project:</p><ul><li>Select the top entry in the file navigator.</li><li>Select the main target.</li><li>Select the &quot;Signing &amp; Capabilities&quot; tab.</li><li>Click the &quot;+ Capability&quot; button in the upper-left.</li><li>Enter &quot;MapKit&quot;.</li><li>Double-click that capability to add it to the project.</li><li>Check the checkboxes for the desired routing modes such as &quot;Bike&quot;, &quot;Car&quot;, and &quot;Pedestrian&quot;.</li></ul><h2 id="example-app" tabindex="-1">Example App</h2><p>See the demo apps at <a href="https://github.com/mvolkmann/MapKitForSwiftUI?v=1.1.0" rel="noopener" target="_blank">MapKitForSwiftUI</a> (iOS 17+) and <a href="https://github.com/mvolkmann/swiftui-mapkit?v=1.1.0" rel="noopener" target="_blank">swiftui-mapkit</a>.</p><p><img alt="MapKit iOS 17+" style="width: 32%" src="/blog/assets/mapkit-initial.jpg?v=1.1.0" title="MapKit Initial"> <img alt="MapKit Initial" style="width: 32%" src="/blog/assets/mapkit-initial.jpg?v=1.1.0" title="MapKit Initial"> <img alt="MapKit Selected Place" style="width: 32%" src="/blog/assets/mapkit-selected-place.jpg?v=1.1.0" title="MapKit Selected Place"> <img alt="MapKit Browse Place" style="width: 32%" src="/blog/assets/mapkit-browse-place.jpg?v=1.1.0" title="MapKit Browse Place"></p><h2 id="basic-map-display" tabindex="-1">Basic Map Display</h2><p>To enable use of MapKit in a SwiftUI app:</p><ul><li>Open the Project Navigator by selecting the first navigator tap or pressing cmd-1.</li><li>Select the top entry.</li><li>Select the main target.</li><li>Select the &quot;Signing &amp; Capabilities&quot; tab.</li><li>Click the &quot;+ Capability&quot; button in the upper-left.</li><li>Double-click &quot;Maps&quot;.</li><li>To access route data, check all the checkboxes for the desired route types such as &quot;Bike&quot;, &quot;Bus&quot;, &quot;Car&quot;, &quot;Pedestrian&quot;, and &quot;Train&quot;.</li></ul><p>The following class defines a view model that is used to get the current location of the user.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">CoreLocation</span><br><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span><br><br><span class="token keyword">class</span> <span class="token class-name">LocationManager</span><span class="token punctuation">:</span> <span class="token class-name">NSObject</span><span class="token punctuation">,</span> <span class="token class-name">ObservableObject</span><span class="token punctuation">,</span> <span class="token class-name">CLLocationManagerDelegate</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> error<span class="token punctuation">:</span> <span class="token class-name">Error</span><span class="token operator">?</span><br>    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> location<span class="token punctuation">:</span> <span class="token class-name">CLLocationCoordinate2D</span><span class="token operator">?</span><br>    <span class="token keyword">let</span> manager <span class="token operator">=</span> <span class="token class-name">CLLocationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>    <span class="token keyword">override</span> <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        manager<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">requestLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        manager<span class="token punctuation">.</span><span class="token function">requestLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">locationManager</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> manager<span class="token punctuation">:</span> <span class="token class-name">CLLocationManager</span><span class="token punctuation">,</span><br>        didUpdateLocations locations<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">CLLocation</span><span class="token punctuation">]</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        location <span class="token operator">=</span> locations<span class="token punctuation">.</span>first<span class="token operator">?</span><span class="token punctuation">.</span>coordinate<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">locationManager</span><span class="token punctuation">(</span><br>        <span class="token omit keyword">_</span> manager<span class="token punctuation">:</span> <span class="token class-name">CLLocationManager</span><span class="token punctuation">,</span><br>        didFailWithError error<span class="token punctuation">:</span> <span class="token class-name">Error</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>error <span class="token operator">=</span> error<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The <a href="https://developer.apple.com/documentation/corelocation/cllocationcoordinate2d?v=1.1.0" rel="noopener" target="_blank">CLLocationCoordinate2D</a> struct from the Core Location framework does not conform to the <code>Equatable</code> protocol. We need it to do that in order to listen for changes to a location using the <code>onChange</code> view modifier. The following extension fixes this.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">CLLocationCoordinate2D</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">==</span> <span class="token punctuation">(</span><br>        lhs<span class="token punctuation">:</span> <span class="token class-name">CLLocationCoordinate2D</span><span class="token punctuation">,</span><br>        rhs<span class="token punctuation">:</span> <span class="token class-name">CLLocationCoordinate2D</span><br>    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span><br>        lhs<span class="token punctuation">.</span>latitude <span class="token operator">==</span> rhs<span class="token punctuation">.</span>latitude <span class="token operator">&amp;&amp;</span> lhs<span class="token punctuation">.</span>longitude <span class="token operator">==</span> rhs<span class="token punctuation">.</span>longitude<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following view displays a <a href="https://developer.apple.com/documentation/mapkit/map?v=1.1.0" rel="noopener" target="_blank">Map</a> that begins by showing Apple Park. The user can tap &quot;Current Location&quot; button to obtain their latitude and longitude. The map then updates to centered on that location. From there the user can pan and zoom the map. To reset the map to be centered on their current location, the user can tap the &quot;Return&quot; button.</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> appleParkLatitude <span class="token operator">=</span> <span class="token number">37.334_900</span><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> appleParkLongitude <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">122.009_020</span><br>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> meters <span class="token operator">=</span> <span class="token number">750.0</span><br><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> region <span class="token operator">=</span> <span class="token class-name">MKCoordinateRegion</span><span class="token punctuation">(</span><br>        center<span class="token punctuation">:</span> <span class="token class-name">CLLocationCoordinate2D</span><span class="token punctuation">(</span><br>            latitude<span class="token punctuation">:</span> <span class="token keyword">Self</span><span class="token punctuation">.</span>appleParkLatitude<span class="token punctuation">,</span><br>            longitude<span class="token punctuation">:</span> <span class="token keyword">Self</span><span class="token punctuation">.</span>appleParkLongitude<br>        <span class="token punctuation">)</span><span class="token punctuation">,</span><br>        latitudinalMeters<span class="token punctuation">:</span> <span class="token keyword">Self</span><span class="token punctuation">.</span>meters<span class="token punctuation">,</span><br>        longitudinalMeters<span class="token punctuation">:</span> <span class="token keyword">Self</span><span class="token punctuation">.</span>meters<br>    <span class="token punctuation">)</span><br><br>    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">var</span> locationManager <span class="token operator">=</span> <span class="token class-name">LocationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// This has no effect.</span><br>        <span class="token class-name">MKMapView</span><span class="token punctuation">.</span><span class="token function">appearance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mapType <span class="token operator">=</span> <span class="token punctuation">.</span>hybrid<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">panToCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> location <span class="token operator">=</span> locationManager<span class="token punctuation">.</span>location <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span><br>        <span class="token class-name">Task</span> <span class="token punctuation">{</span> <span class="token attribute atrule">@MainActor</span> <span class="token keyword">in</span><br>            region<span class="token punctuation">.</span>center <span class="token operator">=</span> location<br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">HStack</span> <span class="token punctuation">{</span><br>                <span class="token comment">// To change the text displayed in a `LocationButton`</span><br>                <span class="token comment">// pass it one of the following enum values:</span><br>                <span class="token comment">// `.currentLocation` - "Current Location" (default)</span><br>                <span class="token comment">// `.sendCurrentLocation` - "Send Current Location"</span><br>                <span class="token comment">// `.sendMyCurrentLocation` - "Send My Current Location"</span><br>                <span class="token comment">// `.shareCurrentLocation` - "Share Current Location"</span><br>                <span class="token comment">// `.shareMyCurrentLocation` - "Share My Current Location"</span><br>                <span class="token class-name">LocationButton</span> <span class="token punctuation">{</span><br>                    locationManager<span class="token punctuation">.</span><span class="token function">requestLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                <span class="token punctuation">}</span><br>                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span> <span class="token comment">// defaults to black</span><br>                <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                <span class="token keyword">if</span> locationManager<span class="token punctuation">.</span>location <span class="token operator">!=</span> <span class="token nil constant">nil</span> <span class="token punctuation">{</span><br>                    <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Return"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                        <span class="token function">panToCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                    <span class="token punctuation">}</span><br>                    <span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bordered<span class="token punctuation">)</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token comment">// Display the current location.</span><br>            <span class="token comment">// This updates if the user pans the map.</span><br>            <span class="token keyword">let</span> center <span class="token operator">=</span> region<span class="token punctuation">.</span>center<br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Lat: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">center<span class="token punctuation">.</span>latitude</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, Lng: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">center<span class="token punctuation">.</span>longitude</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br><br>            <span class="token comment">// A binding must be passed so it can be</span><br>            <span class="token comment">// modified if the user pans or zooms the map.</span><br>            <span class="token class-name">Map</span><span class="token punctuation">(</span>coordinateRegion<span class="token punctuation">:</span> $region<span class="token punctuation">,</span> showsUserLocation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><br><br>            <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> locationManager<span class="token punctuation">.</span>location<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span><br>            <span class="token function">panToCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The <code>Map</code> view currently lacks many features found in <a href="https://developer.apple.com/documentation/mapkit/mkmapview?v=1.1.0" rel="noopener" target="_blank">MKMapView</a>. One example is the ability to display a satellite view. Until <code>Map</code> becomes more full-featured, it is useful to wrap <code>MKMapView</code> in <code>UIViewRepresentable</code> to enable it to be used with SwiftUI in place of <code>Map</code>. Code to do this can be found in my <a href="/blog/swift/uikit/#using-a-view-model">UIKit blog page</a>.</p><h2 id="distance-vs.-angle" tabindex="-1">Distance vs. Angle</h2><p>Some MapKit methods require passing distances in meters and others require passing distances in latitude and longitude deltas which are angles.</p><p>A latitude value specifies the north (positive) or south (negative) angle from the equator which circles the Earth midway between the north and south poles. The latitude is zero degrees at the equator, 90 degrees at the north pole, and -90 degrees at the south pole. Positive values are sometimes followed by &quot;N&quot; for North. Negative values are sometimes written without the minus sign and are following by &quot;S&quot; for South.</p><p>A longitude value specifies the east (positive) or west (negative) angle from the Prime Meridian (Greenwich) which runs from the north to south pole, passing through the Royal Observatory in Greenwich, England (near London). The longitude is zero degrees at the Prime Meridian, -180 degrees moving halfway around the Earth to the west, and 180 degrees moving halfway around the Earth to the east. Positive values are sometimes followed by &quot;E&quot; for East. Negative values are sometimes written without the minus sign and are following by &quot;W&quot; for West.</p><p>We can perform conversions between latitude/longitude angles and distances by assuming that the Earth is a perfect sphere. The conversions are approximate because the Earth bulges at the equator and so is not a perfect sphere.</p><p>The average radius of the Earth is 6,371 kilometers or 6,371,000 meters. The circumference of the Earth at the equator is approximately 40,075.017 kilometers. The circumference of the Earth through the poles is approximately 40,007.863 kilometers.</p><p>The distance spanned by a latitude angle of one degree is 1,852 meters regardless of the longitude.</p><p>The distance spanned by a longitude angle varies based on the latitude. One degree of longitude spans a distance of approximately 111.319 kilometers at the equator but spans 0 kilometers at the poles.</p><p>The formula to compute the distance of one degree of longitude at a given latitude is the following where d is the distance, r is the sphere radius, and l is the latitude in degrees:</p><pre><code>d = cos(lπ / 180) * r / 360
</code></pre><p>The values for d and r will have the same unit. For example, if r is given in meters then d will be in meters.</p><h2 id="map-points" tabindex="-1">Map Points</h2><p>MapKit provides the <a href="https://developer.apple.com/documentation/mapkit/mkmappoint?v=1.1.0" rel="noopener" target="_blank">MKMapPoint</a> struct which represents an Earth coordinate that has been projected onto a two-dimensional map.</p><p>To create an <code>MKMapPoint</code> for a given <code>CLLocationCoordinate2D</code> object which holds latitude and longitude values:</p><pre><code>let mapPoint = MKMapPoint(coordinate)
</code></pre><p><code>MKMapPoint</code> objects have the following properties:</p><ul><li><code>x</code>: a <code>Double</code> that is the x-coordinate on a 2D map</li><li><code>y</code>: a <code>Double</code> that is the y-coordinate on a 2D map</li><li><code>coordinate</code>: a <code>CLLocationCoordinate2D</code> that holds the Earth latitude and longitude values</li></ul><p>To calculate the distance between two <code>MKMapPoint</code> objects:</p><pre><code>let distance = mapPoint1.distance(to: mapPoint2)
</code></pre><p>To calculate the distance between to <code>CLLocationCoordinate2D</code> objects:</p><pre><code>let distance = MKMapPoint(coordinate1).distance(to: MKMapPoint(coordinate2))
</code></pre><h2 id="annotations" tabindex="-1">Annotations</h2><p>Annotations are markers that are rendered on a map. The easiest way to add annotations is to use the provided <a href="https://developer.apple.com/documentation/mapkit/mkmarkerannotationview?v=1.1.0" rel="noopener" target="_blank">MKMarkerAnnotationView</a> which displays a pin in a bubble.</p><p>Custom annotations can be created using <a href="https://developer.apple.com/documentation/mapkit/mkannotationview?v=1.1.0" rel="noopener" target="_blank">MKAnnotationView</a>. See the Swiftful Thinking YouTube video <a href="https://www.youtube.com/watch?v=javFZbCYGfc?v=1.1.0" rel="noopener" target="_blank">Custom Map Annotation Pins for SwiftUI MapKit Map</a>.</p><h2 id="overlays" tabindex="-1">Overlays</h2><p>Overlays draw on top of a map. A common example is drawing route lines that indicate how to travel from one location to another.</p><p>The provided subclasses of <a href="https://developer.apple.com/documentation/mapkit/mkoverlayrenderer?v=1.1.0" rel="noopener" target="_blank">MKOverlayRenderer</a> include:</p><ul><li><a href="https://developer.apple.com/documentation/mapkit/mkcirclerenderer?v=1.1.0" rel="noopener" target="_blank">MKCircleRenderer</a> fills and strokes a circle</li><li><a href="https://developer.apple.com/documentation/mapkit/mkpolygonrenderer?v=1.1.0" rel="noopener" target="_blank">MKPolygonRenderer</a> fills and strokes a polygon</li><li><a href="https://developer.apple.com/documentation/mapkit/mkpolylinerenderer?v=1.1.0" rel="noopener" target="_blank">MKPolylineRenderer</a> is like MKPolygonRender but doesn't fill because the shape isn't necessarily closed</li><li><a href="https://developer.apple.com/documentation/mapkit/mkoverlaypathrenderer?v=1.1.0" rel="noopener" target="_blank">MKOverlayPathRenderer</a> renders a shape defined by a CGPath</li><li><a href="https://developer.apple.com/documentation/mapkit/mktileoverlayrenderer?v=1.1.0" rel="noopener" target="_blank">MKTileOverlayRenderer</a> renders a bitmap image over a map tile</li><li><a href="https://developer.apple.com/documentation/mapkit/mkgradientpolygonrenderer?v=1.1.0" rel="noopener" target="_blank">MKGradientPolygonRenderer</a> is like MKPolylineRenderer but uses gradient color</li><li><a href="https://developer.apple.com/documentation/mapkit/mkmultipolygonrenderer?v=1.1.0" rel="noopener" target="_blank">MKMultiPolygonRenderer</a> renders multiple polygons</li><li><a href="https://developer.apple.com/documentation/mapkit/mkmultipolylinerenderer?v=1.1.0" rel="noopener" target="_blank">MKMultiPolylineRenderer</a> renders multiple polylines</li></ul><h2 id="directions" tabindex="-1">Directions</h2><p>Driving and walking directions are available in most cities. But as of 2022, transit directions are only available in around 80 cities. For a list, see <a href="https://www.apple.com/ios/feature-availability/#maps-look-around?v=1.1.0" rel="noopener" target="_blank">iOS and iPadOS 16 Feature Availability</a>. Click the &quot;Transit&quot; link in the &quot;Maps&quot; section. Transit directions are not currently available in London or Paris. Actually I've never been able to get transit directions from the <code>MKDirections</code> <code>calculate</code> method in any city!</p><p>The list also includes many cities outside the U.S. such as Berlin, Germany, London, United Kingdom, and Venice, Italy.</p><p>The <a href="https://developer.apple.com/documentation/mapkit/mklocalsearch?v=1.1.0" rel="noopener" target="_blank">MKLocalSearch</a> class can be used to search for places that match given text and markers for each match can be added to the map.</p><h2 id="look-around" tabindex="-1">Look Around</h2><p>&quot;Look Around&quot; capabilities, introduced in iOS 16, can be added to display street level views. See <a href="https://developer.apple.com/videos/play/wwdc2022/10035/">https://developer.apple.com/videos/play/wwdc2022/10035/</a>.</p><p>Countries and cities for which Look Around support has been added are listed at <a href="https://www.apple.com/ios/feature-availability/#maps-look-around?v=1.1.0" rel="noopener" target="_blank">iOS and iPadOS 16 Feature Availability</a>. Click the &quot;Look Around&quot; link in the &quot;Maps&quot; section.</p><p>The list includes the following U.S. cities:</p><ul><li>Atlanta, Georgia</li><li>Boston, Massachusetts</li><li>Chicago, Illinois</li><li>Denver, Colorado</li><li>Detroit, Michigan</li><li>Dublin, Ireland</li><li>Houston, Texas</li><li>Las Vegas, Nevada</li><li>Los Angeles, California</li><li>Miami, Florida</li><li>New York, New York</li><li>Philadelphia, Pennsylvania</li><li>Phoenix, Arizona</li><li>Portland, Oregon</li><li>San Diego, California</li><li>San Francisco, California</li><li>Santa Cruz, California</li><li>Seattle, Washington</li><li>Washington, D.C.</li></ul><p>When using the Apple Maps app, if Look Around is available for the current map location then a button containing a binocular icon will appear in the lower-left. Tap the button to open a Look Around view. This works in iOS Maps app, but doesn't not seem to work in macOS Maps app.</p><h2 id="map-vs-mkmapview" tabindex="-1">Map vs MKMapView</h2><p>There are two options for displaying maps. UIKit provides <a href="https://developer.apple.com/documentation/mapkit/mkmapview?v=1.1.0" rel="noopener" target="_blank">MKMapView</a>. In iOS 14 MapKit added the SwiftUI view <a href="https://developer.apple.com/documentation/mapkit/map?v=1.1.0" rel="noopener" target="_blank">Map</a>. <code>Map</code> only supports a subset of the features available in <code>MKMapView</code>. For this reason in SwiftUI apps it is often desirable to define a struct that conforms to <code>UIViewRepresentable</code> and wraps access to a <code>MKMapView</code>.</p><p><code>MKMapView</code> supports listening for tap gestures and getting the corresponding map coordinates. <code>Map</code> is not able to do this.</p><p>Both <code>Map</code> and <code>MKMapView</code> support including annotations which are single point markers. <code>MKMapView</code> also supports overlays which are graphical elements like lines, shapes, and images displayed on top of a map. These are often used to draw routes from one map location to another. <code>Map</code> does not support overlays.</p><p><code>MKMapView</code> is able to load custom map tiles for a map background instead of relying on the default map tiles. <code>Map</code> is not able to do this.</p><h2 id="relationships" tabindex="-1">Relationships</h2><p><a href="https://developer.apple.com/documentation/mapkitjs/place?v=1.1.0" rel="noopener" target="_blank">MKPlacemark</a> objects provide a description of a map location. This class inherits from the <code>CLPlacemark</code> class.</p><p><a href="https://developer.apple.com/documentation/corelocation/clplacemark?v=1.1.0" rel="noopener" target="_blank">CLPlacemark</a> objects also provide a description of a map location. The <code>location</code> property is a <code>CLLocation</code></p><p><a href="https://developer.apple.com/documentation/corelocation/cllocation?v=1.1.0" rel="noopener" target="_blank">CLLocation</a> holds latitude, longitude, and course information. The <code>coordinate</code> property has the type <code>CLLocationCoordinate2D</code>.</p><p><a href="https://developer.apple.com/documentation/corelocation/cllocationcoordinate2d?v=1.1.0" rel="noopener" target="_blank">CLLocationCoordinate2D</a> holds latitude and longitude values.</p><p>MKPlacemark -&gt; CLLocation -&gt; CLLocationCoordinate2D</p><h2 id="showing-current-location" tabindex="-1">Showing Current Location</h2><p>To show the current location of the user on the map, add the <code>showUserLocation</code> argument with a value of <code>true</code> to the <code>Map</code> initializer call.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Map</span><span class="token punctuation">(</span><br>    <span class="token operator">...</span><br>     showsUserLocation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>     <span class="token operator">...</span><br><span class="token punctuation">)</span></code></pre><h2 id="tracking-user" tabindex="-1">Tracking User</h2><p>To track the user location on a map, set the Info properties &quot;Privacy - Location When In Use Usage Description&quot; and &quot;Privacy - Location Always and When in Use Usage Description&quot; to strings that describe why permission to track location is being requested.</p><p>Create a <code>Map</code> instance with the following:</p><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> region <span class="token operator">=</span> <span class="token class-name">MKCoordinateRegion</span><span class="token punctuation">(</span><br>  center<span class="token punctuation">:</span> <span class="token class-name">CLLocationCoordinate2D</span><span class="token punctuation">(</span>latitude<span class="token punctuation">:</span> startLat<span class="token punctuation">,</span> longitude<span class="token punctuation">:</span> startLng<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  span<span class="token punctuation">:</span> <span class="token class-name">MKCoordinateSpan</span><span class="token punctuation">(</span>latitudeDelta<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> longitudeDelta<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><br><br><span class="token class-name">Map</span><span class="token punctuation">(</span><br>    coordinateRegion<span class="token punctuation">:</span> $region<span class="token punctuation">,</span><br>    showsUserLocation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    userTrackingMode<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">.</span>follow<span class="token punctuation">)</span><br><span class="token punctuation">)</span><br><span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> someWidth<span class="token punctuation">,</span> height<span class="token punctuation">:</span> someHeight<span class="token punctuation">)</span></code></pre><h2 id="simulator" tabindex="-1">Simulator</h2><p>To simulate a drag event, simply click and drag.</p><p>To zoom in, double-click. To zoom out, hold down the option key and click. Another option is to hold down the option key to display two circles that represent finger touch points. Drag the circles closer together to zoom out and farther apart to zoom in.</p><p>In the Simulator the location defaults to the location of Apple headquarters in Cupertino, California near San Jose. To change this, select Features ... Location ... Custom Location... and enter latitude and longitude values.</p><h2 id="deploying" tabindex="-1">Deploying</h2><p>The <code>Info.plist</code> file in one of my apps needed the following in order to deploy an archive without warnings:</p><pre class="language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><br><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">plist</span> <span class="token name">PUBLIC</span> <span class="token string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="token string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plist</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dict</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>CFBundleDocumentTypes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dict</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>CFBundleTypeName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>MKDirectionsRequest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>LSHandlerRank<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>None<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>LSItemContentTypes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">></span></span><br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>com.apple.maps.directionsrequest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dict</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>ITSAppUsesNonExemptEncryption<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>false</span><span class="token punctuation">/></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span>MKDirectionsApplicationSupportedModes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>MKDirectionsModeBike<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>MKDirectionsModeCar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>MKDirectionsModePedestrian<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dict</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plist</span><span class="token punctuation">></span></span></code></pre><h2 id="more" tabindex="-1">More</h2><p>TODO: Add many more sections!</p></article>