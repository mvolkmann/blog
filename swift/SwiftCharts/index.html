<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Swift Charts</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#example-app">Example App</a></li><li><a href="#marks">Marks</a></li><li><a href="#chart">Chart</a></li><li><a href="#barmark">BarMark</a></li><li><a href="#linemark">LineMark</a></li><li><a href="#pointmark">PointMark</a></li><li><a href="#areamark">AreaMark</a></li><li><a href="#rectanglemark">RectangleMark</a></li><li><a href="#rulemark">RuleMark</a></li><li><a href="#axis-labels">Axis Labels</a></li><li><a href="#legends">Legends</a></li><li><a href="#scrolling">Scrolling</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#animation">Animation</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>Apple introduced the <a href="https://developer.apple.com/documentation/charts?v=1.0.20" rel="noopener" target="_blank">Swift Charts</a> framework in iOS 16.</p><p>&quot;Swift Charts is a powerful and concise SwiftUI framework for transforming your data into informative visualizations. With Swift Charts, you can build effective and customizable charts with minimal code. This framework provides marks, scales, axes, and legends as building blocks that you can combine to develop a broad range of data-driven charts.&quot;</p><p>Swift Charts supports creating bar charts, line charts, area charts, scatter plots, and heat maps.</p><p>Pie charts are not supported. This is an intentional omission based on the opinion that pie charts are often not the best choice for indicating the differences between values that are somewhat close.</p><p>Values to be plotted can be quantitative (<code>Int</code> or <code>Double</code>), nominal (<code>String</code> or enums with <code>String</code> values), or temporal (<code>Date</code> representing a date or time).</p><p>One axis must correspond to quantitative data and the other axis must correspond to either nominal or temporal data. If the y values are quantitative then the chart will be vertical and the x values will be used for x-axis labels. If the x values are quantitative then the chart will be horizontal. and the y values will be used for y-axis labels.</p><p>By default charts occupy all the space made available to them by their parent view.</p><h2 id="resources" tabindex="-1">Resources</h2><p>See the excellent YouTube videos from Stewart Lynch:</p><ul><li><a href="https://www.youtube.com/watch?v=dIvE-E8nlsA?v=1.0.20" rel="noopener" target="_blank">Charts Framework 1 - BarCharts Introduction</a></li><li><a href="https://www.youtube.com/watch?v=lB3poCA8ZN4?v=1.0.20" rel="noopener" target="_blank">Charts Framework 2 - Visualizing Large Data Sets with Bar Charts</a></li></ul><h2 id="example-app" tabindex="-1">Example App</h2><p>See <a href="https://github.com/mvolkmann/ChartsDemo?v=1.0.20" rel="noopener" target="_blank">ChartsDemo</a> which is a SwiftUI app that demonstrates nearly everything shared in the Steward Lynch videos linked above.</p><h2 id="marks" tabindex="-1">Marks</h2><p>Swift Charts supports six kinds of &quot;marks&quot; for creating various kinds of charts. Each of these serve as direct children of the <a href="https://developer.apple.com/documentation/charts/chart?v=1.0.20" rel="noopener" target="_blank">Chart</a> view. They include:</p><ul><li><a href="https://developer.apple.com/documentation/charts/areamark?v=1.0.20" rel="noopener" target="_blank">AreaMark</a></li><li><a href="https://developer.apple.com/documentation/charts/barmark?v=1.0.20" rel="noopener" target="_blank">BarMark</a></li><li><a href="https://developer.apple.com/documentation/charts/linemark?v=1.0.20" rel="noopener" target="_blank">LineMark</a></li><li><a href="https://developer.apple.com/documentation/charts/pointmark?v=1.0.20" rel="noopener" target="_blank">PointMark</a></li><li><a href="https://developer.apple.com/documentation/charts/rectanglemark?v=1.0.20" rel="noopener" target="_blank">RectangleMark</a></li><li><a href="https://developer.apple.com/documentation/charts/rulemark?v=1.0.20" rel="noopener" target="_blank">RuleMark</a></li></ul><p>The initializer for each mark type takes <code>x</code> and <code>y</code> arguments that have the type <a href="https://developer.apple.com/documentation/charts/plottablevalue?v=1.0.20" rel="noopener" target="_blank">PlottableValue</a>. Instances are created by calling the <code>PlottableValue</code> static method <code>value</code> which takes a <code>String</code> label and a value that can be a number (quantitative), <code>String</code> (nominal), or <code>Date</code> (temporal).</p><p>It is typical to iterate over a collection of objects that hold data to be plotted using <code>ForEach</code> and create one or more marks from each object. These objects must conform to the <code>Identifiable</code> protocol which requires an <code>id</code> property.</p><p>If the only child view of the <code>Chart</code> is a <code>ForEach</code>, the collection can be passed to the <code>Chart</code> initializer and the <code>ForEach</code> can be removed.</p><h2 id="chart" tabindex="-1"><code>Chart</code></h2><p>The <a href="https://developer.apple.com/documentation/charts/chart?v=1.0.20" rel="noopener" target="_blank">Chart</a> view contains marks that define the chart to be displayed.</p><p>To set the height of a chart and its background color, apply the <a href="https://developer.apple.com/documentation/charts/chart/chartplotstyle(content:)?v=1.0.20" rel="noopener" target="_blank">chartPlotStyle</a> view modifier to the <code>Chart</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Chart</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><span class="token punctuation">}</span><br><span class="token punctuation">.</span>chartPlotStyle <span class="token punctuation">{</span> plotArea <span class="token keyword">in</span><br>    plotArea<br>        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token punctuation">.</span>yellow<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>To customize the x-axis, apply the <a href="https://developer.apple.com/documentation/charts/chart/chartxaxis(content:)?v=1.0.20" rel="noopener" target="_blank">chartXAxis</a> view modifier. To customize the y-axis, apply the <a href="https://developer.apple.com/documentation/charts/chart/chartyaxis(content:)?v=1.0.20" rel="noopener" target="_blank">chartYAxis</a> view modifier. For more on these, see the &quot;Axis Labels&quot; section below.</p><p>To detect tap and drag gestures on the chart, apply the <a href="https://developer.apple.com/documentation/charts/chart/chartoverlay(alignment:content:)?v=1.0.20" rel="noopener" target="_blank">chartOverlay</a> view modifier. For more on this, see the &quot;Event Handling&quot; section below.</p><h2 id="barmark" tabindex="-1"><code>BarMark</code></h2><p>Instances of the <code>BarMark</code> struct describe individual bars in a bar charts.</p><p>Negative quantitative values cause the bar to be rendered below the typical x-axis..</p><p>Bars can be stacked by including multiple instances with the same nominal or temporal value.</p><p>To assign a different color to each corresponding <code>BarMark</code>, apply the <code>foregroundStyle</code> view modifier. This can be passed a specific <code>Color</code>. To allow Swift Charts to automatically choose a different color for each corresponding <code>BarMark</code>, use <code>.foregroundStyle(by: .value(&quot;some label&quot;, data.someProperty))</code>.</p><p>In bar charts that use temporal data, the unit defaults to <code>.hour</code>. With this unit the axis that represents the temporal values is scaled to accommodate 24 bars in each day. To instead display bars that correspond to entire days, pass the <code>unit</code> argument to the <code>BarMark</code> initializer with a value of <code>.day</code>.</p><p>To annotate a bar, apply the <code>annotation</code> view modifier to a <code>BarMark</code>. By default this renders a given view above the bar. To position the annotation on the center of the bar, pass the <code>position</code> argument with a value of <code>.overlay</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">BarMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> value1<span class="token punctuation">,</span> y<span class="token punctuation">:</span> value2<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">annotation</span><span class="token punctuation">(</span>position<span class="token punctuation">:</span> <span class="token punctuation">.</span>overlay<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data<span class="token punctuation">.</span>quantity</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">bold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="linemark" tabindex="-1"><code>LineMark</code></h2><p>These are used to display line charts.</p><p>To assign a different color to each corresponding <code>LineMark</code>, apply the <code>foregroundStyle</code> view modifier as described in the <code>BarMark</code> section above.</p><p>To display points at the ends of each line, add a <code>PointMark</code> (described in the next section) after each <code>LineMark</code> with the same <code>x</code> and <code>y</code> values.</p><p>An alternative to adding <code>PointMark</code> instances is to apply the <code>symbol</code> view modifier to the <code>LineMark</code> instances. See the examples in the <code>PointMark</code> section below.</p><p>To change the line style, apply the <code>lineStyle</code> view modifier to each <code>LineMark</code>. For example, the following uses a dashed line:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">LineMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> ageCategory<span class="token punctuation">,</span> y<span class="token punctuation">:</span> male<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Male"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Male"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">lineStyle</span><span class="token punctuation">(</span><span class="token class-name">StrokeStyle</span><span class="token punctuation">(</span>lineWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> dash<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>To smooth the lines, apply the <code>interpolationMethod</code> view modifier to each <code>LineMark</code> with the value <code>.monotone</code>, <code>.cardinal</code>, or <code>.catmullRom</code> (formulated by Edwin Catmull and Raphael Rom). For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">LineMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> ageCategory<span class="token punctuation">,</span> y<span class="token punctuation">:</span> male<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Male"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Male"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">interpolationMethod</span><span class="token punctuation">(</span><span class="token punctuation">.</span>catmullRom<span class="token punctuation">)</span></code></pre><h2 id="pointmark" tabindex="-1"><code>PointMark</code></h2><p>These are used to display scatter plots or to add points to line charts.</p><p>To assign a different color to each corresponding <code>PointMark</code>, apply the <code>foregroundStyle</code> view modifier as described in the <code>BarMark</code> section above.</p><p>To display a symbol instead of a filled circle for each point, apply the <code>symbol</code> view modifier to each <code>PointMark</code> passing it a <code>by</code> argument whose value identifies a data series. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">PointMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> ageCategory<span class="token punctuation">,</span> y<span class="token punctuation">:</span> male<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">symbol</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Gender"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Male"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token class-name">PointMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> category<span class="token punctuation">,</span> y<span class="token punctuation">:</span> female<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">symbol</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Gender"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Female"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>The values <code>&quot;Male&quot;</code> and <code>&quot;Female&quot;</code> identify the data series to which each point belongs. These values could come of the data objects rather than being literal values.</p><h2 id="areamark" tabindex="-1"><code>AreaMark</code></h2><p>These are used to display area charts which shade the area below what would otherwise be a line chart.</p><p>There can only be one area on the chart. Shading below two areas with different colors is not currently supported.</p><p>The example app draws one line for male data and one line for female data. Toggling the &quot;Show Area&quot; option causes it to only shade below the male line due to this restriction.</p><h2 id="rectanglemark" tabindex="-1"><code>RectangleMark</code></h2><p>These are used to display heat maps.</p><h2 id="rulemark" tabindex="-1"><code>RuleMark</code></h2><p>These add a vertical line in vertical charts or a horizontal line in horizontal charts. One example use if for indicating the average value.</p><p>To add an text annotation to a <code>RuleMark</code>, apply the <code>annotation</code> view modifier. The following example adds a red, dashed, horizontal line at the y value that is the average of the quantitative values being plotted. The text &quot;Average&quot; appears below this line beginning at its leading end.</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">RuleMark</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Average"</span></span><span class="token punctuation">,</span> average<span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">lineStyle</span><span class="token punctuation">(</span><span class="token class-name">StrokeStyle</span><span class="token punctuation">(</span>lineWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> dash<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">annotation</span><span class="token punctuation">(</span>position<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>         <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Average"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>caption<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span></code></pre><h2 id="axis-labels" tabindex="-1">Axis Labels</h2><p>To customize axis labels, apply the <code>chartXAxis</code> and/or <code>chartYAxis</code> view modifiers to the <code>Chart</code>. Each of these take a closure. If the closure is empty, the axis is hidden.</p><p>To customize axis labels, call <code>AxisMarks</code> inside the previous closure. This takes another closure that is passed a value. Inside this closure, call <code>AxisValueLabel</code> and specify what should be displayed for the given value. To center labels below their bar, pass the <code>centered</code> argument with a value of <code>true</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Chart</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><span class="token punctuation">}</span><br><span class="token punctuation">.</span>chartXAxis <span class="token punctuation">{</span><br>    <span class="token class-name">AxisMarks</span> <span class="token punctuation">{</span> value <span class="token keyword">in</span><br>        <span class="token class-name">AxisValueLabel</span><span class="token punctuation">(</span><br>            format<span class="token punctuation">:</span> <span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            centered<span class="token punctuation">:</span> <span class="token boolean">true</span><br>        <span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="legends" tabindex="-1">Legends</h2><p>By default, a legend is displayed below each chart.</p><p>To hide the legend, apply the <code>chartLegend</code> view modifier to the <code>Chart</code>, passing a value of <code>.hidden</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Chart</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">chartLegend</span><span class="token punctuation">(</span><span class="token punctuation">.</span>hidden<span class="token punctuation">)</span></code></pre><p>To change the legend position, apply the <code>chartLegend</code> view modifier to the <code>Chart</code>, passing the <code>position</code> argument with a value like <code>.top</code>, <code>.trailing</code>, or <code>.leading</code>. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token class-name">Chart</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">chartLegend</span><span class="token punctuation">(</span>position<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span></code></pre><h2 id="scrolling" tabindex="-1">Scrolling</h2><p>To create a chart that is larger that its allocation screen space and can be scrolled horizontally to view all the content:</p><ol><li><p>Embed the <code>Chart</code> in a <code>ScrollView(.horizontal)</code>.</p></li><li><p>Apply the <code>frame</code> view modifier to the <code>ScrollView</code> to set its display width. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">)</span></code></pre></li><li><p>Apply the <code>chartPlotStyle</code> view modifier to the <code>Chart</code> to set the chart width and height. For example:</p><pre class="language-swift"><code class="language-swift"><span class="token punctuation">.</span>chartPlotStyle <span class="token punctuation">{</span> plotArea <span class="token keyword">in</span><br>    plotArea<br>        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token punctuation">.</span>yellow<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span></code></pre></li></ol><p>The y-axis will only be visible when scrolled all the way to the right. The y-axis can be moved to the leading edge of the chart, but then it would only be visible when scrolled all the way to the left. Swift Charts really needs an option to make the y-axis sticky in horizontally scrolling charts and make the x-axis sticky in vertically scrolling charts.</p><p>To scroll vertically instead of horizontally, embed the <code>Chart</code> in a <code>ScrollView</code> without passing <code>.horizontal</code> and set the <code>ScrollView</code> height instead of the width.</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>To listen for tap and drag gestures on a chart, apply the <code>chartOverlay</code> view modifier to the <code>Chart</code>. Note that drag gestures will not be captured if the <code>Chart</code> is inside a <code>ScrollView</code>.</p><p>For example, the following somewhat complex code displays an annotation above a bar chart when dragging across the bars:</p><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">BarChartDemo</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selectedData<span class="token punctuation">:</span> <span class="token class-name">MyDataStruct</span><span class="token operator">?</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">var</span> annotation<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token keyword">let</span> selectedData <span class="token punctuation">{</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>key<span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">selectedData<span class="token punctuation">.</span>quantity</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span>background <span class="token punctuation">{</span><br>            <span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span>continuous<span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>annotationFill<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">var</span> annotationFill<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">ShapeStyle</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> fillColor<span class="token punctuation">:</span> <span class="token class-name">Color</span> <span class="token operator">=</span> colorScheme <span class="token operator">==</span> <span class="token punctuation">.</span>light <span class="token operator">?</span><br>            <span class="token punctuation">.</span>white <span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">.</span>secondarySystemBackground<span class="token punctuation">)</span><br>        <span class="token keyword">return</span> fillColor<span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Chart</span> <span class="token punctuation">{</span><br>            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>objects<span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> index <span class="token keyword">in</span><br>                <span class="token keyword">let</span> object <span class="token operator">=</span> objects<span class="token punctuation">[</span>index<span class="token punctuation">]</span><br>                <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token class-name">PlottableValue</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Key Title"</span></span><span class="token punctuation">,</span> object<span class="token punctuation">.</span>key<span class="token punctuation">)</span><br><br>                <span class="token class-name">BarMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> key<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Quantity"</span></span><span class="token punctuation">,</span> object<span class="token punctuation">.</span>quantity<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>                <span class="token keyword">if</span> object<span class="token punctuation">.</span>key <span class="token operator">==</span> selectedData<span class="token operator">?</span><span class="token punctuation">.</span>key <span class="token punctuation">{</span><br>                    <span class="token class-name">RuleMark</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> key<span class="token punctuation">)</span><br>                        <span class="token punctuation">.</span><span class="token function">annotation</span><span class="token punctuation">(</span>position<span class="token punctuation">:</span> <span class="token function">annotationPosition</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                            annotation<br>                        <span class="token punctuation">}</span><br>                        <span class="token comment">// Display a red, dashed, vertical line.</span><br>                        <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>                        <span class="token punctuation">.</span><span class="token function">lineStyle</span><span class="token punctuation">(</span><span class="token class-name">StrokeStyle</span><span class="token punctuation">(</span>dash<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                  <span class="token punctuation">}</span><br>              <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span>chartOverlay <span class="token punctuation">{</span> proxy <span class="token keyword">in</span> <span class="token function">chartOverlay</span><span class="token punctuation">(</span>proxy<span class="token punctuation">:</span> proxy<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">chartOverlay</span><span class="token punctuation">(</span>proxy<span class="token punctuation">:</span> <span class="token class-name">ChartProxy</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">GeometryReader</span> <span class="token punctuation">{</span> geometry <span class="token keyword">in</span><br>            <span class="token keyword">let</span> areaX <span class="token operator">=</span> geometry<span class="token punctuation">[</span>proxy<span class="token punctuation">.</span>plotAreaFrame<span class="token punctuation">]</span><span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x<br>            <span class="token keyword">return</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>clear<span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">contentShape</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>                <span class="token comment">// Handle tap gestures.</span><br>                <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span> value <span class="token keyword">in</span><br>                    <span class="token keyword">let</span> x <span class="token operator">=</span> value<span class="token punctuation">.</span>x <span class="token operator">-</span> areaX<br>                    <span class="token keyword">if</span> <span class="token keyword">let</span> category<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>atX<span class="token punctuation">:</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                        <span class="token keyword">let</span> data <span class="token operator">=</span> categoryToDataMap<span class="token punctuation">[</span>category<span class="token punctuation">]</span><br>                        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"got tap on"</span></span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><br>                    <span class="token punctuation">}</span><br>                <span class="token punctuation">}</span><br><br>                <span class="token comment">// Handle drag gestures.</span><br>                <span class="token punctuation">.</span><span class="token function">gesture</span><span class="token punctuation">(</span><br>                    <span class="token class-name">DragGesture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>                        <span class="token punctuation">.</span>onChanged <span class="token punctuation">{</span> value <span class="token keyword">in</span><br>                            <span class="token keyword">let</span> x <span class="token operator">=</span> value<span class="token punctuation">.</span>location<span class="token punctuation">.</span>x <span class="token operator">-</span> areaX<br>                            <span class="token keyword">if</span> <span class="token keyword">let</span> category<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>atX<span class="token punctuation">:</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                                selectedData <span class="token operator">=</span> categoryToDataMap<span class="token punctuation">[</span>category<span class="token punctuation">]</span><br>                            <span class="token punctuation">}</span><br>                        <span class="token punctuation">}</span><br>                        <span class="token punctuation">.</span>onEnded <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> selectedData <span class="token operator">=</span> <span class="token nil constant">nil</span> <span class="token punctuation">}</span><br>                <span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="animation" tabindex="-1">Animation</h2></article>