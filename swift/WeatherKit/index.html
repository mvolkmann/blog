<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>WeatherKit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#setup">Setup</a></li><li><a href="#sample-code">Sample Code</a></li><li><a href="#limitations">Limitations</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p>See the WWDC 2022 video <a href="https://developer.apple.com/videos/play/wwdc2022/10003/?v=1.0.20" rel="noopener" target="_blank">Meet WeatherKit</a>.</p><h2 id="setup">Setup</h2><ol><li><p>Browse <a href="https://developer.apple.com?v=1.0.20" rel="noopener" target="_blank">developer.apple.com</a>.</p></li><li><p>Click &quot;Account&quot; and sign in.</p></li><li><p>Click &quot;Certificates, Identifiers &amp; Profiles&quot;.</p></li><li><p>In the left nav, click &quot;Identifiers&quot;.</p></li><li><p>Click the &quot;+&quot; after the heading &quot;Identifiers&quot;.</p></li><li><p>Select the &quot;App IDs&quot; radio button.</p></li><li><p>Click the &quot;Continue&quot; button.</p></li><li><p>Select &quot;App&quot;.</p></li><li><p>Click the &quot;Continue&quot; button.</p></li><li><p>Enter an app description.</p></li><li><p>Paste the app bundle ID.</p></li><li><p>Under &quot;Capabilities&quot;, check the checkbox for WeatherKit.</p></li><li><p>Click the &quot;Continue&quot; button.</p></li><li><p>Click the &quot;App Services&quot; tab.</p></li><li><p>Check the checkbox for WeatherKit.</p></li><li><p>Click the &quot;Continue&quot; button.</p></li><li><p>Click the &quot;Register&quot; button.</p></li><li><p>In Xcode, click the top entry in the Navigator.</p></li><li><p>For each target that will use WeatherKit.</p><ol><li>Select the target.</li><li>Click the &quot;Signing &amp; Capabilities&quot; tab.</li><li>Click the &quot;+&quot; in the upper-left.</li><li>Verify that the correct Team is selected which is listed in the upper-right corner of the <a href="http://developer.apple.com">developer.apple.com</a> web page.</li><li>Find WeatherKit and double-click it.</li></ol></li></ol><p>It may be necessary to wait around 30 minutes for the WeatherKit service to be enabled for your app.</p><h2 id="sample-code">Sample Code</h2><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span><br><span class="token keyword">import</span> <span class="token class-name">WeatherKit</span><br><br><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">private</span> <span class="token keyword">var</span> locationManager <span class="token operator">=</span> <span class="token class-name">LocationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>    <span class="token keyword">let</span> weatherService <span class="token operator">=</span> <span class="token class-name">WeatherService</span><span class="token punctuation">.</span>shared<br>    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> weather<span class="token punctuation">:</span> <span class="token class-name">Weather</span><span class="token operator">?</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">var</span> temperature<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> weather <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">""</span></span> <span class="token punctuation">}</span><br>        <span class="token keyword">let</span> current <span class="token operator">=</span> weather<span class="token punctuation">.</span>currentWeather<br>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>wind<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">var</span> wind<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span><br>        <span class="token keyword">guard</span> <span class="token keyword">let</span> weather <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">""</span></span> <span class="token punctuation">}</span><br>        <span class="token keyword">let</span> current <span class="token operator">=</span> weather<span class="token punctuation">.</span>currentWeather<br>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>wind<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"WeatherKitDemo"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>headline<span class="token punctuation">)</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Temperature: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">temperature</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Wind: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">wind</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> locationManager<span class="token punctuation">.</span>currentLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">do</span> <span class="token punctuation">{</span><br>                <span class="token keyword">if</span> <span class="token keyword">let</span> location <span class="token operator">=</span> locationManager<span class="token punctuation">.</span>currentLocation <span class="token punctuation">{</span><br>                    weather <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> weatherService<span class="token punctuation">.</span><span class="token function">weather</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> location<span class="token punctuation">)</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><br>                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"ContentView.body: error ="</span></span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">ContentView_Previews</span><span class="token punctuation">:</span> <span class="token class-name">PreviewProvider</span> <span class="token punctuation">{</span><br>    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="limitations">Limitations</h2><p>Weather data cannot be retrieved in a preview or in the Simulator. A real device must be used.</p></article>