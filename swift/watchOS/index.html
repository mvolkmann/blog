<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>watchOS</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#project-creation">Project Creation</a></li><li><a href="#example-code">Example Code</a></li><li><a href="#simulator-vs.-devices">Simulator vs. Devices</a></li><li><a href="#app-icons">App Icons</a></li><li><a href="#launch-screen">Launch Screen</a></li><li><a href="#launching-from-a-complication">Launching from a Complication</a></li><li><a href="#display-name">Display Name</a></li><li><a href="#ios-and-watchos-app-pair">iOS and watchOS App Pair</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p>This post explains the steps for creating a watchOS app that runs on an Apple Watch. It also shows how to create and run paired iOS and watchOS apps that can send messages between each other.</p><p>Apple guidelines on watchOS development can be found <a href="https://developer.apple.com/documentation/watchosapps/?v=1.0.22" rel="noopener" target="_blank">here</a>. This begins with &quot;Apple Watch provides easy access to vital information on someoneâ€™s wrist. The watchOS experience focuses on quick actions that achieve useful tasks through brief, punctuated interactions.&quot;</p><p>watchOS supports a subset of SwiftUI. I have not been able to find documentation that identifies that subset. If an app attempts to use a SwiftUI feature in a watchOS app that is not supported, a compile-time error will be displayed.</p><p>watchOS apps can be independent of any iOS app or they can have a companion iOS app. When there is a companion app, they can share data by using the WatchConnectivity framework to send messages.</p><h2 id="project-creation" tabindex="-1">Project Creation</h2><ul><li>Open XCode.</li><li>Select File ... New ... Project...</li><li>Select watchOS.</li><li>Select &quot;Watch App&quot;.</li><li>Click the Next button.</li><li>Enter a product name.</li><li>Select your team.</li><li>Enter your organization identifier.</li><li>Uncheck &quot;Include Notification Scene&quot;.</li><li>Keep the other default values.</li><li>Click the Next button.</li><li>Select the directory where the project will be stored.</li><li>Click the Create button.</li><li>Click the triangle near the upper-left to run the app in the Watch Simulator.</li><li>Verify that it just displays &quot;Hello, World!&quot;.</li></ul><h2 id="example-code" tabindex="-1">Example Code</h2><p>The following code implements a countdown timer app.</p><p><img alt="WatchOS Timer App #1" style="width: 30%" src="/blog/assets/watchOS-timer-app1.png?v=1.0.22" title="WatchOS Timer App #1"> <img alt="WatchOS Timer App #2" style="width: 30%" src="/blog/assets/watchOS-timer-app2.png?v=1.0.22" title="WatchOS Timer App #2"> <img alt="WatchOS Timer App #3" style="width: 30%" src="/blog/assets/watchOS-timer-app3.png?v=1.0.22" title="WatchOS Timer App #3"></p><pre class="language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span><br><br><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isTimerPresented <span class="token operator">=</span> <span class="token boolean">false</span><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> timerValue <span class="token operator">=</span> <span class="token number">5</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Timer"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token class-name">Picker</span><span class="token punctuation">(</span>selection<span class="token punctuation">:</span> $timerValue<span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"5"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"10"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"15"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"30"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>            <span class="token class-name">NavigationLink</span><span class="token punctuation">(</span><br>                destination<span class="token punctuation">:</span> <span class="token class-name">TimerView</span><span class="token punctuation">(</span><br>                    isPresented<span class="token punctuation">:</span> $isTimerPresented<span class="token punctuation">,</span><br>                    timerValue<span class="token punctuation">:</span> timerValue<br>                <span class="token punctuation">)</span><span class="token punctuation">,</span><br>                isActive<span class="token punctuation">:</span> $isTimerPresented<span class="token punctuation">,</span><br>                label<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Start"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span><br>            <span class="token punctuation">)</span><br>                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>green<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">struct</span> <span class="token class-name">TimerView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>    <span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> isPresented<span class="token punctuation">:</span> <span class="token class-name">Bool</span><br>    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> timerValue<span class="token punctuation">:</span> <span class="token class-name">Int</span><br><br>    <span class="token keyword">func</span> <span class="token function-definition function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token class-name">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>withTimeInterval<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> timer <span class="token keyword">in</span><br>            <span class="token keyword">if</span> timerValue <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span><br>                timerValue <span class="token operator">-=</span> <span class="token number">1</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>                timer<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span><br>        <span class="token class-name">VStack</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> timerValue <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Time remaining"</span></span><span class="token punctuation">)</span><br>                    <span class="token punctuation">.</span><span class="token function">onAppear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">timerValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"seconds"</span></span><span class="token punctuation">)</span><br>                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Cancel"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> isPresented <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><br>                    <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Done"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> isPresented <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><hr><p>eleventyNavigation: key: Apple Watch (watchOS) parent: Swift order: 4 layout: topic-layout.njk</p><hr><h2 id="simulator-vs.-devices" tabindex="-1">Simulator vs. Devices</h2><p>Running on the Simulator is fairly fast and is preferred for most testing.</p><p>To deploy a watchOS app to an Apple Watch:</p><ul><li>Attach the iPhone with which it is paired to the Mac using a USB cable.</li><li>Select the iPhone from the device dropdown at the top of Xcode.</li><li>Press the triangle run button.</li><li>It may be necessary to unlock the iPhone.</li><li>If a message says &quot;The OS version installed ... does not support WatchKit App products&quot;, try ejecting the phone from the Finder and plugging it into a different USB port.</li><li>When it finally works, it can take several minutes before the app appears on the watch.</li></ul><h2 id="app-icons" tabindex="-1">App Icons</h2><p>To add app icons to a watchOS app:</p><ul><li>Open the file <code>Assets.xcassets</code>.</li><li>Click the &quot;+&quot; button in the lower-left.</li><li>Select watchOS ... watchOS App Icon.</li><li>Drag icon images for all the sizes onto the placeholder squares.</li></ul><h2 id="launch-screen" tabindex="-1">Launch Screen</h2><p>watchOS apps do not currently support launch screens. When an app launches, it's icon is displayed inside an indeterminate, circular status bar. See <a href="https://stackoverflow.com/questions/69113082/how-can-we-add-a-launch-screen-to-a-watch-app">https://stackoverflow.com/questions/69113082/how-can-we-add-a-launch-screen-to-a-watch-app</a>.</p><h2 id="launching-from-a-complication" tabindex="-1">Launching from a Complication</h2><p>To create a watch face complication that launches a custom app when tapped:</p><ol><li>Open the &quot;Watch&quot; app on the iPhone that is paired with the watch.</li><li>Tap the &quot;My Watch&quot; tab on the bottom navigation.</li><li>Select a watch face that supports complications.</li><li>Scroll down to the &quot;Complications&quot; section.</li><li>Tap a complication.</li><li>Scroll to the custom app and tap it.</li></ol><p>The app icon should appear as the complication icon, but all I see so far is two dashes in its place. Perhaps this happens because the app was not downloaded from the store or perhaps it is a watchOS bug.</p><h2 id="display-name" tabindex="-1">Display Name</h2><p>To change the display name of a watchOS app:</p><ol><li>Select the top entry in the Navigator.</li><li>Under TARGETS, select the target whose name ends in &quot; App&quot;.</li><li>Change the value of &quot;Display Name&quot;.</li><li>Deploy the app again.</li></ol><h2 id="ios-and-watchos-app-pair" tabindex="-1">iOS and watchOS App Pair</h2><p>To create an app that runs on both an iPhone and Apple Watch (companion apps):</p><ol><li>In Xcode, select File ... New ... Project...</li><li>Select the &quot;watchOS&quot; tab.</li><li>Select &quot;App&quot;.</li><li>Click the &quot;Next&quot; button.</li><li>Enter a project name.</li><li>Select the &quot;Watch App with New Companion iOS App&quot; radio button.</li><li>Click the &quot;Next&quot; button.</li><li>Select the directory where the project will be saved.</li><li>Click the &quot;Create&quot; button.</li></ol><p>The iOS app is defined by files in the &quot;{project-name}&quot; directory. The watchOS app is defined by files in the &quot;{project-name} WatchKit Extension&quot; directory.</p><p>To share data between these apps, use the WatchConnectivity framework. See <a href="https://www.youtube.com/watch?v=i3_6m0a5ovw">https://www.youtube.com/watch?v=i3_6m0a5ovw</a>.</p><ol><li>Select the top item in the Navigator.</li><li>Under &quot;TARGETS&quot;, select the first target.</li><li>Select the &quot;General&quot; tab.</li><li>In the &quot;Frameworks, Libraries, and Embedded Content&quot; section, click the &quot;+&quot; button, select &quot;WatchConnectivity.framework&quot;, and click the &quot;Add&quot; button.</li></ol><p>To make some of the iOS source files also available to watchOS:</p><ol><li>Click the top item in the Navigator.</li><li>Under &quot;TARGETS&quot;, select the target whose name ends with &quot; WatchKit Extension&quot;.</li><li>Click the &quot;Build Phases&quot; tab.</li><li>Open the &quot;Compile Sources&quot; section.</li><li>Click the &quot;+&quot; at the bottom of the section.</li><li>Select the files Data.swift, ConnectionProvider.swift, and ViewModel.swift.</li><li>Click the &quot;Add&quot; button.</li></ol><p>To create a pair of simulators (one iPhone and one Apple Watch) that can be launched together:</p><ol><li><p>Click the device dropdown at the top of Xcode.</p></li><li><p>Select &quot;Add Additional Simulators...&quot; which opens a dialog.</p></li><li><p>Enter a name such as &quot;iPhone 14 Pro + Apple Watch 7&quot;.</p></li><li><p>Select the phone device type such as &quot;iPhone 14 Pro&quot;.</p></li><li><p>Check the &quot;Paired Apple Watch&quot; checkbox.</p></li><li><p>Click the &quot;Next&quot; button.</p></li><li><p>Select a Watch model from the &quot;Device Type&quot; dropdown.</p></li><li><p>Click the &quot;+&quot; at the bottom of the left nav.</p></li><li><p>Select an iPhone model from the &quot;Device Type&quot; dropdown such as &quot;Apple Watch Series 7 (45mm)&quot;.</p></li><li><p>Select an OS version from the &quot;OS Version&quot; dropdown such as &quot;watchOS 9.0&quot;.</p></li><li><p>Click the &quot;Create&quot; button.</p></li><li><p>The new simulator should appear in the list on the left of the dialog.</p></li><li><p>Close the dialog.</p></li><li><p>Select the newly created simulator pair name from the device dropdown.</p></li></ol><p>To run both the iPhone and Apple Watch apps in the Simulator:</p><ol><li>Select the Simulator created above from the device dropdown at the top.</li><li>Press the play button (triangle) to run the iOS app in the Simulator.</li><li>Click the dropdown at the top that is displaying the current app name.</li><li>Select the entry that begins with the app name and ends with &quot; WatchKit App&quot;.</li><li>Press the play button (triangle) again to run the watchOS app in the Simulator.</li><li>The debug console at the bottom will show the output from one of the apps. To see output from the other app, select it from the app name dropdown at the top of the debug console.</li></ol><p>To run on real devices, enable developer mode on both the phone and watch. On the phone, ADD THIS DETAIL. On the watch, launch the Settings app and select Privacy &amp; Security ... Developer Mode and toggle it on.</p><p>For an example app, see <a href="https://github.com/mvolkmann/watch-with-ios-2?v=1.0.22" rel="noopener" target="_blank">watch-with-ios-2</a> in GitHub.</p></article>