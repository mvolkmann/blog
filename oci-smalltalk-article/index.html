<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>ZZZ article</h2><aside><nav class="toc"><ol><li><a href="#enter-smalltalk">Enter Smalltalk</a></li><li><a href="#a-bit-of-history">A Bit of history</a></li><li><a href="#smalltalk-development-environment">Smalltalk development environment</a></li><li><a href="#why-learn-smalltalk-now%3F">Why learn Smalltalk now?</a></li><li><a href="#taste-cuis-smalltalk">Taste Cuis Smalltalk</a></li><li><a href="#resources">Resources</a></li></ol></nav></aside><article><h1 id="lessons-from-smalltalk" tabindex="-1">Lessons from Smalltalk</h1><p>&quot;The further backward you can look, the further forward you are likely to see.&quot; â€” Winston Churchill</p><p>&quot;The single most important thing I have learned about software development over my career is that if you do not aggressively fight complexity, it will eat you alive.&quot; - Vicki Boykis</p><h2 id="enter-smalltalk" tabindex="-1">Enter Smalltalk</h2><p>The Smalltalk programming language was created at Xerox PARC (Palo Alto Research Center) in the 1970s. It is a purely object-oriented programming (OOP) language. Everything is represented by an object that is an instance of some class. This includes classes themselves and all the GUI elements in the development environment. Everything happens by sending messages to objects. The objects decide whether and how to act on the messages.</p><p>Smalltalk was the first programming language to make OOP popular. In the 1990's the popularity of Smalltalk had risen enough that it was seen as an alternative to C++. In 1995 Smalltalk had a 15% market share compared to 71% for C++.</p><p>The characteristic of Smalltalk that first attracted me is its simple, minimal syntax. The entire syntax of Smalltalk can be demonstrated on a post card.</p><p><img alt="Smalltalk on a post card" src="/blog/assets/smalltalk-on-postcard.jpg?v=1.1.1"></p><p>Smalltalk is a dynamically typed language. Types of variables, method parameters, and method return types are never specified. Instead, duck typing is used. Any object can be used as long as it is able to respond to all the messages that are sent to it. This is determined at run-time.</p><p>Running Smalltalk programs requires two parts, a virtual machine (VM) and an image file. The VM reads and executes Smalltalk code found in an image file. It is specific to the operating system and CPU architecture being used.</p><p>Image files can be moved between operating systems on different CPU architectures. It will render the same windows, pixel for pixel, across Windows, Linux, and MacOS, only differing based on screen size. There is no need to recompile code for different environments. This makes Smalltalk code highly portable.</p><p>An image file can be thought of as a snapshot of the current state of the development environment. It describes the collection of all active objects. During development, changes can be saved to the current image or to a new image.</p><p>Today Smalltalk is still used by the financial industry, manufacturing, utilities, transportation, and academia.</p><h2 id="a-bit-of-history" tabindex="-1">A Bit of history</h2><p>Squeak Smalltalk, released in 1996, was the first free, open-source implementation. Until then all Smalltalk implementations were commericial and expensive. The Java programming language was released in 1995 and was free. That removed most of the wind from Smalltalk sails and for most part it receded into the history of computer programming.</p><p>However, Smalltalk is alive and well outside the United States. Two free, open-source forks of Squeak have been created, Pharo and Cuis.</p><p>Pharo Smalltalk was created in France and aims to provide a more comprehensive set of features than Squeak.</p><p>Cuis Smalltalk was created in Argentina and aims to remain small and easy to learn. Missing features can be defined by combining the features that are present and by installing more packages. The Cuis mascot is southern mountain cavy found in Argentina which is a tailless rodent that looks similar to a very large mouse. The word &quot;cuis&quot; in Rioplatense Spanish means &quot;squeak&quot;.</p><p>Squeak, Pharo, and Cuis all use the MIT license.</p><p>There are also many commercial Smalltalk implementations including Cincom Smalltalk, GemStone/S, and VA Smalltalk.</p><h2 id="smalltalk-development-environment" tabindex="-1">Smalltalk development environment</h2><p>Smalltalk is perhaps most known for its incredible development tools. These support:</p><ul><li>finding code in many ways</li><li>a live environment where code changes are immediately reflected (no need to recompile or restart the environment)</li><li>debugging with the ability to modify code and data, then continue or restart</li><li>ability to modify the classes and methods that implement the development environment as easily as modifying your own classes and methods</li><li>inspecting objects to see their class and instance variables</li><li>rapid prototyping</li></ul><h2 id="why-learn-smalltalk-now%3F" tabindex="-1">Why learn Smalltalk now?</h2><p>Learning Smalltalk will enable you to:</p><ul><li>Gain an understanding of its pros and cons compared to other languages.</li><li>Get ideas for features that can be added to other languages.</li><li>Get ideas for features that can be added in the development environments of other languages.</li><li>Actually use it as an alternative to other languages.</li><li>Have fun!</li></ul><h2 id="taste-cuis-smalltalk" tabindex="-1">Taste Cuis Smalltalk</h2><p>To really get a feel for what it's like to use Smalltalk, you have to try it. So follow the instructions below to install, launch, and use Cuis Smalltalk.</p><p>To install Cuis Smalltalk:</p><ol><li>Browse the <a href="https://cuis.st" target="_blank">Cuis Smalltalk home page</a>.</li><li>Click the &quot;Download&quot; link at the top of the page.</li><li>Click &quot;Cuis Stable Release&quot; or &quot;Cuis Rolling Release&quot;. The later is recommended so you can obtain updates by simply running <code>git pull</code>. Both lead to a GitHub repository.</li><li>Clone the repository. If the rolling release was selected, this will create the directory <code>Cuis-Smalltalk-Dev</code>.</li></ol><p>To start Cuis Smalltalk, run the appropriate start script found in the installed directory based on your operating system.</p><ul><li>For Windows, open a Command Prompt and enter <code>RunCuisOnWindows.bat</code></li><li>For Linux, open a Terminal and enter <code>./RunCuisOnLinux.sh</code></li><li>For macOS, open a Terminal and enter <code>./RunCuisOnMacTerminal.sh</code> Alternatively, double-click the file <code>Cuis7.1-6770.image</code> in the <code>CuisImage</code> subdirectory.</li></ul><p>On macOS, if starting Cuis Smalltalk is blocked, follow these steps:</p><ol><li>Open the System Settings app.</li><li>Select &quot;Privacy &amp; Security&quot;.</li><li>Scroll down to the &quot;Security&quot; section.</li><li>Look for the message '&quot;CuisVM.app&quot; was blocked from use because it is not from an identified developer.'</li><li>Click the &quot;Open Anyway&quot; button.</li><li>Click the &quot;Open&quot; button in the next dialog that appears.</li><li>Select the file <code>Cuis*.image</code> found in the subdirectory as <code>CuisImage</code>.</li><li>Click the &quot;Open&quot; button.</li></ol><p>The window that appears has a blue background by default. This is referred to as the &quot;World&quot;. Clicking the World opens the World menu. Click &quot;Open&quot; to see a submenu of windows that can be opened inside the World. We will look at three of these: Workspace, Browser, Message Names, and Transcript.</p><p>A Workspace is a window for experimenting with Smalltalk code. It is similar to a read-eval-print-loop (REPL) in other programming languages. Open a Workspace and enter the expressions shown in the following screenshot.</p><p><img alt="Cuis Smalltalk Workspace session" src="/blog/assets/cuis-workspace-session.png?v=1.1.1" style="width: 50%"></p><p>There are shortcut keys for many actions. In macOS, these use the command key (cmd). In other platforms these use the control key. All the examples that follow use the command key, so substitute the control key if you are not using a Mac.</p><p>With the cursor positioned at the end of an expression, right-click and select &quot;Do it&quot; (cmd-d) or &quot;Print it&quot; (cmd-p). Selecting &quot;Do it&quot; evaluates the expression, but does not output its value. Selecting &quot;Print it&quot; evaluates the expression and outputs its value immediately after the expression in the Workspace. The result will be selected, so pressing the delete key will remove it.</p><p>The first expression sends the unary message <code>asUppercase</code> to the literal string <code>'demo'</code>.</p><p>The second expression sends the binary message <code>+</code> to the number <code>2</code> with the argument <code>3</code>.</p><p>The next three expressions demonstrate working with a <code>Dictionary</code>, which is called a <code>Map</code> or <code>HashMap</code> in other programming languages. The expression <code>city := Dictionary new</code> sends the message <code>new</code> to the <code>Dictionary</code> class which returns a new instance. The syntax <code>:=</code> is automatically change to a left pointing arrow. The expression <code>city at: 'Kansas City' put: 'Chiefs'</code> sends the keyword message <code>at:put:</code> to <code>cityToTeam</code> which adds a key/value pair to the <code>Dictionary</code>. The expression <code>city at: 'Kansas City'</code> sends the keyword message <code>at:</code> to the <code>Dictionary</code> which returns the value at the specified key.</p><p>The last expression, <code>#(1 2 3 4) average</code>, returns the <code>Fraction</code> <code>5/2</code> rather than a <code>Float</code> in order to preserve accuracy. It does this because the <code>average</code> method returns the result of an integer division. The syntax <code>#(1 2 3 4)</code> creates a compile-time <code>Array</code>. <code>average</code> is an instance method defined in the <code>Collection</code> class which is a superclass of the <code>Array</code> class.</p><p>We can examine the implementation of the <code>average</code> method. To do so, open a Browser. Brower windows contains four panes across the top row.</p><ul><li>The first pane displays a list of class categories.</li><li>The second pane displays a list of classes in the selected class category. There are three buttons at the bottom of this pane.<ul><li>The &quot;instance&quot; button causes the remaining panes to show instance information.</li><li>The &quot;?&quot; button causes the bottom pane to display the comment for the selected class.</li><li>The &quot;class&quot; button causes the remaining panes to show class information.</li></ul></li><li>The third pane displays a list of method categories in the selected class.</li><li>The fourth pane displays a list of methods in the selected method category.</li></ul><p>Move the mouse cursor over the first pane and press cmd-f. Enter &quot;Array&quot; and press return. The <code>Array</code> class will be selected in the second pane.</p><p><img alt="Cuis Smalltalk Browser" src="/blog/assets/cuis-browser.png?v=1.1.1" style="width: 100%"></p><p>There is no method named <code>average</code> in the <code>Array</code> class, so it must be defined in a superclass, but which one? Right-click &quot;Array&quot; in the second pane and select &quot;browse hierarchy&quot; to open a Hierarchy Browser. This shows that <code>Array</code> is a subclass of <code>ArrayedCollection</code> which is a subclass of <code>SequenceableCollection</code> which is a subclass of <code>Collection</code>. We could check each of those classes to find the one that defines the <code>average</code> method. But there's another way.</p><p>Open a &quot;Message Names&quot; window, and enter &quot;average&quot; in the &quot;Search&quot; input. This lists three methods whose names contain &quot;average&quot; which are <code>average</code>, <code>average:</code>, and <code>average:ifEmpty</code>. Select the first one. This shows that the only class that defines the selected method is <code>Collection</code>. Click &quot;Collection average&quot; in that window to see its implementation. The up arrow character specifies a value to be returned from a method. This method returns the result of sending the message <code>mean</code> to <code>self</code> which is the <code>Collection</code> instance. Double-click &quot;mean&quot; to select it and press cmd-b to &quot;Browse it&quot;. This opens a new window that shows the method implementation which returns the result of divding <code>self sum</code> by <code>self size</code>.</p><p><img alt="Cuis Smalltalk Array average" src="/blog/assets/cuis-array-average.png?v=1.1.1" style="width: 100%"></p><p>What we have learned from this is that all the code can be easily browsed. This includes code that you write and code in provided classes.</p><p>For our final exercise we will create a new class and use it.</p><ul><li><p>Open a Browser.</p></li><li><p>Right-click in the first pane and select &quot;add item...&quot;.</p></li><li><p>Enter your last name to create a class category with that name.</p></li><li><p>In the bottom pane, replace &quot;NameOfSubclass&quot; with &quot;Dog&quot;, keeping the leading <code>#</code>.</p></li><li><p>Add the instance variables <code>breed</code> and <code>name</code> to the <code>Dog</code> class by changing the value after <code>instanceVariableNames</code> to <code>'breed name'</code>.</p></li><li><p>Press cmd-s to save the changes.</p></li><li><p>You will prompted to enter your initials and full name so Cuis Smalltalk can track who made each change.</p></li><li><p>Right-click the class name <code>Dog</code> in the second pane and select &quot;more...create inst var accessors&quot;. This creates the instance methods <code>breed</code> (gets value), <code>breed:</code> (sets value), and <code>name:</code> (sets value), all in the method category &quot;accessing&quot;. It does not create the instance method <code>name</code> because that already exists in the superclass <code>Object</code>. But we want to override that.</p></li><li><p>Click &quot;accessing&quot; in the third pane.</p></li><li><p>Enter the following in the bottom pane and save it.</p><pre class="language-smalltalk"><code class="language-smalltalk">name<br>    <span class="token operator">^</span>name</code></pre></li><li><p>Right-click in the third pane and select &quot;new category...&quot;.</p></li><li><p>Select &quot;asString&quot;.</p></li><li><p>Enter the following in the bottom lpane and save it.</p><pre class="language-smalltalk"><code class="language-smalltalk">asString<br>    <span class="token operator">^</span><span class="token string">'{1} is a {2}.'</span> format<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">.</span> breed <span class="token punctuation">}</span></code></pre></li><li><p>Click the &quot;class&quot; button at the bottom of the second pane.</p></li><li><p>Right-click in the third pane and select &quot;new category...&quot;.</p></li><li><p>Select &quot;instance creation&quot;.</p></li><li><p>Enter the following in the bottom lpane and save it.</p><pre class="language-smalltalk"><code class="language-smalltalk">newName<span class="token punctuation">:</span> nameString breed<span class="token punctuation">:</span> breedString<br>    <span class="token temporary-variables"><span class="token punctuation">|</span> <span class="token variable">dog</span> <span class="token punctuation">|</span></span><br>    dog <span class="token operator">:=</span> Dog <span class="token keyword">new</span><span class="token punctuation">.</span><br>    dog name<span class="token punctuation">:</span> nameString<span class="token punctuation">.</span><br>    dog breed<span class="token punctuation">:</span> breedString<span class="token punctuation">.</span><br>    <span class="token operator">^</span>dog<span class="token punctuation">.</span></code></pre></li><li><p>Open a Workspace.</p></li><li><p>Enter the following statements:</p><pre class="language-smalltalk"><code class="language-smalltalk">myDog <span class="token operator">:=</span> Dog newName<span class="token punctuation">:</span> <span class="token string">'Comet'</span> breed<span class="token punctuation">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">.</span><br>myDog print<span class="token punctuation">.</span></code></pre></li><li><p>Select both lines in the Workspace and &quot;Do it&quot;.</p></li><li><p>TODO: Do you need to open a Transcript first?</p></li><li><p>TODO: Why does this just print &quot;a Dog&quot;?</p></li></ul><p>There's much more to learn. See my extensive set of <a href="https://mvolkmann.github.io/blog/" target="_blank">blog pages on Smalltalk</a>. Click &quot;Smalltalk&quot; in the hamburger menu to see a long list of subtopics.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk in Wikipedia</a></p></li><li><p><a href="https://archive.org/details/byte-magazine-1981-08" target="_blank">Byte Magazine issue on Smalltalk</a></p></li><li><p><a href="https://cuis.st" target="_blank">Cuis Smalltalk</a></p></li><li><p><a href="https://pharo.org" target="_blank">Pharo Smalltalk</a></p></li><li><p><a href="https://squeak.org" target="_blank">Squeak Smalltalk</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL6601A198DF14788D" target="_blank">Squeak from the very start</a> YouTube videos by Lawson English</p></li></ul><p>The following recent podcast episodes discuss Smalltalk:</p><ul><li><a href="https://www.youtube.com/watch?v=sokb6zZC-ZE&t=3105s" target="_blank">Cuis Smalltalk and the History of Computingâ€™s Future</a> with Juan Vuletich</li><li><a href="https://podcasts.apple.com/us/podcast/software-unscripted/id1602572955?i=1000656742775" target="_blank">A Haskller Tries Smalltalk</a> with Ian Jeffries</li><li><a href="https://podcasts.apple.com/us/podcast/software-unscripted/id1602572955" target="_blank">Smalltalk's Past, Present, and Future</a> with Juan Vuletich</li></ul></article>