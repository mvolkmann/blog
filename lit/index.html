<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Lit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#resources">Resources</a></li><li><a href="#used-by">Used By</a></li><li><a href="#installing">Installing</a></li><li><a href="#tooling">Tooling</a></li><li><a href="#basic-example">Basic Example</a></li><li><a href="#counter">Counter</a></li><li><a href="#properties">Properties</a></li><li><a href="#state">State</a></li><li><a href="#decorators">Decorators</a></li><li><a href="#refs">Refs</a></li><li><a href="#tagged-template-literals">Tagged Template Literals</a></li><li><a href="#slots">Slots</a></li><li><a href="#lifecycle">Lifecycle</a><ol><li><a href="#shouldupdate">shouldUpdate</a></li><li><a href="#willupdate">willUpdate</a></li><li><a href="#update">update</a></li><li><a href="#render">render</a></li><li><a href="#firstupdated">firstUpdated</a></li><li><a href="#updated">updated</a></li><li><a href="#adoptedcallback">adoptedCallback</a></li><li><a href="#haschanged">hasChanged</a></li><li><a href="#updatecomplete">updateComplete</a></li><li><a href="#performupdate">performUpdate</a></li><li><a href="#requestupdate">requestUpdate</a></li></ol></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#context">Context</a></li><li><a href="#async-tasks">Async Tasks</a></li><li><a href="#localization">Localization</a></li><li><a href="#chess-board-example">Chess Board Example</a></li><li><a href="#markdown">Markdown</a></li><li><a href="#type-inference">Type Inference</a></li><li><a href="#errors-detected">Errors Detected</a></li><li><a href="#lit-labs">Lit Labs</a></li><li><a href="#publishing-components">Publishing Components</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><figure style="width: 50%"><img alt="Lit logo" style="border: 0" src="/blog/assets/lit-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://lit.dev?v=1.1.1" rel="noopener" target="_blank">Lit</a> is library that simplifies developing <a href="/blog/topics/#/blog/web-components/?v=1.1.1" rel="noopener" target="_blank">web components</a> compared to using only standard browser APIs.</p><p>Other popular options include:</p><ul><li><p><a href="https://stenciljs.com?v=1.1.1" rel="noopener" target="_blank">Stencil</a>,</p></li><li><p><a href="https://enhance.dev?v=1.1.1" rel="noopener" target="_blank">Enhance</a>, and</p></li><li><p><a href="https://github.com/11ty/webc?v=1.1.1" rel="noopener" target="_blank">WebC</a>.</p></li><li><p><a href="https://hybrids.js.org/?v=1.1.1" rel="noopener" target="_blank">hybrids</a></p><p>&quot;It's based on plain objects and pure functions.&quot;</p></li></ul><p>Lit components are native web components, so they can be used everywhere web components can be used.</p><p>The Lit library is implemented in TypeScript. Lit components can be implemented in JavaScript or TypeScript. When using JavaScript, no build step is required.</p><p>JavaScript does not yet support decorator syntax. TypeScript must be used to take advantage of Lit decorators, which simplify the code.</p><p>Lit provides a large amount of functionality that goes well beyond just implementing web components for their reusability across web frameworks. Lit can be used as a replacement for SPA frameworks like React, Svelte, Vue, and Angular. Whether using Lit in this way is a good idea is debatable.</p><h2 id="resources" tabindex="-1">Resources</h2><ul><li><p><a href="https://lit.dev?v=1.1.1" rel="noopener" target="_blank">Lit home page</a></p></li><li><p><a href="https://www.youtube.com/@buildWithLit?v=1.1.1" rel="noopener" target="_blank">Build With Lit</a> YouTube channel</p><p>See the playlists &quot;Build it with Lit&quot;, &quot;Lit University&quot;, and &quot;Talks&quot;</p></li><li><p><a href="https://htmlwithsuperpowers.netlify.app?v=1.1.1" rel="noopener" target="_blank">HTML with Superpowers</a> introduction to web components from Dave Rupert</p><p>See examples on the &quot;Using&quot; page that include &quot;details-utils&quot; and &quot;two-up&quot;.</p></li></ul><h2 id="used-by" tabindex="-1">Used By</h2><p>Companies reportedly using Lit include Adobe, Cisco, Ford, GitHub, IBM, IKEA, Lego, Microsoft, Netflix, Red Hat, Reddit, SAP, VMware, and many more.</p><p>Abobe uses Lit in Photoshop for the Web.</p><p>Google uses Lit for Chrome DevTools.</p><h2 id="installing" tabindex="-1">Installing</h2><p>The easiest way to get started using Lit is to get the library from this <a href="https://cdn.jsdelivr.net/gh/lit/dist@3/core/lit-core.min.js?v=1.1.1" rel="noopener" target="_blank">CDN</a>. This single file can be saved locally to avoid depending on the CDN. The minimized, compressed file is only 5.8 KB.</p><p>Another approach is to use <a href="https://vitejs.dev/?v=1.1.1" rel="noopener" target="_blank">Vite</a>. This has many advantages including:</p><ul><li>configuration to use TypeScript</li><li>running in watch mode so code changes are automatically recompiled</li><li>automatic browser updates</li></ul><p>The following steps create a new project that uses Vite and Lit.</p><ol><li><p>Enter <code>npm create vite@latest</code>.</p></li><li><p>If prompted with &quot;OK to proceed?&quot;, press the return key.</p></li><li><p>After the &quot;Project name&quot; prompt, enter a project name.</p></li><li><p>For the &quot;Select a framework&quot; prompt, select &quot;Lit&quot;.</p></li><li><p>For the &quot;Select a variant&quot; prompt, select &quot;TypeScript&quot;.</p></li><li><p>cd to the new project directory.</p></li><li><p>Install dependencies by entering <code>npm install</code> or <code>bun install</code>.</p></li><li><p>Run the project by entering <code>npm run dev</code> or <code>bun dev</code>.</p><p>Currently running <code>bun dev</code> in macOS gives the error &quot;Cannot find module @rollup/rollup-darwin-x64&quot;. It should be looking for the ARM version, not the x64 version. A workaround is to use <code>npm run dev</code> for now.</p></li><li><p>Type &quot;h&quot; and press the return key for help.</p></li><li><p>Type &quot;o&quot; and press the return key to open a browser tab for localhost:5173.</p></li></ol><h2 id="tooling" tabindex="-1">Tooling</h2><p>ESLint has a plugin for Lit at <a href="https://github.com/43081j/eslint-plugin-lit#readme?v=1.1.1" rel="noopener" target="_blank">eslint-plugin-lit</a>. To use this, enter <code>npm install -D *</code> where * each of the following:</p><ul><li><code>eslint</code></li><li><code>@typescript-eslint/parser</code></li><li><code>@typescript-eslint/eslint-plugin</code></li><li><code>eslint-plugin-lit</code></li></ul><p>Create the file <code>.eslintrc.json</code> containing the following:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">,</span><br>    <span class="token string">"plugin:lit/recommended"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span><br>  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span><br>    <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Add the following script in <code>package.json</code>:</p><pre class="language-json"><code class="language-json"><span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint --cache --ext=.js,.ts --fix src"</span><span class="token punctuation">,</span></code></pre><p>Add the line <code>.eslintcache</code> in <code>.gitignore</code>.</p><p>VS Code has an extension for Lit that provides syntax highlighting, type checking, code completion, and checks for improperly closed tags. See <a href="https://marketplace.visualstudio.com/items?itemName=runem.lit-plugin?v=1.1.1" rel="noopener" target="_blank">lit-plugin</a>.</p><p>Neither the ESLint plugin nor the VS Code extension detect errors in <code>html</code> and <code>css</code> tagged template literals. For example, <code>&lt;foo&gt;bar&lt;/baz&gt;</code> is not flagged. In addition, Emmet expansions cannot be used inside these tagged template literals.</p><h2 id="basic-example" tabindex="-1">Basic Example</h2><p>The following code from the file <code>src/greet-message.ts</code> implements a basic custom element using Lit and TypeScript. Using TypeScript provides type checking in code editors like VS Code.</p><p>Using TypeScript also allows the use of decorators like <code>@customElement</code> and <code>@property</code>. The <code>@customElement</code> decorator assigns a name to the custom element. The <code>@property</code> decorator can declare attributes that can be applied to the custom element.</p><p>Lit components must extend the <code>LitElement</code> class. The <code>LitElement</code> class extends the <code>ReactiveElement</code> class (from Lit), which extends the <code>HTMLElement</code> class (from the HTML standard).</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token comment">// The class name is not required to match the custom element name.</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// This value will come from an HTML attribute.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Checking for required attributes is optional.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// The `styles` property can be defined anywhere in</span><br>  <span class="token comment">// the class definition, not just at the bottom.</span><br>  <span class="token comment">// Making it "static" shares the value across all instances.</span><br>  <span class="token comment">// :host refers to outermost element rendered by this custom element.</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      color: purple;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Note how the <code>HTMLElement</code> <code>attachShadow</code> method is not called. The <code>LitElement</code> superclass takes care of that for you.</p><p>The following code from the file <code>src/greet-message.js</code> implements the same custom element using JavaScript instead of TypeScript. JavaScript-based custom elements cannot use decorators, so they use a different approach to declare the custom element name and properties (attributes).</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> properties <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      color: purple;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following code from the file <code>src/greet-message-native.js</code> implements the same custom element using JavaScript. It uses the native web component approach rather than using Lit. Note how it relies on using DOM APIs like the <code>createElement</code> and <code>appendChild</code> methods.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'purple'</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// The "mode" option is required and the recommended value is "open".</span><br>    <span class="token comment">// When set to "open", `this.shadowRoot` is set.</span><br>    <span class="token comment">// When set to "closed", it is not.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// Using shadow DOM is not required.  We can replace</span><br>    <span class="token comment">// the previous two lines with the following.</span><br>    <span class="token comment">// this.appendChild(div);</span><br><br>    <span class="token comment">// Yet another way this could be implemented ...</span><br>    <span class="token comment">/*<br>    this.attachShadow({mode: 'open'});<br>    this.shadowRoot.innerHTML = `<br>      &lt;div style="color: purple;">Hello, ${name}!&lt;/div><br>    `;<br>    */</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The value of <code>this.shadowRoot</code>, when set, is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot?v=1.1.1" rel="noopener" target="_blank">ShadowRoot</a> object. This can be accessed in other lifecycle methods such as <code>connectedCallback</code>. One use is to register listeners for <code>slotchange</code> events.</p><p>The following HTML renders the custom element defined above.</p><p><img alt="Lit greet-message" style="width: 20%" src="/blog/assets/lit-greet-message.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Lit Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Change src value to use a different web component version. --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/greet-message.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="counter" tabindex="-1">Counter</h2><p>A common web component example is to implement a counter component. The following code shows one way to implement this using Lit.</p><p><img alt="Lit counter" style="width: 30%" src="/blog/assets/lit-counter.png?v=1.1.1"></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-counter'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;button ?disabled=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>        -<br>      &lt;/button><br>      &lt;div></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>+&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      display: flex;<br>      gap: 1rem;<br>      align-items: center;<br><br>      font-family: monospace;<br>      font-size: 2rem;<br>    }<br><br>    button {<br>      --size: 3rem;<br>      width: var(--size);<br>      height: var(--size);<br><br>      background-color: orange;<br>      border: none;<br>      border-radius: 50%;<br>      font-size: 2rem;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="properties" tabindex="-1">Properties</h2><p>Lit uses the <code>@property</code> decorator to declare the attributes that can be specified in instances of custom elements.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>The <code>@property</code> decorator takes a <code>PropertyDeclaration</code> object.</p><p>One of the supported options is <code>type</code>, which can have the value <code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>Array</code>, or <code>Object</code>. These are Lit type hints, not TypeScript types. The default <code>type</code> is <code>String</code>.</p><p>When the type is <code>Number</code>, the value is passed to the <code>Number</code> constructor which results in <code>NaN</code> for non-numeric strings.</p><p>When the type is <code>Boolean</code>, the value is set based on whether the attribute is present.</p><p>When the type is <code>Array</code> or <code>Object</code>, the value is passed to <code>JSON.parse</code> to get the property value.</p><p>Only string values can be specified in HTML. JavaScript must be used to set attributes to other types of values.</p><p>Lit does not provide a way to specify that an attribute is required. All <code>@property</code> declarations must be initialized, but they can be initialized to an empty string. The render method or any lifecycle method can check for required attributes and throw an error if not found. See the example in the &quot;Basic Example&quot; section above.</p><h2 id="state" tabindex="-1">State</h2><p>Lit uses the <code>@state</code> decorator to declare instance properties that are set via attributes.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>Instance properties that are declared without the <code>@property</code> or <code>@state</code> decorator are not reactive.</p><p>The following custom Lit element demonstrates the reactivity of <code>@property</code> and <code>@state</code> variables.</p><p><img alt="Lit reactivity" style="width: 30%" src="/blog/assets/lit-reactivity.png?v=1.1.1"></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'state-changes'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StateChanges</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> s <span class="token operator">=</span> <span class="token string">'initial'</span><span class="token punctuation">;</span><br>  v <span class="token operator">=</span> <span class="token string">'non-reactive'</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeV</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>    <span class="token comment">// v is not a reactive property,</span><br>    <span class="token comment">// so the change won't trigger a call to render.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">requestUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// triggers call to render</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        p: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>      &lt;div><br>        s: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>s<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeS<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>      &lt;div><br>        v: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeV<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>An instance of this custom element can be created as follows.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>state-changes</span> <span class="token attr-name">p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initial<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>state-changes</span><span class="token punctuation">></span></span></code></pre><h2 id="decorators" tabindex="-1">Decorators</h2><p>Lit supports many decorators. We have already seen <code>@customElement</code>, <code>@property</code>, and <code>@state</code>.</p><p>Other supported decorators include:</p><ul><li><p><code>@eventOptions</code></p><p>This specifies an options object to be passed to calls that Lit makes to <code>addEventListener</code> and <code>removeEventListener</code>. The supported options are documented in <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#options?v=1.1.1" rel="noopener" target="_blank">MDN</a>. They include <code>capture</code>, <code>once</code>, <code>passive</code>, and <code>signal</code>.</p><p>For example, adding <code>@eventOptions({once: true})</code> before the definition of a callback function prevents it from being called more than once.</p></li><li><p><code>@query</code></p><p>This specifies a CSS selector that will be used to query the DOM tree of the component to find a matching element. It is a applied to a property declaration and the property is set to a reference to the matching element.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `pBtn` to a reference to the `button`</span><br><span class="token comment">// inside the element with id "p".</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">query</span></span><span class="token punctuation">(</span><span class="token string">'#p button'</span><span class="token punctuation">)</span> pBtn<span class="token operator">!</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token comment">// This changes the color of button.</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>pBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;div id="p"><br>      p: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>    &lt;/div><br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>See the &quot;Refs&quot; section for an alternative.</p></li><li><p><code>@queryAll</code></p><p>This specifies a CSS selector that will be used to query the DOM tree of the component to find all matching element. It is a applied to a property declaration and the property is set to a <code>NodeList</code> containing the matching elements.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `buttons` to a `NodeList` containing references</span><br><span class="token comment">// to all the `button` elements inside this component.</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAll</span></span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span> buttons<span class="token operator">!</span><span class="token operator">:</span> NodeList<span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token comment">// This changes the color of each `button`.</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> node <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>buttons<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> button <span class="token operator">=</span> node <span class="token keyword">as</span> HTMLButtonElement<span class="token punctuation">;</span><br>    button<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>@queryAsync</code></p><p>This is similar to to <code>@query</code>, but sets a property to a <code>Promise</code>.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `pBtn` to a `Promise` that will resolve to</span><br><span class="token comment">// a reference to the `button` inside the element with id "p".</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAsync</span></span><span class="token punctuation">(</span><span class="token string">'#p button'</span><span class="token punctuation">)</span> pBtn<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>HTMLButtonElement<span class="token operator">></span><span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token keyword">async</span> <span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> pBtn <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pBtn<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pBtn<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This changes the color of the button.</span><br>    pBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>@queryAssignedElements</code></p><p>This specifies a slot name or CSS selector. It sets a property to an array of <code>HTMLElement</code> objects representing the elements that were assigned to the slot or selected element.</p><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token comment">// selector: 'li'</span><br>  slot<span class="token operator">:</span> <span class="token string">'breakfast'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br>breakfastElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>To get the elements assigned to the default slot, omit the argument to <code>@queryAssignedElements</code>.</p><p>See examples in the &quot;Slots&quot; section below.</p></li><li><p><code>@queryAssignedNodes</code></p><p>This specifies a slot name or CSS selector. It sets a property to an array of <code>Node</code> objects representing the nodes (including <code>Text</code> nodes) that were assigned to the slot or selected element.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedNodes</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  slot<span class="token operator">:</span> <span class="token string">'lunch'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br>lunchNodes<span class="token operator">!</span><span class="token operator">:</span> Node<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>To get the nodes assigned to the default slot, omit the argument to <code>@queryAssignedNodes</code>.</p></li></ul><h2 id="refs" tabindex="-1">Refs</h2><p>Refs provide an alternative to the <code>@query</code> decorator for getting a reference to a DOM element.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>createRef<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">Ref</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/directives/ref.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  inputRef<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span> <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      ...<br>        &lt;input<br>          type="text"<br>          size="20"<br>          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputRef<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>          @input=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>newName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>      ...<br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The expression <code>this.inputRef.value</code> gives the DOM <code>input</code> element. Adding <code>.value</code> to this gets the value of the <code>input</code>.</p><p>Using the <code>@query</code> decorator, as shown earlier, is a bit easier.</p><h2 id="tagged-template-literals" tabindex="-1">Tagged Template Literals</h2><p>Lit implements the <code>html</code> and <code>css</code> tagged template literals.</p><p>These using the browser's built-in parsers to parse the text before any <code>${...}</code> interpolations are processed. The text must be well-formed HTML before the interpolations are inserted.</p><p>From the Lit documentation, &quot;Because the browser's built-in parser is very lenient, most cases of malformed templates are not detectable at runtime, so you won't see warnings — just templates that don't behave as you expect. We recommend using linting tools and IDE plugins to find issues in your templates during development.&quot;</p><p>TODO: Describe what these provide beyond string concatenation. TODO: See <a href="https://lit.dev/docs/templates/overview/">https://lit.dev/docs/templates/overview/</a>.</p><h2 id="slots" tabindex="-1">Slots</h2><p>Web components can have one default slot and any number of named slots. These are defined using the HTML <code>slot</code> element. Instances of the component can specify content to be placed in the slots.</p><p>The <code>slot</code> element can be self closing and can have a <code>name</code> attribute. For example, <code>&lt;slot name=&quot;footer&quot; /&gt;</code>.</p><p>The following example demonstrates using slots.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">PropertyValues</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> queryAssignedElements<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'slots-demo'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SlotsDemo</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// To get an array of HTMLElement objects rather than Node objects,</span><br>  <span class="token comment">// use @queryAssignedElements.</span><br>  <span class="token comment">// Use @queryAssignedNodes when you also</span><br>  <span class="token comment">// want to capture Node objects like Text.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token comment">// selector: 'li'</span><br>    slot<span class="token operator">:</span> <span class="token string">'breakfast'</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  breakfastElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  defaultElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// The override keyword ensures that the method being overridden</span><br>  <span class="token comment">// is spelled correction and takes the correct parameters.</span><br>  override <span class="token function">firstUpdated</span><span class="token punctuation">(</span>changedProperties<span class="token operator">:</span> PropertyValues<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">firstUpdated</span><span class="token punctuation">(</span>changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> el <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultElements<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> el <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>breakfastElements<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h2>&lt;slot />&lt;/h2><br>        &lt;h3>Breakfast&lt;/h3><br>        &lt;slot name="breakfast">No breakfast options&lt;/slot><br>        &lt;h3>Lunch&lt;/h3><br>        &lt;slot name="lunch">No lunch options&lt;/slot><br>        &lt;h3>Dinner&lt;/h3><br>        &lt;slot name="dinner">No dinner options&lt;/slot><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML renders the custom element defined above.</p><p><img alt="Lit slots demo" style="width: 25%" src="/blog/assets/lit-slots-demo.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Slots Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/slots-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slots-demo</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Menu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breakfast<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Eggs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Bacon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dinner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>spaghetti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>tacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>fried rice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slots-demo</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="lifecycle" tabindex="-1">Lifecycle</h2><p>Lit supports all the standard web component <a href="/blog/topics/#/blog/web-components/#lifecycle-methods?v=1.1.1" rel="noopener" target="_blank">lifecycle methods</a>.</p><p>Lit also supports additional methods and properties that are part of its &quot;reactive update cycle&quot;. These include the following.</p><h3 id="shouldupdate" tabindex="-1">shouldUpdate</h3><p>This method is called automatically before an update is performed. It should return <code>true</code> to allow the update and <code>false</code> to reject it.</p><p>Property changes made in this method WILL NOT trigger another update.</p><h3 id="willupdate" tabindex="-1">willUpdate</h3><p>This method is called automatically after <code>shouldUpdate</code>.</p><p>Property changes made in this method WILL NOT trigger another update.</p><h3 id="update" tabindex="-1">update</h3><p>This method is called automatically after <code>willUpdate</code>.</p><p>Property changes made in this method WILL NOT trigger another update.</p><p>Overriding this method is rare.</p><h3 id="render" tabindex="-1">render</h3><p>This method is called automatically by the <code>update</code> method defined in <code>LitElement</code>. It is unique to Lit and not part of the web components standard.</p><p>This method can return:</p><ul><li>the result of invoking <code>html</code> tagged template literal</li><li>a primitive value (string, number, or boolean)</li><li>DOM nodes</li><li>arrays/iterables of the above types</li></ul><p>The <code>html</code> tagged template literal can be used multiple times to construct parts of a return value that is composed of multiple HTML strings.</p><p>This method should not:</p><ul><li>use data other than component property to determine what it returns</li><li>modify any component properties</li><li>have any side effects</li></ul><p>It should return the same result for the same set of component property values.</p><h3 id="firstupdated" tabindex="-1">firstUpdated</h3><p>This method is called automatically the first call to <code>update</code>.</p><p>Property changes made in this method WILL trigger another update.</p><h3 id="updated" tabindex="-1">updated</h3><p>This method is called automatically after every call to <code>update</code>.</p><h3 id="adoptedcallback" tabindex="-1">adoptedCallback</h3><p>This method is called automatically when a custom element instance is moved to a new document.</p><p>Overriding this method is rare.</p><h3 id="haschanged" tabindex="-1">hasChanged</h3><p>This method is defined in the options object passed to the <code>@property</code> or <code>@state</code> decorator. It is called automatically every time the associated property value changes. It should return <code>true</code> to allow the change and <code>false</code> to reject it.</p><h3 id="updatecomplete" tabindex="-1">updateComplete</h3><p>This is a property whose value is a <code>Promise</code> that resolves when the latest update completes. It can be useful to <code>await</code> this before dispatching a custom event.</p><h3 id="performupdate" tabindex="-1">performUpdate</h3><p>This method can be called to perform a synchronous update, resulting in a call to the <code>render</code> method. Calling this can be useful when a non-reactive property that affects what is rendered is modified.</p><h3 id="requestupdate" tabindex="-1">requestUpdate</h3><p>This method can be called to request an asynchronous update, resulting in a call to the <code>render</code> method. Calling this can be useful when a non-reactive property that affects what is rendered is modified.</p><hr><p>The following code demonstrates each of the lifecycle methods, except the rarely used <code>adoptedCallback</code> method.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">,</span> type PropertyValues<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">,</span> query<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br>@<span class="token function">customElement</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  @<span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> newName <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token comment">// This can validate proposed property value changes.</span><br>    <span class="token function">hasChanged</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">newVal</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">oldVal</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hasChanged for name: changing from'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token comment">// Only allow the change if the length is more than 1.</span><br>      <span class="token keyword">const</span> valid <span class="token operator">=</span> newVal<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span> valid<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  name <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// This is set based on the presence of the "shout" attribute.</span><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">}</span><span class="token punctuation">)</span> shout <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// This gets a reference to the DOM element with id "nameInput".</span><br>  @<span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'#nameInput'</span><span class="token punctuation">)</span> nameInput<span class="token operator">!</span><span class="token operator">:</span> HTMLInputElement<span class="token punctuation">;</span><br><br>  override <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><br>    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span><br>    <span class="token literal-property property">old</span><span class="token operator">:</span> string<span class="token punctuation">,</span><br>    <span class="token literal-property property">value</span><span class="token operator">:</span> string<br>  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> old<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><br>      <span class="token string">'attributeChangedCallback:'</span><span class="token punctuation">,</span><br>      name<span class="token punctuation">,</span><br>      <span class="token string">'changing from'</span><span class="token punctuation">,</span><br>      old<span class="token punctuation">,</span><br>      <span class="token string">'to'</span><span class="token punctuation">,</span><br>      value<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'connectedCallback entered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'disconnectedCallback entered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>shout<span class="token punctuation">)</span> message <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// The `?` before `disabled` below creates</span><br>    <span class="token comment">// a one-way boolean attribute binding.</span><br>    <span class="token comment">// A `.` is used to create a one-way property binding</span><br>    <span class="token comment">// for attributes with string or number values.</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div><br>      &lt;form<br>        @submit=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> SubmitEvent</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>          e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>newName<span class="token punctuation">;</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span>newName <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// clears the input</span><br>        <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      ><br>        &lt;input<br>          id="nameInput"<br>          type="text"<br>          size="20"<br>          required<br>          .value=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>newName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>          @input=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>newName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>        &lt;button ?disabled=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>newName<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Update&lt;/button><br>      &lt;/form><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called before `willUpdate`.</span><br>  override <span class="token function">shouldUpdate</span><span class="token punctuation">(</span>changedProperties<span class="token operator">:</span> PropertyValues<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span><br>    <span class="token comment">// no need to call super</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'shouldUpdate: changedProperties ='</span><span class="token punctuation">,</span> changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called before `update`.</span><br>  override <span class="token function">willUpdate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">changedProperties</span><span class="token operator">:</span> PropertyValues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// no need to call super</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'willUpdate : changedProperties ='</span><span class="token punctuation">,</span> changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is rarely implemented.  The super method calls `render`.</span><br>  override <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">changedProperties</span><span class="token operator">:</span> PropertyValues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must call this</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'update: changedProperties ='</span><span class="token punctuation">,</span> changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called after the first call to `update`.</span><br>  override <span class="token function">firstUpdated</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">changedProperties</span><span class="token operator">:</span> PropertyValues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// no need to call super</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'firstUpdated: changedProperties ='</span><span class="token punctuation">,</span> changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called after every call to `update`.</span><br>  override <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">changedProperties</span><span class="token operator">:</span> PropertyValues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// no need to call super</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated: changedProperties ='</span><span class="token punctuation">,</span> changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      color: purple;<br>      font-size: 2rem;<br>      font-weight: bold;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>To conditionally hide an element, use a boolean attribute binding for the standard DOM <code>hidden</code> attribute. For example:</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>div <span class="token operator">?</span>hidden<span class="token operator">=</span>$<span class="token punctuation">{</span>some<span class="token operator">-</span>condition<span class="token punctuation">}</span><span class="token operator">></span>some content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>Lit supports registering event handling functions with event bindings. An event binding is an attribute whose name is <code>@</code> followed by an event name. The value must be a function object, not a call to a function or JavaScript code. String interpolation (<code>${fn}</code>) is used to insert the function into the <code>html</code> tagged template literal.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlertOnClick</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      border: 1px dashed red;<br>      padding: 1rem;<br>    }<br><br>    button {<br>      border-radius: 0.5rem;<br>      border: 3px solid cornflowerblue;<br>      padding: 0.5rem;<br>      background-color: lemonchiffon;<br>      cursor: pointer;<br>    }<br>    button:hover {<br>      background-color: orange;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>&quot;Composed events&quot; that are set to bubble can bubble out of the shadow DOM of web components. Most standard UI events fit this criteria.</p><p>When this happens, the event is &quot;retargeted&quot;. This means the event appear to come from the host element of the web component rather than from the actual element that triggered the event (such as an <code>input</code>). The event also loses the values of some of its properties.</p><p>There are two ways that such an event can be handled in a web component and captured in a page that uses the web component. I prefer the first approach because it requires less work from users of the web component.</p><ol><li><p>Capture in the web component and dispatch a custom event.</p><p>For example, a web component whose custom element name is <code>toggle-switch</code> could contain the following:</p><pre class="language-js"><code class="language-js"><span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>checked<span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> newEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'toggle'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span>checked<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>newEvent<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;input<br>      type="checkbox"<br>      ?checked=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      @change=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>    /><br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>A page that uses <code>toggle-switch</code> could contain the following to handle the custom <code>toggle</code> event. This example uses Alpine syntax to register an event listener.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>head<span class="token operator">></span><br>  <span class="token operator">...</span><br>  <span class="token operator">&lt;</span>script<span class="token operator">></span><br>    <span class="token keyword">function</span> <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> <span class="token punctuation">{</span>checked<span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'handleToggle: checked ='</span><span class="token punctuation">,</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br><span class="token operator">&lt;</span>body<span class="token operator">></span><br>  <span class="token operator">&lt;</span>toggle<span class="token operator">-</span><span class="token keyword">switch</span><br>    label<span class="token operator">=</span><span class="token string">"Bluetooth"</span><br>    @toggle<span class="token operator">=</span><span class="token string">"handleToggle($event)"</span><br>  <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>toggle<span class="token operator">-</span><span class="token keyword">switch</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></code></pre></li><li><p>Don't handle in the web component and used <code>composedPath</code> in the page.</p><p>For example, a web component whose custom element name is <code>toggle-switch</code> could contain the following:</p><pre class="language-js"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;input type="checkbox" ?checked="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" /></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>A page that uses <code>toggle-switch</code> could contain the following to handle the standard DOM <code>input</code> event. This example uses Alpine syntax to register an event listener.</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>head<span class="token operator">></span><br>  <span class="token operator">...</span><br>  <span class="token operator">&lt;</span>script<span class="token operator">></span><br>    <span class="token keyword">function</span> <span class="token function">handleInput</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// event.composedPath() returns an array of all the</span><br>      <span class="token comment">// nodes the event will pass through, starting from the</span><br>      <span class="token comment">// element that triggered the event (`input` in this case)</span><br>      <span class="token comment">// and ending at the `document`.</span><br>      <span class="token keyword">const</span> input <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">composedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> <span class="token punctuation">{</span>checked<span class="token punctuation">}</span> <span class="token operator">=</span> input<span class="token punctuation">;</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'handleInput: checked ='</span><span class="token punctuation">,</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br><span class="token operator">&lt;</span>body<span class="token operator">></span><br>  <span class="token operator">&lt;</span>toggle<span class="token operator">-</span><span class="token keyword">switch</span><br>    label<span class="token operator">=</span><span class="token string">"Bluetooth"</span><br>    @input<span class="token operator">=</span><span class="token string">"handleInput($event)"</span><br>  <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>toggle<span class="token operator">-</span><span class="token keyword">switch</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></code></pre></li></ol><h2 id="context" tabindex="-1">Context</h2><p>The <a href="https://lit.dev/docs/data/context/?v=1.1.1" rel="noopener" target="_blank">@lit/context</a> package provides a way to make data available throughout a component subtree. It avoids &quot;prop drilling&quot; where data is passed through every layer of a component hierarchy.</p><p>To install this package, enter <code>npm install @lit/context</code>.</p><p>The following code in the file <code>src/dog-context.ts</code> defines a data type and a context for holding an object of that type.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>createContext<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/context'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">// &lt;Dog> specifies the kind of data that can be provided to the context.</span><br><span class="token comment">// 'dog' is a key associated with the context.</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> dogContext <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>Dog<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following code in the file <code>src/context-demo.ts</code> defines three custom elements. The <code>my-top</code> element provides a value for the context, renders a button that modifies the context value, and renders a <code>my-middle</code> element. The <code>my-middle</code> element renders a <code>my-bottom</code> element. The <code>my-bottom</code> element consumes the value in the context and renders data from it.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>consume<span class="token punctuation">,</span> provide<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/context'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>dogContext<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">Dog</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dog-context.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-top'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyTop</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// This places a Dog object into the dogContext.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">provide</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>context<span class="token operator">:</span> dogContext<span class="token punctuation">}</span><span class="token punctuation">)</span><br>  dog<span class="token operator">:</span> Dog <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Comet'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>dog <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Snoopy'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Beagle'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h1>Top&lt;/h1><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeDog<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change Dog&lt;/button><br>        &lt;my-middle>&lt;/my-middle><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-middle'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyMiddle</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h2>Middle&lt;/h2><br>        &lt;my-bottom>&lt;/my-bottom><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-bottom'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyBottom</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// This gets a Dog object from the dogContext.</span><br>  <span class="token comment">// Without the subscribe option, the dog property won't be updated</span><br>  <span class="token comment">// when the dog object held by the context changes.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">consume</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>context<span class="token operator">:</span> dogContext<span class="token punctuation">,</span> subscribe<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> dog<span class="token operator">?</span><span class="token operator">:</span> Dog<span class="token punctuation">;</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dog<br>      <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>dog<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is a </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>dog<span class="token punctuation">.</span>breed<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><br>      <span class="token operator">:</span> <span class="token string">'No dog found'</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h3>Bottom&lt;/h3><br>        &lt;div></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML renders an instance of the <code>my-top</code> custom element.</p><p><img alt="Lit context demo" style="width: 25%" src="/blog/assets/lit-context-demo.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Context Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./src/index.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/context-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-top</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-top</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>Web components that consume context data cannot modify it. But they can dispatch custom events that bubble up to the provider of the context data. Event handlers in the provider can modify the context data and consumers will be notified.</p><p>The following example demonstrates this. Clicking any of the buttons increments the <code>count</code> value.</p><p><img alt="Lit context events" style="border: 0; width: 30%" src="/blog/assets/lit-context-events.png?v=1.1.1"></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>consume<span class="token punctuation">,</span> createContext<span class="token punctuation">,</span> provide<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/context'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token comment">// A context can hold an object or a primitive value like a number.</span><br><span class="token keyword">type</span> <span class="token class-name">Data</span> <span class="token operator">=</span> <span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> dataContext <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-parent'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyParent</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">provide</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>context<span class="token operator">:</span> dataContext<span class="token punctuation">}</span><span class="token punctuation">)</span> data<span class="token operator">:</span> Data <span class="token operator">=</span> <span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// this.data.count++; // doesn't work; must replace context object</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div @increment=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Parent Increment&lt;/button><br>        &lt;my-child>&lt;/my-child><br>        &lt;my-child>&lt;/my-child><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'my-child'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyChild</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">consume</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>context<span class="token operator">:</span> dataContext<span class="token punctuation">,</span> subscribe<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> data<span class="token operator">?</span><span class="token operator">:</span> Data<span class="token punctuation">;</span><br><br>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> <span class="token punctuation">{</span>host<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">;</span><br>    host<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;div>count = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Child Increment&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="async-tasks" tabindex="-1">Async Tasks</h2><p>The <a href="https://lit.dev/docs/data/task/?v=1.1.1" rel="noopener" target="_blank">@lit/task</a> package simplifies obtaining data to render asynchronously. This includes fetching data from network endpoints.</p><p>To install this package, enter <code>npm install @lit/task</code>.</p><p>The following code in the file <code>src/task-demo.js</code> demonstrates this.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>Task<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/task'</span><span class="token punctuation">;</span><br><br><span class="token keyword">type</span> <span class="token class-name">Todo</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  userId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><br>  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><br>  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><br>  completed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">URL_PREFIX</span> <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/todos/'</span><span class="token punctuation">;</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTodo</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Todo<span class="token operator">></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Simulate a long-running query.</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">try</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">bad status </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'task-demo'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">TaskDemo</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> todoId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// The task runs when the component is created,</span><br>  <span class="token comment">// and again any time one of its arguments changes.</span><br>  task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    task<span class="token operator">:</span> getTodo<span class="token punctuation">,</span><br>    <span class="token function-variable function">args</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>todoId<span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeTodoId</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> input <span class="token operator">=</span> e<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLInputElement<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>todoId <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// What this renders is based on the whether the task</span><br>    <span class="token comment">// is pending, complete, or has experienced an error.</span><br>    <span class="token keyword">const</span> taskDisplay <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>task<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      <span class="token function-variable function">pending</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;img alt="spinner" src="/spinner.gif" /></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>      <span class="token function-variable function">complete</span><span class="token operator">:</span> todo <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>        &lt;h2></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>todo<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h2><br>        &lt;div>status: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>todo<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'complete'</span> <span class="token operator">:</span> <span class="token string">'pending'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div><br>      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>      <span class="token function-variable function">error</span><span class="token operator">:</span> error <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="error"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;label><br>        Todo ID<br>        &lt;input<br>          type="number"<br>          @input=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeTodoId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>          .value=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>todoId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>      &lt;/label><br>      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>taskDisplay<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      border: 1px solid gray;<br>      padding: 1rem;<br>      width: 20rem;<br>    }<br><br>    .error {<br>      color: red;<br>    }<br><br>    h2 {<br>      margin: 0;<br>    }<br><br>    img[alt='spinner'] {<br>      display: block;<br>      height: 2rem;<br>    }<br><br>    input {<br>      width: 2rem;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML renders an instance of the <code>task-demo</code> custom element. Changing the todo ID in the input triggers running the task again.</p><p><img alt="Lit context demo" style="border: 0; width: 60%" src="/blog/assets/lit-task-demo.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Task Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./src/index.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/task-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>task-demo</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>task-demo</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="localization" tabindex="-1">Localization</h2><p>The <a href="https://lit.dev/docs/localization/overview/?v=1.1.1" rel="noopener" target="_blank">@lit/localize</a> package supports language translations.</p><p>To install this package, enter <code>npm install @lit/localize</code> and <code>npm install @lit/localize-tools</code>.</p><p>Modify the source files for each web component that requires language translations. Surrounded each piece of text to be translated with a call to the <code>msg</code> function.</p><p>The argument to <code>msg</code> must be literal text, not a variable. The reason is that the <code>lit-localize extract</code> command only extracts text found in <code>msg</code> calls. It doesn't execute the code, so it wouldn't be able to determine all the possible values of a variable.</p><p>The following examples show all the supported scenarios. Note that the <code>str</code> must also be used when the text does not contain HTML AND includes an interpolation.</p><ul><li>plain strings: <code>msg('Hello World')</code></li><li>string with expressions: <code>msg(str`Hello ${name}`)</code></li><li>HTML templates: <code>msg(html`Hello &lt;b&gt;World&lt;/b&gt;`)</code></li><li>HTML templates with expressions: <code>msg(html`Hello &lt;b&gt;${name}&lt;/b&gt;`)</code></li><li>nested inside HTML templates: <code>html`&lt;button&gt;${msg('Hello World')}&lt;/button&gt;`</code></li></ul><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>LitElement<span class="token punctuation">,</span> msg<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/localize'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>configureLocalization<span class="token punctuation">,</span> localized<span class="token punctuation">,</span> msg<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/localize'</span><span class="token punctuation">;</span><br><span class="token operator">...</span><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'My favorite color is'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">{</span><br>      red<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      blue<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      green<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> color <span class="token operator">=</span> colors<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;select @change=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeLocale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/select><br>      &lt;div></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.&lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre><p>Optionally include a second argument in each call to <code>msg</code> that is an option with the <code>desc</code> property whose value is a string that describes the text to be translated. These descriptions will appear as <code>note</code> elements in the generated XLIFF files to assist human translators.</p><p>Create the file <code>lit-localize.json</code> in the root directory of the project containing the following. The <code>targetLocales</code> property specifies the languages and regions for which translations are desired.</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token string">"https://raw.githubusercontent.com/lit/lit/main/packages/localize-tools/config.schema.json"</span><span class="token punctuation">,</span><br>  <span class="token property">"sourceLocale"</span><span class="token operator">:</span> <span class="token string">"en"</span><span class="token punctuation">,</span><br>  <span class="token property">"targetLocales"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"es-419"</span><span class="token punctuation">,</span> <span class="token string">"zh-Hans"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"tsConfig"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.json"</span><span class="token punctuation">,</span><br>  <span class="token property">"output"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"runtime"</span><span class="token punctuation">,</span><br>    <span class="token property">"outputDir"</span><span class="token operator">:</span> <span class="token string">"./src/generated/locales"</span><span class="token punctuation">,</span><br>    <span class="token property">"localeCodesModule"</span><span class="token operator">:</span> <span class="token string">"./src/generated/locale-codes.ts"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"interchange"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"xliff"</span><span class="token punctuation">,</span><br>    <span class="token property">"xliffDir"</span><span class="token operator">:</span> <span class="token string">"./xliff/"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Add the following npm scripts in <code>package.json</code>.</p><pre class="language-json"><code class="language-json"><span class="token property">"localize:extract"</span><span class="token operator">:</span> <span class="token string">"lit-localize extract"</span><span class="token punctuation">,</span><br><span class="token property">"localize:build"</span><span class="token operator">:</span> <span class="token string">"lit-localize build"</span><span class="token punctuation">,</span></code></pre><p>Enter <code>npm localize:extract</code>. This creates an <code>xliff</code> directory containing one <code>.xliff</code> file for each language/region. Edit these files and add a <code>target</code> element after each <code>source</code> element that specifies the desired translation.</p><p>Running the extract command again after adding new calls to <code>msg</code> in the JavaScript code does not overwrite existing <code>.xliff</code> files. It just adds <code>trans-unit</code> elements for the new strings to be translated.</p><p>Enter <code>npm localize:build</code>. This creates the <code>src/generated</code> directory containing the file <code>locale-codes.ts</code> and a <code>locales</code> subdirectory containing one <code>.ts</code> file for each language/region.</p><p>The following code in the file <code>src/localize-demo.js</code> demonstrates this.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span><br>  configureLocalization<span class="token punctuation">,</span><br>  localized<span class="token punctuation">,</span><br>  msg<span class="token punctuation">,</span><br>  updateWhenLocaleChanges<br><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lit/localize'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token punctuation">{</span>sourceLocale<span class="token punctuation">,</span> targetLocales<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./generated/locale-codes.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>getLocale<span class="token punctuation">,</span> setLocale<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">configureLocalization</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  sourceLocale<span class="token punctuation">,</span><br>  targetLocales<span class="token punctuation">,</span><br>  <span class="token function-variable function">loadLocale</span><span class="token operator">:</span> locale <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./generated/locales/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.ts</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'localize-demo'</span><span class="token punctuation">)</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">localized</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LocalizeDemo</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>  options<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// The following line can be used in place of `@localized()` above.</span><br>    <span class="token comment">//updateWhenLocaleChanges(this);</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option>en&lt;/option></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> locale <span class="token keyword">of</span> targetLocales<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/option></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeLocale</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> select <span class="token operator">=</span> e<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLSelectElement<span class="token punctuation">;</span><br>    <span class="token function">setLocale</span><span class="token punctuation">(</span>select<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'My favorite color is'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">{</span><br>      red<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      blue<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      green<span class="token operator">:</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> color <span class="token operator">=</span> colors<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;select @change=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeLocale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/select><br>      &lt;div></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.&lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML renders an instance of the <code>localize-demo</code> custom element. Selected a different locale from the <code>select</code> updates the message.</p><p><img alt="Lit localize demo" style="border: 0; width: 60%" src="/blog/assets/lit-task-demo.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Localize Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./src/index.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/localize-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localize-demo</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localize-demo</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>The <code>.xliff</code> files created by the <code>lit-localize extract</code> command use the XLIFF 1.2 format from 2008. It's unclear when it doesn't use the XLIFF 2.0 format from 2014.</p><h2 id="chess-board-example" tabindex="-1">Chess Board Example</h2><p><a href="https://mganjoo.github.io/gchessboard/?v=1.1.1" rel="noopener" target="_blank">gchessboard</a> is a web component (not using Lit) that renders a chess board. The pieces can be dragged to any squares, not just valid ones. This enables quickly setting up a position to study.</p><p><img alt="web component chess board" style="width: 50%" src="/blog/assets/web-component-chess-board.png?v=1.1.1"></p><p>To try this, add the following to a new file, perhaps named <code>chess.html</code>. Then open the HTML file in any modern web browser.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Chess Board<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">g-chess-board</span> <span class="token punctuation">{</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/gchessboard<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g-chess-board</span> <span class="token attr-name">fen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span> <span class="token attr-name">interactive</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g-chess-board</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="markdown" tabindex="-1">Markdown</h2><p>Web components can be used in Markdown files.</p><p>When using Vite with the Lit template:</p><ol><li><p>Enter <code>npm run build</code>.</p></li><li><p>Copy the generated <code>.js</code> file.</p><p>Copy <code>dist/assets/index_*.js</code> to a directory that is accessible to the server that servers the Markdown file. For my 11ty-based blog, this is the <code>src/assets</code> directory.</p></li><li><p>Rename the copied file to something more meaningful.</p><p>For example, the name could be <code>lit-components.js</code>.</p></li><li><p>Add a script tag in the Markdown file.</p><p>This should point to the renamed <code>.js</code> file. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/blog/assets/lit-components.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Use the custom element. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message</span><span class="token punctuation">></span></span></code></pre></li></ol><p>The following is an example of using a web component in the blog page you are currently reading. Try inspecting the page and changing the value of the <code>name</code> attribute. The update will be seen on the page.</p><script type="module" src="/blog/assets/lit-components.js"></script><p><greet-message name="Markdown"></greet-message></p><h2 id="type-inference" tabindex="-1">Type Inference</h2><p>When an instance of a custom element is created using the DOM <code>createElement</code> method, TypeScript cannot infer the specific type and assumes it is <code>HTMLElement</code>.</p><p>For example, in the following code TypeScript will infer the type of <code>el</code> to be <code>HTMLElement</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For many custom elements, this is not a concern because element instances will be created in this way. When this is a concern, enable inferring a more specific type by adding an entry to the <code>HTMLElementTagNameMap</code> as follows.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> global <span class="token punctuation">{</span><br>  <span class="token keyword">interface</span> <span class="token class-name">HTMLElementTagNameMap</span> <span class="token punctuation">{</span><br>    <span class="token string-property property">'alert-on-click'</span><span class="token operator">:</span> AlertOnClick<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>With this in place, the type of <code>el</code> will be inferred to be <code>AlertOnClick</code>.</p><h2 id="errors-detected" tabindex="-1">Errors Detected</h2><p>Lit error detection includes the following:</p><ul><li>defining multiple custom elements with the same name</li></ul><p>The following kinds of errors are not detected.</p><ul><li><p>Mistyping the name of a custom element in HTML.</p><p>The element will be treated as if it were a <code>div</code> element.</p></li></ul><h2 id="lit-labs" tabindex="-1">Lit Labs</h2><p>Lit Labs is a collection of experimental packages that add functionality to Lit. The Lit team provides these in order to gather feedback. Successful packages graduate to become officially supported.</p><p>Keep these packages separate from the Lit core enables keeping the core as small as possible. Each project can choose the additional packages it wishes to use.</p><p>The following subsections describe popular Lit Lab packages. Some have already graduated. These packages are under development as of February 2024.</p><ul><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/cli?v=1.1.1" rel="noopener" target="_blank">CLI</a> for generating framework wrappers for Angular, React, and Vue</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/eleventy-plugin-lit#lit-labseleventy-plugin-lit?v=1.1.1" rel="noopener" target="_blank">eleventy-plugin-lit</a> for pre-rendering Lit web components at build time</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/motion?v=1.1.1" rel="noopener" target="_blank">motion</a> for adding animations</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/observers?v=1.1.1" rel="noopener" target="_blank">observers</a> for detecting specific kinds of changes including mutation, resize, intersection, and performance</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/preact-signals?v=1.1.1" rel="noopener" target="_blank">preact-signal</a> for making it easier to share observable state</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/router?v=1.1.1" rel="noopener" target="_blank">router</a> for associating URL paths with components to be rendered</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/ssr?v=1.1.1" rel="noopener" target="_blank">ssr</a> for server-side rendering</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/testing?v=1.1.1" rel="noopener" target="_blank">testing</a> for implementing unit tests for Lit components</p></li><li><p><a href="https://github.com/lit/lit/tree/main/packages/labs/virtualizer?v=1.1.1" rel="noopener" target="_blank">virtualizer</a> to avoid spending time rendering elements that are not currently in view. A common example is rendering a scrolling list of items.</p></li></ul><p>These packages are near graduation as of February 2024.</p><ul><li><a href="https://www.npmjs.com/package/@lit-labs/scoped-registry-mixin?v=1.1.1" rel="noopener" target="_blank">scoped-registry-mixin</a> provides a way to &quot;scope custom element definitions to shadow roots, such that the mapping of tag names to custom element class doesn't rely on a single global registry&quot;.</li></ul><p>These packages have graduated.</p><ul><li><p><a href="https://lit.dev/docs/data/context/?v=1.1.1" rel="noopener" target="_blank">@lit/context</a> for making data available throughout a component subtree</p></li><li><p><a href="https://lit.dev/docs/localization/overview/?v=1.1.1" rel="noopener" target="_blank">@lit/localize</a> for supporting multiple languages</p></li><li><p><a href="https://lit.dev/docs/frameworks/react/?v=1.1.1" rel="noopener" target="_blank">@lit/react</a> to create React wrappers for web components</p></li><li><p><a href="https://lit.dev/docs/data/task/?v=1.1.1" rel="noopener" target="_blank">@lit/task</a> for asynchronous tasks like fetching data</p></li></ul><h2 id="publishing-components" tabindex="-1">Publishing Components</h2><p>When publishing a library of Lit components, you can choose to include the Lit library in the bundle or omit it. In either case, the shared file should be an ES module. If the Lit library is not included in the bundle, users of your components will need <code>script</code> tags to include both your component library and the Lit library.</p><p>Consider releasing two versions of each Lit component library, one that includes the Lit library and one that doesn't. The former will be easier to use. But the latter is better in cases where multiple Lit component libraries are being used.</p><p>If more than one copy of the Lit library is included in a page, more JavaScript code that necessary will be downloaded and there can be conflicts between different versions of the library.</p><p>For more detail, see <a href="https://lit.dev/docs/tools/publishing/#publishing-best-practices?v=1.1.1" rel="noopener" target="_blank">Publishing</a>.</p><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>To force a custom element instance to update, call its <code>requestUpdate</code> method.</p><p>Consider using your small js2html library to generate HTML in web components.</p></article>