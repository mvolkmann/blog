<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Lit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#installing">Installing</a></li><li><a href="#properties">Properties</a></li><li><a href="#state">State</a></li><li><a href="#lifecycle-methods">Lifecycle Methods</a><ol><li><a href="#adoptedcallback">adoptedCallback</a></li><li><a href="#attributechangedcallback">attributeChangedCallback</a></li><li><a href="#connectedcallback">connectedCallback</a></li><li><a href="#constructor">constructor</a></li><li><a href="#disconnectedcallback">disconnectedCallback</a></li></ol></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#type-inference">Type Inference</a></li><li><a href="#errors-detected">Errors Detected</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><figure style="width: 50%"><img alt="Lit logo" style="border: 0" src="/blog/assets/lit-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://lit.dev?v=1.1.1" rel="noopener" target="_blank">Lit</a> is library that simplifies developing <a href="https://www.webcomponents.org/?v=1.1.1" rel="noopener" target="_blank">web components</a>.</p><h2 id="installing" tabindex="-1">Installing</h2><p>The easiest way to get started using Lit is to get the library from this <a href="https://cdn.jsdelivr.net/gh/lit/dist@3/core/lit-core.min.js?v=1.1.1" rel="noopener" target="_blank">CDN</a>. This single file can be saved locally to avoid depending on the CDN. The file is 17 KB.</p><p>Another approach is to use <a href="https://vitejs.dev/?v=1.1.1" rel="noopener" target="_blank">Vite</a>. This has many advantages including:</p><ul><li>configuration to use TypeScript</li><li>running in watch mode so code changes are automatically recompiled</li><li>automatic browser updates</li></ul><p>The following steps create a new project that uses Vite and Lit.</p><ol><li>Enter <code>npm create vite@latest</code>.</li><li>If prompted with &quot;OK to proceed?&quot;, press the return key.</li><li>After the &quot;Project name&quot; prompt, enter a project name.</li><li>For the &quot;Select a framework&quot; prompt, select &quot;Lit&quot;.</li><li>For the &quot;Select a variant&quot; prompt, select &quot;TypeScript&quot;.</li><li>cd to the new project directory.</li><li>Install dependencies by entering <code>npm install</code> or <code>bun install</code>.</li><li>Run the project by entering <code>npm run dev</code> or <code>bun dev</code>.</li><li>Type &quot;h&quot; and press the return key for help.</li><li>Type &quot;o&quot; and press the return key to open a browser tab for localhost:5173.</li></ol><h2 id="properties" tabindex="-1">Properties</h2><p>Lit uses the <code>@property</code> decorator to declare the attributes that can be specified in instances of custom elements.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>The <code>@property</code> decorator takes a <code>PropertyDeclaration</code> object.</p><p>One of the supported options is <code>type</code>, which can have the value <code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>Array</code>, or <code>Object</code>. These are Lit type hints, not TypeScript types. The default <code>type</code> is <code>String</code>.</p><p>When the type is <code>Number</code>, the value is passed to the <code>Number</code> constructor which results in <code>NaN</code> for non-numeric strings.</p><p>When the type is <code>Boolean</code>, all values except <code>null</code> and <code>undefined</code> are treated as <code>true</code>.</p><p>When the type is <code>Array</code> or <code>Object</code>, the value is passed to <code>JSON.parse</code> to get the property value.</p><p>Only string values can be specified in HTML. JavaScript must be used to set attributes to other types of values.</p><p>Lit does not provide a way to specify that an attribute is required. All <code>@property</code> declarations must be initialized, but they can be initialized to an empty string. The render method or any lifecycle method can check for required attributes and throw an error if not found. The following code demonstrates this.</p><pre class="language-ts"><code class="language-ts">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre><h2 id="state" tabindex="-1">State</h2><p>Lit uses the <code>@state</code> decorator to declare instance properties that are set via attributes.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>Instance properties that are declared without the <code>@property</code> or <code>@state</code> decorator are not reactive.</p><p>The following custom Lit element demonstrates the reactivity of <code>@property</code> and <code>@state</code> variables.</p><p><img alt="Lit reactivity" style="width: 30%" src="/blog/assets/lit-reactivity.png?v=1.1.1"></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>LitElement<span class="token punctuation">,</span> html<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'state-changes'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StateChanges</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> s <span class="token operator">=</span> <span class="token string">'initial'</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        p: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>      &lt;div><br>        s: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>s<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeS<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>An instance of this custom element can be created as follows.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>state-changes</span> <span class="token attr-name">p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initial<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>state-changes</span><span class="token punctuation">></span></span></code></pre><h2 id="lifecycle-methods" tabindex="-1">Lifecycle Methods</h2><p>Lit supports five lifecycle methods that are automatically called at specific points in the lifecycle of a custom element.</p><h3 id="adoptedcallback" tabindex="-1">adoptedCallback</h3><p>This lifecycle method is called when the instance is moved to a new document.</p><p>This method is rarely used.</p><h3 id="attributechangedcallback" tabindex="-1">attributeChangedCallback</h3><p>This lifecycle method is called when the value of an observed attribute changes.</p><h3 id="connectedcallback" tabindex="-1">connectedCallback</h3><p>This lifecycle method is called after an instance is added to the DOM. It can be used to add event listeners to elements outside this custom element. Typically anything done in this method is undone in the <code>disconnectedCallback</code> method.</p><h3 id="constructor" tabindex="-1">constructor</h3><p>This lifecycle method is called when an instance is initially created and again if the custom element definition is modified. It is commonly used for one time initializations such as computing property values.</p><h3 id="disconnectedcallback" tabindex="-1">disconnectedCallback</h3><p>This lifecycle method is called after an instance is removed from the DOM. It can be used to remove event listeners from elements outside this custom element. Typically anything done in the <code>connectedCallback</code> method is undone in this method.</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>Lit supports registering event handling functions with attributes whose names begin with <code>@</code>, followed by an event name. The value must be a function object, not a call to a function or JavaScript code. String interpolation (<code>${fn}</code>) is used to insert the function into the <code>html</code> tagged template literal.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>LitElement<span class="token punctuation">,</span> css<span class="token punctuation">,</span> html<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlertOnClick</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      border: 1px dashed red;<br>      padding: 1rem;<br>    }<br><br>    button {<br>      border-radius: 0.5rem;<br>      border: 3px solid cornflowerblue;<br>      padding: 0.5rem;<br>      background-color: lemonchiffon;<br>      cursor: pointer;<br>    }<br>    button:hover {<br>      background-color: orange;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="type-inference" tabindex="-1">Type Inference</h2><p>When an instance of a custom element is created using the DOM <code>createElement</code> method, TypeScript cannot infer the specific type and assumes it is <code>HTMLElement</code>.</p><p>For example, in the following code TypeScript will infer the type of <code>el</code> to be <code>HTMLElement</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For many custom elements, this is not a concern because element instances will be created in this way. When this is a concern, enable inferring a more specific type by adding an entry to the <code>HTMLElementTagNameMap</code> as follows.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> global <span class="token punctuation">{</span><br>  <span class="token keyword">interface</span> <span class="token class-name">HTMLElementTagNameMap</span> <span class="token punctuation">{</span><br>    <span class="token string-property property">'alert-on-click'</span><span class="token operator">:</span> AlertOnClick<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>With this in place, the type of <code>el</code> will be inferred to be <code>AlertOnClick</code>.</p><h2 id="errors-detected" tabindex="-1">Errors Detected</h2><p>Lit error detection includes the following:</p><ul><li>defining multiple custom elements with the same name</li></ul><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>To force a custom element instance to update, call its <code>requestUpdate</code> method.</p></article>