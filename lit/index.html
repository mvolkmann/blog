<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Lit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#installing">Installing</a></li><li><a href="#basic-example">Basic Example</a></li><li><a href="#properties">Properties</a></li><li><a href="#state">State</a></li><li><a href="#decorators">Decorators</a></li><li><a href="#tagged-template-literals">Tagged Template Literals</a></li><li><a href="#slots">Slots</a></li><li><a href="#lifecycle-methods">Lifecycle Methods</a><ol><li><a href="#adoptedcallback">adoptedCallback</a></li><li><a href="#attributechangedcallback">attributeChangedCallback</a></li><li><a href="#connectedcallback">connectedCallback</a></li><li><a href="#constructor">constructor</a></li><li><a href="#disconnectedcallback">disconnectedCallback</a></li><li><a href="#firstupdated">firstUpdated</a></li><li><a href="#performupdate">performUpdate</a></li><li><a href="#requestupdate">requestUpdate</a></li><li><a href="#shouldupdate">shouldUpdate</a></li><li><a href="#updated">updated</a></li><li><a href="#updatecomplete">updateComplete</a></li></ol></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#chess-board-example">Chess Board Example</a></li><li><a href="#markdown">Markdown</a></li><li><a href="#type-inference">Type Inference</a></li><li><a href="#errors-detected">Errors Detected</a></li><li><a href="#unorganized-content">Unorganized Content</a></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><figure style="width: 50%"><img alt="Lit logo" style="border: 0" src="/blog/assets/lit-logo.png?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://lit.dev?v=1.1.1" rel="noopener" target="_blank">Lit</a> is library that simplifies developing <a href="https://www.webcomponents.org/?v=1.1.1" rel="noopener" target="_blank">web components</a>.</p><p>Lit components are native web components. Implementing web components using Lit is easier that implementing them using only browser standards.</p><p>Web components define custom elements that can be used just like standard HTML elements.</p><p>Custom element names must include at least one hyphen. This avoids conflicting with the names of standard HTML elements.</p><p>Tags for custom elements cannot be self-closing, even when they have no content. For example, <code>&lt;my-element&gt;&lt;/my-element&gt;</code> is valid, but <code>&lt;my-element /&gt;</code> is not.</p><p>Web components can be used in any web page, with any web framework, and in Markdown files. This gives them much broader applicability than components implemented using a specific frameworks such as React.</p><p>Web components are more future-proof than other kinds of components because they are likely to be usable in applications built with future web frameworks.</p><h2 id="installing" tabindex="-1">Installing</h2><p>The easiest way to get started using Lit is to get the library from this <a href="https://cdn.jsdelivr.net/gh/lit/dist@3/core/lit-core.min.js?v=1.1.1" rel="noopener" target="_blank">CDN</a>. This single file can be saved locally to avoid depending on the CDN. The minimized, compressed file is only 6.7 KB.</p><p>Another approach is to use <a href="https://vitejs.dev/?v=1.1.1" rel="noopener" target="_blank">Vite</a>. This has many advantages including:</p><ul><li>configuration to use TypeScript</li><li>running in watch mode so code changes are automatically recompiled</li><li>automatic browser updates</li></ul><p>The following steps create a new project that uses Vite and Lit.</p><ol><li><p>Enter <code>npm create vite@latest</code>.</p></li><li><p>If prompted with &quot;OK to proceed?&quot;, press the return key.</p></li><li><p>After the &quot;Project name&quot; prompt, enter a project name.</p></li><li><p>For the &quot;Select a framework&quot; prompt, select &quot;Lit&quot;.</p></li><li><p>For the &quot;Select a variant&quot; prompt, select &quot;TypeScript&quot;.</p></li><li><p>cd to the new project directory.</p></li><li><p>Install dependencies by entering <code>npm install</code> or <code>bun install</code>.</p></li><li><p>Run the project by entering <code>npm run dev</code> or <code>bun dev</code>.</p><p>Currently running <code>bun dev</code> in macOS gives the error &quot;Cannot find module @rollup/rollup-darwin-x64&quot;. It should be looking for the ARM version, not the x64 version. A workaround is to use <code>npm run dev</code> for now.</p></li><li><p>Type &quot;h&quot; and press the return key for help.</p></li><li><p>Type &quot;o&quot; and press the return key to open a browser tab for localhost:5173.</p></li></ol><h2 id="basic-example" tabindex="-1">Basic Example</h2><p>The following code from the file <code>src/greet-message.ts</code> implements a basic custom element using Lit and TypeScript. Using TypeScript provides type checking in code editors like VS Code.</p><p>Using TypeScript also allows the use of decorators like <code>@customElement</code> and <code>@property</code>. The <code>@customElement</code> decorator assigns a name to the custom element. The <code>@property</code> decorator can declare attributes that can be applied to the custom element.</p><p>Lit components must extend the <code>LitElement</code> class. The <code>LitElement</code> class extends the <code>ReactiveElement</code> class (from Lit), which extends the <code>HTMLElement</code> class (from the HTML standard).</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// This value will come from an HTML attribute.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Checking for required attributes is optional.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// The `styles` property can be defined anywhere in</span><br>  <span class="token comment">// the class definition, not just at the bottom.</span><br>  <span class="token comment">// Making it "static" shares the value across all instances.</span><br>  <span class="token comment">// :host refers to outermost element rendered by this custom element.</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      color: purple;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The following code from the file <code>src/greet-message.js</code> implements the same custom element using JavaScript instead of TypeScript. JavaScript-based custom elements cannot use decorators, so they use a different approach to declare the custom element name and properties (attributes).</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> properties <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      color: purple;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following code from the file <code>src/greet-message-native.js</code> implements the same custom element using JavaScript. It uses the native web component approach rather than using Lit. Note how it relies on using DOM APIs like the <code>createElement</code> and <code>appendChild</code> methods.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'purple'</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> shadow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    shadow<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// Using shadow DOM is not required.  We can replace</span><br>    <span class="token comment">// the previous two lines with the following.</span><br>    <span class="token comment">// this.appendChild(div);</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following HTML renders the custom element defined above.</p><p><img alt="Lit greet-message" style="width: 20%" src="/blog/assets/lit-greet-message.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Lit Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Change src value to use a different web component version. --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/greet-message.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="properties" tabindex="-1">Properties</h2><p>Lit uses the <code>@property</code> decorator to declare the attributes that can be specified in instances of custom elements.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>The <code>@property</code> decorator takes a <code>PropertyDeclaration</code> object.</p><p>One of the supported options is <code>type</code>, which can have the value <code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>Array</code>, or <code>Object</code>. These are Lit type hints, not TypeScript types. The default <code>type</code> is <code>String</code>.</p><p>When the type is <code>Number</code>, the value is passed to the <code>Number</code> constructor which results in <code>NaN</code> for non-numeric strings.</p><p>When the type is <code>Boolean</code>, the value is set based on whether the attribute is present.</p><p>When the type is <code>Array</code> or <code>Object</code>, the value is passed to <code>JSON.parse</code> to get the property value.</p><p>Only string values can be specified in HTML. JavaScript must be used to set attributes to other types of values.</p><p>Lit does not provide a way to specify that an attribute is required. All <code>@property</code> declarations must be initialized, but they can be initialized to an empty string. The render method or any lifecycle method can check for required attributes and throw an error if not found. See the example in the &quot;Basic Example&quot; section above.</p><h2 id="state" tabindex="-1">State</h2><p>Lit uses the <code>@state</code> decorator to declare instance properties that are set via attributes.</p><p>These values are reactive, meaning that changing the value causes the <code>render</code> method to be called.</p><p>Instance properties that are declared without the <code>@property</code> or <code>@state</code> decorator are not reactive.</p><p>The following custom Lit element demonstrates the reactivity of <code>@property</code> and <code>@state</code> variables.</p><p><img alt="Lit reactivity" style="width: 30%" src="/blog/assets/lit-reactivity.png?v=1.1.1"></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'state-changes'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StateChanges</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> p <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> s <span class="token operator">=</span> <span class="token string">'initial'</span><span class="token punctuation">;</span><br>  v <span class="token operator">=</span> <span class="token string">'non-reactive'</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">changeV</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>    <span class="token comment">// v is not a reactive property,</span><br>    <span class="token comment">// so the change won't trigger a call to render.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">requestUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// triggers call to render</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        p: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>      &lt;div><br>        s: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>s<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeS<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>      &lt;div><br>        v: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeV<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>An instance of this custom element can be created as follows.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>state-changes</span> <span class="token attr-name">p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initial<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>state-changes</span><span class="token punctuation">></span></span></code></pre><h2 id="decorators" tabindex="-1">Decorators</h2><p>Lit supports many decorators. We have already seen <code>@customElement</code>, <code>@property</code>, and <code>@state</code>.</p><p>Other supported decorators include:</p><ul><li><p><code>@eventOptions</code></p><p>This specifies an options object to be passed to calls that Lit makes to <code>addEventListener</code> and <code>removeEventListener</code>. The supported options are documented in <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#options?v=1.1.1" rel="noopener" target="_blank">MDN</a>. They include <code>capture</code>, <code>once</code>, <code>passive</code>, and <code>signal</code>.</p><p>For example, adding <code>@eventOptions({once: true})</code> before the definition of a callback function prevents it from being called more than once.</p></li><li><p><code>@query</code></p><p>This specifies a CSS selector that will be used to query the DOM tree of the component to find a matching element. It is a applied to a property declaration and the property is set to a reference to the matching element.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `pBtn` to a reference to the `button`</span><br><span class="token comment">// inside the element with id "p".</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">query</span></span><span class="token punctuation">(</span><span class="token string">'#p button'</span><span class="token punctuation">)</span> pBtn<span class="token operator">!</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token comment">// This changes the color of button.</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>pBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;div id="p"><br>      p: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>    &lt;/div><br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>@queryAll</code></p><p>This specifies a CSS selector that will be used to query the DOM tree of the component to find all matching element. It is a applied to a property declaration and the property is set to a <code>NodeList</code> containing the matching elements.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `buttons` to a `NodeList` containing references</span><br><span class="token comment">// to all the `button` elements inside this component.</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAll</span></span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span> buttons<span class="token operator">!</span><span class="token operator">:</span> NodeList<span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token comment">// This changes the color of each `button`.</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> node <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>buttons<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> button <span class="token operator">=</span> node <span class="token keyword">as</span> HTMLButtonElement<span class="token punctuation">;</span><br>    button<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>@queryAsync</code></p><p>This is similar to to <code>@query</code>, but sets a property to a <code>Promise</code>.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token comment">// This sets `pBtn` to a `Promise` that will resolve to</span><br><span class="token comment">// a reference to the `button` inside the element with id "p".</span><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAsync</span></span><span class="token punctuation">(</span><span class="token string">'#p button'</span><span class="token punctuation">)</span> pBtn<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>HTMLButtonElement<span class="token operator">></span><span class="token punctuation">;</span><br><br><span class="token comment">// This is an event handling method that is</span><br><span class="token comment">// called when a specific button is clicked.</span><br><span class="token keyword">async</span> <span class="token function">changeP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'stop'</span> <span class="token operator">:</span> <span class="token string">'go'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> pBtn <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pBtn<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pBtn<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This changes the color of the button.</span><br>    pBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> <span class="token string">'go'</span> <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></li><li><p><code>@queryAssignedElements</code></p><p>This specifies a slot name or CSS selector. It sets a property to an array of <code>HTMLElement</code> objects representing the elements that were assigned to the slot or selected element.</p><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token comment">// selector: 'li'</span><br>  slot<span class="token operator">:</span> <span class="token string">'breakfast'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br>breakfastElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>To get the elements assigned to the default slot, omit the argument to <code>@queryAssignedElements</code>.</p><p>See examples in the &quot;Slots&quot; section below.</p></li><li><p><code>@queryAssignedNodes</code></p><p>This specifies a slot name or CSS selector. It sets a property to an array of <code>Node</code> objects representing the nodes (including <code>Text</code> nodes) that were assigned to the slot or selected element.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedNodes</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  slot<span class="token operator">:</span> <span class="token string">'lunch'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br>lunchNodes<span class="token operator">!</span><span class="token operator">:</span> Node<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>To get the nodes assigned to the default slot, omit the argument to <code>@queryAssignedNodes</code>.</p></li></ul><h2 id="tagged-template-literals" tabindex="-1">Tagged Template Literals</h2><p>Lit implements the <code>html</code> and <code>css</code> tagged template literals.</p><p>TODO: Describe what these provide beyond string concatenation.</p><h2 id="slots" tabindex="-1">Slots</h2><p>Web components can have one default slot and any number of named slots. These are defined using the HTML <code>slot</code> element. Instances of the component can specify content to be placed in the slots.</p><p>The following example demonstrates using slots.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>PropertyValueMap<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> queryAssignedElements<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'slots-demo'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SlotsDemo</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// To get an array of HTMLElement objects rather than Node objects,</span><br>  <span class="token comment">// use @queryAssignedElements.</span><br>  <span class="token comment">// Use @queryAssignedNodes when you also</span><br>  <span class="token comment">// want to capture Node objects like Text.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token comment">// selector: 'li'</span><br>    slot<span class="token operator">:</span> <span class="token string">'breakfast'</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  breakfastElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">queryAssignedElements</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  defaultElements<span class="token operator">!</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// The override keyword ensures that the method being overridden</span><br>  <span class="token comment">// is spelled correction and takes the correct parameters.</span><br>  override <span class="token function">firstUpdated</span><span class="token punctuation">(</span>changedProperties<span class="token operator">:</span> PropertyValueMap<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">firstUpdated</span><span class="token punctuation">(</span>changedProperties<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> el <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultElements<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> el <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>breakfastElements<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h2>&lt;slot>&lt;/slot>&lt;/h2><br>        &lt;h3>Breakfast&lt;/h3><br>        &lt;slot name="breakfast">No breakfast options&lt;/slot><br>        &lt;h3>Lunch&lt;/h3><br>        &lt;slot name="lunch">No lunch options&lt;/slot><br>        &lt;h3>Dinner&lt;/h3><br>        &lt;slot name="dinner">No dinner options&lt;/slot><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML renders the custom element defined above.</p><p><img alt="Lit slots demo" style="width: 25%" src="/blog/assets/lit-slots-demo.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Slots Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/slots-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slots-demo</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Menu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breakfast<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Eggs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Bacon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dinner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>spaghetti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>tacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>fried rice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slots-demo</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="lifecycle-methods" tabindex="-1">Lifecycle Methods</h2><p>Lit supports five lifecycle methods that are automatically called at specific points in the lifecycle of a custom element.</p><h3 id="adoptedcallback" tabindex="-1">adoptedCallback</h3><p>This lifecycle method is called when the instance is moved to a new document.</p><p>This method is rarely used.</p><h3 id="attributechangedcallback" tabindex="-1">attributeChangedCallback</h3><p>This lifecycle method is called when the value of an observed attribute changes.</p><h3 id="connectedcallback" tabindex="-1">connectedCallback</h3><p>This lifecycle method is called after an instance is added to the DOM. It can be used to add event listeners to elements outside this custom element. Typically anything done in this method is undone in the <code>disconnectedCallback</code> method.</p><h3 id="constructor" tabindex="-1">constructor</h3><p>This lifecycle method is called when an instance is initially created and again if the custom element definition is modified. It is commonly used for one time initializations such as computing property values.</p><h3 id="disconnectedcallback" tabindex="-1">disconnectedCallback</h3><p>This lifecycle method is called after an instance is removed from the DOM. It can be used to remove event listeners from elements outside this custom element. Typically anything done in the <code>connectedCallback</code> method is undone in this method.</p><h3 id="firstupdated" tabindex="-1">firstUpdated</h3><p>TODO: Describe this.</p><h3 id="performupdate" tabindex="-1">performUpdate</h3><p>TODO: Describe this.</p><h3 id="requestupdate" tabindex="-1">requestUpdate</h3><p>TODO: Describe this.</p><h3 id="shouldupdate" tabindex="-1">shouldUpdate</h3><p>TODO: Describe this.</p><h3 id="updated" tabindex="-1">updated</h3><p>TODO: Describe this.</p><h3 id="updatecomplete" tabindex="-1">updateComplete</h3><p>TODO: Describe this.</p><hr><p>The following code demonstrates each of the lifecycle methods except the rarely used <code>adoptedCallback</code> method.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br>@<span class="token function">customElement</span><span class="token punctuation">(</span><span class="token string">'lifecycle-demo'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LifecycleDemo</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><br>  <span class="token function">changeText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'changed'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'constructor entered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><br>    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span><br>    <span class="token literal-property property">oldValue</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">newValue</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span><br>  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> changed from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'connectedCallback entered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  override <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'disconnectedCallback entered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        text: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Change&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The following HTML demonstrates using the <code>lifecycle-demo</code> custom element. It uses <a href="/blog/topics/#/blog/alpine?v=1.1.1" rel="noopener" target="_blank">Alpine</a> to manage state and determine whether the custom element should be in the DOM.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Lifecycle Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><br>      <span class="token attr-name">defer</span><br>      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js<span class="token punctuation">"</span></span><br>    <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/lifecycle-demo.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">x-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{text: 'initial', show: false}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show = !show<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Toggle Show<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Text: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">x-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">x-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lifecycle-demo</span> <span class="token attr-name">:text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lifecycle-demo</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>Every time <code>show</code> changes from <code>false</code> to <code>true</code>, the <code>constructor</code> and <code>connectedCallback</code> methods are called.</p><p>Every time <code>show</code> changes from <code>true</code> to <code>false</code>, the <code>disconnectedCallback</code> method is called.</p><p>When the &quot;Change&quot; button is clicked, the value of the <code>text</code> property changes, but this does NOT trigger a call to the <code>attributeChangedCallback</code> method.</p><p>Every time the value of the <code>input</code> element is changed by the user, the value of the Alpine <code>text</code> variable changes. That causes a new value to be passed to the <code>lifecycle-demo</code> element through its <code>text</code> attribute. This DOES trigger a call to the <code>attributeChangedCallback</code> method.</p><p>The <code>render</code> method is called every time an <code>@property</code> or <code>@state</code> value changes. It's not necessary to implement the <code>attributeChangedCallback</code> method to make this happen.</p><h2 id="event-handling" tabindex="-1">Event Handling</h2><p>Lit supports registering event handling functions with attributes whose names begin with <code>@</code>, followed by an event name. The value must be a function object, not a call to a function or JavaScript code. String interpolation (<code>${fn}</code>) is used to insert the function into the <code>html</code> tagged template literal.</p><p>For example:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlertOnClick</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'in handleClick method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>      &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>handleClick<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>Click Me&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :host {<br>      border: 1px dashed red;<br>      padding: 1rem;<br>    }<br><br>    button {<br>      border-radius: 0.5rem;<br>      border: 3px solid cornflowerblue;<br>      padding: 0.5rem;<br>      background-color: lemonchiffon;<br>      cursor: pointer;<br>    }<br>    button:hover {<br>      background-color: orange;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="chess-board-example" tabindex="-1">Chess Board Example</h2><p><a href="https://mganjoo.github.io/gchessboard/?v=1.1.1" rel="noopener" target="_blank">gchessboard</a> is a web component (not using Lit) that renders a chess board. The pieces can be dragged to any squares, not just valid ones. This enables quickly setting up a position to study.</p><p><img alt="web component chess board" style="width: 50%" src="/blog/assets/web-component-chess-board.png?v=1.1.1"></p><p>To try this, add the following to a new file, perhaps named <code>chess.html</code>. Then open the HTML file in any modern web browser.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Chess Board<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">g-chess-board</span> <span class="token punctuation">{</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/gchessboard<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g-chess-board</span> <span class="token attr-name">fen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span> <span class="token attr-name">interactive</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g-chess-board</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="markdown" tabindex="-1">Markdown</h2><p>Web components can be used in Markdown files.</p><p>When using Vite with the Lit template:</p><ol><li><p>Enter <code>npm run build</code>.</p></li><li><p>Copy the generated <code>.js</code> file.</p><p>Copy <code>dist/assets/index_*.js</code> to a directory that is accessible to the server that servers the Markdown file. For my 11ty-based blog, this is the <code>src/assets</code> directory.</p></li><li><p>Rename the copied file to something more meaningful.</p><p>For example, the name could be <code>lit-components.js</code>.</p></li><li><p>Add a script tag in the Markdown file.</p><p>This should point to the renamed <code>.js</code> file. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/blog/assets/lit-components.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></li><li><p>Use the custom element. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message</span><span class="token punctuation">></span></span></code></pre></li></ol><p>The following is an example of using a web component in the blog page you are currently reading. Try inspecting the page and changing the value of the <code>name</code> attribute. The update will be seen on the page.</p><script type="module" src="/blog/assets/lit-components.js"></script><p><greet-message name="Markdown"></greet-message></p><h2 id="type-inference" tabindex="-1">Type Inference</h2><p>When an instance of a custom element is created using the DOM <code>createElement</code> method, TypeScript cannot infer the specific type and assumes it is <code>HTMLElement</code>.</p><p>For example, in the following code TypeScript will infer the type of <code>el</code> to be <code>HTMLElement</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'alert-on-click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For many custom elements, this is not a concern because element instances will be created in this way. When this is a concern, enable inferring a more specific type by adding an entry to the <code>HTMLElementTagNameMap</code> as follows.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> global <span class="token punctuation">{</span><br>  <span class="token keyword">interface</span> <span class="token class-name">HTMLElementTagNameMap</span> <span class="token punctuation">{</span><br>    <span class="token string-property property">'alert-on-click'</span><span class="token operator">:</span> AlertOnClick<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>With this in place, the type of <code>el</code> will be inferred to be <code>AlertOnClick</code>.</p><h2 id="errors-detected" tabindex="-1">Errors Detected</h2><p>Lit error detection includes the following:</p><ul><li>defining multiple custom elements with the same name</li></ul><p>The following kinds of errors are not detected.</p><ul><li><p>Mistyping the name of a custom element in HTML.</p><p>The element will be treated as if it were a <code>div</code> element.</p></li></ul><h2 id="unorganized-content" tabindex="-1">Unorganized Content</h2><p>To force a custom element instance to update, call its <code>requestUpdate</code> method.</p></article>