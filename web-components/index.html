<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Web Components</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#dom-terminology">DOM Terminology</a></li><li><a href="#pros-and-cons">Pros and Cons</a></li><li><a href="#open-ui">Open UI</a></li><li><a href="#migrating-to-web-components">Migrating to Web Components</a></li><li><a href="#basic-example">Basic Example</a></li><li><a href="#options">Options</a></li><li><a href="#libraries-that-simplify">Libraries That Simplify</a></li><li><a href="#available-web-components">Available Web Components</a></li><li><a href="#custom-elements">Custom Elements</a></li><li><a href="#shadow-dom">Shadow DOM</a><ol><li><a href="#piercing-the-shadow-dom">Piercing the Shadow DOM</a><ol><li><a href="#inheritable-css-properties">Inheritable CSS Properties</a></li><li><a href="#css-variables">CSS Variables</a></li><li><a href="#part-attributes">part Attributes</a></li><li><a href="#shared-css-files">Shared CSS Files</a></li></ol></li><li><a href="#forms">Forms</a></li></ol></li><li><a href="#javascript-modules">JavaScript Modules</a></li><li><a href="#html-templates">HTML Templates</a></li><li><a href="#slots-and-parts">Slots and Parts</a></li><li><a href="#lifecycle-methods">Lifecycle Methods</a><ol><li><a href="#constructor">constructor</a></li><li><a href="#connectedcallback">connectedCallback</a></li><li><a href="#attributechangedcallback(name%2C-oldvalue%2C-newvalue)">attributeChangedCallback(name, oldValue, newValue)</a></li><li><a href="#disconnectedcallback">disconnectedCallback</a></li><li><a href="#adoptedcallback">adoptedCallback</a></li></ol></li><li><a href="#attributes">Attributes</a></li><li><a href="#elements">Elements</a></li><li><a href="#flash-of-undefined-custom-elements-(fouce)">Flash Of Undefined Custom Elements (FOUCE)</a></li><li><a href="#counter-example">Counter Example</a><ol><li><a href="#vanilla-with-no-shadow-dom">Vanilla with No Shadow DOM</a></li><li><a href="#vanilla-with-shadow-dom-%22open%22">Vanilla with Shadow DOM "open"</a></li><li><a href="#vanilla-with-shadow-dom-%22closed%22">Vanilla with Shadow DOM "closed"</a></li><li><a href="#lit">Lit</a></li><li><a href="#wrec">wrec</a></li></ol></li><li><a href="#web-component-documentation">Web Component Documentation</a><ol><li><a href="#custom-elements-manifest">Custom Elements Manifest</a></li><li><a href="#code-bubble">Code Bubble</a></li><li><a href="#wc-dox">wc-dox</a></li><li><a href="#storybook">Storybook</a></li><li><a href="#web-components-language-server">Web Components Language Server</a></li></ol></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><figure style="width: 30%"><img alt="Web Components logo" style="border: 0" src="/blog/assets/web-components-logo.svg?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p>See my talk on Web Components at <a href="https://drive.google.com/file/d/16rGM2L8psBGlQ-Zhu6EBXN1GMO30YdRF/view" target="_blank">OCI Tech Lunch - July 2025</a>.</p><p>See my updated slides from this talk at <a href="https://github.com/mvolkmann/talks/blob/master/lambda-calculus.key.pdf" target="_blank">Lambda Calculus slides</a>.</p><p><a href="https://www.webcomponents.org/introduction?v=1.1.1" rel="noopener" target="_blank">Web components</a> define custom HTML elements that can be used just like standard HTML elements. They are defined by a set of standards that include the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements" target="_blank">Custom Elements</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_shadow_DOM" target="_blank">Shadow DOM</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/template" target="_blank">HTML Templates</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank">JavaScript Modules</a>.</p><p>Web components can be used in any web page, with any web framework, and in Markdown files. This gives them much broader applicability than components implemented using a specific frameworks such as React. Those components can typically only be used in applications that use the same framework.</p><p>Web components are more future-proof than other kinds of components because they are likely to be usable in applications built with future web frameworks.</p><p>Implementing a web component requires a bit more effort than implementing components using a framework like Svelte. The extra effort is worthwhile for components that will be used in multiple apps written using multiple frameworks. Even if you are only using one web framework today, that may change in the future. The investment in creating high quality, reusable web components is likely to pay off in the long run.</p><p>Web components can encapsulate their markup, styles, and functionality by using a &quot;shadow DOM&quot;.</p><p>Tags for custom elements cannot be self-closing, even when they have no content. For example, <code>&lt;my-element&gt;&lt;/my-element&gt;</code> is valid, but <code>&lt;my-element /&gt;</code> is not. HTML parsers only handle a fixed set of &quot;void elements&quot; that can be self-closing. Commonly used examples include <code>br</code>, <code>hr</code>, <code>img</code>, <code>input</code>, <code>link</code>, and <code>meta</code>.</p><h2 id="dom-terminology" tabindex="-1">DOM Terminology</h2><p>The term &quot;shadow DOM&quot; refers to DOM nodes that have an ancestor that is a &quot;shadow root&quot;. A shadow root is created by calling the <code>HTMLElement</code> <code>attachShadow</code> method.</p><p>The term &quot;shadow host&quot; refers to the regular DOM node to which the shadow root is attached.</p><p>The term &quot;light DOM&quot; refers to DOM nodes that are supplied as slot content to a web component.</p><p>The term &quot;regular DOM&quot; refers to all DOM nodes that are not in a shadow DOM or light DOM.</p><h2 id="pros-and-cons" tabindex="-1">Pros and Cons</h2><p>Some of the pros of using web components include:</p><ul><li>only uses web standards</li><li>very portable ... can be used in all web frameworks</li><li>no build tools are required unless using TypeScript</li></ul><p>Some of the cons of using web components include:</p><ul><li>more tedious to implement than components in frameworks like Svelte</li><li>need to use another library like Lit to simplify</li></ul><h2 id="open-ui" tabindex="-1">Open UI</h2><p><a href="https://open-ui.org?v=1.1.1" rel="noopener" target="_blank">Open UI</a> is a W3C Community Group whose goal is &quot;to allow web developers to style and extend built-in web UI components and controls, such as select dropdowns, checkboxes, radio buttons, and date/color pickers.&quot;</p><p>The components proposed by this group could eventually work their way into the HTML specification. This would provide native alternatives to some of the web components we might build and use today.</p><p>See the list of components being explored at the Open UI link above.</p><h2 id="migrating-to-web-components" tabindex="-1">Migrating to Web Components</h2><p>A recommended way to begin using web components in existing web applications is to identify their UI components that would be useful in other applications and one-by-one rewrite them as web components.</p><h2 id="basic-example" tabindex="-1">Basic Example</h2><p>The following file <code>src/greet-message.js</code> defines a web component.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token comment">// This constructor can be omitted for approach #1.</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Approach #1</span><br>    <span class="token comment">// Using shadow DOM is not required.</span><br>    <span class="token comment">/*<br>    const div = document.createElement('div');<br>    div.textContent = `Hello, ${name}!`;<br>    div.style.color = 'purple';<br>    this.appendChild(div);<br>    */</span><br><br>    <span class="token comment">// Approach #2</span><br>    <span class="token comment">/*<br>    const div = document.createElement('div');<br>    div.textContent = `Hello, ${name}!`;<br>    div.style.color = 'purple';<br><br>    this.shadowRoot.appendChild(div);<br>    */</span><br><br>    <span class="token comment">// Approach #3</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// attributeChangedCallback will only be called for attributes listed here.</span><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// Setting innerHTML removes the need to use low-level</span><br>    <span class="token comment">// DOM methods like `createElement` and `appendChild`.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div style="color: purple;">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>It is common to use a template literal (in backticks) to construct the string used as the value of the <code>innerHTML</code> property.</p><p>When the string contains an optional HTML element, the following pattern can be used to specify it.</p><pre class="language-js"><code class="language-js">element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  &lt;always-present>&lt;/always-present><br>  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;optionally-present>&lt;/optionally-present></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>  &lt;always-present>&lt;/always-present><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre><p>When the string contains an HTML element with an optional attribute, the following pattern can be used to specify it.</p><pre class="language-js"><code class="language-js">element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  &lt;some-element </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">some-attr="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>&lt;/some-element><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre><p>The following HTML renders an instance of the web component defined above. It uses <a href="https://alpinejs.dev/?v=1.1.1" rel="noopener" target="_blank">Alpine</a> to add a bit of interactivity.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Web Components Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>greet-message.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><br>      <span class="token attr-name">defer</span><br>      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js<span class="token punctuation">"</span></span><br>    <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">x-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{name: 'World'}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name = 'Earth'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Change Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="options" tabindex="-1">Options</h2><p>There are three options for implementing web components:</p><ol><li>Do not use a shadow DOM.</li><li>Use an &quot;open&quot; shadow DOM.</li><li>Use a &quot;closed&quot; shadow DOM.</li></ol><p>Regardless of the option selected, there are two ways to specify the component DOM:</p><ol><li>Set the <code>innerHTML</code> property of some object.</li><li>Call the <code>appendChild</code> method on some object.</li></ol><p>When not using a shadow DOM, &quot;some object&quot; is <code>this</code>.</p><p>When using an open shadow DOM, &quot;some object&quot; is <code>this.shadowRoot</code>.</p><p>When using a closed shadow DOM, &quot;some object&quot; is the return value of the <code>attachShadow</code> method.</p><p>There are two places where you might consider specifying the DOM of the web component, in its constructor or in its <code>connectedCallback</code> method. While doing this in the constructor sometimes works, it is discouraged. The reason is that when the constructor runs, the attributes and child nodes of the custom element are not yet known.</p><p>To create a shadow DOM, call <code>this.attachShadow({mode: &quot;open&quot;})</code> or <code>this.attachShadow({mode: &quot;closed&quot;})</code>. The <code>attachShadow</code> method returns a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot?v=1.1.1" rel="noopener" target="_blank">ShadowRoot</a> object.</p><p>The recommended mode is &quot;open&quot;, which causes <code>this.shadowRoot</code> to be set to the same <code>ShadowRoot</code> object that is returned. When the mode is &quot;closed&quot;, <code>this.shadowRoot</code> is not set.</p><p>It either mode, code in the web component can add nodes to the <code>ShadowRoot</code> object by setting its <code>innerHTML</code> property or calling its <code>appendChild</code> method.</p><p>When the mode is &quot;open&quot;, code outside the web component can query, add, modify, and delete its nodes and styles. However, when the mode is &quot;closed&quot;, none of that is possible unless the web component implements methods that provide access to descendants of the <code>ShadowRoot</code> object. For example, calling the <code>querySelectorAll</code> method on a custom element that uses a shadow DOM in &quot;closed&quot; mode always returns an empty <code>NodeList</code> regardless of the selector.</p><p>In browser DevTools, all ancestors of the <code>ShadowRoot</code> are visible regardless of the mode.</p><h2 id="libraries-that-simplify" tabindex="-1">Libraries That Simplify</h2><ul><li><a href="/blog/topics/#/blog/lit/?v=1.1.1" rel="noopener" target="_blank">Lit</a></li><li><a href="https://stenciljs.com?v=1.1.1" rel="noopener" target="_blank">Stencil</a></li><li><a href="https://fast.design?v=1.1.1" rel="noopener" target="_blank">Microsoft FAST</a></li></ul><h2 id="available-web-components" tabindex="-1">Available Web Components</h2><ul><li><p><a href="https://backers.webawesome.com?v=1.1.1" rel="noopener" target="_blank">Web Awesome</a></p><p>&quot;Make something awesome with open-source web components.&quot;</p></li><li><p><a href="https://shoelace.style?v=1.1.1" rel="noopener" target="_blank">Shoelace</a></p><p>&quot;A forward-thinking library of web components.&quot;</p></li><li><p><a href="https://github.com/microsoft/fluentui/tree/master/packages/web-components?v=1.1.1" rel="noopener" target="_blank">Fluent UI Web Components</a></p><p>from Microsoft</p></li><li><p><a href="https://lion-web.netlify.app?v=1.1.1" rel="noopener" target="_blank">Lion</a></p><p>&quot;Fundamental white label web components for building your design system.&quot;</p></li><li><p><a href="https://github.com/davatron5000/awesome-standalones?v=1.1.1" rel="noopener" target="_blank">Awesome Standalones</a> from Dave Rupert</p><p>&quot;A curated list of awesome framework-agnostic standalone web components.&quot;</p></li><li><p><a href="https://genericcomponents.netlify.app?v=1.1.1" rel="noopener" target="_blank">generic-components</a></p></li><li><p><a href="https://lottiefiles.github.io/lottie-player/?v=1.1.1" rel="noopener" target="_blank">Lottie Player</a></p><p>This web component enables playing Lottie animations. It can be included from a CDN with the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/@lottiefiles/lottie-player@0.2.0/dist/lottie-player.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>To render an animation, add the <code>lottie-player</code> custom element in HTML as follows:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lottie-player</span><br>  <span class="token attr-name">autoplay</span><br>  <span class="token attr-name">loop</span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://assets3.lottiefiles.com/packages/lf20_UJNc2t.json<span class="token punctuation">"</span></span><br>  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 250px</span><span class="token punctuation">"</span></span></span><br><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lottie-player</span><span class="token punctuation">></span></span></code></pre></li></ul><p>For more, see <a href="https://open-wc.org/guides/community/component-libraries/?v=1.1.1" rel="noopener" target="_blank">Community: Component Libraries</a>.</p><h2 id="custom-elements" tabindex="-1">Custom Elements</h2><p><a href="https://html.spec.whatwg.org/multipage/custom-elements.html?v=1.1.1" rel="noopener" target="_blank">Custom Elements</a> provide a way to define and use custom HTML elements.</p><p>A custom element is defined by a JavaScript class that extends <code>HTMLElement</code>. The following code in the file <code>hello-world.js</code> demonstrates a very basic web component.</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello, World!'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>A tag name can be associated with this class as follows:</p><pre class="language-js"><code class="language-js">customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'hello-world'</span><span class="token punctuation">,</span> HelloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The names of custom elements must be all lowercase and contain at least one hyphen (dash). This avoids name conflicts with standard HTML elements.</p><p>The name of the class that implements a custom element is not required to correspond to the tag name in any way. However, a common convention is for class names to use CamelCase and element names to use kebab-case.</p><p>Often the part before the first hyphen serves as a namespace. For example, all the custom elements provided by <a href="https://shoelace.style?v=1.1.1" rel="noopener" target="_blank">Shoelace</a> begin with &quot;sl-&quot;.</p><p>The following HTML demonstrates using the custom element defined above.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Custom Element Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello-world.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hello-world</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hello-world</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="shadow-dom" tabindex="-1">Shadow DOM</h2><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_shadow_DOM?v=1.1.1" rel="noopener" target="_blank">Shadow DOM</a> provides a way to encapsulate the content and styling of a custom element.</p><p>Many standard HTML elements utilize a shadow DOM. Examples include <code>input</code>, <code>audio</code>, <code>video</code>, and <code>detail</code>. This can be seen by examining such elements in the Chrome DevTools &quot;Elements&quot; tab. The &quot;shadow-root&quot; of standard HTML elements can only be viewed in the DevTools when enabled. To enable this, click the settings gear icon, scroll to the &quot;Elements&quot; section, and check &quot;Show user agent shadow DOM&quot;. The &quot;shadow-root&quot; of custom elements is always visible.</p><p>To use a shadow DOM in a web component, add a line line the following in the constructor where the value of <code>mode</code> is <code>'open'</code> or <code>'closed'</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>To add content to the shadow DOM in a web component, add a line like the following in the <code>connectedCallback</code> method:</p><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>someElement<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The CSS <code>display</code> property for custom elements defaults to &quot;inline&quot;. Often it is desirable to change this to &quot;block&quot; or &quot;inline-block&quot;. To do this, use the <code>:host</code> CSS pseudo-class. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">:host</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="piercing-the-shadow-dom" tabindex="-1">Piercing the Shadow DOM</h3><p>The CSS defined in web components that create a shadow DOM is scoped to them. It does not &quot;leak out&quot; to affect HTML outside it.</p><p>By default, web component styling cannot be modified by users of the web components. There are four workarounds for this, each described below.</p><h4 id="inheritable-css-properties" tabindex="-1">Inheritable CSS Properties</h4><p>Inheritable CSS properties, of which there are many, can be used by web components. These include <code>color</code>, <code>cursor</code>, <code>font</code>, <code>font-family</code>, <code>font-size</code>, <code>font-style</code>, <code>font-variant</code>, <code>font-weight</code>, <code>letter-spacing</code>, <code>line-height</code>, <code>text-align</code>, <code>text-indent</code>, <code>text-transform</code>, <code>visibility</code>, and <code>white-space</code>, <code>word-spacing</code>.</p><p>For example, suppose we want to set the color used for <code>label</code> elements in a custom element named <code>dog-data</code>. In the <code>head</code> element of the main HTML file, add the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">dog-data</span> <span class="token punctuation">{</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>Then in the web component that defines the custom element, add the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">label</span> <span class="token punctuation">{</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h4 id="css-variables" tabindex="-1">CSS Variables</h4><p>Web components can allow specific CSS property overrides by using CSS variables with default values.</p><p>For example, suppose we want to allow users of the <code>dog-data</code> custom element to select the label color which defaults to &quot;purple&quot;. In the web component that defines the custom element, add the following:</p><style>label {
    color: var(--dog-data-label-color, purple);
  }</style><p>The <code>var</code> above specifies that the <code>color</code> should be the value of the <code>--dog-data-label-color</code> CSS variable if it is set, and &quot;purple&quot; otherwise.</p><p>Then in the <code>head</code> element of the main HTML file, add the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">dog-data</span> <span class="token punctuation">{</span><br>    <span class="token property">--dog-data-label-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">/* OR */</span><br><br>  <span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token property">--dog-data-label-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h4 id="part-attributes" tabindex="-1">part Attributes</h4><p>The styles of elements rendered by web components that use a shadow DOM can be modified if they have a <code>part</code> attribute.</p><p>For example, suppose we want to enable styling a <code>span</code> element in the custom element <code>my-counter</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">part</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${this.count}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre><p>In HTML that uses the custom element, add CSS like the following:</p><pre class="language-css"><code class="language-css"><span class="token selector">my-counter::part(count)</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h4 id="shared-css-files" tabindex="-1">Shared CSS Files</h4><p>Another way to share styles across components is to have each refer to the same <code>.css</code> file. For example, the following main page and two web components all use the file <code>share.css</code> to get the same styling for all <code>button</code> elements.</p><p>In <code>share.css</code>:</p><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>In <code>index.html</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>share.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wc-one.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wc-two.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wc-one</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wc-one</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wc-two</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wc-two</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>In <code>wc-one.js</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">WCOne</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;link rel="stylesheet" href="share.css" /><br>      &lt;button>WC One&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'wc-one'</span><span class="token punctuation">,</span> WCOne<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In <code>wc-two.js</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">WCTwo</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;link rel="stylesheet" href="share.css" /><br>      &lt;button>WC Two&lt;/button><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'wc-two'</span><span class="token punctuation">,</span> WCTwo<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="forms" tabindex="-1">Forms</h3><p>Instances of web components that are nested in a <code>form</code> element cannot by default contribute to the set of name/value pairs that are submitted by the form. They are prevented from doing so by the shadow DOM. However, this can be implemented if the static property <code>formAssociated</code> is set to <code>true</code> and the component sets the form values to be contributed to the containing form using the <code>setFormValue</code> method on an object returned by the <code>HTMLElement</code> method <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/attachInternals?v=1.1.1" rel="noopener" target="_blank">attachInternals</a> method.</p><p>To demonstrate this, let's create three web components that render a group of radio buttons.</p><p>First, we will look at an implementation that does not use a shadow DOM. Instances of this component can be nested in <code>form</code> elements and their values will be automatically included in form submissions.</p><p>An example instance follows. It takes the required attributes &quot;name&quot; and &quot;options&quot;. The &quot;name&quot; attribute is the name associate with the value in a form submission. The &quot;options&quot; attribute is a comma-separated list of radio button values that are also used for the labels that follow them. It also accepts the optional attributes &quot;default&quot; and &quot;value&quot;. If the &quot;value&quot; attribute is omitted, the &quot;default&quot; value is used. If the &quot;default&quot; attribute is also omitted, the first option is used.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>radio-group-no-shadow</span><br>  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color1<span class="token punctuation">"</span></span><br>  <span class="token attr-name">options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red,green,blue<span class="token punctuation">"</span></span><br>  <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>green<span class="token punctuation">"</span></span><br>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>radio-group-no-shadow</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">RadioGroupNoShadow</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  #name<span class="token punctuation">;</span><br>  #value<span class="token punctuation">;</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'options'</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=></span> option<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#value <span class="token operator">=</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token operator">||</span> options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;style><br>        :not(:defined) {<br>          visibility: hidden;<br>        }<br><br>        .radio-group {<br>          display: flex;<br>          gap: 0.25rem;<br><br>          > div {<br>            display: flex;<br>            align-items: center;<br>          }<br>        }<br>      &lt;/style><br>      &lt;div class="radio-group"><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#makeRadio</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">#makeRadio</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;input<br>          type="radio"<br>          id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          name="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>#name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#value <span class="token operator">?</span> <span class="token string">'checked'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>        &lt;label for="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/label><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'radio-group-no-shadow'</span><span class="token punctuation">,</span> RadioGroupNoShadow<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Next, we will look at an implementation that does use a shadow DOM. It can be used in same way as &quot;radio-group-no-shadow&quot;, but its implementation is a bit more complicated in order to work around the restrictions of the shadow DOM.</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">RadioGroupShadow</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> formAssociated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  #<span class="token keyword">default</span><span class="token punctuation">;</span><br>  #internals<span class="token punctuation">;</span><br>  #name<span class="token punctuation">;</span><br>  #value<span class="token punctuation">;</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#internals <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachInternals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'options'</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=></span> option<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#<span class="token keyword">default</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token operator">||</span> options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#<span class="token keyword">default</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;style><br>        :not(:defined) {<br>          visibility: hidden;<br>        }<br><br>        .radio-group {<br>          display: flex;<br>          gap: 0.25rem;<br><br>          > div {<br>            display: flex;<br>            align-items: center;<br>          }<br>        }<br>      &lt;/style><br>      &lt;div class="radio-group"><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#makeRadio</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Add event listeners to the radio buttons.</span><br>    <span class="token keyword">const</span> inputs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> input <span class="token keyword">of</span> inputs<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">formResetCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#<span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> input <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      input<span class="token punctuation">.</span>checked <span class="token operator">=</span> input<span class="token punctuation">.</span>value <span class="token operator">===</span> value<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">#makeRadio</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;input<br>          type="radio"<br>          id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          name="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>#name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">'checked'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>        &lt;label for="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/label><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#value<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#value <span class="token operator">=</span> newValue<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#internals<span class="token punctuation">.</span><span class="token function">setFormValue</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'radio-group-shadow'</span><span class="token punctuation">,</span> RadioGroupShadow<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Finally, we will look at an implementation in TypeScript that uses the Lit library. It can also be used in same way as &quot;radio-group-no-shadow&quot;. This has about the same complexity and number of lines as the <code>RadioGroupShadow</code> class.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>LitElement<span class="token punctuation">,</span> css<span class="token punctuation">,</span> html<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'radio-group-lit'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RadioGroupLit</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> formAssociated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  #internals<span class="token punctuation">;</span><br>  #options<span class="token punctuation">;</span><br><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    :not(:defined) {<br>      visibility: hidden;<br>    }<br><br>    .radio-group {<br>      display: flex;<br>      gap: 0.25rem;<br><br>      > div {<br>        display: flex;<br>        align-items: center;<br>      }<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// used in form submission</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span> options <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// comma-separated list</span><br>  <span class="token comment">// This is the reset value and</span><br>  <span class="token comment">// the initial value if the "value" attribute is not specified.</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">)</span> value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// current value</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#internals <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachInternals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>label <span class="token operator">=></span> label<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">formResetCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called when a radio button or its label is clicked.</span><br>  <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">#makeRadio</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;input<br>          type="radio"<br>          id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          name="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"<br>          .checked=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>          @change=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>        /><br>        &lt;!-- Note the "." before "checked", not "?", in order to<br>             update the "checked" property of the input element<br>             and not just the checked attribute. --><br>        &lt;label for="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/label><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This called automatically initially and</span><br>  <span class="token comment">// whenever a property value changes (such as "value").</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div class="radio-group"><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>#options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#makeRadio</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// This is called automatically after every DOM update,</span><br>  <span class="token comment">// such as those triggered by the render method.</span><br>  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Keep the form value in sync with the "value" property.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>#internals<span class="token punctuation">.</span><span class="token function">setFormValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>All the example implementations above contribute a single value to a form submission. A web component that does not use a shadow DOM can contribute multiple values by simply rendering multiple <code>input</code>, <code>textarea</code>, and <code>select</code> elements. A web component that uses a shadow DOM can do this using the <code>FormData</code> class. For example, the lines that call the <code>setFormValue</code> method in the <code>RadioGroupShadow</code> and <code>RadioGroupLit</code> classes can be replaced with the following code:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#name<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br>data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'favoriteNumber'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">this</span><span class="token punctuation">.</span>#internals<span class="token punctuation">.</span><span class="token function">setFormValue</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="javascript-modules" tabindex="-1">JavaScript Modules</h2><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules?v=1.1.1" rel="noopener" target="_blank">JavaScript Modules</a> support exporting and importing functions, classes, objects, constants, and variables.</p><p>To use the <code>export</code> and <code>import</code> keywords in a JavaScript source file, it must be included with a <code>script</code> element like the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{path-to-js-file}<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>Including the <code>defer</code> attribute is recommended. It allows the download of the JavaScript file to occur in parallel with parsing the HTML and downloading other JavaScript files. Top-level JavaScript statements in the downloaded files will not be executed until HTML parsing completes. Each downloaded file will be executed in the order specified rather than the order in which each download completes.</p><h2 id="html-templates" tabindex="-1">HTML Templates</h2><p>The HTML <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_templates_and_slots?v=1.1.1" rel="noopener" target="_blank">template element</a> provides a way to define an HTML fragment that can be cloned and inserted multiple times into a DOM tree. This is fast because the content of a <code>template</code> element in parsed only once. The resulting DOM root element is assigned to its <code>content</code> property.</p><p>All <code>template</code> elements have their CSS <code>display</code> property set to <code>none</code>, so their content is not rendered. Changing the <code>display</code> property to another value does not cause it to render.</p><p>To render the contents of a template, create a deep clone and append the clone to another element. This is faster than parsing an HTML string again. For example:</p><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>myTemplate<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Templates can contain slots that are used to insert content. Each template can contain one unnamed slot and any number of named slots. This is primarily useful when <code>template</code> elements are cloned by web components.</p><p>The following code demonstrates using a <code>template</code> element inside a web component. This approach has the advantage that the content of a web component can be described with HTML instead of creating it using DOM methods like <code>createElement</code> and <code>appendChild</code>. However, it has the disadvantage that the web component definition must assume that a <code>template</code> with a given <code>id</code> has been defined outside it.</p><p>HTML does not define a mechanism for including one HTML file into another. So we can't define templates in a separate file that is included.</p><p><img alt="Web Components and templates" style="width: 40%" src="/blog/assets/web-component-templates.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyCard</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-card'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'my-card'</span><span class="token punctuation">,</span> MyCard<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Template Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-card.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Template Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token comment">&lt;!-- This styling is only scoped when the<br>           template is used in a web component. --></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>        <span class="token selector">.card</span> <span class="token punctuation">{</span><br>          <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>          <span class="token property">background-color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span><br>          <span class="token property">border</span><span class="token punctuation">:</span> 3px solid blue<span class="token punctuation">;</span><br>          <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>          <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token selector">h2</span> <span class="token punctuation">{</span><br>          <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span><br>          <span class="token property">margin-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Untitled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-card</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Title #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>header #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>body #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>footer #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-card</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-card</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Title #2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>body #2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-card</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="slots-and-parts" tabindex="-1">Slots and Parts</h2><p>A web component can render HTML that includes slots and parts. Slots are locations where content can be inserted. Each web component can have one default slot (unnamed) and any number of named slots.</p><p>A web component can identify some of the elements it renders as &quot;parts&quot;. This enables the parts to be styled from outside of the shadow DOM. It is an alternative to using CSS variables to &quot;pierce&quot; the shadow DOM, which was described earlier.</p><p>The following example demonstrates a web component that uses both slots and parts.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">VanillaWC</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">;</span><br><br>    root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;style><br>        /* This targets the shadow host. */<br>        :host {<br>          display: inline-block;<br><br>          border: 1px solid blue;<br>          padding: 1rem;<br>          width: 30%;<br>        }<br><br>        /* This targets any top-level child placed in the slot named "nav". */<br>        slot[name="nav"]::slotted(*) {<br>          border-bottom: 1px solid blue;<br>        }<br><br>        /* This could be used in place of the previous rule.<br>        nav {<br>          border-bottom: 1px solid blue;<br>        } */<br><br>        /* This targets any top-level p elements placed in any slot.<br>          ::slotted only supports single-element selectors. */<br>        ::slotted(p) {<br>          color: green;<br>          font-style: italic;<br>        }<br>      &lt;/style><br>      &lt;div><br>        &lt;h2>Vanilla Web Component&lt;/h2><br>        &lt;nav>&lt;slot name="nav">&lt;/slot>&lt;/nav><br>        &lt;div part="header">header&lt;/div><br>        &lt;p>&lt;slot>&lt;/slot>&lt;/p><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'vanilla-wc'</span><span class="token punctuation">,</span> VanillaWC<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code>::slotted</code> pseudo-element styles light DOM elements. It only works in CSS specified inside a shadow DOM. It applies to actual elements in slots, not text nodes.</p><p>The following HTML demonstrates using the web component defined above.</p><p><img alt="Web Component slots and parts" style="border: 0; width: 60%" src="/blog/assets/web-component-slots-parts.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Web Component Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token comment">/* This specifies inheritable styles that will be<br>         used by web components unless overridden. */</span><br>      <span class="token selector">body</span> <span class="token punctuation">{</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><br>        <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">/* This targets the part named "header" in the web component. */</span><br>      <span class="token selector">vanilla-wc::part(header)</span> <span class="token punctuation">{</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span><br>        <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>        <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">/* This targets all a elements in light DOM<br>         which includes the elements inserted into slots. */</span><br>      <span class="token selector">vanilla-wc a</span> <span class="token punctuation">{</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/vanilla-wc.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vanilla-wc</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Come and listen to a story about a man named Jed,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        a poor mountaineer, barely kept his family fed.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        Then one day he was shootin at some food<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        and up through the ground came a bubblin crude.<br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vanilla-wc</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="lifecycle-methods" tabindex="-1">Lifecycle Methods</h2><p>Custom elements have lifecycle methods that are automatically called at specific points during their lifetime or when specific things occur. These include the following.</p><h3 id="constructor" tabindex="-1">constructor</h3><p>This lifecycle method is called automatically when an instance is initially created and again if the custom element definition is modified. It is commonly used for one time initializations such as computing property values.</p><p>This method can be omitted if no initializations are required. If a constructor is included, it must begin with a call to <code>super</code> which executes the constructor in the superclass <code>HTMLElement</code>.</p><h3 id="connectedcallback" tabindex="-1">connectedCallback</h3><p>This lifecycle method is called automatically after an instance is added to the DOM. This method is typically used to add elements to the DOM of the web component and add event listeners.</p><p>An event listener can be a specific method in a web component, or simply <code>this</code>. When <code>this</code> is specified and the event is dispatched, the <code>handleEvent</code> method is called, passing it an <code>Event</code> object. For example:</p><pre class="language-js"><code class="language-js"><br><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> decrementBtn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#decrement-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  decrementBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>incrementBtn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#increment-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>incrementBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>incrementBtn<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="attributechangedcallback(name%2C-oldvalue%2C-newvalue)" tabindex="-1">attributeChangedCallback(name, oldValue, newValue)</h3><p>This lifecycle method is called automatically when the value of an observed attribute changes.</p><p>To define the attributes that are observed, implement the following static method. This cannot be determined dynamically when an instance of the custom element is created.</p><pre class="language-js"><code class="language-js"><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name1'</span><span class="token punctuation">,</span> <span class="token string">'name2'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Do something with the new attribute value.</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// assumes this method exists and updates the shadow DOM</span><br><span class="token punctuation">}</span></code></pre><p>In Lit, all properties with the <code>@property</code> and <code>@state</code> decorators are automatically treated as observed properties. Lit refers to them as &quot;reactive properties&quot;.</p><h3 id="disconnectedcallback" tabindex="-1">disconnectedCallback</h3><p>This lifecycle method is called automatically after an instance is removed from the DOM. It can be used to remove event listeners and clean up anything done in <code>connectedCallback</code> if that is needed.</p><h3 id="adoptedcallback" tabindex="-1">adoptedCallback</h3><p>This lifecycle method is called automatically when the instance is moved to a different document. This method is rarely used.</p><h2 id="attributes" tabindex="-1">Attributes</h2><p>Attributes can be passed to custom elements in the same way that attributes are passed to standard HTML elements.</p><p>The class of a custom element can:</p><ul><li><p>get the names of all provided attributes</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> attrNames <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributeNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>get the value of an attribute</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'some-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>set the value of an attribute</p><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'some-name'</span><span class="token punctuation">,</span> someValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h2 id="elements" tabindex="-1">Elements</h2><p>The class of a custom element can:</p><ul><li><p>create new elements</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>find elements within its shadow DOM</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> els <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>attach new elements to its shadow DOM</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>otherEl<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// appends a single element</span><br><br>el<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>node1<span class="token punctuation">,</span> node2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// appends any number of nodes</span></code></pre></li><li><p>set text content</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'some text'</span><span class="token punctuation">;</span></code></pre></li><li><p>set inner HTML</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'some HTML'</span><span class="token punctuation">;</span></code></pre></li></ul><h2 id="flash-of-undefined-custom-elements-(fouce)" tabindex="-1">Flash Of Undefined Custom Elements (FOUCE)</h2><p>When a page containing web components is initially rendered, the CSS and JavaScript for the components may not be loaded yet. This can cause FOUCE and layout shift. To avoid this, include the following CSS which prevents rendering components that are not yet &quot;defined&quot;.</p><pre class="language-css"><code class="language-css"><span class="token selector">:not(:defined)</span> <span class="token punctuation">{</span><br>  <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>A more involved approach using <code>customElements.whenDefined</code> is described in <a href="https://shoelace.style/getting-started/usage#waiting-for-components-to-load?v=1.1.1" rel="noopener" target="_blank">Waiting for Components to Load</a>.</p><h2 id="counter-example" tabindex="-1">Counter Example</h2><p>This section shows four ways to implement a counter web component that contains a minus button, the current count value, and a plus button.</p><h3 id="vanilla-with-no-shadow-dom" tabindex="-1">Vanilla with No Shadow DOM</h3><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">CounterNoShadow</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> template<span class="token punctuation">;</span><br><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    CounterNoShadow<span class="token punctuation">.</span>template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isConnected<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> <span class="token punctuation">{</span>template<span class="token punctuation">}</span> <span class="token operator">=</span> CounterNoShadow<span class="token punctuation">;</span><br>    template<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token comment">/*html*/</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;style><br>        :not(:defined) {<br>          visibility: hidden;<br>        }<br><br>        .counter {<br>          display: flex;<br>          align-items: center;<br>          gap: 0.5rem;<br>        }<br><br>        button {<br>          background-color: lightgreen;<br>        }<br><br>        button:disabled {<br>          background-color: gray;<br>        }<br>      &lt;/style><br>      &lt;div><br>        &lt;button id="decrement-btn">-&lt;/button><br>        &lt;span part="count"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span><br>        &lt;button id="increment-btn">+&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#decrement-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#increment-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// Treat the count attribute as the source of truth</span><br>  <span class="token comment">// rather than adding a property.</span><br>  <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">set</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">newCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> newCount<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span><br>    <span class="token comment">// this.count gets converted to a string,</span><br>    <span class="token comment">// so we have to use == instead of === on the next line.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'counter-no-shadow'</span><span class="token punctuation">,</span> CounterNoShadow<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="vanilla-with-shadow-dom-%22open%22" tabindex="-1">Vanilla with Shadow DOM &quot;open&quot;</h3><p>This uses the same template used in the previous example.</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">CounterShadowOpen</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isConnected<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">;</span><br>    root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>CounterNoShadow<span class="token punctuation">.</span>template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#decrement-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#increment-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>span <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// Treat the count attribute as the source of truth</span><br>  <span class="token comment">// rather than adding a property.</span><br>  <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">set</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">newCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> newCount<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span><br>    <span class="token comment">// this.count gets converted to a string,</span><br>    <span class="token comment">// so we have to use == instead of === on the next line.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'counter-shadow-open'</span><span class="token punctuation">,</span> CounterShadowOpen<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="vanilla-with-shadow-dom-%22closed%22" tabindex="-1">Vanilla with Shadow DOM &quot;closed&quot;</h3><p>This uses the same template used in the previous example.</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">CounterShadowClosed</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// When the mode is "closed", there is no shadowRoot property.</span><br>    <span class="token comment">// This prevents access to the DOM of this component from outside.</span><br>    <span class="token comment">// To access the DOM from inside this component,</span><br>    <span class="token comment">// we must capture the return value of the attachShadow method.</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'closed'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isConnected<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>CounterNoShadow<span class="token punctuation">.</span>template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#decrement-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#increment-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// Treat the count attribute as the source of truth</span><br>  <span class="token comment">// rather than adding a property.</span><br>  <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">set</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">newCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> newCount<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span><br>    <span class="token comment">// this.count gets converted to a string,</span><br>    <span class="token comment">// so we have to use == instead of === on the next line.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>decrementBtn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'counter-shadow-closed'</span><span class="token punctuation">,</span> CounterShadowClosed<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="lit" tabindex="-1">Lit</h3><p>In <code>package.json</code>:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"lit-demo"</span><span class="token punctuation">,</span><br>  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span><br>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"vite build"</span><span class="token punctuation">,</span><br>    <span class="token property">"preview"</span><span class="token operator">:</span> <span class="token string">"vite preview"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"lit"</span><span class="token operator">:</span> <span class="token string">"^3.0.0"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"typescript"</span><span class="token operator">:</span> <span class="token string">"^5.0.0"</span><span class="token punctuation">,</span><br>    <span class="token property">"vite"</span><span class="token operator">:</span> <span class="token string">"^5.0.0"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>In <code>tsconfig.json</code>:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ES2022"</span><span class="token punctuation">,</span><br>    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"useDefineForClassFields"</span><span class="token operator">:</span> <span class="token boolean">false</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>In <code>counter-lit.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>LitElement<span class="token punctuation">,</span> css<span class="token punctuation">,</span> html<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>customElement<span class="token punctuation">,</span> property<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span><br><br><span class="token decorator"><span class="token at operator">@</span><span class="token function">customElement</span></span><span class="token punctuation">(</span><span class="token string">'counter-lit'</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CounterLit</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    .counter {<br>      display: flex;<br>      align-items: center;<br>      gap: 0.5rem;<br>    }<br><br>    button {<br>      background-color: lightgreen;<br>    }<br><br>    button:disabled {<br>      background-color: gray;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> Number<span class="token punctuation">}</span><span class="token punctuation">)</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">private</span> <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div class="counter"><br>        &lt;button ?disabled=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">><br>          <br>        &lt;/button><br>        &lt;span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span><br>        &lt;button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>+&lt;/button><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>In <code>index.html</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>counter-lit.ts<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter-lit</span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter-lit</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="wrec" tabindex="-1">wrec</h3><p>I wanted to see whether I could provide the primary benefits of Lit using much less code and avoid requiring a build process. JavaScript classes that implement a web component simply extend <code>Wrec</code> instead of <code>HTMLElement</code> or <code>LitElement</code>.</p><p>The following goals are achieved when using the <code>Wrec</code> superclass:</p><ul><li><p>Simplify adding event listeners.</p><p>An HTML element can include attributes whose names begin with &quot;on&quot;, followed by the name of a DOM event in any case. The value of these attributes must be the name of a method that will handled the events. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">increment</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre></li><li><p>Simplify updating the text content and attribute values of elements to match the value of a given web component property.</p><p>For example, the content of the <code>span</code> element below will always be the current value of the <code>count</code> property. The &quot;$&quot; prefix is required to opt into this behavior.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>$count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre></li><li><p>Simplify updating the text content and attribute values of elements to match the value of a given expression involving any number of web component property.</p><p>For example, the <code>disabled</code> attribute on the <code>button</code> element below is automatically updated based on the value of the expression <code>count === 0</code>. The &quot;$:&quot; prefix is required to indicate that what follows is a JavaScript expression that can refer to property names.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$: count === 0<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">decrement</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre></li><li><p>Associate all web component attributes with a web component property so that modifying either causes the other to be modified to the same value.</p><p>To demonstrate this:</p><ol><li>Browse the <code>index.html</code> file shown below in Chrome.</li><li>Open the DevTools.</li><li>Click the &quot;Elements&quot; tab.</li><li>Double-click the value of the <code>count</code> attribute on the <code>counter-wrec</code> custom element.</li><li>Change the value to another number.</li><li>Note that the UI updates to display the new value.</li><li>Click the &quot;Console&quot; tab.</li><li>Enter <code>$0.count</code>.</li><li>Note that the value of this property matches the new attribute value.</li><li>Enter <code>$0.count = 10</code>.</li><li>Note that the UI updates to display the new value.</li><li>Note that the <code>count</code> attribute on the custom element updates to the new value.</li></ol></li></ul><p>In <code>counter-wrec.js</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Wrec<span class="token punctuation">,</span> <span class="token punctuation">{</span>css<span class="token punctuation">,</span> html<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../wrec'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">CounterWrec</span> <span class="token keyword">extends</span> <span class="token class-name">Wrec</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> properties <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">static</span> css <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    label {<br>      font-weight: bold;<br>    }<br>    button {<br>      background-color: lightgreen;<br>    }<br>    button:disabled {<br>      opacity: 0.8;<br>    }<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>  <span class="token keyword">static</span> html <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>    &lt;label>this.label&lt;/label><br>    &lt;button onClick="this.count--" type="button" disabled="this.count === 0"><br>      -<br>    &lt;/button><br>    &lt;span>this.count&lt;/span><br>    &lt;button onClick="this.count++" type="button">+&lt;/button><br>    &lt;span>this.count &lt; 10 ? "single" : "double"&lt;/span> digit<br>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>CounterWrec<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In <code>index.html</code>:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>counter-wrec.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter-wrec</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Level<span class="token punctuation">"</span></span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter-wrec</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter-wrec</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Score<span class="token punctuation">"</span></span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter-wrec</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="web-component-documentation" tabindex="-1">Web Component Documentation</h2><p>Hunter Smith from Microsoft created several open source tools that aid in documenting web components.</p><h3 id="custom-elements-manifest" tabindex="-1">Custom Elements Manifest</h3><p>Install the analyzer tool which generates a <code>.cem</code> file from a web component source file which can contain JSDoc comments that describe its API.</p><ul><li><p><code>cd</code> to the project root directory.</p></li><li><p>Enter <code>npm i -D @custom-elements-manifest/analyzer</code></p></li><li><p>Add the following script in <code>package.json</code>:</p><pre class="language-json"><code class="language-json"><span class="token property">"cem"</span><span class="token operator">:</span> <span class="token string">"custom-elements-manifest analyze"</span><span class="token punctuation">,</span></code></pre></li><li><p>Enter <code>npm run cem</code></p></li></ul><h3 id="code-bubble" tabindex="-1">Code Bubble</h3><p>Code Bubble ...</p><ol><li><p>Enter <code>npm install code-bubble</code></p></li><li><p>Add the following code to where the code bubble should be rendered. If adding this in a <code>.html</code> file, wrap it in `<script type="module">...</script>.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>CodeBubble<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'code-bubble'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">new</span> <span class="token class-name">CodeBubble</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>Add code like the following where the code bubble should be rendered. Note how the &quot;&lt;&quot; and &quot;&gt;&quot; characters inside the <code>code</code> element must be escaped by using &quot;&lt;&quot; and &quot;&gt;&quot;.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code-bubble</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language-html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token entity named-entity" title="&lt;">&amp;lt;</span>hello-world greeting=<span class="token entity named-entity" title="&quot;">&amp;quot;</span>What's up<span class="token entity named-entity" title="&quot;">&amp;quot;</span> name=<span class="token entity named-entity" title="&quot;">&amp;quot;</span>Mark<span class="token entity named-entity" title="&quot;">&amp;quot;</span><span class="token entity named-entity" title="&gt;">&amp;gt;</span><br>        <span class="token entity named-entity" title="&lt;">&amp;lt;</span>div slot="before"<span class="token entity named-entity" title="&gt;">&amp;gt;</span>This line precedes the greeting.<span class="token entity named-entity" title="&lt;">&amp;lt;</span>/div<span class="token entity named-entity" title="&gt;">&amp;gt;</span><br>        <span class="token entity named-entity" title="&lt;">&amp;lt;</span>div slot="after"<span class="token entity named-entity" title="&gt;">&amp;gt;</span>This line follows the greeting.<span class="token entity named-entity" title="&lt;">&amp;lt;</span>/div<span class="token entity named-entity" title="&gt;">&amp;gt;</span><br>      <span class="token entity named-entity" title="&lt;">&amp;lt;</span>/hello-world<span class="token entity named-entity" title="&gt;">&amp;gt;</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code-bubble</span><span class="token punctuation">></span></span></code></pre></li></ol><h3 id="wc-dox" tabindex="-1">wc-dox</h3><p>To display documentation for your web components in a web application using data in a custom element manifest file:</p><ol><li><p>Enter <code>npm install wc-dox</code>.</p></li><li><p>Add the following code at the root of the web application:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> setWcDoxConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'wc-dox/index.js'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> manifest <span class="token keyword">from</span> <span class="token string">'./custom-elements.json'</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'json'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token function">setWcDoxConfig</span><span class="token punctuation">(</span>manifest<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>Add one of the following where the documentation should be rendered:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wc-dox</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-element<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wc-dox</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wc-dox</span> <span class="token attr-name">component-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MyElement<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wc-dox</span><span class="token punctuation">></span></span></code></pre></li></ol><h3 id="storybook" tabindex="-1">Storybook</h3><p>Storybook can be used to demonstrate and debug web components. The steps to use it are:</p><ol><li><p><code>cd</code> to the project root directory.</p></li><li><p>Enter <code>npm create storybook@latest</code>.</p></li><li><p>When prompted &quot;What configuration should we install?&quot;, select &quot;Recommended: Component dev, docs, test&quot;</p></li><li><p>If you see the message &quot;We couldn't detect your project type. (code: UNDETECTED)&quot;, followed by the prompt &quot;Do you want to manually choose a Storybook project type to install?&quot;, select &quot;Y&quot;.</p></li><li><p>Select &quot;web_components&quot;.</p></li><li><p>After a few minutes, Storybook will launch in your default web browser.</p></li><li><p>Suppose your web component is defined in the file <code>src/components/hello-world.js</code>.</p></li><li><p>Optionally delete the files in the <code>stories</code> directory related to the <code>button</code>, <code>header</code>, and <code>page</code> components.</p></li><li><p>Create the file <code>stories/hello-world.stories.js</code> containing code like the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">'../src/hello-world.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Components/hello-world'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> html <span class="token operator">=</span> String<span class="token punctuation">.</span>raw<span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Default</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;hello-world>&lt;/hello-world></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">WithName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;hello-world name="Mark">&lt;/hello-world></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">WithGreetingAndName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>  html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;hello-world greeting="What's up" name="Mark">&lt;/hello-world></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">WithSlots</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> &lt;hello-world<br>  greeting="Welcome aboard"<br>  name="Captain"<br>><br>  &lt;div slot="before">This line precedes the greeting.&lt;/div><br>  &lt;div slot="after">This line follows the greeting.&lt;/div><br>&lt;/hello-world></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre></li><li><p>To run Storybook again, enter <code>npm run storybook</code></p></li></ol><h3 id="web-components-language-server" tabindex="-1">Web Components Language Server</h3><p>This is a VS Code extension for VS Code that provides:</p><ul><li>IntelliSense</li></ul><p>This provides auto-completion for web component properties, methods, and events. It also provides type-aware suggestions based on component definitions.</p><ul><li>Advanced Code Analysis</li></ul><p>This provides real-time validation of web component syntax and structure. It also provides error detection for common web component patterns.</p><ul><li><p>Code Navigation</p></li><li><p>Executing the &quot;Go to definition&quot; command on a custom element navigates to the relevant position the in the Custom Elements Manifest.</p></li></ul><p>In the future this will be available for other IDEs and editors.</p><pre><code>
</code></pre></article>