<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Web Components</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#pros-and-cons">Pros and Cons</a></li><li><a href="#open-ui">Open UI</a></li><li><a href="#migrating-to-web-components">Migrating to Web Components</a></li><li><a href="#basic-example">Basic Example</a></li><li><a href="#libraries-that-simplify">Libraries That Simplify</a></li><li><a href="#available-web-components">Available Web Components</a></li><li><a href="#custom-elements">Custom Elements</a></li><li><a href="#shadow-dom">Shadow DOM</a><ol><li><a href="#forms">Forms</a></li><li><a href="#piercing-the-shadow-dom">Piercing the Shadow DOM</a></li></ol></li><li><a href="#es-modules">ES Modules</a></li><li><a href="#html-template">HTML Template</a></li><li><a href="#dom-terminology">DOM Terminology</a></li><li><a href="#slots-and-parts">Slots and Parts</a></li><li><a href="#lifecycle-methods">Lifecycle Methods</a><ol><li><a href="#constructor">constructor</a></li><li><a href="#connectedcallback">connectedCallback</a></li><li><a href="#attributechangedcallback(name%2C-oldvalue%2C-newvalue)">attributeChangedCallback(name, oldValue, newValue)</a></li><li><a href="#disconnectedcallback">disconnectedCallback</a></li><li><a href="#adoptedcallback">adoptedCallback</a></li></ol></li><li><a href="#attributes">Attributes</a></li><li><a href="#elements">Elements</a></li></ol></nav></aside><article><style>img {
    border: 1px solid gray;
  }</style><figure style="width: 30%"><img alt="Web Components logo" style="border: 0" src="/blog/assets/web-components-logo.svg?v=1.1.1"></figure><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://www.webcomponents.org/introduction?v=1.1.1" rel="noopener" target="_blank">Web components</a> define custom HTML elements that can be used just like standard HTML elements.</p><p>Web components can be used in any web page, with any web framework, and in Markdown files. This gives them much broader applicability than components implemented using a specific frameworks such as React.</p><p>Web components are more future-proof than other kinds of components because they are likely to be usable in applications built with future web frameworks.</p><p>Implementing a web component requires a bit more effort than implementing components using a framework like Svelte. The extra effort is worthwhile for components that will be used in multiple apps written using multiple frameworks. Even if you are only using one web framework today, that may change in the future. The investment in creating high quality, reusable web components will pay off in the long run.</p><p>Implementing a reusable library of UI components that can only be used in web applications that are implemented with a specific framework is not a good time investment. It is much better to implement them as web components so they can be used in all web applications, regardless of the web framework they use. The <a href="/blog/topics/#/blog/shoelace?v=1.1.1" rel="noopener" target="_blank">Shoelace</a> library of web components is a great example.</p><p>While you could implement every UI component of a web app as a web component, that is a bit harder than using other web framework like Svelte. Consider only implementing web components for general purpose UI components that will be used in multiple apps.</p><p>Web components encapsulate their markup, styles, and functionality by using a &quot;shadow DOM&quot;.</p><p>Tags for custom elements cannot be self-closing, even when they have no content. For example, <code>&lt;my-element&gt;&lt;/my-element&gt;</code> is valid, but <code>&lt;my-element /&gt;</code> is not.</p><h2 id="pros-and-cons" tabindex="-1">Pros and Cons</h2><p>Some of the pros of using web components include:</p><ul><li>only uses web standards</li><li>very portable ... can be used in all web frameworks</li><li>no build tools are required unless using TypeScript</li></ul><p>Some of the cons of using web components include:</p><ul><li>more tedious to implement than components in frameworks like Svelte</li><li>need to use another library like Lit to simplify</li></ul><h2 id="open-ui" tabindex="-1">Open UI</h2><p><a href="https://open-ui.org?v=1.1.1" rel="noopener" target="_blank">Open UI</a> is a W3C Community Group whose goal is &quot;to allow web developers to style and extend built-in web UI components and controls, such as select dropdowns, checkboxes, radio buttons, and date/color pickers.&quot;</p><p>The components proposed by this group could eventually work their way into the HTML specification. This would provide native alternatives to some of the web components we might build and use today.</p><p>See the list of components being explorer at the Open UI link above.</p><h2 id="migrating-to-web-components" tabindex="-1">Migrating to Web Components</h2><p>A recommended way to begin using web components in existing web applications is to identify their UI components that would be useful in other applications and one-by-one rewrite them as web components.</p><h2 id="basic-example" tabindex="-1">Basic Example</h2><p>The following file <code>src/greet-message.js</code> defines a web component.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GreetMessage</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'name is a required attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Approach #1</span><br>    <span class="token comment">// Using shadow DOM is not required.</span><br>    <span class="token comment">/*<br>    const div = document.createElement('div');<br>    div.textContent = `Hello, ${name}!`;<br>    div.style.color = 'purple';<br>    this.appendChild(div);<br>    */</span><br><br>    <span class="token comment">// Approach #2</span><br>    <span class="token comment">/*<br>    const div = document.createElement('div');<br>    div.textContent = `Hello, ${name}!`;<br>    div.style.color = 'purple';<br><br>    this.attachShadow({mode: 'open'});<br>    this.shadowRoot.appendChild(div);<br>    */</span><br><br>    <span class="token comment">// Approach #3</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div style="color: purple;">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'greet-message'</span><span class="token punctuation">,</span> GreetMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code>attachShadow</code> method must be passed an options object with a &quot;mode&quot; property that is set to &quot;open&quot; or &quot;closed&quot;. The recommended value is &quot;open&quot;, which causes <code>this.shadowRoot</code> to be set to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot?v=1.1.1" rel="noopener" target="_blank">ShadowRoot</a> object. When the &quot;mode&quot; is &quot;closed&quot;, <code>this.shadowRoot</code> is not set. That prevents setting its innerHTML or textContent, and prevents appending nodes to it.</p><p>This can be accessed in other lifecycle methods such as <code>connectedCallback</code>. Reasons include:</p><ul><li>setting its <code>innerHTML</code></li><li>modifying its descendant elements</li><li>registering listeners for <code>slotchange</code> events</li></ul><p>The following HTML renders an instance of the web component defined above. It uses <a href="https://alpinejs.dev/?v=1.1.1" rel="noopener" target="_blank">Alpine</a> to add a bit of interactivity.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Web Components Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/greet-message.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><br>      <span class="token attr-name">defer</span><br>      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js<span class="token punctuation">"</span></span><br>    <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">x-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{name: 'World'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>greet-message</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>greet-message3</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name = 'Earth'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Change Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="libraries-that-simplify" tabindex="-1">Libraries That Simplify</h2><ul><li><a href="/blog/topics/#/blog/lit/?v=1.1.1" rel="noopener" target="_blank">Lit</a></li><li><a href="https://stenciljs.com?v=1.1.1" rel="noopener" target="_blank">Stencil</a></li></ul><h2 id="available-web-components" tabindex="-1">Available Web Components</h2><ul><li><p><a href="https://shoelace.style?v=1.1.1" rel="noopener" target="_blank">Shoelace</a></p><p>&quot;A forward-thinking library of web components.&quot;</p></li><li><p><a href="https://github.com/davatron5000/awesome-standalones?v=1.1.1" rel="noopener" target="_blank">Awesome Standalones</a> from Dave Rupert</p><p>&quot;A curated list of awesome framework-agnostic standalone web components.&quot;</p></li><li><p><a href="https://lottiefiles.github.io/lottie-player/?v=1.1.1" rel="noopener" target="_blank">Lottie Player</a></p><p>This web component enables playing Lottie animations. It can be included from a CDN with the following:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/@lottiefiles/lottie-player@0.2.0/dist/lottie-player.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>To render an animation, add the <code>lottie-player</code> custom element in HTML as follows:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lottie-player</span><br>  <span class="token attr-name">autoplay</span><br>  <span class="token attr-name">loop</span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://assets3.lottiefiles.com/packages/lf20_UJNc2t.json<span class="token punctuation">"</span></span><br>  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 250px</span><span class="token punctuation">"</span></span></span><br><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lottie-player</span><span class="token punctuation">></span></span></code></pre></li></ul><p>For more, see <a href="https://open-wc.org/guides/community/component-libraries/?v=1.1.1" rel="noopener" target="_blank">Community: Component Libraries</a>.</p><h2 id="custom-elements" tabindex="-1">Custom Elements</h2><p><a href="https://html.spec.whatwg.org/multipage/custom-elements.html?v=1.1.1" rel="noopener" target="_blank">Custom Elements</a> provide a way to define and use custom HTML elements.</p><p>A custom element is defined by a JavaScript class that extends <code>HTMLElement</code>. The following code in the file <code>hello-world.js</code> demonstrates a very basic web component.</p><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello, World!'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>A tag name can be associated with this class as follows:</p><pre class="language-js"><code class="language-js">customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'hello-world'</span><span class="token punctuation">,</span> HelloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The name of the class is not required to correspond to the tag name in any way.</p><p>The names of custom elements must be all lowercase and contain at least one hyphen. This avoids name conflicts with standard HTML elements.</p><p>Often the part before the first hyphen serves as a namespace. For example, all the custom elements provided by <a href="https://shoelace.style?v=1.1.1" rel="noopener" target="_blank">Shoelace</a> begin with &quot;sl-&quot;.</p><p>The following HTML demonstrates using this custom element.</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Custom Element Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/hello-world.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hello-world</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hello-world</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="shadow-dom" tabindex="-1">Shadow DOM</h2><p>The <a href="https://dom.spec.whatwg.org/#interface-shadowroot?v=1.1.1" rel="noopener" target="_blank">Shadow DOM</a> provides a way to encapsulate the content and styling of a custom element.</p><p>Many standard HTML elements utilize a shadow DOM. Examples include <code>input</code>, <code>audio</code>, <code>video</code>, and <code>detail</code>. This can be seen by examining such elements in the &quot;Elements&quot; tab of the Chrome DevTools. Click the settings gear icon, scroll to the &quot;Elements&quot; section, and check &quot;Show user agent shadow DOM&quot;.</p><p>The CSS <code>display</code> property for the root element of custom elements defaults to &quot;inline&quot;. Often it is desirable to change this to &quot;block&quot; or &quot;inline-block&quot;. To do this, use the <code>:host</code> CSS pseudo-class. For example:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">:host</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="forms" tabindex="-1">Forms</h3><p>Instances of web components that are nested in a <code>form</code> element cannot by default contributed to the set of name/value pairs that are submitted by the form. They are prevented from doing so by the shadow DOM. <a href="https://dev.to/steveblue/form-associated-custom-elements-ftw-16bi?v=1.1.1" rel="noopener" target="_blank">Form-associated custom elements</a> provide a solution.</p><p>TODO: Try this and add an example here.</p><h3 id="piercing-the-shadow-dom" tabindex="-1">Piercing the Shadow DOM</h3><p>By default, styling used by web components cannot be modified by users of the web components. A web component can allow specific overrides by exposing the use of CSS variables.</p><p>For example, suppose we want to allow users of the <code>greet-message</code> custom element to select the color which defaults to &quot;purple&quot;. To achieve this we can change the <code>render</code> method to the following.</p><pre class="language-js"><code class="language-js">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;style><br>        div { color: var(--greet-message-color, purple); }<br>      &lt;/style><br>      &lt;div>Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!&lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre><p>The CSS used by web components that create a shadow DOM is scoped to them. So the CSS rule above only affects the <code>div</code> element that it renders. The <code>var</code> above specifies that the <code>color</code> should be the value of the <code>--greet-message-color</code> CSS variable if it is set, and &quot;purple&quot; otherwise.</p><p>Now users of this custom element can override the color with the following.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token property">--greet-message-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h2 id="es-modules" tabindex="-1">ES Modules</h2><p>The <a href="https://html.spec.whatwg.org/multipage/webappapis.html#integration-with-the-javascript-module-system?v=1.1.1" rel="noopener" target="_blank">ES Modules</a> specification define the mechanisms for exporting and importing JavaScript modules.</p><h2 id="html-template" tabindex="-1">HTML Template</h2><p>The HTML <a href="https://html.spec.whatwg.org/multipage/scripting.html#the-template-element?v=1.1.1" rel="noopener" target="_blank">template element</a> provides a way to define an HTML fragment that can be cloned and inserted multiple times into a DOM tree. This is fast because <code>template</code> elements are parsed even though they are not rendered.</p><p><code>template</code> elements have their CSS <code>display</code> property set to <code>none</code> so their content is not rendered.</p><p>Templates can contain slots that are used to insert content. Each template can contain one unnamed slot and any number of named slots. This is primarily useful when <code>template</code> elements are cloned by web components.</p><p>The following code demonstrates using the <code>template</code> element inside a web component. This approach has the advantage that the content of a web component can be described with HTML instead of using DOM methods like <code>createElement</code> and <code>appendChild</code>. However, it has the disadvantage that the web component definition must assume that a <code>template</code> with a given <code>id</code> has been defined outside it.</p><p>HTML does not define a mechanism for including one HTML file into another. So we can't define templates in a separate file that is included.</p><p><img alt="Web Components and templates" style="width: 40%" src="/blog/assets/web-component-templates.png?v=1.1.1"></p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span><br><span class="token operator">&lt;</span>html<span class="token operator">></span><br>  <span class="token operator">&lt;</span>head<span class="token operator">></span><br>    <span class="token operator">&lt;</span>title<span class="token operator">></span>Template Demo<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><br>    <span class="token operator">&lt;</span>script<span class="token operator">></span><br>      window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token comment">// The class name is not required to match the custom element name.</span><br>        <span class="token keyword">class</span> <span class="token class-name">Card</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>          <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">const</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'card'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token comment">// Passing true creates a deep clone.</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'my-card'</span><span class="token punctuation">,</span> Card<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><br>  <span class="token operator">&lt;</span>body<span class="token operator">></span><br>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>Template Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br><br>    <span class="token operator">&lt;</span>template id<span class="token operator">=</span><span class="token string">"card"</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> This styling is only scoped when the<br>           template is used <span class="token keyword">in</span> a web component<span class="token punctuation">.</span> <span class="token operator">--</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>style<span class="token operator">></span><br>        <span class="token punctuation">.</span>card <span class="token punctuation">{</span><br>          <span class="token literal-property property">display</span><span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span><br>          background<span class="token operator">-</span>color<span class="token operator">:</span> cornflowerblue<span class="token punctuation">;</span><br>          <span class="token literal-property property">border</span><span class="token operator">:</span> 3px solid blue<span class="token punctuation">;</span><br>          border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">.</span>5rem<span class="token punctuation">;</span><br>          <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">.</span>5rem<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        h2 <span class="token punctuation">{</span><br>          <span class="token literal-property property">color</span><span class="token operator">:</span> orange<span class="token punctuation">;</span><br>          margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><br>      <span class="token operator">&lt;</span>section <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"card"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>Untitled<span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><br>        <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"header"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><br>        <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"body"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>        <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><br><br>    <span class="token operator">&lt;</span>my<span class="token operator">-</span>card<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>Title #<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"header"</span><span class="token operator">></span>header #<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"body"</span><span class="token operator">></span>body #<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"footer"</span><span class="token operator">></span>footer #<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>card<span class="token operator">></span><br><br>    <span class="token operator">&lt;</span>my<span class="token operator">-</span>card<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>Title #<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"body"</span><span class="token operator">></span>body #<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>card<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h2 id="dom-terminology" tabindex="-1">DOM Terminology</h2><p>The term &quot;shadow DOM&quot; refers to DOM nodes that have an ancestor that is a shadow root. A shadow root is created by calling the <code>HTMLElement</code> <code>attachShadow</code> method.</p><p>The term &quot;light DOM&quot; refers to DOM nodes that are supplied as slot content to a web component.</p><p>The term &quot;regular DOM&quot; refers to all DOM nodes that are not in a shadow DOM or light DOM.</p><p>In the example from the previous section,</p><ul><li><code>&lt;h1&gt;Template Demo&lt;/h1&gt;</code> is in the regular DOM</li><li><code>&lt;span slot=&quot;title&quot;&gt;Title #1&lt;/span&gt;</code> is in the light DOM</li><li><code>&lt;section class=&quot;card&quot;&gt;</code> is in the shadow DOM</li></ul><h2 id="slots-and-parts" tabindex="-1">Slots and Parts</h2><p>A web component can render HTML that includes slots and parts. Slots are locations where content can be inserted. Each web component can have one default slot (unnamed) and any number of named slots.</p><p>A web component can identify some of the elements it renders as &quot;parts&quot;. This enables the parts to be styled from outside of the shadow DOM. It is an alternative to using CSS variables to &quot;pierce&quot; the shadow DOM, which was described earlier.</p><p>The following example demonstrates a web component that uses both slots and parts.</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">VanillaWC</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'open'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">;</span><br><br>    root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      &lt;div><br>        &lt;h2>Vanilla Web Component&lt;/h2><br>        &lt;nav>&lt;slot name="nav">&lt;/slot>&lt;/nav><br>        &lt;div part="header">header&lt;/div><br>        &lt;p>&lt;slot>&lt;/slot>&lt;/p><br>      &lt;/div><br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> sheet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CSSStyleSheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// This replaces the contents of the currently empty stylesheet.</span><br>    sheet<span class="token punctuation">.</span><span class="token function">replaceSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>      /* This targets the shadow host. */<br>      :host {<br>        display: inline-block;<br><br>        border: 1px solid blue;<br>        padding: 1rem;<br>        width: 30%;<br>      }<br><br>      /* This targets any top-level child placed in the slot named "nav". */<br>      slot[name="nav"]::slotted(*) {<br>        border-bottom: 1px solid blue;<br>      }<br><br>      /* This could be used in place of the previous rule.<br>      nav {<br>        border-bottom: 1px solid blue;<br>      } */<br><br>      /* This targets any top-level p elements placed in any slot. */<br>      ::slotted(p) {<br>        color: green;<br>        font-style: italic;<br>      }<br>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    root<span class="token punctuation">.</span>adoptedStyleSheets <span class="token operator">=</span> <span class="token punctuation">[</span>sheet<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'vanilla-wc'</span><span class="token punctuation">,</span> VanillaWC<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The following HTML demonstrates using the web component defined above.</p><p><img alt="Web Component slots and parts" style="border: 0; width: 60%" src="/blog/assets/web-component-slots-parts.png?v=1.1.1"></p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Web Component Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token comment">/* This targets the part named "header" in the web component. */</span><br>      <span class="token selector">vanilla-wc::part(header)</span> <span class="token punctuation">{</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span><br>        <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>        <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">/* This targets all a elements in light DOM<br>         which includes the elements inserted into slots. */</span><br>      <span class="token selector">vanilla-wc a</span> <span class="token punctuation">{</span><br>        <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/vanilla-wc.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vanilla-wc</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Come and listen to a story about a man named Jed,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        a poor mountaineer, barely kept his family fed.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        Then one day he was shootin at some food<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><br>        and up through the ground came a bubblin crude.<br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vanilla-wc</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>The <code>::slotted</code> pseudo-element styles light DOM elements. It only works in CSS specified inside a shadow DOM. It applies to actual elements in slots, not text nodes.</p><h2 id="lifecycle-methods" tabindex="-1">Lifecycle Methods</h2><p>Custom elements have lifecycle methods that are automatically called at specific points during their lifetime or when specific things occur. These include the following.</p><h3 id="constructor" tabindex="-1">constructor</h3><p>This lifecycle method is called automatically when an instance is initially created and again if the custom element definition is modified. It is commonly used for one time initializations such as computing property values.</p><p>This method can be omitted if no initializations are required.</p><h3 id="connectedcallback" tabindex="-1">connectedCallback</h3><p>This lifecycle method is called automatically after an instance is added to the DOM. It can be used to add event listeners to elements outside this custom element. Typically anything done in this method is undone in the <code>disconnectedCallback</code> method.</p><h3 id="attributechangedcallback(name%2C-oldvalue%2C-newvalue)" tabindex="-1">attributeChangedCallback(name, oldValue, newValue)</h3><p>This lifecycle method is called automatically when the value of an observed attribute changes.</p><p>To define the attributes that are observed, implement the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name1'</span><span class="token punctuation">,</span> <span class="token string">'name2'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// assumes this method exists and updates the shadow DOM</span><br><span class="token punctuation">}</span></code></pre><p>In Lit, all properties with the <code>@property</code> and <code>@state</code> decorators are automatically treated as observed properties. Lit refers to them as &quot;reactive properties&quot;.</p><h3 id="disconnectedcallback" tabindex="-1">disconnectedCallback</h3><p>This lifecycle method is called automatically after an instance is removed from the DOM. It can be used to remove event listeners from elements outside this custom element. Typically anything done in the <code>connectedCallback</code> method is undone in this method.</p><h3 id="adoptedcallback" tabindex="-1">adoptedCallback</h3><p>This lifecycle method is called automatically when the instance is moved to a new document.</p><p>This method is rarely used.</p><h2 id="attributes" tabindex="-1">Attributes</h2><p>Attributes can be passed to custom elements in the same way that attributes are passed to standard HTML elements.</p><p>The class of a custom element can:</p><ul><li><p>get the value of an attribute</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'some-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>set the value of an attribute</p><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'some-name'</span><span class="token punctuation">,</span> someValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h2 id="elements" tabindex="-1">Elements</h2><p>The class of a custom element can:</p><ul><li><p>create new elements</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>find elements within its shadow DOM</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> els <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'element-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>attach new elements to its shadow DOM</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>otherEl<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>set text content</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'some text'</span><span class="token punctuation">;</span></code></pre></li><li><p>set inner HTML</p><pre class="language-js"><code class="language-js">el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'some HTML'</span><span class="token punctuation">;</span></code></pre></li></ul></article>