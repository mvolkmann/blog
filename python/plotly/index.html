<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Plotly library</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#command-line-example">Command-line Example</a></li><li><a href="#jupyterlab-example">JupyterLab Example</a></li><li><a href="#provided-datasets">Provided Datasets</a></li><li><a href="#line-chart">Line Chart</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://plotly.com/python/?v=1.0.0" rel="noopener" target="_blank">Plotly</a> is a Python library for creating interactive data visualizations. It builds on the <a href="https://plotly.com/javascript/?v=1.0.0" rel="noopener" target="_blank">Plotly JavaScript library</a> which uses <a href="../../d3/01-overview/">D3</a>.</p><p>To install this package, enter <code>pip install plotly</code>.</p><p>To use Plotly inside a JupyterLab, assuming that is already installed, enter:</p><pre class="language-bash"><code class="language-bash">pip <span class="token function">install</span> <span class="token string">"ipywidgets>=7.5"</span><br>jupyter labextension <span class="token function">install</span> jupyterlab-plotly@4.11.0<br>jupyter labextension <span class="token function">install</span> @jupyter-widgets/jupyterlab-manager plotlywidget@4.11.0</code></pre><h2 id="command-line-example">Command-line Example</h2><p>This example generates a simple bar chart.</p><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go<br><br>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><br><br><span class="token comment"># Create a bar chart using these values.</span><br>fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span>data<span class="token operator">=</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>y<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token comment"># Generate HTML for this bar chart, write it to a file,</span><br><span class="token comment"># and open the file in the default web browser.</span><br><span class="token comment"># The HTML consists of:</span><br><span class="token comment"># - a script tag that configures Plotly</span><br><span class="token comment"># - a script tag contains the Plotly library implementation</span><br><span class="token comment"># - a script that that uses Plotly to draw the chart</span><br><span class="token comment"># - a mostly empty svg element where the plot is created</span><br>fig<span class="token punctuation">.</span>write_html<span class="token punctuation">(</span><span class="token string">'bar-chart.html'</span><span class="token punctuation">,</span> auto_open<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code></pre><h2 id="jupyterlab-example">JupyterLab Example</h2><p>This generates the same bar chart, but inside a Jupyter Notebook using JupyterLab. Enter <code>jupyter lab</code> to start it. Create a new Python notebook and enter the following:</p><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go<br><br>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><br>fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span>data<span class="token operator">=</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>y<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><br>fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Note: This doesn't render a plot when run in JupyterLab launched from Anaconda Navigator!</p><h2 id="provided-datasets">Provided Datasets</h2><p>The following code can be entered in a Jupyter Notebook to render a line chart that shows stock prices. It uses a dataset provided by Plotly in <a href="https://plotly.com/python-api-reference/generated/plotly.data.html#module-plotly.data?v=1.0.0" rel="noopener" target="_blank"><code>plotly.express.data</code></a>. These include:</p><table><thead><tr><th>Dataset Name</th><th>Description</th></tr></thead><tbody><tr><td>carshare</td><td>availability of car-sharing services in Montreal over a month-long period</td></tr><tr><td>election</td><td>voting results for a district in the 2013 Montreal mayoral election</td></tr><tr><td>election_geojson</td><td>each feature represents an electoral district in the 2013 Montreal mayoral election</td></tr><tr><td>experiment</td><td>results of 100 simulated participants on three hypothetical experiments</td></tr><tr><td>gapminder</td><td>life expectancy, population, and GDP for countries in a given year</td></tr><tr><td>iris</td><td>flower data</td></tr><tr><td>medals_long</td><td>Olympic medals for short track speed skating</td></tr><tr><td>medals_wide</td><td>variation on previous data</td></tr><tr><td>stocks</td><td>closing prices from six tech stocks in 2018 and 2019</td></tr><tr><td>tips</td><td>tips on restaurant bills</td></tr><tr><td>wind</td><td>wind intensity in a cardinal direction and its frequency</td></tr></tbody></table><h2 id="line-chart">Line Chart</h2><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>express <span class="token keyword">as</span> px<br><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go<br><br>df <span class="token operator">=</span> px<span class="token punctuation">.</span>data<span class="token punctuation">.</span>stocks<span class="token punctuation">(</span><span class="token punctuation">)</span><br>px<span class="token punctuation">.</span>line<span class="token punctuation">(</span><br>    df<span class="token punctuation">,</span><br>    x<span class="token operator">=</span><span class="token string">'date'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'AAPL'</span><span class="token punctuation">,</span> <span class="token string">'GOOG'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    labels<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> <span class="token string">'Date'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> <span class="token string">'Price'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    title<span class="token operator">=</span><span class="token string">"Apple vs. Google"</span><span class="token punctuation">)</span></code></pre><p>Hover over a data point to see a popup that shows its name and x/y values.</p><pre class="language-python"><code class="language-python">fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span><br>fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>date<span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">.</span>AAPL<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'lines'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Apple'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>date<span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">.</span>AMZN<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'lines+markers'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Amazon'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Scatter<span class="token punctuation">(</span><br>    x<span class="token operator">=</span>df<span class="token punctuation">.</span>date<span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">.</span>GOOG<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'lines+markers'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Google'</span><span class="token punctuation">,</span><br>    line<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'firebrick'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> dash<span class="token operator">=</span><span class="token string">'dashdot'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>TODO: Add more detail!</p></article>