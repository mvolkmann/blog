<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Python collections module</h2><aside><nav class="toc"><ol><li><a href="#built-in-collection-classes">Built-in Collection Classes</a></li><li><a href="#collections-module-classes">collections Module Classes</a><ol><li><a href="#namedtuple">namedtuple</a></li><li><a href="#deque">deque</a></li><li><a href="#chainmap">Chainmap</a></li><li><a href="#counter">Counter</a></li><li><a href="#ordereddict">OrderedDict</a></li><li><a href="#defaultdict">defaultdict</a></li><li><a href="#userdict%2C-userlist%2C-and-userstring">UserDict, UserList, and UserString</a></li></ol></li></ol></nav></aside><article><h2 id="built-in-collection-classes">Built-in Collection Classes</h2><p>Python provides four collection classes that do not need to be imported to use.</p><table><thead><tr><th>Collection<br>Name</th><th>Mutable?</th><th>Ordered?</th><th>Allows<br>Duplicates?</th><th>Can<br>Index?</th><th>Syntax</th></tr></thead><tbody><tr><td><code>list</code></td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td><code>[e1, e2, ...]</code></td></tr><tr><td><code>tuple</code></td><td>no</td><td>yes</td><td>yes</td><td>yes</td><td><code>(e1, e2, ...)</code></td></tr><tr><td><code>set</code></td><td>yes</td><td>no</td><td>no</td><td>no</td><td><code>{e1, e2, ...}</code></td></tr><tr><td><code>dict</code></td><td>yes</td><td>yes</td><td>yes</td><td>no</td><td><code>{k1: v1, k2: v2, ...}</code></td></tr></tbody></table><p>For details on the <code>list</code> and <code>tuple</code> classes, see <a href="/blog/python/python-compared-to-js/#sequences">here</a>.</p><p>For details on the <code>set</code> class, see <a href="/blog/python/python-compared-to-js/#sets">here</a>.</p><p>For details on the <code>dict</code> class, see <a href="/blog/python/python-compared-to-js/#key-value-collections">here</a>.</p><h2 id="collections-module-classes"><code>collections</code> Module Classes</h2><p>The <code>collections</code> module in the Python standard library defines nine additional collection classes that must be imported to use.</p><table><thead><tr><th>Collection Name</th><th>Description</th></tr></thead><tbody><tr><td><code>namedtuple</code></td><td><code>tuple</code> subclass with named fields</td></tr><tr><td><code>deque</code></td><td><code>list</code>-like container with fast appends and pops on both ends</td></tr><tr><td><code>Chainmap</code></td><td><code>dict</code>-like view of multiple mappings</td></tr><tr><td><code>Counter</code></td><td><code>dict</code> subclass for counting hashable values</td></tr><tr><td><code>OrderedDict</code></td><td><code>dict</code> subclass that remembers insertion order</td></tr><tr><td><code>defaultdict</code></td><td><code>dict</code> subclass that calls a function to get missing values</td></tr><tr><td><code>UserDict</code></td><td>wrapper around a <code>dict</code> object for easier subclassing</td></tr><tr><td><code>UserList</code></td><td>wrapper around a <code>list</code> object for easier subclassing</td></tr><tr><td><code>UserString</code></td><td>wrapper around a <code>string</code> object for easier subclassing</td></tr></tbody></table><h3 id="namedtuple"><code>namedtuple</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.namedtuple?v=1.0.2" rel="noopener" target="_blank"><code>namedtuple</code></a> has all the features of a <code>tuple</code>, but differs in that each position has an associated name.</p><p>Here is an example of creating and using <code>namedtuple</code> instances:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple<br><br><span class="token comment"># Define a namedtuple.</span><br>DogNT <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Dog'</span><span class="token punctuation">,</span> <span class="token string">'breed, name'</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create an instance with positional arguments.</span><br>dog1 <span class="token operator">=</span> DogNT<span class="token punctuation">(</span><span class="token string">'Whippet'</span><span class="token punctuation">,</span> <span class="token string">'Comet'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><br><br><span class="token comment"># Create an instance with named arguments.</span><br>dog2 <span class="token operator">=</span> DogNT<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Oscar'</span><span class="token punctuation">,</span> breed<span class="token operator">=</span><span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog2<span class="token punctuation">)</span><br><br><span class="token comment"># Access a field by name.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment"># Comet</span><br><br><span class="token comment"># All methods from the tuple class are inherited.</span><br><br><span class="token comment"># Get the name of a namedtuple instance.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><span class="token punctuation">.</span>__name__<span class="token punctuation">)</span> <span class="token comment"># Dog</span><br><br><span class="token comment"># Make a new instance from an iterable.</span><br>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Native American Indian Dog'</span><span class="token punctuation">,</span> <span class="token string">'Ramsay'</span><span class="token punctuation">]</span><br>dog3 <span class="token operator">=</span> DogNT<span class="token punctuation">.</span>_make<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment"># Why start with underscore?</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog3<span class="token punctuation">)</span><br><br><span class="token comment"># Get a dict from a namedtuple.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create a new instance from an existing one</span><br><span class="token comment"># where some values are replaced.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog2<span class="token punctuation">.</span>_replace<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Oscar Wilde'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token comment"># Get tuple of field names from an instance.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>_fields<span class="token punctuation">)</span> <span class="token comment"># ('breed', 'name')</span></code></pre><h3 id="deque"><code>deque</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.deque?v=1.0.2" rel="noopener" target="_blank"><code>deque</code></a> (pronounced &quot;deck&quot;) is a double-ended queue. Unlike the <code>list</code> class, elements can be efficiently appended to and popped from both ends.</p><p>Here is an example of creating and using <code>deque</code> instances:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque<br><br><span class="token comment"># Create an empty deque and then append values to both ends.</span><br>dogs <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Oscar'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'Ramsay'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Comet'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'Maisey'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Maisey', 'Ramsay', 'Oscar', 'Comet'])</span><br><br><span class="token comment"># Create a deque with initial values.</span><br>dogs <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Maisey'</span><span class="token punctuation">,</span> <span class="token string">'Ramsay'</span><span class="token punctuation">,</span> <span class="token string">'Oscar'</span><span class="token punctuation">,</span> <span class="token string">'Comet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Maisey', 'Ramsay', 'Oscar', 'Comet'])</span><br><br><span class="token comment"># Remove the first and last elements.</span><br>dogs<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Ramsay', 'Oscar'])</span><br><br><span class="token comment"># Add multiple elements at the beginning (left) and end (right).</span><br>dogs<span class="token punctuation">.</span>extendleft<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">,</span> <span class="token string">'Spot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># added in reverse order</span><br>dogs<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Speed'</span><span class="token punctuation">,</span> <span class="token string">'Trixie'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Insert an element before a given index.</span><br>index <span class="token operator">=</span> <span class="token number">3</span><br>dogs<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">'Reece'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Reece', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Remove the element that was just inserted.</span><br><span class="token keyword">del</span> dogs<span class="token punctuation">[</span>index<span class="token punctuation">]</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Remove all elements.</span><br>dogs<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque([])</span></code></pre><h3 id="chainmap"><code>Chainmap</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.ChainMap?v=1.0.2" rel="noopener" target="_blank"><code>ChainMap</code></a> provides a view over multiple dict objects.</p><p>Here is an example of creating and using a <code>ChainMap</code>:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> ChainMap<br><br>dict1 <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Maisey'</span><span class="token punctuation">:</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">,</span><br>    <span class="token string">'Ramsay'</span><span class="token punctuation">:</span> <span class="token string">'Native American Indian Dog'</span><br><span class="token punctuation">}</span><br>dict2 <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Oscar'</span><span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">,</span><br>    <span class="token string">'Comet'</span><span class="token punctuation">:</span> <span class="token string">'Whippet'</span><br><span class="token punctuation">}</span><br><br><span class="token comment"># Create a ChainMap that provides a view of the two dicts above.</span><br>cm <span class="token operator">=</span> ChainMap<span class="token punctuation">(</span>dict1<span class="token punctuation">,</span> dict2<span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">)</span> <span class="token comment"># ChainMap({'Maisey': 'Tree...', 'Ramsay': 'Native...'}, {'Oscar': 'German...', 'Comet': 'Whippet'})</span><br><br><span class="token comment"># Get values of some keys from the ChainMap.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Ramsay'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Native American Indian Dog</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Comet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Whippet</span><br><br><span class="token comment"># Modify one of the dicts and verify that the ChainMap sees the change.</span><br>dict2<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'GSP'</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># GSP</span><br><br><span class="token comment"># Add data to one of the dicts and verify that the ChainMap sees it.</span><br>dict1<span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Beagle'</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Beagle</span><br><br><span class="token comment"># Get the dicts used by the ChainMap.</span><br>dicts <span class="token operator">=</span> cm<span class="token punctuation">.</span>maps <span class="token comment"># returns list containing dict1 and dict2</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dicts<span class="token punctuation">)</span><br><br><span class="token comment"># Add a key/value pair to the ChainMap</span><br><span class="token comment"># which adds it to the first associated dict.</span><br><span class="token comment"># It's better to add to associated dicts.</span><br>cm<span class="token punctuation">[</span><span class="token string">'Reece'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Whippet'</span><br><br><span class="token comment"># Remove a key/value pair from the ChainMap</span><br><span class="token comment"># which only removes from the first associated dict</span><br><span class="token comment"># and raises KeyError if not found there.</span><br><span class="token comment"># It's better to remove from to associated dicts.</span><br><span class="token keyword">del</span> cm<span class="token punctuation">[</span><span class="token string">'Reece'</span><span class="token punctuation">]</span></code></pre><h3 id="counter"><code>Counter</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.Counter?v=1.0.2" rel="noopener" target="_blank"><code>Counter</code></a> is a special <code>dict</code> that counts occurrences of unique values in an iterable.</p><p>Here is an example of creating and using a <code>Counter</code>:</p><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter<br><br>fruits <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'cherry'</span><span class="token punctuation">,</span> <span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'strawberry'</span><span class="token punctuation">,</span><br>    <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><br><span class="token punctuation">]</span><br>counter <span class="token operator">=</span> Counter<span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><br><span class="token comment"># Counter({'banana': 4, 'apple': 3, 'grape': 2,</span><br><span class="token comment">#          'cherry': 1, 'orange': 1, 'strawberry': 1})</span><br><br><span class="token comment"># Get the number of occurrences of banana.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">[</span><span class="token string">'banana'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 4</span><br><br><span class="token comment"># Remove all occurrences of grape.</span><br><span class="token keyword">del</span> counter<span class="token punctuation">[</span><span class="token string">'grape'</span><span class="token punctuation">]</span><br><br><span class="token comment"># Get a list of all the elements in sorted order.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>elements<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># ['apple', 'apple', 'apple', 'banana', 'banana', 'banana', 'banana',</span><br><span class="token comment">#  'cherry', 'orange', 'strawberry']</span><br><br><span class="token comment"># Get a list of tuples where each contains a unique value</span><br><span class="token comment"># and its count (number of occurrences)</span><br><span class="token comment"># where the tuples are sorted by descending count.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># [('banana', 4), ('apple', 3), ('cherry', 1), ('orange', 1), ('strawberry', 1)]</span><br><br><span class="token comment"># Remove some occurrences.</span><br>counter<span class="token punctuation">.</span>subtract<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'banana'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'strawberry'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>elements<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># ['apple', 'apple', 'apple', 'banana', 'banana', 'cherry', 'orange']</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># [('apple', 3), ('banana', 2), ('cherry', 1), ('orange', 1), ('strawberry', 0)]</span></code></pre><h3 id="ordereddict"><code>OrderedDict</code></h3><p>An <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict?v=1.0.2" rel="noopener" target="_blank"><code>OrderedDict</code></a> is a special <code>dict</code> that preserves the order in which keys were added. Starting in Python 3.5, the <code>dict</code> class also does this. One reason to continue using <code>OrderedDict</code> instead of <code>dict</code> when order must be preserved is that assuming <code>dict</code> objects will preserve order will cause code to break when run in versions of Python before 3.5.</p><p>Here is an example of creating and using an <code>OrderedDict</code>:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> OrderedDict<br><br><span class="token comment"># Create and populate an OrderedDict.</span><br>dogs <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">[</span><span class="token string">'Maisey'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Treeing Walker Coonhound'</span><br>dogs<span class="token punctuation">[</span><span class="token string">'Ramsay'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Native American Indian Dog'</span><br>dogs<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'German Shorthaired Pointer'</span><br>dogs<span class="token punctuation">[</span><span class="token string">'Comet'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Whippet'</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><br><span class="token comment"># OrderedDict([</span><br><span class="token comment">#  ('Maisey', 'Treeing Walker Coonhound'),</span><br><span class="token comment">#  ('Ramsay', 'Native American Indian Dog'),</span><br><span class="token comment">#  ('Oscar', 'German Shorthaired Pointer'),</span><br><span class="token comment">#  ('Comet', 'Whippet')])</span><br><br><span class="token comment"># Change the value of a key,</span><br><span class="token comment"># noting that its position does not change.</span><br>dogs<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'GSP'</span><br><br><span class="token comment"># Move "Comet" to the beginning.</span><br>dogs<span class="token punctuation">.</span>move_to_end<span class="token punctuation">(</span><span class="token string">'Comet'</span><span class="token punctuation">,</span> last<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><br><br><span class="token comment"># Move "Ramsay" to the end.</span><br>dogs<span class="token punctuation">.</span>move_to_end<span class="token punctuation">(</span><span class="token string">'Ramsay'</span><span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><br><span class="token comment"># OrderedDict([</span><br><span class="token comment">#  ('Comet', 'Whippet'),</span><br><span class="token comment">#  ('Maisey', 'Treeing Walker Coonhound'),</span><br><span class="token comment">#  ('Oscar', 'GSP'),</span><br><span class="token comment">#  ('Ramsay', 'Native American Indian Dog')])</span><br><br><span class="token comment"># Remove the first key/value pair.</span><br>dogs<span class="token punctuation">.</span>popitem<span class="token punctuation">(</span>last<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><br><br><span class="token comment"># Remove the last key/value pair.</span><br>dogs<span class="token punctuation">.</span>popitem<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><br><span class="token comment"># OrderedDict([</span><br><span class="token comment">#  ('Maisey', 'Treeing Walker Coonhound'),</span><br><span class="token comment">#  ('Oscar', 'GSP')])</span></code></pre><h3 id="defaultdict"><code>defaultdict</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict?v=1.0.2" rel="noopener" target="_blank"><code>defaultdict</code></a> is a special <code>dict</code> that can provide a value for missing keys rather than raise a <code>KeyError</code>. This is useful because it enables writing code that doesn't need to check for missing values.</p><p>The <code>defaultdict</code> function is passed a function that must return the default value to use for missing keys. This can be a constructor function from a built-in class, a custom class, a lambda function, or a normal function. Unfortunately the function is not passed the key that is missing, so that cannot be used to determine the value to return.</p><pre class="language-python"><code class="language-python"><span class="token comment"># Each of the examples below indicate</span><br><span class="token comment"># the value that is used for missing keys.</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token comment"># False</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token comment"># 0</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">)</span> <span class="token comment"># 0.0</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token comment"># empty string</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token comment"># empty list</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">)</span> <span class="token comment"># empty tuple</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">)</span> <span class="token comment"># empty dict</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">)</span> <span class="token comment"># empty set</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span> <span class="token comment"># an instance of MyClass</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token string">'missing'</span><span class="token punctuation">)</span> <span class="token comment"># the string "missing"</span><br>my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token comment"># the number 7</span><br><br><span class="token comment"># This function is only called once for each missing key.</span><br><span class="token comment"># The missing key and the value this returns are</span><br><span class="token comment"># added to the defaultdict so it is no longer missing.</span><br><span class="token keyword">def</span> <span class="token function">get_missing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'in get_missing'</span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> <span class="token string">'mixed'</span><br><br>dogs <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>get_missing<span class="token punctuation">)</span> <span class="token comment"># returns "mixed" for missing keys</span></code></pre><p>Here is an example of creating and using a <code>defaultdict</code>:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<br><br>names_by_breed <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><br><br><span class="token keyword">def</span> <span class="token function">add_dog</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> breed<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token comment"># Don't need to check for missing breed key</span><br>    <span class="token comment"># because an empty list will be supplied.</span><br>    names_by_breed<span class="token punctuation">[</span>breed<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>name<span class="token punctuation">)</span><br><br>add_dog<span class="token punctuation">(</span><span class="token string">'Comet'</span><span class="token punctuation">,</span> <span class="token string">'Whippet'</span><span class="token punctuation">)</span><br>add_dog<span class="token punctuation">(</span><span class="token string">'Maisey'</span><span class="token punctuation">,</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">)</span><br>add_dog<span class="token punctuation">(</span><span class="token string">'Reece'</span><span class="token punctuation">,</span> <span class="token string">'Whippet'</span><span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Whippet names are'</span><span class="token punctuation">,</span> names_by_breed<span class="token punctuation">[</span><span class="token string">'Whippet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ['Comet', 'Reece']</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Beagle names are'</span><span class="token punctuation">,</span> names_by_breed<span class="token punctuation">[</span><span class="token string">'Beagle'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># []</span><br><br>fruit_counts <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><br><br><span class="token keyword">def</span> <span class="token function">add_fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token comment"># Don't need to check for missing fruit key</span><br>    <span class="token comment"># because zero will be supplied.</span><br>    fruit_counts<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><br><br>add_fruit<span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><br>add_fruit<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><br>add_fruit<span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'banana count is'</span><span class="token punctuation">,</span> fruit_counts<span class="token punctuation">[</span><span class="token string">'banana'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 2</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'grape count is'</span><span class="token punctuation">,</span> fruit_counts<span class="token punctuation">[</span><span class="token string">'grape'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 0</span></code></pre><h3 id="userdict%2C-userlist%2C-and-userstring"><code>UserDict</code>, <code>UserList</code>, and <code>UserString</code></h3><p>These classes are useful as the base class of custom classes that need the functionality of a <code>dict</code>, <code>list</code>, or <code>string</code>. In older versions of Python it is not possible to directly inherit from <code>dict</code>, <code>list</code>, and <code>string</code>, but doing so is now supported. However, it can still be easier to inherit from these &quot;User&quot; classes instead because the underlying <code>dict</code>, <code>list</code>, or <code>string</code> will be available as an attribute.</p></article>