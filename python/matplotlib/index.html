<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>matplotlib library</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#navigation">Navigation</a></li><li><a href="#legends">Legends</a></li><li><a href="#line-charts">Line Charts</a><ol><li><a href="#line-chart-enhancements">Line Chart Enhancements</a></li><li><a href="#line-styles">Line Styles</a></li><li><a href="#markers">Markers</a></li><li><a href="#enhancements-demo">Enhancements Demo</a></li><li><a href="#saving-plots">Saving Plots</a></li><li><a href="#plotting-functions">Plotting Functions</a></li></ol></li><li><a href="#animating-plots">Animating Plots</a></li><li><a href="#bar-charts">Bar Charts</a></li><li><a href="#pie-charts">Pie Charts</a></li><li><a href="#annotations">Annotations</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://matplotlib.org/?v=1.0.16" rel="noopener" target="_blank">matplotlib</a> is a Python library for data visualization.</p><p>To install this package, enter <code>pip install matplotlib</code>.</p><p>The most commonly used submodule in matplotlib is <code>pyplot</code>. To import this, use one of the following:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt</code></pre><p>Note that by convention the <code>plt</code> alias is used to refer to <code>pyplot</code>.</p><h2 id="navigation">Navigation</h2><p>Plots created by matplotlib typically have a navigation bar at the bottom that includes the following buttons:</p><p><img src="/blog/assets/matplotlib-navigation.png" alt="navigation buttons"></p><table><thead><tr><th>Button</th><th>Action</th><th>Keyboard Shortcut</th></tr></thead><tbody><tr><td>house</td><td>returns to original view,<br>similar to web browser home button</td><td>h or r</td></tr><tr><td>left arrow</td><td>goes to previous view,<br>similar to web browser back button</td><td>left arrow or c</td></tr><tr><td>right arrow</td><td>goes to next view,<br>similar to web browser forward button</td><td>right arrow or v</td></tr><tr><td>four arrows</td><td>toggles &quot;pan and zoom&quot; mode</td><td>p</td></tr><tr><td>magnifying glass</td><td>toggles &quot;zoom to rectangle&quot; mode</td><td>o</td></tr><tr><td>sliders</td><td>opens dialog of sliders to adjust plot</td><td>none</td></tr><tr><td>floppy</td><td>opens a file save dialog to save current view to a PNG file</td><td>ctrl-s</td></tr></tbody></table><p>After activating &quot;pan and zoom&quot; mode, hold left mouse button down and drag to pan in any direction or hold right mouse button down and drag to zoom in or out, creating a new view.</p><p>After activating &quot;zoom to rectangle&quot; mode, use the mouse to drag a rectangle and the plot will zoom to that rectangle, creating a new view.</p><p>In the dialog of sliders, left, bottom, right, and top adjust the size of the margin on those sides of the plot. The wspace and hspace slides seem to have no effect.</p><p>Other keyboard shortcuts include:</p><table><thead><tr><th>Action</th><th>Keyboard Shortcut</th></tr></thead><tbody><tr><td>toggle full screen;<br>doesn't work in macOS</td><td>f or ctrl-f</td></tr><tr><td>close window</td><td>ctrl-w</td></tr><tr><td>constraint pan to x direction</td><td>hold x</td></tr><tr><td>constraint pan to y direction</td><td>hold y</td></tr><tr><td>toggle grid lines (none, major, major and minor, minor)</td><td>g or G</td></tr><tr><td>toggle x-axis scale between linear and log;<br>mouse cursor must be over plot</td><td>L or k</td></tr><tr><td>toggle y-axis scale between linear and log;<br>mouse cursor must be over plot</td><td>l (lowercase L)</td></tr></tbody></table><h2 id="legends">Legends</h2><p>To add a legend to a plot, call <code>plt.legend()</code>. By default, matplotlib takes its best guess on where to place the legend. To override this with a specific location, add the <code>loc</code> argument set to a string or a number.</p><table><thead><tr><th>String</th><th>Code</th></tr></thead><tbody><tr><td>'best'</td><td>0</td></tr><tr><td>'upper right'</td><td>1</td></tr><tr><td>'upper left'</td><td>2</td></tr><tr><td>'lower left'</td><td>3</td></tr><tr><td>'lower right'</td><td>4</td></tr><tr><td>'right'</td><td>5</td></tr><tr><td>'center left'</td><td>6</td></tr><tr><td>'center right'</td><td>7</td></tr><tr><td>'lower center'</td><td>8</td></tr><tr><td>'upper center'</td><td>9</td></tr><tr><td>'center'</td><td>10</td></tr></tbody></table><p>All of these options place the legend inside the plot. To display the legend outside of the plot, add the <code>bbox_to_anchor</code> argument set to a tuple that specifies its x and y location with percentages of the plot width and height. For example, <code>bbox_to_anchor=(1, 1)</code> places the upper-left corner of the legend at the top-right corner of the plot.</p><h2 id="line-charts">Line Charts</h2><p>To create a basic line chart:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<br><br>student_ids <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># [1, 2, 3, 4]</span><br>test1_scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span><br>test2_scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>student_ids<span class="token punctuation">,</span> test1_scores<span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>student_ids<span class="token punctuation">,</span> test2_scores<span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>This produces the chart below:</p><p><img src="/blog/assets/matplotlib-line-chart-1.png" alt="line chart #1"></p><p>The chart automatically scales to accommodate the data and the x and y tick marks are automatically determined.</p><h3 id="line-chart-enhancements">Line Chart Enhancements</h3><p>There are many ways to enhance this chart as shown in the table below.</p><table><thead><tr><th>Enhancement</th><th>Code</th></tr></thead><tbody><tr><td>add chart title</td><td><code>plt.title('Test Scores')</code></td></tr><tr><td>add x-axis label</td><td><code>plt.xlabel('Student')</code></td></tr><tr><td>add y-axis label</td><td><code>plt.ylabel('Score')</code></td></tr><tr><td>add label to a line</td><td><code>plt.plot(x_values, y_values, label='test #1')</code></td></tr><tr><td>set color of a line</td><td><code>plt.plot(x_values, y_values, color='red')</code></td></tr><tr><td>set width of a line</td><td><code>plt.plot(x_values, y_values, linewidth=3)</code></td></tr><tr><td>set line style</td><td><code>plt.plot(x_values, y_values, linestyle='--')</code></td></tr><tr><td>add legend</td><td><code>plt.legend()</code></td></tr><tr><td>set x ticks</td><td><code>plt.xticks(student_ids)</code></td></tr><tr><td>set y ticks</td><td><code>plt.yticks(y_ticks)</code></td></tr></tbody></table><p>The <code>xticks</code> and <code>yticks</code> methods override tick marks that are automatically provided. They are desirable in this case because our student numbers are integers, not values like 1.5 or 2.5.</p><p>To change the font uses, add a <code>fontdict</code> argument to some of these method calls. For example, to change the font used for the chart title we can change the call to the <code>title</code> method as follows:</p><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Test Scores'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontname'</span><span class="token punctuation">:</span> <span class="token string">'Comic Sans MS'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Colors can be specified by name or by hex code following by a pound sign. To specify the color of a line, add a <code>color</code> argument.</p><h3 id="line-styles">Line Styles</h3><p>The lines are solid by default. To specify another line style, add a <code>linestyle</code> argument. Supported line styles include:</p><table><thead><tr><th>Style</th><th>Syntax</th></tr></thead><tbody><tr><td>solid</td><td><code>'solid'</code> or <code>'-'</code></td></tr><tr><td>dotted</td><td><code>'dotted'</code> or <code>':'</code></td></tr><tr><td>dashed</td><td><code>'dashed'</code> or <code>'--'</code></td></tr><tr><td>dashdot</td><td><code>'dashdot'</code> or <code>'-.'</code></td></tr></tbody></table><p>For more line style variations, see <a href="https://matplotlib.org/3.1.0/gallery/lines_bars_and_markers/linestyles.html?v=1.0.16" rel="noopener" target="_blank">matplotlib Linestyles</a>.</p><h3 id="markers">Markers</h3><p>Markers are shapes that can be rendered at data points. The data points on the lines do not include markers by default. To add markers to a line, specify a <code>marker</code> argument. Marker values include:</p><table><thead><tr><th>Marker</th><th>Syntax</th></tr></thead><tbody><tr><td>point</td><td><code>'.'</code></td></tr><tr><td>pixel</td><td><code>','</code></td></tr><tr><td>circle</td><td><code>'o'</code></td></tr><tr><td>plus</td><td><code>'+'</code></td></tr><tr><td>x</td><td><code>'x'</code></td></tr><tr><td>diamond</td><td><code>'D'</code></td></tr><tr><td>diamond thin</td><td><code>'d'</code></td></tr><tr><td>triangle down</td><td><code>'v'</code></td></tr><tr><td>triangle up</td><td><code>'^'</code></td></tr><tr><td>triangle left</td><td><code>'&lt;'</code></td></tr><tr><td>triangle right</td><td><code>'&gt;'</code></td></tr><tr><td>square</td><td><code>'s'</code></td></tr><tr><td>pentagon</td><td><code>'p'</code></td></tr><tr><td>hexagon</td><td><code>'h'</code></td></tr><tr><td>hexagon rotated</td><td><code>'H'</code></td></tr><tr><td>octagon</td><td><code>'8'</code></td></tr><tr><td>plus filled</td><td><code>'P'</code></td></tr><tr><td>star</td><td><code>'*'</code></td></tr></tbody></table><p>For more marker variations, see <a href="https://matplotlib.org/api/markers_api.html?v=1.0.16" rel="noopener" target="_blank">matplotlib Markers</a>.</p><p>To change the size of markers, specify a <code>markersize</code> argument.</p><p>Markers are composed of two parts, an edge (border) and a face (interior). By default, both have the same color as the line on which they appear. To change the marker color, specify the <code>markeredgecolor</code> and/or <code>markerfacecolor</code> arguments.</p><h3 id="enhancements-demo">Enhancements Demo</h3><p>Let's try some of these enhancements.</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><br>students <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Tami'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amanda'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Jeremy'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><br>student_ids <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>student_names <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>test1_scores <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'scores'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>test2_scores <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'scores'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br><br><span class="token comment">#plt.xkcd()  # for xkcd sketch-style drawing mode</span><br>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><br>    <span class="token string">'Test Scores'</span><span class="token punctuation">,</span><br>    fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontname'</span><span class="token punctuation">:</span> <span class="token string">'Comic Sans MS'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Student'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Score'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><br>    student_ids<span class="token punctuation">,</span> test1_scores<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span><br>    label<span class="token operator">=</span><span class="token string">'test #1'</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">,</span><br>    markersize<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> markerfacecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><br>    student_ids<span class="token punctuation">,</span> test2_scores<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">,</span><br>    label<span class="token operator">=</span><span class="token string">'test #2'</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">':'</span><span class="token punctuation">,</span><br>    marker<span class="token operator">=</span><span class="token string">'s'</span><span class="token punctuation">,</span> markerfacecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>ticks<span class="token operator">=</span>student_ids<span class="token punctuation">,</span> labels<span class="token operator">=</span>student_names<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">)</span><br>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span><br>figure<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># adjusts padding around plots to fit tick labels</span><br>figure<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>set_window_title<span class="token punctuation">(</span><span class="token string">'Test Scores'</span><span class="token punctuation">)</span><br>figure<span class="token punctuation">.</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span><span class="token string">'linen'</span><span class="token punctuation">)</span>  <span class="token comment"># background color inside chart</span><br>figure<span class="token punctuation">.</span>patch<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span><span class="token string">'skyblue'</span><span class="token punctuation">)</span> <span class="token comment"># background color outside chart</span><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>With all of these enhancements in place, the chart becomes the following:</p><p><img src="/blog/assets/matplotlib-line-chart-2.png" alt="line chart #2"></p><p>We can also create this same chart using a pandas <code>DataFrame</code> as follows:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<br><br>students <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Tami'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amanda'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Jeremy'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><br><br><span class="token keyword">def</span> <span class="token function">get_score</span><span class="token punctuation">(</span>scores<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">return</span> scores<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">0</span><br><br><span class="token comment"># Add a column of scores to the DataFrame for each test.</span><br>test_count <span class="token operator">=</span> students<span class="token punctuation">.</span>scores<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>test_count<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    students<span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f'test</span><span class="token interpolation"><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> students<span class="token punctuation">.</span>scores<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>get_score<span class="token punctuation">,</span> index<span class="token operator">=</span>i<span class="token punctuation">)</span><br><br><span class="token comment"># Plot a line for each test.</span><br><span class="token comment"># This approach doesn't enable customizing each line.</span><br><span class="token comment">#students.plot(x='name', y=[f'test{i + 1}' for i in range(test_count)])</span><br><br>figure<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span><br>line_options <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>        <span class="token string">'color'</span><span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span><br>        <span class="token string">'linestyle'</span><span class="token punctuation">:</span> <span class="token string">'--'</span><span class="token punctuation">,</span><br>        <span class="token string">'linewidth'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span><br>        <span class="token string">'marker'</span><span class="token punctuation">:</span> <span class="token string">'o'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><br>        <span class="token string">'color'</span><span class="token punctuation">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span><br>        <span class="token string">'linestyle'</span><span class="token punctuation">:</span> <span class="token string">':'</span><span class="token punctuation">,</span><br>        <span class="token string">'linewidth'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>        <span class="token string">'marker'</span><span class="token punctuation">:</span> <span class="token string">'s'</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>test_count<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    students<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><br>        ax<span class="token operator">=</span>axes<span class="token punctuation">,</span> <span class="token comment"># required to plot multiple lines</span><br>        label<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'test #</span><span class="token interpolation"><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span><br>        markerfacecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span><br>        x<span class="token operator">=</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token comment"># source of x values</span><br>        y<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'test</span><span class="token interpolation"><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> <span class="token comment"># source of y values</span><br>        <span class="token operator">**</span>line_options<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><br>    <span class="token string">'Test Scores'</span><span class="token punctuation">,</span><br>    fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontname'</span><span class="token punctuation">:</span> <span class="token string">'Comic Sans MS'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Student'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Score'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><br>    ticks<span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    labels<span class="token operator">=</span>students<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>    rotation<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># adjusts padding around plots to fit tick labels</span><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="saving-plots">Saving Plots</h3><p>To save a plot in a PNG file:</p><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span></code></pre><p>If no directory is specified, the file is saved in the current directory.</p><p>The <code>dpi</code> argument (dots per inch) can be omitted, in which case it defaults to 100. Higher DPI values create larger files.</p><h3 id="plotting-functions">Plotting Functions</h3><p>It's easy to plot functions. Using NumPy enables applying a function to an array of numbers to obtain the values to plot. For example:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<br><br>f <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">10</span><br>x_values <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>pi<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_values<span class="token punctuation">,</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x_values<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'sin'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_values<span class="token punctuation">,</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>x_values<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'cos'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_values<span class="token punctuation">,</span> f<span class="token punctuation">(</span>x_values<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'x^2 / 10'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Some Functions'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'radians'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/matplotlib-line-chart-3.png" alt="line chart #3"></p><h2 id="animating-plots">Animating Plots</h2><p>The <code>matplotlib.animation</code> package supports creating animated plots. The following example reads from the file <code>data.csv</code> every second. In the first pass and any time the data changes, it clears the plot and plots the new data.</p><pre class="language-python"><code class="language-python"><span class="token comment"># Disable pylint rule that treats all module-level variables as constants.</span><br><span class="token comment"># pylint: disable=C0103</span><br><br><span class="token keyword">from</span> random <span class="token keyword">import</span> randint<br><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<br><span class="token comment"># animation is missing from Pylance bundled type stub files.</span><br><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">as</span> animation<br><br><span class="token comment"># Can pass figsize=(width,height) in inches.</span><br><span class="token comment"># Can specify dots per inch with dpi=number (ex. 300).</span><br>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><br>last_data <span class="token operator">=</span> <span class="token string">''</span>  <span class="token comment"># used to determine if file contents have changed</span><br>x_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>y_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><br><span class="token keyword">def</span> <span class="token function">animate</span><span class="token punctuation">(</span>_<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span><br>    <span class="token triple-quoted-string string">"""Plots data found in the file data.csv."""</span><br><br>    <span class="token keyword">global</span> last_data<span class="token punctuation">,</span> x_values<span class="token punctuation">,</span> y_values<br><br>    data <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> data <span class="token operator">==</span> last_data<span class="token punctuation">:</span><br>        <span class="token comment"># Could just return here if we only want updates from the file.</span><br>        <span class="token comment"># For fun, randomly pick a point to change.</span><br>        index <span class="token operator">=</span> randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>x_values<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><br>        y_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><br>    <span class="token keyword">else</span><span class="token punctuation">:</span><br>        last_data <span class="token operator">=</span> data<br>        lines <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><br>        x_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>        y_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>        <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span><br>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">:</span><br>                x<span class="token punctuation">,</span> y <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><br>                x_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><br>                y_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>    ax<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># this method is missing from Pylance bundled type stub files</span><br>    ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_values<span class="token punctuation">,</span> y_values<span class="token punctuation">)</span><br><br><span class="token comment"># We must hold a reference to the Animation object returned here</span><br><span class="token comment"># to allow the timer to update the animations.  If not held,</span><br><span class="token comment"># that object is garbage collected and the animation will not work.</span><br>ani <span class="token operator">=</span> animation<span class="token punctuation">.</span>FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> animate<span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="bar-charts">Bar Charts</h2><p>We can create a bar chart showing one test result per student with the following:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><br>students <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Tami'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amanda'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Jeremy'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><br>student_ids <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>student_names <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>test_index <span class="token operator">=</span> <span class="token number">0</span><br>test_scores <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'scores'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>test_index<span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>indexes <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><br>hatches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'O'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token string">'+'</span><span class="token punctuation">]</span><br>horizontal <span class="token operator">=</span> <span class="token boolean">False</span> <span class="token comment"># change to True for horizontal</span><br><br><span class="token comment"># Create plot with width=10" and height=4".</span><br>figure<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token keyword">if</span> horizontal<span class="token punctuation">:</span><br>    bars <span class="token operator">=</span> axes<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>width<span class="token operator">=</span>test_scores<span class="token punctuation">,</span> y<span class="token operator">=</span>indexes<span class="token punctuation">)</span><br><span class="token keyword">else</span><span class="token punctuation">:</span><br>    bars <span class="token operator">=</span> axes<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>height<span class="token operator">=</span>test_scores<span class="token punctuation">,</span> x<span class="token operator">=</span>indexes<span class="token punctuation">)</span><br><br><span class="token keyword">for</span> index<span class="token punctuation">,</span> bar <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>bars<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    bar<span class="token punctuation">.</span>set_hatch<span class="token punctuation">(</span>hatches<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><br>    bar<span class="token punctuation">.</span>set_edgecolor<span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span>  <span class="token comment"># also sets hatch color</span><br>    bar<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span>colors<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><br>    score <span class="token operator">=</span> test_scores<span class="token punctuation">[</span>index<span class="token punctuation">]</span><br>    score_x <span class="token operator">=</span> score <span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> index <span class="token operator">-</span> <span class="token number">0.05</span><br>    score_y <span class="token operator">=</span> index <span class="token operator">-</span> <span class="token number">0.05</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> score <span class="token operator">+</span> <span class="token number">1</span><br>    axes<span class="token punctuation">.</span>text<span class="token punctuation">(</span>score_x<span class="token punctuation">,</span> score_y<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'bold'</span><span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><br>    <span class="token string">'Test Scores'</span><span class="token punctuation">,</span><br>    fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontname'</span><span class="token punctuation">:</span> <span class="token string">'Comic Sans MS'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Score'</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> <span class="token string">'Student'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Student'</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> <span class="token string">'Score'</span><span class="token punctuation">)</span><br><br><span class="token keyword">if</span> horizontal<span class="token punctuation">:</span><br>    plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>indexes<span class="token punctuation">,</span> student_names<span class="token punctuation">)</span><br><span class="token keyword">else</span><span class="token punctuation">:</span><br>    plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>indexes<span class="token punctuation">,</span> student_names<span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/matplotlib-bar-chart-1.png" alt="bar chart #1"></p><p>It's a bit more complicated to show a bar for each test taken by each student.</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span><br><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><br>horizontal <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># change to True for horizontal</span><br>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><br>students <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Tami'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amanda'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Jeremy'</span><span class="token punctuation">,</span> <span class="token string">'scores'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><br>text_delta <span class="token operator">=</span> <span class="token number">0.08</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> <span class="token number">0.04</span><br>student_count <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><br>student_indexes <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span>student_count<span class="token punctuation">)</span><br>test_count <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> acc<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">max</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token string">'scores'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> students<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br>student_ids <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>student_names <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br><br>bar_margin <span class="token operator">=</span> <span class="token number">0.1</span><br>bar_width <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> bar_margin <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> test_count<br>bar_start_dx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">+</span> bar_margin <span class="token operator">+</span> bar_width <span class="token operator">/</span> <span class="token number">2</span><br><br>figure<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token keyword">for</span> test_index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>test_count<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    label <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'test #</span><span class="token interpolation"><span class="token punctuation">{</span>test_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><br>    test_scores <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token string">'scores'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>test_index<span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> students<span class="token punctuation">]</span><br>    bar_dx <span class="token operator">=</span> bar_start_dx <span class="token operator">+</span> bar_width <span class="token operator">*</span> test_index<br>    locations <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token operator">+</span> bar_dx <span class="token keyword">for</span> i <span class="token keyword">in</span> student_indexes<span class="token punctuation">]</span><br>    <span class="token keyword">if</span> horizontal<span class="token punctuation">:</span><br>        bars <span class="token operator">=</span> axes<span class="token punctuation">.</span>barh<span class="token punctuation">(</span><br>            width<span class="token operator">=</span>test_scores<span class="token punctuation">,</span><br>            label<span class="token operator">=</span>label<span class="token punctuation">,</span><br>            height<span class="token operator">=</span>bar_width<span class="token punctuation">,</span><br>            y<span class="token operator">=</span>locations<span class="token punctuation">)</span><br>    <span class="token keyword">else</span><span class="token punctuation">:</span><br>        bars <span class="token operator">=</span> axes<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><br>            height<span class="token operator">=</span>test_scores<span class="token punctuation">,</span><br>            label<span class="token operator">=</span>label<span class="token punctuation">,</span><br>            width<span class="token operator">=</span>bar_width<span class="token punctuation">,</span><br>            x<span class="token operator">=</span>locations<span class="token punctuation">)</span><br><br>    <span class="token keyword">for</span> index<span class="token punctuation">,</span> bar <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>bars<span class="token punctuation">)</span><span class="token punctuation">:</span><br>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'height ='</span><span class="token punctuation">,</span> bar<span class="token punctuation">.</span>get_height<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        bar<span class="token punctuation">.</span>set_edgecolor<span class="token punctuation">(</span><span class="token string">'black'</span><span class="token punctuation">)</span><br>        bar<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span>colors<span class="token punctuation">[</span>test_index<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        score <span class="token operator">=</span> test_scores<span class="token punctuation">[</span>index<span class="token punctuation">]</span><br><br>        size <span class="token operator">=</span> bar<span class="token punctuation">.</span>get_width<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> bar<span class="token punctuation">.</span>get_height<span class="token punctuation">(</span><span class="token punctuation">)</span><br>        text_position_major <span class="token operator">=</span> index <span class="token operator">+</span> bar_dx <span class="token operator">-</span> text_delta<br>        text_position_minor <span class="token operator">=</span> size <span class="token operator">+</span> <span class="token number">1</span><br>        score_x <span class="token operator">=</span> text_position_minor <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> text_position_major<br>        score_y <span class="token operator">=</span> text_position_major <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> text_position_minor<br>        axes<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>test_scores<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span>score_x<span class="token punctuation">,</span> score_y<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><br>    <span class="token string">'Test Scores'</span><span class="token punctuation">,</span><br>    fontdict<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fontname'</span><span class="token punctuation">:</span> <span class="token string">'Comic Sans MS'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Score'</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> <span class="token string">'Student'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Student'</span> <span class="token keyword">if</span> horizontal <span class="token keyword">else</span> <span class="token string">'Score'</span><span class="token punctuation">)</span><br><br><span class="token keyword">if</span> horizontal<span class="token punctuation">:</span><br>    plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>student_indexes<span class="token punctuation">,</span> student_names<span class="token punctuation">)</span><br><span class="token keyword">else</span><span class="token punctuation">:</span><br>    plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>student_indexes<span class="token punctuation">,</span> student_names<span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'upper right'</span><span class="token punctuation">)</span><br>figure<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/matplotlib-bar-chart-2.png" alt="bar chart #2"></p><h2 id="pie-charts">Pie Charts</h2><p>We can create a pie chart indicating percentages of a whole that categories represent. For example, we can show percentages of a day when certain activities occur assuming that no two activities can occur at the same time.</p><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<br><br>day <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Sleep'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span><br>    <span class="token string">'Run'</span><span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">,</span><br>    <span class="token string">'Work'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span><br>    <span class="token string">'Eat'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment"># total for all meals</span><br>    <span class="token string">'Play'</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token comment"># will compute</span><br><span class="token punctuation">}</span><br>day<span class="token punctuation">[</span><span class="token string">'Play'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">-</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>explode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>  <span class="token comment"># start with no slices pulled out</span><br>explode<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.15</span>  <span class="token comment"># pull out 2nd slice by this percentage</span><br><br>fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create a pie chart where the slices are</span><br><span class="token comment"># ordered and plotted counter-clockwise.</span><br>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span><br>    day<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    explode<span class="token operator">=</span>explode<span class="token punctuation">,</span><br>    labels<span class="token operator">=</span>day<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    autopct<span class="token operator">=</span><span class="token string">'%1.1f%%'</span><span class="token punctuation">,</span>  <span class="token comment"># adds value text to slices</span><br>    <span class="token comment"># shadow=True, # gives 3D effect</span><br>    startangle<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># first slice begins here</span><br><br><span class="token comment"># Equal aspect ratio causes pie to be drawn as a circle.</span><br><span class="token comment"># This doesn't seem to be necessary.</span><br><span class="token comment"># ax.axis('equal')</span><br><br>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/matplotlib-pie-chart.png" alt="pie chart"></p><p>The following example demonstrates embedding charts generated by matplotlib in a tkinter GUI application.</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><br><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>backend_tkagg <span class="token keyword">import</span> <span class="token punctuation">(</span><br>    FigureCanvasTkAgg<span class="token punctuation">,</span> NavigationToolbar2Tk<span class="token punctuation">)</span><br><br><span class="token comment"># Support Matplotlib key bindings.</span><br><span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>backend_bases <span class="token keyword">import</span> key_press_handler<br><br><span class="token comment"># Override the Figure class from tkinter.</span><br><span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>figure <span class="token keyword">import</span> Figure<br><br>day <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Sleep'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span><br>    <span class="token string">'Run'</span><span class="token punctuation">:</span> <span class="token number">1.5</span><span class="token punctuation">,</span><br>    <span class="token string">'Work'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span><br>    <span class="token string">'Eat'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment"># total for all meals</span><br>    <span class="token string">'Play'</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token comment"># will compute</span><br><span class="token punctuation">}</span><br>day<span class="token punctuation">[</span><span class="token string">'Play'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">-</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token keyword">def</span> <span class="token function">find_index</span><span class="token punctuation">(</span>predicate<span class="token punctuation">,</span> seq<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>seq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>        <span class="token keyword">if</span> predicate<span class="token punctuation">(</span>seq<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">return</span> index<br>    <span class="token keyword">return</span> <span class="token boolean">None</span><br><br><span class="token keyword">def</span> <span class="token function">plot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token comment"># Determine which slice if any to explode.</span><br>    explode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>  <span class="token comment"># start with none exploded</span><br>    activity <span class="token operator">=</span> activity_var<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    activities <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    activity_index <span class="token operator">=</span> find_index<span class="token punctuation">(</span><span class="token keyword">lambda</span> s<span class="token punctuation">:</span> s <span class="token operator">==</span> activity<span class="token punctuation">,</span> activities<span class="token punctuation">)</span><br>    <span class="token keyword">if</span> activity_index <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span><br>        explode<span class="token punctuation">[</span>activity_index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.1</span>  <span class="token comment"># explode by this percentage</span><br><br>    shadow <span class="token operator">=</span> want_3d<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><br><br>    fig<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># clears previous content</span><br>    fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pie<span class="token punctuation">(</span><br>        day<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        explode<span class="token operator">=</span>explode<span class="token punctuation">,</span><br>        labels<span class="token operator">=</span>day<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        autopct<span class="token operator">=</span><span class="token string">'%1.1f%%'</span><span class="token punctuation">,</span>  <span class="token comment"># adds value text to slices</span><br>        shadow<span class="token operator">=</span>shadow<span class="token punctuation">,</span>  <span class="token comment"># gives 3D effect</span><br>        startangle<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># first slice begins here</span><br>    canvas<span class="token punctuation">.</span>draw<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">def</span> <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>    root<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># stops mainloop</span><br>    root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># necessary on Windows to prevent an error</span><br><br>root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span><br>root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Tk Pie Chart using matplotlib'</span><span class="token punctuation">)</span><br><br>frame <span class="token operator">=</span> Frame<span class="token punctuation">(</span>root<span class="token punctuation">)</span><br>frame<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>TOP<span class="token punctuation">,</span> fill<span class="token operator">=</span>X<span class="token punctuation">)</span><br><br>Label<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"Explode"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>LEFT<span class="token punctuation">)</span><br><br>activity_var <span class="token operator">=</span> StringVar<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">)</span><br>activity_var<span class="token punctuation">.</span>trace<span class="token punctuation">(</span><span class="token string">'w'</span><span class="token punctuation">,</span> <span class="token keyword">lambda</span> <span class="token operator">*</span>args<span class="token punctuation">:</span> plot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ignoring arguments</span><br>default_value <span class="token operator">=</span> <span class="token string">'none'</span><br>slice_menu <span class="token operator">=</span> OptionMenu<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> activity_var<span class="token punctuation">,</span> default_value<span class="token punctuation">,</span> <span class="token operator">*</span>day<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>slice_menu<span class="token punctuation">.</span>config<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># sized to hold widest value</span><br>slice_menu<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>LEFT<span class="token punctuation">)</span><br><br>want_3d <span class="token operator">=</span> IntVar<span class="token punctuation">(</span><span class="token punctuation">)</span><br>cb <span class="token operator">=</span> Checkbutton<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> command<span class="token operator">=</span>plot<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'3D'</span><span class="token punctuation">,</span> variable<span class="token operator">=</span>want_3d<span class="token punctuation">)</span><br>cb<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>LEFT<span class="token punctuation">)</span><br><br>quit_btn <span class="token operator">=</span> Button<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"Quit"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>quit<span class="token punctuation">,</span> padx<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> pady<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><br>quit_btn<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>RIGHT<span class="token punctuation">)</span><br><br>fig <span class="token operator">=</span> Figure<span class="token punctuation">(</span><span class="token punctuation">)</span><br>canvas <span class="token operator">=</span> FigureCanvasTkAgg<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> master<span class="token operator">=</span>root<span class="token punctuation">)</span><br>canvas<span class="token punctuation">.</span>draw<span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token comment"># This canvas object is not a Tk widget,</span><br><span class="token comment"># but it has a method to get one.</span><br>canvas<span class="token punctuation">.</span>get_tk_widget<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment"># Forward key press events to matplotlib key press handler.</span><br><span class="token keyword">def</span> <span class="token function">on_key_press</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    key_press_handler<span class="token punctuation">(</span>event<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> toolbar<span class="token punctuation">)</span><br>canvas<span class="token punctuation">.</span>mpl_connect<span class="token punctuation">(</span><span class="token string">"key_press_event"</span><span class="token punctuation">,</span> on_key_press<span class="token punctuation">)</span><br><br><span class="token comment"># Add the matplotlib toolbar at the bottom of the window.</span><br>toolbar <span class="token operator">=</span> NavigationToolbar2Tk<span class="token punctuation">(</span>canvas<span class="token punctuation">,</span> root<span class="token punctuation">)</span><br>toolbar<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>plot<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># initial plot</span><br><br>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># start the event loop</span></code></pre><p><img src="/blog/assets/tkinter-matplotlib-pie-chart.png" alt="pie chart"></p><h2 id="annotations">Annotations</h2><p>See <a href="https://github.com/joferkington/mpldatacursor?v=1.0.16" rel="noopener" target="_blank">mpldatacursor</a> and <a href="https://mplcursors.readthedocs.io/en/stable/?v=1.0.16" rel="noopener" target="_blank">mplcursors</a>.</p></article>