<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>seaborn library</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#built-in-datasets">Built-in Datasets</a></li><li><a href="#distribution-plot">Distribution Plot</a></li><li><a href="#histogram-plot">Histogram Plot</a></li><li><a href="#joint-plot">Joint Plot</a></li><li><a href="#styles">Styles</a></li><li><a href="#context">Context</a></li><li><a href="#removing%2Fmoving-spines">Removing/Moving Spines</a></li><li><a href="#color-palettes">Color Palettes</a></li><li><a href="#pair-plot">Pair Plot</a></li><li><a href="#rug-plot">Rug Plot</a></li><li><a href="#bar-plot">Bar Plot</a></li><li><a href="#count-plot">Count Plot</a></li><li><a href="#box-plot">Box Plot</a></li><li><a href="#strip-plot">Strip Plot</a></li><li><a href="#colormaps">Colormaps</a></li><li><a href="#swarm-plot">Swarm Plot</a></li><li><a href="#heatmap-plot-from-correlation-data">Heatmap Plot from Correlation Data</a></li><li><a href="#heatmap-plot-from-a-pivot-table">Heatmap Plot from a Pivot Table</a></li><li><a href="#cluster-map">Cluster Map</a></li><li><a href="#pairgrid-plot">PairGrid Plot</a></li><li><a href="#facetgrid-plot">FacetGrid Plot</a></li><li><a href="#regression-plot">Regression Plot</a></li></ol></nav></aside><article><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://seaborn.pydata.org/?v=1.1.0" rel="noopener" target="_blank">seaborn</a> is a Python library for data visualization. It builds on <a href="../matplotlib">matplotlib</a> to provide a higher level API for creating charts with less code. It also has strong integration with the <a href="../pandas">pandas</a> package.</p><p>To install this package, enter <code>pip install seaborn</code>.</p><p>To use Seaborn, import both it and matplotlib.</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<br><span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns</code></pre><p>The alias &quot;sns&quot; is the initials of the character Samuel Norman Seaborn from the television show &quot;The West Wing&quot;. It's supposed to be funny, but I just find it confusing.</p><h2 id="built-in-datasets" tabindex="-1">Built-in Datasets</h2><p>Seaborn includes many datasets that can be used to experiment with the plot types it supports. To get a list of these dataset names, call <code>sns.get_dataset_names()</code>. These include anagrams, anscombe, attention, brain_networks, car_crashes, diamonds, dots, exercise, flights, fmri, gammas, geyser, iris, mpg, penguins, planets, tips, and titanic.</p><p>To load one of these datasets into a pandas <code>DataFrame</code>:</p><pre class="language-python"><code class="language-python">df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span>name<span class="token punctuation">)</span></code></pre><p>For all the examples that follow, we will use the &quot;mpg&quot; dataset which provides miles per gallon data and more for cars with model years from 1970 to 1982.</p><p>To see the column names and a few rows from this dataset, print <code>df.head()</code> which outputs the following:</p><p><img src="/blog/assets/seaborn-1-mpg-dataset.png" alt="mpg dataset"></p><h2 id="distribution-plot" tabindex="-1">Distribution Plot</h2><p>From the docs, this &quot;provides access to several approaches for visualizing the univariate or bivariate distribution of data, including subsets of data defined by semantic mapping and faceting across multiple subplots.&quot;</p><p>The example below shows the number of cars in each range of MPG values.</p><p>The <code>bins</code> argument specifies the number of bins into which the data should be split. The MPG ranges are determined by this value.</p><p>The <code>kde</code> argument stands for &quot;kernel density estimation&quot; and causes the curve through the bars to be rendered.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>displot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> kde<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-2-displot.png" alt="displot"></p><h2 id="histogram-plot" tabindex="-1">Histogram Plot</h2><p>From the docs, this plots &quot;univariate or bivariate histograms to show distributions of datasets.&quot;</p><p>The example below shows the number of cars in each range of MPG values. MPG ranges are determined by the value of <code>bins</code>. It is very similar to <code>displot</code> and just seems to just add a top border.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>histplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-3-histplot.png" alt="histplot"></p><h2 id="joint-plot" tabindex="-1">Joint Plot</h2><p>This plots two variables with bivariate and univariate graphs.</p><p>The example below shows a dot for each car at year/mpg intersections and a linear regression line. The histogram at the top indicates the number of cars in each model year range. The histogram on the right indicates the number of cars in each mpg range. We see from this that the most common mpg range is around 19 mpg.</p><p>Setting the <code>kind</code> argument to <code>reg</code> causes the linear regression line to be computed and rendered.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">'reg'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-4-jointplot.png" alt="jointplot"></p><h1 id="kde-plot" tabindex="-1">KDE Plot</h1><p>From the docs, this &quot;is a method for visualizing the distribution of observations in a dataset, analogous to a histogram. KDE represents the data using a continuous probability density curve in one or more dimensions.&quot;</p><p>The example below gives an indication of the number of vehicles in the dataset for each MPG value.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-5-kdeplot.png" alt="histplot"></p><h2 id="styles" tabindex="-1">Styles</h2><p>From the docs, the <code>set_style</code> method &quot;affects things like the color of the axes, whether a grid is enabled by default, and other aesthetic elements.&quot; Call this before generating a plot.</p><p>To set colors, pass it one of &quot;white&quot;, &quot;dark&quot;, &quot;whitegrid&quot;, or &quot;darkgrid&quot;.</p><p>To add tick marks to the axes, pass it &quot;ticks&quot;.</p><p>It seems that it is not possible to set colors AND add tick marks because that requires two calls and the second just overrides the first.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">'darkgrid'</span><span class="token punctuation">)</span><br><span class="token comment">#sns.set_style('ticks')</span><br>sns<span class="token punctuation">.</span>displot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> kde<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-6-set_style.png" alt="set_style"></p><h2 id="context" tabindex="-1">Context</h2><p>From the docs, the <code>set_context</code> method &quot;affects things like the size of the labels, lines, and other elements of the plot, but not the overall style&quot; of the most recent plot. The default context is “notebook”. Other contexts are “paper”, “talk”, and “poster”, which scale values used by &quot;notebook&quot; by 0.8, 1.3, and 1.6, respectively.</p><p>Explicitly setting the context to &quot;notebook&quot; makes everything much larger than expected!</p><h2 id="removing%2Fmoving-spines" tabindex="-1">Removing/Moving Spines</h2><p>Call <code>sns.despine()</code> after creating a plot to remove the solid lines and tick marks from specific sides, passing it boolean arguments that indicate which sides to remove.</p><p>When <code>bottom</code> is set to <code>True</code> the top spine is also removed unless <code>top</code> is set to <code>False</code>. Similarly, when <code>left</code> is set to <code>True</code> the right spine is also removed unless <code>right</code> is set to <code>False</code>.</p><p>For example, in the previous plot we can display right and top spines instead of left and bottom spines as follows:</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-7-despine.png" alt="despine"></p><h2 id="color-palettes" tabindex="-1">Color Palettes</h2><p>By default, Seaborn supports six variations of matplotlib palettes. These are &quot;deep&quot;, &quot;muted&quot;, &quot;pastel&quot;, &quot;bright&quot;, &quot;dark&quot;, and &quot;colorblind&quot;. The colors in each palette can be viewed at <a href="https://seaborn.pydata.org/tutorial/color_palettes.html?v=1.1.0" rel="noopener" target="_blank">color palettes</a>.</p><p>One of these color palettes is used in the next example.</p><h2 id="pair-plot" tabindex="-1">Pair Plot</h2><p>From the docs, &quot;By default, this function will create a grid of Axes such that each numeric variable in data will by shared across the y-axes across a single row and the x-axes across a single column. The diagonal plots are treated differently: a univariate distribution plot is drawn to show the marginal distribution of the data in each column.&quot; Wow, that's a lot to take in!</p><p>The &quot;vars&quot; argument limits the variables that are plotted.</p><p>The &quot;palette&quot; argument specifies a color palette to use.</p><p>The &quot;hue&quot; argument specifies a column name to be treated as a category for the purpose of assigning colors from the palette.</p><p>This takes a long time to complete (~15 seconds) because it generates many plots.</p><p>Compare this to a <code>PairGrid</code> plot described later.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span><br>  df<span class="token punctuation">,</span><br>  <span class="token builtin">vars</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> <span class="token string">'horsepower'</span><span class="token punctuation">,</span> <span class="token string">'model_year'</span><span class="token punctuation">,</span> <span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  palette<span class="token operator">=</span><span class="token string">"pastel"</span><span class="token punctuation">,</span><br>  hue<span class="token operator">=</span><span class="token string">"model_year"</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-8-pairplot.png" alt="pairplot"></p><h2 id="rug-plot" tabindex="-1">Rug Plot</h2><p>From the docs, this plots &quot;marginal distributions by drawing ticks along the x and y axes.&quot; This just indicates concentrations of data values and seems less useful than the other supported plots.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>rugplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-9-rugplot.png" alt="rugplot"></p><h2 id="bar-plot" tabindex="-1">Bar Plot</h2><p>From the docs, &quot;A bar plot represents an estimate of central tendency for a numeric variable with the height of each rectangle and provides some indication of the uncertainty around that estimate using error bars.&quot;</p><p>For example, the plot below shows the average (mean) MPG value for cars in each model year. The black vertical line at the top of each bar shows the min and max values in that model year.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-10-barplot.png" alt="barplot"></p><p>To change the calculation of the heights, add the <code>estimator</code> argument, set to the function that will compute the value. For example, to plot the maximum values in each model year instead of mean values, import the <code>numpy</code> package as <code>np</code> and add the <code>estimator=np.max</code> argument.</p><h2 id="count-plot" tabindex="-1">Count Plot</h2><p>This produces a bar chart that shows the rows counts for each unique value of a given column.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>countplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-11-countplot.png" alt="countplot"></p><h2 id="box-plot" tabindex="-1">Box Plot</h2><p>From the docs, this &quot;shows the distribution of quantitative data in a way that facilitates comparisons between variables or across levels of a categorical variable.&quot; It is also known as a &quot;box and whisker&quot; plot.</p><p>Each box shows quartiles of the dataset. The whiskers extend to show the rest of the distribution, excluding points that are determined to be &quot;outliers&quot;.</p><ul><li>The horizontal line across the boxes represents the median value, not the mean.</li><li>The box extends one standard deviation above and below the median.</li><li>The horizontal line at the top of the top &quot;whisker&quot; represents the maximum value.</li><li>The horizontal line at the bottom of the bottom &quot;whisker&quot; represents the minimum value.</li><li>The small black diamonds represent outlier data.</li></ul><pre class="language-python"><code class="language-python">cylinders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token comment"># not interested in 3 or 5 cylinder cars</span><br>subset_df <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cylinders'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>cylinders<span class="token punctuation">)</span><span class="token punctuation">]</span><br>year_71_df <span class="token operator">=</span> subset_df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>subset_df<span class="token punctuation">[</span><span class="token string">'model_year'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">71</span><span class="token punctuation">]</span><br><span class="token comment"># To manually verify box values ...</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'For cars in 1971, min ='</span><span class="token punctuation">,</span> year_71_df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">', max ='</span><span class="token punctuation">,</span> year_71_df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">', mean ='</span><span class="token punctuation">,</span> year_71_df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">', and median ='</span><span class="token punctuation">,</span> year_71_df<span class="token punctuation">[</span><span class="token string">'mpg'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># This will render one box for each hue value within each x value.</span><br><span class="token comment"># Statistics are gathered from the y values.</span><br>sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>subset_df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">)</span></code></pre><p>The <code>print</code> call above outputs:</p><pre class="language-text"><code class="language-text">For cars in 1971, min = 12.0 , max = 35.0 , mean = 21.25 , and median = 19.0</code></pre><p>Examine the box for the year 1971 below to verify what is plotted.</p><p><img src="/blog/assets/seaborn-12-boxplot.png" alt="boxplot"></p><p>To plot a separate box for each cylinder value within each year, add the <code>hue</code> argument as follows:</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>subset_df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-12-boxplot2.png" alt="boxplot"></p><h2 id="strip-plot" tabindex="-1">Strip Plot</h2><p>From the docs, this draws &quot;a scatterplot where one variable is categorical.&quot;</p><p>In the example below, the categorical variable &quot;model_year&quot;.</p><p>Add <code>dodge=True</code> to place the dots for each <code>hue</code> value in its own column.</p><p>Add <code>jitter=True</code> to spread the dots horizontally a bit farther to reduce overlap.</p><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Model Year'</span><span class="token punctuation">)</span><br>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Miles Per Gallon'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-13-stripplot.png" alt="stripplot"></p><h2 id="colormaps" tabindex="-1">Colormaps</h2><p>The matplotlib package provides many pre-built colormaps whose names can be used as the value of the <code>palette</code> option. To see a list of colormap names, see <a href="https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html?v=1.1.0" rel="noopener" target="_blank">colormaps</a>. For example, here is the previous plot using the &quot;hsv&quot; colormap.</p><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'hsv'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-14-colormaps.png" alt="colormaps"></p><h2 id="swarm-plot" tabindex="-1">Swarm Plot</h2><p>From the docs, this draws &quot;a categorical scatterplot with non-overlapping points.&quot; It looks nearly identical to a strip plot, but the points are spread more horizontally so they do not overlap.</p><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>swarmplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'hsv'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-15-swarmplot.png" alt="swarmplot"></p><h2 id="heatmap-plot-from-correlation-data" tabindex="-1">Heatmap Plot from Correlation Data</h2><p>A heatmap shows the degree of correlation between column values.</p><p>Create a matrix <code>DataFrame</code> from the original one that contains the correlation values and pass this to the <code>heatmap</code> method. Set the <code>annot</code> argument to <code>True</code> to display correlation values in the cells. Every column has strong correlation with itself, receiving a value of 1. Depending on the colormap, cells with darker colors typically indicate strong correlation between the column name to the left of the cell and the column name below the cell.</p><p>We can build a correlation matrix by call the <code>corr</code> method on the <code>DataFrame</code>.</p><pre class="language-python"><code class="language-python">matrix <span class="token operator">=</span> df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span></code></pre><p>This outputs the following correlation values:</p><pre class="language-text"><code class="language-text">                       mpg  cylinders  displacement  horsepower    weight  \<br>    mpg           1.000000  -0.775396     -0.804203   -0.778427 -0.831741<br>    cylinders    -0.775396   1.000000      0.950721    0.842983  0.896017<br>    displacement -0.804203   0.950721      1.000000    0.897257  0.932824<br>    horsepower   -0.778427   0.842983      0.897257    1.000000  0.864538<br>    weight       -0.831741   0.896017      0.932824    0.864538  1.000000<br>    acceleration  0.420289  -0.505419     -0.543684   -0.689196 -0.417457<br>    model_year    0.579267  -0.348746     -0.370164   -0.416361 -0.306564<br><br>                  acceleration  model_year<br>    mpg               0.420289    0.579267<br>    cylinders        -0.505419   -0.348746<br>    displacement     -0.543684   -0.370164<br>    horsepower       -0.689196   -0.416361<br>    weight           -0.417457   -0.306564<br>    acceleration      1.000000    0.288137<br>    model_year        0.288137    1.000000</code></pre><p>We can use this correlation matrix to produce a heat map plot with the following:</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'YlOrRd'</span><span class="token punctuation">,</span> linecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-16-heatmap-from-correlation.png" alt="heatmap from correlation"></p><p>This heat map shows the following:</p><ul><li>The value that most affects <code>mpg</code> is <code>model_year</code>.</li><li>There is a strong correlation between <code>displacement</code> and <code>cylinders</code>.</li><li>There is a weak correlation between <code>horsepower</code> and <code>acceleration</code>.</li></ul><h2 id="heatmap-plot-from-a-pivot-table" tabindex="-1">Heatmap Plot from a Pivot Table</h2><p>Creating a heat map from a pivot table is useful when the correlation we wish to show is between specific values of a given column.</p><p>For example, we can correlate <code>model_year</code> and <code>cylinders</code> to <code>mpg</code>. Note that some cells have no value because there are no cars in the dataset for that combination of <code>model_year</code> and <code>cylinders</code>.</p><pre class="language-python"><code class="language-python">matrix <span class="token operator">=</span> df<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'YlOrRd'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-17-heatmap-from-pivot-table.png" alt="heatmap from pivot table"></p><p>This plot shows that in this dataset the highest <code>mpg</code> comes from 1980 cars with 5 cylinders.</p><h2 id="cluster-map" tabindex="-1">Cluster Map</h2><p>From the docs, this plots &quot;a matrix dataset as a hierarchically-clustered heatmap.&quot; It is very similar to the &quot;Heat Map from Correlation Data&quot; example above, but it clusters like data points by reordering the rows and columns.</p><pre class="language-python"><code class="language-python">matrix <span class="token operator">=</span> df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><br>sns<span class="token punctuation">.</span>clustermap<span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'YlOrRd'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-18-clustermap.png" alt="clustermap"></p><p>The meaning of the grouping brackets on the left and top sides of the plot are not clear to me. I know they represent clusters of data, but what is the criteria for clustering?</p><h2 id="pairgrid-plot" tabindex="-1">PairGrid Plot</h2><p>A <code>PairGrid</code> plot creates many plots of a specific kind for each combination of two columns.</p><p>To limit the columns in the <code>DataFrame</code> that are mapped to plot columns, add the <code>x_vars</code> argument whose value is a list of column names.</p><p>To limit the columns in the <code>DataFrame</code> that are mapped to plot rows, add the <code>y_vars</code> argument whose value is a list of column names.</p><p>For example, we can choose to create scatter plots where the color of each dot is determined by the <code>mpg</code> value.</p><pre class="language-python"><code class="language-python">mpg_grid <span class="token operator">=</span> sns<span class="token punctuation">.</span>PairGrid<span class="token punctuation">(</span><br>    df<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'YlOrRd'</span><span class="token punctuation">,</span><br>    x_vars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> <span class="token string">'horsepower'</span><span class="token punctuation">,</span> <span class="token string">'model_year'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    y_vars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'horsepower'</span><span class="token punctuation">,</span> <span class="token string">'weight'</span><span class="token punctuation">,</span> <span class="token string">'model_year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>mpg_grid<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-19-PairGrid.png" alt="PairGrid"></p><p>Compare this to Pair plot described earlier.</p><p>Focusing on one of the generated plots below, the one in the lower-left shows <code>mpg</code> values using various colors for combinations of <code>cylinder</code> and <code>model_year</code> values. It shows that for a given number of cylinders, the mpg average has tended to increase for newer model years.</p><h2 id="facetgrid-plot" tabindex="-1">FacetGrid Plot</h2><p>From the docs, this is a &quot;multi-plot grid for plotting conditional relationships.&quot;</p><p>In the example below there is one plot for each combination of <code>cylinders</code> and <code>model_year</code>. Each plot is a scatter plot where the x-axis is <code>horsepower</code> and the y-axis is <code>mpg</code>.</p><pre class="language-python"><code class="language-python"><span class="token comment"># Get the subset of the data that excludes 3 and 5 cylinder cars</span><br><span class="token comment"># and only includes model years in the 80's.</span><br>cylinders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><br>subset_df <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cylinders'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>cylinders<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'model_year'</span><span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">]</span><br><br>fg <span class="token operator">=</span> sns<span class="token punctuation">.</span>FacetGrid<span class="token punctuation">(</span>subset_df<span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> row<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">)</span><br>fg<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">,</span> <span class="token string">'horsepower'</span><span class="token punctuation">,</span> <span class="token string">'mpg'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-20-FacetGrid.png" alt="FacetGrid"></p><h2 id="regression-plot" tabindex="-1">Regression Plot</h2><p>From the docs, this plots &quot;data and regression model fits across a FacetGrid.&quot;</p><p>In the example below we plot a point for each car where the x-axis is <code>model_year</code> and the y-axis is <code>mpg</code>. The color of each point is based its <code>cylinders</code> value. Each regression line shows the change in <code>mpg</code> for a given <code>cylinders</code> value.</p><pre class="language-python"><code class="language-python">cylinders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token comment"># not interested in 3 or 5 cylinder cars</span><br>subset_df <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'cylinders'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>cylinders<span class="token punctuation">)</span><span class="token punctuation">]</span><br>sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>data<span class="token operator">=</span>subset_df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-21-lmplot.png" alt="lmplot"></p><p>This shows that <code>mpg</code> has improved more rapidly for 4 cylinder cars than for cars with more cylinders.</p><p>To show separate plots for each unique value of a given column, add the <code>col</code> argument set to that column name. For example, the following renders a separate plot for each value found in the <code>cylinders</code> column.</p><pre class="language-python"><code class="language-python">sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>data<span class="token operator">=</span>subset_df<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'model_year'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">'cylinders'</span><span class="token punctuation">)</span></code></pre><p><img src="/blog/assets/seaborn-22-lmplot-separated.png" alt="lmplot separated"></p></article>