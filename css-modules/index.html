<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>CSS Modules</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#installing">Installing</a></li><li><a href="#component-styles">Component Styles</a></li></ol></nav></aside><article><style>img {
        border: 1px solid gray;
    }</style><h2 id="overview" tabindex="-1">Overview</h2><p><a href="https://github.com/css-modules/css-modules?v=1.1.1" rel="noopener" target="_blank">CSS Modules</a> provides a way to scope CSS rules with selectors that are class names to a component in a web framework. It does not support scoping CSS rules with selectors that only target specific HTML elements.</p><p>Web frameworks that have built-in support for CSS scoping such as Svelte and Vue have no need for CSS Modules. CSS Modules are mostly commonly used in React and web frameworks built-in on React such as Next.js.</p><h2 id="installing" tabindex="-1">Installing</h2><p><a href="https://nextjs.org/docs/app/building-your-application/styling/css-modules?v=1.1.1" rel="noopener" target="_blank">Next.js</a> projects and React projects created with <a href="https://create-react-app.dev?v=1.1.1" rel="noopener" target="_blank">create-react-app</a> automatically include support for CSS Modules.</p><p>React projects created in other ways may require configuration. Options include:</p><ul><li><a href="https://github.com/gajus/babel-plugin-react-css-modules?v=1.1.1" rel="noopener" target="_blank">babel-plugin-react-css-modules</a>.</li><li>Webpack module <a href="https://github.com/webpack-contrib/css-loader?v=1.1.1" rel="noopener" target="_blank">css-loader</a></li><li>PostCSS plugin <a href="https://github.com/madyankin/postcss-modules?v=1.1.1" rel="noopener" target="_blank">postcss-modules</a></li></ul><h2 id="component-styles" tabindex="-1">Component Styles</h2><p>To define CSS rules that should be scoped to a component, create a file whose name matches that of the source file that defines the component. The recommended file extension is <code>.module.css</code>.</p><p>CSS Module source files use standard CSS syntax, but support a small number of extensions including:</p><ul><li><code>:global</code> to define rules that are global and therefore not scoped to the component</li><li><code>:local</code> to switch back to local scope inside a global rule</li><li><code>composes</code> to include properties from another rule in rules where this appears</li><li><code>@value</code> to define variables, but it's better to use standard CSS custom properties (variables) instead</li></ul><p>It is recommended to use camelCase names for CSS classes define in CSS Modules source files. The reason is that these become properties on an exported JavaScript object. Referencing properties with snake_case or kebab-case names is somewhat tedious because they must be inside quotes that are inside square brackets. For example, writing <code>styles.myClassName</code> is easier than writing <code>styles['my-class-name']</code>.</p><p>The following file, <code>MyComponent.module.css</code>, defines styles that will be scoped to the component <code>MyComponent</code>.</p><pre class="language-css"><code class="language-css"><span class="token selector">.title</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.myComponent p</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The following file, <code>MyComponent.tsx</code>, defines a component that uses the styles defined above.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><br><br><span class="token comment">// The name "styles" here can be changed to anything,</span><br><span class="token comment">// but this name is commonly used.</span><br><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./MyComponent.module.css'</span><span class="token punctuation">;</span><br><br>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">,</span><br>  <span class="token literal-property property">content</span><span class="token operator">:</span> string<br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> content<span class="token punctuation">}</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>myComponent<span class="token punctuation">}</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>This component can be used as follows:</p><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>MyComponent title<span class="token operator">=</span><span class="token string">"My Story"</span> content<span class="token operator">=</span><span class="token string">"Once upon a time ..."</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><img alt="CSS Modules demo" style="width: 40%" src="/blog/assets/css-modules-demo.png?v=1.1.1" title="CSS Modules demo"></p><p>The <code>styles</code> object imported above will have a value similar to the following:</p><pre class="language-js"><code class="language-js">MyComponent<span class="token punctuation">.</span>tsx x<span class="token operator">:</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">myClass</span><span class="token operator">:</span> <span class="token string">'MyComponent_myClass__ac2E0'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">myComponent</span><span class="token operator">:</span> <span class="token string">'MyComponent_myComponent__SsuQ7'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">__checksum</span><span class="token operator">:</span> <span class="token string">'94c8de6fb949'</span><br><span class="token punctuation">}</span></code></pre><p>The hash values at the ends of the generated class names are the key to scoping styles to a component. By default, they only change with the file name changes, not when the CSS rules change. There are several ways to change the strategy for generating these hash values if desired, including specifying a <code>localIdentHashFunction</code>.</p></article>