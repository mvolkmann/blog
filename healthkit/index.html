<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>HealthKit</h2><aside><nav class="toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#flutter">Flutter</a></li><li><a href="#available-data">Available Data</a></li><li><a href="#steps-to-use">Steps to Use</a></li><li><a href="#permissions">Permissions</a></li><li><a href="#data-class-hierarchy">Data Class Hierarchy</a></li></ol></nav></aside><article><h2 id="overview">Overview</h2><p><a href="https://developer.apple.com/documentation/healthkit?v=1.0.19" rel="noopener" target="_blank">HealthKit</a> is a library from Apple to &quot;Access and share health and fitness data while maintaining the user’s privacy and control.&quot;</p><p>It supports three categories of tasks:</p><ol><li>collect and store health and fitness data</li><li>analyze and visualize the data</li><li>enable social interactions</li></ol><p>&quot;Because health data may contain sensitive, personal information, apps must receive permission from the user to read data from or write data to the HealthKit store.&quot;</p><h2 id="flutter">Flutter</h2><p>The Flutter pub.dev package <a href="https://pub.dev/packages/health?v=1.0.19" rel="noopener" target="_blank">health</a> can access data from both Apple HealthKit and Android &quot;Google Fit&quot;.</p><p>See my project flutter_health which is not yet working.</p><h2 id="available-data">Available Data</h2><p>The data available in HealthKit includes:</p><ul><li><p>Characteristics</p><ul><li>activity move mode</li><li>biological sex</li><li>blood type</li><li>date of birth</li><li>Fitzpatrick skin type</li><li>wheel chair use</li></ul></li><li><p>Activity</p><ul><li>active energy burned</li><li>Apple exercise time</li><li>Apple move time</li><li>Apple stand time</li><li>basal energy burned</li><li>distance cycling</li><li>distance downhill snow sports</li><li>distance swimming</li><li>distance walking/running</li><li>flights climbed (stairs)</li><li>low cardio fitness event</li><li>Nike fuel points earned</li><li>push count while using a wheelchair</li><li>step count</li><li>swimming stroke count</li><li>VO2 max</li></ul></li><li><p>Body Measurements</p><ul><li>body fat percentage</li><li>body mass</li><li>body mass index</li><li>height</li><li>lean body mass</li><li>waist circumference</li></ul></li><li><p>Reproductive Health</p><ul><li>basal body temperature</li><li>cervical mucus quality</li><li>contraceptive</li><li>inter-menstrual bleeding</li><li>lactation</li><li>menstrual flow</li><li>ovulation test result</li><li>pregnancy</li><li>pregnancy test result</li><li>progesterone test result</li><li>sexual activity</li></ul></li><li><p>Hearing</p><ul><li>environmental audio exposure</li><li>environmental audio exposure event</li><li>headphone audio exposure</li><li>headphone audio exposure event</li></ul></li><li><p>Vital Signs</p><ul><li>blood pressure</li><li>blood pressure diastolic</li><li>blood pressure systolic</li><li>body temperature</li><li>electrocardiogram data</li><li>heart rate</li><li>heart rate variability SDNN (standard deviation of <a href="https://hexoskin.zendesk.com/hc/en-us/articles/360045123314-Difference-between-RR-interval-and-NN-interval?v=1.0.19" rel="noopener" target="_blank">NN intervals</a>)</li><li>heartbeat series</li><li>high heart rate event</li><li>irregular heart rhythm event</li><li>low heart rate event</li><li>oxygen saturation</li><li>respiratory rate</li><li>resting heart rate</li><li>walking heart rate average</li></ul></li></ul><h2 id="steps-to-use">Steps to Use</h2><ol><li>Create a new iOS App project in Xcode.</li><li>Click the top entry in the Navigator.</li><li>Select TARGETS ... {app-name} ... Info.</li><li>Hover over one the entries and click the &quot;+&quot; button to add one.</li><li>Add the key &quot;Privacy - Health Share Usage Description&quot;</li><li>Enter a value like &quot;This app needs to access your health data.&quot;</li><li>Hover over one the entries and click the &quot;+&quot; button to add another.</li><li>Add the key &quot;Privacy - Health Update Usage Description&quot;</li><li>Enter a value like &quot;This app needs to update your health data.&quot;</li><li>Click the target under &quot;TARGETS&quot; which has the same name as the app.</li><li>Click the &quot;Signing &amp; Capabilities&quot; tab.</li><li>Click &quot;+ Capability&quot;.</li><li>Type &quot;h&quot; and double-click &quot;HealthKit&quot;.</li></ol><p>HealthKit cannot be used in the Simulator, so the app must be run on a real device.</p><h2 id="permissions">Permissions</h2><p>The first time a user runs an app that uses HealthKit it will prompt for permission to access health data. Separate toggle switches are displayed for each kind of data to be written and each kind of data to be read. For example, a user can grant access to read their weight (a.k.a. bodyMass), but deny permission to write their weight.</p><p>If the user denies permission to access a particular kind of data and the app is run again later, it will not prompt the user for permission again.</p><p>To grant permission later:</p><ol><li>Launch the Health app.</li><li>Tap the &quot;Sharing&quot; button at the bottom.</li><li>Tap &quot;Apps&quot;.</li><li>Tap the name of an app that wants permissions.</li><li>Enable/disable specific permissions or tap &quot;Turn on all&quot;.</li></ol><p>An error is thrown if an app attempts to write data for which the usser has not granted permission.</p><p>Apps do not crash or throw an error if they attempt to read data for which the user has not granted permission. If the query is for a single value, ? is returned. If the query is for a sequence of data, an empty Array is returned.</p><h2 id="data-class-hierarchy">Data Class Hierarchy</h2><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkhealthstore?v=1.0.19" rel="noopener" target="_blank">HKHealthStore</a></p><p>&quot;The access point for all data managed by HealthKit.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkobject?v=1.0.19" rel="noopener" target="_blank">HKObject</a></p><p>&quot;A piece of data that can be stored inside the HealthKit store.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hksample?v=1.0.19" rel="noopener" target="_blank">HKSample</a></p><p>&quot;A HealthKit sample represents a piece of data associated with a start and end time.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcategorysample?v=1.0.19" rel="noopener" target="_blank">HKCategorySample</a></p><p>&quot;A sample with values from a short list of possible values.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcorrelation?v=1.0.19" rel="noopener" target="_blank">HKCorrelation</a></p><p>&quot;A sample that groups multiple related samples into a single entry.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkquantitysample?v=1.0.19" rel="noopener" target="_blank">HKQuantitySample</a></p><p>&quot;A sample that represents a quantity, including the value and the units.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcumulativequantitysample?v=1.0.19" rel="noopener" target="_blank">HKCummulativeQuantitySample</a></p><p>&quot;A sample that represents a cumulative quantity.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkdiscretequantitysample?v=1.0.19" rel="noopener" target="_blank">HKDiscreteQuantitySample</a></p><p>&quot;A sample that represents a discrete quantity.&quot;</p></li></ul></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkworkout?v=1.0.19" rel="noopener" target="_blank">HKWorkout</a></p><p>&quot;A workout sample that stores information about a single physical activity.&quot;</p></li></ul></li></ul></li></ul><p>HealthKit data types are defined <a href="https://developer.apple.com/documentation/healthkit/data_types?v=1.0.19" rel="noopener" target="_blank">HKObjectType</a> subclasses. The subclasses include:</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkobjecttype?v=1.0.19" rel="noopener" target="_blank">HKObjectType</a></p><p>&quot;An abstract superclass with subclasses that identify a specific type of data for the HealthKit store.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkactivitysummarytype?v=1.0.19" rel="noopener" target="_blank">HKActivitySummaryType</a></p><p>&quot;A type that identifies activity summary objects.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcharacteristictype?v=1.0.19" rel="noopener" target="_blank">HKCharacteristicType</a></p><p>&quot;A type that represents data that doesn’t typically change over time.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hksampletype?v=1.0.19" rel="noopener" target="_blank">HKSampleType</a></p><p>&quot;An abstract superclass for all classes that identify a specific type of sample when working with the HealthKit store.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkaudiogramsampletype?v=1.0.19" rel="noopener" target="_blank">HKAudiogramSampleType</a></p><p>&quot;An abstract superclass for all classes that identify a specific type of sample when working with the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcategorytype?v=1.0.19" rel="noopener" target="_blank">HKCategoryType</a></p><p>&quot;A type that identifies samples that contain a value from a small set of possible values.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkclinicaltype?v=1.0.19" rel="noopener" target="_blank">HKClinicalType</a></p><p>&quot;A type that identifies samples that contain clinical record data.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcorrelationtype?v=1.0.19" rel="noopener" target="_blank">HKCorrelationType</a></p><p>&quot;A type that identifies samples that group multiple subsamples.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkdocumenttype?v=1.0.19" rel="noopener" target="_blank">HKDocumentType</a></p><p>&quot;A sample type used to create queries for documents.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkelectrocardiogramtype?v=1.0.19" rel="noopener" target="_blank">HKElectrocardiogramType</a></p><p>&quot;A type that identifies samples containing electrocardiogram data.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkquantitytype?v=1.0.19" rel="noopener" target="_blank">HKQuantityType</a></p><p>&quot;A type that identifies samples that store numerical values.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkseriestype?v=1.0.19" rel="noopener" target="_blank">HKSeriesType</a></p><p>&quot;A type that indicates the data stored in a series sample.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkworkouttype?v=1.0.19" rel="noopener" target="_blank">HKWorkoutType</a></p><p>&quot;A type that identifies samples that store information about a workout.&quot;</p></li></ul></li></ul></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkquery?v=1.0.19" rel="noopener" target="_blank">HKQuery</a></p><p>&quot;An abstract class for all the query classes in HealthKit.&quot;</p><ul><li><p><a href="https://developer.apple.com/documentation/healthkit/hkactivitysummaryquery?v=1.0.19" rel="noopener" target="_blank">HKActivitySummaryQuery</a></p><p>&quot;A query for reading activity summary objects from the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkanchoredobjectquery?v=1.0.19" rel="noopener" target="_blank">HKAnchoredObjectQuery</a></p><p>&quot;A query that returns changes to the HealthKit store, including a snapshot of new changes and continuous monitoring as a long-running query.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkcorrelationquery?v=1.0.19" rel="noopener" target="_blank">HKCorrelationQuery</a></p><p>&quot;A query that performs complex searches based on the correlation’s contents, and returns a snapshot of all matching samples.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkdocumentquery?v=1.0.19" rel="noopener" target="_blank">HKDocumentQuery</a></p><p>&quot;A query that returns a snapshot of all matching documents currently saved in the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkelectrocardiogramquery?v=1.0.19" rel="noopener" target="_blank">HKElectrocardiogramQuery</a></p><p>&quot;A query that returns the underlying voltage measurements for an electrocardiogram sample.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkheartbeatseriesquery?v=1.0.19" rel="noopener" target="_blank">HKHeartbeatSeriesQuery</a></p><p>&quot;A query that returns the heartbeat data contained in a heartbeat series sample.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkobserverquery?v=1.0.19" rel="noopener" target="_blank">HKObserverQuery</a></p><p>&quot;A long-running query that monitors the HealthKit store and updates your app when the HealthKit store saves or deletes a matching sample.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkquantityseriessamplequery?v=1.0.19" rel="noopener" target="_blank">HKQuantitySeriesSampleQuery</a></p><p>&quot;A query that accesses the series data associated with a quantity sample.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hksamplequery?v=1.0.19" rel="noopener" target="_blank">HKSampleQuery</a></p><p>&quot;A general query that returns a snapshot of all the matching samples currently saved in the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hksourcequery?v=1.0.19" rel="noopener" target="_blank">HKSourceQuery</a></p><p>&quot;A query that returns a list of sources, such as apps and devices, that have saved matching queries to the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkstatisticscollectionquery?v=1.0.19" rel="noopener" target="_blank">HKStatisticsCollectionQuery</a></p><p>&quot;A query that performs multiple statistics queries over a series of fixed-length time intervals.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkstatisticsquery?v=1.0.19" rel="noopener" target="_blank">HKStatisticsQuery</a></p><p>&quot;A query that performs statistical calculations over a set of matching quantity samples, and returns the results.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkverifiableclinicalrecordquery?v=1.0.19" rel="noopener" target="_blank">HKVerifiableClinicalRecordQuery</a></p><p>&quot;A query for one-time access to a SMART Health Card.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkworkoutroutequery?v=1.0.19" rel="noopener" target="_blank">HKWorkoutRouteQuery</a></p><p>&quot;A query to access the location data stored in a workout route.&quot;</p></li></ul></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkquerydescriptor?changes=_5?v=1.0.19" rel="noopener" target="_blank">HKQueryDescriptor</a></p><p>&quot;A descriptor that specifies a set of samples based on the data type and a predicate.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkstatistics?v=1.0.19" rel="noopener" target="_blank">HKStatistics</a></p><p>&quot;An object that represents the result of calculating the minimum, maximum, average, or sum over a set of samples from the HealthKit store.&quot;</p></li><li><p><a href="https://developer.apple.com/documentation/healthkit/hkstatisticscollection?v=1.0.19" rel="noopener" target="_blank">HKStatisticsCollection</a></p><p>&quot;An object that manages a collection of statistics, representing the results calculated over separate time intervals.&quot;</p></li></ul></article>